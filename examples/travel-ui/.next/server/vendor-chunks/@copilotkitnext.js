"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@copilotkitnext";
exports.ids = ["vendor-chunks/@copilotkitnext"];
exports.modules = {

/***/ "(ssr)/./node_modules/@copilotkitnext/core/dist/index.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@copilotkitnext/core/dist/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgentRegistry: () => (/* binding */ AgentRegistry),\n/* harmony export */   ContextStore: () => (/* binding */ ContextStore),\n/* harmony export */   CopilotKitCore: () => (/* binding */ CopilotKitCore),\n/* harmony export */   CopilotKitCoreErrorCode: () => (/* binding */ CopilotKitCoreErrorCode),\n/* harmony export */   CopilotKitCoreRuntimeConnectionStatus: () => (/* binding */ CopilotKitCoreRuntimeConnectionStatus),\n/* harmony export */   ProxiedCopilotRuntimeAgent: () => (/* binding */ ProxiedCopilotRuntimeAgent),\n/* harmony export */   RunHandler: () => (/* binding */ RunHandler),\n/* harmony export */   StateManager: () => (/* binding */ StateManager),\n/* harmony export */   SuggestionEngine: () => (/* binding */ SuggestionEngine),\n/* harmony export */   ToolCallStatus: () => (/* binding */ ToolCallStatus),\n/* harmony export */   completePartialMarkdown: () => (/* binding */ completePartialMarkdown)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ag-ui/client */ \"(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/client/dist/index.mjs\");\n/* harmony import */ var _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @copilotkitnext/shared */ \"(ssr)/./node_modules/@copilotkitnext/shared/dist/index.mjs\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod-to-json-schema */ \"(ssr)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n// src/core/agent-registry.ts\n\n\n\n// src/agent.ts\n\nvar ProxiedCopilotRuntimeAgent = class extends _ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.HttpAgent {\n  runtimeUrl;\n  credentials;\n  transport;\n  singleEndpointUrl;\n  constructor(config) {\n    const normalizedRuntimeUrl = config.runtimeUrl ? config.runtimeUrl.replace(/\\/$/, \"\") : void 0;\n    const transport = config.transport ?? \"rest\";\n    const runUrl = transport === \"single\" ? normalizedRuntimeUrl ?? config.runtimeUrl ?? \"\" : `${normalizedRuntimeUrl ?? config.runtimeUrl}/agent/${encodeURIComponent(config.agentId ?? \"\")}/run`;\n    if (!runUrl) {\n      throw new Error(\"ProxiedCopilotRuntimeAgent requires a runtimeUrl when transport is set to 'single'.\");\n    }\n    super({\n      ...config,\n      url: runUrl\n    });\n    this.runtimeUrl = normalizedRuntimeUrl ?? config.runtimeUrl;\n    this.credentials = config.credentials;\n    this.transport = transport;\n    if (this.transport === \"single\") {\n      this.singleEndpointUrl = this.runtimeUrl;\n    }\n  }\n  abortRun() {\n    if (!this.agentId || !this.threadId) {\n      return;\n    }\n    if (typeof fetch === \"undefined\") {\n      return;\n    }\n    if (this.transport === \"single\") {\n      if (!this.singleEndpointUrl) {\n        return;\n      }\n      const headers = new Headers({ ...this.headers, \"Content-Type\": \"application/json\" });\n      void fetch(this.singleEndpointUrl, {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify({\n          method: \"agent/stop\",\n          params: {\n            agentId: this.agentId,\n            threadId: this.threadId\n          }\n        }),\n        ...this.credentials ? { credentials: this.credentials } : {}\n      }).catch((error) => {\n        console.error(\"ProxiedCopilotRuntimeAgent: stop request failed\", error);\n      });\n      return;\n    }\n    if (!this.runtimeUrl) {\n      return;\n    }\n    const stopPath = `${this.runtimeUrl}/agent/${encodeURIComponent(this.agentId)}/stop/${encodeURIComponent(this.threadId)}`;\n    const origin = typeof window !== \"undefined\" && window.location ? window.location.origin : \"http://localhost\";\n    const base = new URL(this.runtimeUrl, origin);\n    const stopUrl = new URL(stopPath, base);\n    void fetch(stopUrl.toString(), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.headers\n      },\n      ...this.credentials ? { credentials: this.credentials } : {}\n    }).catch((error) => {\n      console.error(\"ProxiedCopilotRuntimeAgent: stop request failed\", error);\n    });\n  }\n  connect(input) {\n    if (this.transport === \"single\") {\n      if (!this.singleEndpointUrl) {\n        throw new Error(\"Single endpoint transport requires a runtimeUrl\");\n      }\n      const requestInit = this.createSingleRouteRequestInit(input, \"agent/connect\", {\n        agentId: this.agentId\n      });\n      const httpEvents2 = (0,_ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.runHttpRequest)(this.singleEndpointUrl, requestInit);\n      return (0,_ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.transformHttpEventStream)(httpEvents2);\n    }\n    const httpEvents = (0,_ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.runHttpRequest)(`${this.runtimeUrl}/agent/${this.agentId}/connect`, this.requestInit(input));\n    return (0,_ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.transformHttpEventStream)(httpEvents);\n  }\n  run(input) {\n    if (this.transport === \"single\") {\n      if (!this.singleEndpointUrl) {\n        throw new Error(\"Single endpoint transport requires a runtimeUrl\");\n      }\n      const requestInit = this.createSingleRouteRequestInit(input, \"agent/run\", {\n        agentId: this.agentId\n      });\n      const httpEvents = (0,_ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.runHttpRequest)(this.singleEndpointUrl, requestInit);\n      return (0,_ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.transformHttpEventStream)(httpEvents);\n    }\n    return super.run(input);\n  }\n  clone() {\n    const cloned = super.clone();\n    cloned.runtimeUrl = this.runtimeUrl;\n    cloned.credentials = this.credentials;\n    cloned.transport = this.transport;\n    cloned.singleEndpointUrl = this.singleEndpointUrl;\n    return cloned;\n  }\n  createSingleRouteRequestInit(input, method, params) {\n    if (!this.agentId) {\n      throw new Error(\"ProxiedCopilotRuntimeAgent requires agentId to make runtime requests\");\n    }\n    const baseInit = super.requestInit(input);\n    const headers = new Headers(baseInit.headers ?? {});\n    headers.set(\"Content-Type\", \"application/json\");\n    headers.set(\"Accept\", headers.get(\"Accept\") ?? \"text/event-stream\");\n    let originalBody = void 0;\n    if (typeof baseInit.body === \"string\") {\n      try {\n        originalBody = JSON.parse(baseInit.body);\n      } catch (error) {\n        console.warn(\"ProxiedCopilotRuntimeAgent: failed to parse request body for single route transport\", error);\n        originalBody = void 0;\n      }\n    }\n    const envelope = {\n      method\n    };\n    if (params && Object.keys(params).length > 0) {\n      envelope.params = params;\n    }\n    if (originalBody !== void 0) {\n      envelope.body = originalBody;\n    }\n    return {\n      ...baseInit,\n      headers,\n      body: JSON.stringify(envelope),\n      ...this.credentials ? { credentials: this.credentials } : {}\n    };\n  }\n};\n\n// src/core/agent-registry.ts\nvar AgentRegistry = class {\n  constructor(core) {\n    this.core = core;\n  }\n  _agents = {};\n  localAgents = {};\n  remoteAgents = {};\n  _runtimeUrl;\n  _runtimeVersion;\n  _runtimeConnectionStatus = \"disconnected\" /* Disconnected */;\n  _runtimeTransport = \"rest\";\n  _audioFileTranscriptionEnabled = false;\n  /**\n   * Get all agents as a readonly record\n   */\n  get agents() {\n    return this._agents;\n  }\n  get runtimeUrl() {\n    return this._runtimeUrl;\n  }\n  get runtimeVersion() {\n    return this._runtimeVersion;\n  }\n  get runtimeConnectionStatus() {\n    return this._runtimeConnectionStatus;\n  }\n  get runtimeTransport() {\n    return this._runtimeTransport;\n  }\n  get audioFileTranscriptionEnabled() {\n    return this._audioFileTranscriptionEnabled;\n  }\n  /**\n   * Initialize agents from configuration\n   */\n  initialize(agents) {\n    this.localAgents = this.assignAgentIds(agents);\n    this.applyHeadersToAgents(this.localAgents);\n    this._agents = this.localAgents;\n  }\n  /**\n   * Set the runtime URL and update connection\n   */\n  setRuntimeUrl(runtimeUrl) {\n    const normalizedRuntimeUrl = runtimeUrl ? runtimeUrl.replace(/\\/$/, \"\") : void 0;\n    if (this._runtimeUrl === normalizedRuntimeUrl) {\n      return;\n    }\n    this._runtimeUrl = normalizedRuntimeUrl;\n    void this.updateRuntimeConnection();\n  }\n  setRuntimeTransport(runtimeTransport) {\n    if (this._runtimeTransport === runtimeTransport) {\n      return;\n    }\n    this._runtimeTransport = runtimeTransport;\n    void this.updateRuntimeConnection();\n  }\n  /**\n   * Set all agents at once (for development use)\n   */\n  setAgents__unsafe_dev_only(agents) {\n    Object.entries(agents).forEach(([id, agent]) => {\n      if (agent) {\n        this.validateAndAssignAgentId(id, agent);\n      }\n    });\n    this.localAgents = agents;\n    this._agents = { ...this.localAgents, ...this.remoteAgents };\n    this.applyHeadersToAgents(this._agents);\n    void this.notifyAgentsChanged();\n  }\n  /**\n   * Add a single agent (for development use)\n   */\n  addAgent__unsafe_dev_only({ id, agent }) {\n    this.validateAndAssignAgentId(id, agent);\n    this.localAgents[id] = agent;\n    this.applyHeadersToAgent(agent);\n    this._agents = { ...this.localAgents, ...this.remoteAgents };\n    void this.notifyAgentsChanged();\n  }\n  /**\n   * Remove an agent by ID (for development use)\n   */\n  removeAgent__unsafe_dev_only(id) {\n    delete this.localAgents[id];\n    this._agents = { ...this.localAgents, ...this.remoteAgents };\n    void this.notifyAgentsChanged();\n  }\n  /**\n   * Get an agent by ID\n   */\n  getAgent(id) {\n    if (id in this._agents) {\n      return this._agents[id];\n    }\n    if (this.runtimeUrl !== void 0 && (this.runtimeConnectionStatus === \"disconnected\" /* Disconnected */ || this.runtimeConnectionStatus === \"connecting\" /* Connecting */)) {\n      return void 0;\n    }\n    console.warn(`Agent ${id} not found`);\n    return void 0;\n  }\n  /**\n   * Apply current headers to an agent\n   */\n  applyHeadersToAgent(agent) {\n    if (agent instanceof _ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.HttpAgent) {\n      agent.headers = { ...this.core.headers };\n    }\n  }\n  /**\n   * Apply current headers to all agents\n   */\n  applyHeadersToAgents(agents) {\n    Object.values(agents).forEach((agent) => {\n      this.applyHeadersToAgent(agent);\n    });\n  }\n  /**\n   * Apply current credentials to an agent\n   */\n  applyCredentialsToAgent(agent) {\n    if (agent instanceof ProxiedCopilotRuntimeAgent) {\n      agent.credentials = this.core.credentials;\n    }\n  }\n  /**\n   * Apply current credentials to all agents\n   */\n  applyCredentialsToAgents(agents) {\n    Object.values(agents).forEach((agent) => {\n      this.applyCredentialsToAgent(agent);\n    });\n  }\n  /**\n   * Update runtime connection and fetch remote agents\n   */\n  async updateRuntimeConnection() {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    if (!this.runtimeUrl) {\n      this._runtimeConnectionStatus = \"disconnected\" /* Disconnected */;\n      this._runtimeVersion = void 0;\n      this._audioFileTranscriptionEnabled = false;\n      this.remoteAgents = {};\n      this._agents = this.localAgents;\n      await this.notifyRuntimeStatusChanged(\"disconnected\" /* Disconnected */);\n      await this.notifyAgentsChanged();\n      return;\n    }\n    this._runtimeConnectionStatus = \"connecting\" /* Connecting */;\n    await this.notifyRuntimeStatusChanged(\"connecting\" /* Connecting */);\n    try {\n      const runtimeInfoResponse = await this.fetchRuntimeInfo();\n      const {\n        version,\n        ...runtimeInfo\n      } = runtimeInfoResponse;\n      const credentials = this.core.credentials;\n      const agents = Object.fromEntries(\n        Object.entries(runtimeInfo.agents).map(([id, { description }]) => {\n          const agent = new ProxiedCopilotRuntimeAgent({\n            runtimeUrl: this.runtimeUrl,\n            agentId: id,\n            // Runtime agents always have their ID set correctly\n            description,\n            transport: this._runtimeTransport,\n            credentials\n          });\n          this.applyHeadersToAgent(agent);\n          return [id, agent];\n        })\n      );\n      this.remoteAgents = agents;\n      this._agents = { ...this.localAgents, ...this.remoteAgents };\n      this._runtimeConnectionStatus = \"connected\" /* Connected */;\n      this._runtimeVersion = version;\n      this._audioFileTranscriptionEnabled = runtimeInfoResponse.audioFileTranscriptionEnabled ?? false;\n      await this.notifyRuntimeStatusChanged(\"connected\" /* Connected */);\n      await this.notifyAgentsChanged();\n    } catch (error) {\n      this._runtimeConnectionStatus = \"error\" /* Error */;\n      this._runtimeVersion = void 0;\n      this._audioFileTranscriptionEnabled = false;\n      this.remoteAgents = {};\n      this._agents = this.localAgents;\n      await this.notifyRuntimeStatusChanged(\"error\" /* Error */);\n      await this.notifyAgentsChanged();\n      const message = error instanceof Error ? error.message : JSON.stringify(error);\n      _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.logger.warn(`Failed to load runtime info (${this.runtimeUrl}/info): ${message}`);\n      const runtimeError = error instanceof Error ? error : new Error(String(error));\n      await this.core.emitError({\n        error: runtimeError,\n        code: \"runtime_info_fetch_failed\" /* RUNTIME_INFO_FETCH_FAILED */,\n        context: {\n          runtimeUrl: this.runtimeUrl\n        }\n      });\n    }\n  }\n  async fetchRuntimeInfo() {\n    if (!this.runtimeUrl) {\n      throw new Error(\"Runtime URL is not set\");\n    }\n    const baseHeaders = this.core.headers;\n    const credentials = this.core.credentials;\n    const headers = {\n      ...baseHeaders\n    };\n    if (this._runtimeTransport === \"single\") {\n      if (!headers[\"Content-Type\"]) {\n        headers[\"Content-Type\"] = \"application/json\";\n      }\n      const response2 = await fetch(this.runtimeUrl, {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify({ method: \"info\" }),\n        ...credentials ? { credentials } : {}\n      });\n      if (\"ok\" in response2 && !response2.ok) {\n        throw new Error(`Runtime info request failed with status ${response2.status}`);\n      }\n      return await response2.json();\n    }\n    const response = await fetch(`${this.runtimeUrl}/info`, {\n      headers,\n      ...credentials ? { credentials } : {}\n    });\n    if (\"ok\" in response && !response.ok) {\n      throw new Error(`Runtime info request failed with status ${response.status}`);\n    }\n    return await response.json();\n  }\n  /**\n   * Assign agent IDs to a record of agents\n   */\n  assignAgentIds(agents) {\n    Object.entries(agents).forEach(([id, agent]) => {\n      if (agent) {\n        this.validateAndAssignAgentId(id, agent);\n      }\n    });\n    return agents;\n  }\n  /**\n   * Validate and assign an agent ID\n   */\n  validateAndAssignAgentId(registrationId, agent) {\n    if (agent.agentId && agent.agentId !== registrationId) {\n      throw new Error(\n        `Agent registration mismatch: Agent with ID \"${agent.agentId}\" cannot be registered under key \"${registrationId}\". The agent ID must match the registration key or be undefined.`\n      );\n    }\n    if (!agent.agentId) {\n      agent.agentId = registrationId;\n    }\n  }\n  /**\n   * Notify subscribers of runtime status changes\n   */\n  async notifyRuntimeStatusChanged(status) {\n    await this.core.notifySubscribers(\n      (subscriber) => subscriber.onRuntimeConnectionStatusChanged?.({\n        copilotkit: this.core,\n        status\n      }),\n      \"Error in CopilotKitCore subscriber (onRuntimeConnectionStatusChanged):\"\n    );\n  }\n  /**\n   * Notify subscribers of agent changes\n   */\n  async notifyAgentsChanged() {\n    await this.core.notifySubscribers(\n      (subscriber) => subscriber.onAgentsChanged?.({\n        copilotkit: this.core,\n        agents: this._agents\n      }),\n      \"Subscriber onAgentsChanged error:\"\n    );\n  }\n};\n\n// src/core/context-store.ts\n\nvar ContextStore = class {\n  constructor(core) {\n    this.core = core;\n  }\n  _context = {};\n  /**\n   * Get all context entries as a readonly record\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * Add a new context entry\n   * @returns The ID of the created context entry\n   */\n  addContext({ description, value }) {\n    const id = (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n    this._context[id] = { description, value };\n    void this.notifySubscribers();\n    return id;\n  }\n  /**\n   * Remove a context entry by ID\n   */\n  removeContext(id) {\n    delete this._context[id];\n    void this.notifySubscribers();\n  }\n  /**\n   * Notify all subscribers of context changes\n   */\n  async notifySubscribers() {\n    await this.core.notifySubscribers(\n      (subscriber) => subscriber.onContextChanged?.({\n        copilotkit: this.core,\n        context: this._context\n      }),\n      \"Subscriber onContextChanged error:\"\n    );\n  }\n};\n\n// src/core/suggestion-engine.ts\n\nvar SuggestionEngine = class {\n  constructor(core) {\n    this.core = core;\n  }\n  _suggestionsConfig = {};\n  _suggestions = {};\n  _runningSuggestions = {};\n  /**\n   * Initialize with suggestion configs\n   */\n  initialize(suggestionsConfig) {\n    for (const config of suggestionsConfig) {\n      this._suggestionsConfig[(0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.randomUUID)()] = config;\n    }\n  }\n  /**\n   * Add a suggestion configuration\n   * @returns The ID of the created config\n   */\n  addSuggestionsConfig(config) {\n    const id = (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n    this._suggestionsConfig[id] = config;\n    void this.notifySuggestionsConfigChanged();\n    return id;\n  }\n  /**\n   * Remove a suggestion configuration by ID\n   */\n  removeSuggestionsConfig(id) {\n    delete this._suggestionsConfig[id];\n    void this.notifySuggestionsConfigChanged();\n  }\n  /**\n   * Reload suggestions for a specific agent\n   * This triggers generation of new suggestions based on current configs\n   */\n  reloadSuggestions(agentId) {\n    this.clearSuggestions(agentId);\n    const agent = this.core.getAgent(agentId);\n    if (!agent) {\n      return;\n    }\n    const messageCount = agent.messages?.length ?? 0;\n    let hasAnySuggestions = false;\n    for (const config of Object.values(this._suggestionsConfig)) {\n      if (config.consumerAgentId !== void 0 && config.consumerAgentId !== \"*\" && config.consumerAgentId !== agentId) {\n        continue;\n      }\n      if (!this.shouldShowSuggestions(config, messageCount)) {\n        continue;\n      }\n      const suggestionId = (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.randomUUID)();\n      if (isDynamicSuggestionsConfig(config)) {\n        if (!hasAnySuggestions) {\n          hasAnySuggestions = true;\n          void this.notifySuggestionsStartedLoading(agentId);\n        }\n        void this.generateSuggestions(suggestionId, config, agentId);\n      } else if (isStaticSuggestionsConfig(config)) {\n        this.addStaticSuggestions(suggestionId, config, agentId);\n      }\n    }\n  }\n  /**\n   * Clear all suggestions for a specific agent\n   */\n  clearSuggestions(agentId) {\n    const runningAgents = this._runningSuggestions[agentId];\n    if (runningAgents) {\n      for (const agent of runningAgents) {\n        agent.abortRun();\n      }\n      delete this._runningSuggestions[agentId];\n    }\n    this._suggestions[agentId] = {};\n    void this.notifySuggestionsChanged(agentId, []);\n  }\n  /**\n   * Get current suggestions for an agent\n   */\n  getSuggestions(agentId) {\n    const suggestions = Object.values(this._suggestions[agentId] ?? {}).flat();\n    const isLoading = (this._runningSuggestions[agentId]?.length ?? 0) > 0;\n    return { suggestions, isLoading };\n  }\n  /**\n   * Generate suggestions using a provider agent\n   */\n  async generateSuggestions(suggestionId, config, consumerAgentId) {\n    let agent = void 0;\n    try {\n      const suggestionsProviderAgent = this.core.getAgent(\n        config.providerAgentId ?? \"default\"\n      );\n      if (!suggestionsProviderAgent) {\n        throw new Error(`Suggestions provider agent not found: ${config.providerAgentId}`);\n      }\n      const suggestionsConsumerAgent = this.core.getAgent(consumerAgentId);\n      if (!suggestionsConsumerAgent) {\n        throw new Error(`Suggestions consumer agent not found: ${consumerAgentId}`);\n      }\n      const clonedAgent = suggestionsProviderAgent.clone();\n      agent = clonedAgent;\n      agent.threadId = suggestionId;\n      agent.messages = JSON.parse(JSON.stringify(suggestionsConsumerAgent.messages));\n      agent.state = JSON.parse(JSON.stringify(suggestionsConsumerAgent.state));\n      this._suggestions[consumerAgentId] = {\n        ...this._suggestions[consumerAgentId] ?? {},\n        [suggestionId]: []\n      };\n      this._runningSuggestions[consumerAgentId] = [...this._runningSuggestions[consumerAgentId] ?? [], agent];\n      agent.addMessage({\n        id: suggestionId,\n        role: \"user\",\n        content: [\n          `Suggest what the user could say next. Provide clear, highly relevant suggestions by calling the \\`copilotkitSuggest\\` tool.`,\n          `Provide at least ${config.minSuggestions ?? 1} and at most ${config.maxSuggestions ?? 3} suggestions.`,\n          `The user has the following tools available: ${JSON.stringify(this.core.buildFrontendTools(consumerAgentId))}.`,\n          ` ${config.instructions}`\n        ].join(\"\\n\")\n      });\n      await agent.runAgent(\n        {\n          context: Object.values(this.core.context),\n          forwardedProps: {\n            ...this.core.properties,\n            toolChoice: { type: \"function\", function: { name: \"copilotkitSuggest\" } }\n          },\n          tools: [SUGGEST_TOOL]\n        },\n        {\n          onMessagesChanged: ({ messages }) => {\n            this.extractSuggestions(messages, suggestionId, consumerAgentId, true);\n          }\n        }\n      );\n    } catch (error) {\n      console.warn(\"Error generating suggestions:\", error);\n    } finally {\n      this.finalizeSuggestions(suggestionId, consumerAgentId);\n      const runningAgents = this._runningSuggestions[consumerAgentId];\n      if (agent && runningAgents) {\n        const filteredAgents = runningAgents.filter((a) => a !== agent);\n        this._runningSuggestions[consumerAgentId] = filteredAgents;\n        if (filteredAgents.length === 0) {\n          delete this._runningSuggestions[consumerAgentId];\n          await this.notifySuggestionsFinishedLoading(consumerAgentId);\n        }\n      }\n    }\n  }\n  /**\n   * Finalize suggestions by marking them as no longer loading\n   */\n  finalizeSuggestions(suggestionId, consumerAgentId) {\n    const agentSuggestions = this._suggestions[consumerAgentId];\n    const currentSuggestions = agentSuggestions?.[suggestionId];\n    if (agentSuggestions && currentSuggestions && currentSuggestions.length > 0) {\n      const finalizedSuggestions = currentSuggestions.filter((suggestion) => suggestion.title !== \"\" || suggestion.message !== \"\").map((suggestion) => ({\n        ...suggestion,\n        isLoading: false\n      }));\n      if (finalizedSuggestions.length > 0) {\n        agentSuggestions[suggestionId] = finalizedSuggestions;\n      } else {\n        delete agentSuggestions[suggestionId];\n      }\n      const allSuggestions = Object.values(this._suggestions[consumerAgentId] ?? {}).flat();\n      void this.notifySuggestionsChanged(consumerAgentId, allSuggestions, \"finalized\");\n    }\n  }\n  /**\n   * Extract suggestions from messages (called during streaming)\n   */\n  extractSuggestions(messages, suggestionId, consumerAgentId, isRunning) {\n    const idx = messages.findIndex((message) => message.id === suggestionId);\n    if (idx == -1) {\n      return;\n    }\n    const suggestions = [];\n    const newMessages = messages.slice(idx + 1);\n    for (const message of newMessages) {\n      if (message.role === \"assistant\" && message.toolCalls) {\n        for (const toolCall of message.toolCalls) {\n          if (toolCall.function.name === \"copilotkitSuggest\") {\n            const fullArgs = Array.isArray(toolCall.function.arguments) ? toolCall.function.arguments.join(\"\") : toolCall.function.arguments;\n            const parsed = (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.partialJSONParse)(fullArgs);\n            if (parsed && typeof parsed === \"object\" && \"suggestions\" in parsed) {\n              const parsedSuggestions = parsed.suggestions;\n              if (Array.isArray(parsedSuggestions)) {\n                for (const item of parsedSuggestions) {\n                  if (item && typeof item === \"object\" && \"title\" in item) {\n                    suggestions.push({\n                      title: item.title ?? \"\",\n                      message: item.message ?? \"\",\n                      isLoading: false\n                      // Will be set correctly below\n                    });\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (isRunning && suggestions.length > 0) {\n      suggestions[suggestions.length - 1].isLoading = true;\n    }\n    const agentSuggestions = this._suggestions[consumerAgentId];\n    if (agentSuggestions) {\n      agentSuggestions[suggestionId] = suggestions;\n      const allSuggestions = Object.values(this._suggestions[consumerAgentId] ?? {}).flat();\n      void this.notifySuggestionsChanged(consumerAgentId, allSuggestions, \"suggestions changed\");\n    }\n  }\n  /**\n   * Notify subscribers of suggestions config changes\n   */\n  async notifySuggestionsConfigChanged() {\n    await this.core.notifySubscribers(\n      (subscriber) => subscriber.onSuggestionsConfigChanged?.({\n        copilotkit: this.core,\n        suggestionsConfig: this._suggestionsConfig\n      }),\n      \"Subscriber onSuggestionsConfigChanged error:\"\n    );\n  }\n  /**\n   * Notify subscribers of suggestions changes\n   */\n  async notifySuggestionsChanged(agentId, suggestions, context = \"\") {\n    await this.core.notifySubscribers(\n      (subscriber) => subscriber.onSuggestionsChanged?.({\n        copilotkit: this.core,\n        agentId,\n        suggestions\n      }),\n      `Subscriber onSuggestionsChanged error: ${context}`\n    );\n  }\n  /**\n   * Notify subscribers that suggestions started loading\n   */\n  async notifySuggestionsStartedLoading(agentId) {\n    await this.core.notifySubscribers(\n      (subscriber) => subscriber.onSuggestionsStartedLoading?.({\n        copilotkit: this.core,\n        agentId\n      }),\n      \"Subscriber onSuggestionsStartedLoading error:\"\n    );\n  }\n  /**\n   * Notify subscribers that suggestions finished loading\n   */\n  async notifySuggestionsFinishedLoading(agentId) {\n    await this.core.notifySubscribers(\n      (subscriber) => subscriber.onSuggestionsFinishedLoading?.({\n        copilotkit: this.core,\n        agentId\n      }),\n      \"Subscriber onSuggestionsFinishedLoading error:\"\n    );\n  }\n  /**\n   * Check if suggestions should be shown based on availability and message count\n   */\n  shouldShowSuggestions(config, messageCount) {\n    const availability = config.available;\n    if (!availability) {\n      if (isDynamicSuggestionsConfig(config)) {\n        return messageCount > 0;\n      } else {\n        return messageCount === 0;\n      }\n    }\n    switch (availability) {\n      case \"disabled\":\n        return false;\n      case \"before-first-message\":\n        return messageCount === 0;\n      case \"after-first-message\":\n        return messageCount > 0;\n      case \"always\":\n        return true;\n      default:\n        return false;\n    }\n  }\n  /**\n   * Add static suggestions directly without AI generation\n   */\n  addStaticSuggestions(suggestionId, config, consumerAgentId) {\n    const suggestions = config.suggestions.map((s) => ({\n      ...s,\n      isLoading: false\n    }));\n    this._suggestions[consumerAgentId] = {\n      ...this._suggestions[consumerAgentId] ?? {},\n      [suggestionId]: suggestions\n    };\n    const allSuggestions = Object.values(this._suggestions[consumerAgentId] ?? {}).flat();\n    void this.notifySuggestionsChanged(consumerAgentId, allSuggestions, \"static suggestions added\");\n  }\n};\nfunction isDynamicSuggestionsConfig(config) {\n  return \"instructions\" in config;\n}\nfunction isStaticSuggestionsConfig(config) {\n  return \"suggestions\" in config;\n}\nvar SUGGEST_TOOL = {\n  name: \"copilotkitSuggest\",\n  description: \"Suggest what the user could say next\",\n  parameters: {\n    type: \"object\",\n    properties: {\n      suggestions: {\n        type: \"array\",\n        description: \"List of suggestions shown to the user as buttons.\",\n        items: {\n          type: \"object\",\n          properties: {\n            title: {\n              type: \"string\",\n              description: \"The title of the suggestion. This is shown as a button and should be short.\"\n            },\n            message: {\n              type: \"string\",\n              description: \"The message to send when the suggestion is clicked. This should be a clear, complete sentence and will be sent as an instruction to the AI.\"\n            }\n          },\n          required: [\"title\", \"message\"]\n        }\n      }\n    },\n    required: [\"suggestions\"]\n  }\n};\n\n// src/core/run-handler.ts\n\n\n\nvar RunHandler = class {\n  constructor(core) {\n    this.core = core;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _tools = [];\n  /**\n   * Get all tools as a readonly array\n   */\n  get tools() {\n    return this._tools;\n  }\n  /**\n   * Initialize with tools\n   */\n  initialize(tools) {\n    this._tools = tools;\n  }\n  /**\n   * Add a tool to the registry\n   */\n  addTool(tool) {\n    const existingToolIndex = this._tools.findIndex((t) => t.name === tool.name && t.agentId === tool.agentId);\n    if (existingToolIndex !== -1) {\n      _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.logger.warn(`Tool already exists: '${tool.name}' for agent '${tool.agentId || \"global\"}', skipping.`);\n      return;\n    }\n    this._tools.push(tool);\n  }\n  /**\n   * Remove a tool by name and optionally by agentId\n   */\n  removeTool(id, agentId) {\n    this._tools = this._tools.filter((tool) => {\n      if (agentId !== void 0) {\n        return !(tool.name === id && tool.agentId === agentId);\n      }\n      return !(tool.name === id && !tool.agentId);\n    });\n  }\n  /**\n   * Get a tool by name and optionally by agentId.\n   * If agentId is provided, it will first look for an agent-specific tool,\n   * then fall back to a global tool with the same name.\n   */\n  getTool(params) {\n    const { toolName, agentId } = params;\n    if (agentId) {\n      const agentTool = this._tools.find((tool) => tool.name === toolName && tool.agentId === agentId);\n      if (agentTool) {\n        return agentTool;\n      }\n    }\n    return this._tools.find((tool) => tool.name === toolName && !tool.agentId);\n  }\n  /**\n   * Set all tools at once. Replaces existing tools.\n   */\n  setTools(tools) {\n    this._tools = [...tools];\n  }\n  /**\n   * Connect an agent (establish initial connection)\n   */\n  async connectAgent({ agent }) {\n    try {\n      await agent.detachActiveRun();\n      agent.setMessages([]);\n      agent.setState({});\n      if (agent instanceof _ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.HttpAgent) {\n        agent.headers = { ...this.core.headers };\n      }\n      const runAgentResult = await agent.connectAgent(\n        {\n          forwardedProps: this.core.properties,\n          tools: this.buildFrontendTools(agent.agentId)\n        },\n        this.createAgentErrorSubscriber(agent)\n      );\n      return this.processAgentResult({ runAgentResult, agent });\n    } catch (error) {\n      const connectError = error instanceof Error ? error : new Error(String(error));\n      const context = {};\n      if (agent.agentId) {\n        context.agentId = agent.agentId;\n      }\n      await this.core.emitError({\n        error: connectError,\n        code: \"agent_connect_failed\" /* AGENT_CONNECT_FAILED */,\n        context\n      });\n      throw error;\n    }\n  }\n  /**\n   * Run an agent\n   */\n  async runAgent({ agent }) {\n    if (agent.agentId) {\n      void this.core.suggestionEngine.clearSuggestions(agent.agentId);\n    }\n    if (agent instanceof _ag_ui_client__WEBPACK_IMPORTED_MODULE_1__.HttpAgent) {\n      agent.headers = { ...this.core.headers };\n    }\n    try {\n      const runAgentResult = await agent.runAgent(\n        {\n          forwardedProps: this.core.properties,\n          tools: this.buildFrontendTools(agent.agentId),\n          context: Object.values(this.core.context)\n        },\n        this.createAgentErrorSubscriber(agent)\n      );\n      return this.processAgentResult({ runAgentResult, agent });\n    } catch (error) {\n      const runError = error instanceof Error ? error : new Error(String(error));\n      const context = {};\n      if (agent.agentId) {\n        context.agentId = agent.agentId;\n      }\n      await this.core.emitError({\n        error: runError,\n        code: \"agent_run_failed\" /* AGENT_RUN_FAILED */,\n        context\n      });\n      throw error;\n    }\n  }\n  /**\n   * Process agent result and execute tools\n   */\n  async processAgentResult({\n    runAgentResult,\n    agent\n  }) {\n    const { newMessages } = runAgentResult;\n    const agentId = agent.agentId;\n    let needsFollowUp = false;\n    for (const message of newMessages) {\n      if (message.role === \"assistant\") {\n        for (const toolCall of message.toolCalls || []) {\n          if (newMessages.findIndex((m) => m.role === \"tool\" && m.toolCallId === toolCall.id) === -1) {\n            const tool = this.getTool({\n              toolName: toolCall.function.name,\n              agentId: agent.agentId\n            });\n            if (tool) {\n              const followUp = await this.executeSpecificTool(tool, toolCall, message, agent, agentId);\n              if (followUp) {\n                needsFollowUp = true;\n              }\n            } else {\n              const wildcardTool = this.getTool({ toolName: \"*\", agentId: agent.agentId });\n              if (wildcardTool) {\n                const followUp = await this.executeWildcardTool(wildcardTool, toolCall, message, agent, agentId);\n                if (followUp) {\n                  needsFollowUp = true;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (needsFollowUp) {\n      return await this.runAgent({ agent });\n    }\n    void this.core.suggestionEngine.reloadSuggestions(agentId);\n    return runAgentResult;\n  }\n  /**\n   * Execute a specific tool\n   */\n  async executeSpecificTool(tool, toolCall, message, agent, agentId) {\n    if (tool?.agentId && tool.agentId !== agent.agentId) {\n      return false;\n    }\n    let toolCallResult = \"\";\n    let errorMessage;\n    let isArgumentError = false;\n    if (tool?.handler) {\n      let parsedArgs;\n      try {\n        parsedArgs = JSON.parse(toolCall.function.arguments);\n      } catch (error) {\n        const parseError = error instanceof Error ? error : new Error(String(error));\n        errorMessage = parseError.message;\n        isArgumentError = true;\n        await this.core.emitError({\n          error: parseError,\n          code: \"tool_argument_parse_failed\" /* TOOL_ARGUMENT_PARSE_FAILED */,\n          context: {\n            agentId,\n            toolCallId: toolCall.id,\n            toolName: toolCall.function.name,\n            rawArguments: toolCall.function.arguments,\n            toolType: \"specific\",\n            messageId: message.id\n          }\n        });\n      }\n      await this.core.notifySubscribers(\n        (subscriber) => subscriber.onToolExecutionStart?.({\n          copilotkit: this.core,\n          toolCallId: toolCall.id,\n          agentId,\n          toolName: toolCall.function.name,\n          args: parsedArgs\n        }),\n        \"Subscriber onToolExecutionStart error:\"\n      );\n      if (!errorMessage) {\n        try {\n          const result = await tool.handler(parsedArgs, toolCall);\n          if (result === void 0 || result === null) {\n            toolCallResult = \"\";\n          } else if (typeof result === \"string\") {\n            toolCallResult = result;\n          } else {\n            toolCallResult = JSON.stringify(result);\n          }\n        } catch (error) {\n          const handlerError = error instanceof Error ? error : new Error(String(error));\n          errorMessage = handlerError.message;\n          await this.core.emitError({\n            error: handlerError,\n            code: \"tool_handler_failed\" /* TOOL_HANDLER_FAILED */,\n            context: {\n              agentId,\n              toolCallId: toolCall.id,\n              toolName: toolCall.function.name,\n              parsedArgs,\n              toolType: \"specific\",\n              messageId: message.id\n            }\n          });\n        }\n      }\n      if (errorMessage) {\n        toolCallResult = `Error: ${errorMessage}`;\n      }\n      await this.core.notifySubscribers(\n        (subscriber) => subscriber.onToolExecutionEnd?.({\n          copilotkit: this.core,\n          toolCallId: toolCall.id,\n          agentId,\n          toolName: toolCall.function.name,\n          result: errorMessage ? \"\" : toolCallResult,\n          error: errorMessage\n        }),\n        \"Subscriber onToolExecutionEnd error:\"\n      );\n      if (isArgumentError) {\n        throw new Error(errorMessage ?? \"Tool execution failed\");\n      }\n    }\n    if (!errorMessage || !isArgumentError) {\n      const messageIndex = agent.messages.findIndex((m) => m.id === message.id);\n      const toolMessage = {\n        id: (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n        role: \"tool\",\n        toolCallId: toolCall.id,\n        content: toolCallResult\n      };\n      agent.messages.splice(messageIndex + 1, 0, toolMessage);\n      if (!errorMessage && tool?.followUp !== false) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Execute a wildcard tool\n   */\n  async executeWildcardTool(wildcardTool, toolCall, message, agent, agentId) {\n    if (wildcardTool?.agentId && wildcardTool.agentId !== agent.agentId) {\n      return false;\n    }\n    let toolCallResult = \"\";\n    let errorMessage;\n    let isArgumentError = false;\n    if (wildcardTool?.handler) {\n      let parsedArgs;\n      try {\n        parsedArgs = JSON.parse(toolCall.function.arguments);\n      } catch (error) {\n        const parseError = error instanceof Error ? error : new Error(String(error));\n        errorMessage = parseError.message;\n        isArgumentError = true;\n        await this.core.emitError({\n          error: parseError,\n          code: \"tool_argument_parse_failed\" /* TOOL_ARGUMENT_PARSE_FAILED */,\n          context: {\n            agentId,\n            toolCallId: toolCall.id,\n            toolName: toolCall.function.name,\n            rawArguments: toolCall.function.arguments,\n            toolType: \"wildcard\",\n            messageId: message.id\n          }\n        });\n      }\n      const wildcardArgs = {\n        toolName: toolCall.function.name,\n        args: parsedArgs\n      };\n      await this.core.notifySubscribers(\n        (subscriber) => subscriber.onToolExecutionStart?.({\n          copilotkit: this.core,\n          toolCallId: toolCall.id,\n          agentId,\n          toolName: toolCall.function.name,\n          args: wildcardArgs\n        }),\n        \"Subscriber onToolExecutionStart error:\"\n      );\n      if (!errorMessage) {\n        try {\n          const result = await wildcardTool.handler(wildcardArgs, toolCall);\n          if (result === void 0 || result === null) {\n            toolCallResult = \"\";\n          } else if (typeof result === \"string\") {\n            toolCallResult = result;\n          } else {\n            toolCallResult = JSON.stringify(result);\n          }\n        } catch (error) {\n          const handlerError = error instanceof Error ? error : new Error(String(error));\n          errorMessage = handlerError.message;\n          await this.core.emitError({\n            error: handlerError,\n            code: \"tool_handler_failed\" /* TOOL_HANDLER_FAILED */,\n            context: {\n              agentId,\n              toolCallId: toolCall.id,\n              toolName: toolCall.function.name,\n              parsedArgs: wildcardArgs,\n              toolType: \"wildcard\",\n              messageId: message.id\n            }\n          });\n        }\n      }\n      if (errorMessage) {\n        toolCallResult = `Error: ${errorMessage}`;\n      }\n      await this.core.notifySubscribers(\n        (subscriber) => subscriber.onToolExecutionEnd?.({\n          copilotkit: this.core,\n          toolCallId: toolCall.id,\n          agentId,\n          toolName: toolCall.function.name,\n          result: errorMessage ? \"\" : toolCallResult,\n          error: errorMessage\n        }),\n        \"Subscriber onToolExecutionEnd error:\"\n      );\n      if (isArgumentError) {\n        throw new Error(errorMessage ?? \"Tool execution failed\");\n      }\n    }\n    if (!errorMessage || !isArgumentError) {\n      const messageIndex = agent.messages.findIndex((m) => m.id === message.id);\n      const toolMessage = {\n        id: (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n        role: \"tool\",\n        toolCallId: toolCall.id,\n        content: toolCallResult\n      };\n      agent.messages.splice(messageIndex + 1, 0, toolMessage);\n      if (!errorMessage && wildcardTool?.followUp !== false) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Build frontend tools for an agent\n   */\n  buildFrontendTools(agentId) {\n    return this._tools.filter((tool) => !tool.agentId || tool.agentId === agentId).map((tool) => ({\n      name: tool.name,\n      description: tool.description ?? \"\",\n      parameters: createToolSchema(tool)\n    }));\n  }\n  /**\n   * Create an agent error subscriber\n   */\n  createAgentErrorSubscriber(agent) {\n    const emitAgentError = async (error, code, extraContext = {}) => {\n      const context = { ...extraContext };\n      if (agent.agentId) {\n        context.agentId = agent.agentId;\n      }\n      await this.core.emitError({\n        error,\n        code,\n        context\n      });\n    };\n    return {\n      onRunFailed: async ({ error }) => {\n        await emitAgentError(error, \"agent_run_failed_event\" /* AGENT_RUN_FAILED_EVENT */, {\n          source: \"onRunFailed\"\n        });\n      },\n      onRunErrorEvent: async ({ event }) => {\n        const eventError = event?.rawEvent instanceof Error ? event.rawEvent : event?.rawEvent?.error instanceof Error ? event.rawEvent.error : void 0;\n        const errorMessage = typeof event?.rawEvent?.error === \"string\" ? event.rawEvent.error : event?.message ?? \"Agent run error\";\n        const rawError = eventError ?? new Error(errorMessage);\n        if (event?.code && !rawError.code) {\n          rawError.code = event.code;\n        }\n        await emitAgentError(rawError, \"agent_run_error_event\" /* AGENT_RUN_ERROR_EVENT */, {\n          source: \"onRunErrorEvent\",\n          event,\n          runtimeErrorCode: event?.code\n        });\n      }\n    };\n  }\n};\nvar EMPTY_TOOL_SCHEMA = {\n  type: \"object\",\n  properties: {}\n};\nfunction createToolSchema(tool) {\n  if (!tool.parameters) {\n    return { ...EMPTY_TOOL_SCHEMA };\n  }\n  const rawSchema = (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_2__.zodToJsonSchema)(tool.parameters, {\n    $refStrategy: \"none\"\n  });\n  if (!rawSchema || typeof rawSchema !== \"object\") {\n    return { ...EMPTY_TOOL_SCHEMA };\n  }\n  const { $schema, ...schema } = rawSchema;\n  if (typeof schema.type !== \"string\") {\n    schema.type = \"object\";\n  }\n  if (typeof schema.properties !== \"object\" || schema.properties === null) {\n    schema.properties = {};\n  }\n  stripAdditionalProperties(schema);\n  return schema;\n}\nfunction stripAdditionalProperties(schema) {\n  if (!schema || typeof schema !== \"object\") {\n    return;\n  }\n  if (Array.isArray(schema)) {\n    schema.forEach(stripAdditionalProperties);\n    return;\n  }\n  const record = schema;\n  if (record.additionalProperties !== void 0) {\n    delete record.additionalProperties;\n  }\n  for (const value of Object.values(record)) {\n    stripAdditionalProperties(value);\n  }\n}\n\n// src/core/state-manager.ts\nvar StateManager = class {\n  constructor(core) {\n    this.core = core;\n  }\n  // State tracking: agentId -> threadId -> runId -> state\n  stateByRun = /* @__PURE__ */ new Map();\n  // Message tracking: agentId -> threadId -> messageId -> runId\n  messageToRun = /* @__PURE__ */ new Map();\n  // Agent subscriptions for cleanup\n  agentSubscriptions = /* @__PURE__ */ new Map();\n  /**\n   * Initialize state tracking for an agent\n   */\n  initialize() {\n  }\n  /**\n   * Subscribe to an agent's events to track state and messages\n   */\n  subscribeToAgent(agent) {\n    if (!agent.agentId) {\n      return;\n    }\n    const agentId = agent.agentId;\n    this.unsubscribeFromAgent(agentId);\n    const { unsubscribe } = agent.subscribe({\n      onRunStartedEvent: ({ event, state }) => {\n        this.handleRunStarted(agent, event, state);\n      },\n      onRunFinishedEvent: ({ event, state }) => {\n        this.handleRunFinished(agent, event, state);\n      },\n      onStateSnapshotEvent: ({ event, input, state }) => {\n        this.handleStateSnapshot(agent, event, input, state);\n      },\n      onStateDeltaEvent: ({ event, input, state }) => {\n        this.handleStateDelta(agent, event, input, state);\n      },\n      onMessagesSnapshotEvent: ({ event, input, messages }) => {\n        this.handleMessagesSnapshot(agent, event, input, messages);\n      },\n      onNewMessage: ({ message, input }) => {\n        this.handleNewMessage(agent, message, input);\n      }\n    });\n    this.agentSubscriptions.set(agentId, unsubscribe);\n  }\n  /**\n   * Unsubscribe from an agent's events\n   */\n  unsubscribeFromAgent(agentId) {\n    const unsubscribe = this.agentSubscriptions.get(agentId);\n    if (unsubscribe) {\n      unsubscribe();\n      this.agentSubscriptions.delete(agentId);\n    }\n  }\n  /**\n   * Get state for a specific run\n   * Returns a deep copy to prevent external mutations\n   */\n  getStateByRun(agentId, threadId, runId) {\n    const state = this.stateByRun.get(agentId)?.get(threadId)?.get(runId);\n    if (!state) return void 0;\n    return JSON.parse(JSON.stringify(state));\n  }\n  /**\n   * Get runId associated with a message\n   */\n  getRunIdForMessage(agentId, threadId, messageId) {\n    return this.messageToRun.get(agentId)?.get(threadId)?.get(messageId);\n  }\n  /**\n   * Get all states for an agent's thread\n   */\n  getStatesForThread(agentId, threadId) {\n    return this.stateByRun.get(agentId)?.get(threadId) ?? /* @__PURE__ */ new Map();\n  }\n  /**\n   * Get all run IDs for an agent's thread\n   */\n  getRunIdsForThread(agentId, threadId) {\n    const threadStates = this.stateByRun.get(agentId)?.get(threadId);\n    return threadStates ? Array.from(threadStates.keys()) : [];\n  }\n  /**\n   * Handle run started event\n   */\n  handleRunStarted(agent, event, state) {\n    if (!agent.agentId) return;\n    const { threadId, runId } = event;\n    this.saveState(agent.agentId, threadId, runId, state);\n  }\n  /**\n   * Handle run finished event\n   */\n  handleRunFinished(agent, event, state) {\n    if (!agent.agentId) return;\n    const { threadId, runId } = event;\n    this.saveState(agent.agentId, threadId, runId, state);\n  }\n  /**\n   * Handle state snapshot event\n   */\n  handleStateSnapshot(agent, event, input, state) {\n    if (!agent.agentId) return;\n    const { threadId, runId } = input;\n    const mergedState = { ...state, ...event.snapshot };\n    this.saveState(agent.agentId, threadId, runId, mergedState);\n  }\n  /**\n   * Handle state delta event\n   */\n  handleStateDelta(agent, event, input, state) {\n    if (!agent.agentId) return;\n    const { threadId, runId } = input;\n    this.saveState(agent.agentId, threadId, runId, state);\n  }\n  /**\n   * Handle messages snapshot event\n   */\n  handleMessagesSnapshot(agent, event, input, messages) {\n    if (!agent.agentId) return;\n    const { threadId, runId } = input;\n    for (const message of event.messages) {\n      this.associateMessageWithRun(agent.agentId, threadId, message.id, runId);\n    }\n  }\n  /**\n   * Handle new message event\n   */\n  handleNewMessage(agent, message, input) {\n    if (!agent.agentId || !input) return;\n    const { threadId, runId } = input;\n    this.associateMessageWithRun(agent.agentId, threadId, message.id, runId);\n  }\n  /**\n   * Save state for a specific run\n   */\n  saveState(agentId, threadId, runId, state) {\n    if (!this.stateByRun.has(agentId)) {\n      this.stateByRun.set(agentId, /* @__PURE__ */ new Map());\n    }\n    const agentStates = this.stateByRun.get(agentId);\n    if (!agentStates.has(threadId)) {\n      agentStates.set(threadId, /* @__PURE__ */ new Map());\n    }\n    const threadStates = agentStates.get(threadId);\n    threadStates.set(runId, JSON.parse(JSON.stringify(state)));\n  }\n  /**\n   * Associate a message with a run\n   */\n  associateMessageWithRun(agentId, threadId, messageId, runId) {\n    if (!this.messageToRun.has(agentId)) {\n      this.messageToRun.set(agentId, /* @__PURE__ */ new Map());\n    }\n    const agentMessages = this.messageToRun.get(agentId);\n    if (!agentMessages.has(threadId)) {\n      agentMessages.set(threadId, /* @__PURE__ */ new Map());\n    }\n    const threadMessages = agentMessages.get(threadId);\n    threadMessages.set(messageId, runId);\n  }\n  /**\n   * Clear all state for an agent\n   */\n  clearAgentState(agentId) {\n    this.stateByRun.delete(agentId);\n    this.messageToRun.delete(agentId);\n  }\n  /**\n   * Clear all state for a thread\n   */\n  clearThreadState(agentId, threadId) {\n    this.stateByRun.get(agentId)?.delete(threadId);\n    this.messageToRun.get(agentId)?.delete(threadId);\n  }\n};\n\n// src/core/core.ts\nvar CopilotKitCoreErrorCode = /* @__PURE__ */ ((CopilotKitCoreErrorCode2) => {\n  CopilotKitCoreErrorCode2[\"RUNTIME_INFO_FETCH_FAILED\"] = \"runtime_info_fetch_failed\";\n  CopilotKitCoreErrorCode2[\"AGENT_CONNECT_FAILED\"] = \"agent_connect_failed\";\n  CopilotKitCoreErrorCode2[\"AGENT_RUN_FAILED\"] = \"agent_run_failed\";\n  CopilotKitCoreErrorCode2[\"AGENT_RUN_FAILED_EVENT\"] = \"agent_run_failed_event\";\n  CopilotKitCoreErrorCode2[\"AGENT_RUN_ERROR_EVENT\"] = \"agent_run_error_event\";\n  CopilotKitCoreErrorCode2[\"TOOL_ARGUMENT_PARSE_FAILED\"] = \"tool_argument_parse_failed\";\n  CopilotKitCoreErrorCode2[\"TOOL_HANDLER_FAILED\"] = \"tool_handler_failed\";\n  CopilotKitCoreErrorCode2[\"TRANSCRIPTION_FAILED\"] = \"transcription_failed\";\n  CopilotKitCoreErrorCode2[\"TRANSCRIPTION_SERVICE_NOT_CONFIGURED\"] = \"transcription_service_not_configured\";\n  CopilotKitCoreErrorCode2[\"TRANSCRIPTION_INVALID_AUDIO\"] = \"transcription_invalid_audio\";\n  CopilotKitCoreErrorCode2[\"TRANSCRIPTION_RATE_LIMITED\"] = \"transcription_rate_limited\";\n  CopilotKitCoreErrorCode2[\"TRANSCRIPTION_AUTH_FAILED\"] = \"transcription_auth_failed\";\n  CopilotKitCoreErrorCode2[\"TRANSCRIPTION_NETWORK_ERROR\"] = \"transcription_network_error\";\n  return CopilotKitCoreErrorCode2;\n})(CopilotKitCoreErrorCode || {});\nvar CopilotKitCoreRuntimeConnectionStatus = /* @__PURE__ */ ((CopilotKitCoreRuntimeConnectionStatus2) => {\n  CopilotKitCoreRuntimeConnectionStatus2[\"Disconnected\"] = \"disconnected\";\n  CopilotKitCoreRuntimeConnectionStatus2[\"Connected\"] = \"connected\";\n  CopilotKitCoreRuntimeConnectionStatus2[\"Connecting\"] = \"connecting\";\n  CopilotKitCoreRuntimeConnectionStatus2[\"Error\"] = \"error\";\n  return CopilotKitCoreRuntimeConnectionStatus2;\n})(CopilotKitCoreRuntimeConnectionStatus || {});\nvar CopilotKitCore = class {\n  _headers;\n  _credentials;\n  _properties;\n  subscribers = /* @__PURE__ */ new Set();\n  // Delegate classes\n  agentRegistry;\n  contextStore;\n  suggestionEngine;\n  runHandler;\n  stateManager;\n  constructor({\n    runtimeUrl,\n    runtimeTransport = \"rest\",\n    headers = {},\n    credentials,\n    properties = {},\n    agents__unsafe_dev_only = {},\n    tools = [],\n    suggestionsConfig = []\n  }) {\n    this._headers = headers;\n    this._credentials = credentials;\n    this._properties = properties;\n    this.agentRegistry = new AgentRegistry(this);\n    this.contextStore = new ContextStore(this);\n    this.suggestionEngine = new SuggestionEngine(this);\n    this.runHandler = new RunHandler(this);\n    this.stateManager = new StateManager(this);\n    this.agentRegistry.initialize(agents__unsafe_dev_only);\n    this.runHandler.initialize(tools);\n    this.suggestionEngine.initialize(suggestionsConfig);\n    this.stateManager.initialize();\n    this.agentRegistry.setRuntimeTransport(runtimeTransport);\n    this.agentRegistry.setRuntimeUrl(runtimeUrl);\n    this.subscribe({\n      onAgentsChanged: ({ agents }) => {\n        Object.values(agents).forEach((agent) => {\n          if (agent.agentId) {\n            this.stateManager.subscribeToAgent(agent);\n          }\n        });\n      }\n    });\n  }\n  /**\n   * Internal method used by delegate classes and subclasses to notify subscribers\n   */\n  async notifySubscribers(handler, errorMessage) {\n    await Promise.all(\n      Array.from(this.subscribers).map(async (subscriber) => {\n        try {\n          await handler(subscriber);\n        } catch (error) {\n          console.error(errorMessage, error);\n        }\n      })\n    );\n  }\n  /**\n   * Internal method used by delegate classes to emit errors\n   */\n  async emitError({\n    error,\n    code,\n    context = {}\n  }) {\n    await this.notifySubscribers(\n      (subscriber) => subscriber.onError?.({\n        copilotkit: this,\n        error,\n        code,\n        context\n      }),\n      \"Subscriber onError error:\"\n    );\n  }\n  /**\n   * Snapshot accessors\n   */\n  get context() {\n    return this.contextStore.context;\n  }\n  get agents() {\n    return this.agentRegistry.agents;\n  }\n  get tools() {\n    return this.runHandler.tools;\n  }\n  get runtimeUrl() {\n    return this.agentRegistry.runtimeUrl;\n  }\n  setRuntimeUrl(runtimeUrl) {\n    this.agentRegistry.setRuntimeUrl(runtimeUrl);\n  }\n  get runtimeTransport() {\n    return this.agentRegistry.runtimeTransport;\n  }\n  setRuntimeTransport(runtimeTransport) {\n    this.agentRegistry.setRuntimeTransport(runtimeTransport);\n  }\n  get runtimeVersion() {\n    return this.agentRegistry.runtimeVersion;\n  }\n  get headers() {\n    return this._headers;\n  }\n  get credentials() {\n    return this._credentials;\n  }\n  get properties() {\n    return this._properties;\n  }\n  get runtimeConnectionStatus() {\n    return this.agentRegistry.runtimeConnectionStatus;\n  }\n  get audioFileTranscriptionEnabled() {\n    return this.agentRegistry.audioFileTranscriptionEnabled;\n  }\n  /**\n   * Configuration updates\n   */\n  setHeaders(headers) {\n    this._headers = headers;\n    this.agentRegistry.applyHeadersToAgents(this.agentRegistry.agents);\n    void this.notifySubscribers(\n      (subscriber) => subscriber.onHeadersChanged?.({\n        copilotkit: this,\n        headers: this.headers\n      }),\n      \"Subscriber onHeadersChanged error:\"\n    );\n  }\n  setCredentials(credentials) {\n    this._credentials = credentials;\n    this.agentRegistry.applyCredentialsToAgents(this.agentRegistry.agents);\n  }\n  setProperties(properties) {\n    this._properties = properties;\n    void this.notifySubscribers(\n      (subscriber) => subscriber.onPropertiesChanged?.({\n        copilotkit: this,\n        properties: this.properties\n      }),\n      \"Subscriber onPropertiesChanged error:\"\n    );\n  }\n  /**\n   * Agent management (delegated to AgentRegistry)\n   */\n  setAgents__unsafe_dev_only(agents) {\n    this.agentRegistry.setAgents__unsafe_dev_only(agents);\n  }\n  addAgent__unsafe_dev_only(params) {\n    this.agentRegistry.addAgent__unsafe_dev_only(params);\n  }\n  removeAgent__unsafe_dev_only(id) {\n    this.agentRegistry.removeAgent__unsafe_dev_only(id);\n  }\n  getAgent(id) {\n    return this.agentRegistry.getAgent(id);\n  }\n  /**\n   * Context management (delegated to ContextStore)\n   */\n  addContext(context) {\n    return this.contextStore.addContext(context);\n  }\n  removeContext(id) {\n    this.contextStore.removeContext(id);\n  }\n  /**\n   * Suggestions management (delegated to SuggestionEngine)\n   */\n  addSuggestionsConfig(config) {\n    return this.suggestionEngine.addSuggestionsConfig(config);\n  }\n  removeSuggestionsConfig(id) {\n    this.suggestionEngine.removeSuggestionsConfig(id);\n  }\n  reloadSuggestions(agentId) {\n    this.suggestionEngine.reloadSuggestions(agentId);\n  }\n  clearSuggestions(agentId) {\n    this.suggestionEngine.clearSuggestions(agentId);\n  }\n  getSuggestions(agentId) {\n    return this.suggestionEngine.getSuggestions(agentId);\n  }\n  /**\n   * Tool management (delegated to RunHandler)\n   */\n  addTool(tool) {\n    this.runHandler.addTool(tool);\n  }\n  removeTool(id, agentId) {\n    this.runHandler.removeTool(id, agentId);\n  }\n  getTool(params) {\n    return this.runHandler.getTool(params);\n  }\n  setTools(tools) {\n    this.runHandler.setTools(tools);\n  }\n  /**\n   * Subscription lifecycle\n   */\n  subscribe(subscriber) {\n    this.subscribers.add(subscriber);\n    return {\n      unsubscribe: () => {\n        this.subscribers.delete(subscriber);\n      }\n    };\n  }\n  /**\n   * Agent connectivity (delegated to RunHandler)\n   */\n  async connectAgent(params) {\n    return this.runHandler.connectAgent(params);\n  }\n  stopAgent(params) {\n    params.agent.abortRun();\n  }\n  async runAgent(params) {\n    return this.runHandler.runAgent(params);\n  }\n  /**\n   * State management (delegated to StateManager)\n   */\n  getStateByRun(agentId, threadId, runId) {\n    return this.stateManager.getStateByRun(agentId, threadId, runId);\n  }\n  getRunIdForMessage(agentId, threadId, messageId) {\n    return this.stateManager.getRunIdForMessage(agentId, threadId, messageId);\n  }\n  getRunIdsForThread(agentId, threadId) {\n    return this.stateManager.getRunIdsForThread(agentId, threadId);\n  }\n  /**\n   * Internal method used by RunHandler to build frontend tools\n   */\n  buildFrontendTools(agentId) {\n    return this.runHandler.buildFrontendTools(agentId);\n  }\n};\n\n// src/types.ts\nvar ToolCallStatus = /* @__PURE__ */ ((ToolCallStatus2) => {\n  ToolCallStatus2[\"InProgress\"] = \"inProgress\";\n  ToolCallStatus2[\"Executing\"] = \"executing\";\n  ToolCallStatus2[\"Complete\"] = \"complete\";\n  return ToolCallStatus2;\n})(ToolCallStatus || {});\n\n// src/utils/markdown.ts\nfunction completePartialMarkdown(input) {\n  let s = input;\n  const fenceMatches = Array.from(s.matchAll(/^(\\s*)(`{3,}|~{3,})/gm));\n  if (fenceMatches.length % 2 === 1) {\n    const [, indent, fence] = fenceMatches[0];\n    s += `\n${indent}${fence}`;\n  }\n  const incompleteLinkMatch = s.match(/\\[([^\\]]*)\\]\\(([^)]*)$/);\n  if (incompleteLinkMatch) {\n    s += \")\";\n  }\n  const openElements = [];\n  const chars = Array.from(s);\n  const codeBlockRanges = [];\n  const inlineCodeRanges = [];\n  let tempCodeFenceCount = 0;\n  let currentCodeBlockStart = -1;\n  for (let i = 0; i < chars.length; i++) {\n    if (i === 0 || chars[i - 1] === \"\\n\") {\n      const lineMatch = s.substring(i).match(/^(\\s*)(`{3,}|~{3,})/);\n      if (lineMatch) {\n        tempCodeFenceCount++;\n        if (tempCodeFenceCount % 2 === 1) {\n          currentCodeBlockStart = i;\n        } else if (currentCodeBlockStart !== -1) {\n          codeBlockRanges.push({\n            start: currentCodeBlockStart,\n            end: i + lineMatch[0].length\n          });\n          currentCodeBlockStart = -1;\n        }\n        i += lineMatch[0].length - 1;\n      }\n    }\n  }\n  for (let i = 0; i < chars.length; i++) {\n    if (chars[i] === \"`\") {\n      let backslashCount = 0;\n      for (let j = i - 1; j >= 0 && chars[j] === \"\\\\\"; j--) {\n        backslashCount++;\n      }\n      if (backslashCount % 2 === 0) {\n        for (let j = i + 1; j < chars.length; j++) {\n          if (chars[j] === \"`\") {\n            let closingBackslashCount = 0;\n            for (let k = j - 1; k >= 0 && chars[k] === \"\\\\\"; k--) {\n              closingBackslashCount++;\n            }\n            if (closingBackslashCount % 2 === 0) {\n              inlineCodeRanges.push({ start: i, end: j + 1 });\n              i = j;\n              break;\n            }\n          }\n        }\n      }\n    }\n  }\n  const isInCode = (pos) => {\n    return codeBlockRanges.some((range) => pos >= range.start && pos < range.end) || inlineCodeRanges.some((range) => pos >= range.start && pos < range.end);\n  };\n  for (let i = 0; i < chars.length; i++) {\n    const char = chars[i];\n    const nextChar = chars[i + 1];\n    const prevChar = chars[i - 1];\n    if (isInCode(i)) {\n      continue;\n    }\n    if (char === \"[\") {\n      let isCompleteLink = false;\n      let bracketDepth = 1;\n      let j = i + 1;\n      while (j < chars.length && bracketDepth > 0) {\n        if (chars[j] === \"[\" && !isInCode(j)) bracketDepth++;\n        if (chars[j] === \"]\" && !isInCode(j)) bracketDepth--;\n        j++;\n      }\n      if (bracketDepth === 0 && chars[j] === \"(\") {\n        let parenDepth = 1;\n        j++;\n        while (j < chars.length && parenDepth > 0) {\n          if (chars[j] === \"(\" && !isInCode(j)) parenDepth++;\n          if (chars[j] === \")\" && !isInCode(j)) parenDepth--;\n          j++;\n        }\n        if (parenDepth === 0) {\n          isCompleteLink = true;\n          i = j - 1;\n          continue;\n        }\n      }\n      if (!isCompleteLink) {\n        const existingIndex = openElements.findIndex(\n          (el) => el.type === \"bracket\"\n        );\n        if (existingIndex !== -1) {\n          openElements.splice(existingIndex, 1);\n        } else {\n          openElements.push({ type: \"bracket\", marker: \"[\", position: i });\n        }\n      }\n    } else if (char === \"*\" && nextChar === \"*\") {\n      const existingIndex = openElements.findIndex(\n        (el) => el.type === \"bold_star\"\n      );\n      if (existingIndex !== -1) {\n        openElements.splice(existingIndex, 1);\n      } else {\n        openElements.push({ type: \"bold_star\", marker: \"**\", position: i });\n      }\n      i++;\n    } else if (char === \"_\" && nextChar === \"_\") {\n      const existingIndex = openElements.findIndex(\n        (el) => el.type === \"bold_underscore\"\n      );\n      if (existingIndex !== -1) {\n        openElements.splice(existingIndex, 1);\n      } else {\n        openElements.push({\n          type: \"bold_underscore\",\n          marker: \"__\",\n          position: i\n        });\n      }\n      i++;\n    } else if (char === \"~\" && nextChar === \"~\") {\n      const existingIndex = openElements.findIndex(\n        (el) => el.type === \"strike\"\n      );\n      if (existingIndex !== -1) {\n        openElements.splice(existingIndex, 1);\n      } else {\n        openElements.push({ type: \"strike\", marker: \"~~\", position: i });\n      }\n      i++;\n    } else if (char === \"*\" && prevChar !== \"*\" && nextChar !== \"*\") {\n      const existingIndex = openElements.findIndex(\n        (el) => el.type === \"italic_star\"\n      );\n      if (existingIndex !== -1) {\n        openElements.splice(existingIndex, 1);\n      } else {\n        openElements.push({ type: \"italic_star\", marker: \"*\", position: i });\n      }\n    } else if (char === \"_\" && prevChar !== \"_\" && nextChar !== \"_\") {\n      const existingIndex = openElements.findIndex(\n        (el) => el.type === \"italic_underscore\"\n      );\n      if (existingIndex !== -1) {\n        openElements.splice(existingIndex, 1);\n      } else {\n        openElements.push({\n          type: \"italic_underscore\",\n          marker: \"_\",\n          position: i\n        });\n      }\n    }\n  }\n  let backtickCount = 0;\n  for (let i = 0; i < chars.length; i++) {\n    if (chars[i] === \"`\" && !isInCode(i)) {\n      backtickCount++;\n    }\n  }\n  if (backtickCount % 2 === 1) {\n    s += \"`\";\n  }\n  openElements.sort((a, b) => b.position - a.position);\n  const closers = openElements.map((el) => {\n    switch (el.type) {\n      case \"bracket\":\n        return \"]\";\n      case \"bold_star\":\n        return \"**\";\n      case \"bold_underscore\":\n        return \"__\";\n      case \"strike\":\n        return \"~~\";\n      case \"italic_star\":\n        return \"*\";\n      case \"italic_underscore\":\n        return \"_\";\n      default:\n        return \"\";\n    }\n  });\n  let result = s + closers.join(\"\");\n  const finalFenceMatches = Array.from(\n    result.matchAll(/^(\\s*)(`{3,}|~{3,})/gm)\n  );\n  const hasUnclosedBacktick = (result.match(/`/g) || []).length % 2 === 1;\n  const hasUnclosedCodeFence = finalFenceMatches.length % 2 === 1;\n  let shouldCloseParens = !hasUnclosedBacktick && !hasUnclosedCodeFence;\n  if (shouldCloseParens) {\n    const lastOpenParen = result.lastIndexOf(\"(\");\n    if (lastOpenParen !== -1) {\n      const beforeParen = result.substring(0, lastOpenParen);\n      const backticksBeforeParen = (beforeParen.match(/`/g) || []).length;\n      if (backticksBeforeParen % 2 === 1) {\n        shouldCloseParens = false;\n      }\n    }\n  }\n  if (shouldCloseParens) {\n    const openParens = (result.match(/\\(/g) || []).length;\n    const closeParens = (result.match(/\\)/g) || []).length;\n    if (openParens > closeParens) {\n      result += \")\".repeat(openParens - closeParens);\n    }\n  }\n  return result;\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L2NvcmUvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN3RDtBQUNSOztBQUVoRDtBQUt1QjtBQUN2QiwrQ0FBK0Msb0RBQVM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsMENBQTBDLFNBQVMseUNBQXlDO0FBQzdMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MscURBQXFEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxnQ0FBZ0MsZ0NBQWdDO0FBQ2hFLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQixTQUFTLGlDQUFpQyxRQUFRLGtDQUFrQztBQUM1SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLDhCQUE4QixnQ0FBZ0M7QUFDOUQsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsMEJBQTBCLDZEQUFjO0FBQ3hDLGFBQWEsdUVBQXdCO0FBQ3JDO0FBQ0EsdUJBQXVCLDZEQUFjLElBQUksZ0JBQWdCLFNBQVMsYUFBYTtBQUMvRSxXQUFXLHVFQUF3QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHlCQUF5Qiw2REFBYztBQUN2QyxhQUFhLHVFQUF3QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxhQUFhO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtFQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw4QkFBOEIsR0FBRyxHQUFHLEdBQUc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWFFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3RyYXZlbC11aS9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L2NvcmUvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvcmUvYWdlbnQtcmVnaXN0cnkudHNcbmltcG9ydCB7IEh0dHBBZ2VudCBhcyBIdHRwQWdlbnQyIH0gZnJvbSBcIkBhZy11aS9jbGllbnRcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAY29waWxvdGtpdG5leHQvc2hhcmVkXCI7XG5cbi8vIHNyYy9hZ2VudC50c1xuaW1wb3J0IHtcbiAgSHR0cEFnZW50LFxuICBydW5IdHRwUmVxdWVzdCxcbiAgdHJhbnNmb3JtSHR0cEV2ZW50U3RyZWFtXG59IGZyb20gXCJAYWctdWkvY2xpZW50XCI7XG52YXIgUHJveGllZENvcGlsb3RSdW50aW1lQWdlbnQgPSBjbGFzcyBleHRlbmRzIEh0dHBBZ2VudCB7XG4gIHJ1bnRpbWVVcmw7XG4gIGNyZWRlbnRpYWxzO1xuICB0cmFuc3BvcnQ7XG4gIHNpbmdsZUVuZHBvaW50VXJsO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBjb25zdCBub3JtYWxpemVkUnVudGltZVVybCA9IGNvbmZpZy5ydW50aW1lVXJsID8gY29uZmlnLnJ1bnRpbWVVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpIDogdm9pZCAwO1xuICAgIGNvbnN0IHRyYW5zcG9ydCA9IGNvbmZpZy50cmFuc3BvcnQgPz8gXCJyZXN0XCI7XG4gICAgY29uc3QgcnVuVXJsID0gdHJhbnNwb3J0ID09PSBcInNpbmdsZVwiID8gbm9ybWFsaXplZFJ1bnRpbWVVcmwgPz8gY29uZmlnLnJ1bnRpbWVVcmwgPz8gXCJcIiA6IGAke25vcm1hbGl6ZWRSdW50aW1lVXJsID8/IGNvbmZpZy5ydW50aW1lVXJsfS9hZ2VudC8ke2VuY29kZVVSSUNvbXBvbmVudChjb25maWcuYWdlbnRJZCA/PyBcIlwiKX0vcnVuYDtcbiAgICBpZiAoIXJ1blVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJveGllZENvcGlsb3RSdW50aW1lQWdlbnQgcmVxdWlyZXMgYSBydW50aW1lVXJsIHdoZW4gdHJhbnNwb3J0IGlzIHNldCB0byAnc2luZ2xlJy5cIik7XG4gICAgfVxuICAgIHN1cGVyKHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIHVybDogcnVuVXJsXG4gICAgfSk7XG4gICAgdGhpcy5ydW50aW1lVXJsID0gbm9ybWFsaXplZFJ1bnRpbWVVcmwgPz8gY29uZmlnLnJ1bnRpbWVVcmw7XG4gICAgdGhpcy5jcmVkZW50aWFscyA9IGNvbmZpZy5jcmVkZW50aWFscztcbiAgICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgICBpZiAodGhpcy50cmFuc3BvcnQgPT09IFwic2luZ2xlXCIpIHtcbiAgICAgIHRoaXMuc2luZ2xlRW5kcG9pbnRVcmwgPSB0aGlzLnJ1bnRpbWVVcmw7XG4gICAgfVxuICB9XG4gIGFib3J0UnVuKCkge1xuICAgIGlmICghdGhpcy5hZ2VudElkIHx8ICF0aGlzLnRocmVhZElkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZmV0Y2ggPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMudHJhbnNwb3J0ID09PSBcInNpbmdsZVwiKSB7XG4gICAgICBpZiAoIXRoaXMuc2luZ2xlRW5kcG9pbnRVcmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9KTtcbiAgICAgIHZvaWQgZmV0Y2godGhpcy5zaW5nbGVFbmRwb2ludFVybCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbWV0aG9kOiBcImFnZW50L3N0b3BcIixcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIGFnZW50SWQ6IHRoaXMuYWdlbnRJZCxcbiAgICAgICAgICAgIHRocmVhZElkOiB0aGlzLnRocmVhZElkXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgLi4udGhpcy5jcmVkZW50aWFscyA/IHsgY3JlZGVudGlhbHM6IHRoaXMuY3JlZGVudGlhbHMgfSA6IHt9XG4gICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlByb3hpZWRDb3BpbG90UnVudGltZUFnZW50OiBzdG9wIHJlcXVlc3QgZmFpbGVkXCIsIGVycm9yKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucnVudGltZVVybCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdG9wUGF0aCA9IGAke3RoaXMucnVudGltZVVybH0vYWdlbnQvJHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5hZ2VudElkKX0vc3RvcC8ke2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLnRocmVhZElkKX1gO1xuICAgIGNvbnN0IG9yaWdpbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uID8gd2luZG93LmxvY2F0aW9uLm9yaWdpbiA6IFwiaHR0cDovL2xvY2FsaG9zdFwiO1xuICAgIGNvbnN0IGJhc2UgPSBuZXcgVVJMKHRoaXMucnVudGltZVVybCwgb3JpZ2luKTtcbiAgICBjb25zdCBzdG9wVXJsID0gbmV3IFVSTChzdG9wUGF0aCwgYmFzZSk7XG4gICAgdm9pZCBmZXRjaChzdG9wVXJsLnRvU3RyaW5nKCksIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAuLi50aGlzLmhlYWRlcnNcbiAgICAgIH0sXG4gICAgICAuLi50aGlzLmNyZWRlbnRpYWxzID8geyBjcmVkZW50aWFsczogdGhpcy5jcmVkZW50aWFscyB9IDoge31cbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJQcm94aWVkQ29waWxvdFJ1bnRpbWVBZ2VudDogc3RvcCByZXF1ZXN0IGZhaWxlZFwiLCBlcnJvcik7XG4gICAgfSk7XG4gIH1cbiAgY29ubmVjdChpbnB1dCkge1xuICAgIGlmICh0aGlzLnRyYW5zcG9ydCA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgaWYgKCF0aGlzLnNpbmdsZUVuZHBvaW50VXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpbmdsZSBlbmRwb2ludCB0cmFuc3BvcnQgcmVxdWlyZXMgYSBydW50aW1lVXJsXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVxdWVzdEluaXQgPSB0aGlzLmNyZWF0ZVNpbmdsZVJvdXRlUmVxdWVzdEluaXQoaW5wdXQsIFwiYWdlbnQvY29ubmVjdFwiLCB7XG4gICAgICAgIGFnZW50SWQ6IHRoaXMuYWdlbnRJZFxuICAgICAgfSk7XG4gICAgICBjb25zdCBodHRwRXZlbnRzMiA9IHJ1bkh0dHBSZXF1ZXN0KHRoaXMuc2luZ2xlRW5kcG9pbnRVcmwsIHJlcXVlc3RJbml0KTtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1IdHRwRXZlbnRTdHJlYW0oaHR0cEV2ZW50czIpO1xuICAgIH1cbiAgICBjb25zdCBodHRwRXZlbnRzID0gcnVuSHR0cFJlcXVlc3QoYCR7dGhpcy5ydW50aW1lVXJsfS9hZ2VudC8ke3RoaXMuYWdlbnRJZH0vY29ubmVjdGAsIHRoaXMucmVxdWVzdEluaXQoaW5wdXQpKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtSHR0cEV2ZW50U3RyZWFtKGh0dHBFdmVudHMpO1xuICB9XG4gIHJ1bihpbnB1dCkge1xuICAgIGlmICh0aGlzLnRyYW5zcG9ydCA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgaWYgKCF0aGlzLnNpbmdsZUVuZHBvaW50VXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpbmdsZSBlbmRwb2ludCB0cmFuc3BvcnQgcmVxdWlyZXMgYSBydW50aW1lVXJsXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVxdWVzdEluaXQgPSB0aGlzLmNyZWF0ZVNpbmdsZVJvdXRlUmVxdWVzdEluaXQoaW5wdXQsIFwiYWdlbnQvcnVuXCIsIHtcbiAgICAgICAgYWdlbnRJZDogdGhpcy5hZ2VudElkXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGh0dHBFdmVudHMgPSBydW5IdHRwUmVxdWVzdCh0aGlzLnNpbmdsZUVuZHBvaW50VXJsLCByZXF1ZXN0SW5pdCk7XG4gICAgICByZXR1cm4gdHJhbnNmb3JtSHR0cEV2ZW50U3RyZWFtKGh0dHBFdmVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gc3VwZXIucnVuKGlucHV0KTtcbiAgfVxuICBjbG9uZSgpIHtcbiAgICBjb25zdCBjbG9uZWQgPSBzdXBlci5jbG9uZSgpO1xuICAgIGNsb25lZC5ydW50aW1lVXJsID0gdGhpcy5ydW50aW1lVXJsO1xuICAgIGNsb25lZC5jcmVkZW50aWFscyA9IHRoaXMuY3JlZGVudGlhbHM7XG4gICAgY2xvbmVkLnRyYW5zcG9ydCA9IHRoaXMudHJhbnNwb3J0O1xuICAgIGNsb25lZC5zaW5nbGVFbmRwb2ludFVybCA9IHRoaXMuc2luZ2xlRW5kcG9pbnRVcmw7XG4gICAgcmV0dXJuIGNsb25lZDtcbiAgfVxuICBjcmVhdGVTaW5nbGVSb3V0ZVJlcXVlc3RJbml0KGlucHV0LCBtZXRob2QsIHBhcmFtcykge1xuICAgIGlmICghdGhpcy5hZ2VudElkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm94aWVkQ29waWxvdFJ1bnRpbWVBZ2VudCByZXF1aXJlcyBhZ2VudElkIHRvIG1ha2UgcnVudGltZSByZXF1ZXN0c1wiKTtcbiAgICB9XG4gICAgY29uc3QgYmFzZUluaXQgPSBzdXBlci5yZXF1ZXN0SW5pdChpbnB1dCk7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKGJhc2VJbml0LmhlYWRlcnMgPz8ge30pO1xuICAgIGhlYWRlcnMuc2V0KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBoZWFkZXJzLnNldChcIkFjY2VwdFwiLCBoZWFkZXJzLmdldChcIkFjY2VwdFwiKSA/PyBcInRleHQvZXZlbnQtc3RyZWFtXCIpO1xuICAgIGxldCBvcmlnaW5hbEJvZHkgPSB2b2lkIDA7XG4gICAgaWYgKHR5cGVvZiBiYXNlSW5pdC5ib2R5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBvcmlnaW5hbEJvZHkgPSBKU09OLnBhcnNlKGJhc2VJbml0LmJvZHkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiUHJveGllZENvcGlsb3RSdW50aW1lQWdlbnQ6IGZhaWxlZCB0byBwYXJzZSByZXF1ZXN0IGJvZHkgZm9yIHNpbmdsZSByb3V0ZSB0cmFuc3BvcnRcIiwgZXJyb3IpO1xuICAgICAgICBvcmlnaW5hbEJvZHkgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGVudmVsb3BlID0ge1xuICAgICAgbWV0aG9kXG4gICAgfTtcbiAgICBpZiAocGFyYW1zICYmIE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoID4gMCkge1xuICAgICAgZW52ZWxvcGUucGFyYW1zID0gcGFyYW1zO1xuICAgIH1cbiAgICBpZiAob3JpZ2luYWxCb2R5ICE9PSB2b2lkIDApIHtcbiAgICAgIGVudmVsb3BlLmJvZHkgPSBvcmlnaW5hbEJvZHk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5iYXNlSW5pdCxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShlbnZlbG9wZSksXG4gICAgICAuLi50aGlzLmNyZWRlbnRpYWxzID8geyBjcmVkZW50aWFsczogdGhpcy5jcmVkZW50aWFscyB9IDoge31cbiAgICB9O1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9hZ2VudC1yZWdpc3RyeS50c1xudmFyIEFnZW50UmVnaXN0cnkgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvcmUpIHtcbiAgICB0aGlzLmNvcmUgPSBjb3JlO1xuICB9XG4gIF9hZ2VudHMgPSB7fTtcbiAgbG9jYWxBZ2VudHMgPSB7fTtcbiAgcmVtb3RlQWdlbnRzID0ge307XG4gIF9ydW50aW1lVXJsO1xuICBfcnVudGltZVZlcnNpb247XG4gIF9ydW50aW1lQ29ubmVjdGlvblN0YXR1cyA9IFwiZGlzY29ubmVjdGVkXCIgLyogRGlzY29ubmVjdGVkICovO1xuICBfcnVudGltZVRyYW5zcG9ydCA9IFwicmVzdFwiO1xuICBfYXVkaW9GaWxlVHJhbnNjcmlwdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEdldCBhbGwgYWdlbnRzIGFzIGEgcmVhZG9ubHkgcmVjb3JkXG4gICAqL1xuICBnZXQgYWdlbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9hZ2VudHM7XG4gIH1cbiAgZ2V0IHJ1bnRpbWVVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVVcmw7XG4gIH1cbiAgZ2V0IHJ1bnRpbWVWZXJzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9ydW50aW1lVmVyc2lvbjtcbiAgfVxuICBnZXQgcnVudGltZUNvbm5lY3Rpb25TdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVDb25uZWN0aW9uU3RhdHVzO1xuICB9XG4gIGdldCBydW50aW1lVHJhbnNwb3J0KCkge1xuICAgIHJldHVybiB0aGlzLl9ydW50aW1lVHJhbnNwb3J0O1xuICB9XG4gIGdldCBhdWRpb0ZpbGVUcmFuc2NyaXB0aW9uRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fYXVkaW9GaWxlVHJhbnNjcmlwdGlvbkVuYWJsZWQ7XG4gIH1cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYWdlbnRzIGZyb20gY29uZmlndXJhdGlvblxuICAgKi9cbiAgaW5pdGlhbGl6ZShhZ2VudHMpIHtcbiAgICB0aGlzLmxvY2FsQWdlbnRzID0gdGhpcy5hc3NpZ25BZ2VudElkcyhhZ2VudHMpO1xuICAgIHRoaXMuYXBwbHlIZWFkZXJzVG9BZ2VudHModGhpcy5sb2NhbEFnZW50cyk7XG4gICAgdGhpcy5fYWdlbnRzID0gdGhpcy5sb2NhbEFnZW50cztcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBydW50aW1lIFVSTCBhbmQgdXBkYXRlIGNvbm5lY3Rpb25cbiAgICovXG4gIHNldFJ1bnRpbWVVcmwocnVudGltZVVybCkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRSdW50aW1lVXJsID0gcnVudGltZVVybCA/IHJ1bnRpbWVVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpIDogdm9pZCAwO1xuICAgIGlmICh0aGlzLl9ydW50aW1lVXJsID09PSBub3JtYWxpemVkUnVudGltZVVybCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9ydW50aW1lVXJsID0gbm9ybWFsaXplZFJ1bnRpbWVVcmw7XG4gICAgdm9pZCB0aGlzLnVwZGF0ZVJ1bnRpbWVDb25uZWN0aW9uKCk7XG4gIH1cbiAgc2V0UnVudGltZVRyYW5zcG9ydChydW50aW1lVHJhbnNwb3J0KSB7XG4gICAgaWYgKHRoaXMuX3J1bnRpbWVUcmFuc3BvcnQgPT09IHJ1bnRpbWVUcmFuc3BvcnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcnVudGltZVRyYW5zcG9ydCA9IHJ1bnRpbWVUcmFuc3BvcnQ7XG4gICAgdm9pZCB0aGlzLnVwZGF0ZVJ1bnRpbWVDb25uZWN0aW9uKCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBhbGwgYWdlbnRzIGF0IG9uY2UgKGZvciBkZXZlbG9wbWVudCB1c2UpXG4gICAqL1xuICBzZXRBZ2VudHNfX3Vuc2FmZV9kZXZfb25seShhZ2VudHMpIHtcbiAgICBPYmplY3QuZW50cmllcyhhZ2VudHMpLmZvckVhY2goKFtpZCwgYWdlbnRdKSA9PiB7XG4gICAgICBpZiAoYWdlbnQpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZUFuZEFzc2lnbkFnZW50SWQoaWQsIGFnZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmxvY2FsQWdlbnRzID0gYWdlbnRzO1xuICAgIHRoaXMuX2FnZW50cyA9IHsgLi4udGhpcy5sb2NhbEFnZW50cywgLi4udGhpcy5yZW1vdGVBZ2VudHMgfTtcbiAgICB0aGlzLmFwcGx5SGVhZGVyc1RvQWdlbnRzKHRoaXMuX2FnZW50cyk7XG4gICAgdm9pZCB0aGlzLm5vdGlmeUFnZW50c0NoYW5nZWQoKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgc2luZ2xlIGFnZW50IChmb3IgZGV2ZWxvcG1lbnQgdXNlKVxuICAgKi9cbiAgYWRkQWdlbnRfX3Vuc2FmZV9kZXZfb25seSh7IGlkLCBhZ2VudCB9KSB7XG4gICAgdGhpcy52YWxpZGF0ZUFuZEFzc2lnbkFnZW50SWQoaWQsIGFnZW50KTtcbiAgICB0aGlzLmxvY2FsQWdlbnRzW2lkXSA9IGFnZW50O1xuICAgIHRoaXMuYXBwbHlIZWFkZXJzVG9BZ2VudChhZ2VudCk7XG4gICAgdGhpcy5fYWdlbnRzID0geyAuLi50aGlzLmxvY2FsQWdlbnRzLCAuLi50aGlzLnJlbW90ZUFnZW50cyB9O1xuICAgIHZvaWQgdGhpcy5ub3RpZnlBZ2VudHNDaGFuZ2VkKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBhZ2VudCBieSBJRCAoZm9yIGRldmVsb3BtZW50IHVzZSlcbiAgICovXG4gIHJlbW92ZUFnZW50X191bnNhZmVfZGV2X29ubHkoaWQpIHtcbiAgICBkZWxldGUgdGhpcy5sb2NhbEFnZW50c1tpZF07XG4gICAgdGhpcy5fYWdlbnRzID0geyAuLi50aGlzLmxvY2FsQWdlbnRzLCAuLi50aGlzLnJlbW90ZUFnZW50cyB9O1xuICAgIHZvaWQgdGhpcy5ub3RpZnlBZ2VudHNDaGFuZ2VkKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBhZ2VudCBieSBJRFxuICAgKi9cbiAgZ2V0QWdlbnQoaWQpIHtcbiAgICBpZiAoaWQgaW4gdGhpcy5fYWdlbnRzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYWdlbnRzW2lkXTtcbiAgICB9XG4gICAgaWYgKHRoaXMucnVudGltZVVybCAhPT0gdm9pZCAwICYmICh0aGlzLnJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzID09PSBcImRpc2Nvbm5lY3RlZFwiIC8qIERpc2Nvbm5lY3RlZCAqLyB8fCB0aGlzLnJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzID09PSBcImNvbm5lY3RpbmdcIiAvKiBDb25uZWN0aW5nICovKSkge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY29uc29sZS53YXJuKGBBZ2VudCAke2lkfSBub3QgZm91bmRgKTtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBjdXJyZW50IGhlYWRlcnMgdG8gYW4gYWdlbnRcbiAgICovXG4gIGFwcGx5SGVhZGVyc1RvQWdlbnQoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBIdHRwQWdlbnQyKSB7XG4gICAgICBhZ2VudC5oZWFkZXJzID0geyAuLi50aGlzLmNvcmUuaGVhZGVycyB9O1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQXBwbHkgY3VycmVudCBoZWFkZXJzIHRvIGFsbCBhZ2VudHNcbiAgICovXG4gIGFwcGx5SGVhZGVyc1RvQWdlbnRzKGFnZW50cykge1xuICAgIE9iamVjdC52YWx1ZXMoYWdlbnRzKS5mb3JFYWNoKChhZ2VudCkgPT4ge1xuICAgICAgdGhpcy5hcHBseUhlYWRlcnNUb0FnZW50KGFnZW50KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQXBwbHkgY3VycmVudCBjcmVkZW50aWFscyB0byBhbiBhZ2VudFxuICAgKi9cbiAgYXBwbHlDcmVkZW50aWFsc1RvQWdlbnQoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBQcm94aWVkQ29waWxvdFJ1bnRpbWVBZ2VudCkge1xuICAgICAgYWdlbnQuY3JlZGVudGlhbHMgPSB0aGlzLmNvcmUuY3JlZGVudGlhbHM7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBcHBseSBjdXJyZW50IGNyZWRlbnRpYWxzIHRvIGFsbCBhZ2VudHNcbiAgICovXG4gIGFwcGx5Q3JlZGVudGlhbHNUb0FnZW50cyhhZ2VudHMpIHtcbiAgICBPYmplY3QudmFsdWVzKGFnZW50cykuZm9yRWFjaCgoYWdlbnQpID0+IHtcbiAgICAgIHRoaXMuYXBwbHlDcmVkZW50aWFsc1RvQWdlbnQoYWdlbnQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgcnVudGltZSBjb25uZWN0aW9uIGFuZCBmZXRjaCByZW1vdGUgYWdlbnRzXG4gICAqL1xuICBhc3luYyB1cGRhdGVSdW50aW1lQ29ubmVjdGlvbigpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucnVudGltZVVybCkge1xuICAgICAgdGhpcy5fcnVudGltZUNvbm5lY3Rpb25TdGF0dXMgPSBcImRpc2Nvbm5lY3RlZFwiIC8qIERpc2Nvbm5lY3RlZCAqLztcbiAgICAgIHRoaXMuX3J1bnRpbWVWZXJzaW9uID0gdm9pZCAwO1xuICAgICAgdGhpcy5fYXVkaW9GaWxlVHJhbnNjcmlwdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVtb3RlQWdlbnRzID0ge307XG4gICAgICB0aGlzLl9hZ2VudHMgPSB0aGlzLmxvY2FsQWdlbnRzO1xuICAgICAgYXdhaXQgdGhpcy5ub3RpZnlSdW50aW1lU3RhdHVzQ2hhbmdlZChcImRpc2Nvbm5lY3RlZFwiIC8qIERpc2Nvbm5lY3RlZCAqLyk7XG4gICAgICBhd2FpdCB0aGlzLm5vdGlmeUFnZW50c0NoYW5nZWQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcnVudGltZUNvbm5lY3Rpb25TdGF0dXMgPSBcImNvbm5lY3RpbmdcIiAvKiBDb25uZWN0aW5nICovO1xuICAgIGF3YWl0IHRoaXMubm90aWZ5UnVudGltZVN0YXR1c0NoYW5nZWQoXCJjb25uZWN0aW5nXCIgLyogQ29ubmVjdGluZyAqLyk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJ1bnRpbWVJbmZvUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoUnVudGltZUluZm8oKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdmVyc2lvbixcbiAgICAgICAgLi4ucnVudGltZUluZm9cbiAgICAgIH0gPSBydW50aW1lSW5mb1Jlc3BvbnNlO1xuICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSB0aGlzLmNvcmUuY3JlZGVudGlhbHM7XG4gICAgICBjb25zdCBhZ2VudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHJ1bnRpbWVJbmZvLmFnZW50cykubWFwKChbaWQsIHsgZGVzY3JpcHRpb24gfV0pID0+IHtcbiAgICAgICAgICBjb25zdCBhZ2VudCA9IG5ldyBQcm94aWVkQ29waWxvdFJ1bnRpbWVBZ2VudCh7XG4gICAgICAgICAgICBydW50aW1lVXJsOiB0aGlzLnJ1bnRpbWVVcmwsXG4gICAgICAgICAgICBhZ2VudElkOiBpZCxcbiAgICAgICAgICAgIC8vIFJ1bnRpbWUgYWdlbnRzIGFsd2F5cyBoYXZlIHRoZWlyIElEIHNldCBjb3JyZWN0bHlcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdHJhbnNwb3J0OiB0aGlzLl9ydW50aW1lVHJhbnNwb3J0LFxuICAgICAgICAgICAgY3JlZGVudGlhbHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmFwcGx5SGVhZGVyc1RvQWdlbnQoYWdlbnQpO1xuICAgICAgICAgIHJldHVybiBbaWQsIGFnZW50XTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICB0aGlzLnJlbW90ZUFnZW50cyA9IGFnZW50cztcbiAgICAgIHRoaXMuX2FnZW50cyA9IHsgLi4udGhpcy5sb2NhbEFnZW50cywgLi4udGhpcy5yZW1vdGVBZ2VudHMgfTtcbiAgICAgIHRoaXMuX3J1bnRpbWVDb25uZWN0aW9uU3RhdHVzID0gXCJjb25uZWN0ZWRcIiAvKiBDb25uZWN0ZWQgKi87XG4gICAgICB0aGlzLl9ydW50aW1lVmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB0aGlzLl9hdWRpb0ZpbGVUcmFuc2NyaXB0aW9uRW5hYmxlZCA9IHJ1bnRpbWVJbmZvUmVzcG9uc2UuYXVkaW9GaWxlVHJhbnNjcmlwdGlvbkVuYWJsZWQgPz8gZmFsc2U7XG4gICAgICBhd2FpdCB0aGlzLm5vdGlmeVJ1bnRpbWVTdGF0dXNDaGFuZ2VkKFwiY29ubmVjdGVkXCIgLyogQ29ubmVjdGVkICovKTtcbiAgICAgIGF3YWl0IHRoaXMubm90aWZ5QWdlbnRzQ2hhbmdlZCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLl9ydW50aW1lQ29ubmVjdGlvblN0YXR1cyA9IFwiZXJyb3JcIiAvKiBFcnJvciAqLztcbiAgICAgIHRoaXMuX3J1bnRpbWVWZXJzaW9uID0gdm9pZCAwO1xuICAgICAgdGhpcy5fYXVkaW9GaWxlVHJhbnNjcmlwdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVtb3RlQWdlbnRzID0ge307XG4gICAgICB0aGlzLl9hZ2VudHMgPSB0aGlzLmxvY2FsQWdlbnRzO1xuICAgICAgYXdhaXQgdGhpcy5ub3RpZnlSdW50aW1lU3RhdHVzQ2hhbmdlZChcImVycm9yXCIgLyogRXJyb3IgKi8pO1xuICAgICAgYXdhaXQgdGhpcy5ub3RpZnlBZ2VudHNDaGFuZ2VkKCk7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBKU09OLnN0cmluZ2lmeShlcnJvcik7XG4gICAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGxvYWQgcnVudGltZSBpbmZvICgke3RoaXMucnVudGltZVVybH0vaW5mbyk6ICR7bWVzc2FnZX1gKTtcbiAgICAgIGNvbnN0IHJ1bnRpbWVFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcbiAgICAgIGF3YWl0IHRoaXMuY29yZS5lbWl0RXJyb3Ioe1xuICAgICAgICBlcnJvcjogcnVudGltZUVycm9yLFxuICAgICAgICBjb2RlOiBcInJ1bnRpbWVfaW5mb19mZXRjaF9mYWlsZWRcIiAvKiBSVU5USU1FX0lORk9fRkVUQ0hfRkFJTEVEICovLFxuICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgcnVudGltZVVybDogdGhpcy5ydW50aW1lVXJsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBhc3luYyBmZXRjaFJ1bnRpbWVJbmZvKCkge1xuICAgIGlmICghdGhpcy5ydW50aW1lVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSdW50aW1lIFVSTCBpcyBub3Qgc2V0XCIpO1xuICAgIH1cbiAgICBjb25zdCBiYXNlSGVhZGVycyA9IHRoaXMuY29yZS5oZWFkZXJzO1xuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gdGhpcy5jb3JlLmNyZWRlbnRpYWxzO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAuLi5iYXNlSGVhZGVyc1xuICAgIH07XG4gICAgaWYgKHRoaXMuX3J1bnRpbWVUcmFuc3BvcnQgPT09IFwic2luZ2xlXCIpIHtcbiAgICAgIGlmICghaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSkge1xuICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNwb25zZTIgPSBhd2FpdCBmZXRjaCh0aGlzLnJ1bnRpbWVVcmwsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXRob2Q6IFwiaW5mb1wiIH0pLFxuICAgICAgICAuLi5jcmVkZW50aWFscyA/IHsgY3JlZGVudGlhbHMgfSA6IHt9XG4gICAgICB9KTtcbiAgICAgIGlmIChcIm9rXCIgaW4gcmVzcG9uc2UyICYmICFyZXNwb25zZTIub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSdW50aW1lIGluZm8gcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgJHtyZXNwb25zZTIuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlMi5qc29uKCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5ydW50aW1lVXJsfS9pbmZvYCwge1xuICAgICAgaGVhZGVycyxcbiAgICAgIC4uLmNyZWRlbnRpYWxzID8geyBjcmVkZW50aWFscyB9IDoge31cbiAgICB9KTtcbiAgICBpZiAoXCJva1wiIGluIHJlc3BvbnNlICYmICFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSdW50aW1lIGluZm8gcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgLyoqXG4gICAqIEFzc2lnbiBhZ2VudCBJRHMgdG8gYSByZWNvcmQgb2YgYWdlbnRzXG4gICAqL1xuICBhc3NpZ25BZ2VudElkcyhhZ2VudHMpIHtcbiAgICBPYmplY3QuZW50cmllcyhhZ2VudHMpLmZvckVhY2goKFtpZCwgYWdlbnRdKSA9PiB7XG4gICAgICBpZiAoYWdlbnQpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZUFuZEFzc2lnbkFnZW50SWQoaWQsIGFnZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYWdlbnRzO1xuICB9XG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBhbmQgYXNzaWduIGFuIGFnZW50IElEXG4gICAqL1xuICB2YWxpZGF0ZUFuZEFzc2lnbkFnZW50SWQocmVnaXN0cmF0aW9uSWQsIGFnZW50KSB7XG4gICAgaWYgKGFnZW50LmFnZW50SWQgJiYgYWdlbnQuYWdlbnRJZCAhPT0gcmVnaXN0cmF0aW9uSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEFnZW50IHJlZ2lzdHJhdGlvbiBtaXNtYXRjaDogQWdlbnQgd2l0aCBJRCBcIiR7YWdlbnQuYWdlbnRJZH1cIiBjYW5ub3QgYmUgcmVnaXN0ZXJlZCB1bmRlciBrZXkgXCIke3JlZ2lzdHJhdGlvbklkfVwiLiBUaGUgYWdlbnQgSUQgbXVzdCBtYXRjaCB0aGUgcmVnaXN0cmF0aW9uIGtleSBvciBiZSB1bmRlZmluZWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFhZ2VudC5hZ2VudElkKSB7XG4gICAgICBhZ2VudC5hZ2VudElkID0gcmVnaXN0cmF0aW9uSWQ7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBOb3RpZnkgc3Vic2NyaWJlcnMgb2YgcnVudGltZSBzdGF0dXMgY2hhbmdlc1xuICAgKi9cbiAgYXN5bmMgbm90aWZ5UnVudGltZVN0YXR1c0NoYW5nZWQoc3RhdHVzKSB7XG4gICAgYXdhaXQgdGhpcy5jb3JlLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIub25SdW50aW1lQ29ubmVjdGlvblN0YXR1c0NoYW5nZWQ/Lih7XG4gICAgICAgIGNvcGlsb3RraXQ6IHRoaXMuY29yZSxcbiAgICAgICAgc3RhdHVzXG4gICAgICB9KSxcbiAgICAgIFwiRXJyb3IgaW4gQ29waWxvdEtpdENvcmUgc3Vic2NyaWJlciAob25SdW50aW1lQ29ubmVjdGlvblN0YXR1c0NoYW5nZWQpOlwiXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogTm90aWZ5IHN1YnNjcmliZXJzIG9mIGFnZW50IGNoYW5nZXNcbiAgICovXG4gIGFzeW5jIG5vdGlmeUFnZW50c0NoYW5nZWQoKSB7XG4gICAgYXdhaXQgdGhpcy5jb3JlLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIub25BZ2VudHNDaGFuZ2VkPy4oe1xuICAgICAgICBjb3BpbG90a2l0OiB0aGlzLmNvcmUsXG4gICAgICAgIGFnZW50czogdGhpcy5fYWdlbnRzXG4gICAgICB9KSxcbiAgICAgIFwiU3Vic2NyaWJlciBvbkFnZW50c0NoYW5nZWQgZXJyb3I6XCJcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jb250ZXh0LXN0b3JlLnRzXG5pbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSBcIkBjb3BpbG90a2l0bmV4dC9zaGFyZWRcIjtcbnZhciBDb250ZXh0U3RvcmUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvcmUpIHtcbiAgICB0aGlzLmNvcmUgPSBjb3JlO1xuICB9XG4gIF9jb250ZXh0ID0ge307XG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvbnRleHQgZW50cmllcyBhcyBhIHJlYWRvbmx5IHJlY29yZFxuICAgKi9cbiAgZ2V0IGNvbnRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBjb250ZXh0IGVudHJ5XG4gICAqIEByZXR1cm5zIFRoZSBJRCBvZiB0aGUgY3JlYXRlZCBjb250ZXh0IGVudHJ5XG4gICAqL1xuICBhZGRDb250ZXh0KHsgZGVzY3JpcHRpb24sIHZhbHVlIH0pIHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICB0aGlzLl9jb250ZXh0W2lkXSA9IHsgZGVzY3JpcHRpb24sIHZhbHVlIH07XG4gICAgdm9pZCB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjb250ZXh0IGVudHJ5IGJ5IElEXG4gICAqL1xuICByZW1vdmVDb250ZXh0KGlkKSB7XG4gICAgZGVsZXRlIHRoaXMuX2NvbnRleHRbaWRdO1xuICAgIHZvaWQgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xuICB9XG4gIC8qKlxuICAgKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGNvbnRleHQgY2hhbmdlc1xuICAgKi9cbiAgYXN5bmMgbm90aWZ5U3Vic2NyaWJlcnMoKSB7XG4gICAgYXdhaXQgdGhpcy5jb3JlLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIub25Db250ZXh0Q2hhbmdlZD8uKHtcbiAgICAgICAgY29waWxvdGtpdDogdGhpcy5jb3JlLFxuICAgICAgICBjb250ZXh0OiB0aGlzLl9jb250ZXh0XG4gICAgICB9KSxcbiAgICAgIFwiU3Vic2NyaWJlciBvbkNvbnRleHRDaGFuZ2VkIGVycm9yOlwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvc3VnZ2VzdGlvbi1lbmdpbmUudHNcbmltcG9ydCB7IHJhbmRvbVVVSUQgYXMgcmFuZG9tVVVJRDIsIHBhcnRpYWxKU09OUGFyc2UgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L3NoYXJlZFwiO1xudmFyIFN1Z2dlc3Rpb25FbmdpbmUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvcmUpIHtcbiAgICB0aGlzLmNvcmUgPSBjb3JlO1xuICB9XG4gIF9zdWdnZXN0aW9uc0NvbmZpZyA9IHt9O1xuICBfc3VnZ2VzdGlvbnMgPSB7fTtcbiAgX3J1bm5pbmdTdWdnZXN0aW9ucyA9IHt9O1xuICAvKipcbiAgICogSW5pdGlhbGl6ZSB3aXRoIHN1Z2dlc3Rpb24gY29uZmlnc1xuICAgKi9cbiAgaW5pdGlhbGl6ZShzdWdnZXN0aW9uc0NvbmZpZykge1xuICAgIGZvciAoY29uc3QgY29uZmlnIG9mIHN1Z2dlc3Rpb25zQ29uZmlnKSB7XG4gICAgICB0aGlzLl9zdWdnZXN0aW9uc0NvbmZpZ1tyYW5kb21VVUlEMigpXSA9IGNvbmZpZztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHN1Z2dlc3Rpb24gY29uZmlndXJhdGlvblxuICAgKiBAcmV0dXJucyBUaGUgSUQgb2YgdGhlIGNyZWF0ZWQgY29uZmlnXG4gICAqL1xuICBhZGRTdWdnZXN0aW9uc0NvbmZpZyhjb25maWcpIHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQyKCk7XG4gICAgdGhpcy5fc3VnZ2VzdGlvbnNDb25maWdbaWRdID0gY29uZmlnO1xuICAgIHZvaWQgdGhpcy5ub3RpZnlTdWdnZXN0aW9uc0NvbmZpZ0NoYW5nZWQoKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHN1Z2dlc3Rpb24gY29uZmlndXJhdGlvbiBieSBJRFxuICAgKi9cbiAgcmVtb3ZlU3VnZ2VzdGlvbnNDb25maWcoaWQpIHtcbiAgICBkZWxldGUgdGhpcy5fc3VnZ2VzdGlvbnNDb25maWdbaWRdO1xuICAgIHZvaWQgdGhpcy5ub3RpZnlTdWdnZXN0aW9uc0NvbmZpZ0NoYW5nZWQoKTtcbiAgfVxuICAvKipcbiAgICogUmVsb2FkIHN1Z2dlc3Rpb25zIGZvciBhIHNwZWNpZmljIGFnZW50XG4gICAqIFRoaXMgdHJpZ2dlcnMgZ2VuZXJhdGlvbiBvZiBuZXcgc3VnZ2VzdGlvbnMgYmFzZWQgb24gY3VycmVudCBjb25maWdzXG4gICAqL1xuICByZWxvYWRTdWdnZXN0aW9ucyhhZ2VudElkKSB7XG4gICAgdGhpcy5jbGVhclN1Z2dlc3Rpb25zKGFnZW50SWQpO1xuICAgIGNvbnN0IGFnZW50ID0gdGhpcy5jb3JlLmdldEFnZW50KGFnZW50SWQpO1xuICAgIGlmICghYWdlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZUNvdW50ID0gYWdlbnQubWVzc2FnZXM/Lmxlbmd0aCA/PyAwO1xuICAgIGxldCBoYXNBbnlTdWdnZXN0aW9ucyA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgY29uZmlnIG9mIE9iamVjdC52YWx1ZXModGhpcy5fc3VnZ2VzdGlvbnNDb25maWcpKSB7XG4gICAgICBpZiAoY29uZmlnLmNvbnN1bWVyQWdlbnRJZCAhPT0gdm9pZCAwICYmIGNvbmZpZy5jb25zdW1lckFnZW50SWQgIT09IFwiKlwiICYmIGNvbmZpZy5jb25zdW1lckFnZW50SWQgIT09IGFnZW50SWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuc2hvdWxkU2hvd1N1Z2dlc3Rpb25zKGNvbmZpZywgbWVzc2FnZUNvdW50KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25JZCA9IHJhbmRvbVVVSUQyKCk7XG4gICAgICBpZiAoaXNEeW5hbWljU3VnZ2VzdGlvbnNDb25maWcoY29uZmlnKSkge1xuICAgICAgICBpZiAoIWhhc0FueVN1Z2dlc3Rpb25zKSB7XG4gICAgICAgICAgaGFzQW55U3VnZ2VzdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIHZvaWQgdGhpcy5ub3RpZnlTdWdnZXN0aW9uc1N0YXJ0ZWRMb2FkaW5nKGFnZW50SWQpO1xuICAgICAgICB9XG4gICAgICAgIHZvaWQgdGhpcy5nZW5lcmF0ZVN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25JZCwgY29uZmlnLCBhZ2VudElkKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNTdGF0aWNTdWdnZXN0aW9uc0NvbmZpZyhjb25maWcpKSB7XG4gICAgICAgIHRoaXMuYWRkU3RhdGljU3VnZ2VzdGlvbnMoc3VnZ2VzdGlvbklkLCBjb25maWcsIGFnZW50SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xlYXIgYWxsIHN1Z2dlc3Rpb25zIGZvciBhIHNwZWNpZmljIGFnZW50XG4gICAqL1xuICBjbGVhclN1Z2dlc3Rpb25zKGFnZW50SWQpIHtcbiAgICBjb25zdCBydW5uaW5nQWdlbnRzID0gdGhpcy5fcnVubmluZ1N1Z2dlc3Rpb25zW2FnZW50SWRdO1xuICAgIGlmIChydW5uaW5nQWdlbnRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGFnZW50IG9mIHJ1bm5pbmdBZ2VudHMpIHtcbiAgICAgICAgYWdlbnQuYWJvcnRSdW4oKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSB0aGlzLl9ydW5uaW5nU3VnZ2VzdGlvbnNbYWdlbnRJZF07XG4gICAgfVxuICAgIHRoaXMuX3N1Z2dlc3Rpb25zW2FnZW50SWRdID0ge307XG4gICAgdm9pZCB0aGlzLm5vdGlmeVN1Z2dlc3Rpb25zQ2hhbmdlZChhZ2VudElkLCBbXSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHN1Z2dlc3Rpb25zIGZvciBhbiBhZ2VudFxuICAgKi9cbiAgZ2V0U3VnZ2VzdGlvbnMoYWdlbnRJZCkge1xuICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gT2JqZWN0LnZhbHVlcyh0aGlzLl9zdWdnZXN0aW9uc1thZ2VudElkXSA/PyB7fSkuZmxhdCgpO1xuICAgIGNvbnN0IGlzTG9hZGluZyA9ICh0aGlzLl9ydW5uaW5nU3VnZ2VzdGlvbnNbYWdlbnRJZF0/Lmxlbmd0aCA/PyAwKSA+IDA7XG4gICAgcmV0dXJuIHsgc3VnZ2VzdGlvbnMsIGlzTG9hZGluZyB9O1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzdWdnZXN0aW9ucyB1c2luZyBhIHByb3ZpZGVyIGFnZW50XG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25JZCwgY29uZmlnLCBjb25zdW1lckFnZW50SWQpIHtcbiAgICBsZXQgYWdlbnQgPSB2b2lkIDA7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zUHJvdmlkZXJBZ2VudCA9IHRoaXMuY29yZS5nZXRBZ2VudChcbiAgICAgICAgY29uZmlnLnByb3ZpZGVyQWdlbnRJZCA/PyBcImRlZmF1bHRcIlxuICAgICAgKTtcbiAgICAgIGlmICghc3VnZ2VzdGlvbnNQcm92aWRlckFnZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU3VnZ2VzdGlvbnMgcHJvdmlkZXIgYWdlbnQgbm90IGZvdW5kOiAke2NvbmZpZy5wcm92aWRlckFnZW50SWR9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCBzdWdnZXN0aW9uc0NvbnN1bWVyQWdlbnQgPSB0aGlzLmNvcmUuZ2V0QWdlbnQoY29uc3VtZXJBZ2VudElkKTtcbiAgICAgIGlmICghc3VnZ2VzdGlvbnNDb25zdW1lckFnZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU3VnZ2VzdGlvbnMgY29uc3VtZXIgYWdlbnQgbm90IGZvdW5kOiAke2NvbnN1bWVyQWdlbnRJZH1gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsb25lZEFnZW50ID0gc3VnZ2VzdGlvbnNQcm92aWRlckFnZW50LmNsb25lKCk7XG4gICAgICBhZ2VudCA9IGNsb25lZEFnZW50O1xuICAgICAgYWdlbnQudGhyZWFkSWQgPSBzdWdnZXN0aW9uSWQ7XG4gICAgICBhZ2VudC5tZXNzYWdlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3VnZ2VzdGlvbnNDb25zdW1lckFnZW50Lm1lc3NhZ2VzKSk7XG4gICAgICBhZ2VudC5zdGF0ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3VnZ2VzdGlvbnNDb25zdW1lckFnZW50LnN0YXRlKSk7XG4gICAgICB0aGlzLl9zdWdnZXN0aW9uc1tjb25zdW1lckFnZW50SWRdID0ge1xuICAgICAgICAuLi50aGlzLl9zdWdnZXN0aW9uc1tjb25zdW1lckFnZW50SWRdID8/IHt9LFxuICAgICAgICBbc3VnZ2VzdGlvbklkXTogW11cbiAgICAgIH07XG4gICAgICB0aGlzLl9ydW5uaW5nU3VnZ2VzdGlvbnNbY29uc3VtZXJBZ2VudElkXSA9IFsuLi50aGlzLl9ydW5uaW5nU3VnZ2VzdGlvbnNbY29uc3VtZXJBZ2VudElkXSA/PyBbXSwgYWdlbnRdO1xuICAgICAgYWdlbnQuYWRkTWVzc2FnZSh7XG4gICAgICAgIGlkOiBzdWdnZXN0aW9uSWQsXG4gICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgYFN1Z2dlc3Qgd2hhdCB0aGUgdXNlciBjb3VsZCBzYXkgbmV4dC4gUHJvdmlkZSBjbGVhciwgaGlnaGx5IHJlbGV2YW50IHN1Z2dlc3Rpb25zIGJ5IGNhbGxpbmcgdGhlIFxcYGNvcGlsb3RraXRTdWdnZXN0XFxgIHRvb2wuYCxcbiAgICAgICAgICBgUHJvdmlkZSBhdCBsZWFzdCAke2NvbmZpZy5taW5TdWdnZXN0aW9ucyA/PyAxfSBhbmQgYXQgbW9zdCAke2NvbmZpZy5tYXhTdWdnZXN0aW9ucyA/PyAzfSBzdWdnZXN0aW9ucy5gLFxuICAgICAgICAgIGBUaGUgdXNlciBoYXMgdGhlIGZvbGxvd2luZyB0b29scyBhdmFpbGFibGU6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5jb3JlLmJ1aWxkRnJvbnRlbmRUb29scyhjb25zdW1lckFnZW50SWQpKX0uYCxcbiAgICAgICAgICBgICR7Y29uZmlnLmluc3RydWN0aW9uc31gXG4gICAgICAgIF0uam9pbihcIlxcblwiKVxuICAgICAgfSk7XG4gICAgICBhd2FpdCBhZ2VudC5ydW5BZ2VudChcbiAgICAgICAge1xuICAgICAgICAgIGNvbnRleHQ6IE9iamVjdC52YWx1ZXModGhpcy5jb3JlLmNvbnRleHQpLFxuICAgICAgICAgIGZvcndhcmRlZFByb3BzOiB7XG4gICAgICAgICAgICAuLi50aGlzLmNvcmUucHJvcGVydGllcyxcbiAgICAgICAgICAgIHRvb2xDaG9pY2U6IHsgdHlwZTogXCJmdW5jdGlvblwiLCBmdW5jdGlvbjogeyBuYW1lOiBcImNvcGlsb3RraXRTdWdnZXN0XCIgfSB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b29sczogW1NVR0dFU1RfVE9PTF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9uTWVzc2FnZXNDaGFuZ2VkOiAoeyBtZXNzYWdlcyB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3RTdWdnZXN0aW9ucyhtZXNzYWdlcywgc3VnZ2VzdGlvbklkLCBjb25zdW1lckFnZW50SWQsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZ2VuZXJhdGluZyBzdWdnZXN0aW9uczpcIiwgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmZpbmFsaXplU3VnZ2VzdGlvbnMoc3VnZ2VzdGlvbklkLCBjb25zdW1lckFnZW50SWQpO1xuICAgICAgY29uc3QgcnVubmluZ0FnZW50cyA9IHRoaXMuX3J1bm5pbmdTdWdnZXN0aW9uc1tjb25zdW1lckFnZW50SWRdO1xuICAgICAgaWYgKGFnZW50ICYmIHJ1bm5pbmdBZ2VudHMpIHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRBZ2VudHMgPSBydW5uaW5nQWdlbnRzLmZpbHRlcigoYSkgPT4gYSAhPT0gYWdlbnQpO1xuICAgICAgICB0aGlzLl9ydW5uaW5nU3VnZ2VzdGlvbnNbY29uc3VtZXJBZ2VudElkXSA9IGZpbHRlcmVkQWdlbnRzO1xuICAgICAgICBpZiAoZmlsdGVyZWRBZ2VudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX3J1bm5pbmdTdWdnZXN0aW9uc1tjb25zdW1lckFnZW50SWRdO1xuICAgICAgICAgIGF3YWl0IHRoaXMubm90aWZ5U3VnZ2VzdGlvbnNGaW5pc2hlZExvYWRpbmcoY29uc3VtZXJBZ2VudElkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogRmluYWxpemUgc3VnZ2VzdGlvbnMgYnkgbWFya2luZyB0aGVtIGFzIG5vIGxvbmdlciBsb2FkaW5nXG4gICAqL1xuICBmaW5hbGl6ZVN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25JZCwgY29uc3VtZXJBZ2VudElkKSB7XG4gICAgY29uc3QgYWdlbnRTdWdnZXN0aW9ucyA9IHRoaXMuX3N1Z2dlc3Rpb25zW2NvbnN1bWVyQWdlbnRJZF07XG4gICAgY29uc3QgY3VycmVudFN1Z2dlc3Rpb25zID0gYWdlbnRTdWdnZXN0aW9ucz8uW3N1Z2dlc3Rpb25JZF07XG4gICAgaWYgKGFnZW50U3VnZ2VzdGlvbnMgJiYgY3VycmVudFN1Z2dlc3Rpb25zICYmIGN1cnJlbnRTdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBmaW5hbGl6ZWRTdWdnZXN0aW9ucyA9IGN1cnJlbnRTdWdnZXN0aW9ucy5maWx0ZXIoKHN1Z2dlc3Rpb24pID0+IHN1Z2dlc3Rpb24udGl0bGUgIT09IFwiXCIgfHwgc3VnZ2VzdGlvbi5tZXNzYWdlICE9PSBcIlwiKS5tYXAoKHN1Z2dlc3Rpb24pID0+ICh7XG4gICAgICAgIC4uLnN1Z2dlc3Rpb24sXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICAgIH0pKTtcbiAgICAgIGlmIChmaW5hbGl6ZWRTdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFnZW50U3VnZ2VzdGlvbnNbc3VnZ2VzdGlvbklkXSA9IGZpbmFsaXplZFN1Z2dlc3Rpb25zO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIGFnZW50U3VnZ2VzdGlvbnNbc3VnZ2VzdGlvbklkXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFsbFN1Z2dlc3Rpb25zID0gT2JqZWN0LnZhbHVlcyh0aGlzLl9zdWdnZXN0aW9uc1tjb25zdW1lckFnZW50SWRdID8/IHt9KS5mbGF0KCk7XG4gICAgICB2b2lkIHRoaXMubm90aWZ5U3VnZ2VzdGlvbnNDaGFuZ2VkKGNvbnN1bWVyQWdlbnRJZCwgYWxsU3VnZ2VzdGlvbnMsIFwiZmluYWxpemVkXCIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRXh0cmFjdCBzdWdnZXN0aW9ucyBmcm9tIG1lc3NhZ2VzIChjYWxsZWQgZHVyaW5nIHN0cmVhbWluZylcbiAgICovXG4gIGV4dHJhY3RTdWdnZXN0aW9ucyhtZXNzYWdlcywgc3VnZ2VzdGlvbklkLCBjb25zdW1lckFnZW50SWQsIGlzUnVubmluZykge1xuICAgIGNvbnN0IGlkeCA9IG1lc3NhZ2VzLmZpbmRJbmRleCgobWVzc2FnZSkgPT4gbWVzc2FnZS5pZCA9PT0gc3VnZ2VzdGlvbklkKTtcbiAgICBpZiAoaWR4ID09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gW107XG4gICAgY29uc3QgbmV3TWVzc2FnZXMgPSBtZXNzYWdlcy5zbGljZShpZHggKyAxKTtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbmV3TWVzc2FnZXMpIHtcbiAgICAgIGlmIChtZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgJiYgbWVzc2FnZS50b29sQ2FsbHMpIHtcbiAgICAgICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiBtZXNzYWdlLnRvb2xDYWxscykge1xuICAgICAgICAgIGlmICh0b29sQ2FsbC5mdW5jdGlvbi5uYW1lID09PSBcImNvcGlsb3RraXRTdWdnZXN0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxBcmdzID0gQXJyYXkuaXNBcnJheSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpID8gdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzLmpvaW4oXCJcIikgOiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHM7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJ0aWFsSlNPTlBhcnNlKGZ1bGxBcmdzKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWQgJiYgdHlwZW9mIHBhcnNlZCA9PT0gXCJvYmplY3RcIiAmJiBcInN1Z2dlc3Rpb25zXCIgaW4gcGFyc2VkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFN1Z2dlc3Rpb25zID0gcGFyc2VkLnN1Z2dlc3Rpb25zO1xuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWRTdWdnZXN0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcGFyc2VkU3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIFwidGl0bGVcIiBpbiBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlID8/IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaXRlbS5tZXNzYWdlID8/IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgIC8vIFdpbGwgYmUgc2V0IGNvcnJlY3RseSBiZWxvd1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzUnVubmluZyAmJiBzdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBzdWdnZXN0aW9uc1tzdWdnZXN0aW9ucy5sZW5ndGggLSAxXS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudFN1Z2dlc3Rpb25zID0gdGhpcy5fc3VnZ2VzdGlvbnNbY29uc3VtZXJBZ2VudElkXTtcbiAgICBpZiAoYWdlbnRTdWdnZXN0aW9ucykge1xuICAgICAgYWdlbnRTdWdnZXN0aW9uc1tzdWdnZXN0aW9uSWRdID0gc3VnZ2VzdGlvbnM7XG4gICAgICBjb25zdCBhbGxTdWdnZXN0aW9ucyA9IE9iamVjdC52YWx1ZXModGhpcy5fc3VnZ2VzdGlvbnNbY29uc3VtZXJBZ2VudElkXSA/PyB7fSkuZmxhdCgpO1xuICAgICAgdm9pZCB0aGlzLm5vdGlmeVN1Z2dlc3Rpb25zQ2hhbmdlZChjb25zdW1lckFnZW50SWQsIGFsbFN1Z2dlc3Rpb25zLCBcInN1Z2dlc3Rpb25zIGNoYW5nZWRcIik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBOb3RpZnkgc3Vic2NyaWJlcnMgb2Ygc3VnZ2VzdGlvbnMgY29uZmlnIGNoYW5nZXNcbiAgICovXG4gIGFzeW5jIG5vdGlmeVN1Z2dlc3Rpb25zQ29uZmlnQ2hhbmdlZCgpIHtcbiAgICBhd2FpdCB0aGlzLmNvcmUubm90aWZ5U3Vic2NyaWJlcnMoXG4gICAgICAoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlci5vblN1Z2dlc3Rpb25zQ29uZmlnQ2hhbmdlZD8uKHtcbiAgICAgICAgY29waWxvdGtpdDogdGhpcy5jb3JlLFxuICAgICAgICBzdWdnZXN0aW9uc0NvbmZpZzogdGhpcy5fc3VnZ2VzdGlvbnNDb25maWdcbiAgICAgIH0pLFxuICAgICAgXCJTdWJzY3JpYmVyIG9uU3VnZ2VzdGlvbnNDb25maWdDaGFuZ2VkIGVycm9yOlwiXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogTm90aWZ5IHN1YnNjcmliZXJzIG9mIHN1Z2dlc3Rpb25zIGNoYW5nZXNcbiAgICovXG4gIGFzeW5jIG5vdGlmeVN1Z2dlc3Rpb25zQ2hhbmdlZChhZ2VudElkLCBzdWdnZXN0aW9ucywgY29udGV4dCA9IFwiXCIpIHtcbiAgICBhd2FpdCB0aGlzLmNvcmUubm90aWZ5U3Vic2NyaWJlcnMoXG4gICAgICAoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlci5vblN1Z2dlc3Rpb25zQ2hhbmdlZD8uKHtcbiAgICAgICAgY29waWxvdGtpdDogdGhpcy5jb3JlLFxuICAgICAgICBhZ2VudElkLFxuICAgICAgICBzdWdnZXN0aW9uc1xuICAgICAgfSksXG4gICAgICBgU3Vic2NyaWJlciBvblN1Z2dlc3Rpb25zQ2hhbmdlZCBlcnJvcjogJHtjb250ZXh0fWBcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBOb3RpZnkgc3Vic2NyaWJlcnMgdGhhdCBzdWdnZXN0aW9ucyBzdGFydGVkIGxvYWRpbmdcbiAgICovXG4gIGFzeW5jIG5vdGlmeVN1Z2dlc3Rpb25zU3RhcnRlZExvYWRpbmcoYWdlbnRJZCkge1xuICAgIGF3YWl0IHRoaXMuY29yZS5ub3RpZnlTdWJzY3JpYmVycyhcbiAgICAgIChzdWJzY3JpYmVyKSA9PiBzdWJzY3JpYmVyLm9uU3VnZ2VzdGlvbnNTdGFydGVkTG9hZGluZz8uKHtcbiAgICAgICAgY29waWxvdGtpdDogdGhpcy5jb3JlLFxuICAgICAgICBhZ2VudElkXG4gICAgICB9KSxcbiAgICAgIFwiU3Vic2NyaWJlciBvblN1Z2dlc3Rpb25zU3RhcnRlZExvYWRpbmcgZXJyb3I6XCJcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBOb3RpZnkgc3Vic2NyaWJlcnMgdGhhdCBzdWdnZXN0aW9ucyBmaW5pc2hlZCBsb2FkaW5nXG4gICAqL1xuICBhc3luYyBub3RpZnlTdWdnZXN0aW9uc0ZpbmlzaGVkTG9hZGluZyhhZ2VudElkKSB7XG4gICAgYXdhaXQgdGhpcy5jb3JlLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIub25TdWdnZXN0aW9uc0ZpbmlzaGVkTG9hZGluZz8uKHtcbiAgICAgICAgY29waWxvdGtpdDogdGhpcy5jb3JlLFxuICAgICAgICBhZ2VudElkXG4gICAgICB9KSxcbiAgICAgIFwiU3Vic2NyaWJlciBvblN1Z2dlc3Rpb25zRmluaXNoZWRMb2FkaW5nIGVycm9yOlwiXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgc3VnZ2VzdGlvbnMgc2hvdWxkIGJlIHNob3duIGJhc2VkIG9uIGF2YWlsYWJpbGl0eSBhbmQgbWVzc2FnZSBjb3VudFxuICAgKi9cbiAgc2hvdWxkU2hvd1N1Z2dlc3Rpb25zKGNvbmZpZywgbWVzc2FnZUNvdW50KSB7XG4gICAgY29uc3QgYXZhaWxhYmlsaXR5ID0gY29uZmlnLmF2YWlsYWJsZTtcbiAgICBpZiAoIWF2YWlsYWJpbGl0eSkge1xuICAgICAgaWYgKGlzRHluYW1pY1N1Z2dlc3Rpb25zQ29uZmlnKGNvbmZpZykpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VDb3VudCA+IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWVzc2FnZUNvdW50ID09PSAwO1xuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGF2YWlsYWJpbGl0eSkge1xuICAgICAgY2FzZSBcImRpc2FibGVkXCI6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIGNhc2UgXCJiZWZvcmUtZmlyc3QtbWVzc2FnZVwiOlxuICAgICAgICByZXR1cm4gbWVzc2FnZUNvdW50ID09PSAwO1xuICAgICAgY2FzZSBcImFmdGVyLWZpcnN0LW1lc3NhZ2VcIjpcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VDb3VudCA+IDA7XG4gICAgICBjYXNlIFwiYWx3YXlzXCI6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWRkIHN0YXRpYyBzdWdnZXN0aW9ucyBkaXJlY3RseSB3aXRob3V0IEFJIGdlbmVyYXRpb25cbiAgICovXG4gIGFkZFN0YXRpY1N1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25JZCwgY29uZmlnLCBjb25zdW1lckFnZW50SWQpIHtcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGNvbmZpZy5zdWdnZXN0aW9ucy5tYXAoKHMpID0+ICh7XG4gICAgICAuLi5zLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgIH0pKTtcbiAgICB0aGlzLl9zdWdnZXN0aW9uc1tjb25zdW1lckFnZW50SWRdID0ge1xuICAgICAgLi4udGhpcy5fc3VnZ2VzdGlvbnNbY29uc3VtZXJBZ2VudElkXSA/PyB7fSxcbiAgICAgIFtzdWdnZXN0aW9uSWRdOiBzdWdnZXN0aW9uc1xuICAgIH07XG4gICAgY29uc3QgYWxsU3VnZ2VzdGlvbnMgPSBPYmplY3QudmFsdWVzKHRoaXMuX3N1Z2dlc3Rpb25zW2NvbnN1bWVyQWdlbnRJZF0gPz8ge30pLmZsYXQoKTtcbiAgICB2b2lkIHRoaXMubm90aWZ5U3VnZ2VzdGlvbnNDaGFuZ2VkKGNvbnN1bWVyQWdlbnRJZCwgYWxsU3VnZ2VzdGlvbnMsIFwic3RhdGljIHN1Z2dlc3Rpb25zIGFkZGVkXCIpO1xuICB9XG59O1xuZnVuY3Rpb24gaXNEeW5hbWljU3VnZ2VzdGlvbnNDb25maWcoY29uZmlnKSB7XG4gIHJldHVybiBcImluc3RydWN0aW9uc1wiIGluIGNvbmZpZztcbn1cbmZ1bmN0aW9uIGlzU3RhdGljU3VnZ2VzdGlvbnNDb25maWcoY29uZmlnKSB7XG4gIHJldHVybiBcInN1Z2dlc3Rpb25zXCIgaW4gY29uZmlnO1xufVxudmFyIFNVR0dFU1RfVE9PTCA9IHtcbiAgbmFtZTogXCJjb3BpbG90a2l0U3VnZ2VzdFwiLFxuICBkZXNjcmlwdGlvbjogXCJTdWdnZXN0IHdoYXQgdGhlIHVzZXIgY291bGQgc2F5IG5leHRcIixcbiAgcGFyYW1ldGVyczoge1xuICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgcHJvcGVydGllczoge1xuICAgICAgc3VnZ2VzdGlvbnM6IHtcbiAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJMaXN0IG9mIHN1Z2dlc3Rpb25zIHNob3duIHRvIHRoZSB1c2VyIGFzIGJ1dHRvbnMuXCIsXG4gICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgdGl0bGUgb2YgdGhlIHN1Z2dlc3Rpb24uIFRoaXMgaXMgc2hvd24gYXMgYSBidXR0b24gYW5kIHNob3VsZCBiZSBzaG9ydC5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG1lc3NhZ2UgdG8gc2VuZCB3aGVuIHRoZSBzdWdnZXN0aW9uIGlzIGNsaWNrZWQuIFRoaXMgc2hvdWxkIGJlIGEgY2xlYXIsIGNvbXBsZXRlIHNlbnRlbmNlIGFuZCB3aWxsIGJlIHNlbnQgYXMgYW4gaW5zdHJ1Y3Rpb24gdG8gdGhlIEFJLlwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogW1widGl0bGVcIiwgXCJtZXNzYWdlXCJdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHJlcXVpcmVkOiBbXCJzdWdnZXN0aW9uc1wiXVxuICB9XG59O1xuXG4vLyBzcmMvY29yZS9ydW4taGFuZGxlci50c1xuaW1wb3J0IHsgSHR0cEFnZW50IGFzIEh0dHBBZ2VudDMgfSBmcm9tIFwiQGFnLXVpL2NsaWVudFwiO1xuaW1wb3J0IHsgcmFuZG9tVVVJRCBhcyByYW5kb21VVUlEMywgbG9nZ2VyIGFzIGxvZ2dlcjIgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L3NoYXJlZFwiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcInpvZC10by1qc29uLXNjaGVtYVwiO1xudmFyIFJ1bkhhbmRsZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvcmUpIHtcbiAgICB0aGlzLmNvcmUgPSBjb3JlO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIF90b29scyA9IFtdO1xuICAvKipcbiAgICogR2V0IGFsbCB0b29scyBhcyBhIHJlYWRvbmx5IGFycmF5XG4gICAqL1xuICBnZXQgdG9vbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Rvb2xzO1xuICB9XG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHdpdGggdG9vbHNcbiAgICovXG4gIGluaXRpYWxpemUodG9vbHMpIHtcbiAgICB0aGlzLl90b29scyA9IHRvb2xzO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSB0b29sIHRvIHRoZSByZWdpc3RyeVxuICAgKi9cbiAgYWRkVG9vbCh0b29sKSB7XG4gICAgY29uc3QgZXhpc3RpbmdUb29sSW5kZXggPSB0aGlzLl90b29scy5maW5kSW5kZXgoKHQpID0+IHQubmFtZSA9PT0gdG9vbC5uYW1lICYmIHQuYWdlbnRJZCA9PT0gdG9vbC5hZ2VudElkKTtcbiAgICBpZiAoZXhpc3RpbmdUb29sSW5kZXggIT09IC0xKSB7XG4gICAgICBsb2dnZXIyLndhcm4oYFRvb2wgYWxyZWFkeSBleGlzdHM6ICcke3Rvb2wubmFtZX0nIGZvciBhZ2VudCAnJHt0b29sLmFnZW50SWQgfHwgXCJnbG9iYWxcIn0nLCBza2lwcGluZy5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fdG9vbHMucHVzaCh0b29sKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgdG9vbCBieSBuYW1lIGFuZCBvcHRpb25hbGx5IGJ5IGFnZW50SWRcbiAgICovXG4gIHJlbW92ZVRvb2woaWQsIGFnZW50SWQpIHtcbiAgICB0aGlzLl90b29scyA9IHRoaXMuX3Rvb2xzLmZpbHRlcigodG9vbCkgPT4ge1xuICAgICAgaWYgKGFnZW50SWQgIT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gISh0b29sLm5hbWUgPT09IGlkICYmIHRvb2wuYWdlbnRJZCA9PT0gYWdlbnRJZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gISh0b29sLm5hbWUgPT09IGlkICYmICF0b29sLmFnZW50SWQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSB0b29sIGJ5IG5hbWUgYW5kIG9wdGlvbmFsbHkgYnkgYWdlbnRJZC5cbiAgICogSWYgYWdlbnRJZCBpcyBwcm92aWRlZCwgaXQgd2lsbCBmaXJzdCBsb29rIGZvciBhbiBhZ2VudC1zcGVjaWZpYyB0b29sLFxuICAgKiB0aGVuIGZhbGwgYmFjayB0byBhIGdsb2JhbCB0b29sIHdpdGggdGhlIHNhbWUgbmFtZS5cbiAgICovXG4gIGdldFRvb2wocGFyYW1zKSB7XG4gICAgY29uc3QgeyB0b29sTmFtZSwgYWdlbnRJZCB9ID0gcGFyYW1zO1xuICAgIGlmIChhZ2VudElkKSB7XG4gICAgICBjb25zdCBhZ2VudFRvb2wgPSB0aGlzLl90b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IHRvb2xOYW1lICYmIHRvb2wuYWdlbnRJZCA9PT0gYWdlbnRJZCk7XG4gICAgICBpZiAoYWdlbnRUb29sKSB7XG4gICAgICAgIHJldHVybiBhZ2VudFRvb2w7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IHRvb2xOYW1lICYmICF0b29sLmFnZW50SWQpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYWxsIHRvb2xzIGF0IG9uY2UuIFJlcGxhY2VzIGV4aXN0aW5nIHRvb2xzLlxuICAgKi9cbiAgc2V0VG9vbHModG9vbHMpIHtcbiAgICB0aGlzLl90b29scyA9IFsuLi50b29sc107XG4gIH1cbiAgLyoqXG4gICAqIENvbm5lY3QgYW4gYWdlbnQgKGVzdGFibGlzaCBpbml0aWFsIGNvbm5lY3Rpb24pXG4gICAqL1xuICBhc3luYyBjb25uZWN0QWdlbnQoeyBhZ2VudCB9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGFnZW50LmRldGFjaEFjdGl2ZVJ1bigpO1xuICAgICAgYWdlbnQuc2V0TWVzc2FnZXMoW10pO1xuICAgICAgYWdlbnQuc2V0U3RhdGUoe30pO1xuICAgICAgaWYgKGFnZW50IGluc3RhbmNlb2YgSHR0cEFnZW50Mykge1xuICAgICAgICBhZ2VudC5oZWFkZXJzID0geyAuLi50aGlzLmNvcmUuaGVhZGVycyB9O1xuICAgICAgfVxuICAgICAgY29uc3QgcnVuQWdlbnRSZXN1bHQgPSBhd2FpdCBhZ2VudC5jb25uZWN0QWdlbnQoXG4gICAgICAgIHtcbiAgICAgICAgICBmb3J3YXJkZWRQcm9wczogdGhpcy5jb3JlLnByb3BlcnRpZXMsXG4gICAgICAgICAgdG9vbHM6IHRoaXMuYnVpbGRGcm9udGVuZFRvb2xzKGFnZW50LmFnZW50SWQpXG4gICAgICAgIH0sXG4gICAgICAgIHRoaXMuY3JlYXRlQWdlbnRFcnJvclN1YnNjcmliZXIoYWdlbnQpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0FnZW50UmVzdWx0KHsgcnVuQWdlbnRSZXN1bHQsIGFnZW50IH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBjb25uZWN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XG4gICAgICBjb25zdCBjb250ZXh0ID0ge307XG4gICAgICBpZiAoYWdlbnQuYWdlbnRJZCkge1xuICAgICAgICBjb250ZXh0LmFnZW50SWQgPSBhZ2VudC5hZ2VudElkO1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5jb3JlLmVtaXRFcnJvcih7XG4gICAgICAgIGVycm9yOiBjb25uZWN0RXJyb3IsXG4gICAgICAgIGNvZGU6IFwiYWdlbnRfY29ubmVjdF9mYWlsZWRcIiAvKiBBR0VOVF9DT05ORUNUX0ZBSUxFRCAqLyxcbiAgICAgICAgY29udGV4dFxuICAgICAgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJ1biBhbiBhZ2VudFxuICAgKi9cbiAgYXN5bmMgcnVuQWdlbnQoeyBhZ2VudCB9KSB7XG4gICAgaWYgKGFnZW50LmFnZW50SWQpIHtcbiAgICAgIHZvaWQgdGhpcy5jb3JlLnN1Z2dlc3Rpb25FbmdpbmUuY2xlYXJTdWdnZXN0aW9ucyhhZ2VudC5hZ2VudElkKTtcbiAgICB9XG4gICAgaWYgKGFnZW50IGluc3RhbmNlb2YgSHR0cEFnZW50Mykge1xuICAgICAgYWdlbnQuaGVhZGVycyA9IHsgLi4udGhpcy5jb3JlLmhlYWRlcnMgfTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJ1bkFnZW50UmVzdWx0ID0gYXdhaXQgYWdlbnQucnVuQWdlbnQoXG4gICAgICAgIHtcbiAgICAgICAgICBmb3J3YXJkZWRQcm9wczogdGhpcy5jb3JlLnByb3BlcnRpZXMsXG4gICAgICAgICAgdG9vbHM6IHRoaXMuYnVpbGRGcm9udGVuZFRvb2xzKGFnZW50LmFnZW50SWQpLFxuICAgICAgICAgIGNvbnRleHQ6IE9iamVjdC52YWx1ZXModGhpcy5jb3JlLmNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHRoaXMuY3JlYXRlQWdlbnRFcnJvclN1YnNjcmliZXIoYWdlbnQpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0FnZW50UmVzdWx0KHsgcnVuQWdlbnRSZXN1bHQsIGFnZW50IH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBydW5FcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB7fTtcbiAgICAgIGlmIChhZ2VudC5hZ2VudElkKSB7XG4gICAgICAgIGNvbnRleHQuYWdlbnRJZCA9IGFnZW50LmFnZW50SWQ7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmNvcmUuZW1pdEVycm9yKHtcbiAgICAgICAgZXJyb3I6IHJ1bkVycm9yLFxuICAgICAgICBjb2RlOiBcImFnZW50X3J1bl9mYWlsZWRcIiAvKiBBR0VOVF9SVU5fRkFJTEVEICovLFxuICAgICAgICBjb250ZXh0XG4gICAgICB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUHJvY2VzcyBhZ2VudCByZXN1bHQgYW5kIGV4ZWN1dGUgdG9vbHNcbiAgICovXG4gIGFzeW5jIHByb2Nlc3NBZ2VudFJlc3VsdCh7XG4gICAgcnVuQWdlbnRSZXN1bHQsXG4gICAgYWdlbnRcbiAgfSkge1xuICAgIGNvbnN0IHsgbmV3TWVzc2FnZXMgfSA9IHJ1bkFnZW50UmVzdWx0O1xuICAgIGNvbnN0IGFnZW50SWQgPSBhZ2VudC5hZ2VudElkO1xuICAgIGxldCBuZWVkc0ZvbGxvd1VwID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG5ld01lc3NhZ2VzKSB7XG4gICAgICBpZiAobWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgdG9vbENhbGwgb2YgbWVzc2FnZS50b29sQ2FsbHMgfHwgW10pIHtcbiAgICAgICAgICBpZiAobmV3TWVzc2FnZXMuZmluZEluZGV4KChtKSA9PiBtLnJvbGUgPT09IFwidG9vbFwiICYmIG0udG9vbENhbGxJZCA9PT0gdG9vbENhbGwuaWQpID09PSAtMSkge1xuICAgICAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuZ2V0VG9vbCh7XG4gICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgICBhZ2VudElkOiBhZ2VudC5hZ2VudElkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0b29sKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvbGxvd1VwID0gYXdhaXQgdGhpcy5leGVjdXRlU3BlY2lmaWNUb29sKHRvb2wsIHRvb2xDYWxsLCBtZXNzYWdlLCBhZ2VudCwgYWdlbnRJZCk7XG4gICAgICAgICAgICAgIGlmIChmb2xsb3dVcCkge1xuICAgICAgICAgICAgICAgIG5lZWRzRm9sbG93VXAgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCB3aWxkY2FyZFRvb2wgPSB0aGlzLmdldFRvb2woeyB0b29sTmFtZTogXCIqXCIsIGFnZW50SWQ6IGFnZW50LmFnZW50SWQgfSk7XG4gICAgICAgICAgICAgIGlmICh3aWxkY2FyZFRvb2wpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb2xsb3dVcCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVdpbGRjYXJkVG9vbCh3aWxkY2FyZFRvb2wsIHRvb2xDYWxsLCBtZXNzYWdlLCBhZ2VudCwgYWdlbnRJZCk7XG4gICAgICAgICAgICAgICAgaWYgKGZvbGxvd1VwKSB7XG4gICAgICAgICAgICAgICAgICBuZWVkc0ZvbGxvd1VwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5lZWRzRm9sbG93VXApIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJ1bkFnZW50KHsgYWdlbnQgfSk7XG4gICAgfVxuICAgIHZvaWQgdGhpcy5jb3JlLnN1Z2dlc3Rpb25FbmdpbmUucmVsb2FkU3VnZ2VzdGlvbnMoYWdlbnRJZCk7XG4gICAgcmV0dXJuIHJ1bkFnZW50UmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgc3BlY2lmaWMgdG9vbFxuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZVNwZWNpZmljVG9vbCh0b29sLCB0b29sQ2FsbCwgbWVzc2FnZSwgYWdlbnQsIGFnZW50SWQpIHtcbiAgICBpZiAodG9vbD8uYWdlbnRJZCAmJiB0b29sLmFnZW50SWQgIT09IGFnZW50LmFnZW50SWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHRvb2xDYWxsUmVzdWx0ID0gXCJcIjtcbiAgICBsZXQgZXJyb3JNZXNzYWdlO1xuICAgIGxldCBpc0FyZ3VtZW50RXJyb3IgPSBmYWxzZTtcbiAgICBpZiAodG9vbD8uaGFuZGxlcikge1xuICAgICAgbGV0IHBhcnNlZEFyZ3M7XG4gICAgICB0cnkge1xuICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgcGFyc2VFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gcGFyc2VFcnJvci5tZXNzYWdlO1xuICAgICAgICBpc0FyZ3VtZW50RXJyb3IgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLmNvcmUuZW1pdEVycm9yKHtcbiAgICAgICAgICBlcnJvcjogcGFyc2VFcnJvcixcbiAgICAgICAgICBjb2RlOiBcInRvb2xfYXJndW1lbnRfcGFyc2VfZmFpbGVkXCIgLyogVE9PTF9BUkdVTUVOVF9QQVJTRV9GQUlMRUQgKi8sXG4gICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgYWdlbnRJZCxcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICByYXdBcmd1bWVudHM6IHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyxcbiAgICAgICAgICAgIHRvb2xUeXBlOiBcInNwZWNpZmljXCIsXG4gICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5jb3JlLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgICAoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlci5vblRvb2xFeGVjdXRpb25TdGFydD8uKHtcbiAgICAgICAgICBjb3BpbG90a2l0OiB0aGlzLmNvcmUsXG4gICAgICAgICAgdG9vbENhbGxJZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgYWdlbnRJZCxcbiAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICBhcmdzOiBwYXJzZWRBcmdzXG4gICAgICAgIH0pLFxuICAgICAgICBcIlN1YnNjcmliZXIgb25Ub29sRXhlY3V0aW9uU3RhcnQgZXJyb3I6XCJcbiAgICAgICk7XG4gICAgICBpZiAoIWVycm9yTWVzc2FnZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2wuaGFuZGxlcihwYXJzZWRBcmdzLCB0b29sQ2FsbCk7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwIHx8IHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdG9vbENhbGxSZXN1bHQgPSBcIlwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdG9vbENhbGxSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvb2xDYWxsUmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgaGFuZGxlckVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGhhbmRsZXJFcnJvci5tZXNzYWdlO1xuICAgICAgICAgIGF3YWl0IHRoaXMuY29yZS5lbWl0RXJyb3Ioe1xuICAgICAgICAgICAgZXJyb3I6IGhhbmRsZXJFcnJvcixcbiAgICAgICAgICAgIGNvZGU6IFwidG9vbF9oYW5kbGVyX2ZhaWxlZFwiIC8qIFRPT0xfSEFORExFUl9GQUlMRUQgKi8sXG4gICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgIGFnZW50SWQsXG4gICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgcGFyc2VkQXJncyxcbiAgICAgICAgICAgICAgdG9vbFR5cGU6IFwic3BlY2lmaWNcIixcbiAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLmlkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgdG9vbENhbGxSZXN1bHQgPSBgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWA7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmNvcmUubm90aWZ5U3Vic2NyaWJlcnMoXG4gICAgICAgIChzdWJzY3JpYmVyKSA9PiBzdWJzY3JpYmVyLm9uVG9vbEV4ZWN1dGlvbkVuZD8uKHtcbiAgICAgICAgICBjb3BpbG90a2l0OiB0aGlzLmNvcmUsXG4gICAgICAgICAgdG9vbENhbGxJZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgYWdlbnRJZCxcbiAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICByZXN1bHQ6IGVycm9yTWVzc2FnZSA/IFwiXCIgOiB0b29sQ2FsbFJlc3VsdCxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICAgIH0pLFxuICAgICAgICBcIlN1YnNjcmliZXIgb25Ub29sRXhlY3V0aW9uRW5kIGVycm9yOlwiXG4gICAgICApO1xuICAgICAgaWYgKGlzQXJndW1lbnRFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlID8/IFwiVG9vbCBleGVjdXRpb24gZmFpbGVkXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWVycm9yTWVzc2FnZSB8fCAhaXNBcmd1bWVudEVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlSW5kZXggPSBhZ2VudC5tZXNzYWdlcy5maW5kSW5kZXgoKG0pID0+IG0uaWQgPT09IG1lc3NhZ2UuaWQpO1xuICAgICAgY29uc3QgdG9vbE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiByYW5kb21VVUlEMygpLFxuICAgICAgICByb2xlOiBcInRvb2xcIixcbiAgICAgICAgdG9vbENhbGxJZDogdG9vbENhbGwuaWQsXG4gICAgICAgIGNvbnRlbnQ6IHRvb2xDYWxsUmVzdWx0XG4gICAgICB9O1xuICAgICAgYWdlbnQubWVzc2FnZXMuc3BsaWNlKG1lc3NhZ2VJbmRleCArIDEsIDAsIHRvb2xNZXNzYWdlKTtcbiAgICAgIGlmICghZXJyb3JNZXNzYWdlICYmIHRvb2w/LmZvbGxvd1VwICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgd2lsZGNhcmQgdG9vbFxuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZVdpbGRjYXJkVG9vbCh3aWxkY2FyZFRvb2wsIHRvb2xDYWxsLCBtZXNzYWdlLCBhZ2VudCwgYWdlbnRJZCkge1xuICAgIGlmICh3aWxkY2FyZFRvb2w/LmFnZW50SWQgJiYgd2lsZGNhcmRUb29sLmFnZW50SWQgIT09IGFnZW50LmFnZW50SWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHRvb2xDYWxsUmVzdWx0ID0gXCJcIjtcbiAgICBsZXQgZXJyb3JNZXNzYWdlO1xuICAgIGxldCBpc0FyZ3VtZW50RXJyb3IgPSBmYWxzZTtcbiAgICBpZiAod2lsZGNhcmRUb29sPy5oYW5kbGVyKSB7XG4gICAgICBsZXQgcGFyc2VkQXJncztcbiAgICAgIHRyeSB7XG4gICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBwYXJzZUVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBwYXJzZUVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGlzQXJndW1lbnRFcnJvciA9IHRydWU7XG4gICAgICAgIGF3YWl0IHRoaXMuY29yZS5lbWl0RXJyb3Ioe1xuICAgICAgICAgIGVycm9yOiBwYXJzZUVycm9yLFxuICAgICAgICAgIGNvZGU6IFwidG9vbF9hcmd1bWVudF9wYXJzZV9mYWlsZWRcIiAvKiBUT09MX0FSR1VNRU5UX1BBUlNFX0ZBSUxFRCAqLyxcbiAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICBhZ2VudElkLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgIHJhd0FyZ3VtZW50czogdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzLFxuICAgICAgICAgICAgdG9vbFR5cGU6IFwid2lsZGNhcmRcIixcbiAgICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB3aWxkY2FyZEFyZ3MgPSB7XG4gICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICBhcmdzOiBwYXJzZWRBcmdzXG4gICAgICB9O1xuICAgICAgYXdhaXQgdGhpcy5jb3JlLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgICAoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlci5vblRvb2xFeGVjdXRpb25TdGFydD8uKHtcbiAgICAgICAgICBjb3BpbG90a2l0OiB0aGlzLmNvcmUsXG4gICAgICAgICAgdG9vbENhbGxJZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgYWdlbnRJZCxcbiAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICBhcmdzOiB3aWxkY2FyZEFyZ3NcbiAgICAgICAgfSksXG4gICAgICAgIFwiU3Vic2NyaWJlciBvblRvb2xFeGVjdXRpb25TdGFydCBlcnJvcjpcIlxuICAgICAgKTtcbiAgICAgIGlmICghZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2lsZGNhcmRUb29sLmhhbmRsZXIod2lsZGNhcmRBcmdzLCB0b29sQ2FsbCk7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwIHx8IHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdG9vbENhbGxSZXN1bHQgPSBcIlwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdG9vbENhbGxSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvb2xDYWxsUmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgaGFuZGxlckVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGhhbmRsZXJFcnJvci5tZXNzYWdlO1xuICAgICAgICAgIGF3YWl0IHRoaXMuY29yZS5lbWl0RXJyb3Ioe1xuICAgICAgICAgICAgZXJyb3I6IGhhbmRsZXJFcnJvcixcbiAgICAgICAgICAgIGNvZGU6IFwidG9vbF9oYW5kbGVyX2ZhaWxlZFwiIC8qIFRPT0xfSEFORExFUl9GQUlMRUQgKi8sXG4gICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgIGFnZW50SWQsXG4gICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgcGFyc2VkQXJnczogd2lsZGNhcmRBcmdzLFxuICAgICAgICAgICAgICB0b29sVHlwZTogXCJ3aWxkY2FyZFwiLFxuICAgICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2UuaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVycm9yTWVzc2FnZSkge1xuICAgICAgICB0b29sQ2FsbFJlc3VsdCA9IGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YDtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuY29yZS5ub3RpZnlTdWJzY3JpYmVycyhcbiAgICAgICAgKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIub25Ub29sRXhlY3V0aW9uRW5kPy4oe1xuICAgICAgICAgIGNvcGlsb3RraXQ6IHRoaXMuY29yZSxcbiAgICAgICAgICB0b29sQ2FsbElkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICBhZ2VudElkLFxuICAgICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgIHJlc3VsdDogZXJyb3JNZXNzYWdlID8gXCJcIiA6IHRvb2xDYWxsUmVzdWx0LFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgICAgfSksXG4gICAgICAgIFwiU3Vic2NyaWJlciBvblRvb2xFeGVjdXRpb25FbmQgZXJyb3I6XCJcbiAgICAgICk7XG4gICAgICBpZiAoaXNBcmd1bWVudEVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UgPz8gXCJUb29sIGV4ZWN1dGlvbiBmYWlsZWRcIik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZXJyb3JNZXNzYWdlIHx8ICFpc0FyZ3VtZW50RXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VJbmRleCA9IGFnZW50Lm1lc3NhZ2VzLmZpbmRJbmRleCgobSkgPT4gbS5pZCA9PT0gbWVzc2FnZS5pZCk7XG4gICAgICBjb25zdCB0b29sTWVzc2FnZSA9IHtcbiAgICAgICAgaWQ6IHJhbmRvbVVVSUQzKCksXG4gICAgICAgIHJvbGU6IFwidG9vbFwiLFxuICAgICAgICB0b29sQ2FsbElkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgY29udGVudDogdG9vbENhbGxSZXN1bHRcbiAgICAgIH07XG4gICAgICBhZ2VudC5tZXNzYWdlcy5zcGxpY2UobWVzc2FnZUluZGV4ICsgMSwgMCwgdG9vbE1lc3NhZ2UpO1xuICAgICAgaWYgKCFlcnJvck1lc3NhZ2UgJiYgd2lsZGNhcmRUb29sPy5mb2xsb3dVcCAhPT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQnVpbGQgZnJvbnRlbmQgdG9vbHMgZm9yIGFuIGFnZW50XG4gICAqL1xuICBidWlsZEZyb250ZW5kVG9vbHMoYWdlbnRJZCkge1xuICAgIHJldHVybiB0aGlzLl90b29scy5maWx0ZXIoKHRvb2wpID0+ICF0b29sLmFnZW50SWQgfHwgdG9vbC5hZ2VudElkID09PSBhZ2VudElkKS5tYXAoKHRvb2wpID0+ICh7XG4gICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbiA/PyBcIlwiLFxuICAgICAgcGFyYW1ldGVyczogY3JlYXRlVG9vbFNjaGVtYSh0b29sKVxuICAgIH0pKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIGFnZW50IGVycm9yIHN1YnNjcmliZXJcbiAgICovXG4gIGNyZWF0ZUFnZW50RXJyb3JTdWJzY3JpYmVyKGFnZW50KSB7XG4gICAgY29uc3QgZW1pdEFnZW50RXJyb3IgPSBhc3luYyAoZXJyb3IsIGNvZGUsIGV4dHJhQ29udGV4dCA9IHt9KSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0geyAuLi5leHRyYUNvbnRleHQgfTtcbiAgICAgIGlmIChhZ2VudC5hZ2VudElkKSB7XG4gICAgICAgIGNvbnRleHQuYWdlbnRJZCA9IGFnZW50LmFnZW50SWQ7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmNvcmUuZW1pdEVycm9yKHtcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvbnRleHRcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uUnVuRmFpbGVkOiBhc3luYyAoeyBlcnJvciB9KSA9PiB7XG4gICAgICAgIGF3YWl0IGVtaXRBZ2VudEVycm9yKGVycm9yLCBcImFnZW50X3J1bl9mYWlsZWRfZXZlbnRcIiAvKiBBR0VOVF9SVU5fRkFJTEVEX0VWRU5UICovLCB7XG4gICAgICAgICAgc291cmNlOiBcIm9uUnVuRmFpbGVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgb25SdW5FcnJvckV2ZW50OiBhc3luYyAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50RXJyb3IgPSBldmVudD8ucmF3RXZlbnQgaW5zdGFuY2VvZiBFcnJvciA/IGV2ZW50LnJhd0V2ZW50IDogZXZlbnQ/LnJhd0V2ZW50Py5lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXZlbnQucmF3RXZlbnQuZXJyb3IgOiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHR5cGVvZiBldmVudD8ucmF3RXZlbnQ/LmVycm9yID09PSBcInN0cmluZ1wiID8gZXZlbnQucmF3RXZlbnQuZXJyb3IgOiBldmVudD8ubWVzc2FnZSA/PyBcIkFnZW50IHJ1biBlcnJvclwiO1xuICAgICAgICBjb25zdCByYXdFcnJvciA9IGV2ZW50RXJyb3IgPz8gbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIGlmIChldmVudD8uY29kZSAmJiAhcmF3RXJyb3IuY29kZSkge1xuICAgICAgICAgIHJhd0Vycm9yLmNvZGUgPSBldmVudC5jb2RlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGVtaXRBZ2VudEVycm9yKHJhd0Vycm9yLCBcImFnZW50X3J1bl9lcnJvcl9ldmVudFwiIC8qIEFHRU5UX1JVTl9FUlJPUl9FVkVOVCAqLywge1xuICAgICAgICAgIHNvdXJjZTogXCJvblJ1bkVycm9yRXZlbnRcIixcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICBydW50aW1lRXJyb3JDb2RlOiBldmVudD8uY29kZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xudmFyIEVNUFRZX1RPT0xfU0NIRU1BID0ge1xuICB0eXBlOiBcIm9iamVjdFwiLFxuICBwcm9wZXJ0aWVzOiB7fVxufTtcbmZ1bmN0aW9uIGNyZWF0ZVRvb2xTY2hlbWEodG9vbCkge1xuICBpZiAoIXRvb2wucGFyYW1ldGVycykge1xuICAgIHJldHVybiB7IC4uLkVNUFRZX1RPT0xfU0NIRU1BIH07XG4gIH1cbiAgY29uc3QgcmF3U2NoZW1hID0gem9kVG9Kc29uU2NoZW1hKHRvb2wucGFyYW1ldGVycywge1xuICAgICRyZWZTdHJhdGVneTogXCJub25lXCJcbiAgfSk7XG4gIGlmICghcmF3U2NoZW1hIHx8IHR5cGVvZiByYXdTY2hlbWEgIT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4geyAuLi5FTVBUWV9UT09MX1NDSEVNQSB9O1xuICB9XG4gIGNvbnN0IHsgJHNjaGVtYSwgLi4uc2NoZW1hIH0gPSByYXdTY2hlbWE7XG4gIGlmICh0eXBlb2Ygc2NoZW1hLnR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICBzY2hlbWEudHlwZSA9IFwib2JqZWN0XCI7XG4gIH1cbiAgaWYgKHR5cGVvZiBzY2hlbWEucHJvcGVydGllcyAhPT0gXCJvYmplY3RcIiB8fCBzY2hlbWEucHJvcGVydGllcyA9PT0gbnVsbCkge1xuICAgIHNjaGVtYS5wcm9wZXJ0aWVzID0ge307XG4gIH1cbiAgc3RyaXBBZGRpdGlvbmFsUHJvcGVydGllcyhzY2hlbWEpO1xuICByZXR1cm4gc2NoZW1hO1xufVxuZnVuY3Rpb24gc3RyaXBBZGRpdGlvbmFsUHJvcGVydGllcyhzY2hlbWEpIHtcbiAgaWYgKCFzY2hlbWEgfHwgdHlwZW9mIHNjaGVtYSAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEpKSB7XG4gICAgc2NoZW1hLmZvckVhY2goc3RyaXBBZGRpdGlvbmFsUHJvcGVydGllcyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHJlY29yZCA9IHNjaGVtYTtcbiAgaWYgKHJlY29yZC5hZGRpdGlvbmFsUHJvcGVydGllcyAhPT0gdm9pZCAwKSB7XG4gICAgZGVsZXRlIHJlY29yZC5hZGRpdGlvbmFsUHJvcGVydGllcztcbiAgfVxuICBmb3IgKGNvbnN0IHZhbHVlIG9mIE9iamVjdC52YWx1ZXMocmVjb3JkKSkge1xuICAgIHN0cmlwQWRkaXRpb25hbFByb3BlcnRpZXModmFsdWUpO1xuICB9XG59XG5cbi8vIHNyYy9jb3JlL3N0YXRlLW1hbmFnZXIudHNcbnZhciBTdGF0ZU1hbmFnZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNvcmUpIHtcbiAgICB0aGlzLmNvcmUgPSBjb3JlO1xuICB9XG4gIC8vIFN0YXRlIHRyYWNraW5nOiBhZ2VudElkIC0+IHRocmVhZElkIC0+IHJ1bklkIC0+IHN0YXRlXG4gIHN0YXRlQnlSdW4gPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAvLyBNZXNzYWdlIHRyYWNraW5nOiBhZ2VudElkIC0+IHRocmVhZElkIC0+IG1lc3NhZ2VJZCAtPiBydW5JZFxuICBtZXNzYWdlVG9SdW4gPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAvLyBBZ2VudCBzdWJzY3JpcHRpb25zIGZvciBjbGVhbnVwXG4gIGFnZW50U3Vic2NyaXB0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHN0YXRlIHRyYWNraW5nIGZvciBhbiBhZ2VudFxuICAgKi9cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgfVxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIGFuIGFnZW50J3MgZXZlbnRzIHRvIHRyYWNrIHN0YXRlIGFuZCBtZXNzYWdlc1xuICAgKi9cbiAgc3Vic2NyaWJlVG9BZ2VudChhZ2VudCkge1xuICAgIGlmICghYWdlbnQuYWdlbnRJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudElkID0gYWdlbnQuYWdlbnRJZDtcbiAgICB0aGlzLnVuc3Vic2NyaWJlRnJvbUFnZW50KGFnZW50SWQpO1xuICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IGFnZW50LnN1YnNjcmliZSh7XG4gICAgICBvblJ1blN0YXJ0ZWRFdmVudDogKHsgZXZlbnQsIHN0YXRlIH0pID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVSdW5TdGFydGVkKGFnZW50LCBldmVudCwgc3RhdGUpO1xuICAgICAgfSxcbiAgICAgIG9uUnVuRmluaXNoZWRFdmVudDogKHsgZXZlbnQsIHN0YXRlIH0pID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVSdW5GaW5pc2hlZChhZ2VudCwgZXZlbnQsIHN0YXRlKTtcbiAgICAgIH0sXG4gICAgICBvblN0YXRlU25hcHNob3RFdmVudDogKHsgZXZlbnQsIGlucHV0LCBzdGF0ZSB9KSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlU3RhdGVTbmFwc2hvdChhZ2VudCwgZXZlbnQsIGlucHV0LCBzdGF0ZSk7XG4gICAgICB9LFxuICAgICAgb25TdGF0ZURlbHRhRXZlbnQ6ICh7IGV2ZW50LCBpbnB1dCwgc3RhdGUgfSkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZVN0YXRlRGVsdGEoYWdlbnQsIGV2ZW50LCBpbnB1dCwgc3RhdGUpO1xuICAgICAgfSxcbiAgICAgIG9uTWVzc2FnZXNTbmFwc2hvdEV2ZW50OiAoeyBldmVudCwgaW5wdXQsIG1lc3NhZ2VzIH0pID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVNZXNzYWdlc1NuYXBzaG90KGFnZW50LCBldmVudCwgaW5wdXQsIG1lc3NhZ2VzKTtcbiAgICAgIH0sXG4gICAgICBvbk5ld01lc3NhZ2U6ICh7IG1lc3NhZ2UsIGlucHV0IH0pID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVOZXdNZXNzYWdlKGFnZW50LCBtZXNzYWdlLCBpbnB1dCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5hZ2VudFN1YnNjcmlwdGlvbnMuc2V0KGFnZW50SWQsIHVuc3Vic2NyaWJlKTtcbiAgfVxuICAvKipcbiAgICogVW5zdWJzY3JpYmUgZnJvbSBhbiBhZ2VudCdzIGV2ZW50c1xuICAgKi9cbiAgdW5zdWJzY3JpYmVGcm9tQWdlbnQoYWdlbnRJZCkge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5hZ2VudFN1YnNjcmlwdGlvbnMuZ2V0KGFnZW50SWQpO1xuICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuYWdlbnRTdWJzY3JpcHRpb25zLmRlbGV0ZShhZ2VudElkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBzdGF0ZSBmb3IgYSBzcGVjaWZpYyBydW5cbiAgICogUmV0dXJucyBhIGRlZXAgY29weSB0byBwcmV2ZW50IGV4dGVybmFsIG11dGF0aW9uc1xuICAgKi9cbiAgZ2V0U3RhdGVCeVJ1bihhZ2VudElkLCB0aHJlYWRJZCwgcnVuSWQpIHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVCeVJ1bi5nZXQoYWdlbnRJZCk/LmdldCh0aHJlYWRJZCk/LmdldChydW5JZCk7XG4gICAgaWYgKCFzdGF0ZSkgcmV0dXJuIHZvaWQgMDtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgcnVuSWQgYXNzb2NpYXRlZCB3aXRoIGEgbWVzc2FnZVxuICAgKi9cbiAgZ2V0UnVuSWRGb3JNZXNzYWdlKGFnZW50SWQsIHRocmVhZElkLCBtZXNzYWdlSWQpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlVG9SdW4uZ2V0KGFnZW50SWQpPy5nZXQodGhyZWFkSWQpPy5nZXQobWVzc2FnZUlkKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCBzdGF0ZXMgZm9yIGFuIGFnZW50J3MgdGhyZWFkXG4gICAqL1xuICBnZXRTdGF0ZXNGb3JUaHJlYWQoYWdlbnRJZCwgdGhyZWFkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZUJ5UnVuLmdldChhZ2VudElkKT8uZ2V0KHRocmVhZElkKSA/PyAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIHJ1biBJRHMgZm9yIGFuIGFnZW50J3MgdGhyZWFkXG4gICAqL1xuICBnZXRSdW5JZHNGb3JUaHJlYWQoYWdlbnRJZCwgdGhyZWFkSWQpIHtcbiAgICBjb25zdCB0aHJlYWRTdGF0ZXMgPSB0aGlzLnN0YXRlQnlSdW4uZ2V0KGFnZW50SWQpPy5nZXQodGhyZWFkSWQpO1xuICAgIHJldHVybiB0aHJlYWRTdGF0ZXMgPyBBcnJheS5mcm9tKHRocmVhZFN0YXRlcy5rZXlzKCkpIDogW107XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBydW4gc3RhcnRlZCBldmVudFxuICAgKi9cbiAgaGFuZGxlUnVuU3RhcnRlZChhZ2VudCwgZXZlbnQsIHN0YXRlKSB7XG4gICAgaWYgKCFhZ2VudC5hZ2VudElkKSByZXR1cm47XG4gICAgY29uc3QgeyB0aHJlYWRJZCwgcnVuSWQgfSA9IGV2ZW50O1xuICAgIHRoaXMuc2F2ZVN0YXRlKGFnZW50LmFnZW50SWQsIHRocmVhZElkLCBydW5JZCwgc3RhdGUpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgcnVuIGZpbmlzaGVkIGV2ZW50XG4gICAqL1xuICBoYW5kbGVSdW5GaW5pc2hlZChhZ2VudCwgZXZlbnQsIHN0YXRlKSB7XG4gICAgaWYgKCFhZ2VudC5hZ2VudElkKSByZXR1cm47XG4gICAgY29uc3QgeyB0aHJlYWRJZCwgcnVuSWQgfSA9IGV2ZW50O1xuICAgIHRoaXMuc2F2ZVN0YXRlKGFnZW50LmFnZW50SWQsIHRocmVhZElkLCBydW5JZCwgc3RhdGUpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgc3RhdGUgc25hcHNob3QgZXZlbnRcbiAgICovXG4gIGhhbmRsZVN0YXRlU25hcHNob3QoYWdlbnQsIGV2ZW50LCBpbnB1dCwgc3RhdGUpIHtcbiAgICBpZiAoIWFnZW50LmFnZW50SWQpIHJldHVybjtcbiAgICBjb25zdCB7IHRocmVhZElkLCBydW5JZCB9ID0gaW5wdXQ7XG4gICAgY29uc3QgbWVyZ2VkU3RhdGUgPSB7IC4uLnN0YXRlLCAuLi5ldmVudC5zbmFwc2hvdCB9O1xuICAgIHRoaXMuc2F2ZVN0YXRlKGFnZW50LmFnZW50SWQsIHRocmVhZElkLCBydW5JZCwgbWVyZ2VkU3RhdGUpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgc3RhdGUgZGVsdGEgZXZlbnRcbiAgICovXG4gIGhhbmRsZVN0YXRlRGVsdGEoYWdlbnQsIGV2ZW50LCBpbnB1dCwgc3RhdGUpIHtcbiAgICBpZiAoIWFnZW50LmFnZW50SWQpIHJldHVybjtcbiAgICBjb25zdCB7IHRocmVhZElkLCBydW5JZCB9ID0gaW5wdXQ7XG4gICAgdGhpcy5zYXZlU3RhdGUoYWdlbnQuYWdlbnRJZCwgdGhyZWFkSWQsIHJ1bklkLCBzdGF0ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBtZXNzYWdlcyBzbmFwc2hvdCBldmVudFxuICAgKi9cbiAgaGFuZGxlTWVzc2FnZXNTbmFwc2hvdChhZ2VudCwgZXZlbnQsIGlucHV0LCBtZXNzYWdlcykge1xuICAgIGlmICghYWdlbnQuYWdlbnRJZCkgcmV0dXJuO1xuICAgIGNvbnN0IHsgdGhyZWFkSWQsIHJ1bklkIH0gPSBpbnB1dDtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgZXZlbnQubWVzc2FnZXMpIHtcbiAgICAgIHRoaXMuYXNzb2NpYXRlTWVzc2FnZVdpdGhSdW4oYWdlbnQuYWdlbnRJZCwgdGhyZWFkSWQsIG1lc3NhZ2UuaWQsIHJ1bklkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBuZXcgbWVzc2FnZSBldmVudFxuICAgKi9cbiAgaGFuZGxlTmV3TWVzc2FnZShhZ2VudCwgbWVzc2FnZSwgaW5wdXQpIHtcbiAgICBpZiAoIWFnZW50LmFnZW50SWQgfHwgIWlucHV0KSByZXR1cm47XG4gICAgY29uc3QgeyB0aHJlYWRJZCwgcnVuSWQgfSA9IGlucHV0O1xuICAgIHRoaXMuYXNzb2NpYXRlTWVzc2FnZVdpdGhSdW4oYWdlbnQuYWdlbnRJZCwgdGhyZWFkSWQsIG1lc3NhZ2UuaWQsIHJ1bklkKTtcbiAgfVxuICAvKipcbiAgICogU2F2ZSBzdGF0ZSBmb3IgYSBzcGVjaWZpYyBydW5cbiAgICovXG4gIHNhdmVTdGF0ZShhZ2VudElkLCB0aHJlYWRJZCwgcnVuSWQsIHN0YXRlKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlQnlSdW4uaGFzKGFnZW50SWQpKSB7XG4gICAgICB0aGlzLnN0YXRlQnlSdW4uc2V0KGFnZW50SWQsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudFN0YXRlcyA9IHRoaXMuc3RhdGVCeVJ1bi5nZXQoYWdlbnRJZCk7XG4gICAgaWYgKCFhZ2VudFN0YXRlcy5oYXModGhyZWFkSWQpKSB7XG4gICAgICBhZ2VudFN0YXRlcy5zZXQodGhyZWFkSWQsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIH1cbiAgICBjb25zdCB0aHJlYWRTdGF0ZXMgPSBhZ2VudFN0YXRlcy5nZXQodGhyZWFkSWQpO1xuICAgIHRocmVhZFN0YXRlcy5zZXQocnVuSWQsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUpKSk7XG4gIH1cbiAgLyoqXG4gICAqIEFzc29jaWF0ZSBhIG1lc3NhZ2Ugd2l0aCBhIHJ1blxuICAgKi9cbiAgYXNzb2NpYXRlTWVzc2FnZVdpdGhSdW4oYWdlbnRJZCwgdGhyZWFkSWQsIG1lc3NhZ2VJZCwgcnVuSWQpIHtcbiAgICBpZiAoIXRoaXMubWVzc2FnZVRvUnVuLmhhcyhhZ2VudElkKSkge1xuICAgICAgdGhpcy5tZXNzYWdlVG9SdW4uc2V0KGFnZW50SWQsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudE1lc3NhZ2VzID0gdGhpcy5tZXNzYWdlVG9SdW4uZ2V0KGFnZW50SWQpO1xuICAgIGlmICghYWdlbnRNZXNzYWdlcy5oYXModGhyZWFkSWQpKSB7XG4gICAgICBhZ2VudE1lc3NhZ2VzLnNldCh0aHJlYWRJZCwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG4gICAgfVxuICAgIGNvbnN0IHRocmVhZE1lc3NhZ2VzID0gYWdlbnRNZXNzYWdlcy5nZXQodGhyZWFkSWQpO1xuICAgIHRocmVhZE1lc3NhZ2VzLnNldChtZXNzYWdlSWQsIHJ1bklkKTtcbiAgfVxuICAvKipcbiAgICogQ2xlYXIgYWxsIHN0YXRlIGZvciBhbiBhZ2VudFxuICAgKi9cbiAgY2xlYXJBZ2VudFN0YXRlKGFnZW50SWQpIHtcbiAgICB0aGlzLnN0YXRlQnlSdW4uZGVsZXRlKGFnZW50SWQpO1xuICAgIHRoaXMubWVzc2FnZVRvUnVuLmRlbGV0ZShhZ2VudElkKTtcbiAgfVxuICAvKipcbiAgICogQ2xlYXIgYWxsIHN0YXRlIGZvciBhIHRocmVhZFxuICAgKi9cbiAgY2xlYXJUaHJlYWRTdGF0ZShhZ2VudElkLCB0aHJlYWRJZCkge1xuICAgIHRoaXMuc3RhdGVCeVJ1bi5nZXQoYWdlbnRJZCk/LmRlbGV0ZSh0aHJlYWRJZCk7XG4gICAgdGhpcy5tZXNzYWdlVG9SdW4uZ2V0KGFnZW50SWQpPy5kZWxldGUodGhyZWFkSWQpO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS9jb3JlLnRzXG52YXIgQ29waWxvdEtpdENvcmVFcnJvckNvZGUgPSAvKiBAX19QVVJFX18gKi8gKChDb3BpbG90S2l0Q29yZUVycm9yQ29kZTIpID0+IHtcbiAgQ29waWxvdEtpdENvcmVFcnJvckNvZGUyW1wiUlVOVElNRV9JTkZPX0ZFVENIX0ZBSUxFRFwiXSA9IFwicnVudGltZV9pbmZvX2ZldGNoX2ZhaWxlZFwiO1xuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZTJbXCJBR0VOVF9DT05ORUNUX0ZBSUxFRFwiXSA9IFwiYWdlbnRfY29ubmVjdF9mYWlsZWRcIjtcbiAgQ29waWxvdEtpdENvcmVFcnJvckNvZGUyW1wiQUdFTlRfUlVOX0ZBSUxFRFwiXSA9IFwiYWdlbnRfcnVuX2ZhaWxlZFwiO1xuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZTJbXCJBR0VOVF9SVU5fRkFJTEVEX0VWRU5UXCJdID0gXCJhZ2VudF9ydW5fZmFpbGVkX2V2ZW50XCI7XG4gIENvcGlsb3RLaXRDb3JlRXJyb3JDb2RlMltcIkFHRU5UX1JVTl9FUlJPUl9FVkVOVFwiXSA9IFwiYWdlbnRfcnVuX2Vycm9yX2V2ZW50XCI7XG4gIENvcGlsb3RLaXRDb3JlRXJyb3JDb2RlMltcIlRPT0xfQVJHVU1FTlRfUEFSU0VfRkFJTEVEXCJdID0gXCJ0b29sX2FyZ3VtZW50X3BhcnNlX2ZhaWxlZFwiO1xuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZTJbXCJUT09MX0hBTkRMRVJfRkFJTEVEXCJdID0gXCJ0b29sX2hhbmRsZXJfZmFpbGVkXCI7XG4gIENvcGlsb3RLaXRDb3JlRXJyb3JDb2RlMltcIlRSQU5TQ1JJUFRJT05fRkFJTEVEXCJdID0gXCJ0cmFuc2NyaXB0aW9uX2ZhaWxlZFwiO1xuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZTJbXCJUUkFOU0NSSVBUSU9OX1NFUlZJQ0VfTk9UX0NPTkZJR1VSRURcIl0gPSBcInRyYW5zY3JpcHRpb25fc2VydmljZV9ub3RfY29uZmlndXJlZFwiO1xuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZTJbXCJUUkFOU0NSSVBUSU9OX0lOVkFMSURfQVVESU9cIl0gPSBcInRyYW5zY3JpcHRpb25faW52YWxpZF9hdWRpb1wiO1xuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZTJbXCJUUkFOU0NSSVBUSU9OX1JBVEVfTElNSVRFRFwiXSA9IFwidHJhbnNjcmlwdGlvbl9yYXRlX2xpbWl0ZWRcIjtcbiAgQ29waWxvdEtpdENvcmVFcnJvckNvZGUyW1wiVFJBTlNDUklQVElPTl9BVVRIX0ZBSUxFRFwiXSA9IFwidHJhbnNjcmlwdGlvbl9hdXRoX2ZhaWxlZFwiO1xuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZTJbXCJUUkFOU0NSSVBUSU9OX05FVFdPUktfRVJST1JcIl0gPSBcInRyYW5zY3JpcHRpb25fbmV0d29ya19lcnJvclwiO1xuICByZXR1cm4gQ29waWxvdEtpdENvcmVFcnJvckNvZGUyO1xufSkoQ29waWxvdEtpdENvcmVFcnJvckNvZGUgfHwge30pO1xudmFyIENvcGlsb3RLaXRDb3JlUnVudGltZUNvbm5lY3Rpb25TdGF0dXMgPSAvKiBAX19QVVJFX18gKi8gKChDb3BpbG90S2l0Q29yZVJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzMikgPT4ge1xuICBDb3BpbG90S2l0Q29yZVJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzMltcIkRpc2Nvbm5lY3RlZFwiXSA9IFwiZGlzY29ubmVjdGVkXCI7XG4gIENvcGlsb3RLaXRDb3JlUnVudGltZUNvbm5lY3Rpb25TdGF0dXMyW1wiQ29ubmVjdGVkXCJdID0gXCJjb25uZWN0ZWRcIjtcbiAgQ29waWxvdEtpdENvcmVSdW50aW1lQ29ubmVjdGlvblN0YXR1czJbXCJDb25uZWN0aW5nXCJdID0gXCJjb25uZWN0aW5nXCI7XG4gIENvcGlsb3RLaXRDb3JlUnVudGltZUNvbm5lY3Rpb25TdGF0dXMyW1wiRXJyb3JcIl0gPSBcImVycm9yXCI7XG4gIHJldHVybiBDb3BpbG90S2l0Q29yZVJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzMjtcbn0pKENvcGlsb3RLaXRDb3JlUnVudGltZUNvbm5lY3Rpb25TdGF0dXMgfHwge30pO1xudmFyIENvcGlsb3RLaXRDb3JlID0gY2xhc3Mge1xuICBfaGVhZGVycztcbiAgX2NyZWRlbnRpYWxzO1xuICBfcHJvcGVydGllcztcbiAgc3Vic2NyaWJlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAvLyBEZWxlZ2F0ZSBjbGFzc2VzXG4gIGFnZW50UmVnaXN0cnk7XG4gIGNvbnRleHRTdG9yZTtcbiAgc3VnZ2VzdGlvbkVuZ2luZTtcbiAgcnVuSGFuZGxlcjtcbiAgc3RhdGVNYW5hZ2VyO1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgcnVudGltZVVybCxcbiAgICBydW50aW1lVHJhbnNwb3J0ID0gXCJyZXN0XCIsXG4gICAgaGVhZGVycyA9IHt9LFxuICAgIGNyZWRlbnRpYWxzLFxuICAgIHByb3BlcnRpZXMgPSB7fSxcbiAgICBhZ2VudHNfX3Vuc2FmZV9kZXZfb25seSA9IHt9LFxuICAgIHRvb2xzID0gW10sXG4gICAgc3VnZ2VzdGlvbnNDb25maWcgPSBbXVxuICB9KSB7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gICAgdGhpcy5fY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscztcbiAgICB0aGlzLl9wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICB0aGlzLmFnZW50UmVnaXN0cnkgPSBuZXcgQWdlbnRSZWdpc3RyeSh0aGlzKTtcbiAgICB0aGlzLmNvbnRleHRTdG9yZSA9IG5ldyBDb250ZXh0U3RvcmUodGhpcyk7XG4gICAgdGhpcy5zdWdnZXN0aW9uRW5naW5lID0gbmV3IFN1Z2dlc3Rpb25FbmdpbmUodGhpcyk7XG4gICAgdGhpcy5ydW5IYW5kbGVyID0gbmV3IFJ1bkhhbmRsZXIodGhpcyk7XG4gICAgdGhpcy5zdGF0ZU1hbmFnZXIgPSBuZXcgU3RhdGVNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuYWdlbnRSZWdpc3RyeS5pbml0aWFsaXplKGFnZW50c19fdW5zYWZlX2Rldl9vbmx5KTtcbiAgICB0aGlzLnJ1bkhhbmRsZXIuaW5pdGlhbGl6ZSh0b29scyk7XG4gICAgdGhpcy5zdWdnZXN0aW9uRW5naW5lLmluaXRpYWxpemUoc3VnZ2VzdGlvbnNDb25maWcpO1xuICAgIHRoaXMuc3RhdGVNYW5hZ2VyLmluaXRpYWxpemUoKTtcbiAgICB0aGlzLmFnZW50UmVnaXN0cnkuc2V0UnVudGltZVRyYW5zcG9ydChydW50aW1lVHJhbnNwb3J0KTtcbiAgICB0aGlzLmFnZW50UmVnaXN0cnkuc2V0UnVudGltZVVybChydW50aW1lVXJsKTtcbiAgICB0aGlzLnN1YnNjcmliZSh7XG4gICAgICBvbkFnZW50c0NoYW5nZWQ6ICh7IGFnZW50cyB9KSA9PiB7XG4gICAgICAgIE9iamVjdC52YWx1ZXMoYWdlbnRzKS5mb3JFYWNoKChhZ2VudCkgPT4ge1xuICAgICAgICAgIGlmIChhZ2VudC5hZ2VudElkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci5zdWJzY3JpYmVUb0FnZW50KGFnZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBJbnRlcm5hbCBtZXRob2QgdXNlZCBieSBkZWxlZ2F0ZSBjbGFzc2VzIGFuZCBzdWJjbGFzc2VzIHRvIG5vdGlmeSBzdWJzY3JpYmVyc1xuICAgKi9cbiAgYXN5bmMgbm90aWZ5U3Vic2NyaWJlcnMoaGFuZGxlciwgZXJyb3JNZXNzYWdlKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBBcnJheS5mcm9tKHRoaXMuc3Vic2NyaWJlcnMpLm1hcChhc3luYyAoc3Vic2NyaWJlcikgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGhhbmRsZXIoc3Vic2NyaWJlcik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1lc3NhZ2UsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBJbnRlcm5hbCBtZXRob2QgdXNlZCBieSBkZWxlZ2F0ZSBjbGFzc2VzIHRvIGVtaXQgZXJyb3JzXG4gICAqL1xuICBhc3luYyBlbWl0RXJyb3Ioe1xuICAgIGVycm9yLFxuICAgIGNvZGUsXG4gICAgY29udGV4dCA9IHt9XG4gIH0pIHtcbiAgICBhd2FpdCB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIub25FcnJvcj8uKHtcbiAgICAgICAgY29waWxvdGtpdDogdGhpcyxcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvbnRleHRcbiAgICAgIH0pLFxuICAgICAgXCJTdWJzY3JpYmVyIG9uRXJyb3IgZXJyb3I6XCJcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBTbmFwc2hvdCBhY2Nlc3NvcnNcbiAgICovXG4gIGdldCBjb250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRTdG9yZS5jb250ZXh0O1xuICB9XG4gIGdldCBhZ2VudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWdlbnRSZWdpc3RyeS5hZ2VudHM7XG4gIH1cbiAgZ2V0IHRvb2xzKCkge1xuICAgIHJldHVybiB0aGlzLnJ1bkhhbmRsZXIudG9vbHM7XG4gIH1cbiAgZ2V0IHJ1bnRpbWVVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWdlbnRSZWdpc3RyeS5ydW50aW1lVXJsO1xuICB9XG4gIHNldFJ1bnRpbWVVcmwocnVudGltZVVybCkge1xuICAgIHRoaXMuYWdlbnRSZWdpc3RyeS5zZXRSdW50aW1lVXJsKHJ1bnRpbWVVcmwpO1xuICB9XG4gIGdldCBydW50aW1lVHJhbnNwb3J0KCkge1xuICAgIHJldHVybiB0aGlzLmFnZW50UmVnaXN0cnkucnVudGltZVRyYW5zcG9ydDtcbiAgfVxuICBzZXRSdW50aW1lVHJhbnNwb3J0KHJ1bnRpbWVUcmFuc3BvcnQpIHtcbiAgICB0aGlzLmFnZW50UmVnaXN0cnkuc2V0UnVudGltZVRyYW5zcG9ydChydW50aW1lVHJhbnNwb3J0KTtcbiAgfVxuICBnZXQgcnVudGltZVZlcnNpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYWdlbnRSZWdpc3RyeS5ydW50aW1lVmVyc2lvbjtcbiAgfVxuICBnZXQgaGVhZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5faGVhZGVycztcbiAgfVxuICBnZXQgY3JlZGVudGlhbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWRlbnRpYWxzO1xuICB9XG4gIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzO1xuICB9XG4gIGdldCBydW50aW1lQ29ubmVjdGlvblN0YXR1cygpIHtcbiAgICByZXR1cm4gdGhpcy5hZ2VudFJlZ2lzdHJ5LnJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzO1xuICB9XG4gIGdldCBhdWRpb0ZpbGVUcmFuc2NyaXB0aW9uRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5hZ2VudFJlZ2lzdHJ5LmF1ZGlvRmlsZVRyYW5zY3JpcHRpb25FbmFibGVkO1xuICB9XG4gIC8qKlxuICAgKiBDb25maWd1cmF0aW9uIHVwZGF0ZXNcbiAgICovXG4gIHNldEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICAgIHRoaXMuYWdlbnRSZWdpc3RyeS5hcHBseUhlYWRlcnNUb0FnZW50cyh0aGlzLmFnZW50UmVnaXN0cnkuYWdlbnRzKTtcbiAgICB2b2lkIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoXG4gICAgICAoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlci5vbkhlYWRlcnNDaGFuZ2VkPy4oe1xuICAgICAgICBjb3BpbG90a2l0OiB0aGlzLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcbiAgICAgIH0pLFxuICAgICAgXCJTdWJzY3JpYmVyIG9uSGVhZGVyc0NoYW5nZWQgZXJyb3I6XCJcbiAgICApO1xuICB9XG4gIHNldENyZWRlbnRpYWxzKGNyZWRlbnRpYWxzKSB7XG4gICAgdGhpcy5fY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscztcbiAgICB0aGlzLmFnZW50UmVnaXN0cnkuYXBwbHlDcmVkZW50aWFsc1RvQWdlbnRzKHRoaXMuYWdlbnRSZWdpc3RyeS5hZ2VudHMpO1xuICB9XG4gIHNldFByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgIHZvaWQgdGhpcy5ub3RpZnlTdWJzY3JpYmVycyhcbiAgICAgIChzdWJzY3JpYmVyKSA9PiBzdWJzY3JpYmVyLm9uUHJvcGVydGllc0NoYW5nZWQ/Lih7XG4gICAgICAgIGNvcGlsb3RraXQ6IHRoaXMsXG4gICAgICAgIHByb3BlcnRpZXM6IHRoaXMucHJvcGVydGllc1xuICAgICAgfSksXG4gICAgICBcIlN1YnNjcmliZXIgb25Qcm9wZXJ0aWVzQ2hhbmdlZCBlcnJvcjpcIlxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEFnZW50IG1hbmFnZW1lbnQgKGRlbGVnYXRlZCB0byBBZ2VudFJlZ2lzdHJ5KVxuICAgKi9cbiAgc2V0QWdlbnRzX191bnNhZmVfZGV2X29ubHkoYWdlbnRzKSB7XG4gICAgdGhpcy5hZ2VudFJlZ2lzdHJ5LnNldEFnZW50c19fdW5zYWZlX2Rldl9vbmx5KGFnZW50cyk7XG4gIH1cbiAgYWRkQWdlbnRfX3Vuc2FmZV9kZXZfb25seShwYXJhbXMpIHtcbiAgICB0aGlzLmFnZW50UmVnaXN0cnkuYWRkQWdlbnRfX3Vuc2FmZV9kZXZfb25seShwYXJhbXMpO1xuICB9XG4gIHJlbW92ZUFnZW50X191bnNhZmVfZGV2X29ubHkoaWQpIHtcbiAgICB0aGlzLmFnZW50UmVnaXN0cnkucmVtb3ZlQWdlbnRfX3Vuc2FmZV9kZXZfb25seShpZCk7XG4gIH1cbiAgZ2V0QWdlbnQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5hZ2VudFJlZ2lzdHJ5LmdldEFnZW50KGlkKTtcbiAgfVxuICAvKipcbiAgICogQ29udGV4dCBtYW5hZ2VtZW50IChkZWxlZ2F0ZWQgdG8gQ29udGV4dFN0b3JlKVxuICAgKi9cbiAgYWRkQ29udGV4dChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dFN0b3JlLmFkZENvbnRleHQoY29udGV4dCk7XG4gIH1cbiAgcmVtb3ZlQ29udGV4dChpZCkge1xuICAgIHRoaXMuY29udGV4dFN0b3JlLnJlbW92ZUNvbnRleHQoaWQpO1xuICB9XG4gIC8qKlxuICAgKiBTdWdnZXN0aW9ucyBtYW5hZ2VtZW50IChkZWxlZ2F0ZWQgdG8gU3VnZ2VzdGlvbkVuZ2luZSlcbiAgICovXG4gIGFkZFN1Z2dlc3Rpb25zQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnN1Z2dlc3Rpb25FbmdpbmUuYWRkU3VnZ2VzdGlvbnNDb25maWcoY29uZmlnKTtcbiAgfVxuICByZW1vdmVTdWdnZXN0aW9uc0NvbmZpZyhpZCkge1xuICAgIHRoaXMuc3VnZ2VzdGlvbkVuZ2luZS5yZW1vdmVTdWdnZXN0aW9uc0NvbmZpZyhpZCk7XG4gIH1cbiAgcmVsb2FkU3VnZ2VzdGlvbnMoYWdlbnRJZCkge1xuICAgIHRoaXMuc3VnZ2VzdGlvbkVuZ2luZS5yZWxvYWRTdWdnZXN0aW9ucyhhZ2VudElkKTtcbiAgfVxuICBjbGVhclN1Z2dlc3Rpb25zKGFnZW50SWQpIHtcbiAgICB0aGlzLnN1Z2dlc3Rpb25FbmdpbmUuY2xlYXJTdWdnZXN0aW9ucyhhZ2VudElkKTtcbiAgfVxuICBnZXRTdWdnZXN0aW9ucyhhZ2VudElkKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGlvbkVuZ2luZS5nZXRTdWdnZXN0aW9ucyhhZ2VudElkKTtcbiAgfVxuICAvKipcbiAgICogVG9vbCBtYW5hZ2VtZW50IChkZWxlZ2F0ZWQgdG8gUnVuSGFuZGxlcilcbiAgICovXG4gIGFkZFRvb2wodG9vbCkge1xuICAgIHRoaXMucnVuSGFuZGxlci5hZGRUb29sKHRvb2wpO1xuICB9XG4gIHJlbW92ZVRvb2woaWQsIGFnZW50SWQpIHtcbiAgICB0aGlzLnJ1bkhhbmRsZXIucmVtb3ZlVG9vbChpZCwgYWdlbnRJZCk7XG4gIH1cbiAgZ2V0VG9vbChwYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5ydW5IYW5kbGVyLmdldFRvb2wocGFyYW1zKTtcbiAgfVxuICBzZXRUb29scyh0b29scykge1xuICAgIHRoaXMucnVuSGFuZGxlci5zZXRUb29scyh0b29scyk7XG4gIH1cbiAgLyoqXG4gICAqIFN1YnNjcmlwdGlvbiBsaWZlY3ljbGVcbiAgICovXG4gIHN1YnNjcmliZShzdWJzY3JpYmVyKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5hZGQoc3Vic2NyaWJlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmliZXIpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEFnZW50IGNvbm5lY3Rpdml0eSAoZGVsZWdhdGVkIHRvIFJ1bkhhbmRsZXIpXG4gICAqL1xuICBhc3luYyBjb25uZWN0QWdlbnQocGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMucnVuSGFuZGxlci5jb25uZWN0QWdlbnQocGFyYW1zKTtcbiAgfVxuICBzdG9wQWdlbnQocGFyYW1zKSB7XG4gICAgcGFyYW1zLmFnZW50LmFib3J0UnVuKCk7XG4gIH1cbiAgYXN5bmMgcnVuQWdlbnQocGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMucnVuSGFuZGxlci5ydW5BZ2VudChwYXJhbXMpO1xuICB9XG4gIC8qKlxuICAgKiBTdGF0ZSBtYW5hZ2VtZW50IChkZWxlZ2F0ZWQgdG8gU3RhdGVNYW5hZ2VyKVxuICAgKi9cbiAgZ2V0U3RhdGVCeVJ1bihhZ2VudElkLCB0aHJlYWRJZCwgcnVuSWQpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGVCeVJ1bihhZ2VudElkLCB0aHJlYWRJZCwgcnVuSWQpO1xuICB9XG4gIGdldFJ1bklkRm9yTWVzc2FnZShhZ2VudElkLCB0aHJlYWRJZCwgbWVzc2FnZUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVNYW5hZ2VyLmdldFJ1bklkRm9yTWVzc2FnZShhZ2VudElkLCB0aHJlYWRJZCwgbWVzc2FnZUlkKTtcbiAgfVxuICBnZXRSdW5JZHNGb3JUaHJlYWQoYWdlbnRJZCwgdGhyZWFkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0UnVuSWRzRm9yVGhyZWFkKGFnZW50SWQsIHRocmVhZElkKTtcbiAgfVxuICAvKipcbiAgICogSW50ZXJuYWwgbWV0aG9kIHVzZWQgYnkgUnVuSGFuZGxlciB0byBidWlsZCBmcm9udGVuZCB0b29sc1xuICAgKi9cbiAgYnVpbGRGcm9udGVuZFRvb2xzKGFnZW50SWQpIHtcbiAgICByZXR1cm4gdGhpcy5ydW5IYW5kbGVyLmJ1aWxkRnJvbnRlbmRUb29scyhhZ2VudElkKTtcbiAgfVxufTtcblxuLy8gc3JjL3R5cGVzLnRzXG52YXIgVG9vbENhbGxTdGF0dXMgPSAvKiBAX19QVVJFX18gKi8gKChUb29sQ2FsbFN0YXR1czIpID0+IHtcbiAgVG9vbENhbGxTdGF0dXMyW1wiSW5Qcm9ncmVzc1wiXSA9IFwiaW5Qcm9ncmVzc1wiO1xuICBUb29sQ2FsbFN0YXR1czJbXCJFeGVjdXRpbmdcIl0gPSBcImV4ZWN1dGluZ1wiO1xuICBUb29sQ2FsbFN0YXR1czJbXCJDb21wbGV0ZVwiXSA9IFwiY29tcGxldGVcIjtcbiAgcmV0dXJuIFRvb2xDYWxsU3RhdHVzMjtcbn0pKFRvb2xDYWxsU3RhdHVzIHx8IHt9KTtcblxuLy8gc3JjL3V0aWxzL21hcmtkb3duLnRzXG5mdW5jdGlvbiBjb21wbGV0ZVBhcnRpYWxNYXJrZG93bihpbnB1dCkge1xuICBsZXQgcyA9IGlucHV0O1xuICBjb25zdCBmZW5jZU1hdGNoZXMgPSBBcnJheS5mcm9tKHMubWF0Y2hBbGwoL14oXFxzKikoYHszLH18fnszLH0pL2dtKSk7XG4gIGlmIChmZW5jZU1hdGNoZXMubGVuZ3RoICUgMiA9PT0gMSkge1xuICAgIGNvbnN0IFssIGluZGVudCwgZmVuY2VdID0gZmVuY2VNYXRjaGVzWzBdO1xuICAgIHMgKz0gYFxuJHtpbmRlbnR9JHtmZW5jZX1gO1xuICB9XG4gIGNvbnN0IGluY29tcGxldGVMaW5rTWF0Y2ggPSBzLm1hdGNoKC9cXFsoW15cXF1dKilcXF1cXCgoW14pXSopJC8pO1xuICBpZiAoaW5jb21wbGV0ZUxpbmtNYXRjaCkge1xuICAgIHMgKz0gXCIpXCI7XG4gIH1cbiAgY29uc3Qgb3BlbkVsZW1lbnRzID0gW107XG4gIGNvbnN0IGNoYXJzID0gQXJyYXkuZnJvbShzKTtcbiAgY29uc3QgY29kZUJsb2NrUmFuZ2VzID0gW107XG4gIGNvbnN0IGlubGluZUNvZGVSYW5nZXMgPSBbXTtcbiAgbGV0IHRlbXBDb2RlRmVuY2VDb3VudCA9IDA7XG4gIGxldCBjdXJyZW50Q29kZUJsb2NrU3RhcnQgPSAtMTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpID09PSAwIHx8IGNoYXJzW2kgLSAxXSA9PT0gXCJcXG5cIikge1xuICAgICAgY29uc3QgbGluZU1hdGNoID0gcy5zdWJzdHJpbmcoaSkubWF0Y2goL14oXFxzKikoYHszLH18fnszLH0pLyk7XG4gICAgICBpZiAobGluZU1hdGNoKSB7XG4gICAgICAgIHRlbXBDb2RlRmVuY2VDb3VudCsrO1xuICAgICAgICBpZiAodGVtcENvZGVGZW5jZUNvdW50ICUgMiA9PT0gMSkge1xuICAgICAgICAgIGN1cnJlbnRDb2RlQmxvY2tTdGFydCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudENvZGVCbG9ja1N0YXJ0ICE9PSAtMSkge1xuICAgICAgICAgIGNvZGVCbG9ja1Jhbmdlcy5wdXNoKHtcbiAgICAgICAgICAgIHN0YXJ0OiBjdXJyZW50Q29kZUJsb2NrU3RhcnQsXG4gICAgICAgICAgICBlbmQ6IGkgKyBsaW5lTWF0Y2hbMF0ubGVuZ3RoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY3VycmVudENvZGVCbG9ja1N0YXJ0ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaSArPSBsaW5lTWF0Y2hbMF0ubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChjaGFyc1tpXSA9PT0gXCJgXCIpIHtcbiAgICAgIGxldCBiYWNrc2xhc2hDb3VudCA9IDA7XG4gICAgICBmb3IgKGxldCBqID0gaSAtIDE7IGogPj0gMCAmJiBjaGFyc1tqXSA9PT0gXCJcXFxcXCI7IGotLSkge1xuICAgICAgICBiYWNrc2xhc2hDb3VudCsrO1xuICAgICAgfVxuICAgICAgaWYgKGJhY2tzbGFzaENvdW50ICUgMiA9PT0gMCkge1xuICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBjaGFycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGlmIChjaGFyc1tqXSA9PT0gXCJgXCIpIHtcbiAgICAgICAgICAgIGxldCBjbG9zaW5nQmFja3NsYXNoQ291bnQgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IGogLSAxOyBrID49IDAgJiYgY2hhcnNba10gPT09IFwiXFxcXFwiOyBrLS0pIHtcbiAgICAgICAgICAgICAgY2xvc2luZ0JhY2tzbGFzaENvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xvc2luZ0JhY2tzbGFzaENvdW50ICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICBpbmxpbmVDb2RlUmFuZ2VzLnB1c2goeyBzdGFydDogaSwgZW5kOiBqICsgMSB9KTtcbiAgICAgICAgICAgICAgaSA9IGo7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBpc0luQ29kZSA9IChwb3MpID0+IHtcbiAgICByZXR1cm4gY29kZUJsb2NrUmFuZ2VzLnNvbWUoKHJhbmdlKSA9PiBwb3MgPj0gcmFuZ2Uuc3RhcnQgJiYgcG9zIDwgcmFuZ2UuZW5kKSB8fCBpbmxpbmVDb2RlUmFuZ2VzLnNvbWUoKHJhbmdlKSA9PiBwb3MgPj0gcmFuZ2Uuc3RhcnQgJiYgcG9zIDwgcmFuZ2UuZW5kKTtcbiAgfTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoYXIgPSBjaGFyc1tpXTtcbiAgICBjb25zdCBuZXh0Q2hhciA9IGNoYXJzW2kgKyAxXTtcbiAgICBjb25zdCBwcmV2Q2hhciA9IGNoYXJzW2kgLSAxXTtcbiAgICBpZiAoaXNJbkNvZGUoaSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY2hhciA9PT0gXCJbXCIpIHtcbiAgICAgIGxldCBpc0NvbXBsZXRlTGluayA9IGZhbHNlO1xuICAgICAgbGV0IGJyYWNrZXREZXB0aCA9IDE7XG4gICAgICBsZXQgaiA9IGkgKyAxO1xuICAgICAgd2hpbGUgKGogPCBjaGFycy5sZW5ndGggJiYgYnJhY2tldERlcHRoID4gMCkge1xuICAgICAgICBpZiAoY2hhcnNbal0gPT09IFwiW1wiICYmICFpc0luQ29kZShqKSkgYnJhY2tldERlcHRoKys7XG4gICAgICAgIGlmIChjaGFyc1tqXSA9PT0gXCJdXCIgJiYgIWlzSW5Db2RlKGopKSBicmFja2V0RGVwdGgtLTtcbiAgICAgICAgaisrO1xuICAgICAgfVxuICAgICAgaWYgKGJyYWNrZXREZXB0aCA9PT0gMCAmJiBjaGFyc1tqXSA9PT0gXCIoXCIpIHtcbiAgICAgICAgbGV0IHBhcmVuRGVwdGggPSAxO1xuICAgICAgICBqKys7XG4gICAgICAgIHdoaWxlIChqIDwgY2hhcnMubGVuZ3RoICYmIHBhcmVuRGVwdGggPiAwKSB7XG4gICAgICAgICAgaWYgKGNoYXJzW2pdID09PSBcIihcIiAmJiAhaXNJbkNvZGUoaikpIHBhcmVuRGVwdGgrKztcbiAgICAgICAgICBpZiAoY2hhcnNbal0gPT09IFwiKVwiICYmICFpc0luQ29kZShqKSkgcGFyZW5EZXB0aC0tO1xuICAgICAgICAgIGorKztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW5EZXB0aCA9PT0gMCkge1xuICAgICAgICAgIGlzQ29tcGxldGVMaW5rID0gdHJ1ZTtcbiAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaXNDb21wbGV0ZUxpbmspIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IG9wZW5FbGVtZW50cy5maW5kSW5kZXgoXG4gICAgICAgICAgKGVsKSA9PiBlbC50eXBlID09PSBcImJyYWNrZXRcIlxuICAgICAgICApO1xuICAgICAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBvcGVuRWxlbWVudHMuc3BsaWNlKGV4aXN0aW5nSW5kZXgsIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wZW5FbGVtZW50cy5wdXNoKHsgdHlwZTogXCJicmFja2V0XCIsIG1hcmtlcjogXCJbXCIsIHBvc2l0aW9uOiBpIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGFyID09PSBcIipcIiAmJiBuZXh0Q2hhciA9PT0gXCIqXCIpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBvcGVuRWxlbWVudHMuZmluZEluZGV4KFxuICAgICAgICAoZWwpID0+IGVsLnR5cGUgPT09IFwiYm9sZF9zdGFyXCJcbiAgICAgICk7XG4gICAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgb3BlbkVsZW1lbnRzLnNwbGljZShleGlzdGluZ0luZGV4LCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wZW5FbGVtZW50cy5wdXNoKHsgdHlwZTogXCJib2xkX3N0YXJcIiwgbWFya2VyOiBcIioqXCIsIHBvc2l0aW9uOiBpIH0pO1xuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gXCJfXCIgJiYgbmV4dENoYXIgPT09IFwiX1wiKSB7XG4gICAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gb3BlbkVsZW1lbnRzLmZpbmRJbmRleChcbiAgICAgICAgKGVsKSA9PiBlbC50eXBlID09PSBcImJvbGRfdW5kZXJzY29yZVwiXG4gICAgICApO1xuICAgICAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XG4gICAgICAgIG9wZW5FbGVtZW50cy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcGVuRWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJib2xkX3VuZGVyc2NvcmVcIixcbiAgICAgICAgICBtYXJrZXI6IFwiX19cIixcbiAgICAgICAgICBwb3NpdGlvbjogaVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9IGVsc2UgaWYgKGNoYXIgPT09IFwiflwiICYmIG5leHRDaGFyID09PSBcIn5cIikge1xuICAgICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IG9wZW5FbGVtZW50cy5maW5kSW5kZXgoXG4gICAgICAgIChlbCkgPT4gZWwudHlwZSA9PT0gXCJzdHJpa2VcIlxuICAgICAgKTtcbiAgICAgIGlmIChleGlzdGluZ0luZGV4ICE9PSAtMSkge1xuICAgICAgICBvcGVuRWxlbWVudHMuc3BsaWNlKGV4aXN0aW5nSW5kZXgsIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BlbkVsZW1lbnRzLnB1c2goeyB0eXBlOiBcInN0cmlrZVwiLCBtYXJrZXI6IFwifn5cIiwgcG9zaXRpb246IGkgfSk7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfSBlbHNlIGlmIChjaGFyID09PSBcIipcIiAmJiBwcmV2Q2hhciAhPT0gXCIqXCIgJiYgbmV4dENoYXIgIT09IFwiKlwiKSB7XG4gICAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gb3BlbkVsZW1lbnRzLmZpbmRJbmRleChcbiAgICAgICAgKGVsKSA9PiBlbC50eXBlID09PSBcIml0YWxpY19zdGFyXCJcbiAgICAgICk7XG4gICAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgb3BlbkVsZW1lbnRzLnNwbGljZShleGlzdGluZ0luZGV4LCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wZW5FbGVtZW50cy5wdXNoKHsgdHlwZTogXCJpdGFsaWNfc3RhclwiLCBtYXJrZXI6IFwiKlwiLCBwb3NpdGlvbjogaSB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoYXIgPT09IFwiX1wiICYmIHByZXZDaGFyICE9PSBcIl9cIiAmJiBuZXh0Q2hhciAhPT0gXCJfXCIpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBvcGVuRWxlbWVudHMuZmluZEluZGV4KFxuICAgICAgICAoZWwpID0+IGVsLnR5cGUgPT09IFwiaXRhbGljX3VuZGVyc2NvcmVcIlxuICAgICAgKTtcbiAgICAgIGlmIChleGlzdGluZ0luZGV4ICE9PSAtMSkge1xuICAgICAgICBvcGVuRWxlbWVudHMuc3BsaWNlKGV4aXN0aW5nSW5kZXgsIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BlbkVsZW1lbnRzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwiaXRhbGljX3VuZGVyc2NvcmVcIixcbiAgICAgICAgICBtYXJrZXI6IFwiX1wiLFxuICAgICAgICAgIHBvc2l0aW9uOiBpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBsZXQgYmFja3RpY2tDb3VudCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY2hhcnNbaV0gPT09IFwiYFwiICYmICFpc0luQ29kZShpKSkge1xuICAgICAgYmFja3RpY2tDb3VudCsrO1xuICAgIH1cbiAgfVxuICBpZiAoYmFja3RpY2tDb3VudCAlIDIgPT09IDEpIHtcbiAgICBzICs9IFwiYFwiO1xuICB9XG4gIG9wZW5FbGVtZW50cy5zb3J0KChhLCBiKSA9PiBiLnBvc2l0aW9uIC0gYS5wb3NpdGlvbik7XG4gIGNvbnN0IGNsb3NlcnMgPSBvcGVuRWxlbWVudHMubWFwKChlbCkgPT4ge1xuICAgIHN3aXRjaCAoZWwudHlwZSkge1xuICAgICAgY2FzZSBcImJyYWNrZXRcIjpcbiAgICAgICAgcmV0dXJuIFwiXVwiO1xuICAgICAgY2FzZSBcImJvbGRfc3RhclwiOlxuICAgICAgICByZXR1cm4gXCIqKlwiO1xuICAgICAgY2FzZSBcImJvbGRfdW5kZXJzY29yZVwiOlxuICAgICAgICByZXR1cm4gXCJfX1wiO1xuICAgICAgY2FzZSBcInN0cmlrZVwiOlxuICAgICAgICByZXR1cm4gXCJ+flwiO1xuICAgICAgY2FzZSBcIml0YWxpY19zdGFyXCI6XG4gICAgICAgIHJldHVybiBcIipcIjtcbiAgICAgIGNhc2UgXCJpdGFsaWNfdW5kZXJzY29yZVwiOlxuICAgICAgICByZXR1cm4gXCJfXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH0pO1xuICBsZXQgcmVzdWx0ID0gcyArIGNsb3NlcnMuam9pbihcIlwiKTtcbiAgY29uc3QgZmluYWxGZW5jZU1hdGNoZXMgPSBBcnJheS5mcm9tKFxuICAgIHJlc3VsdC5tYXRjaEFsbCgvXihcXHMqKShgezMsfXx+ezMsfSkvZ20pXG4gICk7XG4gIGNvbnN0IGhhc1VuY2xvc2VkQmFja3RpY2sgPSAocmVzdWx0Lm1hdGNoKC9gL2cpIHx8IFtdKS5sZW5ndGggJSAyID09PSAxO1xuICBjb25zdCBoYXNVbmNsb3NlZENvZGVGZW5jZSA9IGZpbmFsRmVuY2VNYXRjaGVzLmxlbmd0aCAlIDIgPT09IDE7XG4gIGxldCBzaG91bGRDbG9zZVBhcmVucyA9ICFoYXNVbmNsb3NlZEJhY2t0aWNrICYmICFoYXNVbmNsb3NlZENvZGVGZW5jZTtcbiAgaWYgKHNob3VsZENsb3NlUGFyZW5zKSB7XG4gICAgY29uc3QgbGFzdE9wZW5QYXJlbiA9IHJlc3VsdC5sYXN0SW5kZXhPZihcIihcIik7XG4gICAgaWYgKGxhc3RPcGVuUGFyZW4gIT09IC0xKSB7XG4gICAgICBjb25zdCBiZWZvcmVQYXJlbiA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgbGFzdE9wZW5QYXJlbik7XG4gICAgICBjb25zdCBiYWNrdGlja3NCZWZvcmVQYXJlbiA9IChiZWZvcmVQYXJlbi5tYXRjaCgvYC9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgaWYgKGJhY2t0aWNrc0JlZm9yZVBhcmVuICUgMiA9PT0gMSkge1xuICAgICAgICBzaG91bGRDbG9zZVBhcmVucyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoc2hvdWxkQ2xvc2VQYXJlbnMpIHtcbiAgICBjb25zdCBvcGVuUGFyZW5zID0gKHJlc3VsdC5tYXRjaCgvXFwoL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgY29uc3QgY2xvc2VQYXJlbnMgPSAocmVzdWx0Lm1hdGNoKC9cXCkvZykgfHwgW10pLmxlbmd0aDtcbiAgICBpZiAob3BlblBhcmVucyA+IGNsb3NlUGFyZW5zKSB7XG4gICAgICByZXN1bHQgKz0gXCIpXCIucmVwZWF0KG9wZW5QYXJlbnMgLSBjbG9zZVBhcmVucyk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQge1xuICBBZ2VudFJlZ2lzdHJ5LFxuICBDb250ZXh0U3RvcmUsXG4gIENvcGlsb3RLaXRDb3JlLFxuICBDb3BpbG90S2l0Q29yZUVycm9yQ29kZSxcbiAgQ29waWxvdEtpdENvcmVSdW50aW1lQ29ubmVjdGlvblN0YXR1cyxcbiAgUHJveGllZENvcGlsb3RSdW50aW1lQWdlbnQsXG4gIFJ1bkhhbmRsZXIsXG4gIFN0YXRlTWFuYWdlcixcbiAgU3VnZ2VzdGlvbkVuZ2luZSxcbiAgVG9vbENhbGxTdGF0dXMsXG4gIGNvbXBsZXRlUGFydGlhbE1hcmtkb3duXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/core/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/client/dist/index.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@copilotkitnext/core/node_modules/@ag-ui/client/dist/index.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIConnectNotImplementedError: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIConnectNotImplementedError),\n/* harmony export */   AGUIError: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError),\n/* harmony export */   AbstractAgent: () => (/* binding */ W),\n/* harmony export */   ActivityDeltaEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ActivityDeltaEventSchema),\n/* harmony export */   ActivityMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ActivityMessageSchema),\n/* harmony export */   ActivitySnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ActivitySnapshotEventSchema),\n/* harmony export */   AssistantMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AssistantMessageSchema),\n/* harmony export */   BackwardCompatibility_0_0_39: () => (/* binding */ J),\n/* harmony export */   BaseEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.BaseEventSchema),\n/* harmony export */   BaseMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.BaseMessageSchema),\n/* harmony export */   BinaryInputContentSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.BinaryInputContentSchema),\n/* harmony export */   ContextSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ContextSchema),\n/* harmony export */   CustomEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas),\n/* harmony export */   EventType: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType),\n/* harmony export */   FilterToolCallsMiddleware: () => (/* binding */ Q),\n/* harmony export */   FunctionCallSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.FunctionCallSchema),\n/* harmony export */   FunctionMiddleware: () => (/* binding */ K),\n/* harmony export */   HttpAgent: () => (/* binding */ ot),\n/* harmony export */   InputContentSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.InputContentSchema),\n/* harmony export */   MessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.MessagesSnapshotEventSchema),\n/* harmony export */   Middleware: () => (/* binding */ k),\n/* harmony export */   RawEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunErrorEventSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunFinishedEventSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunStartedEventSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepFinishedEventSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepStartedEventSchema),\n/* harmony export */   SystemMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.SystemMessageSchema),\n/* harmony export */   TextInputContentSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextInputContentSchema),\n/* harmony export */   TextMessageChunkEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageChunkEventSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageStartEventSchema),\n/* harmony export */   ThinkingEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingEndEventSchema),\n/* harmony export */   ThinkingStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingStartEventSchema),\n/* harmony export */   ThinkingTextMessageContentEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageContentEventSchema),\n/* harmony export */   ThinkingTextMessageEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageEndEventSchema),\n/* harmony export */   ThinkingTextMessageStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallArgsEventSchema),\n/* harmony export */   ToolCallChunkEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallChunkEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallEndEventSchema),\n/* harmony export */   ToolCallResultEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallResultEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolSchema),\n/* harmony export */   UserMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.UserMessageSchema),\n/* harmony export */   compactEvents: () => (/* binding */ he),\n/* harmony export */   convertToLegacyEvents: () => (/* binding */ at),\n/* harmony export */   defaultApplyEvents: () => (/* binding */ $),\n/* harmony export */   parseProtoStream: () => (/* binding */ nt),\n/* harmony export */   parseSSEStream: () => (/* binding */ et),\n/* harmony export */   randomUUID: () => (/* binding */ Re),\n/* harmony export */   runHttpRequest: () => (/* binding */ tt),\n/* harmony export */   structuredClone_: () => (/* binding */ y),\n/* harmony export */   transformChunks: () => (/* binding */ j),\n/* harmony export */   transformHttpEventStream: () => (/* binding */ st),\n/* harmony export */   verifyEvents: () => (/* binding */ z)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ag-ui/core */ \"(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/core/dist/index.mjs\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ \"(ssr)/./node_modules/rxjs/dist/cjs/operators/index.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/cjs/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var fast_json_patch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fast-json-patch */ \"(ssr)/./node_modules/fast-json-patch/index.mjs\");\n/* harmony import */ var untruncate_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! untruncate-json */ \"(ssr)/./node_modules/untruncate-json/dist/esm/index.js\");\n/* harmony import */ var _ag_ui_proto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ag-ui/proto */ \"(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/proto/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var compare_versions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! compare-versions */ \"(ssr)/./node_modules/compare-versions/lib/esm/compareVersions.js\");\nvar xt=Object.defineProperty,_t=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var rt=(l,a,e)=>a in l?xt(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,N=(l,a)=>{for(var e in a||(a={}))it.call(a,e)&&rt(l,e,a[e]);if(Y)for(var e of Y(a))lt.call(a,e)&&rt(l,e,a[e]);return l},G=(l,a)=>_t(l,Nt(a));var gt=(l,a)=>{var e={};for(var n in l)it.call(l,n)&&a.indexOf(n)<0&&(e[n]=l[n]);if(l!=null&&Y)for(var n of Y(l))a.indexOf(n)<0&&lt.call(l,n)&&(e[n]=l[n]);return e};var y=l=>{if(typeof structuredClone==\"function\")return structuredClone(l);try{return JSON.parse(JSON.stringify(l))}catch(a){return N({},l)}};function Re(){return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])()}async function x(l,a,e,n){let t=a,s=e,r;for(let o of l)try{let i=await n(o,y(t),y(s));if(i===void 0)continue;if(i.messages!==void 0&&(t=i.messages),i.state!==void 0&&(s=i.state),r=i.stopPropagation,r===!0)break}catch(i){ false||process.env.JEST_WORKER_ID!==void 0||console.error(\"Subscriber error:\",i);continue}return N(N(N({},JSON.stringify(t)!==JSON.stringify(a)?{messages:t}:{}),JSON.stringify(s)!==JSON.stringify(e)?{state:s}:{}),r!==void 0?{stopPropagation:r}:{})}var $=(l,a,e,n)=>{let t=y(e.messages),s=y(l.state),r={},o=d=>{d.messages!==void 0&&(t=d.messages,r.messages=d.messages),d.state!==void 0&&(s=d.state,r.state=d.state)},i=()=>{let d=y(r);return r={},d.messages!==void 0||d.state!==void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(d):rxjs__WEBPACK_IMPORTED_MODULE_3__.EMPTY};return a.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.concatMap)(async d=>{var T,v,c,b,U;let I=await x(n,t,s,(E,g,p)=>{var m;return(m=E.onEvent)==null?void 0:m.call(E,{event:d,agent:e,input:l,messages:g,state:p})});if(o(I),I.stopPropagation===!0)return i();switch(d.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onTextMessageStartEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{messageId:g,role:p=\"assistant\"}=d,m={id:g,role:p,content:\"\"};t.push(m),o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let{messageId:E,delta:g}=d,p=t.find(u=>u.id===E);if(!p)return console.warn(`TEXT_MESSAGE_CONTENT: No message found with ID '${E}'`),i();let m=await x(n,t,s,(u,A,h)=>{var _;return(_=u.onTextMessageContentEvent)==null?void 0:_.call(u,{event:d,messages:A,state:h,agent:e,input:l,textMessageBuffer:typeof p.content==\"string\"?p.content:\"\"})});if(o(m),m.stopPropagation!==!0){let u=typeof p.content==\"string\"?p.content:\"\";p.content=`${u}${g}`,o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:{let{messageId:E}=d,g=t.find(m=>m.id===E);if(!g)return console.warn(`TEXT_MESSAGE_END: No message found with ID '${E}'`),i();let p=await x(n,t,s,(m,u,A)=>{var h;return(h=m.onTextMessageEndEvent)==null?void 0:h.call(m,{event:d,messages:u,state:A,agent:e,input:l,textMessageBuffer:typeof g.content==\"string\"?g.content:\"\"})});return o(p),await Promise.all(n.map(m=>{var u;(u=m.onNewMessage)==null||u.call(m,{message:g,messages:t,state:s,agent:e,input:l})})),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onToolCallStartEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{toolCallId:g,toolCallName:p,parentMessageId:m}=d,u;m&&t.length>0&&t[t.length-1].id===m?u=t[t.length-1]:(u={id:m||g,role:\"assistant\",toolCalls:[]},t.push(u)),(T=u.toolCalls)!=null||(u.toolCalls=[]),u.toolCalls.push({id:g,type:\"function\",function:{name:p,arguments:\"\"}}),o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let{toolCallId:E,delta:g}=d,p=t.find(A=>{var h;return(h=A.toolCalls)==null?void 0:h.some(_=>_.id===E)});if(!p)return console.warn(`TOOL_CALL_ARGS: No message found containing tool call with ID '${E}'`),i();let m=p.toolCalls.find(A=>A.id===E);if(!m)return console.warn(`TOOL_CALL_ARGS: No tool call found with ID '${E}'`),i();let u=await x(n,t,s,(A,h,_)=>{var Z;let H=m.function.arguments,F=m.function.name,X={};try{X=(0,untruncate_json__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(H)}catch(ye){}return(Z=A.onToolCallArgsEvent)==null?void 0:Z.call(A,{event:d,messages:h,state:_,agent:e,input:l,toolCallBuffer:H,toolCallName:F,partialToolCallArgs:X})});return o(u),u.stopPropagation!==!0&&(m.function.arguments+=g,o({messages:t})),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:{let{toolCallId:E}=d,g=t.find(u=>{var A;return(A=u.toolCalls)==null?void 0:A.some(h=>h.id===E)});if(!g)return console.warn(`TOOL_CALL_END: No message found containing tool call with ID '${E}'`),i();let p=g.toolCalls.find(u=>u.id===E);if(!p)return console.warn(`TOOL_CALL_END: No tool call found with ID '${E}'`),i();let m=await x(n,t,s,(u,A,h)=>{var X;let _=p.function.arguments,H=p.function.name,F={};try{F=JSON.parse(_)}catch(Z){}return(X=u.onToolCallEndEvent)==null?void 0:X.call(u,{event:d,messages:A,state:h,agent:e,input:l,toolCallName:H,toolCallArgs:F})});return o(m),await Promise.all(n.map(u=>{var A;(A=u.onNewToolCall)==null||A.call(u,{toolCall:p,messages:t,state:s,agent:e,input:l})})),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onToolCallResultEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{messageId:g,toolCallId:p,content:m,role:u}=d,A={id:g,toolCallId:p,role:u||\"tool\",content:m};t.push(A),await Promise.all(n.map(h=>{var _;(_=h.onNewMessage)==null||_.call(h,{message:A,messages:t,state:s,agent:e,input:l})})),o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStateSnapshotEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{snapshot:g}=d;s=g,o({state:s})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStateDeltaEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{delta:g}=d;try{s=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_2__.applyPatch)(s,g,!0,!1).newDocument,o({state:s})}catch(p){let m=p instanceof Error?p.message:String(p);console.warn(`Failed to apply state patch:\nCurrent state: ${JSON.stringify(s,null,2)}\nPatch operations: ${JSON.stringify(g,null,2)}\nError: ${m}`)}}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onMessagesSnapshotEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{messages:g}=d;t=g,o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_SNAPSHOT:{let E=d,g=t.findIndex(h=>h.id===E.messageId),p=g>=0?t[g]:void 0,m=(p==null?void 0:p.role)===\"activity\"?p:void 0,u=(v=E.replace)!=null?v:!0,A=await x(n,t,s,(h,_,H)=>{var F;return(F=h.onActivitySnapshotEvent)==null?void 0:F.call(h,{event:E,messages:_,state:H,agent:e,input:l,activityMessage:m,existingMessage:p})});if(o(A),A.stopPropagation!==!0){let h={id:E.messageId,role:\"activity\",activityType:E.activityType,content:y(E.content)},_;g===-1?(t.push(h),_=h):m?u&&(t[g]=G(N({},m),{activityType:E.activityType,content:y(E.content)})):u&&(t[g]=h,_=h),o({messages:t}),_&&await Promise.all(n.map(H=>{var F;return(F=H.onNewMessage)==null?void 0:F.call(H,{message:_,messages:t,state:s,agent:e,input:l})}))}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_DELTA:{let E=d,g=t.findIndex(A=>A.id===E.messageId);if(g===-1)return console.warn(`ACTIVITY_DELTA: No message found with ID '${E.messageId}' to apply patch`),i();let p=t[g];if(p.role!==\"activity\")return console.warn(`ACTIVITY_DELTA: Message '${E.messageId}' is not an activity message`),i();let m=p,u=await x(n,t,s,(A,h,_)=>{var H;return(H=A.onActivityDeltaEvent)==null?void 0:H.call(A,{event:E,messages:h,state:_,agent:e,input:l,activityMessage:m})});if(o(u),u.stopPropagation!==!0)try{let A=y((c=m.content)!=null?c:{}),_=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_2__.applyPatch)(A,(b=E.patch)!=null?b:[],!0,!1).newDocument;t[g]=G(N({},m),{content:y(_),activityType:E.activityType}),o({messages:t})}catch(A){let h=A instanceof Error?A.message:String(A);console.warn(`Failed to apply activity patch for '${E.messageId}': ${h}`)}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRawEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onCustomEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRunStartedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let g=d;if((U=g.input)!=null&&U.messages){for(let p of g.input.messages)t.find(u=>u.id===p.id)||t.push(p);o({messages:t})}}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRunFinishedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l,result:d.result})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRunErrorEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStepStartedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStepFinishedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CHUNK:throw new Error(\"TEXT_MESSAGE_CHUNK must be tranformed before being applied\");case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_CHUNK:throw new Error(\"TOOL_CALL_CHUNK must be tranformed before being applied\");case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_START:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_END:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_START:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_CONTENT:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_END:return i()}let S=d.type;return i()}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeAll)(),n.length>0?(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.defaultIfEmpty)({}):d=>d)};var z=l=>a=>{let e=new Map,n=new Map,t=!1,s=!1,r=!1,o=new Map,i=!1,d=!1,I=!1,S=()=>{e.clear(),n.clear(),o.clear(),i=!1,d=!1,t=!1,s=!1,I=!0};return a.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeMap)(T=>{let v=T.type;if(l&&console.debug(\"[VERIFY]:\",JSON.stringify(T)),s)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${v}': The run has already errored with 'RUN_ERROR'. No further events can be sent.`));if(t&&v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR&&v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${v}': The run has already finished with 'RUN_FINISHED'. Start a new run with 'RUN_STARTED'.`));if(r){if(v===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED){if(I&&!t)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'RUN_STARTED' while a run is still active. The previous run must be finished with 'RUN_FINISHED' before starting a new run.\"));t&&S()}}else if(r=!0,v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED&&v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"First event must be 'RUN_STARTED'\"));switch(v){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let c=T.messageId;return e.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_START' event: A text message with ID '${c}' is already in progress. Complete it with 'TEXT_MESSAGE_END' first.`)):(e.set(c,!0),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let c=T.messageId;return e.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_CONTENT' event: No active text message found with ID '${c}'. Start a text message with 'TEXT_MESSAGE_START' first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:{let c=T.messageId;return e.has(c)?(e.delete(c),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_END' event: No active text message found with ID '${c}'. A 'TEXT_MESSAGE_START' event must be sent first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let c=T.toolCallId;return n.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_START' event: A tool call with ID '${c}' is already in progress. Complete it with 'TOOL_CALL_END' first.`)):(n.set(c,!0),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let c=T.toolCallId;return n.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_ARGS' event: No active tool call found with ID '${c}'. Start a tool call with 'TOOL_CALL_START' first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:{let c=T.toolCallId;return n.has(c)?(n.delete(c),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_END' event: No active tool call found with ID '${c}'. A 'TOOL_CALL_START' event must be sent first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:{let c=T.stepName;return o.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Step \"${c}\" is already active for 'STEP_STARTED'`)):(o.set(c,!0),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:{let c=T.stepName;return o.has(c)?(o.delete(c),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'STEP_FINISHED' for step \"${c}\" that was not started`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:return I=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:{if(o.size>0){let c=Array.from(o.keys()).join(\", \");return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'RUN_FINISHED' while steps are still active: ${c}`))}if(e.size>0){let c=Array.from(e.keys()).join(\", \");return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'RUN_FINISHED' while text messages are still active: ${c}`))}if(n.size>0){let c=Array.from(n.keys()).join(\", \");return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'RUN_FINISHED' while tool calls are still active: ${c}`))}return t=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:return s=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_START:return i?d?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking message is already in progress. Complete it with 'THINKING_TEXT_MESSAGE_END' first.\")):(d=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking step is not in progress. Create one with 'THINKING_START' first.\"));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_CONTENT:return d?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_CONTENT' event: No active thinking message found. Start a message with 'THINKING_TEXT_MESSAGE_START' first.\"));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_END:return d?(d=!1,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_END' event: No active thinking message found. A 'THINKING_TEXT_MESSAGE_START' event must be sent first.\"));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_START:return i?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_START' event: A thinking step is already in progress. End it with 'THINKING_END' first.\")):(i=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_END:return i?(i=!1,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_END' event: No active thinking step found. A 'THINKING_START' event must be sent first.\"));default:return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)}}))};var tt=(l,a)=>(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.defer)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.from)(fetch(l,a))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.switchMap)(e=>{var s;if(!e.ok){let r=e.headers.get(\"content-type\")||\"\";return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.from)(e.text()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeMap)(o=>{let i=o;if(r.includes(\"application/json\"))try{i=JSON.parse(o)}catch(I){}let d=new Error(`HTTP ${e.status}: ${typeof i==\"string\"?i:JSON.stringify(i)}`);return d.status=e.status,d.payload=i,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>d)}))}let n={type:\"headers\",status:e.status,headers:e.headers},t=(s=e.body)==null?void 0:s.getReader();return t?new rxjs__WEBPACK_IMPORTED_MODULE_3__.Observable(r=>(r.next(n),(async()=>{try{for(;;){let{done:o,value:i}=await t.read();if(o)break;let d={type:\"data\",data:i};r.next(d)}r.complete()}catch(o){r.error(o)}})(),()=>{t.cancel().catch(o=>{if((o==null?void 0:o.name)!==\"AbortError\")throw o})})):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new Error(\"Failed to getReader() from response\"))}));var et=l=>{let a=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject,e=new TextDecoder(\"utf-8\",{fatal:!1}),n=\"\";l.subscribe({next:s=>{if(s.type!==\"headers\"&&s.type===\"data\"&&s.data){let r=e.decode(s.data,{stream:!0});n+=r;let o=n.split(/\\n\\n/);n=o.pop()||\"\";for(let i of o)t(i)}},error:s=>a.error(s),complete:()=>{n&&(n+=e.decode(),t(n)),a.complete()}});function t(s){let r=s.split(`\n`),o=[];for(let i of r)i.startsWith(\"data: \")&&o.push(i.slice(6));if(o.length>0)try{let i=o.join(`\n`),d=JSON.parse(i);a.next(d)}catch(i){a.error(i)}}return a.asObservable()};var nt=l=>{let a=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject,e=new Uint8Array(0);l.subscribe({next:t=>{if(t.type!==\"headers\"&&t.type===\"data\"&&t.data){let s=new Uint8Array(e.length+t.data.length);s.set(e,0),s.set(t.data,e.length),e=s,n()}},error:t=>a.error(t),complete:()=>{if(e.length>0)try{n()}catch(t){console.warn(\"Incomplete or invalid protocol buffer data at stream end\")}a.complete()}});function n(){for(;e.length>=4;){let r=4+new DataView(e.buffer,e.byteOffset,4).getUint32(0,!1);if(e.length<r)break;try{let o=e.slice(4,r),i=_ag_ui_proto__WEBPACK_IMPORTED_MODULE_6__.decode(o);a.next(i),e=e.slice(r)}catch(o){let i=o instanceof Error?o.message:String(o);a.error(new Error(`Failed to decode protocol buffer message: ${i}`));return}}}return a.asObservable()};var st=l=>{let a=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject,e=new rxjs__WEBPACK_IMPORTED_MODULE_3__.ReplaySubject,n=!1;return l.subscribe({next:t=>{e.next(t),t.type===\"headers\"&&!n?(n=!0,t.headers.get(\"content-type\")===_ag_ui_proto__WEBPACK_IMPORTED_MODULE_6__.AGUI_MEDIA_TYPE?nt(e).subscribe({next:r=>a.next(r),error:r=>a.error(r),complete:()=>a.complete()}):et(e).subscribe({next:r=>{try{let o=_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas.parse(r);a.next(o)}catch(o){a.error(o)}},error:r=>{if((r==null?void 0:r.name)===\"AbortError\"){a.next({type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR,rawEvent:r}),a.complete();return}return a.error(r)},complete:()=>a.complete()})):n||a.error(new Error(\"No headers event received before data events\"))},error:t=>{e.error(t),a.error(t)},complete:()=>{e.complete()}}),a.asObservable()};var C=zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\"TextMessageStart\",\"TextMessageContent\",\"TextMessageEnd\",\"ActionExecutionStart\",\"ActionExecutionArgs\",\"ActionExecutionEnd\",\"ActionExecutionResult\",\"AgentStateMessage\",\"MetaEvent\",\"RunStarted\",\"RunFinished\",\"RunError\",\"NodeStarted\",\"NodeFinished\"]),Vt=zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\"LangGraphInterruptEvent\",\"PredictState\",\"Exit\"]),Wt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.TextMessageStart),messageId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),role:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),Yt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.TextMessageContent),messageId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),content:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),qt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.TextMessageEnd),messageId:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),Qt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionStart),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),actionName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),Zt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionArgs),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),args:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),te=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionEnd),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),ee=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionResult),actionName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),result:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),ne=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.AgentStateMessage),threadId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),agentName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),nodeName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),runId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),active:zod__WEBPACK_IMPORTED_MODULE_7__.boolean(),role:zod__WEBPACK_IMPORTED_MODULE_7__.string(),state:zod__WEBPACK_IMPORTED_MODULE_7__.string(),running:zod__WEBPACK_IMPORTED_MODULE_7__.boolean()}),se=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.MetaEvent),name:Vt,value:zod__WEBPACK_IMPORTED_MODULE_7__.any()}),ae=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.RunError),message:zod__WEBPACK_IMPORTED_MODULE_7__.string(),code:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),Qn=zod__WEBPACK_IMPORTED_MODULE_7__.discriminatedUnion(\"type\",[Wt,Yt,qt,Qt,Zt,te,ee,ne,se,ae]),Zn=zod__WEBPACK_IMPORTED_MODULE_7__.object({id:zod__WEBPACK_IMPORTED_MODULE_7__.string(),role:zod__WEBPACK_IMPORTED_MODULE_7__.string(),content:zod__WEBPACK_IMPORTED_MODULE_7__.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),ts=zod__WEBPACK_IMPORTED_MODULE_7__.object({id:zod__WEBPACK_IMPORTED_MODULE_7__.string(),name:zod__WEBPACK_IMPORTED_MODULE_7__.string(),arguments:zod__WEBPACK_IMPORTED_MODULE_7__.any(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),es=zod__WEBPACK_IMPORTED_MODULE_7__.object({id:zod__WEBPACK_IMPORTED_MODULE_7__.string(),result:zod__WEBPACK_IMPORTED_MODULE_7__.any(),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),actionName:zod__WEBPACK_IMPORTED_MODULE_7__.string()});var le=l=>{if(typeof l==\"string\")return l;if(!Array.isArray(l))return;let a=l.filter(e=>e.type===\"text\").map(e=>e.text).filter(e=>e.length>0);if(a.length!==0)return a.join(`\n`)},at=(l,a,e)=>n=>{let t={},s=!0,r=!0,o=\"\",i=null,d=null,I=[],S={},T=v=>{typeof v==\"object\"&&v!==null&&(\"messages\"in v&&delete v.messages,t=v)};return n.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeMap)(v=>{switch(v.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let c=v;return[{type:C.enum.TextMessageStart,messageId:c.messageId,role:c.role}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let c=v;return[{type:C.enum.TextMessageContent,messageId:c.messageId,content:c.delta}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:{let c=v;return[{type:C.enum.TextMessageEnd,messageId:c.messageId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let c=v;return I.push({id:c.toolCallId,type:\"function\",function:{name:c.toolCallName,arguments:\"\"}}),r=!0,S[c.toolCallId]=c.toolCallName,[{type:C.enum.ActionExecutionStart,actionExecutionId:c.toolCallId,actionName:c.toolCallName,parentMessageId:c.parentMessageId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let c=v,b=I.find(E=>E.id===c.toolCallId);if(!b)return console.warn(`TOOL_CALL_ARGS: No tool call found with ID '${c.toolCallId}'`),[];b.function.arguments+=c.delta;let U=!1;if(d){let E=d.find(g=>g.tool==b.function.name);if(E)try{let g=JSON.parse((0,untruncate_json__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(b.function.arguments));E.tool_argument&&E.tool_argument in g?(T(G(N({},t),{[E.state_key]:g[E.tool_argument]})),U=!0):E.tool_argument||(T(G(N({},t),{[E.state_key]:g})),U=!0)}catch(g){}}return[{type:C.enum.ActionExecutionArgs,actionExecutionId:c.toolCallId,args:c.delta},...U?[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:r}]:[]]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:{let c=v;return[{type:C.enum.ActionExecutionEnd,actionExecutionId:c.toolCallId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT:{let c=v;return[{type:C.enum.ActionExecutionResult,actionExecutionId:c.toolCallId,result:c.content,actionName:S[c.toolCallId]||\"unknown\"}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:return[];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:{let c=v;switch(c.name){case\"Exit\":s=!1;break;case\"PredictState\":d=c.value;break}return[{type:C.enum.MetaEvent,name:c.name,value:c.value}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:return T(v.snapshot),[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:r}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:{let b=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_2__.applyPatch)(t,v.delta,!0,!1);return b?(T(b.newDocument),[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:r}]):[]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:return i=v.messages,[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(N(N({},t),i?{messages:i}:{})),active:!0}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:return[];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:return i&&(t.messages=i),Object.keys(t).length===0?[]:[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(N(N({},t),i?{messages:ge(i)}:{})),active:!1}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:{let c=v;return[{type:C.enum.RunError,message:c.message,code:c.code}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:return o=v.stepName,I=[],d=null,[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:!0}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:return I=[],d=null,[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:!1}];default:return[]}}))};function ge(l){var e;let a=[];for(let n of l)if(n.role===\"assistant\"||n.role===\"user\"||n.role===\"system\"){let t=le(n.content);if(t){let s={id:n.id,role:n.role,content:t};a.push(s)}if(n.role===\"assistant\"&&n.toolCalls&&n.toolCalls.length>0)for(let s of n.toolCalls){let r={id:s.id,name:s.function.name,arguments:JSON.parse(s.function.arguments),parentMessageId:n.id};a.push(r)}}else if(n.role===\"tool\"){let t=\"unknown\";for(let r of l)if(r.role===\"assistant\"&&((e=r.toolCalls)!=null&&e.length)){for(let o of r.toolCalls)if(o.id===n.toolCallId){t=o.function.name;break}}let s={id:n.id,result:n.content,actionExecutionId:n.toolCallId,actionName:t};a.push(s)}return a}var j=l=>a=>{let e,n,t,s=()=>{if(!e||t!==\"text\")throw new Error(\"No text message to close\");let i={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END,messageId:e.messageId};return t=void 0,e=void 0,l&&console.debug(\"[TRANSFORM]: TEXT_MESSAGE_END\",JSON.stringify(i)),i},r=()=>{if(!n||t!==\"tool\")throw new Error(\"No tool call to close\");let i={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END,toolCallId:n.toolCallId};return t=void 0,n=void 0,l&&console.debug(\"[TRANSFORM]: TOOL_CALL_END\",JSON.stringify(i)),i},o=()=>t===\"text\"?[s()]:t===\"tool\"?[r()]:[];return a.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.mergeMap)(i=>{switch(i.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_END:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_CONTENT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_END:return[...o(),i];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_SNAPSHOT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_DELTA:return[i];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CHUNK:let I=i,S=[];if((t!==\"text\"||I.messageId!==void 0&&I.messageId!==(e==null?void 0:e.messageId))&&S.push(...o()),t!==\"text\"){if(I.messageId===void 0)throw new Error(\"First TEXT_MESSAGE_CHUNK must have a messageId\");e={messageId:I.messageId},t=\"text\";let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START,messageId:I.messageId,role:I.role||\"assistant\"};S.push(c),l&&console.debug(\"[TRANSFORM]: TEXT_MESSAGE_START\",JSON.stringify(c))}if(I.delta!==void 0){let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT,messageId:e.messageId,delta:I.delta};S.push(c),l&&console.debug(\"[TRANSFORM]: TEXT_MESSAGE_CONTENT\",JSON.stringify(c))}return S;case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_CHUNK:let T=i,v=[];if((t!==\"tool\"||T.toolCallId!==void 0&&T.toolCallId!==(n==null?void 0:n.toolCallId))&&v.push(...o()),t!==\"tool\"){if(T.toolCallId===void 0)throw new Error(\"First TOOL_CALL_CHUNK must have a toolCallId\");if(T.toolCallName===void 0)throw new Error(\"First TOOL_CALL_CHUNK must have a toolCallName\");n={toolCallId:T.toolCallId,toolCallName:T.toolCallName,parentMessageId:T.parentMessageId},t=\"tool\";let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START,toolCallId:T.toolCallId,toolCallName:T.toolCallName,parentMessageId:T.parentMessageId};v.push(c),l&&console.debug(\"[TRANSFORM]: TOOL_CALL_START\",JSON.stringify(c))}if(T.delta!==void 0){let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS,toolCallId:n.toolCallId,delta:T.delta};v.push(c),l&&console.debug(\"[TRANSFORM]: TOOL_CALL_ARGS\",JSON.stringify(c))}return v}let d=i.type;return[]}),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.finalize)(()=>{o()}))};var k=class{runNext(a,e){return e.run(a).pipe(j(!1))}runNextWithState(a,e){let n=y(a.messages||[]),t=y(a.state||{}),s=new rxjs__WEBPACK_IMPORTED_MODULE_3__.ReplaySubject;return $(a,s,e,[]).subscribe(o=>{o.messages!==void 0&&(n=o.messages),o.state!==void 0&&(t=o.state)}),this.runNext(a,e).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.concatMap)(async o=>(s.next(o),await new Promise(i=>setTimeout(i,0)),{event:o,messages:y(n),state:y(t)})))}},K=class extends k{constructor(e){super();this.fn=e}run(e,n){return this.fn(e,n)}};var Q=class extends k{constructor(e){super();this.blockedToolCallIds=new Set;if(e.allowedToolCalls&&e.disallowedToolCalls)throw new Error(\"Cannot specify both allowedToolCalls and disallowedToolCalls\");if(!e.allowedToolCalls&&!e.disallowedToolCalls)throw new Error(\"Must specify either allowedToolCalls or disallowedToolCalls\");e.allowedToolCalls?this.allowedTools=new Set(e.allowedToolCalls):e.disallowedToolCalls&&(this.disallowedTools=new Set(e.disallowedToolCalls))}run(e,n){return this.runNext(e,n).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(t=>{if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START){let s=t;return this.shouldFilterTool(s.toolCallName)?(this.blockedToolCallIds.add(s.toolCallId),!1):!0}if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS){let s=t;return!this.blockedToolCallIds.has(s.toolCallId)}if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END){let s=t;return!this.blockedToolCallIds.has(s.toolCallId)}if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT){let s=t;return this.blockedToolCallIds.has(s.toolCallId)?(this.blockedToolCallIds.delete(s.toolCallId),!1):!0}return!0}))}shouldFilterTool(e){return this.allowedTools?!this.allowedTools.has(e):this.disallowedTools?this.disallowedTools.has(e):!1}};function me(l){let a=l.content;if(Array.isArray(a)){let e=a.filter(n=>typeof n==\"object\"&&n!==null&&\"type\"in n&&n.type===\"text\"&&typeof n.text==\"string\").map(n=>n.text).join(\"\");return G(N({},l),{content:e})}return typeof a==\"string\"?l:G(N({},l),{content:\"\"})}var J=class extends k{run(a,e){let r=a,{parentRunId:n}=r,t=gt(r,[\"parentRunId\"]),s=G(N({},t),{messages:t.messages.map(me)});return this.runNext(s,e)}};var mt={name:\"@ag-ui/client\",author:\"Markus Ecker <markus.ecker@gmail.com>\",version:\"0.0.42\",private:!1,publishConfig:{access:\"public\"},main:\"./dist/index.js\",module:\"./dist/index.mjs\",types:\"./dist/index.d.ts\",sideEffects:!1,files:[\"dist/**\",\"README.md\"],scripts:{build:\"tsup\",dev:\"tsup --watch\",clean:\"rm -rf dist .turbo node_modules\",typecheck:\"tsc --noEmit\",test:\"jest\",\"link:global\":\"pnpm link --global\",\"unlink:global\":\"pnpm unlink --global\"},dependencies:{\"@ag-ui/core\":\"workspace:*\",\"@ag-ui/encoder\":\"workspace:*\",\"@ag-ui/proto\":\"workspace:*\",\"@types/uuid\":\"^10.0.0\",\"compare-versions\":\"^6.1.1\",\"fast-json-patch\":\"^3.1.1\",rxjs:\"7.8.1\",\"untruncate-json\":\"^0.0.1\",uuid:\"^11.1.0\",zod:\"^3.22.4\"},devDependencies:{\"@types/jest\":\"^29.5.14\",\"@types/node\":\"^20.11.19\",jest:\"^29.7.0\",\"ts-jest\":\"^29.1.2\",tsup:\"^8.0.2\",typescript:\"^5.3.3\"}};var W=class{constructor({agentId:a,description:e,threadId:n,initialMessages:t,initialState:s,debug:r}={}){this.debug=!1;this.subscribers=[];this.isRunning=!1;this.middlewares=[];this.agentId=a,this.description=e!=null?e:\"\",this.threadId=n!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),this.messages=y(t!=null?t:[]),this.state=y(s!=null?s:{}),this.debug=r!=null?r:!1,(0,compare_versions__WEBPACK_IMPORTED_MODULE_8__.compareVersions)(this.maxVersion,\"0.0.39\")<=0&&this.middlewares.unshift(new J)}get maxVersion(){return mt.version}subscribe(a){return this.subscribers.push(a),{unsubscribe:()=>{this.subscribers=this.subscribers.filter(e=>e!==a)}}}use(...a){let e=a.map(n=>typeof n==\"function\"?new K(n):n);return this.middlewares.push(...e),this}async runAgent(a,e){var n;try{this.isRunning=!0,this.agentId=(n=this.agentId)!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();let t=this.prepareRunAgentInput(a),s,r=new Set(this.messages.map(S=>S.id)),o=[{onRunFinishedEvent:S=>{s=S.result}},...this.subscribers,e!=null?e:{}];await this.onInitialize(t,o),this.activeRunDetach$=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject;let i;this.activeRunCompletionPromise=new Promise(S=>{i=S});let d=(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.pipe)(()=>this.middlewares.length===0?this.run(t):this.middlewares.reduceRight((T,v)=>({run:c=>v.run(c,T)}),this).run(t),j(this.debug),z(this.debug),S=>S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.takeUntil)(this.activeRunDetach$)),S=>this.apply(t,S,o),S=>this.processApplyEvents(t,S,o),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.catchError)(S=>(this.isRunning=!1,this.onError(t,S,o))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.finalize)(()=>{this.isRunning=!1,this.onFinalize(t,o),i==null||i(),i=void 0,this.activeRunCompletionPromise=void 0,this.activeRunDetach$=void 0}));await (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.lastValueFrom)(d((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(null)));let I=y(this.messages).filter(S=>!r.has(S.id));return{result:s,newMessages:I}}finally{this.isRunning=!1}}connect(a){throw new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIConnectNotImplementedError}async connectAgent(a,e){var n;try{this.isRunning=!0,this.agentId=(n=this.agentId)!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();let t=this.prepareRunAgentInput(a),s,r=new Set(this.messages.map(S=>S.id)),o=[{onRunFinishedEvent:S=>{s=S.result}},...this.subscribers,e!=null?e:{}];await this.onInitialize(t,o),this.activeRunDetach$=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject;let i;this.activeRunCompletionPromise=new Promise(S=>{i=S});let d=(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.pipe)(()=>this.connect(t),j(this.debug),z(this.debug),S=>S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.takeUntil)(this.activeRunDetach$)),S=>this.apply(t,S,o),S=>this.processApplyEvents(t,S,o),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.catchError)(S=>(this.isRunning=!1,S instanceof _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIConnectNotImplementedError?rxjs__WEBPACK_IMPORTED_MODULE_3__.EMPTY:this.onError(t,S,o))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.finalize)(()=>{this.isRunning=!1,this.onFinalize(t,o),i==null||i(),i=void 0,this.activeRunCompletionPromise=void 0,this.activeRunDetach$=void 0}));await (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.lastValueFrom)(d((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(null)));let I=y(this.messages).filter(S=>!r.has(S.id));return{result:s,newMessages:I}}finally{this.isRunning=!1}}abortRun(){}async detachActiveRun(){var e,n;if(!this.activeRunDetach$)return;let a=(e=this.activeRunCompletionPromise)!=null?e:Promise.resolve();this.activeRunDetach$.next(),(n=this.activeRunDetach$)==null||n.complete(),await a}apply(a,e,n){return $(a,e,this,n)}processApplyEvents(a,e,n){return e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.tap)(t=>{t.messages&&(this.messages=t.messages,n.forEach(s=>{var r;(r=s.onMessagesChanged)==null||r.call(s,{messages:this.messages,state:this.state,agent:this,input:a})})),t.state&&(this.state=t.state,n.forEach(s=>{var r;(r=s.onStateChanged)==null||r.call(s,{state:this.state,messages:this.messages,agent:this,input:a})}))}))}prepareRunAgentInput(a){var t,s,r;let n=y(this.messages).filter(o=>o.role!==\"activity\");return{threadId:this.threadId,runId:(a==null?void 0:a.runId)||(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),tools:y((t=a==null?void 0:a.tools)!=null?t:[]),context:y((s=a==null?void 0:a.context)!=null?s:[]),forwardedProps:y((r=a==null?void 0:a.forwardedProps)!=null?r:{}),state:y(this.state),messages:n}}async onInitialize(a,e){let n=await x(e,this.messages,this.state,(t,s,r)=>{var o;return(o=t.onRunInitialized)==null?void 0:o.call(t,{messages:s,state:r,agent:this,input:a})});(n.messages!==void 0||n.state!==void 0)&&(n.messages&&(this.messages=n.messages,a.messages=n.messages,e.forEach(t=>{var s;(s=t.onMessagesChanged)==null||s.call(t,{messages:this.messages,state:this.state,agent:this,input:a})})),n.state&&(this.state=n.state,a.state=n.state,e.forEach(t=>{var s;(s=t.onStateChanged)==null||s.call(t,{state:this.state,messages:this.messages,agent:this,input:a})})))}onError(a,e,n){return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.from)(x(n,this.messages,this.state,(t,s,r)=>{var o;return(o=t.onRunFailed)==null?void 0:o.call(t,{error:e,messages:s,state:r,agent:this,input:a})})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(t=>{let s=t;if((s.messages!==void 0||s.state!==void 0)&&(s.messages!==void 0&&(this.messages=s.messages,n.forEach(r=>{var o;(o=r.onMessagesChanged)==null||o.call(r,{messages:this.messages,state:this.state,agent:this,input:a})})),s.state!==void 0&&(this.state=s.state,n.forEach(r=>{var o;(o=r.onStateChanged)==null||o.call(r,{state:this.state,messages:this.messages,agent:this,input:a})}))),s.stopPropagation!==!0)throw console.error(\"Agent execution failed:\",e),e;return{}}))}async onFinalize(a,e){let n=await x(e,this.messages,this.state,(t,s,r)=>{var o;return(o=t.onRunFinalized)==null?void 0:o.call(t,{messages:s,state:r,agent:this,input:a})});(n.messages!==void 0||n.state!==void 0)&&(n.messages!==void 0&&(this.messages=n.messages,e.forEach(t=>{var s;(s=t.onMessagesChanged)==null||s.call(t,{messages:this.messages,state:this.state,agent:this,input:a})})),n.state!==void 0&&(this.state=n.state,e.forEach(t=>{var s;(s=t.onStateChanged)==null||s.call(t,{state:this.state,messages:this.messages,agent:this,input:a})})))}clone(){let a=Object.create(Object.getPrototypeOf(this));return a.agentId=this.agentId,a.description=this.description,a.threadId=this.threadId,a.messages=y(this.messages),a.state=y(this.state),a.debug=this.debug,a.isRunning=this.isRunning,a.subscribers=[...this.subscribers],a.middlewares=[...this.middlewares],a}addMessage(a){this.messages.push(a),(async()=>{var e,n,t;for(let s of this.subscribers)await((e=s.onNewMessage)==null?void 0:e.call(s,{message:a,messages:this.messages,state:this.state,agent:this}));if(a.role===\"assistant\"&&a.toolCalls)for(let s of a.toolCalls)for(let r of this.subscribers)await((n=r.onNewToolCall)==null?void 0:n.call(r,{toolCall:s,messages:this.messages,state:this.state,agent:this}));for(let s of this.subscribers)await((t=s.onMessagesChanged)==null?void 0:t.call(s,{messages:this.messages,state:this.state,agent:this}))})()}addMessages(a){this.messages.push(...a),(async()=>{var e,n,t;for(let s of a){for(let r of this.subscribers)await((e=r.onNewMessage)==null?void 0:e.call(r,{message:s,messages:this.messages,state:this.state,agent:this}));if(s.role===\"assistant\"&&s.toolCalls)for(let r of s.toolCalls)for(let o of this.subscribers)await((n=o.onNewToolCall)==null?void 0:n.call(o,{toolCall:r,messages:this.messages,state:this.state,agent:this}))}for(let s of this.subscribers)await((t=s.onMessagesChanged)==null?void 0:t.call(s,{messages:this.messages,state:this.state,agent:this}))})()}setMessages(a){this.messages=y(a),(async()=>{var e;for(let n of this.subscribers)await((e=n.onMessagesChanged)==null?void 0:e.call(n,{messages:this.messages,state:this.state,agent:this}))})()}setState(a){this.state=y(a),(async()=>{var e;for(let n of this.subscribers)await((e=n.onStateChanged)==null?void 0:e.call(n,{messages:this.messages,state:this.state,agent:this}))})()}legacy_to_be_removed_runAgentBridged(a){var t;this.agentId=(t=this.agentId)!=null?t:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();let e=this.prepareRunAgentInput(a);return(this.middlewares.length===0?this.run(e):this.middlewares.reduceRight((r,o)=>({run:i=>o.run(i,r)}),this).run(e)).pipe(j(this.debug),z(this.debug),at(this.threadId,e.runId,this.agentId),s=>s.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(r=>(this.debug&&console.debug(\"[LEGACY]:\",JSON.stringify(r)),r))))}};var ot=class extends W{constructor(e){var n;super(e);this.abortController=new AbortController;this.url=e.url,this.headers=y((n=e.headers)!=null?n:{})}requestInit(e){return{method:\"POST\",headers:G(N({},this.headers),{\"Content-Type\":\"application/json\",Accept:\"text/event-stream\"}),body:JSON.stringify(e),signal:this.abortController.signal}}runAgent(e,n){var t;return this.abortController=(t=e==null?void 0:e.abortController)!=null?t:new AbortController,super.runAgent(e,n)}abortRun(){this.abortController.abort(),super.abortRun()}run(e){let n=tt(this.url,this.requestInit(e));return st(n)}clone(){var s;let e=super.clone();e.url=this.url,e.headers=y((s=this.headers)!=null?s:{});let n=new AbortController,t=this.abortController.signal;return t.aborted&&n.abort(t.reason),e.abortController=n,e}};function he(l){let a=[],e=new Map,n=new Map;for(let t of l)if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START){let s=t,r=s.messageId;e.has(r)||e.set(r,{contents:[],otherEvents:[]});let o=e.get(r);o.start=s}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT){let s=t,r=s.messageId;e.has(r)||e.set(r,{contents:[],otherEvents:[]}),e.get(r).contents.push(s)}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END){let s=t,r=s.messageId;e.has(r)||e.set(r,{contents:[],otherEvents:[]});let o=e.get(r);o.end=s,Rt(r,o,a),e.delete(r)}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START){let s=t,r=s.toolCallId;n.has(r)||n.set(r,{args:[],otherEvents:[]});let o=n.get(r);o.start=s}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS){let s=t,r=s.toolCallId;n.has(r)||n.set(r,{args:[],otherEvents:[]}),n.get(r).args.push(s)}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END){let s=t,r=s.toolCallId;n.has(r)||n.set(r,{args:[],otherEvents:[]});let o=n.get(r);o.end=s,It(r,o,a),n.delete(r)}else{let s=!1;for(let[r,o]of e)if(o.start&&!o.end){o.otherEvents.push(t),s=!0;break}if(!s){for(let[r,o]of n)if(o.start&&!o.end){o.otherEvents.push(t),s=!0;break}}s||a.push(t)}for(let[t,s]of e)Rt(t,s,a);for(let[t,s]of n)It(t,s,a);return a}function Rt(l,a,e){if(a.start&&e.push(a.start),a.contents.length>0){let n=a.contents.map(s=>s.delta).join(\"\"),t={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT,messageId:l,delta:n};e.push(t)}a.end&&e.push(a.end);for(let n of a.otherEvents)e.push(n)}function It(l,a,e){if(a.start&&e.push(a.start),a.args.length>0){let n=a.args.map(s=>s.delta).join(\"\"),t={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS,toolCallId:l,delta:n};e.push(t)}a.end&&e.push(a.end);for(let n of a.otherEvents)e.push(n)}\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L2NvcmUvbm9kZV9tb2R1bGVzL0BhZy11aS9jbGllbnQvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsd0RBQXdELHdDQUF3QyxtQ0FBbUMsZ0ZBQWdGLCtCQUErQixrREFBa0QsbUJBQW1CLHFCQUFxQiw2QkFBNkIsa0RBQWtELFNBQVMsc0JBQXNCLGVBQWUsU0FBUyx5REFBeUQsMEVBQTBFLFVBQW9NLFVBQVUsZ0VBQWdFLElBQUkscUNBQXFDLFNBQVMsV0FBVyxNQUFNLGNBQWMsT0FBTyxnREFBRSxHQUFpRCwwQkFBMEIsY0FBYyxtQkFBbUIsMkJBQTJCLHVCQUF1QixzR0FBc0csU0FBUyxNQUE2Qiw0RUFBNEUsU0FBUyxlQUFlLHdDQUF3QyxXQUFXLEdBQUcseUNBQXlDLFFBQVEsR0FBRyxjQUFjLGtCQUFrQixHQUFHLEVBQWtDLGtCQUFrQixxQ0FBcUMsT0FBTyx3R0FBd0csUUFBUSxXQUFXLFdBQVcsdUNBQXVDLHdDQUFFLElBQUksdUNBQUUsRUFBRSxjQUFjLHlEQUFFLFdBQVcsY0FBYyw4QkFBOEIsTUFBTSwyQ0FBMkMsMkNBQTJDLEVBQUUsRUFBRSwwQ0FBMEMsZUFBZSxLQUFLLGtEQUFDLHFCQUFxQiw4QkFBOEIsTUFBTSwyREFBMkQsMkNBQTJDLEVBQUUsRUFBRSxnQ0FBZ0MsSUFBSSwrQkFBK0IsTUFBTSx3QkFBd0IsYUFBYSxXQUFXLEVBQUUsV0FBVyxLQUFLLGtEQUFDLHVCQUF1QixJQUFJLG9CQUFvQix5QkFBeUIsNkVBQTZFLEVBQUUsUUFBUSw4QkFBOEIsTUFBTSw2REFBNkQscUdBQXFHLEVBQUUsRUFBRSxnQ0FBZ0MsOENBQThDLGFBQWEsRUFBRSxFQUFFLEVBQUUsS0FBSyxXQUFXLEVBQUUsV0FBVyxLQUFLLGtEQUFDLG1C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QyxzQ0FBc0MsVUFBVSxxQkFBcUIscUNBQXdjO0FBQ3pvbkIiLCJzb3VyY2VzIjpbIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3RyYXZlbC11aS9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L2NvcmUvbm9kZV9tb2R1bGVzL0BhZy11aS9jbGllbnQvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHh0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxfdD1PYmplY3QuZGVmaW5lUHJvcGVydGllczt2YXIgTnQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7dmFyIFk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczt2YXIgaXQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxsdD1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO3ZhciBydD0obCxhLGUpPT5hIGluIGw/eHQobCxhLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSk6bFthXT1lLE49KGwsYSk9Pntmb3IodmFyIGUgaW4gYXx8KGE9e30pKWl0LmNhbGwoYSxlKSYmcnQobCxlLGFbZV0pO2lmKFkpZm9yKHZhciBlIG9mIFkoYSkpbHQuY2FsbChhLGUpJiZydChsLGUsYVtlXSk7cmV0dXJuIGx9LEc9KGwsYSk9Pl90KGwsTnQoYSkpO3ZhciBndD0obCxhKT0+e3ZhciBlPXt9O2Zvcih2YXIgbiBpbiBsKWl0LmNhbGwobCxuKSYmYS5pbmRleE9mKG4pPDAmJihlW25dPWxbbl0pO2lmKGwhPW51bGwmJlkpZm9yKHZhciBuIG9mIFkobCkpYS5pbmRleE9mKG4pPDAmJmx0LmNhbGwobCxuKSYmKGVbbl09bFtuXSk7cmV0dXJuIGV9O2ltcG9ydHtFdmVudFR5cGUgYXMgUn1mcm9tXCJAYWctdWkvY29yZVwiO2ltcG9ydHttZXJnZUFsbCBhcyBMdCxkZWZhdWx0SWZFbXB0eSBhcyBPdCxjb25jYXRNYXAgYXMgUHR9ZnJvbVwicnhqcy9vcGVyYXRvcnNcIjtpbXBvcnR7b2YgYXMgRHQsRU1QVFkgYXMgSHR9ZnJvbVwicnhqc1wiO2ltcG9ydHt2NCBhcyB3dH1mcm9tXCJ1dWlkXCI7dmFyIHk9bD0+e2lmKHR5cGVvZiBzdHJ1Y3R1cmVkQ2xvbmU9PVwiZnVuY3Rpb25cIilyZXR1cm4gc3RydWN0dXJlZENsb25lKGwpO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShsKSl9Y2F0Y2goYSl7cmV0dXJuIE4oe30sbCl9fTtmdW5jdGlvbiBSZSgpe3JldHVybiB3dCgpfWltcG9ydHthcHBseVBhdGNoIGFzIGN0fWZyb21cImZhc3QtanNvbi1wYXRjaFwiO2FzeW5jIGZ1bmN0aW9uIHgobCxhLGUsbil7bGV0IHQ9YSxzPWUscjtmb3IobGV0IG8gb2YgbCl0cnl7bGV0IGk9YXdhaXQgbihvLHkodCkseShzKSk7aWYoaT09PXZvaWQgMCljb250aW51ZTtpZihpLm1lc3NhZ2VzIT09dm9pZCAwJiYodD1pLm1lc3NhZ2VzKSxpLnN0YXRlIT09dm9pZCAwJiYocz1pLnN0YXRlKSxyPWkuc3RvcFByb3BhZ2F0aW9uLHI9PT0hMClicmVha31jYXRjaChpKXtwcm9jZXNzLmVudi5OT0RFX0VOVj09PVwidGVzdFwifHxwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRCE9PXZvaWQgMHx8Y29uc29sZS5lcnJvcihcIlN1YnNjcmliZXIgZXJyb3I6XCIsaSk7Y29udGludWV9cmV0dXJuIE4oTihOKHt9LEpTT04uc3RyaW5naWZ5KHQpIT09SlNPTi5zdHJpbmdpZnkoYSk/e21lc3NhZ2VzOnR9Ont9KSxKU09OLnN0cmluZ2lmeShzKSE9PUpTT04uc3RyaW5naWZ5KGUpP3tzdGF0ZTpzfTp7fSksciE9PXZvaWQgMD97c3RvcFByb3BhZ2F0aW9uOnJ9Ont9KX1pbXBvcnQgR3QgZnJvbVwidW50cnVuY2F0ZS1qc29uXCI7dmFyICQ9KGwsYSxlLG4pPT57bGV0IHQ9eShlLm1lc3NhZ2VzKSxzPXkobC5zdGF0ZSkscj17fSxvPWQ9PntkLm1lc3NhZ2VzIT09dm9pZCAwJiYodD1kLm1lc3NhZ2VzLHIubWVzc2FnZXM9ZC5tZXNzYWdlcyksZC5zdGF0ZSE9PXZvaWQgMCYmKHM9ZC5zdGF0ZSxyLnN0YXRlPWQuc3RhdGUpfSxpPSgpPT57bGV0IGQ9eShyKTtyZXR1cm4gcj17fSxkLm1lc3NhZ2VzIT09dm9pZCAwfHxkLnN0YXRlIT09dm9pZCAwP0R0KGQpOkh0fTtyZXR1cm4gYS5waXBlKFB0KGFzeW5jIGQ9Pnt2YXIgVCx2LGMsYixVO2xldCBJPWF3YWl0IHgobix0LHMsKEUsZyxwKT0+e3ZhciBtO3JldHVybihtPUUub25FdmVudCk9PW51bGw/dm9pZCAwOm0uY2FsbChFLHtldmVudDpkLGFnZW50OmUsaW5wdXQ6bCxtZXNzYWdlczpnLHN0YXRlOnB9KX0pO2lmKG8oSSksSS5zdG9wUHJvcGFnYXRpb249PT0hMClyZXR1cm4gaSgpO3N3aXRjaChkLnR5cGUpe2Nhc2UgUi5URVhUX01FU1NBR0VfU1RBUlQ6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25UZXh0TWVzc2FnZVN0YXJ0RXZlbnQpPT1udWxsP3ZvaWQgMDp1LmNhbGwoZyx7ZXZlbnQ6ZCxtZXNzYWdlczpwLHN0YXRlOm0sYWdlbnQ6ZSxpbnB1dDpsfSl9KTtpZihvKEUpLEUuc3RvcFByb3BhZ2F0aW9uIT09ITApe2xldHttZXNzYWdlSWQ6Zyxyb2xlOnA9XCJhc3Npc3RhbnRcIn09ZCxtPXtpZDpnLHJvbGU6cCxjb250ZW50OlwiXCJ9O3QucHVzaChtKSxvKHttZXNzYWdlczp0fSl9cmV0dXJuIGkoKX1jYXNlIFIuVEVYVF9NRVNTQUdFX0NPTlRFTlQ6e2xldHttZXNzYWdlSWQ6RSxkZWx0YTpnfT1kLHA9dC5maW5kKHU9PnUuaWQ9PT1FKTtpZighcClyZXR1cm4gY29uc29sZS53YXJuKGBURVhUX01FU1NBR0VfQ09OVEVOVDogTm8gbWVzc2FnZSBmb3VuZCB3aXRoIElEICcke0V9J2ApLGkoKTtsZXQgbT1hd2FpdCB4KG4sdCxzLCh1LEEsaCk9Pnt2YXIgXztyZXR1cm4oXz11Lm9uVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQpPT1udWxsP3ZvaWQgMDpfLmNhbGwodSx7ZXZlbnQ6ZCxtZXNzYWdlczpBLHN0YXRlOmgsYWdlbnQ6ZSxpbnB1dDpsLHRleHRNZXNzYWdlQnVmZmVyOnR5cGVvZiBwLmNvbnRlbnQ9PVwic3RyaW5nXCI/cC5jb250ZW50OlwiXCJ9KX0pO2lmKG8obSksbS5zdG9wUHJvcGFnYXRpb24hPT0hMCl7bGV0IHU9dHlwZW9mIHAuY29udGVudD09XCJzdHJpbmdcIj9wLmNvbnRlbnQ6XCJcIjtwLmNvbnRlbnQ9YCR7dX0ke2d9YCxvKHttZXNzYWdlczp0fSl9cmV0dXJuIGkoKX1jYXNlIFIuVEVYVF9NRVNTQUdFX0VORDp7bGV0e21lc3NhZ2VJZDpFfT1kLGc9dC5maW5kKG09Pm0uaWQ9PT1FKTtpZighZylyZXR1cm4gY29uc29sZS53YXJuKGBURVhUX01FU1NBR0VfRU5EOiBObyBtZXNzYWdlIGZvdW5kIHdpdGggSUQgJyR7RX0nYCksaSgpO2xldCBwPWF3YWl0IHgobix0LHMsKG0sdSxBKT0+e3ZhciBoO3JldHVybihoPW0ub25UZXh0TWVzc2FnZUVuZEV2ZW50KT09bnVsbD92b2lkIDA6aC5jYWxsKG0se2V2ZW50OmQsbWVzc2FnZXM6dSxzdGF0ZTpBLGFnZW50OmUsaW5wdXQ6bCx0ZXh0TWVzc2FnZUJ1ZmZlcjp0eXBlb2YgZy5jb250ZW50PT1cInN0cmluZ1wiP2cuY29udGVudDpcIlwifSl9KTtyZXR1cm4gbyhwKSxhd2FpdCBQcm9taXNlLmFsbChuLm1hcChtPT57dmFyIHU7KHU9bS5vbk5ld01lc3NhZ2UpPT1udWxsfHx1LmNhbGwobSx7bWVzc2FnZTpnLG1lc3NhZ2VzOnQsc3RhdGU6cyxhZ2VudDplLGlucHV0Omx9KX0pKSxpKCl9Y2FzZSBSLlRPT0xfQ0FMTF9TVEFSVDp7bGV0IEU9YXdhaXQgeChuLHQscywoZyxwLG0pPT57dmFyIHU7cmV0dXJuKHU9Zy5vblRvb2xDYWxsU3RhcnRFdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO2lmKG8oRSksRS5zdG9wUHJvcGFnYXRpb24hPT0hMCl7bGV0e3Rvb2xDYWxsSWQ6Zyx0b29sQ2FsbE5hbWU6cCxwYXJlbnRNZXNzYWdlSWQ6bX09ZCx1O20mJnQubGVuZ3RoPjAmJnRbdC5sZW5ndGgtMV0uaWQ9PT1tP3U9dFt0Lmxlbmd0aC0xXToodT17aWQ6bXx8Zyxyb2xlOlwiYXNzaXN0YW50XCIsdG9vbENhbGxzOltdfSx0LnB1c2godSkpLChUPXUudG9vbENhbGxzKSE9bnVsbHx8KHUudG9vbENhbGxzPVtdKSx1LnRvb2xDYWxscy5wdXNoKHtpZDpnLHR5cGU6XCJmdW5jdGlvblwiLGZ1bmN0aW9uOntuYW1lOnAsYXJndW1lbnRzOlwiXCJ9fSksbyh7bWVzc2FnZXM6dH0pfXJldHVybiBpKCl9Y2FzZSBSLlRPT0xfQ0FMTF9BUkdTOntsZXR7dG9vbENhbGxJZDpFLGRlbHRhOmd9PWQscD10LmZpbmQoQT0+e3ZhciBoO3JldHVybihoPUEudG9vbENhbGxzKT09bnVsbD92b2lkIDA6aC5zb21lKF89Pl8uaWQ9PT1FKX0pO2lmKCFwKXJldHVybiBjb25zb2xlLndhcm4oYFRPT0xfQ0FMTF9BUkdTOiBObyBtZXNzYWdlIGZvdW5kIGNvbnRhaW5pbmcgdG9vbCBjYWxsIHdpdGggSUQgJyR7RX0nYCksaSgpO2xldCBtPXAudG9vbENhbGxzLmZpbmQoQT0+QS5pZD09PUUpO2lmKCFtKXJldHVybiBjb25zb2xlLndhcm4oYFRPT0xfQ0FMTF9BUkdTOiBObyB0b29sIGNhbGwgZm91bmQgd2l0aCBJRCAnJHtFfSdgKSxpKCk7bGV0IHU9YXdhaXQgeChuLHQscywoQSxoLF8pPT57dmFyIFo7bGV0IEg9bS5mdW5jdGlvbi5hcmd1bWVudHMsRj1tLmZ1bmN0aW9uLm5hbWUsWD17fTt0cnl7WD1HdChIKX1jYXRjaCh5ZSl7fXJldHVybihaPUEub25Ub29sQ2FsbEFyZ3NFdmVudCk9PW51bGw/dm9pZCAwOlouY2FsbChBLHtldmVudDpkLG1lc3NhZ2VzOmgsc3RhdGU6XyxhZ2VudDplLGlucHV0OmwsdG9vbENhbGxCdWZmZXI6SCx0b29sQ2FsbE5hbWU6RixwYXJ0aWFsVG9vbENhbGxBcmdzOlh9KX0pO3JldHVybiBvKHUpLHUuc3RvcFByb3BhZ2F0aW9uIT09ITAmJihtLmZ1bmN0aW9uLmFyZ3VtZW50cys9ZyxvKHttZXNzYWdlczp0fSkpLGkoKX1jYXNlIFIuVE9PTF9DQUxMX0VORDp7bGV0e3Rvb2xDYWxsSWQ6RX09ZCxnPXQuZmluZCh1PT57dmFyIEE7cmV0dXJuKEE9dS50b29sQ2FsbHMpPT1udWxsP3ZvaWQgMDpBLnNvbWUoaD0+aC5pZD09PUUpfSk7aWYoIWcpcmV0dXJuIGNvbnNvbGUud2FybihgVE9PTF9DQUxMX0VORDogTm8gbWVzc2FnZSBmb3VuZCBjb250YWluaW5nIHRvb2wgY2FsbCB3aXRoIElEICcke0V9J2ApLGkoKTtsZXQgcD1nLnRvb2xDYWxscy5maW5kKHU9PnUuaWQ9PT1FKTtpZighcClyZXR1cm4gY29uc29sZS53YXJuKGBUT09MX0NBTExfRU5EOiBObyB0b29sIGNhbGwgZm91bmQgd2l0aCBJRCAnJHtFfSdgKSxpKCk7bGV0IG09YXdhaXQgeChuLHQscywodSxBLGgpPT57dmFyIFg7bGV0IF89cC5mdW5jdGlvbi5hcmd1bWVudHMsSD1wLmZ1bmN0aW9uLm5hbWUsRj17fTt0cnl7Rj1KU09OLnBhcnNlKF8pfWNhdGNoKFope31yZXR1cm4oWD11Lm9uVG9vbENhbGxFbmRFdmVudCk9PW51bGw/dm9pZCAwOlguY2FsbCh1LHtldmVudDpkLG1lc3NhZ2VzOkEsc3RhdGU6aCxhZ2VudDplLGlucHV0OmwsdG9vbENhbGxOYW1lOkgsdG9vbENhbGxBcmdzOkZ9KX0pO3JldHVybiBvKG0pLGF3YWl0IFByb21pc2UuYWxsKG4ubWFwKHU9Pnt2YXIgQTsoQT11Lm9uTmV3VG9vbENhbGwpPT1udWxsfHxBLmNhbGwodSx7dG9vbENhbGw6cCxtZXNzYWdlczp0LHN0YXRlOnMsYWdlbnQ6ZSxpbnB1dDpsfSl9KSksaSgpfWNhc2UgUi5UT09MX0NBTExfUkVTVUxUOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uVG9vbENhbGxSZXN1bHRFdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO2lmKG8oRSksRS5zdG9wUHJvcGFnYXRpb24hPT0hMCl7bGV0e21lc3NhZ2VJZDpnLHRvb2xDYWxsSWQ6cCxjb250ZW50Om0scm9sZTp1fT1kLEE9e2lkOmcsdG9vbENhbGxJZDpwLHJvbGU6dXx8XCJ0b29sXCIsY29udGVudDptfTt0LnB1c2goQSksYXdhaXQgUHJvbWlzZS5hbGwobi5tYXAoaD0+e3ZhciBfOyhfPWgub25OZXdNZXNzYWdlKT09bnVsbHx8Xy5jYWxsKGgse21lc3NhZ2U6QSxtZXNzYWdlczp0LHN0YXRlOnMsYWdlbnQ6ZSxpbnB1dDpsfSl9KSksbyh7bWVzc2FnZXM6dH0pfXJldHVybiBpKCl9Y2FzZSBSLlNUQVRFX1NOQVBTSE9UOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uU3RhdGVTbmFwc2hvdEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7aWYobyhFKSxFLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXR7c25hcHNob3Q6Z309ZDtzPWcsbyh7c3RhdGU6c30pfXJldHVybiBpKCl9Y2FzZSBSLlNUQVRFX0RFTFRBOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uU3RhdGVEZWx0YUV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7aWYobyhFKSxFLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXR7ZGVsdGE6Z309ZDt0cnl7cz1jdChzLGcsITAsITEpLm5ld0RvY3VtZW50LG8oe3N0YXRlOnN9KX1jYXRjaChwKXtsZXQgbT1wIGluc3RhbmNlb2YgRXJyb3I/cC5tZXNzYWdlOlN0cmluZyhwKTtjb25zb2xlLndhcm4oYEZhaWxlZCB0byBhcHBseSBzdGF0ZSBwYXRjaDpcbkN1cnJlbnQgc3RhdGU6ICR7SlNPTi5zdHJpbmdpZnkocyxudWxsLDIpfVxuUGF0Y2ggb3BlcmF0aW9uczogJHtKU09OLnN0cmluZ2lmeShnLG51bGwsMil9XG5FcnJvcjogJHttfWApfX1yZXR1cm4gaSgpfWNhc2UgUi5NRVNTQUdFU19TTkFQU0hPVDp7bGV0IEU9YXdhaXQgeChuLHQscywoZyxwLG0pPT57dmFyIHU7cmV0dXJuKHU9Zy5vbk1lc3NhZ2VzU25hcHNob3RFdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO2lmKG8oRSksRS5zdG9wUHJvcGFnYXRpb24hPT0hMCl7bGV0e21lc3NhZ2VzOmd9PWQ7dD1nLG8oe21lc3NhZ2VzOnR9KX1yZXR1cm4gaSgpfWNhc2UgUi5BQ1RJVklUWV9TTkFQU0hPVDp7bGV0IEU9ZCxnPXQuZmluZEluZGV4KGg9PmguaWQ9PT1FLm1lc3NhZ2VJZCkscD1nPj0wP3RbZ106dm9pZCAwLG09KHA9PW51bGw/dm9pZCAwOnAucm9sZSk9PT1cImFjdGl2aXR5XCI/cDp2b2lkIDAsdT0odj1FLnJlcGxhY2UpIT1udWxsP3Y6ITAsQT1hd2FpdCB4KG4sdCxzLChoLF8sSCk9Pnt2YXIgRjtyZXR1cm4oRj1oLm9uQWN0aXZpdHlTbmFwc2hvdEV2ZW50KT09bnVsbD92b2lkIDA6Ri5jYWxsKGgse2V2ZW50OkUsbWVzc2FnZXM6XyxzdGF0ZTpILGFnZW50OmUsaW5wdXQ6bCxhY3Rpdml0eU1lc3NhZ2U6bSxleGlzdGluZ01lc3NhZ2U6cH0pfSk7aWYobyhBKSxBLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXQgaD17aWQ6RS5tZXNzYWdlSWQscm9sZTpcImFjdGl2aXR5XCIsYWN0aXZpdHlUeXBlOkUuYWN0aXZpdHlUeXBlLGNvbnRlbnQ6eShFLmNvbnRlbnQpfSxfO2c9PT0tMT8odC5wdXNoKGgpLF89aCk6bT91JiYodFtnXT1HKE4oe30sbSkse2FjdGl2aXR5VHlwZTpFLmFjdGl2aXR5VHlwZSxjb250ZW50OnkoRS5jb250ZW50KX0pKTp1JiYodFtnXT1oLF89aCksbyh7bWVzc2FnZXM6dH0pLF8mJmF3YWl0IFByb21pc2UuYWxsKG4ubWFwKEg9Pnt2YXIgRjtyZXR1cm4oRj1ILm9uTmV3TWVzc2FnZSk9PW51bGw/dm9pZCAwOkYuY2FsbChILHttZXNzYWdlOl8sbWVzc2FnZXM6dCxzdGF0ZTpzLGFnZW50OmUsaW5wdXQ6bH0pfSkpfXJldHVybiBpKCl9Y2FzZSBSLkFDVElWSVRZX0RFTFRBOntsZXQgRT1kLGc9dC5maW5kSW5kZXgoQT0+QS5pZD09PUUubWVzc2FnZUlkKTtpZihnPT09LTEpcmV0dXJuIGNvbnNvbGUud2FybihgQUNUSVZJVFlfREVMVEE6IE5vIG1lc3NhZ2UgZm91bmQgd2l0aCBJRCAnJHtFLm1lc3NhZ2VJZH0nIHRvIGFwcGx5IHBhdGNoYCksaSgpO2xldCBwPXRbZ107aWYocC5yb2xlIT09XCJhY3Rpdml0eVwiKXJldHVybiBjb25zb2xlLndhcm4oYEFDVElWSVRZX0RFTFRBOiBNZXNzYWdlICcke0UubWVzc2FnZUlkfScgaXMgbm90IGFuIGFjdGl2aXR5IG1lc3NhZ2VgKSxpKCk7bGV0IG09cCx1PWF3YWl0IHgobix0LHMsKEEsaCxfKT0+e3ZhciBIO3JldHVybihIPUEub25BY3Rpdml0eURlbHRhRXZlbnQpPT1udWxsP3ZvaWQgMDpILmNhbGwoQSx7ZXZlbnQ6RSxtZXNzYWdlczpoLHN0YXRlOl8sYWdlbnQ6ZSxpbnB1dDpsLGFjdGl2aXR5TWVzc2FnZTptfSl9KTtpZihvKHUpLHUuc3RvcFByb3BhZ2F0aW9uIT09ITApdHJ5e2xldCBBPXkoKGM9bS5jb250ZW50KSE9bnVsbD9jOnt9KSxfPWN0KEEsKGI9RS5wYXRjaCkhPW51bGw/YjpbXSwhMCwhMSkubmV3RG9jdW1lbnQ7dFtnXT1HKE4oe30sbSkse2NvbnRlbnQ6eShfKSxhY3Rpdml0eVR5cGU6RS5hY3Rpdml0eVR5cGV9KSxvKHttZXNzYWdlczp0fSl9Y2F0Y2goQSl7bGV0IGg9QSBpbnN0YW5jZW9mIEVycm9yP0EubWVzc2FnZTpTdHJpbmcoQSk7Y29uc29sZS53YXJuKGBGYWlsZWQgdG8gYXBwbHkgYWN0aXZpdHkgcGF0Y2ggZm9yICcke0UubWVzc2FnZUlkfSc6ICR7aH1gKX1yZXR1cm4gaSgpfWNhc2UgUi5SQVc6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25SYXdFdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO3JldHVybiBvKEUpLGkoKX1jYXNlIFIuQ1VTVE9NOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uQ3VzdG9tRXZlbnQpPT1udWxsP3ZvaWQgMDp1LmNhbGwoZyx7ZXZlbnQ6ZCxtZXNzYWdlczpwLHN0YXRlOm0sYWdlbnQ6ZSxpbnB1dDpsfSl9KTtyZXR1cm4gbyhFKSxpKCl9Y2FzZSBSLlJVTl9TVEFSVEVEOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uUnVuU3RhcnRlZEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7aWYobyhFKSxFLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXQgZz1kO2lmKChVPWcuaW5wdXQpIT1udWxsJiZVLm1lc3NhZ2VzKXtmb3IobGV0IHAgb2YgZy5pbnB1dC5tZXNzYWdlcyl0LmZpbmQodT0+dS5pZD09PXAuaWQpfHx0LnB1c2gocCk7byh7bWVzc2FnZXM6dH0pfX1yZXR1cm4gaSgpfWNhc2UgUi5SVU5fRklOSVNIRUQ6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25SdW5GaW5pc2hlZEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bCxyZXN1bHQ6ZC5yZXN1bHR9KX0pO3JldHVybiBvKEUpLGkoKX1jYXNlIFIuUlVOX0VSUk9SOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uUnVuRXJyb3JFdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO3JldHVybiBvKEUpLGkoKX1jYXNlIFIuU1RFUF9TVEFSVEVEOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uU3RlcFN0YXJ0ZWRFdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO3JldHVybiBvKEUpLGkoKX1jYXNlIFIuU1RFUF9GSU5JU0hFRDp7bGV0IEU9YXdhaXQgeChuLHQscywoZyxwLG0pPT57dmFyIHU7cmV0dXJuKHU9Zy5vblN0ZXBGaW5pc2hlZEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7cmV0dXJuIG8oRSksaSgpfWNhc2UgUi5URVhUX01FU1NBR0VfQ0hVTks6dGhyb3cgbmV3IEVycm9yKFwiVEVYVF9NRVNTQUdFX0NIVU5LIG11c3QgYmUgdHJhbmZvcm1lZCBiZWZvcmUgYmVpbmcgYXBwbGllZFwiKTtjYXNlIFIuVE9PTF9DQUxMX0NIVU5LOnRocm93IG5ldyBFcnJvcihcIlRPT0xfQ0FMTF9DSFVOSyBtdXN0IGJlIHRyYW5mb3JtZWQgYmVmb3JlIGJlaW5nIGFwcGxpZWRcIik7Y2FzZSBSLlRISU5LSU5HX1NUQVJUOnJldHVybiBpKCk7Y2FzZSBSLlRISU5LSU5HX0VORDpyZXR1cm4gaSgpO2Nhc2UgUi5USElOS0lOR19URVhUX01FU1NBR0VfU1RBUlQ6cmV0dXJuIGkoKTtjYXNlIFIuVEhJTktJTkdfVEVYVF9NRVNTQUdFX0NPTlRFTlQ6cmV0dXJuIGkoKTtjYXNlIFIuVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORDpyZXR1cm4gaSgpfWxldCBTPWQudHlwZTtyZXR1cm4gaSgpfSksTHQoKSxuLmxlbmd0aD4wP090KHt9KTpkPT5kKX07aW1wb3J0e0V2ZW50VHlwZSBhcyB3LEFHVUlFcnJvciBhcyBMfWZyb21cIkBhZy11aS9jb3JlXCI7aW1wb3J0e3Rocm93RXJyb3IgYXMgTyxvZiBhcyBQfWZyb21cInJ4anNcIjtpbXBvcnR7bWVyZ2VNYXAgYXMgYnR9ZnJvbVwicnhqcy9vcGVyYXRvcnNcIjt2YXIgej1sPT5hPT57bGV0IGU9bmV3IE1hcCxuPW5ldyBNYXAsdD0hMSxzPSExLHI9ITEsbz1uZXcgTWFwLGk9ITEsZD0hMSxJPSExLFM9KCk9PntlLmNsZWFyKCksbi5jbGVhcigpLG8uY2xlYXIoKSxpPSExLGQ9ITEsdD0hMSxzPSExLEk9ITB9O3JldHVybiBhLnBpcGUoYnQoVD0+e2xldCB2PVQudHlwZTtpZihsJiZjb25zb2xlLmRlYnVnKFwiW1ZFUklGWV06XCIsSlNPTi5zdHJpbmdpZnkoVCkpLHMpcmV0dXJuIE8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCBldmVudCB0eXBlICcke3Z9JzogVGhlIHJ1biBoYXMgYWxyZWFkeSBlcnJvcmVkIHdpdGggJ1JVTl9FUlJPUicuIE5vIGZ1cnRoZXIgZXZlbnRzIGNhbiBiZSBzZW50LmApKTtpZih0JiZ2IT09dy5SVU5fRVJST1ImJnYhPT13LlJVTl9TVEFSVEVEKXJldHVybiBPKCgpPT5uZXcgTChgQ2Fubm90IHNlbmQgZXZlbnQgdHlwZSAnJHt2fSc6IFRoZSBydW4gaGFzIGFscmVhZHkgZmluaXNoZWQgd2l0aCAnUlVOX0ZJTklTSEVEJy4gU3RhcnQgYSBuZXcgcnVuIHdpdGggJ1JVTl9TVEFSVEVEJy5gKSk7aWYocil7aWYodj09PXcuUlVOX1NUQVJURUQpe2lmKEkmJiF0KXJldHVybiBPKCgpPT5uZXcgTChcIkNhbm5vdCBzZW5kICdSVU5fU1RBUlRFRCcgd2hpbGUgYSBydW4gaXMgc3RpbGwgYWN0aXZlLiBUaGUgcHJldmlvdXMgcnVuIG11c3QgYmUgZmluaXNoZWQgd2l0aCAnUlVOX0ZJTklTSEVEJyBiZWZvcmUgc3RhcnRpbmcgYSBuZXcgcnVuLlwiKSk7dCYmUygpfX1lbHNlIGlmKHI9ITAsdiE9PXcuUlVOX1NUQVJURUQmJnYhPT13LlJVTl9FUlJPUilyZXR1cm4gTygoKT0+bmV3IEwoXCJGaXJzdCBldmVudCBtdXN0IGJlICdSVU5fU1RBUlRFRCdcIikpO3N3aXRjaCh2KXtjYXNlIHcuVEVYVF9NRVNTQUdFX1NUQVJUOntsZXQgYz1ULm1lc3NhZ2VJZDtyZXR1cm4gZS5oYXMoYyk/TygoKT0+bmV3IEwoYENhbm5vdCBzZW5kICdURVhUX01FU1NBR0VfU1RBUlQnIGV2ZW50OiBBIHRleHQgbWVzc2FnZSB3aXRoIElEICcke2N9JyBpcyBhbHJlYWR5IGluIHByb2dyZXNzLiBDb21wbGV0ZSBpdCB3aXRoICdURVhUX01FU1NBR0VfRU5EJyBmaXJzdC5gKSk6KGUuc2V0KGMsITApLFAoVCkpfWNhc2Ugdy5URVhUX01FU1NBR0VfQ09OVEVOVDp7bGV0IGM9VC5tZXNzYWdlSWQ7cmV0dXJuIGUuaGFzKGMpP1AoVCk6TygoKT0+bmV3IEwoYENhbm5vdCBzZW5kICdURVhUX01FU1NBR0VfQ09OVEVOVCcgZXZlbnQ6IE5vIGFjdGl2ZSB0ZXh0IG1lc3NhZ2UgZm91bmQgd2l0aCBJRCAnJHtjfScuIFN0YXJ0IGEgdGV4dCBtZXNzYWdlIHdpdGggJ1RFWFRfTUVTU0FHRV9TVEFSVCcgZmlyc3QuYCkpfWNhc2Ugdy5URVhUX01FU1NBR0VfRU5EOntsZXQgYz1ULm1lc3NhZ2VJZDtyZXR1cm4gZS5oYXMoYyk/KGUuZGVsZXRlKGMpLFAoVCkpOk8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCAnVEVYVF9NRVNTQUdFX0VORCcgZXZlbnQ6IE5vIGFjdGl2ZSB0ZXh0IG1lc3NhZ2UgZm91bmQgd2l0aCBJRCAnJHtjfScuIEEgJ1RFWFRfTUVTU0FHRV9TVEFSVCcgZXZlbnQgbXVzdCBiZSBzZW50IGZpcnN0LmApKX1jYXNlIHcuVE9PTF9DQUxMX1NUQVJUOntsZXQgYz1ULnRvb2xDYWxsSWQ7cmV0dXJuIG4uaGFzKGMpP08oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCAnVE9PTF9DQUxMX1NUQVJUJyBldmVudDogQSB0b29sIGNhbGwgd2l0aCBJRCAnJHtjfScgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4gQ29tcGxldGUgaXQgd2l0aCAnVE9PTF9DQUxMX0VORCcgZmlyc3QuYCkpOihuLnNldChjLCEwKSxQKFQpKX1jYXNlIHcuVE9PTF9DQUxMX0FSR1M6e2xldCBjPVQudG9vbENhbGxJZDtyZXR1cm4gbi5oYXMoYyk/UChUKTpPKCgpPT5uZXcgTChgQ2Fubm90IHNlbmQgJ1RPT0xfQ0FMTF9BUkdTJyBldmVudDogTm8gYWN0aXZlIHRvb2wgY2FsbCBmb3VuZCB3aXRoIElEICcke2N9Jy4gU3RhcnQgYSB0b29sIGNhbGwgd2l0aCAnVE9PTF9DQUxMX1NUQVJUJyBmaXJzdC5gKSl9Y2FzZSB3LlRPT0xfQ0FMTF9FTkQ6e2xldCBjPVQudG9vbENhbGxJZDtyZXR1cm4gbi5oYXMoYyk/KG4uZGVsZXRlKGMpLFAoVCkpOk8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCAnVE9PTF9DQUxMX0VORCcgZXZlbnQ6IE5vIGFjdGl2ZSB0b29sIGNhbGwgZm91bmQgd2l0aCBJRCAnJHtjfScuIEEgJ1RPT0xfQ0FMTF9TVEFSVCcgZXZlbnQgbXVzdCBiZSBzZW50IGZpcnN0LmApKX1jYXNlIHcuU1RFUF9TVEFSVEVEOntsZXQgYz1ULnN0ZXBOYW1lO3JldHVybiBvLmhhcyhjKT9PKCgpPT5uZXcgTChgU3RlcCBcIiR7Y31cIiBpcyBhbHJlYWR5IGFjdGl2ZSBmb3IgJ1NURVBfU1RBUlRFRCdgKSk6KG8uc2V0KGMsITApLFAoVCkpfWNhc2Ugdy5TVEVQX0ZJTklTSEVEOntsZXQgYz1ULnN0ZXBOYW1lO3JldHVybiBvLmhhcyhjKT8oby5kZWxldGUoYyksUChUKSk6TygoKT0+bmV3IEwoYENhbm5vdCBzZW5kICdTVEVQX0ZJTklTSEVEJyBmb3Igc3RlcCBcIiR7Y31cIiB0aGF0IHdhcyBub3Qgc3RhcnRlZGApKX1jYXNlIHcuUlVOX1NUQVJURUQ6cmV0dXJuIEk9ITAsUChUKTtjYXNlIHcuUlVOX0ZJTklTSEVEOntpZihvLnNpemU+MCl7bGV0IGM9QXJyYXkuZnJvbShvLmtleXMoKSkuam9pbihcIiwgXCIpO3JldHVybiBPKCgpPT5uZXcgTChgQ2Fubm90IHNlbmQgJ1JVTl9GSU5JU0hFRCcgd2hpbGUgc3RlcHMgYXJlIHN0aWxsIGFjdGl2ZTogJHtjfWApKX1pZihlLnNpemU+MCl7bGV0IGM9QXJyYXkuZnJvbShlLmtleXMoKSkuam9pbihcIiwgXCIpO3JldHVybiBPKCgpPT5uZXcgTChgQ2Fubm90IHNlbmQgJ1JVTl9GSU5JU0hFRCcgd2hpbGUgdGV4dCBtZXNzYWdlcyBhcmUgc3RpbGwgYWN0aXZlOiAke2N9YCkpfWlmKG4uc2l6ZT4wKXtsZXQgYz1BcnJheS5mcm9tKG4ua2V5cygpKS5qb2luKFwiLCBcIik7cmV0dXJuIE8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCAnUlVOX0ZJTklTSEVEJyB3aGlsZSB0b29sIGNhbGxzIGFyZSBzdGlsbCBhY3RpdmU6ICR7Y31gKSl9cmV0dXJuIHQ9ITAsUChUKX1jYXNlIHcuUlVOX0VSUk9SOnJldHVybiBzPSEwLFAoVCk7Y2FzZSB3LkNVU1RPTTpyZXR1cm4gUChUKTtjYXNlIHcuVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUOnJldHVybiBpP2Q/TygoKT0+bmV3IEwoXCJDYW5ub3Qgc2VuZCAnVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUJyBldmVudDogQSB0aGlua2luZyBtZXNzYWdlIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIENvbXBsZXRlIGl0IHdpdGggJ1RISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkQnIGZpcnN0LlwiKSk6KGQ9ITAsUChUKSk6TygoKT0+bmV3IEwoXCJDYW5ub3Qgc2VuZCAnVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUJyBldmVudDogQSB0aGlua2luZyBzdGVwIGlzIG5vdCBpbiBwcm9ncmVzcy4gQ3JlYXRlIG9uZSB3aXRoICdUSElOS0lOR19TVEFSVCcgZmlyc3QuXCIpKTtjYXNlIHcuVEhJTktJTkdfVEVYVF9NRVNTQUdFX0NPTlRFTlQ6cmV0dXJuIGQ/UChUKTpPKCgpPT5uZXcgTChcIkNhbm5vdCBzZW5kICdUSElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVCcgZXZlbnQ6IE5vIGFjdGl2ZSB0aGlua2luZyBtZXNzYWdlIGZvdW5kLiBTdGFydCBhIG1lc3NhZ2Ugd2l0aCAnVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUJyBmaXJzdC5cIikpO2Nhc2Ugdy5USElOS0lOR19URVhUX01FU1NBR0VfRU5EOnJldHVybiBkPyhkPSExLFAoVCkpOk8oKCk9Pm5ldyBMKFwiQ2Fubm90IHNlbmQgJ1RISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkQnIGV2ZW50OiBObyBhY3RpdmUgdGhpbmtpbmcgbWVzc2FnZSBmb3VuZC4gQSAnVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUJyBldmVudCBtdXN0IGJlIHNlbnQgZmlyc3QuXCIpKTtjYXNlIHcuVEhJTktJTkdfU1RBUlQ6cmV0dXJuIGk/TygoKT0+bmV3IEwoXCJDYW5ub3Qgc2VuZCAnVEhJTktJTkdfU1RBUlQnIGV2ZW50OiBBIHRoaW5raW5nIHN0ZXAgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4gRW5kIGl0IHdpdGggJ1RISU5LSU5HX0VORCcgZmlyc3QuXCIpKTooaT0hMCxQKFQpKTtjYXNlIHcuVEhJTktJTkdfRU5EOnJldHVybiBpPyhpPSExLFAoVCkpOk8oKCk9Pm5ldyBMKFwiQ2Fubm90IHNlbmQgJ1RISU5LSU5HX0VORCcgZXZlbnQ6IE5vIGFjdGl2ZSB0aGlua2luZyBzdGVwIGZvdW5kLiBBICdUSElOS0lOR19TVEFSVCcgZXZlbnQgbXVzdCBiZSBzZW50IGZpcnN0LlwiKSk7ZGVmYXVsdDpyZXR1cm4gUChUKX19KSl9O2ltcG9ydHtFdmVudFNjaGVtYXMgYXMgJHR9ZnJvbVwiQGFnLXVpL2NvcmVcIjtpbXBvcnR7U3ViamVjdCBhcyB6dCxSZXBsYXlTdWJqZWN0IGFzIEt0fWZyb21cInJ4anNcIjtpbXBvcnR7T2JzZXJ2YWJsZSBhcyBGdCxmcm9tIGFzIHV0LGRlZmVyIGFzIGt0LHRocm93RXJyb3IgYXMgRXR9ZnJvbVwicnhqc1wiO2ltcG9ydHttZXJnZU1hcCBhcyBCdCxzd2l0Y2hNYXAgYXMgVXR9ZnJvbVwicnhqcy9vcGVyYXRvcnNcIjt2YXIgdHQ9KGwsYSk9Pmt0KCgpPT51dChmZXRjaChsLGEpKSkucGlwZShVdChlPT57dmFyIHM7aWYoIWUub2spe2xldCByPWUuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIil8fFwiXCI7cmV0dXJuIHV0KGUudGV4dCgpKS5waXBlKEJ0KG89PntsZXQgaT1vO2lmKHIuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKXRyeXtpPUpTT04ucGFyc2Uobyl9Y2F0Y2goSSl7fWxldCBkPW5ldyBFcnJvcihgSFRUUCAke2Uuc3RhdHVzfTogJHt0eXBlb2YgaT09XCJzdHJpbmdcIj9pOkpTT04uc3RyaW5naWZ5KGkpfWApO3JldHVybiBkLnN0YXR1cz1lLnN0YXR1cyxkLnBheWxvYWQ9aSxFdCgoKT0+ZCl9KSl9bGV0IG49e3R5cGU6XCJoZWFkZXJzXCIsc3RhdHVzOmUuc3RhdHVzLGhlYWRlcnM6ZS5oZWFkZXJzfSx0PShzPWUuYm9keSk9PW51bGw/dm9pZCAwOnMuZ2V0UmVhZGVyKCk7cmV0dXJuIHQ/bmV3IEZ0KHI9PihyLm5leHQobiksKGFzeW5jKCk9Pnt0cnl7Zm9yKDs7KXtsZXR7ZG9uZTpvLHZhbHVlOml9PWF3YWl0IHQucmVhZCgpO2lmKG8pYnJlYWs7bGV0IGQ9e3R5cGU6XCJkYXRhXCIsZGF0YTppfTtyLm5leHQoZCl9ci5jb21wbGV0ZSgpfWNhdGNoKG8pe3IuZXJyb3Iobyl9fSkoKSwoKT0+e3QuY2FuY2VsKCkuY2F0Y2gobz0+e2lmKChvPT1udWxsP3ZvaWQgMDpvLm5hbWUpIT09XCJBYm9ydEVycm9yXCIpdGhyb3cgb30pfSkpOkV0KCgpPT5uZXcgRXJyb3IoXCJGYWlsZWQgdG8gZ2V0UmVhZGVyKCkgZnJvbSByZXNwb25zZVwiKSl9KSk7aW1wb3J0e1N1YmplY3QgYXMganR9ZnJvbVwicnhqc1wiO3ZhciBldD1sPT57bGV0IGE9bmV3IGp0LGU9bmV3IFRleHREZWNvZGVyKFwidXRmLThcIix7ZmF0YWw6ITF9KSxuPVwiXCI7bC5zdWJzY3JpYmUoe25leHQ6cz0+e2lmKHMudHlwZSE9PVwiaGVhZGVyc1wiJiZzLnR5cGU9PT1cImRhdGFcIiYmcy5kYXRhKXtsZXQgcj1lLmRlY29kZShzLmRhdGEse3N0cmVhbTohMH0pO24rPXI7bGV0IG89bi5zcGxpdCgvXFxuXFxuLyk7bj1vLnBvcCgpfHxcIlwiO2ZvcihsZXQgaSBvZiBvKXQoaSl9fSxlcnJvcjpzPT5hLmVycm9yKHMpLGNvbXBsZXRlOigpPT57biYmKG4rPWUuZGVjb2RlKCksdChuKSksYS5jb21wbGV0ZSgpfX0pO2Z1bmN0aW9uIHQocyl7bGV0IHI9cy5zcGxpdChgXG5gKSxvPVtdO2ZvcihsZXQgaSBvZiByKWkuc3RhcnRzV2l0aChcImRhdGE6IFwiKSYmby5wdXNoKGkuc2xpY2UoNikpO2lmKG8ubGVuZ3RoPjApdHJ5e2xldCBpPW8uam9pbihgXG5gKSxkPUpTT04ucGFyc2UoaSk7YS5uZXh0KGQpfWNhdGNoKGkpe2EuZXJyb3IoaSl9fXJldHVybiBhLmFzT2JzZXJ2YWJsZSgpfTtpbXBvcnR7U3ViamVjdCBhcyBYdH1mcm9tXCJyeGpzXCI7aW1wb3J0KmFzIGR0IGZyb21cIkBhZy11aS9wcm90b1wiO3ZhciBudD1sPT57bGV0IGE9bmV3IFh0LGU9bmV3IFVpbnQ4QXJyYXkoMCk7bC5zdWJzY3JpYmUoe25leHQ6dD0+e2lmKHQudHlwZSE9PVwiaGVhZGVyc1wiJiZ0LnR5cGU9PT1cImRhdGFcIiYmdC5kYXRhKXtsZXQgcz1uZXcgVWludDhBcnJheShlLmxlbmd0aCt0LmRhdGEubGVuZ3RoKTtzLnNldChlLDApLHMuc2V0KHQuZGF0YSxlLmxlbmd0aCksZT1zLG4oKX19LGVycm9yOnQ9PmEuZXJyb3IodCksY29tcGxldGU6KCk9PntpZihlLmxlbmd0aD4wKXRyeXtuKCl9Y2F0Y2godCl7Y29uc29sZS53YXJuKFwiSW5jb21wbGV0ZSBvciBpbnZhbGlkIHByb3RvY29sIGJ1ZmZlciBkYXRhIGF0IHN0cmVhbSBlbmRcIil9YS5jb21wbGV0ZSgpfX0pO2Z1bmN0aW9uIG4oKXtmb3IoO2UubGVuZ3RoPj00Oyl7bGV0IHI9NCtuZXcgRGF0YVZpZXcoZS5idWZmZXIsZS5ieXRlT2Zmc2V0LDQpLmdldFVpbnQzMigwLCExKTtpZihlLmxlbmd0aDxyKWJyZWFrO3RyeXtsZXQgbz1lLnNsaWNlKDQsciksaT1kdC5kZWNvZGUobyk7YS5uZXh0KGkpLGU9ZS5zbGljZShyKX1jYXRjaChvKXtsZXQgaT1vIGluc3RhbmNlb2YgRXJyb3I/by5tZXNzYWdlOlN0cmluZyhvKTthLmVycm9yKG5ldyBFcnJvcihgRmFpbGVkIHRvIGRlY29kZSBwcm90b2NvbCBidWZmZXIgbWVzc2FnZTogJHtpfWApKTtyZXR1cm59fX1yZXR1cm4gYS5hc09ic2VydmFibGUoKX07aW1wb3J0KmFzIHB0IGZyb21cIkBhZy11aS9wcm90b1wiO2ltcG9ydHtFdmVudFR5cGUgYXMgSnR9ZnJvbVwiQGFnLXVpL2NvcmVcIjt2YXIgc3Q9bD0+e2xldCBhPW5ldyB6dCxlPW5ldyBLdCxuPSExO3JldHVybiBsLnN1YnNjcmliZSh7bmV4dDp0PT57ZS5uZXh0KHQpLHQudHlwZT09PVwiaGVhZGVyc1wiJiYhbj8obj0hMCx0LmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpPT09cHQuQUdVSV9NRURJQV9UWVBFP250KGUpLnN1YnNjcmliZSh7bmV4dDpyPT5hLm5leHQociksZXJyb3I6cj0+YS5lcnJvcihyKSxjb21wbGV0ZTooKT0+YS5jb21wbGV0ZSgpfSk6ZXQoZSkuc3Vic2NyaWJlKHtuZXh0OnI9Pnt0cnl7bGV0IG89JHQucGFyc2Uocik7YS5uZXh0KG8pfWNhdGNoKG8pe2EuZXJyb3Iobyl9fSxlcnJvcjpyPT57aWYoKHI9PW51bGw/dm9pZCAwOnIubmFtZSk9PT1cIkFib3J0RXJyb3JcIil7YS5uZXh0KHt0eXBlOkp0LlJVTl9FUlJPUixyYXdFdmVudDpyfSksYS5jb21wbGV0ZSgpO3JldHVybn1yZXR1cm4gYS5lcnJvcihyKX0sY29tcGxldGU6KCk9PmEuY29tcGxldGUoKX0pKTpufHxhLmVycm9yKG5ldyBFcnJvcihcIk5vIGhlYWRlcnMgZXZlbnQgcmVjZWl2ZWQgYmVmb3JlIGRhdGEgZXZlbnRzXCIpKX0sZXJyb3I6dD0+e2UuZXJyb3IodCksYS5lcnJvcih0KX0sY29tcGxldGU6KCk9PntlLmNvbXBsZXRlKCl9fSksYS5hc09ic2VydmFibGUoKX07aW1wb3J0e21lcmdlTWFwIGFzIG9lfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7aW1wb3J0e2FwcGx5UGF0Y2ggYXMgcmV9ZnJvbVwiZmFzdC1qc29uLXBhdGNoXCI7aW1wb3J0e0V2ZW50VHlwZSBhcyBEfWZyb21cIkBhZy11aS9jb3JlXCI7aW1wb3J0e3ogYXMgZn1mcm9tXCJ6b2RcIjt2YXIgQz1mLmVudW0oW1wiVGV4dE1lc3NhZ2VTdGFydFwiLFwiVGV4dE1lc3NhZ2VDb250ZW50XCIsXCJUZXh0TWVzc2FnZUVuZFwiLFwiQWN0aW9uRXhlY3V0aW9uU3RhcnRcIixcIkFjdGlvbkV4ZWN1dGlvbkFyZ3NcIixcIkFjdGlvbkV4ZWN1dGlvbkVuZFwiLFwiQWN0aW9uRXhlY3V0aW9uUmVzdWx0XCIsXCJBZ2VudFN0YXRlTWVzc2FnZVwiLFwiTWV0YUV2ZW50XCIsXCJSdW5TdGFydGVkXCIsXCJSdW5GaW5pc2hlZFwiLFwiUnVuRXJyb3JcIixcIk5vZGVTdGFydGVkXCIsXCJOb2RlRmluaXNoZWRcIl0pLFZ0PWYuZW51bShbXCJMYW5nR3JhcGhJbnRlcnJ1cHRFdmVudFwiLFwiUHJlZGljdFN0YXRlXCIsXCJFeGl0XCJdKSxXdD1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLlRleHRNZXNzYWdlU3RhcnQpLG1lc3NhZ2VJZDpmLnN0cmluZygpLHBhcmVudE1lc3NhZ2VJZDpmLnN0cmluZygpLm9wdGlvbmFsKCkscm9sZTpmLnN0cmluZygpLm9wdGlvbmFsKCl9KSxZdD1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLlRleHRNZXNzYWdlQ29udGVudCksbWVzc2FnZUlkOmYuc3RyaW5nKCksY29udGVudDpmLnN0cmluZygpfSkscXQ9Zi5vYmplY3Qoe3R5cGU6Zi5saXRlcmFsKEMuZW51bS5UZXh0TWVzc2FnZUVuZCksbWVzc2FnZUlkOmYuc3RyaW5nKCl9KSxRdD1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLkFjdGlvbkV4ZWN1dGlvblN0YXJ0KSxhY3Rpb25FeGVjdXRpb25JZDpmLnN0cmluZygpLGFjdGlvbk5hbWU6Zi5zdHJpbmcoKSxwYXJlbnRNZXNzYWdlSWQ6Zi5zdHJpbmcoKS5vcHRpb25hbCgpfSksWnQ9Zi5vYmplY3Qoe3R5cGU6Zi5saXRlcmFsKEMuZW51bS5BY3Rpb25FeGVjdXRpb25BcmdzKSxhY3Rpb25FeGVjdXRpb25JZDpmLnN0cmluZygpLGFyZ3M6Zi5zdHJpbmcoKX0pLHRlPWYub2JqZWN0KHt0eXBlOmYubGl0ZXJhbChDLmVudW0uQWN0aW9uRXhlY3V0aW9uRW5kKSxhY3Rpb25FeGVjdXRpb25JZDpmLnN0cmluZygpfSksZWU9Zi5vYmplY3Qoe3R5cGU6Zi5saXRlcmFsKEMuZW51bS5BY3Rpb25FeGVjdXRpb25SZXN1bHQpLGFjdGlvbk5hbWU6Zi5zdHJpbmcoKSxhY3Rpb25FeGVjdXRpb25JZDpmLnN0cmluZygpLHJlc3VsdDpmLnN0cmluZygpfSksbmU9Zi5vYmplY3Qoe3R5cGU6Zi5saXRlcmFsKEMuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSksdGhyZWFkSWQ6Zi5zdHJpbmcoKSxhZ2VudE5hbWU6Zi5zdHJpbmcoKSxub2RlTmFtZTpmLnN0cmluZygpLHJ1bklkOmYuc3RyaW5nKCksYWN0aXZlOmYuYm9vbGVhbigpLHJvbGU6Zi5zdHJpbmcoKSxzdGF0ZTpmLnN0cmluZygpLHJ1bm5pbmc6Zi5ib29sZWFuKCl9KSxzZT1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLk1ldGFFdmVudCksbmFtZTpWdCx2YWx1ZTpmLmFueSgpfSksYWU9Zi5vYmplY3Qoe3R5cGU6Zi5saXRlcmFsKEMuZW51bS5SdW5FcnJvciksbWVzc2FnZTpmLnN0cmluZygpLGNvZGU6Zi5zdHJpbmcoKS5vcHRpb25hbCgpfSksUW49Zi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsW1d0LFl0LHF0LFF0LFp0LHRlLGVlLG5lLHNlLGFlXSksWm49Zi5vYmplY3Qoe2lkOmYuc3RyaW5nKCkscm9sZTpmLnN0cmluZygpLGNvbnRlbnQ6Zi5zdHJpbmcoKSxwYXJlbnRNZXNzYWdlSWQ6Zi5zdHJpbmcoKS5vcHRpb25hbCgpfSksdHM9Zi5vYmplY3Qoe2lkOmYuc3RyaW5nKCksbmFtZTpmLnN0cmluZygpLGFyZ3VtZW50czpmLmFueSgpLHBhcmVudE1lc3NhZ2VJZDpmLnN0cmluZygpLm9wdGlvbmFsKCl9KSxlcz1mLm9iamVjdCh7aWQ6Zi5zdHJpbmcoKSxyZXN1bHQ6Zi5hbnkoKSxhY3Rpb25FeGVjdXRpb25JZDpmLnN0cmluZygpLGFjdGlvbk5hbWU6Zi5zdHJpbmcoKX0pO2ltcG9ydCBpZSBmcm9tXCJ1bnRydW5jYXRlLWpzb25cIjt2YXIgbGU9bD0+e2lmKHR5cGVvZiBsPT1cInN0cmluZ1wiKXJldHVybiBsO2lmKCFBcnJheS5pc0FycmF5KGwpKXJldHVybjtsZXQgYT1sLmZpbHRlcihlPT5lLnR5cGU9PT1cInRleHRcIikubWFwKGU9PmUudGV4dCkuZmlsdGVyKGU9PmUubGVuZ3RoPjApO2lmKGEubGVuZ3RoIT09MClyZXR1cm4gYS5qb2luKGBcbmApfSxhdD0obCxhLGUpPT5uPT57bGV0IHQ9e30scz0hMCxyPSEwLG89XCJcIixpPW51bGwsZD1udWxsLEk9W10sUz17fSxUPXY9Pnt0eXBlb2Ygdj09XCJvYmplY3RcIiYmdiE9PW51bGwmJihcIm1lc3NhZ2VzXCJpbiB2JiZkZWxldGUgdi5tZXNzYWdlcyx0PXYpfTtyZXR1cm4gbi5waXBlKG9lKHY9Pntzd2l0Y2godi50eXBlKXtjYXNlIEQuVEVYVF9NRVNTQUdFX1NUQVJUOntsZXQgYz12O3JldHVyblt7dHlwZTpDLmVudW0uVGV4dE1lc3NhZ2VTdGFydCxtZXNzYWdlSWQ6Yy5tZXNzYWdlSWQscm9sZTpjLnJvbGV9XX1jYXNlIEQuVEVYVF9NRVNTQUdFX0NPTlRFTlQ6e2xldCBjPXY7cmV0dXJuW3t0eXBlOkMuZW51bS5UZXh0TWVzc2FnZUNvbnRlbnQsbWVzc2FnZUlkOmMubWVzc2FnZUlkLGNvbnRlbnQ6Yy5kZWx0YX1dfWNhc2UgRC5URVhUX01FU1NBR0VfRU5EOntsZXQgYz12O3JldHVyblt7dHlwZTpDLmVudW0uVGV4dE1lc3NhZ2VFbmQsbWVzc2FnZUlkOmMubWVzc2FnZUlkfV19Y2FzZSBELlRPT0xfQ0FMTF9TVEFSVDp7bGV0IGM9djtyZXR1cm4gSS5wdXNoKHtpZDpjLnRvb2xDYWxsSWQsdHlwZTpcImZ1bmN0aW9uXCIsZnVuY3Rpb246e25hbWU6Yy50b29sQ2FsbE5hbWUsYXJndW1lbnRzOlwiXCJ9fSkscj0hMCxTW2MudG9vbENhbGxJZF09Yy50b29sQ2FsbE5hbWUsW3t0eXBlOkMuZW51bS5BY3Rpb25FeGVjdXRpb25TdGFydCxhY3Rpb25FeGVjdXRpb25JZDpjLnRvb2xDYWxsSWQsYWN0aW9uTmFtZTpjLnRvb2xDYWxsTmFtZSxwYXJlbnRNZXNzYWdlSWQ6Yy5wYXJlbnRNZXNzYWdlSWR9XX1jYXNlIEQuVE9PTF9DQUxMX0FSR1M6e2xldCBjPXYsYj1JLmZpbmQoRT0+RS5pZD09PWMudG9vbENhbGxJZCk7aWYoIWIpcmV0dXJuIGNvbnNvbGUud2FybihgVE9PTF9DQUxMX0FSR1M6IE5vIHRvb2wgY2FsbCBmb3VuZCB3aXRoIElEICcke2MudG9vbENhbGxJZH0nYCksW107Yi5mdW5jdGlvbi5hcmd1bWVudHMrPWMuZGVsdGE7bGV0IFU9ITE7aWYoZCl7bGV0IEU9ZC5maW5kKGc9PmcudG9vbD09Yi5mdW5jdGlvbi5uYW1lKTtpZihFKXRyeXtsZXQgZz1KU09OLnBhcnNlKGllKGIuZnVuY3Rpb24uYXJndW1lbnRzKSk7RS50b29sX2FyZ3VtZW50JiZFLnRvb2xfYXJndW1lbnQgaW4gZz8oVChHKE4oe30sdCkse1tFLnN0YXRlX2tleV06Z1tFLnRvb2xfYXJndW1lbnRdfSkpLFU9ITApOkUudG9vbF9hcmd1bWVudHx8KFQoRyhOKHt9LHQpLHtbRS5zdGF0ZV9rZXldOmd9KSksVT0hMCl9Y2F0Y2goZyl7fX1yZXR1cm5be3R5cGU6Qy5lbnVtLkFjdGlvbkV4ZWN1dGlvbkFyZ3MsYWN0aW9uRXhlY3V0aW9uSWQ6Yy50b29sQ2FsbElkLGFyZ3M6Yy5kZWx0YX0sLi4uVT9be3R5cGU6Qy5lbnVtLkFnZW50U3RhdGVNZXNzYWdlLHRocmVhZElkOmwsYWdlbnROYW1lOmUsbm9kZU5hbWU6byxydW5JZDphLHJ1bm5pbmc6cyxyb2xlOlwiYXNzaXN0YW50XCIsc3RhdGU6SlNPTi5zdHJpbmdpZnkodCksYWN0aXZlOnJ9XTpbXV19Y2FzZSBELlRPT0xfQ0FMTF9FTkQ6e2xldCBjPXY7cmV0dXJuW3t0eXBlOkMuZW51bS5BY3Rpb25FeGVjdXRpb25FbmQsYWN0aW9uRXhlY3V0aW9uSWQ6Yy50b29sQ2FsbElkfV19Y2FzZSBELlRPT0xfQ0FMTF9SRVNVTFQ6e2xldCBjPXY7cmV0dXJuW3t0eXBlOkMuZW51bS5BY3Rpb25FeGVjdXRpb25SZXN1bHQsYWN0aW9uRXhlY3V0aW9uSWQ6Yy50b29sQ2FsbElkLHJlc3VsdDpjLmNvbnRlbnQsYWN0aW9uTmFtZTpTW2MudG9vbENhbGxJZF18fFwidW5rbm93blwifV19Y2FzZSBELlJBVzpyZXR1cm5bXTtjYXNlIEQuQ1VTVE9NOntsZXQgYz12O3N3aXRjaChjLm5hbWUpe2Nhc2VcIkV4aXRcIjpzPSExO2JyZWFrO2Nhc2VcIlByZWRpY3RTdGF0ZVwiOmQ9Yy52YWx1ZTticmVha31yZXR1cm5be3R5cGU6Qy5lbnVtLk1ldGFFdmVudCxuYW1lOmMubmFtZSx2YWx1ZTpjLnZhbHVlfV19Y2FzZSBELlNUQVRFX1NOQVBTSE9UOnJldHVybiBUKHYuc25hcHNob3QpLFt7dHlwZTpDLmVudW0uQWdlbnRTdGF0ZU1lc3NhZ2UsdGhyZWFkSWQ6bCxhZ2VudE5hbWU6ZSxub2RlTmFtZTpvLHJ1bklkOmEscnVubmluZzpzLHJvbGU6XCJhc3Npc3RhbnRcIixzdGF0ZTpKU09OLnN0cmluZ2lmeSh0KSxhY3RpdmU6cn1dO2Nhc2UgRC5TVEFURV9ERUxUQTp7bGV0IGI9cmUodCx2LmRlbHRhLCEwLCExKTtyZXR1cm4gYj8oVChiLm5ld0RvY3VtZW50KSxbe3R5cGU6Qy5lbnVtLkFnZW50U3RhdGVNZXNzYWdlLHRocmVhZElkOmwsYWdlbnROYW1lOmUsbm9kZU5hbWU6byxydW5JZDphLHJ1bm5pbmc6cyxyb2xlOlwiYXNzaXN0YW50XCIsc3RhdGU6SlNPTi5zdHJpbmdpZnkodCksYWN0aXZlOnJ9XSk6W119Y2FzZSBELk1FU1NBR0VTX1NOQVBTSE9UOnJldHVybiBpPXYubWVzc2FnZXMsW3t0eXBlOkMuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDpsLGFnZW50TmFtZTplLG5vZGVOYW1lOm8scnVuSWQ6YSxydW5uaW5nOnMscm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KE4oTih7fSx0KSxpP3ttZXNzYWdlczppfTp7fSkpLGFjdGl2ZTohMH1dO2Nhc2UgRC5SVU5fU1RBUlRFRDpyZXR1cm5bXTtjYXNlIEQuUlVOX0ZJTklTSEVEOnJldHVybiBpJiYodC5tZXNzYWdlcz1pKSxPYmplY3Qua2V5cyh0KS5sZW5ndGg9PT0wP1tdOlt7dHlwZTpDLmVudW0uQWdlbnRTdGF0ZU1lc3NhZ2UsdGhyZWFkSWQ6bCxhZ2VudE5hbWU6ZSxub2RlTmFtZTpvLHJ1bklkOmEscnVubmluZzpzLHJvbGU6XCJhc3Npc3RhbnRcIixzdGF0ZTpKU09OLnN0cmluZ2lmeShOKE4oe30sdCksaT97bWVzc2FnZXM6Z2UoaSl9Ont9KSksYWN0aXZlOiExfV07Y2FzZSBELlJVTl9FUlJPUjp7bGV0IGM9djtyZXR1cm5be3R5cGU6Qy5lbnVtLlJ1bkVycm9yLG1lc3NhZ2U6Yy5tZXNzYWdlLGNvZGU6Yy5jb2RlfV19Y2FzZSBELlNURVBfU1RBUlRFRDpyZXR1cm4gbz12LnN0ZXBOYW1lLEk9W10sZD1udWxsLFt7dHlwZTpDLmVudW0uQWdlbnRTdGF0ZU1lc3NhZ2UsdGhyZWFkSWQ6bCxhZ2VudE5hbWU6ZSxub2RlTmFtZTpvLHJ1bklkOmEscnVubmluZzpzLHJvbGU6XCJhc3Npc3RhbnRcIixzdGF0ZTpKU09OLnN0cmluZ2lmeSh0KSxhY3RpdmU6ITB9XTtjYXNlIEQuU1RFUF9GSU5JU0hFRDpyZXR1cm4gST1bXSxkPW51bGwsW3t0eXBlOkMuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDpsLGFnZW50TmFtZTplLG5vZGVOYW1lOm8scnVuSWQ6YSxydW5uaW5nOnMscm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KHQpLGFjdGl2ZTohMX1dO2RlZmF1bHQ6cmV0dXJuW119fSkpfTtmdW5jdGlvbiBnZShsKXt2YXIgZTtsZXQgYT1bXTtmb3IobGV0IG4gb2YgbClpZihuLnJvbGU9PT1cImFzc2lzdGFudFwifHxuLnJvbGU9PT1cInVzZXJcInx8bi5yb2xlPT09XCJzeXN0ZW1cIil7bGV0IHQ9bGUobi5jb250ZW50KTtpZih0KXtsZXQgcz17aWQ6bi5pZCxyb2xlOm4ucm9sZSxjb250ZW50OnR9O2EucHVzaChzKX1pZihuLnJvbGU9PT1cImFzc2lzdGFudFwiJiZuLnRvb2xDYWxscyYmbi50b29sQ2FsbHMubGVuZ3RoPjApZm9yKGxldCBzIG9mIG4udG9vbENhbGxzKXtsZXQgcj17aWQ6cy5pZCxuYW1lOnMuZnVuY3Rpb24ubmFtZSxhcmd1bWVudHM6SlNPTi5wYXJzZShzLmZ1bmN0aW9uLmFyZ3VtZW50cykscGFyZW50TWVzc2FnZUlkOm4uaWR9O2EucHVzaChyKX19ZWxzZSBpZihuLnJvbGU9PT1cInRvb2xcIil7bGV0IHQ9XCJ1bmtub3duXCI7Zm9yKGxldCByIG9mIGwpaWYoci5yb2xlPT09XCJhc3Npc3RhbnRcIiYmKChlPXIudG9vbENhbGxzKSE9bnVsbCYmZS5sZW5ndGgpKXtmb3IobGV0IG8gb2Ygci50b29sQ2FsbHMpaWYoby5pZD09PW4udG9vbENhbGxJZCl7dD1vLmZ1bmN0aW9uLm5hbWU7YnJlYWt9fWxldCBzPXtpZDpuLmlkLHJlc3VsdDpuLmNvbnRlbnQsYWN0aW9uRXhlY3V0aW9uSWQ6bi50b29sQ2FsbElkLGFjdGlvbk5hbWU6dH07YS5wdXNoKHMpfXJldHVybiBhfWltcG9ydHt2NCBhcyBWfWZyb21cInV1aWRcIjtpbXBvcnR7Y29tcGFyZVZlcnNpb25zIGFzIFRlfWZyb21cImNvbXBhcmUtdmVyc2lvbnNcIjtpbXBvcnR7Y2F0Y2hFcnJvciBhcyBmdCxtYXAgYXMgVHQsdGFwIGFzIFNlfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7aW1wb3J0e2ZpbmFsaXplIGFzIFN0fWZyb21cInJ4anMvb3BlcmF0b3JzXCI7aW1wb3J0e3Rha2VVbnRpbCBhcyB2dH1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO2ltcG9ydHtwaXBlIGFzIEF0LGZyb20gYXMgdmUsb2YgYXMgaHQsRU1QVFkgYXMgQWUsU3ViamVjdCBhcyB5dH1mcm9tXCJyeGpzXCI7aW1wb3J0e2xhc3RWYWx1ZUZyb20gYXMgTXR9ZnJvbVwicnhqc1wiO2ltcG9ydHttZXJnZU1hcCBhcyBjZSxmaW5hbGl6ZSBhcyB1ZX1mcm9tXCJyeGpzXCI7aW1wb3J0e0V2ZW50VHlwZSBhcyBNfWZyb21cIkBhZy11aS9jb3JlXCI7dmFyIGo9bD0+YT0+e2xldCBlLG4sdCxzPSgpPT57aWYoIWV8fHQhPT1cInRleHRcIil0aHJvdyBuZXcgRXJyb3IoXCJObyB0ZXh0IG1lc3NhZ2UgdG8gY2xvc2VcIik7bGV0IGk9e3R5cGU6TS5URVhUX01FU1NBR0VfRU5ELG1lc3NhZ2VJZDplLm1lc3NhZ2VJZH07cmV0dXJuIHQ9dm9pZCAwLGU9dm9pZCAwLGwmJmNvbnNvbGUuZGVidWcoXCJbVFJBTlNGT1JNXTogVEVYVF9NRVNTQUdFX0VORFwiLEpTT04uc3RyaW5naWZ5KGkpKSxpfSxyPSgpPT57aWYoIW58fHQhPT1cInRvb2xcIil0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIGNhbGwgdG8gY2xvc2VcIik7bGV0IGk9e3R5cGU6TS5UT09MX0NBTExfRU5ELHRvb2xDYWxsSWQ6bi50b29sQ2FsbElkfTtyZXR1cm4gdD12b2lkIDAsbj12b2lkIDAsbCYmY29uc29sZS5kZWJ1ZyhcIltUUkFOU0ZPUk1dOiBUT09MX0NBTExfRU5EXCIsSlNPTi5zdHJpbmdpZnkoaSkpLGl9LG89KCk9PnQ9PT1cInRleHRcIj9bcygpXTp0PT09XCJ0b29sXCI/W3IoKV06W107cmV0dXJuIGEucGlwZShjZShpPT57c3dpdGNoKGkudHlwZSl7Y2FzZSBNLlRFWFRfTUVTU0FHRV9TVEFSVDpjYXNlIE0uVEVYVF9NRVNTQUdFX0NPTlRFTlQ6Y2FzZSBNLlRFWFRfTUVTU0FHRV9FTkQ6Y2FzZSBNLlRPT0xfQ0FMTF9TVEFSVDpjYXNlIE0uVE9PTF9DQUxMX0FSR1M6Y2FzZSBNLlRPT0xfQ0FMTF9FTkQ6Y2FzZSBNLlRPT0xfQ0FMTF9SRVNVTFQ6Y2FzZSBNLlNUQVRFX1NOQVBTSE9UOmNhc2UgTS5TVEFURV9ERUxUQTpjYXNlIE0uTUVTU0FHRVNfU05BUFNIT1Q6Y2FzZSBNLkNVU1RPTTpjYXNlIE0uUlVOX1NUQVJURUQ6Y2FzZSBNLlJVTl9GSU5JU0hFRDpjYXNlIE0uUlVOX0VSUk9SOmNhc2UgTS5TVEVQX1NUQVJURUQ6Y2FzZSBNLlNURVBfRklOSVNIRUQ6Y2FzZSBNLlRISU5LSU5HX1NUQVJUOmNhc2UgTS5USElOS0lOR19FTkQ6Y2FzZSBNLlRISU5LSU5HX1RFWFRfTUVTU0FHRV9TVEFSVDpjYXNlIE0uVEhJTktJTkdfVEVYVF9NRVNTQUdFX0NPTlRFTlQ6Y2FzZSBNLlRISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkQ6cmV0dXJuWy4uLm8oKSxpXTtjYXNlIE0uUkFXOmNhc2UgTS5BQ1RJVklUWV9TTkFQU0hPVDpjYXNlIE0uQUNUSVZJVFlfREVMVEE6cmV0dXJuW2ldO2Nhc2UgTS5URVhUX01FU1NBR0VfQ0hVTks6bGV0IEk9aSxTPVtdO2lmKCh0IT09XCJ0ZXh0XCJ8fEkubWVzc2FnZUlkIT09dm9pZCAwJiZJLm1lc3NhZ2VJZCE9PShlPT1udWxsP3ZvaWQgMDplLm1lc3NhZ2VJZCkpJiZTLnB1c2goLi4ubygpKSx0IT09XCJ0ZXh0XCIpe2lmKEkubWVzc2FnZUlkPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihcIkZpcnN0IFRFWFRfTUVTU0FHRV9DSFVOSyBtdXN0IGhhdmUgYSBtZXNzYWdlSWRcIik7ZT17bWVzc2FnZUlkOkkubWVzc2FnZUlkfSx0PVwidGV4dFwiO2xldCBjPXt0eXBlOk0uVEVYVF9NRVNTQUdFX1NUQVJULG1lc3NhZ2VJZDpJLm1lc3NhZ2VJZCxyb2xlOkkucm9sZXx8XCJhc3Npc3RhbnRcIn07Uy5wdXNoKGMpLGwmJmNvbnNvbGUuZGVidWcoXCJbVFJBTlNGT1JNXTogVEVYVF9NRVNTQUdFX1NUQVJUXCIsSlNPTi5zdHJpbmdpZnkoYykpfWlmKEkuZGVsdGEhPT12b2lkIDApe2xldCBjPXt0eXBlOk0uVEVYVF9NRVNTQUdFX0NPTlRFTlQsbWVzc2FnZUlkOmUubWVzc2FnZUlkLGRlbHRhOkkuZGVsdGF9O1MucHVzaChjKSxsJiZjb25zb2xlLmRlYnVnKFwiW1RSQU5TRk9STV06IFRFWFRfTUVTU0FHRV9DT05URU5UXCIsSlNPTi5zdHJpbmdpZnkoYykpfXJldHVybiBTO2Nhc2UgTS5UT09MX0NBTExfQ0hVTks6bGV0IFQ9aSx2PVtdO2lmKCh0IT09XCJ0b29sXCJ8fFQudG9vbENhbGxJZCE9PXZvaWQgMCYmVC50b29sQ2FsbElkIT09KG49PW51bGw/dm9pZCAwOm4udG9vbENhbGxJZCkpJiZ2LnB1c2goLi4ubygpKSx0IT09XCJ0b29sXCIpe2lmKFQudG9vbENhbGxJZD09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBUT09MX0NBTExfQ0hVTksgbXVzdCBoYXZlIGEgdG9vbENhbGxJZFwiKTtpZihULnRvb2xDYWxsTmFtZT09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBUT09MX0NBTExfQ0hVTksgbXVzdCBoYXZlIGEgdG9vbENhbGxOYW1lXCIpO249e3Rvb2xDYWxsSWQ6VC50b29sQ2FsbElkLHRvb2xDYWxsTmFtZTpULnRvb2xDYWxsTmFtZSxwYXJlbnRNZXNzYWdlSWQ6VC5wYXJlbnRNZXNzYWdlSWR9LHQ9XCJ0b29sXCI7bGV0IGM9e3R5cGU6TS5UT09MX0NBTExfU1RBUlQsdG9vbENhbGxJZDpULnRvb2xDYWxsSWQsdG9vbENhbGxOYW1lOlQudG9vbENhbGxOYW1lLHBhcmVudE1lc3NhZ2VJZDpULnBhcmVudE1lc3NhZ2VJZH07di5wdXNoKGMpLGwmJmNvbnNvbGUuZGVidWcoXCJbVFJBTlNGT1JNXTogVE9PTF9DQUxMX1NUQVJUXCIsSlNPTi5zdHJpbmdpZnkoYykpfWlmKFQuZGVsdGEhPT12b2lkIDApe2xldCBjPXt0eXBlOk0uVE9PTF9DQUxMX0FSR1MsdG9vbENhbGxJZDpuLnRvb2xDYWxsSWQsZGVsdGE6VC5kZWx0YX07di5wdXNoKGMpLGwmJmNvbnNvbGUuZGVidWcoXCJbVFJBTlNGT1JNXTogVE9PTF9DQUxMX0FSR1NcIixKU09OLnN0cmluZ2lmeShjKSl9cmV0dXJuIHZ9bGV0IGQ9aS50eXBlO3JldHVybltdfSksdWUoKCk9PntvKCl9KSl9O2ltcG9ydHtBR1VJQ29ubmVjdE5vdEltcGxlbWVudGVkRXJyb3IgYXMgQ3R9ZnJvbVwiQGFnLXVpL2NvcmVcIjtpbXBvcnR7UmVwbGF5U3ViamVjdCBhcyBFZX1mcm9tXCJyeGpzXCI7aW1wb3J0e2NvbmNhdE1hcCBhcyBkZX1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO3ZhciBrPWNsYXNze3J1bk5leHQoYSxlKXtyZXR1cm4gZS5ydW4oYSkucGlwZShqKCExKSl9cnVuTmV4dFdpdGhTdGF0ZShhLGUpe2xldCBuPXkoYS5tZXNzYWdlc3x8W10pLHQ9eShhLnN0YXRlfHx7fSkscz1uZXcgRWU7cmV0dXJuICQoYSxzLGUsW10pLnN1YnNjcmliZShvPT57by5tZXNzYWdlcyE9PXZvaWQgMCYmKG49by5tZXNzYWdlcyksby5zdGF0ZSE9PXZvaWQgMCYmKHQ9by5zdGF0ZSl9KSx0aGlzLnJ1bk5leHQoYSxlKS5waXBlKGRlKGFzeW5jIG89PihzLm5leHQobyksYXdhaXQgbmV3IFByb21pc2UoaT0+c2V0VGltZW91dChpLDApKSx7ZXZlbnQ6byxtZXNzYWdlczp5KG4pLHN0YXRlOnkodCl9KSkpfX0sSz1jbGFzcyBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoKTt0aGlzLmZuPWV9cnVuKGUsbil7cmV0dXJuIHRoaXMuZm4oZSxuKX19O2ltcG9ydHtFdmVudFR5cGUgYXMgcX1mcm9tXCJAYWctdWkvY29yZVwiO2ltcG9ydHtmaWx0ZXIgYXMgcGV9ZnJvbVwicnhqcy9vcGVyYXRvcnNcIjt2YXIgUT1jbGFzcyBleHRlbmRzIGt7Y29uc3RydWN0b3IoZSl7c3VwZXIoKTt0aGlzLmJsb2NrZWRUb29sQ2FsbElkcz1uZXcgU2V0O2lmKGUuYWxsb3dlZFRvb2xDYWxscyYmZS5kaXNhbGxvd2VkVG9vbENhbGxzKXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzcGVjaWZ5IGJvdGggYWxsb3dlZFRvb2xDYWxscyBhbmQgZGlzYWxsb3dlZFRvb2xDYWxsc1wiKTtpZighZS5hbGxvd2VkVG9vbENhbGxzJiYhZS5kaXNhbGxvd2VkVG9vbENhbGxzKXRocm93IG5ldyBFcnJvcihcIk11c3Qgc3BlY2lmeSBlaXRoZXIgYWxsb3dlZFRvb2xDYWxscyBvciBkaXNhbGxvd2VkVG9vbENhbGxzXCIpO2UuYWxsb3dlZFRvb2xDYWxscz90aGlzLmFsbG93ZWRUb29scz1uZXcgU2V0KGUuYWxsb3dlZFRvb2xDYWxscyk6ZS5kaXNhbGxvd2VkVG9vbENhbGxzJiYodGhpcy5kaXNhbGxvd2VkVG9vbHM9bmV3IFNldChlLmRpc2FsbG93ZWRUb29sQ2FsbHMpKX1ydW4oZSxuKXtyZXR1cm4gdGhpcy5ydW5OZXh0KGUsbikucGlwZShwZSh0PT57aWYodC50eXBlPT09cS5UT09MX0NBTExfU1RBUlQpe2xldCBzPXQ7cmV0dXJuIHRoaXMuc2hvdWxkRmlsdGVyVG9vbChzLnRvb2xDYWxsTmFtZSk/KHRoaXMuYmxvY2tlZFRvb2xDYWxsSWRzLmFkZChzLnRvb2xDYWxsSWQpLCExKTohMH1pZih0LnR5cGU9PT1xLlRPT0xfQ0FMTF9BUkdTKXtsZXQgcz10O3JldHVybiF0aGlzLmJsb2NrZWRUb29sQ2FsbElkcy5oYXMocy50b29sQ2FsbElkKX1pZih0LnR5cGU9PT1xLlRPT0xfQ0FMTF9FTkQpe2xldCBzPXQ7cmV0dXJuIXRoaXMuYmxvY2tlZFRvb2xDYWxsSWRzLmhhcyhzLnRvb2xDYWxsSWQpfWlmKHQudHlwZT09PXEuVE9PTF9DQUxMX1JFU1VMVCl7bGV0IHM9dDtyZXR1cm4gdGhpcy5ibG9ja2VkVG9vbENhbGxJZHMuaGFzKHMudG9vbENhbGxJZCk/KHRoaXMuYmxvY2tlZFRvb2xDYWxsSWRzLmRlbGV0ZShzLnRvb2xDYWxsSWQpLCExKTohMH1yZXR1cm4hMH0pKX1zaG91bGRGaWx0ZXJUb29sKGUpe3JldHVybiB0aGlzLmFsbG93ZWRUb29scz8hdGhpcy5hbGxvd2VkVG9vbHMuaGFzKGUpOnRoaXMuZGlzYWxsb3dlZFRvb2xzP3RoaXMuZGlzYWxsb3dlZFRvb2xzLmhhcyhlKTohMX19O2Z1bmN0aW9uIG1lKGwpe2xldCBhPWwuY29udGVudDtpZihBcnJheS5pc0FycmF5KGEpKXtsZXQgZT1hLmZpbHRlcihuPT50eXBlb2Ygbj09XCJvYmplY3RcIiYmbiE9PW51bGwmJlwidHlwZVwiaW4gbiYmbi50eXBlPT09XCJ0ZXh0XCImJnR5cGVvZiBuLnRleHQ9PVwic3RyaW5nXCIpLm1hcChuPT5uLnRleHQpLmpvaW4oXCJcIik7cmV0dXJuIEcoTih7fSxsKSx7Y29udGVudDplfSl9cmV0dXJuIHR5cGVvZiBhPT1cInN0cmluZ1wiP2w6RyhOKHt9LGwpLHtjb250ZW50OlwiXCJ9KX12YXIgSj1jbGFzcyBleHRlbmRzIGt7cnVuKGEsZSl7bGV0IHI9YSx7cGFyZW50UnVuSWQ6bn09cix0PWd0KHIsW1wicGFyZW50UnVuSWRcIl0pLHM9RyhOKHt9LHQpLHttZXNzYWdlczp0Lm1lc3NhZ2VzLm1hcChtZSl9KTtyZXR1cm4gdGhpcy5ydW5OZXh0KHMsZSl9fTt2YXIgbXQ9e25hbWU6XCJAYWctdWkvY2xpZW50XCIsYXV0aG9yOlwiTWFya3VzIEVja2VyIDxtYXJrdXMuZWNrZXJAZ21haWwuY29tPlwiLHZlcnNpb246XCIwLjAuNDJcIixwcml2YXRlOiExLHB1Ymxpc2hDb25maWc6e2FjY2VzczpcInB1YmxpY1wifSxtYWluOlwiLi9kaXN0L2luZGV4LmpzXCIsbW9kdWxlOlwiLi9kaXN0L2luZGV4Lm1qc1wiLHR5cGVzOlwiLi9kaXN0L2luZGV4LmQudHNcIixzaWRlRWZmZWN0czohMSxmaWxlczpbXCJkaXN0LyoqXCIsXCJSRUFETUUubWRcIl0sc2NyaXB0czp7YnVpbGQ6XCJ0c3VwXCIsZGV2OlwidHN1cCAtLXdhdGNoXCIsY2xlYW46XCJybSAtcmYgZGlzdCAudHVyYm8gbm9kZV9tb2R1bGVzXCIsdHlwZWNoZWNrOlwidHNjIC0tbm9FbWl0XCIsdGVzdDpcImplc3RcIixcImxpbms6Z2xvYmFsXCI6XCJwbnBtIGxpbmsgLS1nbG9iYWxcIixcInVubGluazpnbG9iYWxcIjpcInBucG0gdW5saW5rIC0tZ2xvYmFsXCJ9LGRlcGVuZGVuY2llczp7XCJAYWctdWkvY29yZVwiOlwid29ya3NwYWNlOipcIixcIkBhZy11aS9lbmNvZGVyXCI6XCJ3b3Jrc3BhY2U6KlwiLFwiQGFnLXVpL3Byb3RvXCI6XCJ3b3Jrc3BhY2U6KlwiLFwiQHR5cGVzL3V1aWRcIjpcIl4xMC4wLjBcIixcImNvbXBhcmUtdmVyc2lvbnNcIjpcIl42LjEuMVwiLFwiZmFzdC1qc29uLXBhdGNoXCI6XCJeMy4xLjFcIixyeGpzOlwiNy44LjFcIixcInVudHJ1bmNhdGUtanNvblwiOlwiXjAuMC4xXCIsdXVpZDpcIl4xMS4xLjBcIix6b2Q6XCJeMy4yMi40XCJ9LGRldkRlcGVuZGVuY2llczp7XCJAdHlwZXMvamVzdFwiOlwiXjI5LjUuMTRcIixcIkB0eXBlcy9ub2RlXCI6XCJeMjAuMTEuMTlcIixqZXN0OlwiXjI5LjcuMFwiLFwidHMtamVzdFwiOlwiXjI5LjEuMlwiLHRzdXA6XCJeOC4wLjJcIix0eXBlc2NyaXB0OlwiXjUuMy4zXCJ9fTt2YXIgVz1jbGFzc3tjb25zdHJ1Y3Rvcih7YWdlbnRJZDphLGRlc2NyaXB0aW9uOmUsdGhyZWFkSWQ6bixpbml0aWFsTWVzc2FnZXM6dCxpbml0aWFsU3RhdGU6cyxkZWJ1ZzpyfT17fSl7dGhpcy5kZWJ1Zz0hMTt0aGlzLnN1YnNjcmliZXJzPVtdO3RoaXMuaXNSdW5uaW5nPSExO3RoaXMubWlkZGxld2FyZXM9W107dGhpcy5hZ2VudElkPWEsdGhpcy5kZXNjcmlwdGlvbj1lIT1udWxsP2U6XCJcIix0aGlzLnRocmVhZElkPW4hPW51bGw/bjpWKCksdGhpcy5tZXNzYWdlcz15KHQhPW51bGw/dDpbXSksdGhpcy5zdGF0ZT15KHMhPW51bGw/czp7fSksdGhpcy5kZWJ1Zz1yIT1udWxsP3I6ITEsVGUodGhpcy5tYXhWZXJzaW9uLFwiMC4wLjM5XCIpPD0wJiZ0aGlzLm1pZGRsZXdhcmVzLnVuc2hpZnQobmV3IEopfWdldCBtYXhWZXJzaW9uKCl7cmV0dXJuIG10LnZlcnNpb259c3Vic2NyaWJlKGEpe3JldHVybiB0aGlzLnN1YnNjcmliZXJzLnB1c2goYSkse3Vuc3Vic2NyaWJlOigpPT57dGhpcy5zdWJzY3JpYmVycz10aGlzLnN1YnNjcmliZXJzLmZpbHRlcihlPT5lIT09YSl9fX11c2UoLi4uYSl7bGV0IGU9YS5tYXAobj0+dHlwZW9mIG49PVwiZnVuY3Rpb25cIj9uZXcgSyhuKTpuKTtyZXR1cm4gdGhpcy5taWRkbGV3YXJlcy5wdXNoKC4uLmUpLHRoaXN9YXN5bmMgcnVuQWdlbnQoYSxlKXt2YXIgbjt0cnl7dGhpcy5pc1J1bm5pbmc9ITAsdGhpcy5hZ2VudElkPShuPXRoaXMuYWdlbnRJZCkhPW51bGw/bjpWKCk7bGV0IHQ9dGhpcy5wcmVwYXJlUnVuQWdlbnRJbnB1dChhKSxzLHI9bmV3IFNldCh0aGlzLm1lc3NhZ2VzLm1hcChTPT5TLmlkKSksbz1be29uUnVuRmluaXNoZWRFdmVudDpTPT57cz1TLnJlc3VsdH19LC4uLnRoaXMuc3Vic2NyaWJlcnMsZSE9bnVsbD9lOnt9XTthd2FpdCB0aGlzLm9uSW5pdGlhbGl6ZSh0LG8pLHRoaXMuYWN0aXZlUnVuRGV0YWNoJD1uZXcgeXQ7bGV0IGk7dGhpcy5hY3RpdmVSdW5Db21wbGV0aW9uUHJvbWlzZT1uZXcgUHJvbWlzZShTPT57aT1TfSk7bGV0IGQ9QXQoKCk9PnRoaXMubWlkZGxld2FyZXMubGVuZ3RoPT09MD90aGlzLnJ1bih0KTp0aGlzLm1pZGRsZXdhcmVzLnJlZHVjZVJpZ2h0KChULHYpPT4oe3J1bjpjPT52LnJ1bihjLFQpfSksdGhpcykucnVuKHQpLGoodGhpcy5kZWJ1Zykseih0aGlzLmRlYnVnKSxTPT5TLnBpcGUodnQodGhpcy5hY3RpdmVSdW5EZXRhY2gkKSksUz0+dGhpcy5hcHBseSh0LFMsbyksUz0+dGhpcy5wcm9jZXNzQXBwbHlFdmVudHModCxTLG8pLGZ0KFM9Pih0aGlzLmlzUnVubmluZz0hMSx0aGlzLm9uRXJyb3IodCxTLG8pKSksU3QoKCk9Pnt0aGlzLmlzUnVubmluZz0hMSx0aGlzLm9uRmluYWxpemUodCxvKSxpPT1udWxsfHxpKCksaT12b2lkIDAsdGhpcy5hY3RpdmVSdW5Db21wbGV0aW9uUHJvbWlzZT12b2lkIDAsdGhpcy5hY3RpdmVSdW5EZXRhY2gkPXZvaWQgMH0pKTthd2FpdCBNdChkKGh0KG51bGwpKSk7bGV0IEk9eSh0aGlzLm1lc3NhZ2VzKS5maWx0ZXIoUz0+IXIuaGFzKFMuaWQpKTtyZXR1cm57cmVzdWx0OnMsbmV3TWVzc2FnZXM6SX19ZmluYWxseXt0aGlzLmlzUnVubmluZz0hMX19Y29ubmVjdChhKXt0aHJvdyBuZXcgQ3R9YXN5bmMgY29ubmVjdEFnZW50KGEsZSl7dmFyIG47dHJ5e3RoaXMuaXNSdW5uaW5nPSEwLHRoaXMuYWdlbnRJZD0obj10aGlzLmFnZW50SWQpIT1udWxsP246VigpO2xldCB0PXRoaXMucHJlcGFyZVJ1bkFnZW50SW5wdXQoYSkscyxyPW5ldyBTZXQodGhpcy5tZXNzYWdlcy5tYXAoUz0+Uy5pZCkpLG89W3tvblJ1bkZpbmlzaGVkRXZlbnQ6Uz0+e3M9Uy5yZXN1bHR9fSwuLi50aGlzLnN1YnNjcmliZXJzLGUhPW51bGw/ZTp7fV07YXdhaXQgdGhpcy5vbkluaXRpYWxpemUodCxvKSx0aGlzLmFjdGl2ZVJ1bkRldGFjaCQ9bmV3IHl0O2xldCBpO3RoaXMuYWN0aXZlUnVuQ29tcGxldGlvblByb21pc2U9bmV3IFByb21pc2UoUz0+e2k9U30pO2xldCBkPUF0KCgpPT50aGlzLmNvbm5lY3QodCksaih0aGlzLmRlYnVnKSx6KHRoaXMuZGVidWcpLFM9PlMucGlwZSh2dCh0aGlzLmFjdGl2ZVJ1bkRldGFjaCQpKSxTPT50aGlzLmFwcGx5KHQsUyxvKSxTPT50aGlzLnByb2Nlc3NBcHBseUV2ZW50cyh0LFMsbyksZnQoUz0+KHRoaXMuaXNSdW5uaW5nPSExLFMgaW5zdGFuY2VvZiBDdD9BZTp0aGlzLm9uRXJyb3IodCxTLG8pKSksU3QoKCk9Pnt0aGlzLmlzUnVubmluZz0hMSx0aGlzLm9uRmluYWxpemUodCxvKSxpPT1udWxsfHxpKCksaT12b2lkIDAsdGhpcy5hY3RpdmVSdW5Db21wbGV0aW9uUHJvbWlzZT12b2lkIDAsdGhpcy5hY3RpdmVSdW5EZXRhY2gkPXZvaWQgMH0pKTthd2FpdCBNdChkKGh0KG51bGwpKSk7bGV0IEk9eSh0aGlzLm1lc3NhZ2VzKS5maWx0ZXIoUz0+IXIuaGFzKFMuaWQpKTtyZXR1cm57cmVzdWx0OnMsbmV3TWVzc2FnZXM6SX19ZmluYWxseXt0aGlzLmlzUnVubmluZz0hMX19YWJvcnRSdW4oKXt9YXN5bmMgZGV0YWNoQWN0aXZlUnVuKCl7dmFyIGUsbjtpZighdGhpcy5hY3RpdmVSdW5EZXRhY2gkKXJldHVybjtsZXQgYT0oZT10aGlzLmFjdGl2ZVJ1bkNvbXBsZXRpb25Qcm9taXNlKSE9bnVsbD9lOlByb21pc2UucmVzb2x2ZSgpO3RoaXMuYWN0aXZlUnVuRGV0YWNoJC5uZXh0KCksKG49dGhpcy5hY3RpdmVSdW5EZXRhY2gkKT09bnVsbHx8bi5jb21wbGV0ZSgpLGF3YWl0IGF9YXBwbHkoYSxlLG4pe3JldHVybiAkKGEsZSx0aGlzLG4pfXByb2Nlc3NBcHBseUV2ZW50cyhhLGUsbil7cmV0dXJuIGUucGlwZShTZSh0PT57dC5tZXNzYWdlcyYmKHRoaXMubWVzc2FnZXM9dC5tZXNzYWdlcyxuLmZvckVhY2gocz0+e3ZhciByOyhyPXMub25NZXNzYWdlc0NoYW5nZWQpPT1udWxsfHxyLmNhbGwocyx7bWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxzdGF0ZTp0aGlzLnN0YXRlLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSkpLHQuc3RhdGUmJih0aGlzLnN0YXRlPXQuc3RhdGUsbi5mb3JFYWNoKHM9Pnt2YXIgcjsocj1zLm9uU3RhdGVDaGFuZ2VkKT09bnVsbHx8ci5jYWxsKHMse3N0YXRlOnRoaXMuc3RhdGUsbWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxhZ2VudDp0aGlzLGlucHV0OmF9KX0pKX0pKX1wcmVwYXJlUnVuQWdlbnRJbnB1dChhKXt2YXIgdCxzLHI7bGV0IG49eSh0aGlzLm1lc3NhZ2VzKS5maWx0ZXIobz0+by5yb2xlIT09XCJhY3Rpdml0eVwiKTtyZXR1cm57dGhyZWFkSWQ6dGhpcy50aHJlYWRJZCxydW5JZDooYT09bnVsbD92b2lkIDA6YS5ydW5JZCl8fFYoKSx0b29sczp5KCh0PWE9PW51bGw/dm9pZCAwOmEudG9vbHMpIT1udWxsP3Q6W10pLGNvbnRleHQ6eSgocz1hPT1udWxsP3ZvaWQgMDphLmNvbnRleHQpIT1udWxsP3M6W10pLGZvcndhcmRlZFByb3BzOnkoKHI9YT09bnVsbD92b2lkIDA6YS5mb3J3YXJkZWRQcm9wcykhPW51bGw/cjp7fSksc3RhdGU6eSh0aGlzLnN0YXRlKSxtZXNzYWdlczpufX1hc3luYyBvbkluaXRpYWxpemUoYSxlKXtsZXQgbj1hd2FpdCB4KGUsdGhpcy5tZXNzYWdlcyx0aGlzLnN0YXRlLCh0LHMscik9Pnt2YXIgbztyZXR1cm4obz10Lm9uUnVuSW5pdGlhbGl6ZWQpPT1udWxsP3ZvaWQgMDpvLmNhbGwodCx7bWVzc2FnZXM6cyxzdGF0ZTpyLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSk7KG4ubWVzc2FnZXMhPT12b2lkIDB8fG4uc3RhdGUhPT12b2lkIDApJiYobi5tZXNzYWdlcyYmKHRoaXMubWVzc2FnZXM9bi5tZXNzYWdlcyxhLm1lc3NhZ2VzPW4ubWVzc2FnZXMsZS5mb3JFYWNoKHQ9Pnt2YXIgczsocz10Lm9uTWVzc2FnZXNDaGFuZ2VkKT09bnVsbHx8cy5jYWxsKHQse21lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzLGlucHV0OmF9KX0pKSxuLnN0YXRlJiYodGhpcy5zdGF0ZT1uLnN0YXRlLGEuc3RhdGU9bi5zdGF0ZSxlLmZvckVhY2godD0+e3ZhciBzOyhzPXQub25TdGF0ZUNoYW5nZWQpPT1udWxsfHxzLmNhbGwodCx7c3RhdGU6dGhpcy5zdGF0ZSxtZXNzYWdlczp0aGlzLm1lc3NhZ2VzLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSkpKX1vbkVycm9yKGEsZSxuKXtyZXR1cm4gdmUoeChuLHRoaXMubWVzc2FnZXMsdGhpcy5zdGF0ZSwodCxzLHIpPT57dmFyIG87cmV0dXJuKG89dC5vblJ1bkZhaWxlZCk9PW51bGw/dm9pZCAwOm8uY2FsbCh0LHtlcnJvcjplLG1lc3NhZ2VzOnMsc3RhdGU6cixhZ2VudDp0aGlzLGlucHV0OmF9KX0pKS5waXBlKFR0KHQ9PntsZXQgcz10O2lmKChzLm1lc3NhZ2VzIT09dm9pZCAwfHxzLnN0YXRlIT09dm9pZCAwKSYmKHMubWVzc2FnZXMhPT12b2lkIDAmJih0aGlzLm1lc3NhZ2VzPXMubWVzc2FnZXMsbi5mb3JFYWNoKHI9Pnt2YXIgbzsobz1yLm9uTWVzc2FnZXNDaGFuZ2VkKT09bnVsbHx8by5jYWxsKHIse21lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzLGlucHV0OmF9KX0pKSxzLnN0YXRlIT09dm9pZCAwJiYodGhpcy5zdGF0ZT1zLnN0YXRlLG4uZm9yRWFjaChyPT57dmFyIG87KG89ci5vblN0YXRlQ2hhbmdlZCk9PW51bGx8fG8uY2FsbChyLHtzdGF0ZTp0aGlzLnN0YXRlLG1lc3NhZ2VzOnRoaXMubWVzc2FnZXMsYWdlbnQ6dGhpcyxpbnB1dDphfSl9KSkpLHMuc3RvcFByb3BhZ2F0aW9uIT09ITApdGhyb3cgY29uc29sZS5lcnJvcihcIkFnZW50IGV4ZWN1dGlvbiBmYWlsZWQ6XCIsZSksZTtyZXR1cm57fX0pKX1hc3luYyBvbkZpbmFsaXplKGEsZSl7bGV0IG49YXdhaXQgeChlLHRoaXMubWVzc2FnZXMsdGhpcy5zdGF0ZSwodCxzLHIpPT57dmFyIG87cmV0dXJuKG89dC5vblJ1bkZpbmFsaXplZCk9PW51bGw/dm9pZCAwOm8uY2FsbCh0LHttZXNzYWdlczpzLHN0YXRlOnIsYWdlbnQ6dGhpcyxpbnB1dDphfSl9KTsobi5tZXNzYWdlcyE9PXZvaWQgMHx8bi5zdGF0ZSE9PXZvaWQgMCkmJihuLm1lc3NhZ2VzIT09dm9pZCAwJiYodGhpcy5tZXNzYWdlcz1uLm1lc3NhZ2VzLGUuZm9yRWFjaCh0PT57dmFyIHM7KHM9dC5vbk1lc3NhZ2VzQ2hhbmdlZCk9PW51bGx8fHMuY2FsbCh0LHttZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpcyxpbnB1dDphfSl9KSksbi5zdGF0ZSE9PXZvaWQgMCYmKHRoaXMuc3RhdGU9bi5zdGF0ZSxlLmZvckVhY2godD0+e3ZhciBzOyhzPXQub25TdGF0ZUNoYW5nZWQpPT1udWxsfHxzLmNhbGwodCx7c3RhdGU6dGhpcy5zdGF0ZSxtZXNzYWdlczp0aGlzLm1lc3NhZ2VzLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSkpKX1jbG9uZSgpe2xldCBhPU9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpKTtyZXR1cm4gYS5hZ2VudElkPXRoaXMuYWdlbnRJZCxhLmRlc2NyaXB0aW9uPXRoaXMuZGVzY3JpcHRpb24sYS50aHJlYWRJZD10aGlzLnRocmVhZElkLGEubWVzc2FnZXM9eSh0aGlzLm1lc3NhZ2VzKSxhLnN0YXRlPXkodGhpcy5zdGF0ZSksYS5kZWJ1Zz10aGlzLmRlYnVnLGEuaXNSdW5uaW5nPXRoaXMuaXNSdW5uaW5nLGEuc3Vic2NyaWJlcnM9Wy4uLnRoaXMuc3Vic2NyaWJlcnNdLGEubWlkZGxld2FyZXM9Wy4uLnRoaXMubWlkZGxld2FyZXNdLGF9YWRkTWVzc2FnZShhKXt0aGlzLm1lc3NhZ2VzLnB1c2goYSksKGFzeW5jKCk9Pnt2YXIgZSxuLHQ7Zm9yKGxldCBzIG9mIHRoaXMuc3Vic2NyaWJlcnMpYXdhaXQoKGU9cy5vbk5ld01lc3NhZ2UpPT1udWxsP3ZvaWQgMDplLmNhbGwocyx7bWVzc2FnZTphLG1lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzfSkpO2lmKGEucm9sZT09PVwiYXNzaXN0YW50XCImJmEudG9vbENhbGxzKWZvcihsZXQgcyBvZiBhLnRvb2xDYWxscylmb3IobGV0IHIgb2YgdGhpcy5zdWJzY3JpYmVycylhd2FpdCgobj1yLm9uTmV3VG9vbENhbGwpPT1udWxsP3ZvaWQgMDpuLmNhbGwocix7dG9vbENhbGw6cyxtZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpc30pKTtmb3IobGV0IHMgb2YgdGhpcy5zdWJzY3JpYmVycylhd2FpdCgodD1zLm9uTWVzc2FnZXNDaGFuZ2VkKT09bnVsbD92b2lkIDA6dC5jYWxsKHMse21lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzfSkpfSkoKX1hZGRNZXNzYWdlcyhhKXt0aGlzLm1lc3NhZ2VzLnB1c2goLi4uYSksKGFzeW5jKCk9Pnt2YXIgZSxuLHQ7Zm9yKGxldCBzIG9mIGEpe2ZvcihsZXQgciBvZiB0aGlzLnN1YnNjcmliZXJzKWF3YWl0KChlPXIub25OZXdNZXNzYWdlKT09bnVsbD92b2lkIDA6ZS5jYWxsKHIse21lc3NhZ2U6cyxtZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpc30pKTtpZihzLnJvbGU9PT1cImFzc2lzdGFudFwiJiZzLnRvb2xDYWxscylmb3IobGV0IHIgb2Ygcy50b29sQ2FsbHMpZm9yKGxldCBvIG9mIHRoaXMuc3Vic2NyaWJlcnMpYXdhaXQoKG49by5vbk5ld1Rvb2xDYWxsKT09bnVsbD92b2lkIDA6bi5jYWxsKG8se3Rvb2xDYWxsOnIsbWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxzdGF0ZTp0aGlzLnN0YXRlLGFnZW50OnRoaXN9KSl9Zm9yKGxldCBzIG9mIHRoaXMuc3Vic2NyaWJlcnMpYXdhaXQoKHQ9cy5vbk1lc3NhZ2VzQ2hhbmdlZCk9PW51bGw/dm9pZCAwOnQuY2FsbChzLHttZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpc30pKX0pKCl9c2V0TWVzc2FnZXMoYSl7dGhpcy5tZXNzYWdlcz15KGEpLChhc3luYygpPT57dmFyIGU7Zm9yKGxldCBuIG9mIHRoaXMuc3Vic2NyaWJlcnMpYXdhaXQoKGU9bi5vbk1lc3NhZ2VzQ2hhbmdlZCk9PW51bGw/dm9pZCAwOmUuY2FsbChuLHttZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpc30pKX0pKCl9c2V0U3RhdGUoYSl7dGhpcy5zdGF0ZT15KGEpLChhc3luYygpPT57dmFyIGU7Zm9yKGxldCBuIG9mIHRoaXMuc3Vic2NyaWJlcnMpYXdhaXQoKGU9bi5vblN0YXRlQ2hhbmdlZCk9PW51bGw/dm9pZCAwOmUuY2FsbChuLHttZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpc30pKX0pKCl9bGVnYWN5X3RvX2JlX3JlbW92ZWRfcnVuQWdlbnRCcmlkZ2VkKGEpe3ZhciB0O3RoaXMuYWdlbnRJZD0odD10aGlzLmFnZW50SWQpIT1udWxsP3Q6VigpO2xldCBlPXRoaXMucHJlcGFyZVJ1bkFnZW50SW5wdXQoYSk7cmV0dXJuKHRoaXMubWlkZGxld2FyZXMubGVuZ3RoPT09MD90aGlzLnJ1bihlKTp0aGlzLm1pZGRsZXdhcmVzLnJlZHVjZVJpZ2h0KChyLG8pPT4oe3J1bjppPT5vLnJ1bihpLHIpfSksdGhpcykucnVuKGUpKS5waXBlKGoodGhpcy5kZWJ1Zykseih0aGlzLmRlYnVnKSxhdCh0aGlzLnRocmVhZElkLGUucnVuSWQsdGhpcy5hZ2VudElkKSxzPT5zLnBpcGUoVHQocj0+KHRoaXMuZGVidWcmJmNvbnNvbGUuZGVidWcoXCJbTEVHQUNZXTpcIixKU09OLnN0cmluZ2lmeShyKSkscikpKSl9fTt2YXIgb3Q9Y2xhc3MgZXh0ZW5kcyBXe2NvbnN0cnVjdG9yKGUpe3ZhciBuO3N1cGVyKGUpO3RoaXMuYWJvcnRDb250cm9sbGVyPW5ldyBBYm9ydENvbnRyb2xsZXI7dGhpcy51cmw9ZS51cmwsdGhpcy5oZWFkZXJzPXkoKG49ZS5oZWFkZXJzKSE9bnVsbD9uOnt9KX1yZXF1ZXN0SW5pdChlKXtyZXR1cm57bWV0aG9kOlwiUE9TVFwiLGhlYWRlcnM6RyhOKHt9LHRoaXMuaGVhZGVycykse1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCIsQWNjZXB0OlwidGV4dC9ldmVudC1zdHJlYW1cIn0pLGJvZHk6SlNPTi5zdHJpbmdpZnkoZSksc2lnbmFsOnRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbH19cnVuQWdlbnQoZSxuKXt2YXIgdDtyZXR1cm4gdGhpcy5hYm9ydENvbnRyb2xsZXI9KHQ9ZT09bnVsbD92b2lkIDA6ZS5hYm9ydENvbnRyb2xsZXIpIT1udWxsP3Q6bmV3IEFib3J0Q29udHJvbGxlcixzdXBlci5ydW5BZ2VudChlLG4pfWFib3J0UnVuKCl7dGhpcy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKSxzdXBlci5hYm9ydFJ1bigpfXJ1bihlKXtsZXQgbj10dCh0aGlzLnVybCx0aGlzLnJlcXVlc3RJbml0KGUpKTtyZXR1cm4gc3Qobil9Y2xvbmUoKXt2YXIgcztsZXQgZT1zdXBlci5jbG9uZSgpO2UudXJsPXRoaXMudXJsLGUuaGVhZGVycz15KChzPXRoaXMuaGVhZGVycykhPW51bGw/czp7fSk7bGV0IG49bmV3IEFib3J0Q29udHJvbGxlcix0PXRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbDtyZXR1cm4gdC5hYm9ydGVkJiZuLmFib3J0KHQucmVhc29uKSxlLmFib3J0Q29udHJvbGxlcj1uLGV9fTtpbXBvcnR7RXZlbnRUeXBlIGFzIEJ9ZnJvbVwiQGFnLXVpL2NvcmVcIjtmdW5jdGlvbiBoZShsKXtsZXQgYT1bXSxlPW5ldyBNYXAsbj1uZXcgTWFwO2ZvcihsZXQgdCBvZiBsKWlmKHQudHlwZT09PUIuVEVYVF9NRVNTQUdFX1NUQVJUKXtsZXQgcz10LHI9cy5tZXNzYWdlSWQ7ZS5oYXMocil8fGUuc2V0KHIse2NvbnRlbnRzOltdLG90aGVyRXZlbnRzOltdfSk7bGV0IG89ZS5nZXQocik7by5zdGFydD1zfWVsc2UgaWYodC50eXBlPT09Qi5URVhUX01FU1NBR0VfQ09OVEVOVCl7bGV0IHM9dCxyPXMubWVzc2FnZUlkO2UuaGFzKHIpfHxlLnNldChyLHtjb250ZW50czpbXSxvdGhlckV2ZW50czpbXX0pLGUuZ2V0KHIpLmNvbnRlbnRzLnB1c2gocyl9ZWxzZSBpZih0LnR5cGU9PT1CLlRFWFRfTUVTU0FHRV9FTkQpe2xldCBzPXQscj1zLm1lc3NhZ2VJZDtlLmhhcyhyKXx8ZS5zZXQocix7Y29udGVudHM6W10sb3RoZXJFdmVudHM6W119KTtsZXQgbz1lLmdldChyKTtvLmVuZD1zLFJ0KHIsbyxhKSxlLmRlbGV0ZShyKX1lbHNlIGlmKHQudHlwZT09PUIuVE9PTF9DQUxMX1NUQVJUKXtsZXQgcz10LHI9cy50b29sQ2FsbElkO24uaGFzKHIpfHxuLnNldChyLHthcmdzOltdLG90aGVyRXZlbnRzOltdfSk7bGV0IG89bi5nZXQocik7by5zdGFydD1zfWVsc2UgaWYodC50eXBlPT09Qi5UT09MX0NBTExfQVJHUyl7bGV0IHM9dCxyPXMudG9vbENhbGxJZDtuLmhhcyhyKXx8bi5zZXQocix7YXJnczpbXSxvdGhlckV2ZW50czpbXX0pLG4uZ2V0KHIpLmFyZ3MucHVzaChzKX1lbHNlIGlmKHQudHlwZT09PUIuVE9PTF9DQUxMX0VORCl7bGV0IHM9dCxyPXMudG9vbENhbGxJZDtuLmhhcyhyKXx8bi5zZXQocix7YXJnczpbXSxvdGhlckV2ZW50czpbXX0pO2xldCBvPW4uZ2V0KHIpO28uZW5kPXMsSXQocixvLGEpLG4uZGVsZXRlKHIpfWVsc2V7bGV0IHM9ITE7Zm9yKGxldFtyLG9db2YgZSlpZihvLnN0YXJ0JiYhby5lbmQpe28ub3RoZXJFdmVudHMucHVzaCh0KSxzPSEwO2JyZWFrfWlmKCFzKXtmb3IobGV0W3Isb11vZiBuKWlmKG8uc3RhcnQmJiFvLmVuZCl7by5vdGhlckV2ZW50cy5wdXNoKHQpLHM9ITA7YnJlYWt9fXN8fGEucHVzaCh0KX1mb3IobGV0W3Qsc11vZiBlKVJ0KHQscyxhKTtmb3IobGV0W3Qsc11vZiBuKUl0KHQscyxhKTtyZXR1cm4gYX1mdW5jdGlvbiBSdChsLGEsZSl7aWYoYS5zdGFydCYmZS5wdXNoKGEuc3RhcnQpLGEuY29udGVudHMubGVuZ3RoPjApe2xldCBuPWEuY29udGVudHMubWFwKHM9PnMuZGVsdGEpLmpvaW4oXCJcIiksdD17dHlwZTpCLlRFWFRfTUVTU0FHRV9DT05URU5ULG1lc3NhZ2VJZDpsLGRlbHRhOm59O2UucHVzaCh0KX1hLmVuZCYmZS5wdXNoKGEuZW5kKTtmb3IobGV0IG4gb2YgYS5vdGhlckV2ZW50cyllLnB1c2gobil9ZnVuY3Rpb24gSXQobCxhLGUpe2lmKGEuc3RhcnQmJmUucHVzaChhLnN0YXJ0KSxhLmFyZ3MubGVuZ3RoPjApe2xldCBuPWEuYXJncy5tYXAocz0+cy5kZWx0YSkuam9pbihcIlwiKSx0PXt0eXBlOkIuVE9PTF9DQUxMX0FSR1MsdG9vbENhbGxJZDpsLGRlbHRhOm59O2UucHVzaCh0KX1hLmVuZCYmZS5wdXNoKGEuZW5kKTtmb3IobGV0IG4gb2YgYS5vdGhlckV2ZW50cyllLnB1c2gobil9ZXhwb3J0KmZyb21cIkBhZy11aS9jb3JlXCI7ZXhwb3J0e1cgYXMgQWJzdHJhY3RBZ2VudCxKIGFzIEJhY2t3YXJkQ29tcGF0aWJpbGl0eV8wXzBfMzksUSBhcyBGaWx0ZXJUb29sQ2FsbHNNaWRkbGV3YXJlLEsgYXMgRnVuY3Rpb25NaWRkbGV3YXJlLG90IGFzIEh0dHBBZ2VudCxrIGFzIE1pZGRsZXdhcmUsaGUgYXMgY29tcGFjdEV2ZW50cyxhdCBhcyBjb252ZXJ0VG9MZWdhY3lFdmVudHMsJCBhcyBkZWZhdWx0QXBwbHlFdmVudHMsbnQgYXMgcGFyc2VQcm90b1N0cmVhbSxldCBhcyBwYXJzZVNTRVN0cmVhbSxSZSBhcyByYW5kb21VVUlELHR0IGFzIHJ1bkh0dHBSZXF1ZXN0LHkgYXMgc3RydWN0dXJlZENsb25lXyxqIGFzIHRyYW5zZm9ybUNodW5rcyxzdCBhcyB0cmFuc2Zvcm1IdHRwRXZlbnRTdHJlYW0seiBhcyB2ZXJpZnlFdmVudHN9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/client/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/core/dist/index.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@copilotkitnext/core/node_modules/@ag-ui/core/dist/index.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIConnectNotImplementedError: () => (/* binding */ AGUIConnectNotImplementedError),\n/* harmony export */   AGUIError: () => (/* binding */ AGUIError),\n/* harmony export */   ActivityDeltaEventSchema: () => (/* binding */ ActivityDeltaEventSchema),\n/* harmony export */   ActivityMessageSchema: () => (/* binding */ ActivityMessageSchema),\n/* harmony export */   ActivitySnapshotEventSchema: () => (/* binding */ ActivitySnapshotEventSchema),\n/* harmony export */   AssistantMessageSchema: () => (/* binding */ AssistantMessageSchema),\n/* harmony export */   BaseEventSchema: () => (/* binding */ BaseEventSchema),\n/* harmony export */   BaseMessageSchema: () => (/* binding */ BaseMessageSchema),\n/* harmony export */   BinaryInputContentSchema: () => (/* binding */ BinaryInputContentSchema),\n/* harmony export */   ContextSchema: () => (/* binding */ ContextSchema),\n/* harmony export */   CustomEventSchema: () => (/* binding */ CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* binding */ DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* binding */ EventSchemas),\n/* harmony export */   EventType: () => (/* binding */ EventType),\n/* harmony export */   FunctionCallSchema: () => (/* binding */ FunctionCallSchema),\n/* harmony export */   InputContentSchema: () => (/* binding */ InputContentSchema),\n/* harmony export */   MessageSchema: () => (/* binding */ MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* binding */ MessagesSnapshotEventSchema),\n/* harmony export */   RawEventSchema: () => (/* binding */ RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* binding */ RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* binding */ RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* binding */ RunErrorEventSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* binding */ RunFinishedEventSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* binding */ RunStartedEventSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* binding */ StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* binding */ StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* binding */ StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* binding */ StepFinishedEventSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* binding */ StepStartedEventSchema),\n/* harmony export */   SystemMessageSchema: () => (/* binding */ SystemMessageSchema),\n/* harmony export */   TextInputContentSchema: () => (/* binding */ TextInputContentSchema),\n/* harmony export */   TextMessageChunkEventSchema: () => (/* binding */ TextMessageChunkEventSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* binding */ TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* binding */ TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* binding */ TextMessageStartEventSchema),\n/* harmony export */   ThinkingEndEventSchema: () => (/* binding */ ThinkingEndEventSchema),\n/* harmony export */   ThinkingStartEventSchema: () => (/* binding */ ThinkingStartEventSchema),\n/* harmony export */   ThinkingTextMessageContentEventSchema: () => (/* binding */ ThinkingTextMessageContentEventSchema),\n/* harmony export */   ThinkingTextMessageEndEventSchema: () => (/* binding */ ThinkingTextMessageEndEventSchema),\n/* harmony export */   ThinkingTextMessageStartEventSchema: () => (/* binding */ ThinkingTextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* binding */ ToolCallArgsEventSchema),\n/* harmony export */   ToolCallChunkEventSchema: () => (/* binding */ ToolCallChunkEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* binding */ ToolCallEndEventSchema),\n/* harmony export */   ToolCallResultEventSchema: () => (/* binding */ ToolCallResultEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* binding */ ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* binding */ ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* binding */ ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* binding */ ToolSchema),\n/* harmony export */   UserMessageSchema: () => (/* binding */ UserMessageSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/ZodError.js\");\n// src/types.ts\n\nvar FunctionCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  arguments: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\"),\n  function: FunctionCallSchema\n});\nvar BaseMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar TextInputContentSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"text\"),\n  text: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar BinaryInputContentObjectSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"binary\"),\n  mimeType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  url: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  data: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  filename: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ensureBinaryPayload = (value, ctx) => {\n  if (!value.id && !value.url && !value.data) {\n    ctx.addIssue({\n      code: zod__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.custom,\n      message: \"BinaryInputContent requires at least one of id, url, or data.\",\n      path: [\"id\"]\n    });\n  }\n};\nvar BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {\n  ensureBinaryPayload(value, ctx);\n});\nvar InputContentBaseSchema = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  TextInputContentSchema,\n  BinaryInputContentObjectSchema\n]);\nvar InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {\n  if (value.type === \"binary\") {\n    ensureBinaryPayload(value, ctx);\n  }\n});\nvar DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar SystemMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar AssistantMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  toolCalls: zod__WEBPACK_IMPORTED_MODULE_0__.array(ToolCallSchema).optional()\n});\nvar UserMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.union([zod__WEBPACK_IMPORTED_MODULE_0__.string(), zod__WEBPACK_IMPORTED_MODULE_0__.array(InputContentSchema)])\n});\nvar ToolMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\"),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  error: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ActivityMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"activity\"),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n});\nvar MessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema,\n  ActivityMessageSchema\n]);\nvar RoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"activity\")\n]);\nvar ContextSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parameters: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n  // JSON Schema for the tool parameters\n});\nvar RunAgentInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentRunId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  state: zod__WEBPACK_IMPORTED_MODULE_0__.any(),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.array(MessageSchema),\n  tools: zod__WEBPACK_IMPORTED_MODULE_0__.array(ToolSchema),\n  context: zod__WEBPACK_IMPORTED_MODULE_0__.array(ContextSchema),\n  forwardedProps: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n});\nvar StateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.any();\nvar AGUIError = class extends Error {\n  constructor(message) {\n    super(message);\n  }\n};\nvar AGUIConnectNotImplementedError = class extends AGUIError {\n  constructor() {\n    super(\"Connect not implemented. This method is not supported by the current agent.\");\n  }\n};\n\n// src/events.ts\n\nvar TextMessageRoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\")\n]);\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[\"TEXT_MESSAGE_START\"] = \"TEXT_MESSAGE_START\";\n  EventType2[\"TEXT_MESSAGE_CONTENT\"] = \"TEXT_MESSAGE_CONTENT\";\n  EventType2[\"TEXT_MESSAGE_END\"] = \"TEXT_MESSAGE_END\";\n  EventType2[\"TEXT_MESSAGE_CHUNK\"] = \"TEXT_MESSAGE_CHUNK\";\n  EventType2[\"THINKING_TEXT_MESSAGE_START\"] = \"THINKING_TEXT_MESSAGE_START\";\n  EventType2[\"THINKING_TEXT_MESSAGE_CONTENT\"] = \"THINKING_TEXT_MESSAGE_CONTENT\";\n  EventType2[\"THINKING_TEXT_MESSAGE_END\"] = \"THINKING_TEXT_MESSAGE_END\";\n  EventType2[\"TOOL_CALL_START\"] = \"TOOL_CALL_START\";\n  EventType2[\"TOOL_CALL_ARGS\"] = \"TOOL_CALL_ARGS\";\n  EventType2[\"TOOL_CALL_END\"] = \"TOOL_CALL_END\";\n  EventType2[\"TOOL_CALL_CHUNK\"] = \"TOOL_CALL_CHUNK\";\n  EventType2[\"TOOL_CALL_RESULT\"] = \"TOOL_CALL_RESULT\";\n  EventType2[\"THINKING_START\"] = \"THINKING_START\";\n  EventType2[\"THINKING_END\"] = \"THINKING_END\";\n  EventType2[\"STATE_SNAPSHOT\"] = \"STATE_SNAPSHOT\";\n  EventType2[\"STATE_DELTA\"] = \"STATE_DELTA\";\n  EventType2[\"MESSAGES_SNAPSHOT\"] = \"MESSAGES_SNAPSHOT\";\n  EventType2[\"ACTIVITY_SNAPSHOT\"] = \"ACTIVITY_SNAPSHOT\";\n  EventType2[\"ACTIVITY_DELTA\"] = \"ACTIVITY_DELTA\";\n  EventType2[\"RAW\"] = \"RAW\";\n  EventType2[\"CUSTOM\"] = \"CUSTOM\";\n  EventType2[\"RUN_STARTED\"] = \"RUN_STARTED\";\n  EventType2[\"RUN_FINISHED\"] = \"RUN_FINISHED\";\n  EventType2[\"RUN_ERROR\"] = \"RUN_ERROR\";\n  EventType2[\"STEP_STARTED\"] = \"STEP_STARTED\";\n  EventType2[\"STEP_FINISHED\"] = \"STEP_FINISHED\";\n  return EventType2;\n})(EventType || {});\nvar BaseEventSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.nativeEnum(EventType),\n  timestamp: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  rawEvent: zod__WEBPACK_IMPORTED_MODULE_0__.any().optional()\n});\nvar TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_START\" /* TEXT_MESSAGE_START */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: TextMessageRoleSchema.default(\"assistant\")\n});\nvar TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_CONTENT\" /* TEXT_MESSAGE_CONTENT */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().refine((s) => s.length > 0, \"Delta must not be an empty string\")\n});\nvar TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_END\" /* TEXT_MESSAGE_END */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar TextMessageChunkEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_CHUNK\" /* TEXT_MESSAGE_CHUNK */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  role: TextMessageRoleSchema.optional(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_START\" /* THINKING_TEXT_MESSAGE_START */)\n});\nvar ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({\n  messageId: true,\n  type: true\n}).extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_CONTENT\" /* THINKING_TEXT_MESSAGE_CONTENT */)\n});\nvar ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_END\" /* THINKING_TEXT_MESSAGE_END */)\n});\nvar ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_START\" /* TOOL_CALL_START */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  toolCallName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentMessageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_ARGS\" /* TOOL_CALL_ARGS */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_END\" /* TOOL_CALL_END */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallResultEventSchema = BaseEventSchema.extend({\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_RESULT\" /* TOOL_CALL_RESULT */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\").optional()\n});\nvar ToolCallChunkEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_CHUNK\" /* TOOL_CALL_CHUNK */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  toolCallName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  parentMessageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_START\" /* THINKING_START */),\n  title: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_END\" /* THINKING_END */)\n});\nvar StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STATE_SNAPSHOT\" /* STATE_SNAPSHOT */),\n  snapshot: StateSchema\n});\nvar StateDeltaEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STATE_DELTA\" /* STATE_DELTA */),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n  // JSON Patch (RFC 6902)\n});\nvar MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"MESSAGES_SNAPSHOT\" /* MESSAGES_SNAPSHOT */),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.array(MessageSchema)\n});\nvar ActivitySnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"ACTIVITY_SNAPSHOT\" /* ACTIVITY_SNAPSHOT */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any()),\n  replace: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(true)\n});\nvar ActivityDeltaEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"ACTIVITY_DELTA\" /* ACTIVITY_DELTA */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  patch: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n});\nvar RawEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RAW\" /* RAW */),\n  event: zod__WEBPACK_IMPORTED_MODULE_0__.any(),\n  source: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar CustomEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"CUSTOM\" /* CUSTOM */),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n});\nvar RunStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_STARTED\" /* RUN_STARTED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentRunId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  input: RunAgentInputSchema.optional()\n});\nvar RunFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_FINISHED\" /* RUN_FINISHED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  result: zod__WEBPACK_IMPORTED_MODULE_0__.any().optional()\n});\nvar RunErrorEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_ERROR\" /* RUN_ERROR */),\n  message: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  code: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar StepStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STEP_STARTED\" /* STEP_STARTED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar StepFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STEP_FINISHED\" /* STEP_FINISHED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar EventSchemas = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageChunkEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallResultEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  ActivitySnapshotEventSchema,\n  ActivityDeltaEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema\n]);\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L2NvcmUvbm9kZV9tb2R1bGVzL0BhZy11aS9jb3JlL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ3dCO0FBQ3hCLHlCQUF5Qix1Q0FBUTtBQUNqQyxRQUFRLHVDQUFRO0FBQ2hCLGFBQWEsdUNBQVE7QUFDckIsQ0FBQztBQUNELHFCQUFxQix1Q0FBUTtBQUM3QixNQUFNLHVDQUFRO0FBQ2QsUUFBUSx3Q0FBUztBQUNqQjtBQUNBLENBQUM7QUFDRCx3QkFBd0IsdUNBQVE7QUFDaEMsTUFBTSx1Q0FBUTtBQUNkLFFBQVEsdUNBQVE7QUFDaEIsV0FBVyx1Q0FBUTtBQUNuQixRQUFRLHVDQUFRO0FBQ2hCLENBQUM7QUFDRCw2QkFBNkIsdUNBQVE7QUFDckMsUUFBUSx3Q0FBUztBQUNqQixRQUFRLHVDQUFRO0FBQ2hCLENBQUM7QUFDRCxxQ0FBcUMsdUNBQVE7QUFDN0MsUUFBUSx3Q0FBUztBQUNqQixZQUFZLHVDQUFRO0FBQ3BCLE1BQU0sdUNBQVE7QUFDZCxPQUFPLHVDQUFRO0FBQ2YsUUFBUSx1Q0FBUTtBQUNoQixZQUFZLHVDQUFRO0FBQ3BCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZDQUFjO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNkJBQTZCLG1EQUFvQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVM7QUFDakIsV0FBVyx1Q0FBUTtBQUNuQixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFTO0FBQ2pCLFdBQVcsdUNBQVE7QUFDbkIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBUztBQUNqQixXQUFXLHVDQUFRO0FBQ25CLGFBQWEsc0NBQU87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Q0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixXQUFXLHVDQUFTO0FBQ3BCLFFBQVEsdUNBQVM7QUFDakIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixZQUFZLHVDQUFTO0FBQ3JCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsWUFBWSx1Q0FBUztBQUNyQixDQUFDO0FBQ0QsbUJBQW1CLG1EQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtREU7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvdHJhdmVsLXVpL25vZGVfbW9kdWxlcy9AY29waWxvdGtpdG5leHQvY29yZS9ub2RlX21vZHVsZXMvQGFnLXVpL2NvcmUvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3R5cGVzLnRzXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xudmFyIEZ1bmN0aW9uQ2FsbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKSxcbiAgYXJndW1lbnRzOiB6LnN0cmluZygpXG59KTtcbnZhciBUb29sQ2FsbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIHR5cGU6IHoubGl0ZXJhbChcImZ1bmN0aW9uXCIpLFxuICBmdW5jdGlvbjogRnVuY3Rpb25DYWxsU2NoZW1hXG59KTtcbnZhciBCYXNlTWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIHJvbGU6IHouc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBUZXh0SW5wdXRDb250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICB0eXBlOiB6LmxpdGVyYWwoXCJ0ZXh0XCIpLFxuICB0ZXh0OiB6LnN0cmluZygpXG59KTtcbnZhciBCaW5hcnlJbnB1dENvbnRlbnRPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcImJpbmFyeVwiKSxcbiAgbWltZVR5cGU6IHouc3RyaW5nKCksXG4gIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHVybDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBkYXRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGZpbGVuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIGVuc3VyZUJpbmFyeVBheWxvYWQgPSAodmFsdWUsIGN0eCkgPT4ge1xuICBpZiAoIXZhbHVlLmlkICYmICF2YWx1ZS51cmwgJiYgIXZhbHVlLmRhdGEpIHtcbiAgICBjdHguYWRkSXNzdWUoe1xuICAgICAgY29kZTogei5ab2RJc3N1ZUNvZGUuY3VzdG9tLFxuICAgICAgbWVzc2FnZTogXCJCaW5hcnlJbnB1dENvbnRlbnQgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIG9mIGlkLCB1cmwsIG9yIGRhdGEuXCIsXG4gICAgICBwYXRoOiBbXCJpZFwiXVxuICAgIH0pO1xuICB9XG59O1xudmFyIEJpbmFyeUlucHV0Q29udGVudFNjaGVtYSA9IEJpbmFyeUlucHV0Q29udGVudE9iamVjdFNjaGVtYS5zdXBlclJlZmluZSgodmFsdWUsIGN0eCkgPT4ge1xuICBlbnN1cmVCaW5hcnlQYXlsb2FkKHZhbHVlLCBjdHgpO1xufSk7XG52YXIgSW5wdXRDb250ZW50QmFzZVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gIFRleHRJbnB1dENvbnRlbnRTY2hlbWEsXG4gIEJpbmFyeUlucHV0Q29udGVudE9iamVjdFNjaGVtYVxuXSk7XG52YXIgSW5wdXRDb250ZW50U2NoZW1hID0gSW5wdXRDb250ZW50QmFzZVNjaGVtYS5zdXBlclJlZmluZSgodmFsdWUsIGN0eCkgPT4ge1xuICBpZiAodmFsdWUudHlwZSA9PT0gXCJiaW5hcnlcIikge1xuICAgIGVuc3VyZUJpbmFyeVBheWxvYWQodmFsdWUsIGN0eCk7XG4gIH1cbn0pO1xudmFyIERldmVsb3Blck1lc3NhZ2VTY2hlbWEgPSBCYXNlTWVzc2FnZVNjaGVtYS5leHRlbmQoe1xuICByb2xlOiB6LmxpdGVyYWwoXCJkZXZlbG9wZXJcIiksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKClcbn0pO1xudmFyIFN5c3RlbU1lc3NhZ2VTY2hlbWEgPSBCYXNlTWVzc2FnZVNjaGVtYS5leHRlbmQoe1xuICByb2xlOiB6LmxpdGVyYWwoXCJzeXN0ZW1cIiksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKClcbn0pO1xudmFyIEFzc2lzdGFudE1lc3NhZ2VTY2hlbWEgPSBCYXNlTWVzc2FnZVNjaGVtYS5leHRlbmQoe1xuICByb2xlOiB6LmxpdGVyYWwoXCJhc3Npc3RhbnRcIiksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdG9vbENhbGxzOiB6LmFycmF5KFRvb2xDYWxsU2NoZW1hKS5vcHRpb25hbCgpXG59KTtcbnZhciBVc2VyTWVzc2FnZVNjaGVtYSA9IEJhc2VNZXNzYWdlU2NoZW1hLmV4dGVuZCh7XG4gIHJvbGU6IHoubGl0ZXJhbChcInVzZXJcIiksXG4gIGNvbnRlbnQ6IHoudW5pb24oW3ouc3RyaW5nKCksIHouYXJyYXkoSW5wdXRDb250ZW50U2NoZW1hKV0pXG59KTtcbnZhciBUb29sTWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKCksXG4gIHJvbGU6IHoubGl0ZXJhbChcInRvb2xcIiksXG4gIHRvb2xDYWxsSWQ6IHouc3RyaW5nKCksXG4gIGVycm9yOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIEFjdGl2aXR5TWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIHJvbGU6IHoubGl0ZXJhbChcImFjdGl2aXR5XCIpLFxuICBhY3Rpdml0eVR5cGU6IHouc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHoucmVjb3JkKHouYW55KCkpXG59KTtcbnZhciBNZXNzYWdlU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oXCJyb2xlXCIsIFtcbiAgRGV2ZWxvcGVyTWVzc2FnZVNjaGVtYSxcbiAgU3lzdGVtTWVzc2FnZVNjaGVtYSxcbiAgQXNzaXN0YW50TWVzc2FnZVNjaGVtYSxcbiAgVXNlck1lc3NhZ2VTY2hlbWEsXG4gIFRvb2xNZXNzYWdlU2NoZW1hLFxuICBBY3Rpdml0eU1lc3NhZ2VTY2hlbWFcbl0pO1xudmFyIFJvbGVTY2hlbWEgPSB6LnVuaW9uKFtcbiAgei5saXRlcmFsKFwiZGV2ZWxvcGVyXCIpLFxuICB6LmxpdGVyYWwoXCJzeXN0ZW1cIiksXG4gIHoubGl0ZXJhbChcImFzc2lzdGFudFwiKSxcbiAgei5saXRlcmFsKFwidXNlclwiKSxcbiAgei5saXRlcmFsKFwidG9vbFwiKSxcbiAgei5saXRlcmFsKFwiYWN0aXZpdHlcIilcbl0pO1xudmFyIENvbnRleHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLFxuICB2YWx1ZTogei5zdHJpbmcoKVxufSk7XG52YXIgVG9vbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXG4gIHBhcmFtZXRlcnM6IHouYW55KClcbiAgLy8gSlNPTiBTY2hlbWEgZm9yIHRoZSB0b29sIHBhcmFtZXRlcnNcbn0pO1xudmFyIFJ1bkFnZW50SW5wdXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRocmVhZElkOiB6LnN0cmluZygpLFxuICBydW5JZDogei5zdHJpbmcoKSxcbiAgcGFyZW50UnVuSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc3RhdGU6IHouYW55KCksXG4gIG1lc3NhZ2VzOiB6LmFycmF5KE1lc3NhZ2VTY2hlbWEpLFxuICB0b29sczogei5hcnJheShUb29sU2NoZW1hKSxcbiAgY29udGV4dDogei5hcnJheShDb250ZXh0U2NoZW1hKSxcbiAgZm9yd2FyZGVkUHJvcHM6IHouYW55KClcbn0pO1xudmFyIFN0YXRlU2NoZW1hID0gei5hbnkoKTtcbnZhciBBR1VJRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICB9XG59O1xudmFyIEFHVUlDb25uZWN0Tm90SW1wbGVtZW50ZWRFcnJvciA9IGNsYXNzIGV4dGVuZHMgQUdVSUVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJDb25uZWN0IG5vdCBpbXBsZW1lbnRlZC4gVGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBhZ2VudC5cIik7XG4gIH1cbn07XG5cbi8vIHNyYy9ldmVudHMudHNcbmltcG9ydCB7IHogYXMgejIgfSBmcm9tIFwiem9kXCI7XG52YXIgVGV4dE1lc3NhZ2VSb2xlU2NoZW1hID0gejIudW5pb24oW1xuICB6Mi5saXRlcmFsKFwiZGV2ZWxvcGVyXCIpLFxuICB6Mi5saXRlcmFsKFwic3lzdGVtXCIpLFxuICB6Mi5saXRlcmFsKFwiYXNzaXN0YW50XCIpLFxuICB6Mi5saXRlcmFsKFwidXNlclwiKVxuXSk7XG52YXIgRXZlbnRUeXBlID0gLyogQF9fUFVSRV9fICovICgoRXZlbnRUeXBlMikgPT4ge1xuICBFdmVudFR5cGUyW1wiVEVYVF9NRVNTQUdFX1NUQVJUXCJdID0gXCJURVhUX01FU1NBR0VfU1RBUlRcIjtcbiAgRXZlbnRUeXBlMltcIlRFWFRfTUVTU0FHRV9DT05URU5UXCJdID0gXCJURVhUX01FU1NBR0VfQ09OVEVOVFwiO1xuICBFdmVudFR5cGUyW1wiVEVYVF9NRVNTQUdFX0VORFwiXSA9IFwiVEVYVF9NRVNTQUdFX0VORFwiO1xuICBFdmVudFR5cGUyW1wiVEVYVF9NRVNTQUdFX0NIVU5LXCJdID0gXCJURVhUX01FU1NBR0VfQ0hVTktcIjtcbiAgRXZlbnRUeXBlMltcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9TVEFSVFwiXSA9IFwiVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTJbXCJUSElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVFwiXSA9IFwiVEhJTktJTkdfVEVYVF9NRVNTQUdFX0NPTlRFTlRcIjtcbiAgRXZlbnRUeXBlMltcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkRcIl0gPSBcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkRcIjtcbiAgRXZlbnRUeXBlMltcIlRPT0xfQ0FMTF9TVEFSVFwiXSA9IFwiVE9PTF9DQUxMX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTJbXCJUT09MX0NBTExfQVJHU1wiXSA9IFwiVE9PTF9DQUxMX0FSR1NcIjtcbiAgRXZlbnRUeXBlMltcIlRPT0xfQ0FMTF9FTkRcIl0gPSBcIlRPT0xfQ0FMTF9FTkRcIjtcbiAgRXZlbnRUeXBlMltcIlRPT0xfQ0FMTF9DSFVOS1wiXSA9IFwiVE9PTF9DQUxMX0NIVU5LXCI7XG4gIEV2ZW50VHlwZTJbXCJUT09MX0NBTExfUkVTVUxUXCJdID0gXCJUT09MX0NBTExfUkVTVUxUXCI7XG4gIEV2ZW50VHlwZTJbXCJUSElOS0lOR19TVEFSVFwiXSA9IFwiVEhJTktJTkdfU1RBUlRcIjtcbiAgRXZlbnRUeXBlMltcIlRISU5LSU5HX0VORFwiXSA9IFwiVEhJTktJTkdfRU5EXCI7XG4gIEV2ZW50VHlwZTJbXCJTVEFURV9TTkFQU0hPVFwiXSA9IFwiU1RBVEVfU05BUFNIT1RcIjtcbiAgRXZlbnRUeXBlMltcIlNUQVRFX0RFTFRBXCJdID0gXCJTVEFURV9ERUxUQVwiO1xuICBFdmVudFR5cGUyW1wiTUVTU0FHRVNfU05BUFNIT1RcIl0gPSBcIk1FU1NBR0VTX1NOQVBTSE9UXCI7XG4gIEV2ZW50VHlwZTJbXCJBQ1RJVklUWV9TTkFQU0hPVFwiXSA9IFwiQUNUSVZJVFlfU05BUFNIT1RcIjtcbiAgRXZlbnRUeXBlMltcIkFDVElWSVRZX0RFTFRBXCJdID0gXCJBQ1RJVklUWV9ERUxUQVwiO1xuICBFdmVudFR5cGUyW1wiUkFXXCJdID0gXCJSQVdcIjtcbiAgRXZlbnRUeXBlMltcIkNVU1RPTVwiXSA9IFwiQ1VTVE9NXCI7XG4gIEV2ZW50VHlwZTJbXCJSVU5fU1RBUlRFRFwiXSA9IFwiUlVOX1NUQVJURURcIjtcbiAgRXZlbnRUeXBlMltcIlJVTl9GSU5JU0hFRFwiXSA9IFwiUlVOX0ZJTklTSEVEXCI7XG4gIEV2ZW50VHlwZTJbXCJSVU5fRVJST1JcIl0gPSBcIlJVTl9FUlJPUlwiO1xuICBFdmVudFR5cGUyW1wiU1RFUF9TVEFSVEVEXCJdID0gXCJTVEVQX1NUQVJURURcIjtcbiAgRXZlbnRUeXBlMltcIlNURVBfRklOSVNIRURcIl0gPSBcIlNURVBfRklOSVNIRURcIjtcbiAgcmV0dXJuIEV2ZW50VHlwZTI7XG59KShFdmVudFR5cGUgfHwge30pO1xudmFyIEJhc2VFdmVudFNjaGVtYSA9IHoyLm9iamVjdCh7XG4gIHR5cGU6IHoyLm5hdGl2ZUVudW0oRXZlbnRUeXBlKSxcbiAgdGltZXN0YW1wOiB6Mi5udW1iZXIoKS5vcHRpb25hbCgpLFxuICByYXdFdmVudDogejIuYW55KCkub3B0aW9uYWwoKVxufSk7XG52YXIgVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJURVhUX01FU1NBR0VfU1RBUlRcIiAvKiBURVhUX01FU1NBR0VfU1RBUlQgKi8pLFxuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpLFxuICByb2xlOiBUZXh0TWVzc2FnZVJvbGVTY2hlbWEuZGVmYXVsdChcImFzc2lzdGFudFwiKVxufSk7XG52YXIgVGV4dE1lc3NhZ2VDb250ZW50RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRFWFRfTUVTU0FHRV9DT05URU5UXCIgLyogVEVYVF9NRVNTQUdFX0NPTlRFTlQgKi8pLFxuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpLFxuICBkZWx0YTogejIuc3RyaW5nKCkucmVmaW5lKChzKSA9PiBzLmxlbmd0aCA+IDAsIFwiRGVsdGEgbXVzdCBub3QgYmUgYW4gZW1wdHkgc3RyaW5nXCIpXG59KTtcbnZhciBUZXh0TWVzc2FnZUVuZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJURVhUX01FU1NBR0VfRU5EXCIgLyogVEVYVF9NRVNTQUdFX0VORCAqLyksXG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKClcbn0pO1xudmFyIFRleHRNZXNzYWdlQ2h1bmtFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEVYVF9NRVNTQUdFX0NIVU5LXCIgLyogVEVYVF9NRVNTQUdFX0NIVU5LICovKSxcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICByb2xlOiBUZXh0TWVzc2FnZVJvbGVTY2hlbWEub3B0aW9uYWwoKSxcbiAgZGVsdGE6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRoaW5raW5nVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlRcIiAvKiBUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlQgKi8pXG59KTtcbnZhciBUaGlua2luZ1RleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hID0gVGV4dE1lc3NhZ2VDb250ZW50RXZlbnRTY2hlbWEub21pdCh7XG4gIG1lc3NhZ2VJZDogdHJ1ZSxcbiAgdHlwZTogdHJ1ZVxufSkuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9DT05URU5UXCIgLyogVEhJTktJTkdfVEVYVF9NRVNTQUdFX0NPTlRFTlQgKi8pXG59KTtcbnZhciBUaGlua2luZ1RleHRNZXNzYWdlRW5kRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkRcIiAvKiBUSElOS0lOR19URVhUX01FU1NBR0VfRU5EICovKVxufSk7XG52YXIgVG9vbENhbGxTdGFydEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUT09MX0NBTExfU1RBUlRcIiAvKiBUT09MX0NBTExfU1RBUlQgKi8pLFxuICB0b29sQ2FsbElkOiB6Mi5zdHJpbmcoKSxcbiAgdG9vbENhbGxOYW1lOiB6Mi5zdHJpbmcoKSxcbiAgcGFyZW50TWVzc2FnZUlkOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBUb29sQ2FsbEFyZ3NFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVE9PTF9DQUxMX0FSR1NcIiAvKiBUT09MX0NBTExfQVJHUyAqLyksXG4gIHRvb2xDYWxsSWQ6IHoyLnN0cmluZygpLFxuICBkZWx0YTogejIuc3RyaW5nKClcbn0pO1xudmFyIFRvb2xDYWxsRW5kRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRPT0xfQ0FMTF9FTkRcIiAvKiBUT09MX0NBTExfRU5EICovKSxcbiAgdG9vbENhbGxJZDogejIuc3RyaW5nKClcbn0pO1xudmFyIFRvb2xDYWxsUmVzdWx0RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKSxcbiAgdHlwZTogejIubGl0ZXJhbChcIlRPT0xfQ0FMTF9SRVNVTFRcIiAvKiBUT09MX0NBTExfUkVTVUxUICovKSxcbiAgdG9vbENhbGxJZDogejIuc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHoyLnN0cmluZygpLFxuICByb2xlOiB6Mi5saXRlcmFsKFwidG9vbFwiKS5vcHRpb25hbCgpXG59KTtcbnZhciBUb29sQ2FsbENodW5rRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRPT0xfQ0FMTF9DSFVOS1wiIC8qIFRPT0xfQ0FMTF9DSFVOSyAqLyksXG4gIHRvb2xDYWxsSWQ6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHRvb2xDYWxsTmFtZTogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgcGFyZW50TWVzc2FnZUlkOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBkZWx0YTogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgVGhpbmtpbmdTdGFydEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUSElOS0lOR19TVEFSVFwiIC8qIFRISU5LSU5HX1NUQVJUICovKSxcbiAgdGl0bGU6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRoaW5raW5nRW5kRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRISU5LSU5HX0VORFwiIC8qIFRISU5LSU5HX0VORCAqLylcbn0pO1xudmFyIFN0YXRlU25hcHNob3RFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiU1RBVEVfU05BUFNIT1RcIiAvKiBTVEFURV9TTkFQU0hPVCAqLyksXG4gIHNuYXBzaG90OiBTdGF0ZVNjaGVtYVxufSk7XG52YXIgU3RhdGVEZWx0YUV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJTVEFURV9ERUxUQVwiIC8qIFNUQVRFX0RFTFRBICovKSxcbiAgZGVsdGE6IHoyLmFycmF5KHoyLmFueSgpKVxuICAvLyBKU09OIFBhdGNoIChSRkMgNjkwMilcbn0pO1xudmFyIE1lc3NhZ2VzU25hcHNob3RFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiTUVTU0FHRVNfU05BUFNIT1RcIiAvKiBNRVNTQUdFU19TTkFQU0hPVCAqLyksXG4gIG1lc3NhZ2VzOiB6Mi5hcnJheShNZXNzYWdlU2NoZW1hKVxufSk7XG52YXIgQWN0aXZpdHlTbmFwc2hvdEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJBQ1RJVklUWV9TTkFQU0hPVFwiIC8qIEFDVElWSVRZX1NOQVBTSE9UICovKSxcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKSxcbiAgYWN0aXZpdHlUeXBlOiB6Mi5zdHJpbmcoKSxcbiAgY29udGVudDogejIucmVjb3JkKHoyLmFueSgpKSxcbiAgcmVwbGFjZTogejIuYm9vbGVhbigpLm9wdGlvbmFsKCkuZGVmYXVsdCh0cnVlKVxufSk7XG52YXIgQWN0aXZpdHlEZWx0YUV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJBQ1RJVklUWV9ERUxUQVwiIC8qIEFDVElWSVRZX0RFTFRBICovKSxcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKSxcbiAgYWN0aXZpdHlUeXBlOiB6Mi5zdHJpbmcoKSxcbiAgcGF0Y2g6IHoyLmFycmF5KHoyLmFueSgpKVxufSk7XG52YXIgUmF3RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlJBV1wiIC8qIFJBVyAqLyksXG4gIGV2ZW50OiB6Mi5hbnkoKSxcbiAgc291cmNlOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBDdXN0b21FdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiQ1VTVE9NXCIgLyogQ1VTVE9NICovKSxcbiAgbmFtZTogejIuc3RyaW5nKCksXG4gIHZhbHVlOiB6Mi5hbnkoKVxufSk7XG52YXIgUnVuU3RhcnRlZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJSVU5fU1RBUlRFRFwiIC8qIFJVTl9TVEFSVEVEICovKSxcbiAgdGhyZWFkSWQ6IHoyLnN0cmluZygpLFxuICBydW5JZDogejIuc3RyaW5nKCksXG4gIHBhcmVudFJ1bklkOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBpbnB1dDogUnVuQWdlbnRJbnB1dFNjaGVtYS5vcHRpb25hbCgpXG59KTtcbnZhciBSdW5GaW5pc2hlZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJSVU5fRklOSVNIRURcIiAvKiBSVU5fRklOSVNIRUQgKi8pLFxuICB0aHJlYWRJZDogejIuc3RyaW5nKCksXG4gIHJ1bklkOiB6Mi5zdHJpbmcoKSxcbiAgcmVzdWx0OiB6Mi5hbnkoKS5vcHRpb25hbCgpXG59KTtcbnZhciBSdW5FcnJvckV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJSVU5fRVJST1JcIiAvKiBSVU5fRVJST1IgKi8pLFxuICBtZXNzYWdlOiB6Mi5zdHJpbmcoKSxcbiAgY29kZTogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgU3RlcFN0YXJ0ZWRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiU1RFUF9TVEFSVEVEXCIgLyogU1RFUF9TVEFSVEVEICovKSxcbiAgc3RlcE5hbWU6IHoyLnN0cmluZygpXG59KTtcbnZhciBTdGVwRmluaXNoZWRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiU1RFUF9GSU5JU0hFRFwiIC8qIFNURVBfRklOSVNIRUQgKi8pLFxuICBzdGVwTmFtZTogejIuc3RyaW5nKClcbn0pO1xudmFyIEV2ZW50U2NoZW1hcyA9IHoyLmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICBUZXh0TWVzc2FnZVN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZUVuZEV2ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZUNodW5rRXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nU3RhcnRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdFbmRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdUZXh0TWVzc2FnZVN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nVGV4dE1lc3NhZ2VDb250ZW50RXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nVGV4dE1lc3NhZ2VFbmRFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxTdGFydEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbEFyZ3NFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxFbmRFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxDaHVua0V2ZW50U2NoZW1hLFxuICBUb29sQ2FsbFJlc3VsdEV2ZW50U2NoZW1hLFxuICBTdGF0ZVNuYXBzaG90RXZlbnRTY2hlbWEsXG4gIFN0YXRlRGVsdGFFdmVudFNjaGVtYSxcbiAgTWVzc2FnZXNTbmFwc2hvdEV2ZW50U2NoZW1hLFxuICBBY3Rpdml0eVNuYXBzaG90RXZlbnRTY2hlbWEsXG4gIEFjdGl2aXR5RGVsdGFFdmVudFNjaGVtYSxcbiAgUmF3RXZlbnRTY2hlbWEsXG4gIEN1c3RvbUV2ZW50U2NoZW1hLFxuICBSdW5TdGFydGVkRXZlbnRTY2hlbWEsXG4gIFJ1bkZpbmlzaGVkRXZlbnRTY2hlbWEsXG4gIFJ1bkVycm9yRXZlbnRTY2hlbWEsXG4gIFN0ZXBTdGFydGVkRXZlbnRTY2hlbWEsXG4gIFN0ZXBGaW5pc2hlZEV2ZW50U2NoZW1hXG5dKTtcbmV4cG9ydCB7XG4gIEFHVUlDb25uZWN0Tm90SW1wbGVtZW50ZWRFcnJvcixcbiAgQUdVSUVycm9yLFxuICBBY3Rpdml0eURlbHRhRXZlbnRTY2hlbWEsXG4gIEFjdGl2aXR5TWVzc2FnZVNjaGVtYSxcbiAgQWN0aXZpdHlTbmFwc2hvdEV2ZW50U2NoZW1hLFxuICBBc3Npc3RhbnRNZXNzYWdlU2NoZW1hLFxuICBCYXNlRXZlbnRTY2hlbWEsXG4gIEJhc2VNZXNzYWdlU2NoZW1hLFxuICBCaW5hcnlJbnB1dENvbnRlbnRTY2hlbWEsXG4gIENvbnRleHRTY2hlbWEsXG4gIEN1c3RvbUV2ZW50U2NoZW1hLFxuICBEZXZlbG9wZXJNZXNzYWdlU2NoZW1hLFxuICBFdmVudFNjaGVtYXMsXG4gIEV2ZW50VHlwZSxcbiAgRnVuY3Rpb25DYWxsU2NoZW1hLFxuICBJbnB1dENvbnRlbnRTY2hlbWEsXG4gIE1lc3NhZ2VTY2hlbWEsXG4gIE1lc3NhZ2VzU25hcHNob3RFdmVudFNjaGVtYSxcbiAgUmF3RXZlbnRTY2hlbWEsXG4gIFJvbGVTY2hlbWEsXG4gIFJ1bkFnZW50SW5wdXRTY2hlbWEsXG4gIFJ1bkVycm9yRXZlbnRTY2hlbWEsXG4gIFJ1bkZpbmlzaGVkRXZlbnRTY2hlbWEsXG4gIFJ1blN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgU3RhdGVEZWx0YUV2ZW50U2NoZW1hLFxuICBTdGF0ZVNjaGVtYSxcbiAgU3RhdGVTbmFwc2hvdEV2ZW50U2NoZW1hLFxuICBTdGVwRmluaXNoZWRFdmVudFNjaGVtYSxcbiAgU3RlcFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgU3lzdGVtTWVzc2FnZVNjaGVtYSxcbiAgVGV4dElucHV0Q29udGVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VDaHVua0V2ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VFbmRFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ0VuZEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ1N0YXJ0RXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nVGV4dE1lc3NhZ2VDb250ZW50RXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nVGV4dE1lc3NhZ2VFbmRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdUZXh0TWVzc2FnZVN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsQXJnc0V2ZW50U2NoZW1hLFxuICBUb29sQ2FsbENodW5rRXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsRW5kRXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsUmVzdWx0RXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsU2NoZW1hLFxuICBUb29sQ2FsbFN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRvb2xNZXNzYWdlU2NoZW1hLFxuICBUb29sU2NoZW1hLFxuICBVc2VyTWVzc2FnZVNjaGVtYVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/core/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/proto/dist/index.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@copilotkitnext/core/node_modules/@ag-ui/proto/dist/index.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUI_MEDIA_TYPE: () => (/* binding */ AGUI_MEDIA_TYPE),\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ag-ui/core */ \"(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/core/dist/index.mjs\");\n/* harmony import */ var _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bufbuild/protobuf/wire */ \"(ssr)/./node_modules/@bufbuild/protobuf/dist/esm/wire/binary-encoding.js\");\n// src/proto.ts\n\n\n// src/generated/events.ts\n\n\n// src/generated/google/protobuf/struct.ts\n\nfunction createBaseStruct() {\n  return { fields: {} };\n}\nvar Struct = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    Object.entries(message.fields).forEach(([key, value]) => {\n      if (value !== void 0) {\n        Struct_FieldsEntry.encode({ key, value }, writer.uint32(10).fork()).join();\n      }\n    });\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStruct();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          const entry1 = Struct_FieldsEntry.decode(reader, reader.uint32());\n          if (entry1.value !== void 0) {\n            message.fields[entry1.key] = entry1.value;\n          }\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Struct.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStruct();\n    message.fields = Object.entries((_a = object.fields) != null ? _a : {}).reduce(\n      (acc, [key, value]) => {\n        if (value !== void 0) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {}\n    );\n    return message;\n  },\n  wrap(object) {\n    const struct = createBaseStruct();\n    if (object !== void 0) {\n      for (const key of Object.keys(object)) {\n        struct.fields[key] = object[key];\n      }\n    }\n    return struct;\n  },\n  unwrap(message) {\n    const object = {};\n    if (message.fields) {\n      for (const key of Object.keys(message.fields)) {\n        object[key] = message.fields[key];\n      }\n    }\n    return object;\n  }\n};\nfunction createBaseStruct_FieldsEntry() {\n  return { key: \"\", value: void 0 };\n}\nvar Struct_FieldsEntry = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.key !== \"\") {\n      writer.uint32(10).string(message.key);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStruct_FieldsEntry();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.key = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Struct_FieldsEntry.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseStruct_FieldsEntry();\n    message.key = (_a = object.key) != null ? _a : \"\";\n    message.value = (_b = object.value) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseValue() {\n  return {\n    nullValue: void 0,\n    numberValue: void 0,\n    stringValue: void 0,\n    boolValue: void 0,\n    structValue: void 0,\n    listValue: void 0\n  };\n}\nvar Value = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.nullValue !== void 0) {\n      writer.uint32(8).int32(message.nullValue);\n    }\n    if (message.numberValue !== void 0) {\n      writer.uint32(17).double(message.numberValue);\n    }\n    if (message.stringValue !== void 0) {\n      writer.uint32(26).string(message.stringValue);\n    }\n    if (message.boolValue !== void 0) {\n      writer.uint32(32).bool(message.boolValue);\n    }\n    if (message.structValue !== void 0) {\n      Struct.encode(Struct.wrap(message.structValue), writer.uint32(42).fork()).join();\n    }\n    if (message.listValue !== void 0) {\n      ListValue.encode(ListValue.wrap(message.listValue), writer.uint32(50).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.nullValue = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 17) {\n            break;\n          }\n          message.numberValue = reader.double();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.stringValue = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 32) {\n            break;\n          }\n          message.boolValue = reader.bool();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.structValue = Struct.unwrap(Struct.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.listValue = ListValue.unwrap(ListValue.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Value.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d, _e, _f;\n    const message = createBaseValue();\n    message.nullValue = (_a = object.nullValue) != null ? _a : void 0;\n    message.numberValue = (_b = object.numberValue) != null ? _b : void 0;\n    message.stringValue = (_c = object.stringValue) != null ? _c : void 0;\n    message.boolValue = (_d = object.boolValue) != null ? _d : void 0;\n    message.structValue = (_e = object.structValue) != null ? _e : void 0;\n    message.listValue = (_f = object.listValue) != null ? _f : void 0;\n    return message;\n  },\n  wrap(value) {\n    const result = createBaseValue();\n    if (value === null) {\n      result.nullValue = 0 /* NULL_VALUE */;\n    } else if (typeof value === \"boolean\") {\n      result.boolValue = value;\n    } else if (typeof value === \"number\") {\n      result.numberValue = value;\n    } else if (typeof value === \"string\") {\n      result.stringValue = value;\n    } else if (globalThis.Array.isArray(value)) {\n      result.listValue = value;\n    } else if (typeof value === \"object\") {\n      result.structValue = value;\n    } else if (typeof value !== \"undefined\") {\n      throw new globalThis.Error(\"Unsupported any value type: \" + typeof value);\n    }\n    return result;\n  },\n  unwrap(message) {\n    if (message.stringValue !== void 0) {\n      return message.stringValue;\n    } else if ((message == null ? void 0 : message.numberValue) !== void 0) {\n      return message.numberValue;\n    } else if ((message == null ? void 0 : message.boolValue) !== void 0) {\n      return message.boolValue;\n    } else if ((message == null ? void 0 : message.structValue) !== void 0) {\n      return message.structValue;\n    } else if ((message == null ? void 0 : message.listValue) !== void 0) {\n      return message.listValue;\n    } else if ((message == null ? void 0 : message.nullValue) !== void 0) {\n      return null;\n    }\n    return void 0;\n  }\n};\nfunction createBaseListValue() {\n  return { values: [] };\n}\nvar ListValue = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    for (const v of message.values) {\n      Value.encode(Value.wrap(v), writer.uint32(10).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseListValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.values.push(Value.unwrap(Value.decode(reader, reader.uint32())));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ListValue.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseListValue();\n    message.values = ((_a = object.values) == null ? void 0 : _a.map((e) => e)) || [];\n    return message;\n  },\n  wrap(array) {\n    const result = createBaseListValue();\n    result.values = array != null ? array : [];\n    return result;\n  },\n  unwrap(message) {\n    if ((message == null ? void 0 : message.hasOwnProperty(\"values\")) && globalThis.Array.isArray(message.values)) {\n      return message.values;\n    } else {\n      return message;\n    }\n  }\n};\n\n// src/generated/patch.ts\n\nvar JsonPatchOperationType = /* @__PURE__ */ ((JsonPatchOperationType2) => {\n  JsonPatchOperationType2[JsonPatchOperationType2[\"ADD\"] = 0] = \"ADD\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"REMOVE\"] = 1] = \"REMOVE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"REPLACE\"] = 2] = \"REPLACE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"MOVE\"] = 3] = \"MOVE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"COPY\"] = 4] = \"COPY\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"TEST\"] = 5] = \"TEST\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n  return JsonPatchOperationType2;\n})(JsonPatchOperationType || {});\nfunction createBaseJsonPatchOperation() {\n  return { op: 0, path: \"\", from: void 0, value: void 0 };\n}\nvar JsonPatchOperation = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.op !== 0) {\n      writer.uint32(8).int32(message.op);\n    }\n    if (message.path !== \"\") {\n      writer.uint32(18).string(message.path);\n    }\n    if (message.from !== void 0) {\n      writer.uint32(26).string(message.from);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseJsonPatchOperation();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.op = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.path = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.from = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return JsonPatchOperation.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d;\n    const message = createBaseJsonPatchOperation();\n    message.op = (_a = object.op) != null ? _a : 0;\n    message.path = (_b = object.path) != null ? _b : \"\";\n    message.from = (_c = object.from) != null ? _c : void 0;\n    message.value = (_d = object.value) != null ? _d : void 0;\n    return message;\n  }\n};\n\n// src/generated/types.ts\n\nfunction createBaseToolCall() {\n  return { id: \"\", type: \"\", function: void 0 };\n}\nvar ToolCall = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.type !== \"\") {\n      writer.uint32(18).string(message.type);\n    }\n    if (message.function !== void 0) {\n      ToolCall_Function.encode(message.function, writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCall();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.type = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.function = ToolCall_Function.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCall.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCall();\n    message.id = (_a = object.id) != null ? _a : \"\";\n    message.type = (_b = object.type) != null ? _b : \"\";\n    message.function = object.function !== void 0 && object.function !== null ? ToolCall_Function.fromPartial(object.function) : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCall_Function() {\n  return { name: \"\", arguments: \"\" };\n}\nvar ToolCall_Function = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.name !== \"\") {\n      writer.uint32(10).string(message.name);\n    }\n    if (message.arguments !== \"\") {\n      writer.uint32(18).string(message.arguments);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCall_Function();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.arguments = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCall_Function.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCall_Function();\n    message.name = (_a = object.name) != null ? _a : \"\";\n    message.arguments = (_b = object.arguments) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseMessage() {\n  return {\n    id: \"\",\n    role: \"\",\n    content: void 0,\n    name: void 0,\n    toolCalls: [],\n    toolCallId: void 0,\n    error: void 0\n  };\n}\nvar Message = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.role !== \"\") {\n      writer.uint32(18).string(message.role);\n    }\n    if (message.content !== void 0) {\n      writer.uint32(26).string(message.content);\n    }\n    if (message.name !== void 0) {\n      writer.uint32(34).string(message.name);\n    }\n    for (const v of message.toolCalls) {\n      ToolCall.encode(v, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallId !== void 0) {\n      writer.uint32(50).string(message.toolCallId);\n    }\n    if (message.error !== void 0) {\n      writer.uint32(58).string(message.error);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseMessage();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.content = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.toolCalls.push(ToolCall.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n          message.error = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Message.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const message = createBaseMessage();\n    message.id = (_a = object.id) != null ? _a : \"\";\n    message.role = (_b = object.role) != null ? _b : \"\";\n    message.content = (_c = object.content) != null ? _c : void 0;\n    message.name = (_d = object.name) != null ? _d : void 0;\n    message.toolCalls = ((_e = object.toolCalls) == null ? void 0 : _e.map((e) => ToolCall.fromPartial(e))) || [];\n    message.toolCallId = (_f = object.toolCallId) != null ? _f : void 0;\n    message.error = (_g = object.error) != null ? _g : void 0;\n    return message;\n  }\n};\n\n// src/generated/events.ts\nvar EventType = /* @__PURE__ */ ((EventType3) => {\n  EventType3[EventType3[\"TEXT_MESSAGE_START\"] = 0] = \"TEXT_MESSAGE_START\";\n  EventType3[EventType3[\"TEXT_MESSAGE_CONTENT\"] = 1] = \"TEXT_MESSAGE_CONTENT\";\n  EventType3[EventType3[\"TEXT_MESSAGE_END\"] = 2] = \"TEXT_MESSAGE_END\";\n  EventType3[EventType3[\"TOOL_CALL_START\"] = 3] = \"TOOL_CALL_START\";\n  EventType3[EventType3[\"TOOL_CALL_ARGS\"] = 4] = \"TOOL_CALL_ARGS\";\n  EventType3[EventType3[\"TOOL_CALL_END\"] = 5] = \"TOOL_CALL_END\";\n  EventType3[EventType3[\"STATE_SNAPSHOT\"] = 6] = \"STATE_SNAPSHOT\";\n  EventType3[EventType3[\"STATE_DELTA\"] = 7] = \"STATE_DELTA\";\n  EventType3[EventType3[\"MESSAGES_SNAPSHOT\"] = 8] = \"MESSAGES_SNAPSHOT\";\n  EventType3[EventType3[\"RAW\"] = 9] = \"RAW\";\n  EventType3[EventType3[\"CUSTOM\"] = 10] = \"CUSTOM\";\n  EventType3[EventType3[\"RUN_STARTED\"] = 11] = \"RUN_STARTED\";\n  EventType3[EventType3[\"RUN_FINISHED\"] = 12] = \"RUN_FINISHED\";\n  EventType3[EventType3[\"RUN_ERROR\"] = 13] = \"RUN_ERROR\";\n  EventType3[EventType3[\"STEP_STARTED\"] = 14] = \"STEP_STARTED\";\n  EventType3[EventType3[\"STEP_FINISHED\"] = 15] = \"STEP_FINISHED\";\n  EventType3[EventType3[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n  return EventType3;\n})(EventType || {});\nfunction createBaseBaseEvent() {\n  return { type: 0, timestamp: void 0, rawEvent: void 0 };\n}\nvar BaseEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.type !== 0) {\n      writer.uint32(8).int32(message.type);\n    }\n    if (message.timestamp !== void 0) {\n      writer.uint32(16).int64(message.timestamp);\n    }\n    if (message.rawEvent !== void 0) {\n      Value.encode(Value.wrap(message.rawEvent), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.type = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 16) {\n            break;\n          }\n          message.timestamp = longToNumber(reader.int64());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.rawEvent = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return BaseEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseBaseEvent();\n    message.type = (_a = object.type) != null ? _a : 0;\n    message.timestamp = (_b = object.timestamp) != null ? _b : void 0;\n    message.rawEvent = (_c = object.rawEvent) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseTextMessageStartEvent() {\n  return { baseEvent: void 0, messageId: \"\", role: void 0 };\n}\nvar TextMessageStartEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== void 0) {\n      writer.uint32(26).string(message.role);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageStartEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseTextMessageStartEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    message.role = (_b = object.role) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseTextMessageContentEvent() {\n  return { baseEvent: void 0, messageId: \"\", delta: \"\" };\n}\nvar TextMessageContentEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageContentEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageContentEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseTextMessageContentEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    message.delta = (_b = object.delta) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseTextMessageEndEvent() {\n  return { baseEvent: void 0, messageId: \"\" };\n}\nvar TextMessageEndEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageEndEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseTextMessageEndEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseToolCallStartEvent() {\n  return { baseEvent: void 0, toolCallId: \"\", toolCallName: \"\", parentMessageId: void 0 };\n}\nvar ToolCallStartEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== \"\") {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== void 0) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.parentMessageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallStartEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseToolCallStartEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    message.toolCallName = (_b = object.toolCallName) != null ? _b : \"\";\n    message.parentMessageId = (_c = object.parentMessageId) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCallArgsEvent() {\n  return { baseEvent: void 0, toolCallId: \"\", delta: \"\" };\n}\nvar ToolCallArgsEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallArgsEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallArgsEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCallArgsEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    message.delta = (_b = object.delta) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseToolCallEndEvent() {\n  return { baseEvent: void 0, toolCallId: \"\" };\n}\nvar ToolCallEndEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallEndEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseToolCallEndEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseStateSnapshotEvent() {\n  return { baseEvent: void 0, snapshot: void 0 };\n}\nvar StateSnapshotEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.snapshot !== void 0) {\n      Value.encode(Value.wrap(message.snapshot), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStateSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.snapshot = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StateSnapshotEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStateSnapshotEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.snapshot = (_a = object.snapshot) != null ? _a : void 0;\n    return message;\n  }\n};\nfunction createBaseStateDeltaEvent() {\n  return { baseEvent: void 0, delta: [] };\n}\nvar StateDeltaEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.delta) {\n      JsonPatchOperation.encode(v, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStateDeltaEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.delta.push(JsonPatchOperation.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StateDeltaEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStateDeltaEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.delta = ((_a = object.delta) == null ? void 0 : _a.map((e) => JsonPatchOperation.fromPartial(e))) || [];\n    return message;\n  }\n};\nfunction createBaseMessagesSnapshotEvent() {\n  return { baseEvent: void 0, messages: [] };\n}\nvar MessagesSnapshotEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.messages) {\n      Message.encode(v, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseMessagesSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messages.push(Message.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return MessagesSnapshotEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseMessagesSnapshotEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messages = ((_a = object.messages) == null ? void 0 : _a.map((e) => Message.fromPartial(e))) || [];\n    return message;\n  }\n};\nfunction createBaseRawEvent() {\n  return { baseEvent: void 0, event: void 0, source: void 0 };\n}\nvar RawEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.event !== void 0) {\n      Value.encode(Value.wrap(message.event), writer.uint32(18).fork()).join();\n    }\n    if (message.source !== void 0) {\n      writer.uint32(26).string(message.source);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRawEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.event = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.source = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RawEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRawEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.event = (_a = object.event) != null ? _a : void 0;\n    message.source = (_b = object.source) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseCustomEvent() {\n  return { baseEvent: void 0, name: \"\", value: void 0 };\n}\nvar CustomEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.name !== \"\") {\n      writer.uint32(18).string(message.name);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseCustomEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return CustomEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseCustomEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.name = (_a = object.name) != null ? _a : \"\";\n    message.value = (_b = object.value) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseRunStartedEvent() {\n  return { baseEvent: void 0, threadId: \"\", runId: \"\" };\n}\nvar RunStartedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.runId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunStartedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRunStartedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.threadId = (_a = object.threadId) != null ? _a : \"\";\n    message.runId = (_b = object.runId) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseRunFinishedEvent() {\n  return { baseEvent: void 0, threadId: \"\", runId: \"\", result: void 0 };\n}\nvar RunFinishedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    if (message.result !== void 0) {\n      Value.encode(Value.wrap(message.result), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.runId = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.result = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunFinishedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseRunFinishedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.threadId = (_a = object.threadId) != null ? _a : \"\";\n    message.runId = (_b = object.runId) != null ? _b : \"\";\n    message.result = (_c = object.result) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseRunErrorEvent() {\n  return { baseEvent: void 0, code: void 0, message: \"\" };\n}\nvar RunErrorEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.code !== void 0) {\n      writer.uint32(18).string(message.code);\n    }\n    if (message.message !== \"\") {\n      writer.uint32(26).string(message.message);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunErrorEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.code = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.message = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunErrorEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRunErrorEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.code = (_a = object.code) != null ? _a : void 0;\n    message.message = (_b = object.message) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseStepStartedEvent() {\n  return { baseEvent: void 0, stepName: \"\" };\n}\nvar StepStartedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStepStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StepStartedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStepStartedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.stepName = (_a = object.stepName) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseStepFinishedEvent() {\n  return { baseEvent: void 0, stepName: \"\" };\n}\nvar StepFinishedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStepFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StepFinishedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStepFinishedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.stepName = (_a = object.stepName) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseTextMessageChunkEvent() {\n  return { baseEvent: void 0, messageId: void 0, role: void 0, delta: void 0 };\n}\nvar TextMessageChunkEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== void 0) {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== void 0) {\n      writer.uint32(26).string(message.role);\n    }\n    if (message.delta !== void 0) {\n      writer.uint32(34).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageChunkEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseTextMessageChunkEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : void 0;\n    message.role = (_b = object.role) != null ? _b : void 0;\n    message.delta = (_c = object.delta) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCallChunkEvent() {\n  return {\n    baseEvent: void 0,\n    toolCallId: void 0,\n    toolCallName: void 0,\n    parentMessageId: void 0,\n    delta: void 0\n  };\n}\nvar ToolCallChunkEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== void 0) {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== void 0) {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== void 0) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    if (message.delta !== void 0) {\n      writer.uint32(42).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.parentMessageId = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallChunkEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d;\n    const message = createBaseToolCallChunkEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : void 0;\n    message.toolCallName = (_b = object.toolCallName) != null ? _b : void 0;\n    message.parentMessageId = (_c = object.parentMessageId) != null ? _c : void 0;\n    message.delta = (_d = object.delta) != null ? _d : void 0;\n    return message;\n  }\n};\nfunction createBaseEvent() {\n  return {\n    textMessageStart: void 0,\n    textMessageContent: void 0,\n    textMessageEnd: void 0,\n    toolCallStart: void 0,\n    toolCallArgs: void 0,\n    toolCallEnd: void 0,\n    stateSnapshot: void 0,\n    stateDelta: void 0,\n    messagesSnapshot: void 0,\n    raw: void 0,\n    custom: void 0,\n    runStarted: void 0,\n    runFinished: void 0,\n    runError: void 0,\n    stepStarted: void 0,\n    stepFinished: void 0,\n    textMessageChunk: void 0,\n    toolCallChunk: void 0\n  };\n}\nvar Event = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.textMessageStart !== void 0) {\n      TextMessageStartEvent.encode(message.textMessageStart, writer.uint32(10).fork()).join();\n    }\n    if (message.textMessageContent !== void 0) {\n      TextMessageContentEvent.encode(message.textMessageContent, writer.uint32(18).fork()).join();\n    }\n    if (message.textMessageEnd !== void 0) {\n      TextMessageEndEvent.encode(message.textMessageEnd, writer.uint32(26).fork()).join();\n    }\n    if (message.toolCallStart !== void 0) {\n      ToolCallStartEvent.encode(message.toolCallStart, writer.uint32(34).fork()).join();\n    }\n    if (message.toolCallArgs !== void 0) {\n      ToolCallArgsEvent.encode(message.toolCallArgs, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallEnd !== void 0) {\n      ToolCallEndEvent.encode(message.toolCallEnd, writer.uint32(50).fork()).join();\n    }\n    if (message.stateSnapshot !== void 0) {\n      StateSnapshotEvent.encode(message.stateSnapshot, writer.uint32(58).fork()).join();\n    }\n    if (message.stateDelta !== void 0) {\n      StateDeltaEvent.encode(message.stateDelta, writer.uint32(66).fork()).join();\n    }\n    if (message.messagesSnapshot !== void 0) {\n      MessagesSnapshotEvent.encode(message.messagesSnapshot, writer.uint32(74).fork()).join();\n    }\n    if (message.raw !== void 0) {\n      RawEvent.encode(message.raw, writer.uint32(82).fork()).join();\n    }\n    if (message.custom !== void 0) {\n      CustomEvent.encode(message.custom, writer.uint32(90).fork()).join();\n    }\n    if (message.runStarted !== void 0) {\n      RunStartedEvent.encode(message.runStarted, writer.uint32(98).fork()).join();\n    }\n    if (message.runFinished !== void 0) {\n      RunFinishedEvent.encode(message.runFinished, writer.uint32(106).fork()).join();\n    }\n    if (message.runError !== void 0) {\n      RunErrorEvent.encode(message.runError, writer.uint32(114).fork()).join();\n    }\n    if (message.stepStarted !== void 0) {\n      StepStartedEvent.encode(message.stepStarted, writer.uint32(122).fork()).join();\n    }\n    if (message.stepFinished !== void 0) {\n      StepFinishedEvent.encode(message.stepFinished, writer.uint32(130).fork()).join();\n    }\n    if (message.textMessageChunk !== void 0) {\n      TextMessageChunkEvent.encode(message.textMessageChunk, writer.uint32(138).fork()).join();\n    }\n    if (message.toolCallChunk !== void 0) {\n      ToolCallChunkEvent.encode(message.toolCallChunk, writer.uint32(146).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.textMessageStart = TextMessageStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.textMessageContent = TextMessageContentEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.textMessageEnd = TextMessageEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.toolCallStart = ToolCallStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.toolCallArgs = ToolCallArgsEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.toolCallEnd = ToolCallEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n          message.stateSnapshot = StateSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 8: {\n          if (tag !== 66) {\n            break;\n          }\n          message.stateDelta = StateDeltaEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 9: {\n          if (tag !== 74) {\n            break;\n          }\n          message.messagesSnapshot = MessagesSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 10: {\n          if (tag !== 82) {\n            break;\n          }\n          message.raw = RawEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 11: {\n          if (tag !== 90) {\n            break;\n          }\n          message.custom = CustomEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 12: {\n          if (tag !== 98) {\n            break;\n          }\n          message.runStarted = RunStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 13: {\n          if (tag !== 106) {\n            break;\n          }\n          message.runFinished = RunFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 14: {\n          if (tag !== 114) {\n            break;\n          }\n          message.runError = RunErrorEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 15: {\n          if (tag !== 122) {\n            break;\n          }\n          message.stepStarted = StepStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 16: {\n          if (tag !== 130) {\n            break;\n          }\n          message.stepFinished = StepFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 17: {\n          if (tag !== 138) {\n            break;\n          }\n          message.textMessageChunk = TextMessageChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 18: {\n          if (tag !== 146) {\n            break;\n          }\n          message.toolCallChunk = ToolCallChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Event.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    const message = createBaseEvent();\n    message.textMessageStart = object.textMessageStart !== void 0 && object.textMessageStart !== null ? TextMessageStartEvent.fromPartial(object.textMessageStart) : void 0;\n    message.textMessageContent = object.textMessageContent !== void 0 && object.textMessageContent !== null ? TextMessageContentEvent.fromPartial(object.textMessageContent) : void 0;\n    message.textMessageEnd = object.textMessageEnd !== void 0 && object.textMessageEnd !== null ? TextMessageEndEvent.fromPartial(object.textMessageEnd) : void 0;\n    message.toolCallStart = object.toolCallStart !== void 0 && object.toolCallStart !== null ? ToolCallStartEvent.fromPartial(object.toolCallStart) : void 0;\n    message.toolCallArgs = object.toolCallArgs !== void 0 && object.toolCallArgs !== null ? ToolCallArgsEvent.fromPartial(object.toolCallArgs) : void 0;\n    message.toolCallEnd = object.toolCallEnd !== void 0 && object.toolCallEnd !== null ? ToolCallEndEvent.fromPartial(object.toolCallEnd) : void 0;\n    message.stateSnapshot = object.stateSnapshot !== void 0 && object.stateSnapshot !== null ? StateSnapshotEvent.fromPartial(object.stateSnapshot) : void 0;\n    message.stateDelta = object.stateDelta !== void 0 && object.stateDelta !== null ? StateDeltaEvent.fromPartial(object.stateDelta) : void 0;\n    message.messagesSnapshot = object.messagesSnapshot !== void 0 && object.messagesSnapshot !== null ? MessagesSnapshotEvent.fromPartial(object.messagesSnapshot) : void 0;\n    message.raw = object.raw !== void 0 && object.raw !== null ? RawEvent.fromPartial(object.raw) : void 0;\n    message.custom = object.custom !== void 0 && object.custom !== null ? CustomEvent.fromPartial(object.custom) : void 0;\n    message.runStarted = object.runStarted !== void 0 && object.runStarted !== null ? RunStartedEvent.fromPartial(object.runStarted) : void 0;\n    message.runFinished = object.runFinished !== void 0 && object.runFinished !== null ? RunFinishedEvent.fromPartial(object.runFinished) : void 0;\n    message.runError = object.runError !== void 0 && object.runError !== null ? RunErrorEvent.fromPartial(object.runError) : void 0;\n    message.stepStarted = object.stepStarted !== void 0 && object.stepStarted !== null ? StepStartedEvent.fromPartial(object.stepStarted) : void 0;\n    message.stepFinished = object.stepFinished !== void 0 && object.stepFinished !== null ? StepFinishedEvent.fromPartial(object.stepFinished) : void 0;\n    message.textMessageChunk = object.textMessageChunk !== void 0 && object.textMessageChunk !== null ? TextMessageChunkEvent.fromPartial(object.textMessageChunk) : void 0;\n    message.toolCallChunk = object.toolCallChunk !== void 0 && object.toolCallChunk !== null ? ToolCallChunkEvent.fromPartial(object.toolCallChunk) : void 0;\n    return message;\n  }\n};\nfunction longToNumber(int64) {\n  const num = globalThis.Number(int64.toString());\n  if (num > globalThis.Number.MAX_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n  }\n  if (num < globalThis.Number.MIN_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is smaller than Number.MIN_SAFE_INTEGER\");\n  }\n  return num;\n}\n\n// src/proto.ts\nfunction toCamelCase(str) {\n  return str.toLowerCase().replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\nfunction encode(event) {\n  const oneofField = toCamelCase(event.type);\n  const { type, timestamp, rawEvent, ...rest } = event;\n  if (type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT) {\n    rest.messages = rest.messages.map((message) => {\n      const untypedMessage = message;\n      if (untypedMessage.toolCalls === void 0) {\n        return { ...message, toolCalls: [] };\n      }\n      return message;\n    });\n  }\n  if (type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA) {\n    rest.delta = rest.delta.map((operation) => ({\n      ...operation,\n      op: JsonPatchOperationType[operation.op.toUpperCase()]\n    }));\n  }\n  const eventMessage = {\n    [oneofField]: {\n      baseEvent: {\n        type: EventType[event.type],\n        timestamp,\n        rawEvent\n      },\n      ...rest\n    }\n  };\n  return Event.encode(eventMessage).finish();\n}\nfunction decode(data) {\n  var _a;\n  const event = Event.decode(data);\n  const decoded = Object.values(event).find((value) => value !== void 0);\n  if (!decoded) {\n    throw new Error(\"Invalid event\");\n  }\n  decoded.type = EventType[decoded.baseEvent.type];\n  decoded.timestamp = decoded.baseEvent.timestamp;\n  decoded.rawEvent = decoded.baseEvent.rawEvent;\n  if (decoded.type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT) {\n    for (const message of decoded.messages) {\n      const untypedMessage = message;\n      if (((_a = untypedMessage.toolCalls) == null ? void 0 : _a.length) === 0) {\n        untypedMessage.toolCalls = void 0;\n      }\n    }\n  }\n  if (decoded.type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA) {\n    for (const operation of decoded.delta) {\n      operation.op = JsonPatchOperationType[operation.op].toLowerCase();\n      Object.keys(operation).forEach((key) => {\n        if (operation[key] === void 0) {\n          delete operation[key];\n        }\n      });\n    }\n  }\n  Object.keys(decoded).forEach((key) => {\n    if (decoded[key] === void 0) {\n      delete decoded[key];\n    }\n  });\n  return _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas.parse(decoded);\n}\n\n// src/index.ts\nvar AGUI_MEDIA_TYPE = \"application/vnd.ag-ui.event+proto\";\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L2NvcmUvbm9kZV9tb2R1bGVzL0BhZy11aS9wcm90by9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ29FOztBQUVwRTtBQUN1Rzs7QUFFdkc7QUFDcUU7QUFDckU7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBWTtBQUMzQztBQUNBO0FBQ0Esb0NBQW9DLFlBQVk7QUFDaEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQVksZUFBZSxpRUFBWTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHNEQUFzRDtBQUN0RCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStCLGlFQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFZLGVBQWUsaUVBQVk7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGtFQUFrRTtBQUNsRSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQVksZUFBZSxpRUFBWTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxREFBcUQ7QUFDckQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFFQUFxRTtBQUNyRSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHVFQUF1RTtBQUN2RSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdB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QTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0RBQXdEO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStCLGlFQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFhLGVBQWUsaUVBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsMkRBQTJEO0FBQzNELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStCLGlFQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFhLGVBQWUsaUVBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsK0RBQStEO0FBQy9ELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStC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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFhLGVBQWUsaUVBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EscURBQXFEO0FBQ3JELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxQ0FBcUM7QUFDL0MsZUFBZSxrREFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGVBQWUsa0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrREFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrREFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMscURBQVk7QUFDckI7O0FBRUE7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3RyYXZlbC11aS9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L2NvcmUvbm9kZV9tb2R1bGVzL0BhZy11aS9wcm90by9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvcHJvdG8udHNcbmltcG9ydCB7IEV2ZW50U2NoZW1hcywgRXZlbnRUeXBlIGFzIEV2ZW50VHlwZTIgfSBmcm9tIFwiQGFnLXVpL2NvcmVcIjtcblxuLy8gc3JjL2dlbmVyYXRlZC9ldmVudHMudHNcbmltcG9ydCB7IEJpbmFyeVJlYWRlciBhcyBCaW5hcnlSZWFkZXI0LCBCaW5hcnlXcml0ZXIgYXMgQmluYXJ5V3JpdGVyNCB9IGZyb20gXCJAYnVmYnVpbGQvcHJvdG9idWYvd2lyZVwiO1xuXG4vLyBzcmMvZ2VuZXJhdGVkL2dvb2dsZS9wcm90b2J1Zi9zdHJ1Y3QudHNcbmltcG9ydCB7IEJpbmFyeVJlYWRlciwgQmluYXJ5V3JpdGVyIH0gZnJvbSBcIkBidWZidWlsZC9wcm90b2J1Zi93aXJlXCI7XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RydWN0KCkge1xuICByZXR1cm4geyBmaWVsZHM6IHt9IH07XG59XG52YXIgU3RydWN0ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7XG4gICAgT2JqZWN0LmVudHJpZXMobWVzc2FnZS5maWVsZHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgU3RydWN0X0ZpZWxkc0VudHJ5LmVuY29kZSh7IGtleSwgdmFsdWUgfSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcihpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0cnVjdCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGVudHJ5MSA9IFN0cnVjdF9GaWVsZHNFbnRyeS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGlmIChlbnRyeTEudmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbWVzc2FnZS5maWVsZHNbZW50cnkxLmtleV0gPSBlbnRyeTEudmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gU3RydWN0LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0cnVjdCgpO1xuICAgIG1lc3NhZ2UuZmllbGRzID0gT2JqZWN0LmVudHJpZXMoKF9hID0gb2JqZWN0LmZpZWxkcykgIT0gbnVsbCA/IF9hIDoge30pLnJlZHVjZShcbiAgICAgIChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgIGFjY1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sXG4gICAgICB7fVxuICAgICk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIHdyYXAob2JqZWN0KSB7XG4gICAgY29uc3Qgc3RydWN0ID0gY3JlYXRlQmFzZVN0cnVjdCgpO1xuICAgIGlmIChvYmplY3QgIT09IHZvaWQgMCkge1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob2JqZWN0KSkge1xuICAgICAgICBzdHJ1Y3QuZmllbGRzW2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0cnVjdDtcbiAgfSxcbiAgdW53cmFwKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBvYmplY3QgPSB7fTtcbiAgICBpZiAobWVzc2FnZS5maWVsZHMpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG1lc3NhZ2UuZmllbGRzKSkge1xuICAgICAgICBvYmplY3Rba2V5XSA9IG1lc3NhZ2UuZmllbGRzW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RydWN0X0ZpZWxkc0VudHJ5KCkge1xuICByZXR1cm4geyBrZXk6IFwiXCIsIHZhbHVlOiB2b2lkIDAgfTtcbn1cbnZhciBTdHJ1Y3RfRmllbGRzRW50cnkgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHtcbiAgICBpZiAobWVzc2FnZS5rZXkgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmtleSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIFZhbHVlLmVuY29kZShWYWx1ZS53cmFwKG1lc3NhZ2UudmFsdWUpLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcihpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0cnVjdF9GaWVsZHNFbnRyeSgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uua2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IFZhbHVlLnVud3JhcChWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFN0cnVjdF9GaWVsZHNFbnRyeS5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RydWN0X0ZpZWxkc0VudHJ5KCk7XG4gICAgbWVzc2FnZS5rZXkgPSAoX2EgPSBvYmplY3Qua2V5KSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UudmFsdWUgPSAoX2IgPSBvYmplY3QudmFsdWUpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VWYWx1ZSgpIHtcbiAgcmV0dXJuIHtcbiAgICBudWxsVmFsdWU6IHZvaWQgMCxcbiAgICBudW1iZXJWYWx1ZTogdm9pZCAwLFxuICAgIHN0cmluZ1ZhbHVlOiB2b2lkIDAsXG4gICAgYm9vbFZhbHVlOiB2b2lkIDAsXG4gICAgc3RydWN0VmFsdWU6IHZvaWQgMCxcbiAgICBsaXN0VmFsdWU6IHZvaWQgMFxuICB9O1xufVxudmFyIFZhbHVlID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7XG4gICAgaWYgKG1lc3NhZ2UubnVsbFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5udWxsVmFsdWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5udW1iZXJWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE3KS5kb3VibGUobWVzc2FnZS5udW1iZXJWYWx1ZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0cmluZ1ZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnN0cmluZ1ZhbHVlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuYm9vbFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMzIpLmJvb2wobWVzc2FnZS5ib29sVmFsdWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdHJ1Y3RWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBTdHJ1Y3QuZW5jb2RlKFN0cnVjdC53cmFwKG1lc3NhZ2Uuc3RydWN0VmFsdWUpLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubGlzdFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIExpc3RWYWx1ZS5lbmNvZGUoTGlzdFZhbHVlLndyYXAobWVzc2FnZS5saXN0VmFsdWUpLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcihpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVZhbHVlKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm51bGxWYWx1ZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE3KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5udW1iZXJWYWx1ZSA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RyaW5nVmFsdWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMzIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJvb2xWYWx1ZSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA1OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNDIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0cnVjdFZhbHVlID0gU3RydWN0LnVud3JhcChTdHJ1Y3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA2OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmxpc3RWYWx1ZSA9IExpc3RWYWx1ZS51bndyYXAoTGlzdFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVmFsdWUuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VWYWx1ZSgpO1xuICAgIG1lc3NhZ2UubnVsbFZhbHVlID0gKF9hID0gb2JqZWN0Lm51bGxWYWx1ZSkgIT0gbnVsbCA/IF9hIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubnVtYmVyVmFsdWUgPSAoX2IgPSBvYmplY3QubnVtYmVyVmFsdWUpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnN0cmluZ1ZhbHVlID0gKF9jID0gb2JqZWN0LnN0cmluZ1ZhbHVlKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5ib29sVmFsdWUgPSAoX2QgPSBvYmplY3QuYm9vbFZhbHVlKSAhPSBudWxsID8gX2QgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdHJ1Y3RWYWx1ZSA9IChfZSA9IG9iamVjdC5zdHJ1Y3RWYWx1ZSkgIT0gbnVsbCA/IF9lIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubGlzdFZhbHVlID0gKF9mID0gb2JqZWN0Lmxpc3RWYWx1ZSkgIT0gbnVsbCA/IF9mIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICB3cmFwKHZhbHVlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQmFzZVZhbHVlKCk7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICByZXN1bHQubnVsbFZhbHVlID0gMCAvKiBOVUxMX1ZBTFVFICovO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgcmVzdWx0LmJvb2xWYWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXN1bHQubnVtYmVyVmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmVzdWx0LnN0cmluZ1ZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChnbG9iYWxUaGlzLkFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXN1bHQubGlzdFZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJlc3VsdC5zdHJ1Y3RWYWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcIlVuc3VwcG9ydGVkIGFueSB2YWx1ZSB0eXBlOiBcIiArIHR5cGVvZiB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG4gIHVud3JhcChtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2Uuc3RyaW5nVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG1lc3NhZ2Uuc3RyaW5nVmFsdWU7XG4gICAgfSBlbHNlIGlmICgobWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZS5udW1iZXJWYWx1ZSkgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG1lc3NhZ2UubnVtYmVyVmFsdWU7XG4gICAgfSBlbHNlIGlmICgobWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZS5ib29sVmFsdWUpICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBtZXNzYWdlLmJvb2xWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKChtZXNzYWdlID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlLnN0cnVjdFZhbHVlKSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZS5zdHJ1Y3RWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKChtZXNzYWdlID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlLmxpc3RWYWx1ZSkgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG1lc3NhZ2UubGlzdFZhbHVlO1xuICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG1lc3NhZ2UubnVsbFZhbHVlKSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMaXN0VmFsdWUoKSB7XG4gIHJldHVybiB7IHZhbHVlczogW10gfTtcbn1cbnZhciBMaXN0VmFsdWUgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHtcbiAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS52YWx1ZXMpIHtcbiAgICAgIFZhbHVlLmVuY29kZShWYWx1ZS53cmFwKHYpLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcihpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RWYWx1ZSgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudmFsdWVzLnB1c2goVmFsdWUudW53cmFwKFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIExpc3RWYWx1ZS5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0VmFsdWUoKTtcbiAgICBtZXNzYWdlLnZhbHVlcyA9ICgoX2EgPSBvYmplY3QudmFsdWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIHdyYXAoYXJyYXkpIHtcbiAgICBjb25zdCByZXN1bHQgPSBjcmVhdGVCYXNlTGlzdFZhbHVlKCk7XG4gICAgcmVzdWx0LnZhbHVlcyA9IGFycmF5ICE9IG51bGwgPyBhcnJheSA6IFtdO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG4gIHVud3JhcChtZXNzYWdlKSB7XG4gICAgaWYgKChtZXNzYWdlID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidmFsdWVzXCIpKSAmJiBnbG9iYWxUaGlzLkFycmF5LmlzQXJyYXkobWVzc2FnZS52YWx1ZXMpKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZS52YWx1ZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2dlbmVyYXRlZC9wYXRjaC50c1xuaW1wb3J0IHsgQmluYXJ5UmVhZGVyIGFzIEJpbmFyeVJlYWRlcjIsIEJpbmFyeVdyaXRlciBhcyBCaW5hcnlXcml0ZXIyIH0gZnJvbSBcIkBidWZidWlsZC9wcm90b2J1Zi93aXJlXCI7XG52YXIgSnNvblBhdGNoT3BlcmF0aW9uVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyAoKEpzb25QYXRjaE9wZXJhdGlvblR5cGUyKSA9PiB7XG4gIEpzb25QYXRjaE9wZXJhdGlvblR5cGUyW0pzb25QYXRjaE9wZXJhdGlvblR5cGUyW1wiQUREXCJdID0gMF0gPSBcIkFERFwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIlJFTU9WRVwiXSA9IDFdID0gXCJSRU1PVkVcIjtcbiAgSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbXCJSRVBMQUNFXCJdID0gMl0gPSBcIlJFUExBQ0VcIjtcbiAgSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbXCJNT1ZFXCJdID0gM10gPSBcIk1PVkVcIjtcbiAgSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbXCJDT1BZXCJdID0gNF0gPSBcIkNPUFlcIjtcbiAgSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbXCJURVNUXCJdID0gNV0gPSBcIlRFU1RcIjtcbiAgSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xuICByZXR1cm4gSnNvblBhdGNoT3BlcmF0aW9uVHlwZTI7XG59KShKc29uUGF0Y2hPcGVyYXRpb25UeXBlIHx8IHt9KTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VKc29uUGF0Y2hPcGVyYXRpb24oKSB7XG4gIHJldHVybiB7IG9wOiAwLCBwYXRoOiBcIlwiLCBmcm9tOiB2b2lkIDAsIHZhbHVlOiB2b2lkIDAgfTtcbn1cbnZhciBKc29uUGF0Y2hPcGVyYXRpb24gPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyMigpKSB7XG4gICAgaWYgKG1lc3NhZ2Uub3AgIT09IDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5vcCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnBhdGggIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnBhdGgpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5mcm9tICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLmZyb20pO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS52YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBWYWx1ZS5lbmNvZGUoVmFsdWUud3JhcChtZXNzYWdlLnZhbHVlKSwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIyID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyMihpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUpzb25QYXRjaE9wZXJhdGlvbigpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5vcCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5wYXRoID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5mcm9tID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDM0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IFZhbHVlLnVud3JhcChWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIEpzb25QYXRjaE9wZXJhdGlvbi5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VKc29uUGF0Y2hPcGVyYXRpb24oKTtcbiAgICBtZXNzYWdlLm9wID0gKF9hID0gb2JqZWN0Lm9wKSAhPSBudWxsID8gX2EgOiAwO1xuICAgIG1lc3NhZ2UucGF0aCA9IChfYiA9IG9iamVjdC5wYXRoKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIG1lc3NhZ2UuZnJvbSA9IChfYyA9IG9iamVjdC5mcm9tKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS52YWx1ZSA9IChfZCA9IG9iamVjdC52YWx1ZSkgIT0gbnVsbCA/IF9kIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuXG4vLyBzcmMvZ2VuZXJhdGVkL3R5cGVzLnRzXG5pbXBvcnQgeyBCaW5hcnlSZWFkZXIgYXMgQmluYXJ5UmVhZGVyMywgQmluYXJ5V3JpdGVyIGFzIEJpbmFyeVdyaXRlcjMgfSBmcm9tIFwiQGJ1ZmJ1aWxkL3Byb3RvYnVmL3dpcmVcIjtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUb29sQ2FsbCgpIHtcbiAgcmV0dXJuIHsgaWQ6IFwiXCIsIHR5cGU6IFwiXCIsIGZ1bmN0aW9uOiB2b2lkIDAgfTtcbn1cbnZhciBUb29sQ2FsbCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIzKCkpIHtcbiAgICBpZiAobWVzc2FnZS5pZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuaWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50eXBlICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50eXBlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZnVuY3Rpb24gIT09IHZvaWQgMCkge1xuICAgICAgVG9vbENhbGxfRnVuY3Rpb24uZW5jb2RlKG1lc3NhZ2UuZnVuY3Rpb24sIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyMyA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjMoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmZ1bmN0aW9uID0gVG9vbENhbGxfRnVuY3Rpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRvb2xDYWxsLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbCgpO1xuICAgIG1lc3NhZ2UuaWQgPSAoX2EgPSBvYmplY3QuaWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS50eXBlID0gKF9iID0gb2JqZWN0LnR5cGUpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gICAgbWVzc2FnZS5mdW5jdGlvbiA9IG9iamVjdC5mdW5jdGlvbiAhPT0gdm9pZCAwICYmIG9iamVjdC5mdW5jdGlvbiAhPT0gbnVsbCA/IFRvb2xDYWxsX0Z1bmN0aW9uLmZyb21QYXJ0aWFsKG9iamVjdC5mdW5jdGlvbikgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVG9vbENhbGxfRnVuY3Rpb24oKSB7XG4gIHJldHVybiB7IG5hbWU6IFwiXCIsIGFyZ3VtZW50czogXCJcIiB9O1xufVxudmFyIFRvb2xDYWxsX0Z1bmN0aW9uID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjMoKSkge1xuICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5hcmd1bWVudHMgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIzID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyMyhpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsX0Z1bmN0aW9uKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5hcmd1bWVudHMgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUb29sQ2FsbF9GdW5jdGlvbi5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxfRnVuY3Rpb24oKTtcbiAgICBtZXNzYWdlLm5hbWUgPSAoX2EgPSBvYmplY3QubmFtZSkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLmFyZ3VtZW50cyA9IChfYiA9IG9iamVjdC5hcmd1bWVudHMpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTWVzc2FnZSgpIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJcIixcbiAgICByb2xlOiBcIlwiLFxuICAgIGNvbnRlbnQ6IHZvaWQgMCxcbiAgICBuYW1lOiB2b2lkIDAsXG4gICAgdG9vbENhbGxzOiBbXSxcbiAgICB0b29sQ2FsbElkOiB2b2lkIDAsXG4gICAgZXJyb3I6IHZvaWQgMFxuICB9O1xufVxudmFyIE1lc3NhZ2UgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyMygpKSB7XG4gICAgaWYgKG1lc3NhZ2UuaWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmlkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2Uucm9sZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmNvbnRlbnQgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UuY29udGVudCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnRvb2xDYWxscykge1xuICAgICAgVG9vbENhbGwuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbElkICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5lcnJvciAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDU4KS5zdHJpbmcobWVzc2FnZS5lcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIzID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyMyhpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU1lc3NhZ2UoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5yb2xlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5jb250ZW50ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDM0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDQyKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbHMucHVzaChUb29sQ2FsbC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA1MCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDc6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA1OCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuZXJyb3IgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBNZXNzYWdlLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU1lc3NhZ2UoKTtcbiAgICBtZXNzYWdlLmlkID0gKF9hID0gb2JqZWN0LmlkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2Uucm9sZSA9IChfYiA9IG9iamVjdC5yb2xlKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIG1lc3NhZ2UuY29udGVudCA9IChfYyA9IG9iamVjdC5jb250ZW50KSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5uYW1lID0gKF9kID0gb2JqZWN0Lm5hbWUpICE9IG51bGwgPyBfZCA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRvb2xDYWxscyA9ICgoX2UgPSBvYmplY3QudG9vbENhbGxzKSA9PSBudWxsID8gdm9pZCAwIDogX2UubWFwKChlKSA9PiBUb29sQ2FsbC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IChfZiA9IG9iamVjdC50b29sQ2FsbElkKSAhPSBudWxsID8gX2YgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5lcnJvciA9IChfZyA9IG9iamVjdC5lcnJvcikgIT0gbnVsbCA/IF9nIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuXG4vLyBzcmMvZ2VuZXJhdGVkL2V2ZW50cy50c1xudmFyIEV2ZW50VHlwZSA9IC8qIEBfX1BVUkVfXyAqLyAoKEV2ZW50VHlwZTMpID0+IHtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiVEVYVF9NRVNTQUdFX1NUQVJUXCJdID0gMF0gPSBcIlRFWFRfTUVTU0FHRV9TVEFSVFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJURVhUX01FU1NBR0VfQ09OVEVOVFwiXSA9IDFdID0gXCJURVhUX01FU1NBR0VfQ09OVEVOVFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJURVhUX01FU1NBR0VfRU5EXCJdID0gMl0gPSBcIlRFWFRfTUVTU0FHRV9FTkRcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiVE9PTF9DQUxMX1NUQVJUXCJdID0gM10gPSBcIlRPT0xfQ0FMTF9TVEFSVFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJUT09MX0NBTExfQVJHU1wiXSA9IDRdID0gXCJUT09MX0NBTExfQVJHU1wiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJUT09MX0NBTExfRU5EXCJdID0gNV0gPSBcIlRPT0xfQ0FMTF9FTkRcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiU1RBVEVfU05BUFNIT1RcIl0gPSA2XSA9IFwiU1RBVEVfU05BUFNIT1RcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiU1RBVEVfREVMVEFcIl0gPSA3XSA9IFwiU1RBVEVfREVMVEFcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiTUVTU0FHRVNfU05BUFNIT1RcIl0gPSA4XSA9IFwiTUVTU0FHRVNfU05BUFNIT1RcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiUkFXXCJdID0gOV0gPSBcIlJBV1wiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJDVVNUT01cIl0gPSAxMF0gPSBcIkNVU1RPTVwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJSVU5fU1RBUlRFRFwiXSA9IDExXSA9IFwiUlVOX1NUQVJURURcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiUlVOX0ZJTklTSEVEXCJdID0gMTJdID0gXCJSVU5fRklOSVNIRURcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiUlVOX0VSUk9SXCJdID0gMTNdID0gXCJSVU5fRVJST1JcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiU1RFUF9TVEFSVEVEXCJdID0gMTRdID0gXCJTVEVQX1NUQVJURURcIjtcbiAgRXZlbnRUeXBlM1tFdmVudFR5cGUzW1wiU1RFUF9GSU5JU0hFRFwiXSA9IDE1XSA9IFwiU1RFUF9GSU5JU0hFRFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xuICByZXR1cm4gRXZlbnRUeXBlMztcbn0pKEV2ZW50VHlwZSB8fCB7fSk7XG5mdW5jdGlvbiBjcmVhdGVCYXNlQmFzZUV2ZW50KCkge1xuICByZXR1cm4geyB0eXBlOiAwLCB0aW1lc3RhbXA6IHZvaWQgMCwgcmF3RXZlbnQ6IHZvaWQgMCB9O1xufVxudmFyIEJhc2VFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS50eXBlICE9PSAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UudHlwZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRpbWVzdGFtcCAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQ2NChtZXNzYWdlLnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJhd0V2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIFZhbHVlLmVuY29kZShWYWx1ZS53cmFwKG1lc3NhZ2UucmF3RXZlbnQpLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQmFzZUV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucmF3RXZlbnQgPSBWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBCYXNlRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VCYXNlRXZlbnQoKTtcbiAgICBtZXNzYWdlLnR5cGUgPSAoX2EgPSBvYmplY3QudHlwZSkgIT0gbnVsbCA/IF9hIDogMDtcbiAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IChfYiA9IG9iamVjdC50aW1lc3RhbXApICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnJhd0V2ZW50ID0gKF9jID0gb2JqZWN0LnJhd0V2ZW50KSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VTdGFydEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgbWVzc2FnZUlkOiBcIlwiLCByb2xlOiB2b2lkIDAgfTtcbn1cbnZhciBUZXh0TWVzc2FnZVN0YXJ0RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5tZXNzYWdlSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm1lc3NhZ2VJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJvbGUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2Uucm9sZSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRleHRNZXNzYWdlU3RhcnRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uucm9sZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRleHRNZXNzYWdlU3RhcnRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VTdGFydEV2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IChfYSA9IG9iamVjdC5tZXNzYWdlSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS5yb2xlID0gKF9iID0gb2JqZWN0LnJvbGUpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUNvbnRlbnRFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIG1lc3NhZ2VJZDogXCJcIiwgZGVsdGE6IFwiXCIgfTtcbn1cbnZhciBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZUlkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZGVsdGEgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLmRlbHRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5tZXNzYWdlSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmRlbHRhID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRleHRNZXNzYWdlQ29udGVudEV2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IChfYSA9IG9iamVjdC5tZXNzYWdlSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS5kZWx0YSA9IChfYiA9IG9iamVjdC5kZWx0YSkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUVuZEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgbWVzc2FnZUlkOiBcIlwiIH07XG59XG52YXIgVGV4dE1lc3NhZ2VFbmRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VFbmRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRleHRNZXNzYWdlRW5kRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VFbmRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlSWQgPSAoX2EgPSBvYmplY3QubWVzc2FnZUlkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsU3RhcnRFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHRvb2xDYWxsSWQ6IFwiXCIsIHRvb2xDYWxsTmFtZTogXCJcIiwgcGFyZW50TWVzc2FnZUlkOiB2b2lkIDAgfTtcbn1cbnZhciBUb29sQ2FsbFN0YXJ0RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbElkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbElkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxOYW1lICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbE5hbWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UucGFyZW50TWVzc2FnZUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxTdGFydEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxOYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDM0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUb29sQ2FsbFN0YXJ0RXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbFN0YXJ0RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IChfYSA9IG9iamVjdC50b29sQ2FsbElkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UudG9vbENhbGxOYW1lID0gKF9iID0gb2JqZWN0LnRvb2xDYWxsTmFtZSkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICBtZXNzYWdlLnBhcmVudE1lc3NhZ2VJZCA9IChfYyA9IG9iamVjdC5wYXJlbnRNZXNzYWdlSWQpICE9IG51bGwgPyBfYyA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUb29sQ2FsbEFyZ3NFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHRvb2xDYWxsSWQ6IFwiXCIsIGRlbHRhOiBcIlwiIH07XG59XG52YXIgVG9vbENhbGxBcmdzRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbElkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbElkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZGVsdGEgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLmRlbHRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxBcmdzRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbElkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5kZWx0YSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRvb2xDYWxsQXJnc0V2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbEFyZ3NFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbElkID0gKF9hID0gb2JqZWN0LnRvb2xDYWxsSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS5kZWx0YSA9IChfYiA9IG9iamVjdC5kZWx0YSkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUb29sQ2FsbEVuZEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgdG9vbENhbGxJZDogXCJcIiB9O1xufVxudmFyIFRvb2xDYWxsRW5kRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbElkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbElkKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxFbmRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUb29sQ2FsbEVuZEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsRW5kRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IChfYSA9IG9iamVjdC50b29sQ2FsbElkKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0YXRlU25hcHNob3RFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHNuYXBzaG90OiB2b2lkIDAgfTtcbn1cbnZhciBTdGF0ZVNuYXBzaG90RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zbmFwc2hvdCAhPT0gdm9pZCAwKSB7XG4gICAgICBWYWx1ZS5lbmNvZGUoVmFsdWUud3JhcChtZXNzYWdlLnNuYXBzaG90KSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0YXRlU25hcHNob3RFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnNuYXBzaG90ID0gVmFsdWUudW53cmFwKFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gU3RhdGVTbmFwc2hvdEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0YXRlU25hcHNob3RFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zbmFwc2hvdCA9IChfYSA9IG9iamVjdC5zbmFwc2hvdCkgIT0gbnVsbCA/IF9hIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0YXRlRGVsdGFFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIGRlbHRhOiBbXSB9O1xufVxudmFyIFN0YXRlRGVsdGFFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmRlbHRhKSB7XG4gICAgICBKc29uUGF0Y2hPcGVyYXRpb24uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGF0ZURlbHRhRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5kZWx0YS5wdXNoKEpzb25QYXRjaE9wZXJhdGlvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFN0YXRlRGVsdGFFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGF0ZURlbHRhRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuZGVsdGEgPSAoKF9hID0gb2JqZWN0LmRlbHRhKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBKc29uUGF0Y2hPcGVyYXRpb24uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VNZXNzYWdlc1NuYXBzaG90RXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBtZXNzYWdlczogW10gfTtcbn1cbnZhciBNZXNzYWdlc1NuYXBzaG90RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5tZXNzYWdlcykge1xuICAgICAgTWVzc2FnZS5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU1lc3NhZ2VzU25hcHNob3RFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzLnB1c2goTWVzc2FnZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIE1lc3NhZ2VzU25hcHNob3RFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VNZXNzYWdlc1NuYXBzaG90RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubWVzc2FnZXMgPSAoKF9hID0gb2JqZWN0Lm1lc3NhZ2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBNZXNzYWdlLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUmF3RXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBldmVudDogdm9pZCAwLCBzb3VyY2U6IHZvaWQgMCB9O1xufVxudmFyIFJhd0V2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS5ldmVudCksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zb3VyY2UgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2Uuc291cmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUmF3RXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5ldmVudCA9IFZhbHVlLnVud3JhcChWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc291cmNlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gUmF3RXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJhd0V2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLmV2ZW50ID0gKF9hID0gb2JqZWN0LmV2ZW50KSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zb3VyY2UgPSAoX2IgPSBvYmplY3Quc291cmNlKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlQ3VzdG9tRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBuYW1lOiBcIlwiLCB2YWx1ZTogdm9pZCAwIH07XG59XG52YXIgQ3VzdG9tRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS52YWx1ZSksIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDdXN0b21FdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gVmFsdWUudW53cmFwKFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gQ3VzdG9tRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUN1c3RvbUV2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLm5hbWUgPSAoX2EgPSBvYmplY3QubmFtZSkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLnZhbHVlID0gKF9iID0gb2JqZWN0LnZhbHVlKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUnVuU3RhcnRlZEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgdGhyZWFkSWQ6IFwiXCIsIHJ1bklkOiBcIlwiIH07XG59XG52YXIgUnVuU3RhcnRlZEV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudGhyZWFkSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnRocmVhZElkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucnVuSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnJ1bklkKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUnVuU3RhcnRlZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGhyZWFkSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJ1bklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gUnVuU3RhcnRlZEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSdW5TdGFydGVkRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudGhyZWFkSWQgPSAoX2EgPSBvYmplY3QudGhyZWFkSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS5ydW5JZCA9IChfYiA9IG9iamVjdC5ydW5JZCkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSdW5GaW5pc2hlZEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgdGhyZWFkSWQ6IFwiXCIsIHJ1bklkOiBcIlwiLCByZXN1bHQ6IHZvaWQgMCB9O1xufVxudmFyIFJ1bkZpbmlzaGVkRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50aHJlYWRJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudGhyZWFkSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ydW5JZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UucnVuSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5yZXN1bHQgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS5yZXN1bHQpLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUnVuRmluaXNoZWRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRocmVhZElkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5ydW5JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAzNCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucmVzdWx0ID0gVmFsdWUudW53cmFwKFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gUnVuRmluaXNoZWRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJ1bkZpbmlzaGVkRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudGhyZWFkSWQgPSAoX2EgPSBvYmplY3QudGhyZWFkSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS5ydW5JZCA9IChfYiA9IG9iamVjdC5ydW5JZCkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICBtZXNzYWdlLnJlc3VsdCA9IChfYyA9IG9iamVjdC5yZXN1bHQpICE9IG51bGwgPyBfYyA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSdW5FcnJvckV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgY29kZTogdm9pZCAwLCBtZXNzYWdlOiBcIlwiIH07XG59XG52YXIgUnVuRXJyb3JFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmNvZGUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuY29kZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLm1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSdW5FcnJvckV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuY29kZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFJ1bkVycm9yRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJ1bkVycm9yRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuY29kZSA9IChfYSA9IG9iamVjdC5jb2RlKSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlID0gKF9iID0gb2JqZWN0Lm1lc3NhZ2UpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RlcFN0YXJ0ZWRFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHN0ZXBOYW1lOiBcIlwiIH07XG59XG52YXIgU3RlcFN0YXJ0ZWRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0ZXBOYW1lICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5zdGVwTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0ZXBTdGFydGVkRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zdGVwTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFN0ZXBTdGFydGVkRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RlcFN0YXJ0ZWRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGVwTmFtZSA9IChfYSA9IG9iamVjdC5zdGVwTmFtZSkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdGVwRmluaXNoZWRFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIHN0ZXBOYW1lOiBcIlwiIH07XG59XG52YXIgU3RlcEZpbmlzaGVkRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdGVwTmFtZSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2Uuc3RlcE5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGVwRmluaXNoZWRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0ZXBOYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gU3RlcEZpbmlzaGVkRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RlcEZpbmlzaGVkRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc3RlcE5hbWUgPSAoX2EgPSBvYmplY3Quc3RlcE5hbWUpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VDaHVua0V2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgbWVzc2FnZUlkOiB2b2lkIDAsIHJvbGU6IHZvaWQgMCwgZGVsdGE6IHZvaWQgMCB9O1xufVxudmFyIFRleHRNZXNzYWdlQ2h1bmtFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VJZCAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5yb2xlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnJvbGUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5kZWx0YSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5kZWx0YSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRleHRNZXNzYWdlQ2h1bmtFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uucm9sZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAzNCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuZGVsdGEgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUZXh0TWVzc2FnZUNodW5rRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUNodW5rRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubWVzc2FnZUlkID0gKF9hID0gb2JqZWN0Lm1lc3NhZ2VJZCkgIT0gbnVsbCA/IF9hIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uucm9sZSA9IChfYiA9IG9iamVjdC5yb2xlKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5kZWx0YSA9IChfYyA9IG9iamVjdC5kZWx0YSkgIT0gbnVsbCA/IF9jIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsQ2h1bmtFdmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBiYXNlRXZlbnQ6IHZvaWQgMCxcbiAgICB0b29sQ2FsbElkOiB2b2lkIDAsXG4gICAgdG9vbENhbGxOYW1lOiB2b2lkIDAsXG4gICAgcGFyZW50TWVzc2FnZUlkOiB2b2lkIDAsXG4gICAgZGVsdGE6IHZvaWQgMFxuICB9O1xufVxudmFyIFRvb2xDYWxsQ2h1bmtFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsSWQgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudG9vbENhbGxJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsTmFtZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbE5hbWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UucGFyZW50TWVzc2FnZUlkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZGVsdGEgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UuZGVsdGEpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbENodW5rRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbElkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMzQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnBhcmVudE1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA0Mikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuZGVsdGEgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUb29sQ2FsbENodW5rRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxDaHVua0V2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSAoX2EgPSBvYmplY3QudG9vbENhbGxJZCkgIT0gbnVsbCA/IF9hIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxOYW1lID0gKF9iID0gb2JqZWN0LnRvb2xDYWxsTmFtZSkgIT0gbnVsbCA/IF9iIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UucGFyZW50TWVzc2FnZUlkID0gKF9jID0gb2JqZWN0LnBhcmVudE1lc3NhZ2VJZCkgIT0gbnVsbCA/IF9jIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuZGVsdGEgPSAoX2QgPSBvYmplY3QuZGVsdGEpICE9IG51bGwgPyBfZCA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VFdmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0ZXh0TWVzc2FnZVN0YXJ0OiB2b2lkIDAsXG4gICAgdGV4dE1lc3NhZ2VDb250ZW50OiB2b2lkIDAsXG4gICAgdGV4dE1lc3NhZ2VFbmQ6IHZvaWQgMCxcbiAgICB0b29sQ2FsbFN0YXJ0OiB2b2lkIDAsXG4gICAgdG9vbENhbGxBcmdzOiB2b2lkIDAsXG4gICAgdG9vbENhbGxFbmQ6IHZvaWQgMCxcbiAgICBzdGF0ZVNuYXBzaG90OiB2b2lkIDAsXG4gICAgc3RhdGVEZWx0YTogdm9pZCAwLFxuICAgIG1lc3NhZ2VzU25hcHNob3Q6IHZvaWQgMCxcbiAgICByYXc6IHZvaWQgMCxcbiAgICBjdXN0b206IHZvaWQgMCxcbiAgICBydW5TdGFydGVkOiB2b2lkIDAsXG4gICAgcnVuRmluaXNoZWQ6IHZvaWQgMCxcbiAgICBydW5FcnJvcjogdm9pZCAwLFxuICAgIHN0ZXBTdGFydGVkOiB2b2lkIDAsXG4gICAgc3RlcEZpbmlzaGVkOiB2b2lkIDAsXG4gICAgdGV4dE1lc3NhZ2VDaHVuazogdm9pZCAwLFxuICAgIHRvb2xDYWxsQ2h1bms6IHZvaWQgMFxuICB9O1xufVxudmFyIEV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLnRleHRNZXNzYWdlU3RhcnQgIT09IHZvaWQgMCkge1xuICAgICAgVGV4dE1lc3NhZ2VTdGFydEV2ZW50LmVuY29kZShtZXNzYWdlLnRleHRNZXNzYWdlU3RhcnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50ZXh0TWVzc2FnZUNvbnRlbnQgIT09IHZvaWQgMCkge1xuICAgICAgVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQuZW5jb2RlKG1lc3NhZ2UudGV4dE1lc3NhZ2VDb250ZW50LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudGV4dE1lc3NhZ2VFbmQgIT09IHZvaWQgMCkge1xuICAgICAgVGV4dE1lc3NhZ2VFbmRFdmVudC5lbmNvZGUobWVzc2FnZS50ZXh0TWVzc2FnZUVuZCwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsU3RhcnQgIT09IHZvaWQgMCkge1xuICAgICAgVG9vbENhbGxTdGFydEV2ZW50LmVuY29kZShtZXNzYWdlLnRvb2xDYWxsU3RhcnQsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbEFyZ3MgIT09IHZvaWQgMCkge1xuICAgICAgVG9vbENhbGxBcmdzRXZlbnQuZW5jb2RlKG1lc3NhZ2UudG9vbENhbGxBcmdzLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxFbmQgIT09IHZvaWQgMCkge1xuICAgICAgVG9vbENhbGxFbmRFdmVudC5lbmNvZGUobWVzc2FnZS50b29sQ2FsbEVuZCwgd3JpdGVyLnVpbnQzMig1MCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0YXRlU25hcHNob3QgIT09IHZvaWQgMCkge1xuICAgICAgU3RhdGVTbmFwc2hvdEV2ZW50LmVuY29kZShtZXNzYWdlLnN0YXRlU25hcHNob3QsIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdGF0ZURlbHRhICE9PSB2b2lkIDApIHtcbiAgICAgIFN0YXRlRGVsdGFFdmVudC5lbmNvZGUobWVzc2FnZS5zdGF0ZURlbHRhLCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZXNTbmFwc2hvdCAhPT0gdm9pZCAwKSB7XG4gICAgICBNZXNzYWdlc1NuYXBzaG90RXZlbnQuZW5jb2RlKG1lc3NhZ2UubWVzc2FnZXNTbmFwc2hvdCwgd3JpdGVyLnVpbnQzMig3NCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJhdyAhPT0gdm9pZCAwKSB7XG4gICAgICBSYXdFdmVudC5lbmNvZGUobWVzc2FnZS5yYXcsIHdyaXRlci51aW50MzIoODIpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5jdXN0b20gIT09IHZvaWQgMCkge1xuICAgICAgQ3VzdG9tRXZlbnQuZW5jb2RlKG1lc3NhZ2UuY3VzdG9tLCB3cml0ZXIudWludDMyKDkwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucnVuU3RhcnRlZCAhPT0gdm9pZCAwKSB7XG4gICAgICBSdW5TdGFydGVkRXZlbnQuZW5jb2RlKG1lc3NhZ2UucnVuU3RhcnRlZCwgd3JpdGVyLnVpbnQzMig5OCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJ1bkZpbmlzaGVkICE9PSB2b2lkIDApIHtcbiAgICAgIFJ1bkZpbmlzaGVkRXZlbnQuZW5jb2RlKG1lc3NhZ2UucnVuRmluaXNoZWQsIHdyaXRlci51aW50MzIoMTA2KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucnVuRXJyb3IgIT09IHZvaWQgMCkge1xuICAgICAgUnVuRXJyb3JFdmVudC5lbmNvZGUobWVzc2FnZS5ydW5FcnJvciwgd3JpdGVyLnVpbnQzMigxMTQpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdGVwU3RhcnRlZCAhPT0gdm9pZCAwKSB7XG4gICAgICBTdGVwU3RhcnRlZEV2ZW50LmVuY29kZShtZXNzYWdlLnN0ZXBTdGFydGVkLCB3cml0ZXIudWludDMyKDEyMikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0ZXBGaW5pc2hlZCAhPT0gdm9pZCAwKSB7XG4gICAgICBTdGVwRmluaXNoZWRFdmVudC5lbmNvZGUobWVzc2FnZS5zdGVwRmluaXNoZWQsIHdyaXRlci51aW50MzIoMTMwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudGV4dE1lc3NhZ2VDaHVuayAhPT0gdm9pZCAwKSB7XG4gICAgICBUZXh0TWVzc2FnZUNodW5rRXZlbnQuZW5jb2RlKG1lc3NhZ2UudGV4dE1lc3NhZ2VDaHVuaywgd3JpdGVyLnVpbnQzMigxMzgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbENodW5rICE9PSB2b2lkIDApIHtcbiAgICAgIFRvb2xDYWxsQ2h1bmtFdmVudC5lbmNvZGUobWVzc2FnZS50b29sQ2FsbENodW5rLCB3cml0ZXIudWludDMyKDE0NikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50ZXh0TWVzc2FnZVN0YXJ0ID0gVGV4dE1lc3NhZ2VTdGFydEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRleHRNZXNzYWdlQ29udGVudCA9IFRleHRNZXNzYWdlQ29udGVudEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRleHRNZXNzYWdlRW5kID0gVGV4dE1lc3NhZ2VFbmRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDM0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbFN0YXJ0ID0gVG9vbENhbGxTdGFydEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA1OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNDIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsQXJncyA9IFRvb2xDYWxsQXJnc0V2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA2OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsRW5kID0gVG9vbENhbGxFbmRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDU4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zdGF0ZVNuYXBzaG90ID0gU3RhdGVTbmFwc2hvdEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA4OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0YXRlRGVsdGEgPSBTdGF0ZURlbHRhRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDk6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA3NCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZXNTbmFwc2hvdCA9IE1lc3NhZ2VzU25hcHNob3RFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTA6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA4Mikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucmF3ID0gUmF3RXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDExOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gOTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmN1c3RvbSA9IEN1c3RvbUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDk4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5ydW5TdGFydGVkID0gUnVuU3RhcnRlZEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucnVuRmluaXNoZWQgPSBSdW5GaW5pc2hlZEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDExNCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucnVuRXJyb3IgPSBSdW5FcnJvckV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxNToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEyMikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RlcFN0YXJ0ZWQgPSBTdGVwU3RhcnRlZEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxNjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEzMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RlcEZpbmlzaGVkID0gU3RlcEZpbmlzaGVkRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE3OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTM4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50ZXh0TWVzc2FnZUNodW5rID0gVGV4dE1lc3NhZ2VDaHVua0V2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxODoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE0Nikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxDaHVuayA9IFRvb2xDYWxsQ2h1bmtFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VFdmVudCgpO1xuICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VTdGFydCA9IG9iamVjdC50ZXh0TWVzc2FnZVN0YXJ0ICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRleHRNZXNzYWdlU3RhcnQgIT09IG51bGwgPyBUZXh0TWVzc2FnZVN0YXJ0RXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnRleHRNZXNzYWdlU3RhcnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VDb250ZW50ID0gb2JqZWN0LnRleHRNZXNzYWdlQ29udGVudCAhPT0gdm9pZCAwICYmIG9iamVjdC50ZXh0TWVzc2FnZUNvbnRlbnQgIT09IG51bGwgPyBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudC5mcm9tUGFydGlhbChvYmplY3QudGV4dE1lc3NhZ2VDb250ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRleHRNZXNzYWdlRW5kID0gb2JqZWN0LnRleHRNZXNzYWdlRW5kICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRleHRNZXNzYWdlRW5kICE9PSBudWxsID8gVGV4dE1lc3NhZ2VFbmRFdmVudC5mcm9tUGFydGlhbChvYmplY3QudGV4dE1lc3NhZ2VFbmQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxTdGFydCA9IG9iamVjdC50b29sQ2FsbFN0YXJ0ICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRvb2xDYWxsU3RhcnQgIT09IG51bGwgPyBUb29sQ2FsbFN0YXJ0RXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnRvb2xDYWxsU3RhcnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxBcmdzID0gb2JqZWN0LnRvb2xDYWxsQXJncyAhPT0gdm9pZCAwICYmIG9iamVjdC50b29sQ2FsbEFyZ3MgIT09IG51bGwgPyBUb29sQ2FsbEFyZ3NFdmVudC5mcm9tUGFydGlhbChvYmplY3QudG9vbENhbGxBcmdzKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRvb2xDYWxsRW5kID0gb2JqZWN0LnRvb2xDYWxsRW5kICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRvb2xDYWxsRW5kICE9PSBudWxsID8gVG9vbENhbGxFbmRFdmVudC5mcm9tUGFydGlhbChvYmplY3QudG9vbENhbGxFbmQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc3RhdGVTbmFwc2hvdCA9IG9iamVjdC5zdGF0ZVNuYXBzaG90ICE9PSB2b2lkIDAgJiYgb2JqZWN0LnN0YXRlU25hcHNob3QgIT09IG51bGwgPyBTdGF0ZVNuYXBzaG90RXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnN0YXRlU25hcHNob3QpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc3RhdGVEZWx0YSA9IG9iamVjdC5zdGF0ZURlbHRhICE9PSB2b2lkIDAgJiYgb2JqZWN0LnN0YXRlRGVsdGEgIT09IG51bGwgPyBTdGF0ZURlbHRhRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnN0YXRlRGVsdGEpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubWVzc2FnZXNTbmFwc2hvdCA9IG9iamVjdC5tZXNzYWdlc1NuYXBzaG90ICE9PSB2b2lkIDAgJiYgb2JqZWN0Lm1lc3NhZ2VzU25hcHNob3QgIT09IG51bGwgPyBNZXNzYWdlc1NuYXBzaG90RXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0Lm1lc3NhZ2VzU25hcHNob3QpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UucmF3ID0gb2JqZWN0LnJhdyAhPT0gdm9pZCAwICYmIG9iamVjdC5yYXcgIT09IG51bGwgPyBSYXdFdmVudC5mcm9tUGFydGlhbChvYmplY3QucmF3KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLmN1c3RvbSA9IG9iamVjdC5jdXN0b20gIT09IHZvaWQgMCAmJiBvYmplY3QuY3VzdG9tICE9PSBudWxsID8gQ3VzdG9tRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmN1c3RvbSkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5ydW5TdGFydGVkID0gb2JqZWN0LnJ1blN0YXJ0ZWQgIT09IHZvaWQgMCAmJiBvYmplY3QucnVuU3RhcnRlZCAhPT0gbnVsbCA/IFJ1blN0YXJ0ZWRFdmVudC5mcm9tUGFydGlhbChvYmplY3QucnVuU3RhcnRlZCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5ydW5GaW5pc2hlZCA9IG9iamVjdC5ydW5GaW5pc2hlZCAhPT0gdm9pZCAwICYmIG9iamVjdC5ydW5GaW5pc2hlZCAhPT0gbnVsbCA/IFJ1bkZpbmlzaGVkRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnJ1bkZpbmlzaGVkKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnJ1bkVycm9yID0gb2JqZWN0LnJ1bkVycm9yICE9PSB2b2lkIDAgJiYgb2JqZWN0LnJ1bkVycm9yICE9PSBudWxsID8gUnVuRXJyb3JFdmVudC5mcm9tUGFydGlhbChvYmplY3QucnVuRXJyb3IpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc3RlcFN0YXJ0ZWQgPSBvYmplY3Quc3RlcFN0YXJ0ZWQgIT09IHZvaWQgMCAmJiBvYmplY3Quc3RlcFN0YXJ0ZWQgIT09IG51bGwgPyBTdGVwU3RhcnRlZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5zdGVwU3RhcnRlZCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGVwRmluaXNoZWQgPSBvYmplY3Quc3RlcEZpbmlzaGVkICE9PSB2b2lkIDAgJiYgb2JqZWN0LnN0ZXBGaW5pc2hlZCAhPT0gbnVsbCA/IFN0ZXBGaW5pc2hlZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5zdGVwRmluaXNoZWQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VDaHVuayA9IG9iamVjdC50ZXh0TWVzc2FnZUNodW5rICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRleHRNZXNzYWdlQ2h1bmsgIT09IG51bGwgPyBUZXh0TWVzc2FnZUNodW5rRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnRleHRNZXNzYWdlQ2h1bmspIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxDaHVuayA9IG9iamVjdC50b29sQ2FsbENodW5rICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRvb2xDYWxsQ2h1bmsgIT09IG51bGwgPyBUb29sQ2FsbENodW5rRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnRvb2xDYWxsQ2h1bmspIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gbG9uZ1RvTnVtYmVyKGludDY0KSB7XG4gIGNvbnN0IG51bSA9IGdsb2JhbFRoaXMuTnVtYmVyKGludDY0LnRvU3RyaW5nKCkpO1xuICBpZiAobnVtID4gZ2xvYmFsVGhpcy5OdW1iZXIuTUFYX1NBRkVfSU5URUdFUikge1xuICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVmFsdWUgaXMgbGFyZ2VyIHRoYW4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcIik7XG4gIH1cbiAgaWYgKG51bSA8IGdsb2JhbFRoaXMuTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpIHtcbiAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcIlZhbHVlIGlzIHNtYWxsZXIgdGhhbiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlwiKTtcbiAgfVxuICByZXR1cm4gbnVtO1xufVxuXG4vLyBzcmMvcHJvdG8udHNcbmZ1bmN0aW9uIHRvQ2FtZWxDYXNlKHN0cikge1xuICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXyhbYS16XSkvZywgKF8sIGxldHRlcikgPT4gbGV0dGVyLnRvVXBwZXJDYXNlKCkpO1xufVxuZnVuY3Rpb24gZW5jb2RlKGV2ZW50KSB7XG4gIGNvbnN0IG9uZW9mRmllbGQgPSB0b0NhbWVsQ2FzZShldmVudC50eXBlKTtcbiAgY29uc3QgeyB0eXBlLCB0aW1lc3RhbXAsIHJhd0V2ZW50LCAuLi5yZXN0IH0gPSBldmVudDtcbiAgaWYgKHR5cGUgPT09IEV2ZW50VHlwZTIuTUVTU0FHRVNfU05BUFNIT1QpIHtcbiAgICByZXN0Lm1lc3NhZ2VzID0gcmVzdC5tZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnN0IHVudHlwZWRNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgIGlmICh1bnR5cGVkTWVzc2FnZS50b29sQ2FsbHMgPT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4geyAuLi5tZXNzYWdlLCB0b29sQ2FsbHM6IFtdIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9KTtcbiAgfVxuICBpZiAodHlwZSA9PT0gRXZlbnRUeXBlMi5TVEFURV9ERUxUQSkge1xuICAgIHJlc3QuZGVsdGEgPSByZXN0LmRlbHRhLm1hcCgob3BlcmF0aW9uKSA9PiAoe1xuICAgICAgLi4ub3BlcmF0aW9uLFxuICAgICAgb3A6IEpzb25QYXRjaE9wZXJhdGlvblR5cGVbb3BlcmF0aW9uLm9wLnRvVXBwZXJDYXNlKCldXG4gICAgfSkpO1xuICB9XG4gIGNvbnN0IGV2ZW50TWVzc2FnZSA9IHtcbiAgICBbb25lb2ZGaWVsZF06IHtcbiAgICAgIGJhc2VFdmVudDoge1xuICAgICAgICB0eXBlOiBFdmVudFR5cGVbZXZlbnQudHlwZV0sXG4gICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgcmF3RXZlbnRcbiAgICAgIH0sXG4gICAgICAuLi5yZXN0XG4gICAgfVxuICB9O1xuICByZXR1cm4gRXZlbnQuZW5jb2RlKGV2ZW50TWVzc2FnZSkuZmluaXNoKCk7XG59XG5mdW5jdGlvbiBkZWNvZGUoZGF0YSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IGV2ZW50ID0gRXZlbnQuZGVjb2RlKGRhdGEpO1xuICBjb25zdCBkZWNvZGVkID0gT2JqZWN0LnZhbHVlcyhldmVudCkuZmluZCgodmFsdWUpID0+IHZhbHVlICE9PSB2b2lkIDApO1xuICBpZiAoIWRlY29kZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGV2ZW50XCIpO1xuICB9XG4gIGRlY29kZWQudHlwZSA9IEV2ZW50VHlwZVtkZWNvZGVkLmJhc2VFdmVudC50eXBlXTtcbiAgZGVjb2RlZC50aW1lc3RhbXAgPSBkZWNvZGVkLmJhc2VFdmVudC50aW1lc3RhbXA7XG4gIGRlY29kZWQucmF3RXZlbnQgPSBkZWNvZGVkLmJhc2VFdmVudC5yYXdFdmVudDtcbiAgaWYgKGRlY29kZWQudHlwZSA9PT0gRXZlbnRUeXBlMi5NRVNTQUdFU19TTkFQU0hPVCkge1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBkZWNvZGVkLm1lc3NhZ2VzKSB7XG4gICAgICBjb25zdCB1bnR5cGVkTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICBpZiAoKChfYSA9IHVudHlwZWRNZXNzYWdlLnRvb2xDYWxscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPT09IDApIHtcbiAgICAgICAgdW50eXBlZE1lc3NhZ2UudG9vbENhbGxzID0gdm9pZCAwO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoZGVjb2RlZC50eXBlID09PSBFdmVudFR5cGUyLlNUQVRFX0RFTFRBKSB7XG4gICAgZm9yIChjb25zdCBvcGVyYXRpb24gb2YgZGVjb2RlZC5kZWx0YSkge1xuICAgICAgb3BlcmF0aW9uLm9wID0gSnNvblBhdGNoT3BlcmF0aW9uVHlwZVtvcGVyYXRpb24ub3BdLnRvTG93ZXJDYXNlKCk7XG4gICAgICBPYmplY3Qua2V5cyhvcGVyYXRpb24pLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBpZiAob3BlcmF0aW9uW2tleV0gPT09IHZvaWQgMCkge1xuICAgICAgICAgIGRlbGV0ZSBvcGVyYXRpb25ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIE9iamVjdC5rZXlzKGRlY29kZWQpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChkZWNvZGVkW2tleV0gPT09IHZvaWQgMCkge1xuICAgICAgZGVsZXRlIGRlY29kZWRba2V5XTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gRXZlbnRTY2hlbWFzLnBhcnNlKGRlY29kZWQpO1xufVxuXG4vLyBzcmMvaW5kZXgudHNcbnZhciBBR1VJX01FRElBX1RZUEUgPSBcImFwcGxpY2F0aW9uL3ZuZC5hZy11aS5ldmVudCtwcm90b1wiO1xuZXhwb3J0IHtcbiAgQUdVSV9NRURJQV9UWVBFLFxuICBkZWNvZGUsXG4gIGVuY29kZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/core/node_modules/@ag-ui/proto/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/react/dist/index.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@copilotkitnext/react/dist/index.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("var react__WEBPACK_IMPORTED_MODULE_1___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIConnectNotImplementedError: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.AGUIConnectNotImplementedError),\n/* harmony export */   AGUIError: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.AGUIError),\n/* harmony export */   AbstractAgent: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.AbstractAgent),\n/* harmony export */   ActivityDeltaEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ActivityDeltaEventSchema),\n/* harmony export */   ActivityMessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ActivityMessageSchema),\n/* harmony export */   ActivitySnapshotEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ActivitySnapshotEventSchema),\n/* harmony export */   AssistantMessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.AssistantMessageSchema),\n/* harmony export */   AudioRecorderError: () => (/* binding */ AudioRecorderError),\n/* harmony export */   BackwardCompatibility_0_0_39: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.BackwardCompatibility_0_0_39),\n/* harmony export */   BaseEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.BaseEventSchema),\n/* harmony export */   BaseMessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.BaseMessageSchema),\n/* harmony export */   BinaryInputContentSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.BinaryInputContentSchema),\n/* harmony export */   ContextSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ContextSchema),\n/* harmony export */   CopilotChat: () => (/* binding */ CopilotChat),\n/* harmony export */   CopilotChatAssistantMessage: () => (/* binding */ CopilotChatAssistantMessage_default),\n/* harmony export */   CopilotChatAudioRecorder: () => (/* binding */ CopilotChatAudioRecorder),\n/* harmony export */   CopilotChatConfigurationProvider: () => (/* binding */ CopilotChatConfigurationProvider),\n/* harmony export */   CopilotChatInput: () => (/* binding */ CopilotChatInput_default),\n/* harmony export */   CopilotChatMessageView: () => (/* binding */ CopilotChatMessageView_default),\n/* harmony export */   CopilotChatSuggestionPill: () => (/* binding */ CopilotChatSuggestionPill_default),\n/* harmony export */   CopilotChatSuggestionView: () => (/* binding */ CopilotChatSuggestionView_default),\n/* harmony export */   CopilotChatToggleButton: () => (/* binding */ CopilotChatToggleButton),\n/* harmony export */   CopilotChatToggleButtonCloseIcon: () => (/* binding */ DefaultCloseIcon),\n/* harmony export */   CopilotChatToggleButtonOpenIcon: () => (/* binding */ DefaultOpenIcon),\n/* harmony export */   CopilotChatToolCallsView: () => (/* binding */ CopilotChatToolCallsView_default),\n/* harmony export */   CopilotChatUserMessage: () => (/* binding */ CopilotChatUserMessage_default),\n/* harmony export */   CopilotChatView: () => (/* binding */ CopilotChatView_default),\n/* harmony export */   CopilotKitCoreReact: () => (/* binding */ CopilotKitCoreReact),\n/* harmony export */   CopilotKitInspector: () => (/* binding */ CopilotKitInspector),\n/* harmony export */   CopilotKitProvider: () => (/* binding */ CopilotKitProvider),\n/* harmony export */   CopilotModalHeader: () => (/* binding */ CopilotModalHeader),\n/* harmony export */   CopilotPopup: () => (/* binding */ CopilotPopup),\n/* harmony export */   CopilotPopupView: () => (/* binding */ CopilotPopupView),\n/* harmony export */   CopilotSidebar: () => (/* binding */ CopilotSidebar),\n/* harmony export */   CopilotSidebarView: () => (/* binding */ CopilotSidebarView),\n/* harmony export */   CustomEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.EventSchemas),\n/* harmony export */   EventType: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.EventType),\n/* harmony export */   FilterToolCallsMiddleware: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.FilterToolCallsMiddleware),\n/* harmony export */   FunctionCallSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.FunctionCallSchema),\n/* harmony export */   FunctionMiddleware: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.FunctionMiddleware),\n/* harmony export */   HttpAgent: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.HttpAgent),\n/* harmony export */   InputContentSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.InputContentSchema),\n/* harmony export */   MCPAppsActivityContentSchema: () => (/* binding */ MCPAppsActivityContentSchema),\n/* harmony export */   MCPAppsActivityRenderer: () => (/* binding */ MCPAppsActivityRenderer),\n/* harmony export */   MCPAppsActivityType: () => (/* binding */ MCPAppsActivityType),\n/* harmony export */   MessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.MessagesSnapshotEventSchema),\n/* harmony export */   Middleware: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.Middleware),\n/* harmony export */   RawEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.RunErrorEventSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.RunFinishedEventSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.RunStartedEventSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.StepFinishedEventSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.StepStartedEventSchema),\n/* harmony export */   SystemMessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.SystemMessageSchema),\n/* harmony export */   TextInputContentSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.TextInputContentSchema),\n/* harmony export */   TextMessageChunkEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.TextMessageChunkEventSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.TextMessageStartEventSchema),\n/* harmony export */   ThinkingEndEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ThinkingEndEventSchema),\n/* harmony export */   ThinkingStartEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ThinkingStartEventSchema),\n/* harmony export */   ThinkingTextMessageContentEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageContentEventSchema),\n/* harmony export */   ThinkingTextMessageEndEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageEndEventSchema),\n/* harmony export */   ThinkingTextMessageStartEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolCallArgsEventSchema),\n/* harmony export */   ToolCallChunkEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolCallChunkEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolCallEndEventSchema),\n/* harmony export */   ToolCallResultEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolCallResultEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.ToolSchema),\n/* harmony export */   UseAgentUpdate: () => (/* binding */ UseAgentUpdate),\n/* harmony export */   UserMessageSchema: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.UserMessageSchema),\n/* harmony export */   WildcardToolCallRender: () => (/* binding */ WildcardToolCallRender),\n/* harmony export */   compactEvents: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.compactEvents),\n/* harmony export */   convertToLegacyEvents: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.convertToLegacyEvents),\n/* harmony export */   defaultApplyEvents: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.defaultApplyEvents),\n/* harmony export */   defineToolCallRenderer: () => (/* binding */ defineToolCallRenderer),\n/* harmony export */   parseProtoStream: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.parseProtoStream),\n/* harmony export */   parseSSEStream: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.parseSSEStream),\n/* harmony export */   randomUUID: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.randomUUID),\n/* harmony export */   runHttpRequest: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.runHttpRequest),\n/* harmony export */   structuredClone_: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.structuredClone_),\n/* harmony export */   transformChunks: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.transformChunks),\n/* harmony export */   transformHttpEventStream: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.transformHttpEventStream),\n/* harmony export */   useAgent: () => (/* binding */ useAgent),\n/* harmony export */   useAgentContext: () => (/* binding */ useAgentContext),\n/* harmony export */   useConfigureSuggestions: () => (/* binding */ useConfigureSuggestions),\n/* harmony export */   useCopilotChatConfiguration: () => (/* binding */ useCopilotChatConfiguration),\n/* harmony export */   useCopilotKit: () => (/* binding */ useCopilotKit),\n/* harmony export */   useFrontendTool: () => (/* binding */ useFrontendTool),\n/* harmony export */   useHumanInTheLoop: () => (/* binding */ useHumanInTheLoop),\n/* harmony export */   useRenderActivityMessage: () => (/* binding */ useRenderActivityMessage),\n/* harmony export */   useRenderCustomMessages: () => (/* binding */ useRenderCustomMessages),\n/* harmony export */   useRenderToolCall: () => (/* binding */ useRenderToolCall),\n/* harmony export */   useSuggestions: () => (/* binding */ useSuggestions),\n/* harmony export */   verifyEvents: () => (/* reexport safe */ _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__.verifyEvents)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ag-ui/client */ \"(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/client/dist/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tailwind-merge */ \"(ssr)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,Check,Loader2,Mic,Plus,Square,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/square.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,Check,Loader2,Mic,Plus,Square,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,Check,Loader2,Mic,Plus,Square,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/mic.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=Check,ChevronLeft,ChevronRight,Copy,Edit!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/check.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,Check,Loader2,Mic,Plus,Square,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @copilotkitnext/shared */ \"(ssr)/./node_modules/@copilotkitnext/shared/dist/index.mjs\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @radix-ui/react-slot */ \"(ssr)/./node_modules/@radix-ui/react-slot/dist/index.mjs\");\n/* harmony import */ var class_variance_authority__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! class-variance-authority */ \"(ssr)/./node_modules/class-variance-authority/dist/index.mjs\");\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! clsx */ \"(ssr)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var _radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @radix-ui/react-tooltip */ \"(ssr)/./node_modules/@radix-ui/react-tooltip/dist/index.mjs\");\n/* harmony import */ var _radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @radix-ui/react-dropdown-menu */ \"(ssr)/./node_modules/@radix-ui/react-dropdown-menu/dist/index.mjs\");\n/* harmony import */ var _barrel_optimize_names_CheckIcon_ChevronRightIcon_CircleIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=Check,ChevronLeft,ChevronRight,Copy,Edit!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-right.js\");\n/* harmony import */ var _barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! __barrel_optimize__?names=Check,ChevronLeft,ChevronRight,Copy,Edit!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/copy.js\");\n/* harmony import */ var _barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! __barrel_optimize__?names=Check,Copy,RefreshCw,ThumbsDown,ThumbsUp,Volume2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/thumbs-up.js\");\n/* harmony import */ var _barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! __barrel_optimize__?names=Check,Copy,RefreshCw,ThumbsDown,ThumbsUp,Volume2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/thumbs-down.js\");\n/* harmony import */ var _barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! __barrel_optimize__?names=Check,Copy,RefreshCw,ThumbsDown,ThumbsUp,Volume2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/volume-2.js\");\n/* harmony import */ var _barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! __barrel_optimize__?names=Check,Copy,RefreshCw,ThumbsDown,ThumbsUp,Volume2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js\");\n/* harmony import */ var katex_dist_katex_min_css__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! katex/dist/katex.min.css */ \"(ssr)/./node_modules/katex/dist/katex.min.css\");\n/* harmony import */ var streamdown__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! streamdown */ \"(ssr)/./node_modules/streamdown/dist/index.js\");\n/* harmony import */ var _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @copilotkitnext/core */ \"(ssr)/./node_modules/@copilotkitnext/core/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lit_labs_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @lit-labs/react */ \"(ssr)/./node_modules/@lit-labs/react/node/development/index.js\");\n/* harmony import */ var _barrel_optimize_names_Check_ChevronLeft_ChevronRight_Copy_Edit_lucide_react__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! __barrel_optimize__?names=Check,ChevronLeft,ChevronRight,Copy,Edit!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/square-pen.js\");\n/* harmony import */ var _barrel_optimize_names_Check_ChevronLeft_ChevronRight_Copy_Edit_lucide_react__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! __barrel_optimize__?names=Check,ChevronLeft,ChevronRight,Copy,Edit!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-left.js\");\n/* harmony import */ var use_stick_to_bottom__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! use-stick-to-bottom */ \"(ssr)/./node_modules/use-stick-to-bottom/dist/StickToBottom.js\");\n/* harmony import */ var use_stick_to_bottom__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! use-stick-to-bottom */ \"(ssr)/./node_modules/use-stick-to-bottom/dist/useStickToBottom.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var ts_deepmerge__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ts-deepmerge */ \"(ssr)/./node_modules/ts-deepmerge/esm/index.js\");\n/* harmony import */ var _ag_ui_client__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @ag-ui/client */ \"(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/core/dist/index.mjs\");\n/* harmony import */ var _barrel_optimize_names_MessageCircle_X_lucide_react__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! __barrel_optimize__?names=MessageCircle,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/message-circle.js\");\n/* __next_internal_client_entry_do_not_use__ *,AudioRecorderError,CopilotChat,CopilotChatAssistantMessage,CopilotChatAudioRecorder,CopilotChatConfigurationProvider,CopilotChatInput,CopilotChatMessageView,CopilotChatSuggestionPill,CopilotChatSuggestionView,CopilotChatToggleButton,CopilotChatToggleButtonCloseIcon,CopilotChatToggleButtonOpenIcon,CopilotChatToolCallsView,CopilotChatUserMessage,CopilotChatView,CopilotKitCoreReact,CopilotKitInspector,CopilotKitProvider,CopilotModalHeader,CopilotPopup,CopilotPopupView,CopilotSidebar,CopilotSidebarView,MCPAppsActivityContentSchema,MCPAppsActivityRenderer,MCPAppsActivityType,UseAgentUpdate,WildcardToolCallRender,defineToolCallRenderer,useAgent,useAgentContext,useConfigureSuggestions,useCopilotChatConfiguration,useCopilotKit,useFrontendTool,useHumanInTheLoop,useRenderActivityMessage,useRenderCustomMessages,useRenderToolCall,useSuggestions auto */ // src/index.ts\n\n// src/components/chat/CopilotChatInput.tsx\n\n\n\n// src/providers/CopilotChatConfigurationProvider.tsx\n\n\n\nvar CopilotChatDefaultLabels = {\n    chatInputPlaceholder: \"Type a message...\",\n    chatInputToolbarStartTranscribeButtonLabel: \"Transcribe\",\n    chatInputToolbarCancelTranscribeButtonLabel: \"Cancel\",\n    chatInputToolbarFinishTranscribeButtonLabel: \"Finish\",\n    chatInputToolbarAddButtonLabel: \"Add photos or files\",\n    chatInputToolbarToolsButtonLabel: \"Tools\",\n    assistantMessageToolbarCopyCodeLabel: \"Copy\",\n    assistantMessageToolbarCopyCodeCopiedLabel: \"Copied\",\n    assistantMessageToolbarCopyMessageLabel: \"Copy\",\n    assistantMessageToolbarThumbsUpLabel: \"Good response\",\n    assistantMessageToolbarThumbsDownLabel: \"Bad response\",\n    assistantMessageToolbarReadAloudLabel: \"Read aloud\",\n    assistantMessageToolbarRegenerateLabel: \"Regenerate\",\n    userMessageToolbarCopyMessageLabel: \"Copy\",\n    userMessageToolbarEditMessageLabel: \"Edit\",\n    chatDisclaimerText: \"AI can make mistakes. Please verify important information.\",\n    chatToggleOpenLabel: \"Open chat\",\n    chatToggleCloseLabel: \"Close chat\",\n    modalHeaderTitle: \"CopilotKit Chat\",\n    welcomeMessageText: \"How can I help you today?\"\n};\nvar CopilotChatConfiguration = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nvar CopilotChatConfigurationProvider = ({ children, labels, agentId, threadId, isModalDefaultOpen })=>{\n    const parentConfig = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(CopilotChatConfiguration);\n    const mergedLabels = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChatConfigurationProvider.useMemo[mergedLabels]\": ()=>({\n                ...CopilotChatDefaultLabels,\n                ...parentConfig?.labels ?? {},\n                ...labels ?? {}\n            })\n    }[\"CopilotChatConfigurationProvider.useMemo[mergedLabels]\"], [\n        labels,\n        parentConfig?.labels\n    ]);\n    const resolvedAgentId = agentId ?? parentConfig?.agentId ?? _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_AGENT_ID;\n    const resolvedThreadId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChatConfigurationProvider.useMemo[resolvedThreadId]\": ()=>{\n            if (threadId) {\n                return threadId;\n            }\n            if (parentConfig?.threadId) {\n                return parentConfig.threadId;\n            }\n            return (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.randomUUID)();\n        }\n    }[\"CopilotChatConfigurationProvider.useMemo[resolvedThreadId]\"], [\n        threadId,\n        parentConfig?.threadId\n    ]);\n    const resolvedDefaultOpen = isModalDefaultOpen ?? parentConfig?.isModalDefaultOpen ?? true;\n    const [internalModalOpen, setInternalModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(parentConfig?.isModalOpen ?? resolvedDefaultOpen);\n    const resolvedIsModalOpen = parentConfig?.isModalOpen ?? internalModalOpen;\n    const resolvedSetModalOpen = parentConfig?.setModalOpen ?? setInternalModalOpen;\n    const configurationValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChatConfigurationProvider.useMemo[configurationValue]\": ()=>({\n                labels: mergedLabels,\n                agentId: resolvedAgentId,\n                threadId: resolvedThreadId,\n                isModalOpen: resolvedIsModalOpen,\n                setModalOpen: resolvedSetModalOpen,\n                isModalDefaultOpen: resolvedDefaultOpen\n            })\n    }[\"CopilotChatConfigurationProvider.useMemo[configurationValue]\"], [\n        mergedLabels,\n        resolvedAgentId,\n        resolvedThreadId,\n        resolvedIsModalOpen,\n        resolvedSetModalOpen,\n        resolvedDefaultOpen\n    ]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatConfiguration.Provider, {\n        value: configurationValue,\n        children\n    });\n};\nvar useCopilotChatConfiguration = ()=>{\n    const configuration = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(CopilotChatConfiguration);\n    return configuration;\n};\n// src/components/ui/button.tsx\n\n\n// src/lib/utils.ts\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_5__.clsx)(inputs));\n}\n// src/components/ui/button.tsx\n\nvar buttonVariants = (0,class_variance_authority__WEBPACK_IMPORTED_MODULE_4__.cva)(\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\", {\n    variants: {\n        variant: {\n            default: \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n            destructive: \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n            outline: \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n            secondary: \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n            ghost: \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 cursor-pointer\",\n            link: \"text-primary underline-offset-4 hover:underline\",\n            assistantMessageToolbarButton: [\n                \"cursor-pointer\",\n                // Background and text\n                \"p-0 text-[rgb(93,93,93)] hover:bg-[#E8E8E8]\",\n                // Dark mode - lighter gray for better contrast\n                \"dark:text-[rgb(243,243,243)] dark:hover:bg-[#303030]\",\n                // Shape and sizing\n                \"h-8 w-8\",\n                // Interactions\n                \"transition-colors\",\n                // Hover states\n                \"hover:text-[rgb(93,93,93)]\",\n                \"dark:hover:text-[rgb(243,243,243)]\"\n            ],\n            chatInputToolbarPrimary: [\n                \"cursor-pointer\",\n                // Background and text\n                \"bg-black text-white\",\n                // Dark mode\n                \"dark:bg-white dark:text-black dark:focus-visible:outline-white\",\n                // Shape and sizing\n                \"rounded-full\",\n                // Interactions\n                \"transition-colors\",\n                // Focus states\n                \"focus:outline-none\",\n                // Hover states\n                \"hover:opacity-70 disabled:hover:opacity-100\",\n                // Disabled states\n                \"disabled:cursor-not-allowed disabled:bg-[#00000014] disabled:text-[rgb(13,13,13)]\",\n                \"dark:disabled:bg-[#454545] dark:disabled:text-white \"\n            ],\n            chatInputToolbarSecondary: [\n                \"cursor-pointer\",\n                // Background and text\n                \"bg-transparent text-[#444444]\",\n                // Dark mode\n                \"dark:text-white dark:border-[#404040]\",\n                // Shape and sizing\n                \"rounded-full\",\n                // Interactions\n                \"transition-colors\",\n                // Focus states\n                \"focus:outline-none\",\n                // Hover states\n                \"hover:bg-[#f8f8f8] hover:text-[#333333]\",\n                \"dark:hover:bg-[#404040] dark:hover:text-[#FFFFFF]\",\n                // Disabled states\n                \"disabled:cursor-not-allowed disabled:opacity-50\",\n                \"disabled:hover:bg-transparent disabled:hover:text-[#444444]\",\n                \"dark:disabled:hover:bg-transparent dark:disabled:hover:text-[#CCCCCC]\"\n            ]\n        },\n        size: {\n            default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n            sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n            lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n            icon: \"size-9\",\n            chatInputToolbarIcon: [\n                // Shape and sizing\n                \"h-9 w-9 rounded-full\"\n            ],\n            chatInputToolbarIconLabel: [\n                // Shape and sizing\n                \"h-9 px-3 rounded-full\",\n                // Layout\n                \"gap-2\",\n                // Typography\n                \"font-normal\"\n            ]\n        }\n    },\n    defaultVariants: {\n        variant: \"default\",\n        size: \"default\"\n    }\n});\nfunction Button({ className, variant, size, asChild = false, ...props }) {\n    const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_7__.Slot : \"button\";\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Comp, {\n        \"data-slot\": \"button\",\n        className: cn(buttonVariants({\n            variant,\n            size,\n            className\n        })),\n        ...props\n    });\n}\n// src/components/ui/tooltip.tsx\n\n\nfunction TooltipProvider({ delayDuration = 0, ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_8__.Provider, {\n        \"data-slot\": \"tooltip-provider\",\n        delayDuration,\n        ...props\n    });\n}\nfunction Tooltip({ ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipProvider, {\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_8__.Root, {\n            \"data-slot\": \"tooltip\",\n            ...props\n        })\n    });\n}\nfunction TooltipTrigger({ ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_8__.Trigger, {\n        \"data-slot\": \"tooltip-trigger\",\n        ...props\n    });\n}\nfunction TooltipContent({ className, sideOffset = 0, children, ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_8__.Portal, {\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_8__.Content, {\n            \"data-slot\": \"tooltip-content\",\n            sideOffset,\n            className: cn(\"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\", className),\n            ...props,\n            children: [\n                children,\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_8__.Arrow, {\n                    className: \"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\"\n                })\n            ]\n        })\n    });\n}\n// src/components/ui/dropdown-menu.tsx\n\n\n\nfunction DropdownMenu({ ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.Root, {\n        \"data-slot\": \"dropdown-menu\",\n        ...props\n    });\n}\nfunction DropdownMenuTrigger({ ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.Trigger, {\n        \"data-slot\": \"dropdown-menu-trigger\",\n        ...props\n    });\n}\nfunction DropdownMenuContent({ className, sideOffset = 4, ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.Portal, {\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.Content, {\n            \"data-slot\": \"dropdown-menu-content\",\n            sideOffset,\n            className: cn(\"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\", className),\n            ...props\n        })\n    });\n}\nfunction DropdownMenuItem({ className, inset, variant = \"default\", ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.Item, {\n        \"data-slot\": \"dropdown-menu-item\",\n        \"data-inset\": inset,\n        \"data-variant\": variant,\n        className: cn(\"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\", className),\n        ...props\n    });\n}\nfunction DropdownMenuSeparator({ className, ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.Separator, {\n        \"data-slot\": \"dropdown-menu-separator\",\n        className: cn(\"bg-border -mx-1 my-1 h-px\", className),\n        ...props\n    });\n}\nfunction DropdownMenuSub({ ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.Sub, {\n        \"data-slot\": \"dropdown-menu-sub\",\n        ...props\n    });\n}\nfunction DropdownMenuSubTrigger({ className, inset, children, ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.SubTrigger, {\n        \"data-slot\": \"dropdown-menu-sub-trigger\",\n        \"data-inset\": inset,\n        className: cn(\"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8\", className),\n        ...props,\n        children: [\n            children,\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_CheckIcon_ChevronRightIcon_CircleIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                className: \"ml-auto size-4\"\n            })\n        ]\n    });\n}\nfunction DropdownMenuSubContent({ className, ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_radix_ui_react_dropdown_menu__WEBPACK_IMPORTED_MODULE_9__.SubContent, {\n        \"data-slot\": \"dropdown-menu-sub-content\",\n        className: cn(\"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\", className),\n        ...props\n    });\n}\n// src/components/chat/CopilotChatAudioRecorder.tsx\n\n\n\nvar AudioRecorderError = class extends Error {\n    constructor(message){\n        super(message);\n        this.name = \"AudioRecorderError\";\n    }\n};\nvar CopilotChatAudioRecorder = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((props, ref)=>{\n    const { className, ...divProps } = props;\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [recorderState, setRecorderState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"idle\");\n    const mediaRecorderRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioChunksRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const streamRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const analyserRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioContextRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const animationIdRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const amplitudeHistoryRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const frameCountRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const scrollOffsetRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const smoothedAmplitudeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const fadeOpacityRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const cleanup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatAudioRecorder.useCallback[cleanup]\": ()=>{\n            if (animationIdRef.current) {\n                cancelAnimationFrame(animationIdRef.current);\n                animationIdRef.current = null;\n            }\n            if (mediaRecorderRef.current && mediaRecorderRef.current.state !== \"inactive\") {\n                try {\n                    mediaRecorderRef.current.stop();\n                } catch  {}\n            }\n            if (streamRef.current) {\n                streamRef.current.getTracks().forEach({\n                    \"CopilotChatAudioRecorder.useCallback[cleanup]\": (track)=>track.stop()\n                }[\"CopilotChatAudioRecorder.useCallback[cleanup]\"]);\n                streamRef.current = null;\n            }\n            if (audioContextRef.current && audioContextRef.current.state !== \"closed\") {\n                audioContextRef.current.close().catch({\n                    \"CopilotChatAudioRecorder.useCallback[cleanup]\": ()=>{}\n                }[\"CopilotChatAudioRecorder.useCallback[cleanup]\"]);\n                audioContextRef.current = null;\n            }\n            mediaRecorderRef.current = null;\n            analyserRef.current = null;\n            audioChunksRef.current = [];\n            amplitudeHistoryRef.current = [];\n            frameCountRef.current = 0;\n            scrollOffsetRef.current = 0;\n            smoothedAmplitudeRef.current = 0;\n            fadeOpacityRef.current = 0;\n        }\n    }[\"CopilotChatAudioRecorder.useCallback[cleanup]\"], []);\n    const start = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatAudioRecorder.useCallback[start]\": async ()=>{\n            if (recorderState !== \"idle\") {\n                throw new AudioRecorderError(\"Recorder is already active\");\n            }\n            try {\n                const stream = await navigator.mediaDevices.getUserMedia({\n                    audio: true\n                });\n                streamRef.current = stream;\n                const audioContext = new AudioContext();\n                audioContextRef.current = audioContext;\n                const source = audioContext.createMediaStreamSource(stream);\n                const analyser = audioContext.createAnalyser();\n                analyser.fftSize = 2048;\n                source.connect(analyser);\n                analyserRef.current = analyser;\n                const mimeType = MediaRecorder.isTypeSupported(\"audio/webm;codecs=opus\") ? \"audio/webm;codecs=opus\" : MediaRecorder.isTypeSupported(\"audio/webm\") ? \"audio/webm\" : MediaRecorder.isTypeSupported(\"audio/mp4\") ? \"audio/mp4\" : \"\";\n                const options = mimeType ? {\n                    mimeType\n                } : {};\n                const mediaRecorder = new MediaRecorder(stream, options);\n                mediaRecorderRef.current = mediaRecorder;\n                audioChunksRef.current = [];\n                mediaRecorder.ondataavailable = ({\n                    \"CopilotChatAudioRecorder.useCallback[start]\": (event)=>{\n                        if (event.data.size > 0) {\n                            audioChunksRef.current.push(event.data);\n                        }\n                    }\n                })[\"CopilotChatAudioRecorder.useCallback[start]\"];\n                mediaRecorder.start(100);\n                setRecorderState(\"recording\");\n            } catch (error) {\n                cleanup();\n                if (error instanceof Error && error.name === \"NotAllowedError\") {\n                    throw new AudioRecorderError(\"Microphone permission denied\");\n                }\n                if (error instanceof Error && error.name === \"NotFoundError\") {\n                    throw new AudioRecorderError(\"No microphone found\");\n                }\n                throw new AudioRecorderError(error instanceof Error ? error.message : \"Failed to start recording\");\n            }\n        }\n    }[\"CopilotChatAudioRecorder.useCallback[start]\"], [\n        recorderState,\n        cleanup\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatAudioRecorder.useCallback[stop]\": ()=>{\n            return new Promise({\n                \"CopilotChatAudioRecorder.useCallback[stop]\": (resolve, reject)=>{\n                    const mediaRecorder = mediaRecorderRef.current;\n                    if (!mediaRecorder || recorderState !== \"recording\") {\n                        reject(new AudioRecorderError(\"No active recording\"));\n                        return;\n                    }\n                    setRecorderState(\"processing\");\n                    mediaRecorder.onstop = ({\n                        \"CopilotChatAudioRecorder.useCallback[stop]\": ()=>{\n                            const mimeType = mediaRecorder.mimeType || \"audio/webm\";\n                            const audioBlob = new Blob(audioChunksRef.current, {\n                                type: mimeType\n                            });\n                            cleanup();\n                            setRecorderState(\"idle\");\n                            resolve(audioBlob);\n                        }\n                    })[\"CopilotChatAudioRecorder.useCallback[stop]\"];\n                    mediaRecorder.onerror = ({\n                        \"CopilotChatAudioRecorder.useCallback[stop]\": ()=>{\n                            cleanup();\n                            setRecorderState(\"idle\");\n                            reject(new AudioRecorderError(\"Recording failed\"));\n                        }\n                    })[\"CopilotChatAudioRecorder.useCallback[stop]\"];\n                    mediaRecorder.stop();\n                }\n            }[\"CopilotChatAudioRecorder.useCallback[stop]\"]);\n        }\n    }[\"CopilotChatAudioRecorder.useCallback[stop]\"], [\n        recorderState,\n        cleanup\n    ]);\n    const calculateAmplitude = (dataArray)=>{\n        let sum = 0;\n        for(let i = 0; i < dataArray.length; i++){\n            const sample = (dataArray[i] ?? 128) / 128 - 1;\n            sum += sample * sample;\n        }\n        return Math.sqrt(sum / dataArray.length);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatAudioRecorder.useEffect\": ()=>{\n            const canvas = canvasRef.current;\n            if (!canvas) return;\n            const ctx = canvas.getContext(\"2d\");\n            if (!ctx) return;\n            const barWidth = 2;\n            const barGap = 1;\n            const barSpacing = barWidth + barGap;\n            const scrollSpeed = 1 / 3;\n            const draw = {\n                \"CopilotChatAudioRecorder.useEffect.draw\": ()=>{\n                    const rect = canvas.getBoundingClientRect();\n                    const dpr = window.devicePixelRatio || 1;\n                    if (canvas.width !== rect.width * dpr || canvas.height !== rect.height * dpr) {\n                        canvas.width = rect.width * dpr;\n                        canvas.height = rect.height * dpr;\n                        ctx.scale(dpr, dpr);\n                    }\n                    const maxBars = Math.floor(rect.width / barSpacing) + 2;\n                    if (analyserRef.current && recorderState === \"recording\") {\n                        if (amplitudeHistoryRef.current.length === 0) {\n                            amplitudeHistoryRef.current = new Array(maxBars).fill(0);\n                        }\n                        if (fadeOpacityRef.current < 1) {\n                            fadeOpacityRef.current = Math.min(1, fadeOpacityRef.current + 0.03);\n                        }\n                        scrollOffsetRef.current += scrollSpeed;\n                        const bufferLength = analyserRef.current.fftSize;\n                        const dataArray = new Uint8Array(bufferLength);\n                        analyserRef.current.getByteTimeDomainData(dataArray);\n                        const rawAmplitude = calculateAmplitude(dataArray);\n                        const attackSpeed = 0.12;\n                        const decaySpeed = 0.08;\n                        const speed = rawAmplitude > smoothedAmplitudeRef.current ? attackSpeed : decaySpeed;\n                        smoothedAmplitudeRef.current += (rawAmplitude - smoothedAmplitudeRef.current) * speed;\n                        if (scrollOffsetRef.current >= barSpacing) {\n                            scrollOffsetRef.current -= barSpacing;\n                            amplitudeHistoryRef.current.push(smoothedAmplitudeRef.current);\n                            if (amplitudeHistoryRef.current.length > maxBars) {\n                                amplitudeHistoryRef.current = amplitudeHistoryRef.current.slice(-maxBars);\n                            }\n                        }\n                    }\n                    ctx.clearRect(0, 0, rect.width, rect.height);\n                    const computedStyle = getComputedStyle(canvas);\n                    ctx.fillStyle = computedStyle.color;\n                    ctx.globalAlpha = fadeOpacityRef.current;\n                    const centerY = rect.height / 2;\n                    const maxAmplitude = rect.height / 2 - 2;\n                    const history = amplitudeHistoryRef.current;\n                    if (history.length > 0) {\n                        const offset = scrollOffsetRef.current;\n                        const edgeFadeWidth = 12;\n                        for(let i = 0; i < history.length; i++){\n                            const amplitude = history[i] ?? 0;\n                            const scaledAmplitude = Math.min(amplitude * 4, 1);\n                            const barHeight = Math.max(2, scaledAmplitude * maxAmplitude * 2);\n                            const x = rect.width - (history.length - i) * barSpacing - offset;\n                            const y = centerY - barHeight / 2;\n                            if (x + barWidth > 0 && x < rect.width) {\n                                let edgeOpacity = 1;\n                                if (x < edgeFadeWidth) {\n                                    edgeOpacity = Math.max(0, x / edgeFadeWidth);\n                                } else if (x > rect.width - edgeFadeWidth) {\n                                    edgeOpacity = Math.max(0, (rect.width - x) / edgeFadeWidth);\n                                }\n                                ctx.globalAlpha = fadeOpacityRef.current * edgeOpacity;\n                                ctx.fillRect(x, y, barWidth, barHeight);\n                            }\n                        }\n                    }\n                    animationIdRef.current = requestAnimationFrame(draw);\n                }\n            }[\"CopilotChatAudioRecorder.useEffect.draw\"];\n            draw();\n            return ({\n                \"CopilotChatAudioRecorder.useEffect\": ()=>{\n                    if (animationIdRef.current) {\n                        cancelAnimationFrame(animationIdRef.current);\n                    }\n                }\n            })[\"CopilotChatAudioRecorder.useEffect\"];\n        }\n    }[\"CopilotChatAudioRecorder.useEffect\"], [\n        recorderState\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatAudioRecorder.useEffect\": ()=>{\n            return cleanup;\n        }\n    }[\"CopilotChatAudioRecorder.useEffect\"], [\n        cleanup\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(ref, {\n        \"CopilotChatAudioRecorder.useImperativeHandle\": ()=>({\n                get state () {\n                    return recorderState;\n                },\n                start,\n                stop,\n                dispose: cleanup\n            })\n    }[\"CopilotChatAudioRecorder.useImperativeHandle\"], [\n        recorderState,\n        start,\n        stop,\n        cleanup\n    ]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"w-full py-3 px-5\", className),\n        ...divProps,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"canvas\", {\n            ref: canvasRef,\n            className: \"block w-full h-[26px]\"\n        })\n    });\n});\nCopilotChatAudioRecorder.displayName = \"CopilotChatAudioRecorder\";\n// src/lib/slots.tsx\n\nfunction shallowEqual(obj1, obj2) {\n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n    if (keys1.length !== keys2.length) return false;\n    for (const key of keys1){\n        if (obj1[key] !== obj2[key]) return false;\n    }\n    return true;\n}\nfunction renderSlotElement(slot, DefaultComponent, props) {\n    if (typeof slot === \"string\") {\n        return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(DefaultComponent, {\n            ...props,\n            className: slot\n        });\n    }\n    if (typeof slot === \"function\") {\n        return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(slot, props);\n    }\n    if (slot && typeof slot === \"object\" && !/*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.isValidElement(slot)) {\n        return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(DefaultComponent, {\n            ...props,\n            ...slot\n        });\n    }\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(DefaultComponent, props);\n}\nvar MemoizedSlotWrapper = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.memo(/*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function MemoizedSlotWrapper2(props, ref) {\n    const { $slot, $component, ...rest } = props;\n    const propsWithRef = ref !== null ? {\n        ...rest,\n        ref\n    } : rest;\n    return renderSlotElement($slot, $component, propsWithRef);\n}), (prev, next)=>{\n    if (prev.$slot !== next.$slot) return false;\n    if (prev.$component !== next.$component) return false;\n    const { $slot: _ps, $component: _pc, ...prevRest } = prev;\n    const { $slot: _ns, $component: _nc, ...nextRest } = next;\n    return shallowEqual(prevRest, nextRest);\n});\nfunction renderSlot(slot, DefaultComponent, props) {\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(MemoizedSlotWrapper, {\n        ...props,\n        $slot: slot,\n        $component: DefaultComponent\n    });\n}\n// src/components/chat/CopilotChatInput.tsx\n\nvar SLASH_MENU_MAX_VISIBLE_ITEMS = 5;\nvar SLASH_MENU_ITEM_HEIGHT_PX = 40;\nfunction CopilotChatInput({ mode = \"input\", onSubmitMessage, onStop, isRunning = false, onStartTranscribe, onCancelTranscribe, onFinishTranscribe, onFinishTranscribeWithAudio, onAddFile, onChange, value, toolsMenu, autoFocus = true, textArea, sendButton, startTranscribeButton, cancelTranscribeButton, finishTranscribeButton, addMenuButton, audioRecorder, children, className, ...props }) {\n    const isControlled = value !== void 0;\n    const [internalValue, setInternalValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        \"CopilotChatInput.useState3\": ()=>value ?? \"\"\n    }[\"CopilotChatInput.useState3\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (!isControlled && value !== void 0) {\n                setInternalValue(value);\n            }\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        isControlled,\n        value\n    ]);\n    const resolvedValue = isControlled ? value ?? \"\" : internalValue;\n    const [layout, setLayout] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"compact\");\n    const ignoreResizeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const resizeEvaluationRafRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isExpanded = mode === \"input\" && layout === \"expanded\";\n    const [commandQuery, setCommandQuery] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [slashHighlightIndex, setSlashHighlightIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const gridRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const addButtonContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const actionsContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRecorderRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const slashMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const config = useCopilotChatConfiguration();\n    const labels = config?.labels ?? CopilotChatDefaultLabels;\n    const previousModalStateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(void 0);\n    const measurementCanvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const measurementsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        singleLineHeight: 0,\n        maxHeight: 0,\n        paddingLeft: 0,\n        paddingRight: 0\n    });\n    const commandItems = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChatInput.useMemo2[commandItems]\": ()=>{\n            const entries = [];\n            const seen = /* @__PURE__ */ new Set();\n            const pushItem = {\n                \"CopilotChatInput.useMemo2[commandItems].pushItem\": (item)=>{\n                    if (item === \"-\") {\n                        return;\n                    }\n                    if (item.items && item.items.length > 0) {\n                        for (const nested of item.items){\n                            pushItem(nested);\n                        }\n                        return;\n                    }\n                    if (!seen.has(item.label)) {\n                        seen.add(item.label);\n                        entries.push(item);\n                    }\n                }\n            }[\"CopilotChatInput.useMemo2[commandItems].pushItem\"];\n            if (onAddFile) {\n                pushItem({\n                    label: labels.chatInputToolbarAddButtonLabel,\n                    action: onAddFile\n                });\n            }\n            if (toolsMenu && toolsMenu.length > 0) {\n                for (const item of toolsMenu){\n                    pushItem(item);\n                }\n            }\n            return entries;\n        }\n    }[\"CopilotChatInput.useMemo2[commandItems]\"], [\n        labels.chatInputToolbarAddButtonLabel,\n        onAddFile,\n        toolsMenu\n    ]);\n    const filteredCommands = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChatInput.useMemo2[filteredCommands]\": ()=>{\n            if (commandQuery === null) {\n                return [];\n            }\n            if (commandItems.length === 0) {\n                return [];\n            }\n            const query = commandQuery.trim().toLowerCase();\n            if (query.length === 0) {\n                return commandItems;\n            }\n            const startsWith = [];\n            const contains = [];\n            for (const item of commandItems){\n                const label = item.label.toLowerCase();\n                if (label.startsWith(query)) {\n                    startsWith.push(item);\n                } else if (label.includes(query)) {\n                    contains.push(item);\n                }\n            }\n            return [\n                ...startsWith,\n                ...contains\n            ];\n        }\n    }[\"CopilotChatInput.useMemo2[filteredCommands]\"], [\n        commandItems,\n        commandQuery\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (!autoFocus) {\n                previousModalStateRef.current = config?.isModalOpen;\n                return;\n            }\n            if (config?.isModalOpen && !previousModalStateRef.current) {\n                inputRef.current?.focus();\n            }\n            previousModalStateRef.current = config?.isModalOpen;\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        config?.isModalOpen,\n        autoFocus\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (commandItems.length === 0 && commandQuery !== null) {\n                setCommandQuery(null);\n            }\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        commandItems.length,\n        commandQuery\n    ]);\n    const previousCommandQueryRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (commandQuery !== null && commandQuery !== previousCommandQueryRef.current && filteredCommands.length > 0) {\n                setSlashHighlightIndex(0);\n            }\n            previousCommandQueryRef.current = commandQuery;\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        commandQuery,\n        filteredCommands.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (commandQuery === null) {\n                setSlashHighlightIndex(0);\n                return;\n            }\n            if (filteredCommands.length === 0) {\n                setSlashHighlightIndex(-1);\n            } else if (slashHighlightIndex < 0 || slashHighlightIndex >= filteredCommands.length) {\n                setSlashHighlightIndex(0);\n            }\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        commandQuery,\n        filteredCommands,\n        slashHighlightIndex\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            const recorder = audioRecorderRef.current;\n            if (!recorder) {\n                return;\n            }\n            if (mode === \"transcribe\") {\n                recorder.start().catch(console.error);\n            } else {\n                if (recorder.state === \"recording\") {\n                    recorder.stop().catch(console.error);\n                }\n            }\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        mode\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (mode !== \"input\") {\n                setLayout(\"compact\");\n                setCommandQuery(null);\n            }\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        mode\n    ]);\n    const updateSlashState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[updateSlashState]\": (value2)=>{\n            if (commandItems.length === 0) {\n                setCommandQuery({\n                    \"CopilotChatInput.useCallback2[updateSlashState]\": (prev)=>prev === null ? prev : null\n                }[\"CopilotChatInput.useCallback2[updateSlashState]\"]);\n                return;\n            }\n            if (value2.startsWith(\"/\")) {\n                const firstLine = value2.split(/\\r?\\n/, 1)[0] ?? \"\";\n                const query = firstLine.slice(1);\n                setCommandQuery({\n                    \"CopilotChatInput.useCallback2[updateSlashState]\": (prev)=>prev === query ? prev : query\n                }[\"CopilotChatInput.useCallback2[updateSlashState]\"]);\n            } else {\n                setCommandQuery({\n                    \"CopilotChatInput.useCallback2[updateSlashState]\": (prev)=>prev === null ? prev : null\n                }[\"CopilotChatInput.useCallback2[updateSlashState]\"]);\n            }\n        }\n    }[\"CopilotChatInput.useCallback2[updateSlashState]\"], [\n        commandItems.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            updateSlashState(resolvedValue);\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        resolvedValue,\n        updateSlashState\n    ]);\n    const handleChange = (e)=>{\n        const nextValue = e.target.value;\n        if (!isControlled) {\n            setInternalValue(nextValue);\n        }\n        onChange?.(nextValue);\n        updateSlashState(nextValue);\n    };\n    const clearInputValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[clearInputValue]\": ()=>{\n            if (!isControlled) {\n                setInternalValue(\"\");\n            }\n            if (onChange) {\n                onChange(\"\");\n            }\n        }\n    }[\"CopilotChatInput.useCallback2[clearInputValue]\"], [\n        isControlled,\n        onChange\n    ]);\n    const runCommand = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[runCommand]\": (item)=>{\n            clearInputValue();\n            item.action?.();\n            setCommandQuery(null);\n            setSlashHighlightIndex(0);\n            requestAnimationFrame({\n                \"CopilotChatInput.useCallback2[runCommand]\": ()=>{\n                    inputRef.current?.focus();\n                }\n            }[\"CopilotChatInput.useCallback2[runCommand]\"]);\n        }\n    }[\"CopilotChatInput.useCallback2[runCommand]\"], [\n        clearInputValue\n    ]);\n    const handleKeyDown = (e)=>{\n        if (commandQuery !== null && mode === \"input\") {\n            if (e.key === \"ArrowDown\") {\n                if (filteredCommands.length > 0) {\n                    e.preventDefault();\n                    setSlashHighlightIndex((prev)=>{\n                        if (filteredCommands.length === 0) {\n                            return prev;\n                        }\n                        const next = prev === -1 ? 0 : (prev + 1) % filteredCommands.length;\n                        return next;\n                    });\n                }\n                return;\n            }\n            if (e.key === \"ArrowUp\") {\n                if (filteredCommands.length > 0) {\n                    e.preventDefault();\n                    setSlashHighlightIndex((prev)=>{\n                        if (filteredCommands.length === 0) {\n                            return prev;\n                        }\n                        if (prev === -1) {\n                            return filteredCommands.length - 1;\n                        }\n                        return prev <= 0 ? filteredCommands.length - 1 : prev - 1;\n                    });\n                }\n                return;\n            }\n            if (e.key === \"Enter\") {\n                const selected = slashHighlightIndex >= 0 ? filteredCommands[slashHighlightIndex] : void 0;\n                if (selected) {\n                    e.preventDefault();\n                    runCommand(selected);\n                    return;\n                }\n            }\n            if (e.key === \"Escape\") {\n                e.preventDefault();\n                setCommandQuery(null);\n                return;\n            }\n        }\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            if (isProcessing) {\n                onStop?.();\n            } else {\n                send();\n            }\n        }\n    };\n    const send = ()=>{\n        if (!onSubmitMessage) {\n            return;\n        }\n        const trimmed = resolvedValue.trim();\n        if (!trimmed) {\n            return;\n        }\n        onSubmitMessage(trimmed);\n        if (!isControlled) {\n            setInternalValue(\"\");\n            onChange?.(\"\");\n        }\n        if (inputRef.current) {\n            inputRef.current.focus();\n        }\n    };\n    const BoundTextArea = renderSlot(textArea, CopilotChatInput.TextArea, {\n        ref: inputRef,\n        value: resolvedValue,\n        onChange: handleChange,\n        onKeyDown: handleKeyDown,\n        autoFocus,\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"w-full py-3\", isExpanded ? \"px-5\" : \"pr-5\")\n    });\n    const isProcessing = mode !== \"transcribe\" && isRunning;\n    const canSend = resolvedValue.trim().length > 0 && !!onSubmitMessage;\n    const canStop = !!onStop;\n    const handleSendButtonClick = ()=>{\n        if (isProcessing) {\n            onStop?.();\n            return;\n        }\n        send();\n    };\n    const BoundAudioRecorder = renderSlot(audioRecorder, CopilotChatAudioRecorder, {\n        ref: audioRecorderRef\n    });\n    const BoundSendButton = renderSlot(sendButton, CopilotChatInput.SendButton, {\n        onClick: handleSendButtonClick,\n        disabled: isProcessing ? !canStop : !canSend,\n        children: isProcessing && canStop ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n            className: \"size-[18px] fill-current\"\n        }) : void 0\n    });\n    const BoundStartTranscribeButton = renderSlot(startTranscribeButton, CopilotChatInput.StartTranscribeButton, {\n        onClick: onStartTranscribe\n    });\n    const BoundCancelTranscribeButton = renderSlot(cancelTranscribeButton, CopilotChatInput.CancelTranscribeButton, {\n        onClick: onCancelTranscribe\n    });\n    const handleFinishTranscribe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[handleFinishTranscribe]\": async ()=>{\n            const recorder = audioRecorderRef.current;\n            if (recorder && recorder.state === \"recording\") {\n                try {\n                    const audioBlob = await recorder.stop();\n                    if (onFinishTranscribeWithAudio) {\n                        await onFinishTranscribeWithAudio(audioBlob);\n                    }\n                } catch (error) {\n                    console.error(\"Failed to stop recording:\", error);\n                }\n            }\n            onFinishTranscribe?.();\n        }\n    }[\"CopilotChatInput.useCallback2[handleFinishTranscribe]\"], [\n        onFinishTranscribe,\n        onFinishTranscribeWithAudio\n    ]);\n    const BoundFinishTranscribeButton = renderSlot(finishTranscribeButton, CopilotChatInput.FinishTranscribeButton, {\n        onClick: handleFinishTranscribe\n    });\n    const BoundAddMenuButton = renderSlot(addMenuButton, CopilotChatInput.AddMenuButton, {\n        disabled: mode === \"transcribe\",\n        onAddFile,\n        toolsMenu\n    });\n    if (children) {\n        const childProps = {\n            textArea: BoundTextArea,\n            audioRecorder: BoundAudioRecorder,\n            sendButton: BoundSendButton,\n            startTranscribeButton: BoundStartTranscribeButton,\n            cancelTranscribeButton: BoundCancelTranscribeButton,\n            finishTranscribeButton: BoundFinishTranscribeButton,\n            addMenuButton: BoundAddMenuButton,\n            onSubmitMessage,\n            onStop,\n            isRunning,\n            onStartTranscribe,\n            onCancelTranscribe,\n            onFinishTranscribe,\n            onAddFile,\n            mode,\n            toolsMenu,\n            autoFocus\n        };\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n            children: children(childProps)\n        });\n    }\n    const handleContainerClick = (e)=>{\n        const target = e.target;\n        if (target.tagName !== \"BUTTON\" && !target.closest(\"button\") && inputRef.current && mode === \"input\") {\n            inputRef.current.focus();\n        }\n    };\n    const ensureMeasurements = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[ensureMeasurements]\": ()=>{\n            const textarea = inputRef.current;\n            if (!textarea) {\n                return;\n            }\n            const previousValue = textarea.value;\n            const previousHeight = textarea.style.height;\n            textarea.style.height = \"auto\";\n            const computedStyle = window.getComputedStyle(textarea);\n            const paddingLeft = parseFloat(computedStyle.paddingLeft) || 0;\n            const paddingRight = parseFloat(computedStyle.paddingRight) || 0;\n            const paddingTop = parseFloat(computedStyle.paddingTop) || 0;\n            const paddingBottom = parseFloat(computedStyle.paddingBottom) || 0;\n            textarea.value = \"\";\n            const singleLineHeight = textarea.scrollHeight;\n            textarea.value = previousValue;\n            const contentHeight = singleLineHeight - paddingTop - paddingBottom;\n            const maxHeight = contentHeight * 5 + paddingTop + paddingBottom;\n            measurementsRef.current = {\n                singleLineHeight,\n                maxHeight,\n                paddingLeft,\n                paddingRight\n            };\n            textarea.style.height = previousHeight;\n            textarea.style.maxHeight = `${maxHeight}px`;\n        }\n    }[\"CopilotChatInput.useCallback2[ensureMeasurements]\"], []);\n    const adjustTextareaHeight = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[adjustTextareaHeight]\": ()=>{\n            const textarea = inputRef.current;\n            if (!textarea) {\n                return 0;\n            }\n            if (measurementsRef.current.singleLineHeight === 0) {\n                ensureMeasurements();\n            }\n            const { maxHeight } = measurementsRef.current;\n            if (maxHeight) {\n                textarea.style.maxHeight = `${maxHeight}px`;\n            }\n            textarea.style.height = \"auto\";\n            const scrollHeight = textarea.scrollHeight;\n            if (maxHeight) {\n                textarea.style.height = `${Math.min(scrollHeight, maxHeight)}px`;\n            } else {\n                textarea.style.height = `${scrollHeight}px`;\n            }\n            return scrollHeight;\n        }\n    }[\"CopilotChatInput.useCallback2[adjustTextareaHeight]\"], [\n        ensureMeasurements\n    ]);\n    const updateLayout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[updateLayout]\": (nextLayout)=>{\n            setLayout({\n                \"CopilotChatInput.useCallback2[updateLayout]\": (prev)=>{\n                    if (prev === nextLayout) {\n                        return prev;\n                    }\n                    ignoreResizeRef.current = true;\n                    return nextLayout;\n                }\n            }[\"CopilotChatInput.useCallback2[updateLayout]\"]);\n        }\n    }[\"CopilotChatInput.useCallback2[updateLayout]\"], []);\n    const evaluateLayout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChatInput.useCallback2[evaluateLayout]\": ()=>{\n            if (mode !== \"input\") {\n                updateLayout(\"compact\");\n                return;\n            }\n            if (false) {}\n            const textarea = inputRef.current;\n            const grid = gridRef.current;\n            const addContainer = addButtonContainerRef.current;\n            const actionsContainer = actionsContainerRef.current;\n            if (!textarea || !grid || !addContainer || !actionsContainer) {\n                return;\n            }\n            if (measurementsRef.current.singleLineHeight === 0) {\n                ensureMeasurements();\n            }\n            const scrollHeight = adjustTextareaHeight();\n            const baseline = measurementsRef.current.singleLineHeight;\n            const hasExplicitBreak = resolvedValue.includes(\"\\n\");\n            const renderedMultiline = baseline > 0 ? scrollHeight > baseline + 1 : false;\n            let shouldExpand = hasExplicitBreak || renderedMultiline;\n            if (!shouldExpand) {\n                const gridStyles = window.getComputedStyle(grid);\n                const paddingLeft = parseFloat(gridStyles.paddingLeft) || 0;\n                const paddingRight = parseFloat(gridStyles.paddingRight) || 0;\n                const columnGap = parseFloat(gridStyles.columnGap) || 0;\n                const gridAvailableWidth = grid.clientWidth - paddingLeft - paddingRight;\n                if (gridAvailableWidth > 0) {\n                    const addWidth = addContainer.getBoundingClientRect().width;\n                    const actionsWidth = actionsContainer.getBoundingClientRect().width;\n                    const compactWidth = Math.max(gridAvailableWidth - addWidth - actionsWidth - columnGap * 2, 0);\n                    const canvas = measurementCanvasRef.current ?? document.createElement(\"canvas\");\n                    if (!measurementCanvasRef.current) {\n                        measurementCanvasRef.current = canvas;\n                    }\n                    const context = canvas.getContext(\"2d\");\n                    if (context) {\n                        const textareaStyles = window.getComputedStyle(textarea);\n                        const font = textareaStyles.font || `${textareaStyles.fontStyle} ${textareaStyles.fontVariant} ${textareaStyles.fontWeight} ${textareaStyles.fontSize}/${textareaStyles.lineHeight} ${textareaStyles.fontFamily}`;\n                        context.font = font;\n                        const compactInnerWidth = Math.max(compactWidth - (measurementsRef.current.paddingLeft || 0) - (measurementsRef.current.paddingRight || 0), 0);\n                        if (compactInnerWidth > 0) {\n                            const lines = resolvedValue.length > 0 ? resolvedValue.split(\"\\n\") : [\n                                \"\"\n                            ];\n                            let longestWidth = 0;\n                            for (const line of lines){\n                                const metrics = context.measureText(line || \" \");\n                                if (metrics.width > longestWidth) {\n                                    longestWidth = metrics.width;\n                                }\n                            }\n                            if (longestWidth > compactInnerWidth) {\n                                shouldExpand = true;\n                            }\n                        }\n                    }\n                }\n            }\n            const nextLayout = shouldExpand ? \"expanded\" : \"compact\";\n            updateLayout(nextLayout);\n        }\n    }[\"CopilotChatInput.useCallback2[evaluateLayout]\"], [\n        adjustTextareaHeight,\n        ensureMeasurements,\n        mode,\n        resolvedValue,\n        updateLayout\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"CopilotChatInput.useLayoutEffect\": ()=>{\n            evaluateLayout();\n        }\n    }[\"CopilotChatInput.useLayoutEffect\"], [\n        evaluateLayout\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (typeof ResizeObserver === \"undefined\") {\n                return;\n            }\n            const textarea = inputRef.current;\n            const grid = gridRef.current;\n            const addContainer = addButtonContainerRef.current;\n            const actionsContainer = actionsContainerRef.current;\n            if (!textarea || !grid || !addContainer || !actionsContainer) {\n                return;\n            }\n            const scheduleEvaluation = {\n                \"CopilotChatInput.useEffect2.scheduleEvaluation\": ()=>{\n                    if (ignoreResizeRef.current) {\n                        ignoreResizeRef.current = false;\n                        return;\n                    }\n                    if (true) {\n                        evaluateLayout();\n                        return;\n                    }\n                    if (resizeEvaluationRafRef.current !== null) {\n                        cancelAnimationFrame(resizeEvaluationRafRef.current);\n                    }\n                    resizeEvaluationRafRef.current = window.requestAnimationFrame({\n                        \"CopilotChatInput.useEffect2.scheduleEvaluation\": ()=>{\n                            resizeEvaluationRafRef.current = null;\n                            evaluateLayout();\n                        }\n                    }[\"CopilotChatInput.useEffect2.scheduleEvaluation\"]);\n                }\n            }[\"CopilotChatInput.useEffect2.scheduleEvaluation\"];\n            const observer = new ResizeObserver({\n                \"CopilotChatInput.useEffect2\": ()=>{\n                    scheduleEvaluation();\n                }\n            }[\"CopilotChatInput.useEffect2\"]);\n            observer.observe(grid);\n            observer.observe(addContainer);\n            observer.observe(actionsContainer);\n            observer.observe(textarea);\n            return ({\n                \"CopilotChatInput.useEffect2\": ()=>{\n                    observer.disconnect();\n                    if (false) {}\n                }\n            })[\"CopilotChatInput.useEffect2\"];\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        evaluateLayout\n    ]);\n    const slashMenuVisible = commandQuery !== null && commandItems.length > 0;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatInput.useEffect2\": ()=>{\n            if (!slashMenuVisible || slashHighlightIndex < 0) {\n                return;\n            }\n            const active = slashMenuRef.current?.querySelector(`[data-slash-index=\"${slashHighlightIndex}\"]`);\n            active?.scrollIntoView({\n                block: \"nearest\"\n            });\n        }\n    }[\"CopilotChatInput.useEffect2\"], [\n        slashMenuVisible,\n        slashHighlightIndex\n    ]);\n    const slashMenu = slashMenuVisible ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n        \"data-testid\": \"copilot-slash-menu\",\n        role: \"listbox\",\n        \"aria-label\": \"Slash commands\",\n        ref: slashMenuRef,\n        className: \"absolute bottom-full left-0 right-0 z-30 mb-2 max-h-64 overflow-y-auto rounded-lg border border-border bg-white shadow-lg dark:border-[#3a3a3a] dark:bg-[#1f1f1f]\",\n        style: {\n            maxHeight: `${SLASH_MENU_MAX_VISIBLE_ITEMS * SLASH_MENU_ITEM_HEIGHT_PX}px`\n        },\n        children: filteredCommands.length === 0 ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: \"px-3 py-2 text-sm text-muted-foreground\",\n            children: \"No commands found\"\n        }) : filteredCommands.map((item, index)=>{\n            const isActive = index === slashHighlightIndex;\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"button\", {\n                type: \"button\",\n                role: \"option\",\n                \"aria-selected\": isActive,\n                \"data-active\": isActive ? \"true\" : void 0,\n                \"data-slash-index\": index,\n                className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"w-full px-3 py-2 text-left text-sm transition-colors\", \"hover:bg-muted dark:hover:bg-[#2f2f2f]\", isActive ? \"bg-muted dark:bg-[#2f2f2f]\" : \"bg-transparent\"),\n                onMouseEnter: ()=>setSlashHighlightIndex(index),\n                onMouseDown: (event)=>{\n                    event.preventDefault();\n                    runCommand(item);\n                },\n                children: item.label\n            }, `${item.label}-${index}`);\n        })\n    }) : null;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(// Layout\n        \"flex w-full flex-col items-center justify-center\", // Interaction\n        \"cursor-text\", // Overflow and clipping\n        \"overflow-visible bg-clip-padding contain-inline-size\", // Background\n        \"bg-white dark:bg-[#303030]\", // Visual effects\n        \"shadow-[0_4px_4px_0_#0000000a,0_0_1px_0_#0000009e] rounded-[28px]\", className),\n        onClick: handleContainerClick,\n        ...props,\n        \"data-layout\": isExpanded ? \"expanded\" : \"compact\",\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            ref: gridRef,\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"grid w-full gap-x-3 gap-y-3 px-3 py-2\", isExpanded ? \"grid-cols-[auto_minmax(0,1fr)_auto] grid-rows-[auto_auto]\" : \"grid-cols-[auto_minmax(0,1fr)_auto] items-center\"),\n            \"data-layout\": isExpanded ? \"expanded\" : \"compact\",\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    ref: addButtonContainerRef,\n                    className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"flex items-center\", isExpanded ? \"row-start-2\" : \"row-start-1\", \"col-start-1\"),\n                    children: BoundAddMenuButton\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"relative flex min-w-0 flex-col min-h-[50px] justify-center\", isExpanded ? \"col-span-3 row-start-1\" : \"col-start-2 row-start-1\"),\n                    children: mode === \"transcribe\" ? BoundAudioRecorder : mode === \"processing\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        className: \"flex w-full items-center justify-center py-3 px-5\",\n                        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                            className: \"size-[26px] animate-spin text-muted-foreground\"\n                        })\n                    }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n                        children: [\n                            BoundTextArea,\n                            slashMenu\n                        ]\n                    })\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    ref: actionsContainerRef,\n                    className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"flex items-center justify-end gap-2\", isExpanded ? \"col-start-3 row-start-2\" : \"col-start-3 row-start-1\"),\n                    children: mode === \"transcribe\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n                        children: [\n                            onCancelTranscribe && BoundCancelTranscribeButton,\n                            onFinishTranscribe && BoundFinishTranscribeButton\n                        ]\n                    }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n                        children: [\n                            onStartTranscribe && BoundStartTranscribeButton,\n                            BoundSendButton\n                        ]\n                    })\n                })\n            ]\n        })\n    });\n}\n((CopilotChatInput2)=>{\n    CopilotChatInput2.SendButton = ({ className, children, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: \"mr-[10px]\",\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n                type: \"button\",\n                variant: \"chatInputToolbarPrimary\",\n                size: \"chatInputToolbarIcon\",\n                className,\n                ...props,\n                children: children ?? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                    className: \"size-[18px]\"\n                })\n            })\n        });\n    CopilotChatInput2.ToolbarButton = ({ icon, labelKey, defaultClassName, className, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(Tooltip, {\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipTrigger, {\n                    asChild: true,\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n                        type: \"button\",\n                        variant: \"chatInputToolbarSecondary\",\n                        size: \"chatInputToolbarIcon\",\n                        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(defaultClassName, className),\n                        ...props,\n                        children: icon\n                    })\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipContent, {\n                    side: \"bottom\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"p\", {\n                        children: labels[labelKey]\n                    })\n                })\n            ]\n        });\n    };\n    CopilotChatInput2.StartTranscribeButton = (props)=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatInput2.ToolbarButton, {\n            icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                className: \"size-[18px]\"\n            }),\n            labelKey: \"chatInputToolbarStartTranscribeButtonLabel\",\n            defaultClassName: \"mr-2\",\n            ...props\n        });\n    CopilotChatInput2.CancelTranscribeButton = (props)=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatInput2.ToolbarButton, {\n            icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                className: \"size-[18px]\"\n            }),\n            labelKey: \"chatInputToolbarCancelTranscribeButtonLabel\",\n            defaultClassName: \"mr-2\",\n            ...props\n        });\n    CopilotChatInput2.FinishTranscribeButton = (props)=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatInput2.ToolbarButton, {\n            icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                className: \"size-[18px]\"\n            }),\n            labelKey: \"chatInputToolbarFinishTranscribeButtonLabel\",\n            defaultClassName: \"mr-[10px]\",\n            ...props\n        });\n    CopilotChatInput2.AddMenuButton = ({ className, toolsMenu, onAddFile, disabled, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        const menuItems = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n            \"useMemo2[menuItems]\": ()=>{\n                const items = [];\n                if (onAddFile) {\n                    items.push({\n                        label: labels.chatInputToolbarAddButtonLabel,\n                        action: onAddFile\n                    });\n                }\n                if (toolsMenu && toolsMenu.length > 0) {\n                    if (items.length > 0) {\n                        items.push(\"-\");\n                    }\n                    for (const item of toolsMenu){\n                        if (item === \"-\") {\n                            if (items.length === 0 || items[items.length - 1] === \"-\") {\n                                continue;\n                            }\n                            items.push(item);\n                        } else {\n                            items.push(item);\n                        }\n                    }\n                    while(items.length > 0 && items[items.length - 1] === \"-\"){\n                        items.pop();\n                    }\n                }\n                return items;\n            }\n        }[\"useMemo2[menuItems]\"], [\n            onAddFile,\n            toolsMenu,\n            labels.chatInputToolbarAddButtonLabel\n        ]);\n        const renderMenuItems = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n            \"useCallback2[renderMenuItems]\": (items)=>items.map({\n                    \"useCallback2[renderMenuItems]\": (item, index)=>{\n                        if (item === \"-\") {\n                            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(DropdownMenuSeparator, {}, `separator-${index}`);\n                        }\n                        if (item.items && item.items.length > 0) {\n                            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(DropdownMenuSub, {\n                                children: [\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(DropdownMenuSubTrigger, {\n                                        children: item.label\n                                    }),\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(DropdownMenuSubContent, {\n                                        children: renderMenuItems(item.items)\n                                    })\n                                ]\n                            }, `group-${index}`);\n                        }\n                        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(DropdownMenuItem, {\n                            onClick: item.action,\n                            children: item.label\n                        }, `item-${index}`);\n                    }\n                }[\"useCallback2[renderMenuItems]\"])\n        }[\"useCallback2[renderMenuItems]\"], []);\n        const hasMenuItems = menuItems.length > 0;\n        const isDisabled = disabled || !hasMenuItems;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(DropdownMenu, {\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(Tooltip, {\n                    children: [\n                        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipTrigger, {\n                            asChild: true,\n                            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(DropdownMenuTrigger, {\n                                asChild: true,\n                                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n                                    type: \"button\",\n                                    variant: \"chatInputToolbarSecondary\",\n                                    size: \"chatInputToolbarIcon\",\n                                    className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"ml-1\", className),\n                                    disabled: isDisabled,\n                                    ...props,\n                                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                        className: \"size-[20px]\"\n                                    })\n                                })\n                            })\n                        }),\n                        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipContent, {\n                            side: \"bottom\",\n                            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"p\", {\n                                className: \"flex items-center gap-1 text-xs font-medium\",\n                                children: [\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n                                        children: \"Add files and more\"\n                                    }),\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"code\", {\n                                        className: \"rounded bg-[#4a4a4a] px-1 py-[1px] font-mono text-[11px] text-white dark:bg-[#e0e0e0] dark:text-black\",\n                                        children: \"/\"\n                                    })\n                                ]\n                            })\n                        })\n                    ]\n                }),\n                hasMenuItems && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(DropdownMenuContent, {\n                    side: \"top\",\n                    align: \"start\",\n                    children: renderMenuItems(menuItems)\n                })\n            ]\n        });\n    };\n    CopilotChatInput2.TextArea = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function TextArea2({ style, className, autoFocus, ...props }, ref) {\n        const internalTextareaRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(ref, {\n            \"TextArea2.useImperativeHandle2\": ()=>internalTextareaRef.current\n        }[\"TextArea2.useImperativeHandle2\"]);\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n            \"TextArea2.useEffect2\": ()=>{\n                const textarea = internalTextareaRef.current;\n                if (!textarea) return;\n                const handleFocus = {\n                    \"TextArea2.useEffect2.handleFocus\": ()=>{\n                        setTimeout({\n                            \"TextArea2.useEffect2.handleFocus\": ()=>{\n                                textarea.scrollIntoView({\n                                    behavior: \"smooth\",\n                                    block: \"nearest\"\n                                });\n                            }\n                        }[\"TextArea2.useEffect2.handleFocus\"], 300);\n                    }\n                }[\"TextArea2.useEffect2.handleFocus\"];\n                textarea.addEventListener(\"focus\", handleFocus);\n                return ({\n                    \"TextArea2.useEffect2\": ()=>textarea.removeEventListener(\"focus\", handleFocus)\n                })[\"TextArea2.useEffect2\"];\n            }\n        }[\"TextArea2.useEffect2\"], []);\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n            \"TextArea2.useEffect2\": ()=>{\n                if (autoFocus) {\n                    internalTextareaRef.current?.focus();\n                }\n            }\n        }[\"TextArea2.useEffect2\"], [\n            autoFocus\n        ]);\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"textarea\", {\n            ref: internalTextareaRef,\n            ...props,\n            style: {\n                overflow: \"auto\",\n                resize: \"none\",\n                ...style\n            },\n            placeholder: labels.chatInputPlaceholder,\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"bg-transparent outline-none antialiased font-regular leading-relaxed text-[16px] placeholder:text-[#00000077] dark:placeholder:text-[#fffc]\", className),\n            rows: 1\n        });\n    });\n    CopilotChatInput2.AudioRecorder = CopilotChatAudioRecorder;\n})(CopilotChatInput || (CopilotChatInput = {}));\nCopilotChatInput.TextArea.displayName = \"CopilotChatInput.TextArea\";\nCopilotChatInput.SendButton.displayName = \"CopilotChatInput.SendButton\";\nCopilotChatInput.ToolbarButton.displayName = \"CopilotChatInput.ToolbarButton\";\nCopilotChatInput.StartTranscribeButton.displayName = \"CopilotChatInput.StartTranscribeButton\";\nCopilotChatInput.CancelTranscribeButton.displayName = \"CopilotChatInput.CancelTranscribeButton\";\nCopilotChatInput.FinishTranscribeButton.displayName = \"CopilotChatInput.FinishTranscribeButton\";\nCopilotChatInput.AddMenuButton.displayName = \"CopilotChatInput.AddMenuButton\";\nvar CopilotChatInput_default = CopilotChatInput;\n// src/components/chat/CopilotChatAssistantMessage.tsx\n\n\n\n\n\n// src/hooks/use-render-tool-call.tsx\n\n\n// src/providers/CopilotKitProvider.tsx\n\n\n// src/lib/react-core.ts\n\nvar CopilotKitCoreReact = class extends _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__.CopilotKitCore {\n    constructor(config){\n        super(config), this._renderToolCalls = [], this._renderCustomMessages = [], this._renderActivityMessages = [];\n        this._renderToolCalls = config.renderToolCalls ?? [];\n        this._renderCustomMessages = config.renderCustomMessages ?? [];\n        this._renderActivityMessages = config.renderActivityMessages ?? [];\n    }\n    get renderCustomMessages() {\n        return this._renderCustomMessages;\n    }\n    get renderActivityMessages() {\n        return this._renderActivityMessages;\n    }\n    get renderToolCalls() {\n        return this._renderToolCalls;\n    }\n    setRenderToolCalls(renderToolCalls) {\n        this._renderToolCalls = renderToolCalls;\n        void this.notifySubscribers((subscriber)=>{\n            const reactSubscriber = subscriber;\n            if (reactSubscriber.onRenderToolCallsChanged) {\n                reactSubscriber.onRenderToolCallsChanged({\n                    copilotkit: this,\n                    renderToolCalls: this.renderToolCalls\n                });\n            }\n        }, \"Subscriber onRenderToolCallsChanged error:\");\n    }\n    // Override to accept React-specific subscriber type\n    subscribe(subscriber) {\n        return super.subscribe(subscriber);\n    }\n};\n// src/components/CopilotKitInspector.tsx\n\n\n\nvar CopilotKitInspector = ({ core, ...rest })=>{\n    const [InspectorComponent, setInspectorComponent] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect({\n        \"CopilotKitInspector.useEffect\": ()=>{\n            let mounted = true;\n            Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@copilotkitnext\"), __webpack_require__.e(\"vendor-chunks/@lit\"), __webpack_require__.e(\"vendor-chunks/@lit-labs\"), __webpack_require__.e(\"vendor-chunks/lucide\"), __webpack_require__.e(\"vendor-chunks/lit-html\"), __webpack_require__.e(\"vendor-chunks/lit\"), __webpack_require__.e(\"vendor-chunks/marked\"), __webpack_require__.e(\"vendor-chunks/lit-element\")]).then(__webpack_require__.bind(__webpack_require__, /*! @copilotkitnext/web-inspector */ \"(ssr)/./node_modules/@copilotkitnext/web-inspector/dist/index.mjs\")).then({\n                \"CopilotKitInspector.useEffect\": (mod)=>{\n                    mod.defineWebInspector?.();\n                    const Component = (0,_lit_labs_react__WEBPACK_IMPORTED_MODULE_21__.createComponent)({\n                        tagName: mod.WEB_INSPECTOR_TAG,\n                        elementClass: mod.WebInspectorElement,\n                        react: /*#__PURE__*/ (react__WEBPACK_IMPORTED_MODULE_1___namespace_cache || (react__WEBPACK_IMPORTED_MODULE_1___namespace_cache = __webpack_require__.t(react__WEBPACK_IMPORTED_MODULE_1__, 2)))\n                    });\n                    if (mounted) {\n                        setInspectorComponent({\n                            \"CopilotKitInspector.useEffect\": ()=>Component\n                        }[\"CopilotKitInspector.useEffect\"]);\n                    }\n                }\n            }[\"CopilotKitInspector.useEffect\"]);\n            return ({\n                \"CopilotKitInspector.useEffect\": ()=>{\n                    mounted = false;\n                }\n            })[\"CopilotKitInspector.useEffect\"];\n        }\n    }[\"CopilotKitInspector.useEffect\"], []);\n    if (!InspectorComponent) return null;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(InspectorComponent, {\n        ...rest,\n        core: core ?? null\n    });\n};\nCopilotKitInspector.displayName = \"CopilotKitInspector\";\n// src/components/MCPAppsActivityRenderer.tsx\n\n\n\nvar PROTOCOL_VERSION = \"2025-06-18\";\nvar SANDBOX_HTML = `<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\" />\n<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src * data: blob: 'unsafe-inline'; media-src * blob: data:; font-src * blob: data:; script-src 'self' 'wasm-unsafe-eval' 'unsafe-inline' 'unsafe-eval' blob: data: http://localhost:* https://localhost:*; style-src * blob: data: 'unsafe-inline'; connect-src *; frame-src * blob: data: http://localhost:* https://localhost:*; base-uri 'self';\" />\n<style>html,body{margin:0;padding:0;height:100%;width:100%;overflow:hidden}*{box-sizing:border-box}iframe{background-color:transparent;border:none;padding:0;overflow:hidden;width:100%;height:100%}</style>\n</head>\n<body>\n<script>\nif(window.self===window.top){throw new Error(\"This file must be used in an iframe.\")}\nconst inner=document.createElement(\"iframe\");\ninner.style=\"width:100%;height:100%;border:none;\";\ninner.setAttribute(\"sandbox\",\"allow-scripts allow-same-origin allow-forms\");\ndocument.body.appendChild(inner);\nwindow.addEventListener(\"message\",async(event)=>{\nif(event.source===window.parent){\nif(event.data&&event.data.method===\"ui/notifications/sandbox-resource-ready\"){\nconst{html,sandbox}=event.data.params;\nif(typeof sandbox===\"string\")inner.setAttribute(\"sandbox\",sandbox);\nif(typeof html===\"string\")inner.srcdoc=html;\n}else if(inner&&inner.contentWindow){\ninner.contentWindow.postMessage(event.data,\"*\");\n}\n}else if(event.source===inner.contentWindow){\nwindow.parent.postMessage(event.data,\"*\");\n}\n});\nwindow.parent.postMessage({jsonrpc:\"2.0\",method:\"ui/notifications/sandbox-proxy-ready\",params:{}},\"*\");\n</script>\n</body>\n</html>`;\nvar MCPAppsRequestQueue = class {\n    /**\n   * Add a request to the queue for a specific agent thread.\n   * Returns a promise that resolves when the request completes.\n   */ async enqueue(agent, request) {\n        const threadId = agent.threadId || \"default\";\n        return new Promise((resolve, reject)=>{\n            let queue = this.queues.get(threadId);\n            if (!queue) {\n                queue = [];\n                this.queues.set(threadId, queue);\n            }\n            queue.push({\n                execute: request,\n                resolve,\n                reject\n            });\n            this.processQueue(threadId, agent);\n        });\n    }\n    async processQueue(threadId, agent) {\n        if (this.processing.get(threadId)) {\n            return;\n        }\n        this.processing.set(threadId, true);\n        try {\n            const queue = this.queues.get(threadId);\n            if (!queue) return;\n            while(queue.length > 0){\n                const item = queue[0];\n                try {\n                    await this.waitForAgentIdle(agent);\n                    const result = await item.execute();\n                    item.resolve(result);\n                } catch (error) {\n                    item.reject(error instanceof Error ? error : new Error(String(error)));\n                }\n                queue.shift();\n            }\n        } finally{\n            this.processing.set(threadId, false);\n        }\n    }\n    waitForAgentIdle(agent) {\n        return new Promise((resolve)=>{\n            if (!agent.isRunning) {\n                resolve();\n                return;\n            }\n            let done = false;\n            const finish = ()=>{\n                if (done) return;\n                done = true;\n                clearInterval(checkInterval);\n                sub.unsubscribe();\n                resolve();\n            };\n            const sub = agent.subscribe({\n                onRunFinalized: finish,\n                onRunFailed: finish\n            });\n            const checkInterval = setInterval(()=>{\n                if (!agent.isRunning) finish();\n            }, 500);\n        });\n    }\n    constructor(){\n        this.queues = /* @__PURE__ */ new Map();\n        this.processing = /* @__PURE__ */ new Map();\n    }\n};\nvar mcpAppsRequestQueue = new MCPAppsRequestQueue();\nvar MCPAppsActivityType = \"mcp-apps\";\nvar MCPAppsActivityContentSchema = zod__WEBPACK_IMPORTED_MODULE_22__.object({\n    result: zod__WEBPACK_IMPORTED_MODULE_22__.object({\n        content: zod__WEBPACK_IMPORTED_MODULE_22__.array(zod__WEBPACK_IMPORTED_MODULE_22__.any()).optional(),\n        structuredContent: zod__WEBPACK_IMPORTED_MODULE_22__.any().optional(),\n        isError: zod__WEBPACK_IMPORTED_MODULE_22__.boolean().optional()\n    }),\n    // Resource URI to fetch (e.g., \"ui://server/dashboard\")\n    resourceUri: zod__WEBPACK_IMPORTED_MODULE_22__.string(),\n    // MD5 hash of server config (renamed from serverId in 0.0.1)\n    serverHash: zod__WEBPACK_IMPORTED_MODULE_22__.string(),\n    // Optional stable server ID from config (takes precedence over serverHash)\n    serverId: zod__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n    // Original tool input arguments\n    toolInput: zod__WEBPACK_IMPORTED_MODULE_22__.record(zod__WEBPACK_IMPORTED_MODULE_22__.unknown()).optional()\n});\nfunction isRequest(msg) {\n    return \"id\" in msg && \"method\" in msg;\n}\nfunction isNotification(msg) {\n    return !(\"id\" in msg) && \"method\" in msg;\n}\nvar MCPAppsActivityRenderer = function MCPAppsActivityRenderer2({ content, agent }) {\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const iframeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [iframeReady, setIframeReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [iframeSize, setIframeSize] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [fetchedResource, setFetchedResource] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const contentRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(content);\n    contentRef.current = content;\n    const agentRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(agent);\n    agentRef.current = agent;\n    const fetchStateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        inProgress: false,\n        promise: null,\n        resourceUri: null\n    });\n    const sendToIframe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MCPAppsActivityRenderer2.useCallback3[sendToIframe]\": (msg)=>{\n            if (iframeRef.current?.contentWindow) {\n                console.log(\"[MCPAppsRenderer] Sending to iframe:\", msg);\n                iframeRef.current.contentWindow.postMessage(msg, \"*\");\n            }\n        }\n    }[\"MCPAppsActivityRenderer2.useCallback3[sendToIframe]\"], []);\n    const sendResponse = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MCPAppsActivityRenderer2.useCallback3[sendResponse]\": (id, result)=>{\n            sendToIframe({\n                jsonrpc: \"2.0\",\n                id,\n                result\n            });\n        }\n    }[\"MCPAppsActivityRenderer2.useCallback3[sendResponse]\"], [\n        sendToIframe\n    ]);\n    const sendErrorResponse = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MCPAppsActivityRenderer2.useCallback3[sendErrorResponse]\": (id, code, message)=>{\n            sendToIframe({\n                jsonrpc: \"2.0\",\n                id,\n                error: {\n                    code,\n                    message\n                }\n            });\n        }\n    }[\"MCPAppsActivityRenderer2.useCallback3[sendErrorResponse]\"], [\n        sendToIframe\n    ]);\n    const sendNotification = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MCPAppsActivityRenderer2.useCallback3[sendNotification]\": (method, params)=>{\n            sendToIframe({\n                jsonrpc: \"2.0\",\n                method,\n                params: params || {}\n            });\n        }\n    }[\"MCPAppsActivityRenderer2.useCallback3[sendNotification]\"], [\n        sendToIframe\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MCPAppsActivityRenderer2.useEffect4\": ()=>{\n            const { resourceUri, serverHash, serverId } = content;\n            if (fetchStateRef.current.inProgress && fetchStateRef.current.resourceUri === resourceUri) {\n                fetchStateRef.current.promise?.then({\n                    \"MCPAppsActivityRenderer2.useEffect4\": (resource)=>{\n                        if (resource) {\n                            setFetchedResource(resource);\n                            setIsLoading(false);\n                        }\n                    }\n                }[\"MCPAppsActivityRenderer2.useEffect4\"]).catch({\n                    \"MCPAppsActivityRenderer2.useEffect4\": (err)=>{\n                        setError(err instanceof Error ? err : new Error(String(err)));\n                        setIsLoading(false);\n                    }\n                }[\"MCPAppsActivityRenderer2.useEffect4\"]);\n                return;\n            }\n            if (!agent) {\n                setError(new Error(\"No agent available to fetch resource\"));\n                setIsLoading(false);\n                return;\n            }\n            fetchStateRef.current.inProgress = true;\n            fetchStateRef.current.resourceUri = resourceUri;\n            const fetchPromise = ({\n                \"MCPAppsActivityRenderer2.useEffect4.fetchPromise\": async ()=>{\n                    try {\n                        const runResult = await mcpAppsRequestQueue.enqueue(agent, {\n                            \"MCPAppsActivityRenderer2.useEffect4.fetchPromise\": ()=>agent.runAgent({\n                                    forwardedProps: {\n                                        __proxiedMCPRequest: {\n                                            serverHash,\n                                            serverId,\n                                            // optional, takes precedence if provided\n                                            method: \"resources/read\",\n                                            params: {\n                                                uri: resourceUri\n                                            }\n                                        }\n                                    }\n                                })\n                        }[\"MCPAppsActivityRenderer2.useEffect4.fetchPromise\"]);\n                        const resultData = runResult.result;\n                        const resource = resultData?.contents?.[0];\n                        if (!resource) {\n                            throw new Error(\"No resource content in response\");\n                        }\n                        return resource;\n                    } catch (err) {\n                        console.error(\"[MCPAppsRenderer] Failed to fetch resource:\", err);\n                        throw err;\n                    } finally{\n                        fetchStateRef.current.inProgress = false;\n                    }\n                }\n            })[\"MCPAppsActivityRenderer2.useEffect4.fetchPromise\"]();\n            fetchStateRef.current.promise = fetchPromise;\n            fetchPromise.then({\n                \"MCPAppsActivityRenderer2.useEffect4\": (resource)=>{\n                    if (resource) {\n                        setFetchedResource(resource);\n                        setIsLoading(false);\n                    }\n                }\n            }[\"MCPAppsActivityRenderer2.useEffect4\"]).catch({\n                \"MCPAppsActivityRenderer2.useEffect4\": (err)=>{\n                    setError(err instanceof Error ? err : new Error(String(err)));\n                    setIsLoading(false);\n                }\n            }[\"MCPAppsActivityRenderer2.useEffect4\"]);\n        }\n    }[\"MCPAppsActivityRenderer2.useEffect4\"], [\n        agent,\n        content\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MCPAppsActivityRenderer2.useEffect4\": ()=>{\n            if (isLoading || !fetchedResource) {\n                return;\n            }\n            const container = containerRef.current;\n            if (!container) {\n                return;\n            }\n            let mounted = true;\n            let messageHandler = null;\n            let initialListener = null;\n            let createdIframe = null;\n            const setup = {\n                \"MCPAppsActivityRenderer2.useEffect4.setup\": async ()=>{\n                    try {\n                        const iframe = document.createElement(\"iframe\");\n                        createdIframe = iframe;\n                        iframe.style.width = \"100%\";\n                        iframe.style.height = \"100px\";\n                        iframe.style.border = \"none\";\n                        iframe.style.backgroundColor = \"transparent\";\n                        iframe.style.display = \"block\";\n                        iframe.setAttribute(\"sandbox\", \"allow-scripts allow-same-origin allow-forms\");\n                        const sandboxReady = new Promise({\n                            \"MCPAppsActivityRenderer2.useEffect4.setup\": (resolve)=>{\n                                initialListener = ({\n                                    \"MCPAppsActivityRenderer2.useEffect4.setup\": (event)=>{\n                                        if (event.source === iframe.contentWindow) {\n                                            if (event.data?.method === \"ui/notifications/sandbox-proxy-ready\") {\n                                                if (initialListener) {\n                                                    window.removeEventListener(\"message\", initialListener);\n                                                    initialListener = null;\n                                                }\n                                                resolve();\n                                            }\n                                        }\n                                    }\n                                })[\"MCPAppsActivityRenderer2.useEffect4.setup\"];\n                                window.addEventListener(\"message\", initialListener);\n                            }\n                        }[\"MCPAppsActivityRenderer2.useEffect4.setup\"]);\n                        if (!mounted) {\n                            if (initialListener) {\n                                window.removeEventListener(\"message\", initialListener);\n                                initialListener = null;\n                            }\n                            return;\n                        }\n                        iframe.srcdoc = SANDBOX_HTML;\n                        iframeRef.current = iframe;\n                        container.appendChild(iframe);\n                        await sandboxReady;\n                        if (!mounted) return;\n                        console.log(\"[MCPAppsRenderer] Sandbox proxy ready\");\n                        messageHandler = ({\n                            \"MCPAppsActivityRenderer2.useEffect4.setup\": async (event)=>{\n                                if (event.source !== iframe.contentWindow) return;\n                                const msg = event.data;\n                                if (!msg || typeof msg !== \"object\" || msg.jsonrpc !== \"2.0\") return;\n                                console.log(\"[MCPAppsRenderer] Received from iframe:\", msg);\n                                if (isRequest(msg)) {\n                                    switch(msg.method){\n                                        case \"ui/initialize\":\n                                            {\n                                                sendResponse(msg.id, {\n                                                    protocolVersion: PROTOCOL_VERSION,\n                                                    hostInfo: {\n                                                        name: \"CopilotKit MCP Apps Host\",\n                                                        version: \"1.0.0\"\n                                                    },\n                                                    hostCapabilities: {\n                                                        openLinks: {},\n                                                        logging: {}\n                                                    },\n                                                    hostContext: {\n                                                        theme: \"light\",\n                                                        platform: \"web\"\n                                                    }\n                                                });\n                                                break;\n                                            }\n                                        case \"ui/message\":\n                                            {\n                                                const currentAgent = agentRef.current;\n                                                if (!currentAgent) {\n                                                    console.warn(\"[MCPAppsRenderer] ui/message: No agent available\");\n                                                    sendResponse(msg.id, {\n                                                        isError: false\n                                                    });\n                                                    break;\n                                                }\n                                                try {\n                                                    const params = msg.params;\n                                                    const textContent = params.content?.filter({\n                                                        \"MCPAppsActivityRenderer2.useEffect4.setup\": (c)=>c.type === \"text\" && c.text\n                                                    }[\"MCPAppsActivityRenderer2.useEffect4.setup\"]).map({\n                                                        \"MCPAppsActivityRenderer2.useEffect4.setup\": (c)=>c.text\n                                                    }[\"MCPAppsActivityRenderer2.useEffect4.setup\"]).join(\"\\n\") || \"\";\n                                                    if (textContent) {\n                                                        currentAgent.addMessage({\n                                                            id: crypto.randomUUID(),\n                                                            role: params.role || \"user\",\n                                                            content: textContent\n                                                        });\n                                                    }\n                                                    sendResponse(msg.id, {\n                                                        isError: false\n                                                    });\n                                                } catch (err) {\n                                                    console.error(\"[MCPAppsRenderer] ui/message error:\", err);\n                                                    sendResponse(msg.id, {\n                                                        isError: true\n                                                    });\n                                                }\n                                                break;\n                                            }\n                                        case \"ui/open-link\":\n                                            {\n                                                const url = msg.params?.url;\n                                                if (url) {\n                                                    window.open(url, \"_blank\", \"noopener,noreferrer\");\n                                                    sendResponse(msg.id, {\n                                                        isError: false\n                                                    });\n                                                } else {\n                                                    sendErrorResponse(msg.id, -32602, \"Missing url parameter\");\n                                                }\n                                                break;\n                                            }\n                                        case \"tools/call\":\n                                            {\n                                                const { serverHash, serverId } = contentRef.current;\n                                                const currentAgent = agentRef.current;\n                                                if (!serverHash) {\n                                                    sendErrorResponse(msg.id, -32603, \"No server hash available for proxying\");\n                                                    break;\n                                                }\n                                                if (!currentAgent) {\n                                                    sendErrorResponse(msg.id, -32603, \"No agent available for proxying\");\n                                                    break;\n                                                }\n                                                try {\n                                                    const runResult = await mcpAppsRequestQueue.enqueue(currentAgent, {\n                                                        \"MCPAppsActivityRenderer2.useEffect4.setup\": ()=>currentAgent.runAgent({\n                                                                forwardedProps: {\n                                                                    __proxiedMCPRequest: {\n                                                                        serverHash,\n                                                                        serverId,\n                                                                        // optional, takes precedence if provided\n                                                                        method: \"tools/call\",\n                                                                        params: msg.params\n                                                                    }\n                                                                }\n                                                            })\n                                                    }[\"MCPAppsActivityRenderer2.useEffect4.setup\"]);\n                                                    sendResponse(msg.id, runResult.result || {});\n                                                } catch (err) {\n                                                    console.error(\"[MCPAppsRenderer] tools/call error:\", err);\n                                                    sendErrorResponse(msg.id, -32603, String(err));\n                                                }\n                                                break;\n                                            }\n                                        default:\n                                            sendErrorResponse(msg.id, -32601, `Method not found: ${msg.method}`);\n                                    }\n                                }\n                                if (isNotification(msg)) {\n                                    switch(msg.method){\n                                        case \"ui/notifications/initialized\":\n                                            {\n                                                console.log(\"[MCPAppsRenderer] Inner iframe initialized\");\n                                                if (mounted) {\n                                                    setIframeReady(true);\n                                                }\n                                                break;\n                                            }\n                                        case \"ui/notifications/size-changed\":\n                                            {\n                                                const { width, height } = msg.params || {};\n                                                console.log(\"[MCPAppsRenderer] Size change:\", {\n                                                    width,\n                                                    height\n                                                });\n                                                if (mounted) {\n                                                    setIframeSize({\n                                                        width: typeof width === \"number\" ? width : void 0,\n                                                        height: typeof height === \"number\" ? height : void 0\n                                                    });\n                                                }\n                                                break;\n                                            }\n                                        case \"notifications/message\":\n                                            {\n                                                console.log(\"[MCPAppsRenderer] App log:\", msg.params);\n                                                break;\n                                            }\n                                    }\n                                }\n                            }\n                        })[\"MCPAppsActivityRenderer2.useEffect4.setup\"];\n                        window.addEventListener(\"message\", messageHandler);\n                        let html;\n                        if (fetchedResource.text) {\n                            html = fetchedResource.text;\n                        } else if (fetchedResource.blob) {\n                            html = atob(fetchedResource.blob);\n                        } else {\n                            throw new Error(\"Resource has no text or blob content\");\n                        }\n                        sendNotification(\"ui/notifications/sandbox-resource-ready\", {\n                            html\n                        });\n                    } catch (err) {\n                        console.error(\"[MCPAppsRenderer] Setup error:\", err);\n                        if (mounted) {\n                            setError(err instanceof Error ? err : new Error(String(err)));\n                        }\n                    }\n                }\n            }[\"MCPAppsActivityRenderer2.useEffect4.setup\"];\n            setup();\n            return ({\n                \"MCPAppsActivityRenderer2.useEffect4\": ()=>{\n                    mounted = false;\n                    if (initialListener) {\n                        window.removeEventListener(\"message\", initialListener);\n                        initialListener = null;\n                    }\n                    if (messageHandler) {\n                        window.removeEventListener(\"message\", messageHandler);\n                    }\n                    if (createdIframe) {\n                        createdIframe.remove();\n                        createdIframe = null;\n                    }\n                    iframeRef.current = null;\n                }\n            })[\"MCPAppsActivityRenderer2.useEffect4\"];\n        }\n    }[\"MCPAppsActivityRenderer2.useEffect4\"], [\n        isLoading,\n        fetchedResource,\n        sendNotification,\n        sendResponse,\n        sendErrorResponse\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MCPAppsActivityRenderer2.useEffect4\": ()=>{\n            if (iframeRef.current) {\n                if (iframeSize.width !== void 0) {\n                    iframeRef.current.style.minWidth = `min(${iframeSize.width}px, 100%)`;\n                    iframeRef.current.style.width = \"100%\";\n                }\n                if (iframeSize.height !== void 0) {\n                    iframeRef.current.style.height = `${iframeSize.height}px`;\n                }\n            }\n        }\n    }[\"MCPAppsActivityRenderer2.useEffect4\"], [\n        iframeSize\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MCPAppsActivityRenderer2.useEffect4\": ()=>{\n            if (iframeReady && content.toolInput) {\n                console.log(\"[MCPAppsRenderer] Sending tool input:\", content.toolInput);\n                sendNotification(\"ui/notifications/tool-input\", {\n                    arguments: content.toolInput\n                });\n            }\n        }\n    }[\"MCPAppsActivityRenderer2.useEffect4\"], [\n        iframeReady,\n        content.toolInput,\n        sendNotification\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MCPAppsActivityRenderer2.useEffect4\": ()=>{\n            if (iframeReady && content.result) {\n                console.log(\"[MCPAppsRenderer] Sending tool result:\", content.result);\n                sendNotification(\"ui/notifications/tool-result\", content.result);\n            }\n        }\n    }[\"MCPAppsActivityRenderer2.useEffect4\"], [\n        iframeReady,\n        content.result,\n        sendNotification\n    ]);\n    const prefersBorder = fetchedResource?._meta?.ui?.prefersBorder;\n    const borderStyle = prefersBorder === true ? {\n        borderRadius: \"8px\",\n        backgroundColor: \"#f9f9f9\",\n        border: \"1px solid #e0e0e0\"\n    } : {};\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n        ref: containerRef,\n        style: {\n            width: \"100%\",\n            height: iframeSize.height ? `${iframeSize.height}px` : \"auto\",\n            minHeight: \"100px\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            ...borderStyle\n        },\n        children: [\n            isLoading && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                style: {\n                    padding: \"1rem\",\n                    color: \"#666\"\n                },\n                children: \"Loading...\"\n            }),\n            error && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                style: {\n                    color: \"red\",\n                    padding: \"1rem\"\n                },\n                children: [\n                    \"Error: \",\n                    error.message\n                ]\n            })\n        ]\n    });\n};\n// src/providers/CopilotKitProvider.tsx\n\nvar HEADER_NAME = \"X-CopilotCloud-Public-Api-Key\";\nvar COPILOT_CLOUD_CHAT_URL = \"https://api.cloud.copilotkit.ai/copilotkit/v1\";\nvar EMPTY_SET = /* @__PURE__ */ new Set();\nvar CopilotKitContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    copilotkit: null,\n    executingToolCallIds: EMPTY_SET\n});\nfunction useStableArrayProp(prop, warningMessage, isMeaningfulChange) {\n    const empty = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useStableArrayProp.useMemo3[empty]\": ()=>[]\n    }[\"useStableArrayProp.useMemo3[empty]\"], []);\n    const value = prop ?? empty;\n    const initial = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(value);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useStableArrayProp.useEffect5\": ()=>{\n            if (warningMessage && value !== initial.current && (isMeaningfulChange ? isMeaningfulChange(initial.current, value) : true)) {\n                console.error(warningMessage);\n            }\n        }\n    }[\"useStableArrayProp.useEffect5\"], [\n        value,\n        warningMessage\n    ]);\n    return value;\n}\nvar CopilotKitProvider = ({ children, runtimeUrl, headers = {}, credentials, publicApiKey, publicLicenseKey, properties = {}, agents__unsafe_dev_only: agents = {}, renderToolCalls, renderActivityMessages, renderCustomMessages, frontendTools, humanInTheLoop, showDevConsole = false, useSingleEndpoint = false })=>{\n    const [shouldRenderInspector, setShouldRenderInspector] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotKitProvider.useEffect5\": ()=>{\n            if (true) {\n                return;\n            }\n            if (showDevConsole === true) {\n                setShouldRenderInspector(true);\n            } else if (showDevConsole === \"auto\") {\n                const localhostHosts = /* @__PURE__ */ new Set([\n                    \"localhost\",\n                    \"127.0.0.1\"\n                ]);\n                if (localhostHosts.has(window.location.hostname)) {\n                    setShouldRenderInspector(true);\n                } else {\n                    setShouldRenderInspector(false);\n                }\n            } else {\n                setShouldRenderInspector(false);\n            }\n        }\n    }[\"CopilotKitProvider.useEffect5\"], [\n        showDevConsole\n    ]);\n    const renderToolCallsList = useStableArrayProp(renderToolCalls, \"renderToolCalls must be a stable array. If you want to dynamically add or remove tools, use `useFrontendTool` instead.\", {\n        \"CopilotKitProvider.useStableArrayProp[renderToolCallsList]\": (initial, next)=>{\n            const key = {\n                \"CopilotKitProvider.useStableArrayProp[renderToolCallsList].key\": (rc)=>`${rc?.agentId ?? \"\"}:${rc?.name ?? \"\"}`\n            }[\"CopilotKitProvider.useStableArrayProp[renderToolCallsList].key\"];\n            const setFrom = {\n                \"CopilotKitProvider.useStableArrayProp[renderToolCallsList].setFrom\": (arr)=>new Set(arr.map(key))\n            }[\"CopilotKitProvider.useStableArrayProp[renderToolCallsList].setFrom\"];\n            const a = setFrom(initial);\n            const b = setFrom(next);\n            if (a.size !== b.size) return true;\n            for (const k of a)if (!b.has(k)) return true;\n            return false;\n        }\n    }[\"CopilotKitProvider.useStableArrayProp[renderToolCallsList]\"]);\n    const renderCustomMessagesList = useStableArrayProp(renderCustomMessages, \"renderCustomMessages must be a stable array.\");\n    const renderActivityMessagesList = useStableArrayProp(renderActivityMessages, \"renderActivityMessages must be a stable array.\");\n    const builtInActivityRenderers = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotKitProvider.useMemo3[builtInActivityRenderers]\": ()=>[\n                {\n                    activityType: MCPAppsActivityType,\n                    content: MCPAppsActivityContentSchema,\n                    render: MCPAppsActivityRenderer\n                }\n            ]\n    }[\"CopilotKitProvider.useMemo3[builtInActivityRenderers]\"], []);\n    const allActivityRenderers = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotKitProvider.useMemo3[allActivityRenderers]\": ()=>{\n            return [\n                ...renderActivityMessagesList,\n                ...builtInActivityRenderers\n            ];\n        }\n    }[\"CopilotKitProvider.useMemo3[allActivityRenderers]\"], [\n        renderActivityMessagesList,\n        builtInActivityRenderers\n    ]);\n    const resolvedPublicKey = publicApiKey ?? publicLicenseKey;\n    const hasLocalAgents = agents && Object.keys(agents).length > 0;\n    const mergedHeaders = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotKitProvider.useMemo3[mergedHeaders]\": ()=>{\n            if (!resolvedPublicKey) return headers;\n            if (headers[HEADER_NAME]) return headers;\n            return {\n                ...headers,\n                [HEADER_NAME]: resolvedPublicKey\n            };\n        }\n    }[\"CopilotKitProvider.useMemo3[mergedHeaders]\"], [\n        headers,\n        resolvedPublicKey\n    ]);\n    if (!runtimeUrl && !resolvedPublicKey && !hasLocalAgents) {\n        const message = \"Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'\";\n        if (false) {} else {\n            console.warn(message);\n        }\n    }\n    const chatApiEndpoint = runtimeUrl ?? (resolvedPublicKey ? COPILOT_CLOUD_CHAT_URL : void 0);\n    const frontendToolsList = useStableArrayProp(frontendTools, \"frontendTools must be a stable array. If you want to dynamically add or remove tools, use `useFrontendTool` instead.\");\n    const humanInTheLoopList = useStableArrayProp(humanInTheLoop, \"humanInTheLoop must be a stable array. If you want to dynamically add or remove human-in-the-loop tools, use `useHumanInTheLoop` instead.\");\n    const processedHumanInTheLoopTools = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\": ()=>{\n            const processedTools = [];\n            const processedRenderToolCalls = [];\n            humanInTheLoopList.forEach({\n                \"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\": (tool)=>{\n                    const frontendTool = {\n                        name: tool.name,\n                        description: tool.description,\n                        parameters: tool.parameters,\n                        followUp: tool.followUp,\n                        ...tool.agentId && {\n                            agentId: tool.agentId\n                        },\n                        handler: {\n                            \"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\": async ()=>{\n                                return new Promise({\n                                    \"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\": (resolve)=>{\n                                        console.warn(`Human-in-the-loop tool '${tool.name}' called but no interactive handler is set up.`);\n                                        resolve(void 0);\n                                    }\n                                }[\"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\"]);\n                            }\n                        }[\"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\"]\n                    };\n                    processedTools.push(frontendTool);\n                    if (tool.render) {\n                        processedRenderToolCalls.push({\n                            name: tool.name,\n                            args: tool.parameters,\n                            render: tool.render,\n                            ...tool.agentId && {\n                                agentId: tool.agentId\n                            }\n                        });\n                    }\n                }\n            }[\"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\"]);\n            return {\n                tools: processedTools,\n                renderToolCalls: processedRenderToolCalls\n            };\n        }\n    }[\"CopilotKitProvider.useMemo3[processedHumanInTheLoopTools]\"], [\n        humanInTheLoopList\n    ]);\n    const allTools = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotKitProvider.useMemo3[allTools]\": ()=>{\n            const tools = [];\n            tools.push(...frontendToolsList);\n            tools.push(...processedHumanInTheLoopTools.tools);\n            return tools;\n        }\n    }[\"CopilotKitProvider.useMemo3[allTools]\"], [\n        frontendToolsList,\n        processedHumanInTheLoopTools\n    ]);\n    const allRenderToolCalls = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotKitProvider.useMemo3[allRenderToolCalls]\": ()=>{\n            const combined = [\n                ...renderToolCallsList\n            ];\n            frontendToolsList.forEach({\n                \"CopilotKitProvider.useMemo3[allRenderToolCalls]\": (tool)=>{\n                    if (tool.render) {\n                        const args = tool.parameters || (tool.name === \"*\" ? zod__WEBPACK_IMPORTED_MODULE_22__.any() : void 0);\n                        if (args) {\n                            combined.push({\n                                name: tool.name,\n                                args,\n                                render: tool.render\n                            });\n                        }\n                    }\n                }\n            }[\"CopilotKitProvider.useMemo3[allRenderToolCalls]\"]);\n            combined.push(...processedHumanInTheLoopTools.renderToolCalls);\n            return combined;\n        }\n    }[\"CopilotKitProvider.useMemo3[allRenderToolCalls]\"], [\n        renderToolCallsList,\n        frontendToolsList,\n        processedHumanInTheLoopTools\n    ]);\n    const copilotkit = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotKitProvider.useMemo3[copilotkit]\": ()=>{\n            const copilotkit2 = new CopilotKitCoreReact({\n                runtimeUrl: chatApiEndpoint,\n                runtimeTransport: useSingleEndpoint ? \"single\" : \"rest\",\n                headers: mergedHeaders,\n                credentials,\n                properties,\n                agents__unsafe_dev_only: agents,\n                tools: allTools,\n                renderToolCalls: allRenderToolCalls,\n                renderActivityMessages: allActivityRenderers,\n                renderCustomMessages: renderCustomMessagesList\n            });\n            return copilotkit2;\n        }\n    }[\"CopilotKitProvider.useMemo3[copilotkit]\"], [\n        allTools,\n        allRenderToolCalls,\n        allActivityRenderers,\n        renderCustomMessagesList,\n        useSingleEndpoint\n    ]);\n    const [, forceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)({\n        \"CopilotKitProvider.useReducer\": (x)=>x + 1\n    }[\"CopilotKitProvider.useReducer\"], 0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotKitProvider.useEffect5\": ()=>{\n            const subscription = copilotkit.subscribe({\n                onRenderToolCallsChanged: {\n                    \"CopilotKitProvider.useEffect5.subscription\": ()=>{\n                        forceUpdate();\n                    }\n                }[\"CopilotKitProvider.useEffect5.subscription\"]\n            });\n            return ({\n                \"CopilotKitProvider.useEffect5\": ()=>{\n                    subscription.unsubscribe();\n                }\n            })[\"CopilotKitProvider.useEffect5\"];\n        }\n    }[\"CopilotKitProvider.useEffect5\"], [\n        copilotkit\n    ]);\n    const [executingToolCallIds, setExecutingToolCallIds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        \"CopilotKitProvider.useState6\": ()=>/* @__PURE__ */ new Set()\n    }[\"CopilotKitProvider.useState6\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotKitProvider.useEffect5\": ()=>{\n            const subscription = copilotkit.subscribe({\n                onToolExecutionStart: {\n                    \"CopilotKitProvider.useEffect5.subscription\": ({ toolCallId })=>{\n                        setExecutingToolCallIds({\n                            \"CopilotKitProvider.useEffect5.subscription\": (prev)=>{\n                                if (prev.has(toolCallId)) return prev;\n                                const next = new Set(prev);\n                                next.add(toolCallId);\n                                return next;\n                            }\n                        }[\"CopilotKitProvider.useEffect5.subscription\"]);\n                    }\n                }[\"CopilotKitProvider.useEffect5.subscription\"],\n                onToolExecutionEnd: {\n                    \"CopilotKitProvider.useEffect5.subscription\": ({ toolCallId })=>{\n                        setExecutingToolCallIds({\n                            \"CopilotKitProvider.useEffect5.subscription\": (prev)=>{\n                                if (!prev.has(toolCallId)) return prev;\n                                const next = new Set(prev);\n                                next.delete(toolCallId);\n                                return next;\n                            }\n                        }[\"CopilotKitProvider.useEffect5.subscription\"]);\n                    }\n                }[\"CopilotKitProvider.useEffect5.subscription\"]\n            });\n            return ({\n                \"CopilotKitProvider.useEffect5\": ()=>{\n                    subscription.unsubscribe();\n                }\n            })[\"CopilotKitProvider.useEffect5\"];\n        }\n    }[\"CopilotKitProvider.useEffect5\"], [\n        copilotkit\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotKitProvider.useEffect5\": ()=>{\n            copilotkit.setRuntimeUrl(chatApiEndpoint);\n            copilotkit.setRuntimeTransport(useSingleEndpoint ? \"single\" : \"rest\");\n            copilotkit.setHeaders(mergedHeaders);\n            copilotkit.setCredentials(credentials);\n            copilotkit.setProperties(properties);\n            copilotkit.setAgents__unsafe_dev_only(agents);\n        }\n    }[\"CopilotKitProvider.useEffect5\"], [\n        chatApiEndpoint,\n        mergedHeaders,\n        credentials,\n        properties,\n        agents,\n        useSingleEndpoint\n    ]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(CopilotKitContext.Provider, {\n        value: {\n            copilotkit,\n            executingToolCallIds\n        },\n        children: [\n            children,\n            shouldRenderInspector ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotKitInspector, {\n                core: copilotkit\n            }) : null\n        ]\n    });\n};\nvar useCopilotKit = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(CopilotKitContext);\n    const [, forceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)({\n        \"useCopilotKit.useReducer\": (x)=>x + 1\n    }[\"useCopilotKit.useReducer\"], 0);\n    if (!context) {\n        throw new Error(\"useCopilotKit must be used within CopilotKitProvider\");\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useCopilotKit.useEffect5\": ()=>{\n            const subscription = context.copilotkit.subscribe({\n                onRuntimeConnectionStatusChanged: {\n                    \"useCopilotKit.useEffect5.subscription\": ()=>{\n                        forceUpdate();\n                    }\n                }[\"useCopilotKit.useEffect5.subscription\"]\n            });\n            return ({\n                \"useCopilotKit.useEffect5\": ()=>{\n                    subscription.unsubscribe();\n                }\n            })[\"useCopilotKit.useEffect5\"];\n        }\n    }[\"useCopilotKit.useEffect5\"], []);\n    return context;\n};\n// src/hooks/use-render-tool-call.tsx\n\n\n\nvar ToolCallRenderer = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.memo(function ToolCallRenderer2({ toolCall, toolMessage, RenderComponent, isExecuting }) {\n    const args = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ToolCallRenderer.ToolCallRenderer2.useMemo4[args]\": ()=>(0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.partialJSONParse)(toolCall.function.arguments)\n    }[\"ToolCallRenderer.ToolCallRenderer2.useMemo4[args]\"], [\n        toolCall.function.arguments\n    ]);\n    const toolName = toolCall.function.name;\n    if (toolMessage) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(RenderComponent, {\n            name: toolName,\n            args,\n            status: _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__.ToolCallStatus.Complete,\n            result: toolMessage.content\n        });\n    } else if (isExecuting) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(RenderComponent, {\n            name: toolName,\n            args,\n            status: _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__.ToolCallStatus.Executing,\n            result: void 0\n        });\n    } else {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(RenderComponent, {\n            name: toolName,\n            args,\n            status: _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__.ToolCallStatus.InProgress,\n            result: void 0\n        });\n    }\n}, // Custom comparison function to prevent re-renders when tool call data hasn't changed\n(prevProps, nextProps)=>{\n    if (prevProps.toolCall.id !== nextProps.toolCall.id) return false;\n    if (prevProps.toolCall.function.name !== nextProps.toolCall.function.name) return false;\n    if (prevProps.toolCall.function.arguments !== nextProps.toolCall.function.arguments) return false;\n    const prevResult = prevProps.toolMessage?.content;\n    const nextResult = nextProps.toolMessage?.content;\n    if (prevResult !== nextResult) return false;\n    if (prevProps.isExecuting !== nextProps.isExecuting) return false;\n    if (prevProps.RenderComponent !== nextProps.RenderComponent) return false;\n    return true;\n});\nfunction useRenderToolCall() {\n    const { copilotkit, executingToolCallIds } = useCopilotKit();\n    const config = useCopilotChatConfiguration();\n    const agentId = config?.agentId ?? _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_AGENT_ID;\n    const renderToolCalls = (0,react__WEBPACK_IMPORTED_MODULE_1__.useSyncExternalStore)({\n        \"useRenderToolCall.useSyncExternalStore[renderToolCalls]\": (callback)=>{\n            return copilotkit.subscribe({\n                onRenderToolCallsChanged: callback\n            }).unsubscribe;\n        }\n    }[\"useRenderToolCall.useSyncExternalStore[renderToolCalls]\"], {\n        \"useRenderToolCall.useSyncExternalStore[renderToolCalls]\": ()=>copilotkit.renderToolCalls\n    }[\"useRenderToolCall.useSyncExternalStore[renderToolCalls]\"], {\n        \"useRenderToolCall.useSyncExternalStore[renderToolCalls]\": ()=>copilotkit.renderToolCalls\n    }[\"useRenderToolCall.useSyncExternalStore[renderToolCalls]\"]);\n    const renderToolCall = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useRenderToolCall.useCallback4[renderToolCall]\": ({ toolCall, toolMessage })=>{\n            const exactMatches = renderToolCalls.filter({\n                \"useRenderToolCall.useCallback4[renderToolCall].exactMatches\": (rc)=>rc.name === toolCall.function.name\n            }[\"useRenderToolCall.useCallback4[renderToolCall].exactMatches\"]);\n            const renderConfig = exactMatches.find({\n                \"useRenderToolCall.useCallback4[renderToolCall]\": (rc)=>rc.agentId === agentId\n            }[\"useRenderToolCall.useCallback4[renderToolCall]\"]) || exactMatches.find({\n                \"useRenderToolCall.useCallback4[renderToolCall]\": (rc)=>!rc.agentId\n            }[\"useRenderToolCall.useCallback4[renderToolCall]\"]) || exactMatches[0] || renderToolCalls.find({\n                \"useRenderToolCall.useCallback4[renderToolCall]\": (rc)=>rc.name === \"*\"\n            }[\"useRenderToolCall.useCallback4[renderToolCall]\"]);\n            if (!renderConfig) {\n                return null;\n            }\n            const RenderComponent = renderConfig.render;\n            const isExecuting = executingToolCallIds.has(toolCall.id);\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ToolCallRenderer, {\n                toolCall,\n                toolMessage,\n                RenderComponent,\n                isExecuting\n            }, toolCall.id);\n        }\n    }[\"useRenderToolCall.useCallback4[renderToolCall]\"], [\n        renderToolCalls,\n        executingToolCallIds,\n        agentId\n    ]);\n    return renderToolCall;\n}\n// src/hooks/use-render-custom-messages.tsx\n\nfunction useRenderCustomMessages() {\n    const { copilotkit } = useCopilotKit();\n    const config = useCopilotChatConfiguration();\n    if (!config) {\n        return null;\n    }\n    const { agentId, threadId } = config;\n    const customMessageRenderers = copilotkit.renderCustomMessages.filter((renderer)=>renderer.agentId === void 0 || renderer.agentId === agentId).sort((a, b)=>{\n        const aHasAgent = a.agentId !== void 0;\n        const bHasAgent = b.agentId !== void 0;\n        if (aHasAgent === bHasAgent) return 0;\n        return aHasAgent ? -1 : 1;\n    });\n    return function(params) {\n        if (!customMessageRenderers.length) {\n            return null;\n        }\n        const { message, position } = params;\n        const resolvedRunId = copilotkit.getRunIdForMessage(agentId, threadId, message.id) ?? copilotkit.getRunIdsForThread(agentId, threadId).slice(-1)[0];\n        const runId = resolvedRunId ?? `missing-run-id:${message.id}`;\n        const agent = copilotkit.getAgent(agentId);\n        if (!agent) {\n            throw new Error(\"Agent not found\");\n        }\n        const messagesIdsInRun = resolvedRunId ? agent.messages.filter((msg)=>copilotkit.getRunIdForMessage(agentId, threadId, msg.id) === resolvedRunId).map((msg)=>msg.id) : [\n            message.id\n        ];\n        const rawMessageIndex = agent.messages.findIndex((msg)=>msg.id === message.id);\n        const messageIndex = rawMessageIndex >= 0 ? rawMessageIndex : 0;\n        const messageIndexInRun = resolvedRunId ? Math.max(messagesIdsInRun.indexOf(message.id), 0) : 0;\n        const numberOfMessagesInRun = resolvedRunId ? messagesIdsInRun.length : 1;\n        const stateSnapshot = resolvedRunId ? copilotkit.getStateByRun(agentId, threadId, resolvedRunId) : void 0;\n        let result = null;\n        for (const renderer of customMessageRenderers){\n            if (!renderer.render) {\n                continue;\n            }\n            const Component = renderer.render;\n            result = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Component, {\n                message,\n                position,\n                runId,\n                messageIndex,\n                messageIndexInRun,\n                numberOfMessagesInRun,\n                agentId,\n                stateSnapshot\n            }, `${runId}-${message.id}-${position}`);\n            if (result) {\n                break;\n            }\n        }\n        return result;\n    };\n}\n// src/hooks/use-render-activity-message.tsx\n\n\n\nfunction useRenderActivityMessage() {\n    const { copilotkit } = useCopilotKit();\n    const config = useCopilotChatConfiguration();\n    const agentId = config?.agentId ?? _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_AGENT_ID;\n    const renderers = copilotkit.renderActivityMessages;\n    const findRenderer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useRenderActivityMessage.useCallback5[findRenderer]\": (activityType)=>{\n            if (!renderers.length) {\n                return null;\n            }\n            const matches = renderers.filter({\n                \"useRenderActivityMessage.useCallback5[findRenderer].matches\": (renderer)=>renderer.activityType === activityType\n            }[\"useRenderActivityMessage.useCallback5[findRenderer].matches\"]);\n            return matches.find({\n                \"useRenderActivityMessage.useCallback5[findRenderer]\": (candidate)=>candidate.agentId === agentId\n            }[\"useRenderActivityMessage.useCallback5[findRenderer]\"]) ?? matches.find({\n                \"useRenderActivityMessage.useCallback5[findRenderer]\": (candidate)=>candidate.agentId === void 0\n            }[\"useRenderActivityMessage.useCallback5[findRenderer]\"]) ?? renderers.find({\n                \"useRenderActivityMessage.useCallback5[findRenderer]\": (candidate)=>candidate.activityType === \"*\"\n            }[\"useRenderActivityMessage.useCallback5[findRenderer]\"]) ?? null;\n        }\n    }[\"useRenderActivityMessage.useCallback5[findRenderer]\"], [\n        agentId,\n        renderers\n    ]);\n    const renderActivityMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useRenderActivityMessage.useCallback5[renderActivityMessage]\": (message)=>{\n            const renderer = findRenderer(message.activityType);\n            if (!renderer) {\n                return null;\n            }\n            const parseResult = renderer.content.safeParse(message.content);\n            if (!parseResult.success) {\n                console.warn(`Failed to parse content for activity message '${message.activityType}':`, parseResult.error);\n                return null;\n            }\n            const Component = renderer.render;\n            const agent = copilotkit.getAgent(agentId);\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Component, {\n                activityType: message.activityType,\n                content: parseResult.data,\n                message,\n                agent\n            }, message.id);\n        }\n    }[\"useRenderActivityMessage.useCallback5[renderActivityMessage]\"], [\n        agentId,\n        copilotkit,\n        findRenderer\n    ]);\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useRenderActivityMessage.useMemo5\": ()=>({\n                renderActivityMessage,\n                findRenderer\n            })\n    }[\"useRenderActivityMessage.useMemo5\"], [\n        renderActivityMessage,\n        findRenderer\n    ]);\n}\n// src/hooks/use-frontend-tool.tsx\n\nvar EMPTY_DEPS = [];\nfunction useFrontendTool(tool, deps) {\n    const { copilotkit } = useCopilotKit();\n    const extraDeps = deps ?? EMPTY_DEPS;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useFrontendTool.useEffect6\": ()=>{\n            const name = tool.name;\n            if (copilotkit.getTool({\n                toolName: name,\n                agentId: tool.agentId\n            })) {\n                console.warn(`Tool '${name}' already exists for agent '${tool.agentId || \"global\"}'. Overriding with latest registration.`);\n                copilotkit.removeTool(name, tool.agentId);\n            }\n            copilotkit.addTool(tool);\n            if (tool.render) {\n                const keyOf = {\n                    \"useFrontendTool.useEffect6.keyOf\": (rc)=>`${rc.agentId ?? \"\"}:${rc.name}`\n                }[\"useFrontendTool.useEffect6.keyOf\"];\n                const currentRenderToolCalls = copilotkit.renderToolCalls;\n                const mergedMap = /* @__PURE__ */ new Map();\n                for (const rc of currentRenderToolCalls){\n                    mergedMap.set(keyOf(rc), rc);\n                }\n                const newEntry = {\n                    name,\n                    args: tool.parameters,\n                    agentId: tool.agentId,\n                    render: tool.render\n                };\n                mergedMap.set(keyOf(newEntry), newEntry);\n                copilotkit.setRenderToolCalls(Array.from(mergedMap.values()));\n            }\n            return ({\n                \"useFrontendTool.useEffect6\": ()=>{\n                    copilotkit.removeTool(name, tool.agentId);\n                }\n            })[\"useFrontendTool.useEffect6\"];\n        }\n    }[\"useFrontendTool.useEffect6\"], [\n        tool.name,\n        copilotkit,\n        extraDeps.length,\n        ...extraDeps\n    ]);\n}\n// src/hooks/use-human-in-the-loop.tsx\n\n\nfunction useHumanInTheLoop(tool, deps) {\n    const { copilotkit } = useCopilotKit();\n    const resolvePromiseRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const respond = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useHumanInTheLoop.useCallback6[respond]\": async (result)=>{\n            if (resolvePromiseRef.current) {\n                resolvePromiseRef.current(result);\n                resolvePromiseRef.current = null;\n            }\n        }\n    }[\"useHumanInTheLoop.useCallback6[respond]\"], []);\n    const handler = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useHumanInTheLoop.useCallback6[handler]\": async ()=>{\n            return new Promise({\n                \"useHumanInTheLoop.useCallback6[handler]\": (resolve)=>{\n                    resolvePromiseRef.current = resolve;\n                }\n            }[\"useHumanInTheLoop.useCallback6[handler]\"]);\n        }\n    }[\"useHumanInTheLoop.useCallback6[handler]\"], []);\n    const RenderComponent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useHumanInTheLoop.useCallback6[RenderComponent]\": (props)=>{\n            const ToolComponent = tool.render;\n            if (props.status === \"inProgress\") {\n                const enhancedProps = {\n                    ...props,\n                    name: tool.name,\n                    description: tool.description || \"\",\n                    respond: void 0\n                };\n                return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(ToolComponent, enhancedProps);\n            } else if (props.status === \"executing\") {\n                const enhancedProps = {\n                    ...props,\n                    name: tool.name,\n                    description: tool.description || \"\",\n                    respond\n                };\n                return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(ToolComponent, enhancedProps);\n            } else if (props.status === \"complete\") {\n                const enhancedProps = {\n                    ...props,\n                    name: tool.name,\n                    description: tool.description || \"\",\n                    respond: void 0\n                };\n                return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(ToolComponent, enhancedProps);\n            }\n            return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(ToolComponent, props);\n        }\n    }[\"useHumanInTheLoop.useCallback6[RenderComponent]\"], [\n        tool.render,\n        tool.name,\n        tool.description,\n        respond\n    ]);\n    const frontendTool = {\n        ...tool,\n        handler,\n        render: RenderComponent\n    };\n    useFrontendTool(frontendTool, deps);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useHumanInTheLoop.useEffect7\": ()=>{\n            return ({\n                \"useHumanInTheLoop.useEffect7\": ()=>{\n                    const keyOf = {\n                        \"useHumanInTheLoop.useEffect7.keyOf\": (rc)=>`${rc.agentId ?? \"\"}:${rc.name}`\n                    }[\"useHumanInTheLoop.useEffect7.keyOf\"];\n                    const currentRenderToolCalls = copilotkit.renderToolCalls;\n                    const filtered = currentRenderToolCalls.filter({\n                        \"useHumanInTheLoop.useEffect7.filtered\": (rc)=>keyOf(rc) !== keyOf({\n                                name: tool.name,\n                                agentId: tool.agentId\n                            })\n                    }[\"useHumanInTheLoop.useEffect7.filtered\"]);\n                    copilotkit.setRenderToolCalls(filtered);\n                }\n            })[\"useHumanInTheLoop.useEffect7\"];\n        }\n    }[\"useHumanInTheLoop.useEffect7\"], [\n        copilotkit,\n        tool.name,\n        tool.agentId\n    ]);\n}\n// src/hooks/use-agent.tsx\n\n\n\nvar UseAgentUpdate = /* @__PURE__ */ ((UseAgentUpdate2)=>{\n    UseAgentUpdate2[\"OnMessagesChanged\"] = \"OnMessagesChanged\";\n    UseAgentUpdate2[\"OnStateChanged\"] = \"OnStateChanged\";\n    UseAgentUpdate2[\"OnRunStatusChanged\"] = \"OnRunStatusChanged\";\n    return UseAgentUpdate2;\n})(UseAgentUpdate || {});\nvar ALL_UPDATES = [\n    \"OnMessagesChanged\" /* OnMessagesChanged */ ,\n    \"OnStateChanged\" /* OnStateChanged */ ,\n    \"OnRunStatusChanged\" /* OnRunStatusChanged */ \n];\nfunction useAgent({ agentId, updates } = {}) {\n    agentId ??= _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_AGENT_ID;\n    const { copilotkit } = useCopilotKit();\n    const [, forceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)({\n        \"useAgent.useReducer2\": (x)=>x + 1\n    }[\"useAgent.useReducer2\"], 0);\n    const updateFlags = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useAgent.useMemo6[updateFlags]\": ()=>updates ?? ALL_UPDATES\n    }[\"useAgent.useMemo6[updateFlags]\"], [\n        JSON.stringify(updates)\n    ]);\n    const agent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useAgent.useMemo6[agent]\": ()=>{\n            const existing = copilotkit.getAgent(agentId);\n            if (existing) {\n                return existing;\n            }\n            const isRuntimeConfigured = copilotkit.runtimeUrl !== void 0;\n            const status = copilotkit.runtimeConnectionStatus;\n            if (isRuntimeConfigured && (status === _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__.CopilotKitCoreRuntimeConnectionStatus.Disconnected || status === _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__.CopilotKitCoreRuntimeConnectionStatus.Connecting)) {\n                const provisional = new _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_20__.ProxiedCopilotRuntimeAgent({\n                    runtimeUrl: copilotkit.runtimeUrl,\n                    agentId,\n                    transport: copilotkit.runtimeTransport\n                });\n                provisional.headers = {\n                    ...copilotkit.headers\n                };\n                return provisional;\n            }\n            const knownAgents = Object.keys(copilotkit.agents ?? {});\n            const runtimePart = isRuntimeConfigured ? `runtimeUrl=${copilotkit.runtimeUrl}` : \"no runtimeUrl\";\n            throw new Error(`useAgent: Agent '${agentId}' not found after runtime sync (${runtimePart}). ` + (knownAgents.length ? `Known agents: [${knownAgents.join(\", \")}]` : \"No agents registered.\") + \" Verify your runtime /info and/or agents__unsafe_dev_only.\");\n        }\n    }[\"useAgent.useMemo6[agent]\"], [\n        agentId,\n        copilotkit.agents,\n        copilotkit.runtimeConnectionStatus,\n        copilotkit.runtimeUrl,\n        copilotkit.runtimeTransport,\n        JSON.stringify(copilotkit.headers),\n        copilotkit\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useAgent.useEffect8\": ()=>{\n            if (updateFlags.length === 0) {\n                return;\n            }\n            const handlers = {};\n            if (updateFlags.includes(\"OnMessagesChanged\" /* OnMessagesChanged */ )) {\n                handlers.onMessagesChanged = ({\n                    \"useAgent.useEffect8\": ()=>{\n                        forceUpdate();\n                    }\n                })[\"useAgent.useEffect8\"];\n            }\n            if (updateFlags.includes(\"OnStateChanged\" /* OnStateChanged */ )) {\n                handlers.onStateChanged = forceUpdate;\n            }\n            if (updateFlags.includes(\"OnRunStatusChanged\" /* OnRunStatusChanged */ )) {\n                handlers.onRunInitialized = forceUpdate;\n                handlers.onRunFinalized = forceUpdate;\n                handlers.onRunFailed = forceUpdate;\n            }\n            const subscription = agent.subscribe(handlers);\n            return ({\n                \"useAgent.useEffect8\": ()=>subscription.unsubscribe()\n            })[\"useAgent.useEffect8\"];\n        }\n    }[\"useAgent.useEffect8\"], [\n        agent,\n        forceUpdate,\n        JSON.stringify(updateFlags)\n    ]);\n    return {\n        agent\n    };\n}\n// src/hooks/use-agent-context.tsx\n\nfunction useAgentContext(context) {\n    const { description, value } = context;\n    const { copilotkit } = useCopilotKit();\n    const stringValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useAgentContext.useMemo7[stringValue]\": ()=>{\n            if (typeof value === \"string\") {\n                return value;\n            }\n            return JSON.stringify(value);\n        }\n    }[\"useAgentContext.useMemo7[stringValue]\"], [\n        value\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useAgentContext.useEffect9\": ()=>{\n            if (!copilotkit) return;\n            const id = copilotkit.addContext({\n                description,\n                value: stringValue\n            });\n            return ({\n                \"useAgentContext.useEffect9\": ()=>{\n                    copilotkit.removeContext(id);\n                }\n            })[\"useAgentContext.useEffect9\"];\n        }\n    }[\"useAgentContext.useEffect9\"], [\n        description,\n        stringValue,\n        copilotkit\n    ]);\n}\n// src/hooks/use-suggestions.tsx\n\n\nfunction useSuggestions({ agentId } = {}) {\n    const { copilotkit } = useCopilotKit();\n    const config = useCopilotChatConfiguration();\n    const resolvedAgentId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useSuggestions.useMemo8[resolvedAgentId]\": ()=>agentId ?? config?.agentId ?? _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_AGENT_ID\n    }[\"useSuggestions.useMemo8[resolvedAgentId]\"], [\n        agentId,\n        config?.agentId\n    ]);\n    const [suggestions, setSuggestions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        \"useSuggestions.useState7\": ()=>{\n            const result = copilotkit.getSuggestions(resolvedAgentId);\n            return result.suggestions;\n        }\n    }[\"useSuggestions.useState7\"]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        \"useSuggestions.useState7\": ()=>{\n            const result = copilotkit.getSuggestions(resolvedAgentId);\n            return result.isLoading;\n        }\n    }[\"useSuggestions.useState7\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useSuggestions.useEffect10\": ()=>{\n            const result = copilotkit.getSuggestions(resolvedAgentId);\n            setSuggestions(result.suggestions);\n            setIsLoading(result.isLoading);\n        }\n    }[\"useSuggestions.useEffect10\"], [\n        copilotkit,\n        resolvedAgentId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useSuggestions.useEffect10\": ()=>{\n            const subscription = copilotkit.subscribe({\n                onSuggestionsChanged: {\n                    \"useSuggestions.useEffect10.subscription\": ({ agentId: changedAgentId, suggestions: suggestions2 })=>{\n                        if (changedAgentId !== resolvedAgentId) {\n                            return;\n                        }\n                        setSuggestions(suggestions2);\n                    }\n                }[\"useSuggestions.useEffect10.subscription\"],\n                onSuggestionsStartedLoading: {\n                    \"useSuggestions.useEffect10.subscription\": ({ agentId: changedAgentId })=>{\n                        if (changedAgentId !== resolvedAgentId) {\n                            return;\n                        }\n                        setIsLoading(true);\n                    }\n                }[\"useSuggestions.useEffect10.subscription\"],\n                onSuggestionsFinishedLoading: {\n                    \"useSuggestions.useEffect10.subscription\": ({ agentId: changedAgentId })=>{\n                        if (changedAgentId !== resolvedAgentId) {\n                            return;\n                        }\n                        setIsLoading(false);\n                    }\n                }[\"useSuggestions.useEffect10.subscription\"],\n                onSuggestionsConfigChanged: {\n                    \"useSuggestions.useEffect10.subscription\": ()=>{\n                        const result = copilotkit.getSuggestions(resolvedAgentId);\n                        setSuggestions(result.suggestions);\n                        setIsLoading(result.isLoading);\n                    }\n                }[\"useSuggestions.useEffect10.subscription\"]\n            });\n            return ({\n                \"useSuggestions.useEffect10\": ()=>{\n                    subscription.unsubscribe();\n                }\n            })[\"useSuggestions.useEffect10\"];\n        }\n    }[\"useSuggestions.useEffect10\"], [\n        copilotkit,\n        resolvedAgentId\n    ]);\n    const reloadSuggestions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useSuggestions.useCallback7[reloadSuggestions]\": ()=>{\n            copilotkit.reloadSuggestions(resolvedAgentId);\n        }\n    }[\"useSuggestions.useCallback7[reloadSuggestions]\"], [\n        copilotkit,\n        resolvedAgentId\n    ]);\n    const clearSuggestions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useSuggestions.useCallback7[clearSuggestions]\": ()=>{\n            copilotkit.clearSuggestions(resolvedAgentId);\n        }\n    }[\"useSuggestions.useCallback7[clearSuggestions]\"], [\n        copilotkit,\n        resolvedAgentId\n    ]);\n    return {\n        suggestions,\n        reloadSuggestions,\n        clearSuggestions,\n        isLoading\n    };\n}\n// src/hooks/use-configure-suggestions.tsx\n\n\nfunction useConfigureSuggestions(config, deps) {\n    const { copilotkit } = useCopilotKit();\n    const chatConfig = useCopilotChatConfiguration();\n    const extraDeps = deps ?? [];\n    const resolvedConsumerAgentId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useConfigureSuggestions.useMemo9[resolvedConsumerAgentId]\": ()=>chatConfig?.agentId ?? _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_AGENT_ID\n    }[\"useConfigureSuggestions.useMemo9[resolvedConsumerAgentId]\"], [\n        chatConfig?.agentId\n    ]);\n    const rawConsumerAgentId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useConfigureSuggestions.useMemo9[rawConsumerAgentId]\": ()=>config ? config.consumerAgentId : void 0\n    }[\"useConfigureSuggestions.useMemo9[rawConsumerAgentId]\"], [\n        config\n    ]);\n    const normalizationCacheRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        serialized: null,\n        config: null\n    });\n    const { normalizedConfig, serializedConfig } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useConfigureSuggestions.useMemo9\": ()=>{\n            if (!config) {\n                normalizationCacheRef.current = {\n                    serialized: null,\n                    config: null\n                };\n                return {\n                    normalizedConfig: null,\n                    serializedConfig: null\n                };\n            }\n            if (config.available === \"disabled\") {\n                normalizationCacheRef.current = {\n                    serialized: null,\n                    config: null\n                };\n                return {\n                    normalizedConfig: null,\n                    serializedConfig: null\n                };\n            }\n            let built;\n            if (isDynamicConfig(config)) {\n                built = {\n                    ...config\n                };\n            } else {\n                const normalizedSuggestions = normalizeStaticSuggestions(config.suggestions);\n                const baseConfig = {\n                    ...config,\n                    suggestions: normalizedSuggestions\n                };\n                built = baseConfig;\n            }\n            const serialized = JSON.stringify(built);\n            const cache = normalizationCacheRef.current;\n            if (cache.serialized === serialized && cache.config) {\n                return {\n                    normalizedConfig: cache.config,\n                    serializedConfig: serialized\n                };\n            }\n            normalizationCacheRef.current = {\n                serialized,\n                config: built\n            };\n            return {\n                normalizedConfig: built,\n                serializedConfig: serialized\n            };\n        }\n    }[\"useConfigureSuggestions.useMemo9\"], [\n        config,\n        resolvedConsumerAgentId,\n        ...extraDeps\n    ]);\n    const latestConfigRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    latestConfigRef.current = normalizedConfig;\n    const previousSerializedConfigRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const targetAgentId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useConfigureSuggestions.useMemo9[targetAgentId]\": ()=>{\n            if (!normalizedConfig) {\n                return resolvedConsumerAgentId;\n            }\n            const consumer = normalizedConfig.consumerAgentId;\n            if (!consumer || consumer === \"*\") {\n                return resolvedConsumerAgentId;\n            }\n            return consumer;\n        }\n    }[\"useConfigureSuggestions.useMemo9[targetAgentId]\"], [\n        normalizedConfig,\n        resolvedConsumerAgentId\n    ]);\n    const isGlobalConfig = rawConsumerAgentId === void 0 || rawConsumerAgentId === \"*\";\n    const requestReload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useConfigureSuggestions.useCallback8[requestReload]\": ()=>{\n            if (!normalizedConfig) {\n                return;\n            }\n            if (isGlobalConfig) {\n                const agents = Object.values(copilotkit.agents ?? {});\n                for (const entry of agents){\n                    const agentId = entry.agentId;\n                    if (!agentId) {\n                        continue;\n                    }\n                    if (!entry.isRunning) {\n                        copilotkit.reloadSuggestions(agentId);\n                    }\n                }\n                return;\n            }\n            if (!targetAgentId) {\n                return;\n            }\n            copilotkit.reloadSuggestions(targetAgentId);\n        }\n    }[\"useConfigureSuggestions.useCallback8[requestReload]\"], [\n        copilotkit,\n        isGlobalConfig,\n        normalizedConfig,\n        targetAgentId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useConfigureSuggestions.useEffect11\": ()=>{\n            if (!serializedConfig || !latestConfigRef.current) {\n                return;\n            }\n            const id = copilotkit.addSuggestionsConfig(latestConfigRef.current);\n            requestReload();\n            return ({\n                \"useConfigureSuggestions.useEffect11\": ()=>{\n                    copilotkit.removeSuggestionsConfig(id);\n                }\n            })[\"useConfigureSuggestions.useEffect11\"];\n        }\n    }[\"useConfigureSuggestions.useEffect11\"], [\n        copilotkit,\n        serializedConfig,\n        requestReload\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useConfigureSuggestions.useEffect11\": ()=>{\n            if (!normalizedConfig) {\n                previousSerializedConfigRef.current = null;\n                return;\n            }\n            if (serializedConfig && previousSerializedConfigRef.current === serializedConfig) {\n                return;\n            }\n            if (serializedConfig) {\n                previousSerializedConfigRef.current = serializedConfig;\n            }\n            requestReload();\n        }\n    }[\"useConfigureSuggestions.useEffect11\"], [\n        normalizedConfig,\n        requestReload,\n        serializedConfig\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useConfigureSuggestions.useEffect11\": ()=>{\n            if (!normalizedConfig || extraDeps.length === 0) {\n                return;\n            }\n            requestReload();\n        }\n    }[\"useConfigureSuggestions.useEffect11\"], [\n        extraDeps.length,\n        normalizedConfig,\n        requestReload,\n        ...extraDeps\n    ]);\n}\nfunction isDynamicConfig(config) {\n    return \"instructions\" in config;\n}\nfunction normalizeStaticSuggestions(suggestions) {\n    return suggestions.map((suggestion)=>({\n            ...suggestion,\n            isLoading: suggestion.isLoading ?? false\n        }));\n}\n// src/components/chat/CopilotChatToolCallsView.tsx\n\n\nfunction CopilotChatToolCallsView({ message, messages = [] }) {\n    const renderToolCall = useRenderToolCall();\n    if (!message.toolCalls || message.toolCalls.length === 0) {\n        return null;\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n        children: message.toolCalls.map((toolCall)=>{\n            const toolMessage = messages.find((m)=>m.role === \"tool\" && m.toolCallId === toolCall.id);\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n                children: renderToolCall({\n                    toolCall,\n                    toolMessage\n                })\n            }, toolCall.id);\n        })\n    });\n}\nvar CopilotChatToolCallsView_default = CopilotChatToolCallsView;\n// src/components/chat/CopilotChatAssistantMessage.tsx\n\nfunction CopilotChatAssistantMessage({ message, messages, isRunning, onThumbsUp, onThumbsDown, onReadAloud, onRegenerate, additionalToolbarItems, toolbarVisible = true, markdownRenderer, toolbar, copyButton, thumbsUpButton, thumbsDownButton, readAloudButton, regenerateButton, toolCallsView, children, className, ...props }) {\n    const boundMarkdownRenderer = renderSlot(markdownRenderer, CopilotChatAssistantMessage.MarkdownRenderer, {\n        content: message.content || \"\"\n    });\n    const boundCopyButton = renderSlot(copyButton, CopilotChatAssistantMessage.CopyButton, {\n        onClick: async ()=>{\n            if (message.content) {\n                try {\n                    await navigator.clipboard.writeText(message.content);\n                } catch (err) {\n                    console.error(\"Failed to copy message:\", err);\n                }\n            }\n        }\n    });\n    const boundThumbsUpButton = renderSlot(thumbsUpButton, CopilotChatAssistantMessage.ThumbsUpButton, {\n        onClick: onThumbsUp\n    });\n    const boundThumbsDownButton = renderSlot(thumbsDownButton, CopilotChatAssistantMessage.ThumbsDownButton, {\n        onClick: onThumbsDown\n    });\n    const boundReadAloudButton = renderSlot(readAloudButton, CopilotChatAssistantMessage.ReadAloudButton, {\n        onClick: onReadAloud\n    });\n    const boundRegenerateButton = renderSlot(regenerateButton, CopilotChatAssistantMessage.RegenerateButton, {\n        onClick: onRegenerate\n    });\n    const boundToolbar = renderSlot(toolbar, CopilotChatAssistantMessage.Toolbar, {\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            className: \"flex items-center gap-1\",\n            children: [\n                boundCopyButton,\n                (onThumbsUp || thumbsUpButton) && boundThumbsUpButton,\n                (onThumbsDown || thumbsDownButton) && boundThumbsDownButton,\n                (onReadAloud || readAloudButton) && boundReadAloudButton,\n                (onRegenerate || regenerateButton) && boundRegenerateButton,\n                additionalToolbarItems\n            ]\n        })\n    });\n    const boundToolCallsView = renderSlot(toolCallsView, CopilotChatToolCallsView_default, {\n        message,\n        messages\n    });\n    const hasContent = !!(message.content && message.content.trim().length > 0);\n    const isLatestAssistantMessage = message.role === \"assistant\" && messages?.[messages.length - 1]?.id === message.id;\n    const shouldShowToolbar = toolbarVisible && hasContent && !(isRunning && isLatestAssistantMessage);\n    if (children) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n            children: children({\n                markdownRenderer: boundMarkdownRenderer,\n                toolbar: boundToolbar,\n                toolCallsView: boundToolCallsView,\n                copyButton: boundCopyButton,\n                thumbsUpButton: boundThumbsUpButton,\n                thumbsDownButton: boundThumbsDownButton,\n                readAloudButton: boundReadAloudButton,\n                regenerateButton: boundRegenerateButton,\n                message,\n                messages,\n                isRunning,\n                onThumbsUp,\n                onThumbsDown,\n                onReadAloud,\n                onRegenerate,\n                additionalToolbarItems,\n                toolbarVisible: shouldShowToolbar\n            })\n        });\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"prose max-w-full break-words dark:prose-invert\", className),\n        ...props,\n        \"data-message-id\": message.id,\n        children: [\n            boundMarkdownRenderer,\n            boundToolCallsView,\n            shouldShowToolbar && boundToolbar\n        ]\n    });\n}\n((CopilotChatAssistantMessage2)=>{\n    CopilotChatAssistantMessage2.MarkdownRenderer = ({ content, className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(streamdown__WEBPACK_IMPORTED_MODULE_19__.Streamdown, {\n            className,\n            ...props,\n            children: content ?? \"\"\n        });\n    CopilotChatAssistantMessage2.Toolbar = ({ className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"w-full bg-transparent flex items-center -ml-[5px] -mt-[0px]\", className),\n            ...props\n        });\n    CopilotChatAssistantMessage2.ToolbarButton = ({ title, children, ...props })=>{\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(Tooltip, {\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipTrigger, {\n                    asChild: true,\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n                        type: \"button\",\n                        variant: \"assistantMessageToolbarButton\",\n                        \"aria-label\": title,\n                        ...props,\n                        children\n                    })\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipContent, {\n                    side: \"bottom\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"p\", {\n                        children: title\n                    })\n                })\n            ]\n        });\n    };\n    CopilotChatAssistantMessage2.CopyButton = ({ className, title, onClick, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        const [copied, setCopied] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n        const handleClick = (event)=>{\n            setCopied(true);\n            setTimeout(()=>setCopied(false), 2e3);\n            if (onClick) {\n                onClick(event);\n            }\n        };\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatAssistantMessage2.ToolbarButton, {\n            title: title || labels.assistantMessageToolbarCopyMessageLabel,\n            onClick: handleClick,\n            className,\n            ...props,\n            children: copied ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                className: \"size-[18px]\"\n            }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                className: \"size-[18px]\"\n            })\n        });\n    };\n    CopilotChatAssistantMessage2.ThumbsUpButton = ({ title, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatAssistantMessage2.ToolbarButton, {\n            title: title || labels.assistantMessageToolbarThumbsUpLabel,\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n                className: \"size-[18px]\"\n            })\n        });\n    };\n    CopilotChatAssistantMessage2.ThumbsDownButton = ({ title, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatAssistantMessage2.ToolbarButton, {\n            title: title || labels.assistantMessageToolbarThumbsDownLabel,\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_25__[\"default\"], {\n                className: \"size-[18px]\"\n            })\n        });\n    };\n    CopilotChatAssistantMessage2.ReadAloudButton = ({ title, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatAssistantMessage2.ToolbarButton, {\n            title: title || labels.assistantMessageToolbarReadAloudLabel,\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_26__[\"default\"], {\n                className: \"size-[20px]\"\n            })\n        });\n    };\n    CopilotChatAssistantMessage2.RegenerateButton = ({ title, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatAssistantMessage2.ToolbarButton, {\n            title: title || labels.assistantMessageToolbarRegenerateLabel,\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_27__[\"default\"], {\n                className: \"size-[18px]\"\n            })\n        });\n    };\n})(CopilotChatAssistantMessage || (CopilotChatAssistantMessage = {}));\nCopilotChatAssistantMessage.MarkdownRenderer.displayName = \"CopilotChatAssistantMessage.MarkdownRenderer\";\nCopilotChatAssistantMessage.Toolbar.displayName = \"CopilotChatAssistantMessage.Toolbar\";\nCopilotChatAssistantMessage.CopyButton.displayName = \"CopilotChatAssistantMessage.CopyButton\";\nCopilotChatAssistantMessage.ThumbsUpButton.displayName = \"CopilotChatAssistantMessage.ThumbsUpButton\";\nCopilotChatAssistantMessage.ThumbsDownButton.displayName = \"CopilotChatAssistantMessage.ThumbsDownButton\";\nCopilotChatAssistantMessage.ReadAloudButton.displayName = \"CopilotChatAssistantMessage.ReadAloudButton\";\nCopilotChatAssistantMessage.RegenerateButton.displayName = \"CopilotChatAssistantMessage.RegenerateButton\";\nvar CopilotChatAssistantMessage_default = CopilotChatAssistantMessage;\n// src/components/chat/CopilotChatUserMessage.tsx\n\n\n\n\nfunction flattenUserMessageContent(content) {\n    if (!content) {\n        return \"\";\n    }\n    if (typeof content === \"string\") {\n        return content;\n    }\n    return content.map((part)=>{\n        if (part && typeof part === \"object\" && \"type\" in part && part.type === \"text\" && typeof part.text === \"string\") {\n            return part.text;\n        }\n        return \"\";\n    }).filter((text)=>text.length > 0).join(\"\\n\");\n}\nfunction CopilotChatUserMessage({ message, onEditMessage, branchIndex, numberOfBranches, onSwitchToBranch, additionalToolbarItems, messageRenderer, toolbar, copyButton, editButton, branchNavigation, children, className, ...props }) {\n    const flattenedContent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChatUserMessage.useMemo10[flattenedContent]\": ()=>flattenUserMessageContent(message.content)\n    }[\"CopilotChatUserMessage.useMemo10[flattenedContent]\"], [\n        message.content\n    ]);\n    const BoundMessageRenderer = renderSlot(messageRenderer, CopilotChatUserMessage.MessageRenderer, {\n        content: flattenedContent\n    });\n    const BoundCopyButton = renderSlot(copyButton, CopilotChatUserMessage.CopyButton, {\n        onClick: async ()=>{\n            if (flattenedContent) {\n                try {\n                    await navigator.clipboard.writeText(flattenedContent);\n                } catch (err) {\n                    console.error(\"Failed to copy message:\", err);\n                }\n            }\n        }\n    });\n    const BoundEditButton = renderSlot(editButton, CopilotChatUserMessage.EditButton, {\n        onClick: ()=>onEditMessage?.({\n                message\n            })\n    });\n    const BoundBranchNavigation = renderSlot(branchNavigation, CopilotChatUserMessage.BranchNavigation, {\n        currentBranch: branchIndex,\n        numberOfBranches,\n        onSwitchToBranch,\n        message\n    });\n    const showBranchNavigation = numberOfBranches && numberOfBranches > 1 && onSwitchToBranch;\n    const BoundToolbar = renderSlot(toolbar, CopilotChatUserMessage.Toolbar, {\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            className: \"flex items-center gap-1 justify-end\",\n            children: [\n                additionalToolbarItems,\n                BoundCopyButton,\n                onEditMessage && BoundEditButton,\n                showBranchNavigation && BoundBranchNavigation\n            ]\n        })\n    });\n    if (children) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n            children: children({\n                messageRenderer: BoundMessageRenderer,\n                toolbar: BoundToolbar,\n                copyButton: BoundCopyButton,\n                editButton: BoundEditButton,\n                branchNavigation: BoundBranchNavigation,\n                message,\n                branchIndex,\n                numberOfBranches,\n                additionalToolbarItems\n            })\n        });\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"flex flex-col items-end group pt-10\", className),\n        \"data-message-id\": message.id,\n        ...props,\n        children: [\n            BoundMessageRenderer,\n            BoundToolbar\n        ]\n    });\n}\n((CopilotChatUserMessage2)=>{\n    CopilotChatUserMessage2.Container = ({ children, className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"flex flex-col items-end group\", className),\n            ...props,\n            children\n        });\n    CopilotChatUserMessage2.MessageRenderer = ({ content, className })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"prose dark:prose-invert bg-muted relative max-w-[80%] rounded-[18px] px-4 py-1.5 data-[multiline]:py-3 inline-block whitespace-pre-wrap\", className),\n            children: content\n        });\n    CopilotChatUserMessage2.Toolbar = ({ className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"w-full bg-transparent flex items-center justify-end -mr-[5px] mt-[4px] invisible group-hover:visible\", className),\n            ...props\n        });\n    CopilotChatUserMessage2.ToolbarButton = ({ title, children, className, ...props })=>{\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(Tooltip, {\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipTrigger, {\n                    asChild: true,\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n                        type: \"button\",\n                        variant: \"assistantMessageToolbarButton\",\n                        \"aria-label\": title,\n                        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(className),\n                        ...props,\n                        children\n                    })\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TooltipContent, {\n                    side: \"bottom\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"p\", {\n                        children: title\n                    })\n                })\n            ]\n        });\n    };\n    CopilotChatUserMessage2.CopyButton = ({ className, title, onClick, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        const [copied, setCopied] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n        const handleClick = (event)=>{\n            setCopied(true);\n            setTimeout(()=>setCopied(false), 2e3);\n            if (onClick) {\n                onClick(event);\n            }\n        };\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatUserMessage2.ToolbarButton, {\n            title: title || labels.userMessageToolbarCopyMessageLabel,\n            onClick: handleClick,\n            className,\n            ...props,\n            children: copied ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                className: \"size-[18px]\"\n            }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_Copy_RefreshCw_ThumbsDown_ThumbsUp_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                className: \"size-[18px]\"\n            })\n        });\n    };\n    CopilotChatUserMessage2.EditButton = ({ className, title, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatUserMessage2.ToolbarButton, {\n            title: title || labels.userMessageToolbarEditMessageLabel,\n            className,\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_ChevronLeft_ChevronRight_Copy_Edit_lucide_react__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n                className: \"size-[18px]\"\n            })\n        });\n    };\n    CopilotChatUserMessage2.BranchNavigation = ({ className, currentBranch = 0, numberOfBranches = 1, onSwitchToBranch, message, ...props })=>{\n        if (!numberOfBranches || numberOfBranches <= 1 || !onSwitchToBranch) {\n            return null;\n        }\n        const canGoPrev = currentBranch > 0;\n        const canGoNext = currentBranch < numberOfBranches - 1;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"flex items-center gap-1\", className),\n            ...props,\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n                    type: \"button\",\n                    variant: \"assistantMessageToolbarButton\",\n                    onClick: ()=>onSwitchToBranch?.({\n                            branchIndex: currentBranch - 1,\n                            numberOfBranches,\n                            message\n                        }),\n                    disabled: !canGoPrev,\n                    className: \"h-6 w-6 p-0\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_Check_ChevronLeft_ChevronRight_Copy_Edit_lucide_react__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                        className: \"size-[20px]\"\n                    })\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"span\", {\n                    className: \"text-sm text-muted-foreground px-0 font-medium\",\n                    children: [\n                        currentBranch + 1,\n                        \"/\",\n                        numberOfBranches\n                    ]\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n                    type: \"button\",\n                    variant: \"assistantMessageToolbarButton\",\n                    onClick: ()=>onSwitchToBranch?.({\n                            branchIndex: currentBranch + 1,\n                            numberOfBranches,\n                            message\n                        }),\n                    disabled: !canGoNext,\n                    className: \"h-6 w-6 p-0\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_CheckIcon_ChevronRightIcon_CircleIcon_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                        className: \"size-[20px]\"\n                    })\n                })\n            ]\n        });\n    };\n})(CopilotChatUserMessage || (CopilotChatUserMessage = {}));\nCopilotChatUserMessage.Container.displayName = \"CopilotChatUserMessage.Container\";\nCopilotChatUserMessage.MessageRenderer.displayName = \"CopilotChatUserMessage.MessageRenderer\";\nCopilotChatUserMessage.Toolbar.displayName = \"CopilotChatUserMessage.Toolbar\";\nCopilotChatUserMessage.ToolbarButton.displayName = \"CopilotChatUserMessage.ToolbarButton\";\nCopilotChatUserMessage.CopyButton.displayName = \"CopilotChatUserMessage.CopyButton\";\nCopilotChatUserMessage.EditButton.displayName = \"CopilotChatUserMessage.EditButton\";\nCopilotChatUserMessage.BranchNavigation.displayName = \"CopilotChatUserMessage.BranchNavigation\";\nvar CopilotChatUserMessage_default = CopilotChatUserMessage;\n// src/components/chat/CopilotChatSuggestionPill.tsx\n\n\n\nvar baseClasses = \"group inline-flex h-7 sm:h-8 items-center gap-1 sm:gap-1.5 rounded-full border border-border/60 bg-background px-2.5 sm:px-3 text-[11px] sm:text-xs leading-none text-foreground transition-colors cursor-pointer hover:bg-accent/60 hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:text-muted-foreground disabled:hover:bg-background disabled:hover:text-muted-foreground pointer-events-auto\";\nvar labelClasses = \"whitespace-nowrap font-medium leading-none\";\nvar CopilotChatSuggestionPill = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function CopilotChatSuggestionPill2({ className, children, icon, isLoading, type, ...props }, ref) {\n    const showIcon = !isLoading && icon;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"button\", {\n        ref,\n        \"data-slot\": \"suggestion-pill\",\n        className: cn(baseClasses, className),\n        type: type ?? \"button\",\n        \"aria-busy\": isLoading || void 0,\n        disabled: isLoading || props.disabled,\n        ...props,\n        children: [\n            isLoading ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n                className: \"flex h-3.5 sm:h-4 w-3.5 sm:w-4 items-center justify-center text-muted-foreground\",\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                    className: \"h-3.5 sm:h-4 w-3.5 sm:w-4 animate-spin\",\n                    \"aria-hidden\": \"true\"\n                })\n            }) : showIcon && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n                className: \"flex h-3.5 sm:h-4 w-3.5 sm:w-4 items-center justify-center text-muted-foreground\",\n                children: icon\n            }),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n                className: labelClasses,\n                children\n            })\n        ]\n    });\n});\nCopilotChatSuggestionPill.displayName = \"CopilotChatSuggestionPill\";\nvar CopilotChatSuggestionPill_default = CopilotChatSuggestionPill;\n// src/components/chat/CopilotChatSuggestionView.tsx\n\n\nvar DefaultContainer = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function DefaultContainer2({ className, ...props }, ref) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n        ref,\n        className: cn(\"flex flex-wrap items-center gap-1.5 sm:gap-2 pl-0 pr-4 sm:px-0 pointer-events-none\", className),\n        ...props\n    });\n});\nvar CopilotChatSuggestionView = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function CopilotChatSuggestionView2({ suggestions, onSelectSuggestion, loadingIndexes, container, suggestion: suggestionSlot, className, children, ...restProps }, ref) {\n    const loadingSet = react__WEBPACK_IMPORTED_MODULE_1__.useMemo({\n        \"CopilotChatSuggestionView.CopilotChatSuggestionView2.useMemo[loadingSet]\": ()=>{\n            if (!loadingIndexes || loadingIndexes.length === 0) {\n                return /* @__PURE__ */ new Set();\n            }\n            return new Set(loadingIndexes);\n        }\n    }[\"CopilotChatSuggestionView.CopilotChatSuggestionView2.useMemo[loadingSet]\"], [\n        loadingIndexes\n    ]);\n    const ContainerElement = renderSlot(container, DefaultContainer, {\n        ref,\n        className,\n        ...restProps\n    });\n    const suggestionElements = suggestions.map((suggestion, index)=>{\n        const isLoading = loadingSet.has(index) || suggestion.isLoading === true;\n        const pill = renderSlot(suggestionSlot, CopilotChatSuggestionPill_default, {\n            children: suggestion.title,\n            isLoading,\n            type: \"button\",\n            onClick: ()=>onSelectSuggestion?.(suggestion, index)\n        });\n        return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.cloneElement(pill, {\n            key: `${suggestion.title}-${index}`\n        });\n    });\n    const boundContainer = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.cloneElement(ContainerElement, void 0, suggestionElements);\n    if (typeof children === \"function\") {\n        const sampleSuggestion = renderSlot(suggestionSlot, CopilotChatSuggestionPill_default, {\n            children: suggestions[0]?.title ?? \"\",\n            isLoading: suggestions.length > 0 ? loadingSet.has(0) || suggestions[0]?.isLoading === true : false,\n            type: \"button\"\n        });\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n            children: children({\n                container: boundContainer,\n                suggestion: sampleSuggestion,\n                suggestions,\n                onSelectSuggestion,\n                loadingIndexes,\n                className,\n                ...restProps\n            })\n        });\n    }\n    if (children) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n            children: [\n                boundContainer,\n                children\n            ]\n        });\n    }\n    return boundContainer;\n});\nCopilotChatSuggestionView.displayName = \"CopilotChatSuggestionView\";\nvar CopilotChatSuggestionView_default = CopilotChatSuggestionView;\n// src/components/chat/CopilotChatMessageView.tsx\n\n\n\nvar MemoizedAssistantMessage = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.memo(function MemoizedAssistantMessage2({ message, messages, isRunning, AssistantMessageComponent }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(AssistantMessageComponent, {\n        message,\n        messages,\n        isRunning\n    });\n}, (prevProps, nextProps)=>{\n    if (prevProps.message.id !== nextProps.message.id) return false;\n    if (prevProps.message.content !== nextProps.message.content) return false;\n    const prevToolCalls = prevProps.message.toolCalls;\n    const nextToolCalls = nextProps.message.toolCalls;\n    if (prevToolCalls?.length !== nextToolCalls?.length) return false;\n    if (prevToolCalls && nextToolCalls) {\n        for(let i = 0; i < prevToolCalls.length; i++){\n            const prevTc = prevToolCalls[i];\n            const nextTc = nextToolCalls[i];\n            if (!prevTc || !nextTc) return false;\n            if (prevTc.id !== nextTc.id) return false;\n            if (prevTc.function.arguments !== nextTc.function.arguments) return false;\n        }\n    }\n    if (prevToolCalls && prevToolCalls.length > 0) {\n        const toolCallIds = new Set(prevToolCalls.map((tc)=>tc.id));\n        const prevToolResults = prevProps.messages.filter((m)=>m.role === \"tool\" && toolCallIds.has(m.toolCallId));\n        const nextToolResults = nextProps.messages.filter((m)=>m.role === \"tool\" && toolCallIds.has(m.toolCallId));\n        if (prevToolResults.length !== nextToolResults.length) return false;\n        for(let i = 0; i < prevToolResults.length; i++){\n            if (prevToolResults[i].content !== nextToolResults[i].content) return false;\n        }\n    }\n    const nextIsLatest = nextProps.messages[nextProps.messages.length - 1]?.id === nextProps.message.id;\n    if (nextIsLatest && prevProps.isRunning !== nextProps.isRunning) return false;\n    if (prevProps.AssistantMessageComponent !== nextProps.AssistantMessageComponent) return false;\n    return true;\n});\nvar MemoizedUserMessage = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.memo(function MemoizedUserMessage2({ message, UserMessageComponent }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(UserMessageComponent, {\n        message\n    });\n}, (prevProps, nextProps)=>{\n    if (prevProps.message.id !== nextProps.message.id) return false;\n    if (prevProps.message.content !== nextProps.message.content) return false;\n    if (prevProps.UserMessageComponent !== nextProps.UserMessageComponent) return false;\n    return true;\n});\nvar MemoizedActivityMessage = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.memo(function MemoizedActivityMessage2({ message, renderActivityMessage }) {\n    return renderActivityMessage(message);\n}, (prevProps, nextProps)=>{\n    if (prevProps.message.id !== nextProps.message.id) return false;\n    if (prevProps.message.activityType !== nextProps.message.activityType) return false;\n    if (JSON.stringify(prevProps.message.content) !== JSON.stringify(nextProps.message.content)) return false;\n    return true;\n});\nvar MemoizedCustomMessage = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.memo(function MemoizedCustomMessage2({ message, position, renderCustomMessage }) {\n    return renderCustomMessage({\n        message,\n        position\n    });\n}, (prevProps, nextProps)=>{\n    if (prevProps.message.id !== nextProps.message.id) return false;\n    if (prevProps.position !== nextProps.position) return false;\n    if (prevProps.message.content !== nextProps.message.content) return false;\n    if (prevProps.message.role !== nextProps.message.role) return false;\n    if (JSON.stringify(prevProps.stateSnapshot) !== JSON.stringify(nextProps.stateSnapshot)) return false;\n    return true;\n});\nfunction CopilotChatMessageView({ messages = [], assistantMessage, userMessage, cursor, isRunning = false, children, className, ...props }) {\n    const renderCustomMessage = useRenderCustomMessages();\n    const { renderActivityMessage } = useRenderActivityMessage();\n    const { copilotkit } = useCopilotKit();\n    const config = useCopilotChatConfiguration();\n    const [, forceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)({\n        \"CopilotChatMessageView.useReducer3\": (x)=>x + 1\n    }[\"CopilotChatMessageView.useReducer3\"], 0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatMessageView.useEffect12\": ()=>{\n            if (!config?.agentId) return;\n            const agent = copilotkit.getAgent(config.agentId);\n            if (!agent) return;\n            const subscription = agent.subscribe({\n                onStateChanged: forceUpdate\n            });\n            return ({\n                \"CopilotChatMessageView.useEffect12\": ()=>subscription.unsubscribe()\n            })[\"CopilotChatMessageView.useEffect12\"];\n        }\n    }[\"CopilotChatMessageView.useEffect12\"], [\n        config?.agentId,\n        copilotkit,\n        forceUpdate\n    ]);\n    const getStateSnapshotForMessage = (messageId)=>{\n        if (!config) return void 0;\n        const resolvedRunId = copilotkit.getRunIdForMessage(config.agentId, config.threadId, messageId) ?? copilotkit.getRunIdsForThread(config.agentId, config.threadId).slice(-1)[0];\n        if (!resolvedRunId) return void 0;\n        return copilotkit.getStateByRun(config.agentId, config.threadId, resolvedRunId);\n    };\n    const messageElements = messages.flatMap((message)=>{\n        const elements = [];\n        const stateSnapshot = getStateSnapshotForMessage(message.id);\n        if (renderCustomMessage) {\n            elements.push(/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MemoizedCustomMessage, {\n                message,\n                position: \"before\",\n                renderCustomMessage,\n                stateSnapshot\n            }, `${message.id}-custom-before`));\n        }\n        if (message.role === \"assistant\") {\n            const AssistantComponent = typeof assistantMessage === \"function\" ? assistantMessage : CopilotChatAssistantMessage_default;\n            elements.push(/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MemoizedAssistantMessage, {\n                message,\n                messages,\n                isRunning,\n                AssistantMessageComponent: AssistantComponent\n            }, message.id));\n        } else if (message.role === \"user\") {\n            const UserComponent = typeof userMessage === \"function\" ? userMessage : CopilotChatUserMessage_default;\n            elements.push(/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MemoizedUserMessage, {\n                message,\n                UserMessageComponent: UserComponent\n            }, message.id));\n        } else if (message.role === \"activity\") {\n            const activityMsg = message;\n            elements.push(/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MemoizedActivityMessage, {\n                message: activityMsg,\n                renderActivityMessage\n            }, message.id));\n        }\n        if (renderCustomMessage) {\n            elements.push(/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MemoizedCustomMessage, {\n                message,\n                position: \"after\",\n                renderCustomMessage,\n                stateSnapshot\n            }, `${message.id}-custom-after`));\n        }\n        return elements;\n    }).filter(Boolean);\n    if (children) {\n        return children({\n            messageElements,\n            messages,\n            isRunning\n        });\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"flex flex-col\", className),\n        ...props,\n        children: [\n            messageElements,\n            isRunning && renderSlot(cursor, CopilotChatMessageView.Cursor, {})\n        ]\n    });\n}\nCopilotChatMessageView.Cursor = function Cursor({ className, ...props }) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"w-[11px] h-[11px] rounded-full bg-foreground animate-pulse-cursor ml-1\", className),\n        ...props\n    });\n};\nvar CopilotChatMessageView_default = CopilotChatMessageView;\n// src/components/chat/CopilotChatView.tsx\n\n\n\n\n// src/hooks/use-keyboard-height.tsx\n\nfunction useKeyboardHeight() {\n    const [keyboardState, setKeyboardState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isKeyboardOpen: false,\n        keyboardHeight: 0,\n        availableHeight:  false ? 0 : 0,\n        viewportHeight:  false ? 0 : 0\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"useKeyboardHeight.useEffect13\": ()=>{\n            if (true) {\n                return;\n            }\n            const visualViewport = window.visualViewport;\n            if (!visualViewport) {\n                return;\n            }\n            const updateKeyboardState = {\n                \"useKeyboardHeight.useEffect13.updateKeyboardState\": ()=>{\n                    const layoutHeight = window.innerHeight;\n                    const visualHeight = visualViewport.height;\n                    const keyboardHeight = Math.max(0, layoutHeight - visualHeight);\n                    const isKeyboardOpen = keyboardHeight > 150;\n                    setKeyboardState({\n                        isKeyboardOpen,\n                        keyboardHeight,\n                        availableHeight: visualHeight,\n                        viewportHeight: layoutHeight\n                    });\n                }\n            }[\"useKeyboardHeight.useEffect13.updateKeyboardState\"];\n            updateKeyboardState();\n            visualViewport.addEventListener(\"resize\", updateKeyboardState);\n            visualViewport.addEventListener(\"scroll\", updateKeyboardState);\n            return ({\n                \"useKeyboardHeight.useEffect13\": ()=>{\n                    visualViewport.removeEventListener(\"resize\", updateKeyboardState);\n                    visualViewport.removeEventListener(\"scroll\", updateKeyboardState);\n                }\n            })[\"useKeyboardHeight.useEffect13\"];\n        }\n    }[\"useKeyboardHeight.useEffect13\"], []);\n    return keyboardState;\n}\n// src/components/chat/CopilotChatView.tsx\n\nfunction CopilotChatView({ messageView, input, scrollView, scrollToBottomButton, feather, inputContainer, disclaimer, suggestionView, welcomeScreen, messages = [], autoScroll = true, inputProps, isRunning = false, suggestions, suggestionLoadingIndexes, onSelectSuggestion, children, className, ...props }) {\n    const inputContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [inputContainerHeight, setInputContainerHeight] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [isResizing, setIsResizing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const resizeTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { isKeyboardOpen, keyboardHeight, availableHeight } = useKeyboardHeight();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChatView.useEffect14\": ()=>{\n            const element = inputContainerRef.current;\n            if (!element) return;\n            const resizeObserver = new ResizeObserver({\n                \"CopilotChatView.useEffect14\": (entries)=>{\n                    for (const entry of entries){\n                        const newHeight = entry.contentRect.height;\n                        setInputContainerHeight({\n                            \"CopilotChatView.useEffect14\": (prevHeight)=>{\n                                if (newHeight !== prevHeight) {\n                                    setIsResizing(true);\n                                    if (resizeTimeoutRef.current) {\n                                        clearTimeout(resizeTimeoutRef.current);\n                                    }\n                                    resizeTimeoutRef.current = setTimeout({\n                                        \"CopilotChatView.useEffect14\": ()=>{\n                                            setIsResizing(false);\n                                        }\n                                    }[\"CopilotChatView.useEffect14\"], 250);\n                                    return newHeight;\n                                }\n                                return prevHeight;\n                            }\n                        }[\"CopilotChatView.useEffect14\"]);\n                    }\n                }\n            }[\"CopilotChatView.useEffect14\"]);\n            resizeObserver.observe(element);\n            setInputContainerHeight(element.offsetHeight);\n            return ({\n                \"CopilotChatView.useEffect14\": ()=>{\n                    resizeObserver.disconnect();\n                    if (resizeTimeoutRef.current) {\n                        clearTimeout(resizeTimeoutRef.current);\n                    }\n                }\n            })[\"CopilotChatView.useEffect14\"];\n        }\n    }[\"CopilotChatView.useEffect14\"], []);\n    const BoundMessageView = renderSlot(messageView, CopilotChatMessageView_default, {\n        messages,\n        isRunning\n    });\n    const BoundInput = renderSlot(input, CopilotChatInput_default, inputProps ?? {});\n    const hasSuggestions = Array.isArray(suggestions) && suggestions.length > 0;\n    const BoundSuggestionView = hasSuggestions ? renderSlot(suggestionView, CopilotChatSuggestionView_default, {\n        suggestions,\n        loadingIndexes: suggestionLoadingIndexes,\n        onSelectSuggestion,\n        className: \"mb-3 lg:ml-4 lg:mr-4 ml-0 mr-0\"\n    }) : null;\n    const BoundFeather = renderSlot(feather, CopilotChatView.Feather, {});\n    const BoundScrollView = renderSlot(scrollView, CopilotChatView.ScrollView, {\n        autoScroll,\n        scrollToBottomButton,\n        inputContainerHeight,\n        isResizing,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            style: {\n                paddingBottom: `${inputContainerHeight + (hasSuggestions ? 4 : 32)}px`\n            },\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                className: \"max-w-3xl mx-auto\",\n                children: [\n                    BoundMessageView,\n                    hasSuggestions ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        className: \"pl-0 pr-4 sm:px-0 mt-4\",\n                        children: BoundSuggestionView\n                    }) : null\n                ]\n            })\n        })\n    });\n    const BoundScrollToBottomButton = renderSlot(scrollToBottomButton, CopilotChatView.ScrollToBottomButton, {});\n    const BoundDisclaimer = renderSlot(disclaimer, CopilotChatView.Disclaimer, {});\n    const BoundInputContainer = renderSlot(inputContainer, CopilotChatView.InputContainer, {\n        ref: inputContainerRef,\n        keyboardHeight: isKeyboardOpen ? keyboardHeight : 0,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"max-w-3xl mx-auto py-0 px-4 sm:px-0 [div[data-sidebar-chat]_&]:px-8 [div[data-popup-chat]_&]:px-6 pointer-events-auto\",\n                    children: BoundInput\n                }),\n                BoundDisclaimer\n            ]\n        })\n    });\n    const isEmpty = messages.length === 0;\n    const welcomeScreenDisabled = welcomeScreen === false;\n    const shouldShowWelcomeScreen = isEmpty && !welcomeScreenDisabled;\n    if (shouldShowWelcomeScreen) {\n        const welcomeScreenSlot = welcomeScreen === true ? void 0 : welcomeScreen;\n        const BoundWelcomeScreen = renderSlot(welcomeScreenSlot, CopilotChatView.WelcomeScreen, {\n            input: BoundInput,\n            suggestionView: BoundSuggestionView ?? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {})\n        });\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"relative h-full flex flex-col\", className),\n            ...props,\n            children: BoundWelcomeScreen\n        });\n    }\n    if (children) {\n        return children({\n            messageView: BoundMessageView,\n            input: BoundInput,\n            scrollView: BoundScrollView,\n            scrollToBottomButton: BoundScrollToBottomButton,\n            feather: BoundFeather,\n            inputContainer: BoundInputContainer,\n            disclaimer: BoundDisclaimer,\n            suggestionView: BoundSuggestionView ?? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {})\n        });\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n        className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"relative h-full\", className),\n        ...props,\n        children: [\n            BoundScrollView,\n            BoundFeather,\n            BoundInputContainer\n        ]\n    });\n}\n((CopilotChatView2)=>{\n    const ScrollContent = ({ children, scrollToBottomButton, inputContainerHeight, isResizing })=>{\n        const { isAtBottom, scrollToBottom } = (0,use_stick_to_bottom__WEBPACK_IMPORTED_MODULE_30__.useStickToBottomContext)();\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(use_stick_to_bottom__WEBPACK_IMPORTED_MODULE_30__.StickToBottom.Content, {\n                    className: \"overflow-y-scroll overflow-x-hidden\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        className: \"px-4 sm:px-0 [div[data-sidebar-chat]_&]:px-8 [div[data-popup-chat]_&]:px-6\",\n                        children\n                    })\n                }),\n                !isAtBottom && !isResizing && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"absolute inset-x-0 flex justify-center z-10 pointer-events-none\",\n                    style: {\n                        bottom: `${inputContainerHeight + 16}px`\n                    },\n                    children: renderSlot(scrollToBottomButton, CopilotChatView2.ScrollToBottomButton, {\n                        onClick: ()=>scrollToBottom()\n                    })\n                })\n            ]\n        });\n    };\n    CopilotChatView2.ScrollView = ({ children, autoScroll = true, scrollToBottomButton, inputContainerHeight = 0, isResizing = false, className, ...props })=>{\n        const [hasMounted, setHasMounted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n        const { scrollRef, contentRef, scrollToBottom } = (0,use_stick_to_bottom__WEBPACK_IMPORTED_MODULE_31__.useStickToBottom)();\n        const [showScrollButton, setShowScrollButton] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n            setHasMounted(true);\n        }, []);\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n            if (autoScroll) return;\n            const scrollElement = scrollRef.current;\n            if (!scrollElement) return;\n            const checkScroll = ()=>{\n                const atBottom = scrollElement.scrollHeight - scrollElement.scrollTop - scrollElement.clientHeight < 10;\n                setShowScrollButton(!atBottom);\n            };\n            checkScroll();\n            scrollElement.addEventListener(\"scroll\", checkScroll);\n            const resizeObserver = new ResizeObserver(checkScroll);\n            resizeObserver.observe(scrollElement);\n            return ()=>{\n                scrollElement.removeEventListener(\"scroll\", checkScroll);\n                resizeObserver.disconnect();\n            };\n        }, [\n            scrollRef,\n            autoScroll\n        ]);\n        if (!hasMounted) {\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                className: \"h-full max-h-full flex flex-col min-h-0 overflow-y-scroll overflow-x-hidden\",\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"px-4 sm:px-0 [div[data-sidebar-chat]_&]:px-8 [div[data-popup-chat]_&]:px-6\",\n                    children\n                })\n            });\n        }\n        if (!autoScroll) {\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                ref: scrollRef,\n                className: cn(\"h-full max-h-full flex flex-col min-h-0 overflow-y-scroll overflow-x-hidden relative\", className),\n                ...props,\n                children: [\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        ref: contentRef,\n                        className: \"px-4 sm:px-0 [div[data-sidebar-chat]_&]:px-8 [div[data-popup-chat]_&]:px-6\",\n                        children\n                    }),\n                    showScrollButton && !isResizing && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        className: \"absolute inset-x-0 flex justify-center z-10 pointer-events-none\",\n                        style: {\n                            bottom: `${inputContainerHeight + 16}px`\n                        },\n                        children: renderSlot(scrollToBottomButton, CopilotChatView2.ScrollToBottomButton, {\n                            onClick: ()=>scrollToBottom()\n                        })\n                    })\n                ]\n            });\n        }\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(use_stick_to_bottom__WEBPACK_IMPORTED_MODULE_30__.StickToBottom, {\n            className: cn(\"h-full max-h-full flex flex-col min-h-0 relative\", className),\n            resize: \"smooth\",\n            initial: \"smooth\",\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ScrollContent, {\n                scrollToBottomButton,\n                inputContainerHeight,\n                isResizing,\n                children\n            })\n        });\n    };\n    CopilotChatView2.ScrollToBottomButton = ({ className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            className: (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_6__.twMerge)(\"rounded-full w-10 h-10 p-0 pointer-events-auto\", \"bg-white dark:bg-gray-900\", \"shadow-lg border border-gray-200 dark:border-gray-700\", \"hover:bg-gray-50 dark:hover:bg-gray-800\", \"flex items-center justify-center cursor-pointer\", className),\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_32__[\"default\"], {\n                className: \"w-4 h-4 text-gray-600 dark:text-white\"\n            })\n        });\n    CopilotChatView2.Feather = ({ className, style, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: cn(\"absolute bottom-0 left-0 right-4 h-24 pointer-events-none z-10 bg-gradient-to-t\", \"from-white via-white to-transparent\", \"dark:from-[rgb(33,33,33)] dark:via-[rgb(33,33,33)]\", className),\n            style,\n            ...props\n        });\n    CopilotChatView2.InputContainer = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ children, className, keyboardHeight = 0, ...props }, ref)=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            ref,\n            className: cn(\"absolute bottom-0 left-0 right-0 z-20 pointer-events-none\", className),\n            style: {\n                // Adjust position when keyboard is open to keep input visible\n                transform: keyboardHeight > 0 ? `translateY(-${keyboardHeight}px)` : void 0,\n                transition: \"transform 0.2s ease-out\"\n            },\n            ...props,\n            children\n        }));\n    CopilotChatView2.InputContainer.displayName = \"CopilotChatView.InputContainer\";\n    CopilotChatView2.Disclaimer = ({ className, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: cn(\"text-center text-xs text-muted-foreground py-3 px-4 max-w-3xl mx-auto\", className),\n            ...props,\n            children: labels.chatDisclaimerText\n        });\n    };\n    CopilotChatView2.WelcomeMessage = ({ className, ...props })=>{\n        const config = useCopilotChatConfiguration();\n        const labels = config?.labels ?? CopilotChatDefaultLabels;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"h1\", {\n            className: cn(\"text-xl sm:text-2xl font-medium text-foreground text-center\", className),\n            ...props,\n            children: labels.welcomeMessageText\n        });\n    };\n    CopilotChatView2.WelcomeScreen = ({ welcomeMessage, input, suggestionView, className, children, ...props })=>{\n        const BoundWelcomeMessage = renderSlot(welcomeMessage, CopilotChatView2.WelcomeMessage, {});\n        if (children) {\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n                children: children({\n                    welcomeMessage: BoundWelcomeMessage,\n                    input,\n                    suggestionView,\n                    className,\n                    ...props\n                })\n            });\n        }\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: cn(\"flex-1 flex flex-col items-center justify-center px-4\", className),\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                className: \"w-full max-w-3xl flex flex-col items-center\",\n                children: [\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        className: \"mb-6\",\n                        children: BoundWelcomeMessage\n                    }),\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        className: \"w-full\",\n                        children: input\n                    }),\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                        className: \"mt-4 flex justify-center\",\n                        children: suggestionView\n                    })\n                ]\n            })\n        });\n    };\n})(CopilotChatView || (CopilotChatView = {}));\nvar CopilotChatView_default = CopilotChatView;\n// src/components/chat/CopilotChat.tsx\n\n\n\n\n// src/lib/transcription-client.ts\n\nasync function blobToBase64(blob) {\n    return new Promise((resolve, reject)=>{\n        const reader = new FileReader();\n        reader.onloadend = ()=>{\n            const result = reader.result;\n            const base64 = result.split(\",\")[1];\n            resolve(base64 ?? \"\");\n        };\n        reader.onerror = ()=>reject(new Error(\"Failed to read audio data\"));\n        reader.readAsDataURL(blob);\n    });\n}\nfunction isTranscriptionErrorResponse(data) {\n    return typeof data === \"object\" && data !== null && \"error\" in data && \"message\" in data && typeof data.error === \"string\" && typeof data.message === \"string\";\n}\nfunction parseTranscriptionError(response) {\n    return {\n        code: response.error,\n        message: response.message,\n        retryable: response.retryable ?? false\n    };\n}\nvar TranscriptionError = class extends Error {\n    constructor(info){\n        super(info.message);\n        this.name = \"TranscriptionError\";\n        this.info = info;\n    }\n};\nasync function transcribeAudio(core, audioBlob, filename = \"recording.webm\") {\n    const runtimeUrl = core.runtimeUrl;\n    if (!runtimeUrl) {\n        throw new TranscriptionError({\n            code: _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.INVALID_REQUEST,\n            message: \"Runtime URL is not configured\",\n            retryable: false\n        });\n    }\n    const headers = {\n        ...core.headers\n    };\n    let response;\n    try {\n        if (core.runtimeTransport === \"single\") {\n            const base64Audio = await blobToBase64(audioBlob);\n            headers[\"Content-Type\"] = \"application/json\";\n            response = await fetch(runtimeUrl, {\n                method: \"POST\",\n                headers,\n                body: JSON.stringify({\n                    method: \"transcribe\",\n                    body: {\n                        audio: base64Audio,\n                        mimeType: audioBlob.type || \"audio/webm\",\n                        filename\n                    }\n                })\n            });\n        } else {\n            delete headers[\"Content-Type\"];\n            const formData = new FormData();\n            formData.append(\"audio\", audioBlob, filename);\n            response = await fetch(`${runtimeUrl}/transcribe`, {\n                method: \"POST\",\n                headers,\n                body: formData\n            });\n        }\n    } catch (error) {\n        throw new TranscriptionError({\n            code: _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.NETWORK_ERROR,\n            message: error instanceof Error ? error.message : \"Network request failed\",\n            retryable: true\n        });\n    }\n    if (!response.ok) {\n        let errorData;\n        try {\n            errorData = await response.json();\n        } catch  {\n            throw new TranscriptionError({\n                code: _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.PROVIDER_ERROR,\n                message: `HTTP ${response.status}: ${response.statusText}`,\n                retryable: response.status >= 500\n            });\n        }\n        if (isTranscriptionErrorResponse(errorData)) {\n            throw new TranscriptionError(parseTranscriptionError(errorData));\n        }\n        throw new TranscriptionError({\n            code: _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.PROVIDER_ERROR,\n            message: typeof errorData === \"object\" && errorData !== null && \"message\" in errorData ? String(errorData.message) : \"Transcription failed\",\n            retryable: response.status >= 500\n        });\n    }\n    return await response.json();\n}\n// src/components/chat/CopilotChat.tsx\n\nfunction CopilotChat({ agentId, threadId, labels, chatView, isModalDefaultOpen, ...props }) {\n    const existingConfig = useCopilotChatConfiguration();\n    const resolvedAgentId = agentId ?? existingConfig?.agentId ?? _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_AGENT_ID;\n    const resolvedThreadId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChat.useMemo11[resolvedThreadId]\": ()=>threadId ?? existingConfig?.threadId ?? (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.randomUUID)()\n    }[\"CopilotChat.useMemo11[resolvedThreadId]\"], [\n        threadId,\n        existingConfig?.threadId\n    ]);\n    const { agent } = useAgent({\n        agentId: resolvedAgentId\n    });\n    const { copilotkit } = useCopilotKit();\n    const { suggestions: autoSuggestions } = useSuggestions({\n        agentId: resolvedAgentId\n    });\n    const [transcribeMode, setTranscribeMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"input\");\n    const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [transcriptionError, setTranscriptionError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isTranscribing, setIsTranscribing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const isTranscriptionEnabled = copilotkit.audioFileTranscriptionEnabled;\n    const isMediaRecorderSupported =  false && 0;\n    const { inputProps: providedInputProps, messageView: providedMessageView, suggestionView: providedSuggestionView, ...restProps } = props;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChat.useEffect15\": ()=>{\n            const connect = {\n                \"CopilotChat.useEffect15.connect\": async (agent2)=>{\n                    try {\n                        await copilotkit.connectAgent({\n                            agent: agent2\n                        });\n                    } catch (error) {\n                        if (error instanceof _ag_ui_client__WEBPACK_IMPORTED_MODULE_34__.AGUIConnectNotImplementedError) {} else {\n                            throw error;\n                        }\n                    }\n                }\n            }[\"CopilotChat.useEffect15.connect\"];\n            agent.threadId = resolvedThreadId;\n            connect(agent);\n            return ({\n                \"CopilotChat.useEffect15\": ()=>{}\n            })[\"CopilotChat.useEffect15\"];\n        }\n    }[\"CopilotChat.useEffect15\"], [\n        resolvedThreadId,\n        agent,\n        copilotkit,\n        resolvedAgentId\n    ]);\n    const onSubmitInput = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChat.useCallback9[onSubmitInput]\": async (value)=>{\n            agent.addMessage({\n                id: (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.randomUUID)(),\n                role: \"user\",\n                content: value\n            });\n            setInputValue(\"\");\n            try {\n                await copilotkit.runAgent({\n                    agent\n                });\n            } catch (error) {\n                console.error(\"CopilotChat: runAgent failed\", error);\n            }\n        }\n    }[\"CopilotChat.useCallback9[onSubmitInput]\"], [\n        agent,\n        copilotkit\n    ]);\n    const handleSelectSuggestion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChat.useCallback9[handleSelectSuggestion]\": async (suggestion)=>{\n            agent.addMessage({\n                id: (0,_copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.randomUUID)(),\n                role: \"user\",\n                content: suggestion.message\n            });\n            try {\n                await copilotkit.runAgent({\n                    agent\n                });\n            } catch (error) {\n                console.error(\"CopilotChat: runAgent failed after selecting suggestion\", error);\n            }\n        }\n    }[\"CopilotChat.useCallback9[handleSelectSuggestion]\"], [\n        agent,\n        copilotkit\n    ]);\n    const stopCurrentRun = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChat.useCallback9[stopCurrentRun]\": ()=>{\n            try {\n                copilotkit.stopAgent({\n                    agent\n                });\n            } catch (error) {\n                console.error(\"CopilotChat: stopAgent failed\", error);\n                try {\n                    agent.abortRun();\n                } catch (abortError) {\n                    console.error(\"CopilotChat: abortRun fallback failed\", abortError);\n                }\n            }\n        }\n    }[\"CopilotChat.useCallback9[stopCurrentRun]\"], [\n        agent,\n        copilotkit\n    ]);\n    const handleStartTranscribe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChat.useCallback9[handleStartTranscribe]\": ()=>{\n            setTranscriptionError(null);\n            setTranscribeMode(\"transcribe\");\n        }\n    }[\"CopilotChat.useCallback9[handleStartTranscribe]\"], []);\n    const handleCancelTranscribe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChat.useCallback9[handleCancelTranscribe]\": ()=>{\n            setTranscriptionError(null);\n            setTranscribeMode(\"input\");\n        }\n    }[\"CopilotChat.useCallback9[handleCancelTranscribe]\"], []);\n    const handleFinishTranscribe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChat.useCallback9[handleFinishTranscribe]\": ()=>{\n            setTranscribeMode(\"input\");\n        }\n    }[\"CopilotChat.useCallback9[handleFinishTranscribe]\"], []);\n    const handleFinishTranscribeWithAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotChat.useCallback9[handleFinishTranscribeWithAudio]\": async (audioBlob)=>{\n            setIsTranscribing(true);\n            try {\n                setTranscriptionError(null);\n                const result = await transcribeAudio(copilotkit, audioBlob);\n                setInputValue({\n                    \"CopilotChat.useCallback9[handleFinishTranscribeWithAudio]\": (prev)=>{\n                        const trimmedPrev = prev.trim();\n                        if (trimmedPrev) {\n                            return `${trimmedPrev} ${result.text}`;\n                        }\n                        return result.text;\n                    }\n                }[\"CopilotChat.useCallback9[handleFinishTranscribeWithAudio]\"]);\n            } catch (error) {\n                console.error(\"CopilotChat: Transcription failed\", error);\n                if (error instanceof TranscriptionError) {\n                    const { code, retryable, message } = error.info;\n                    switch(code){\n                        case _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.RATE_LIMITED:\n                            setTranscriptionError(\"Too many requests. Please wait a moment.\");\n                            break;\n                        case _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.AUTH_FAILED:\n                            setTranscriptionError(\"Authentication error. Please check your configuration.\");\n                            break;\n                        case _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.AUDIO_TOO_LONG:\n                            setTranscriptionError(\"Recording is too long. Please try a shorter recording.\");\n                            break;\n                        case _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.AUDIO_TOO_SHORT:\n                            setTranscriptionError(\"Recording is too short. Please try again.\");\n                            break;\n                        case _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.INVALID_AUDIO_FORMAT:\n                            setTranscriptionError(\"Audio format not supported.\");\n                            break;\n                        case _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.SERVICE_NOT_CONFIGURED:\n                            setTranscriptionError(\"Transcription service is not available.\");\n                            break;\n                        case _copilotkitnext_shared__WEBPACK_IMPORTED_MODULE_2__.TranscriptionErrorCode.NETWORK_ERROR:\n                            setTranscriptionError(\"Network error. Please check your connection.\");\n                            break;\n                        default:\n                            setTranscriptionError(retryable ? \"Transcription failed. Please try again.\" : message);\n                    }\n                } else {\n                    setTranscriptionError(\"Transcription failed. Please try again.\");\n                }\n            } finally{\n                setIsTranscribing(false);\n            }\n        }\n    }[\"CopilotChat.useCallback9[handleFinishTranscribeWithAudio]\"], [\n        copilotkit\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotChat.useEffect15\": ()=>{\n            if (transcriptionError) {\n                const timer = setTimeout({\n                    \"CopilotChat.useEffect15.timer\": ()=>{\n                        setTranscriptionError(null);\n                    }\n                }[\"CopilotChat.useEffect15.timer\"], 5e3);\n                return ({\n                    \"CopilotChat.useEffect15\": ()=>clearTimeout(timer)\n                })[\"CopilotChat.useEffect15\"];\n            }\n        }\n    }[\"CopilotChat.useEffect15\"], [\n        transcriptionError\n    ]);\n    const mergedProps = (0,ts_deepmerge__WEBPACK_IMPORTED_MODULE_33__.merge)({\n        isRunning: agent.isRunning,\n        suggestions: autoSuggestions,\n        onSelectSuggestion: handleSelectSuggestion,\n        suggestionView: providedSuggestionView\n    }, {\n        ...restProps,\n        ...typeof providedMessageView === \"string\" ? {\n            messageView: {\n                className: providedMessageView\n            }\n        } : providedMessageView !== void 0 ? {\n            messageView: providedMessageView\n        } : {}\n    });\n    const providedStopHandler = providedInputProps?.onStop;\n    const hasMessages = agent.messages.length > 0;\n    const shouldAllowStop = agent.isRunning && hasMessages;\n    const effectiveStopHandler = shouldAllowStop ? providedStopHandler ?? stopCurrentRun : providedStopHandler;\n    const showTranscription = isTranscriptionEnabled && isMediaRecorderSupported;\n    const effectiveMode = isTranscribing ? \"processing\" : transcribeMode;\n    const finalInputProps = {\n        ...providedInputProps,\n        onSubmitMessage: onSubmitInput,\n        onStop: effectiveStopHandler,\n        isRunning: agent.isRunning,\n        mode: effectiveMode,\n        value: inputValue,\n        onChange: setInputValue,\n        // Only provide transcription handlers if feature is available\n        onStartTranscribe: showTranscription ? handleStartTranscribe : void 0,\n        onCancelTranscribe: showTranscription ? handleCancelTranscribe : void 0,\n        onFinishTranscribe: showTranscription ? handleFinishTranscribe : void 0,\n        onFinishTranscribeWithAudio: showTranscription ? handleFinishTranscribeWithAudio : void 0\n    };\n    const messages = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotChat.useMemo11[messages]\": ()=>[\n                ...agent.messages\n            ]\n    }[\"CopilotChat.useMemo11[messages]\"], [\n        JSON.stringify(agent.messages)\n    ]);\n    const finalProps = (0,ts_deepmerge__WEBPACK_IMPORTED_MODULE_33__.merge)(mergedProps, {\n        messages,\n        inputProps: finalInputProps\n    });\n    const RenderedChatView = renderSlot(chatView, CopilotChatView, finalProps);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(CopilotChatConfigurationProvider, {\n        agentId: resolvedAgentId,\n        threadId: resolvedThreadId,\n        labels,\n        isModalDefaultOpen,\n        children: [\n            transcriptionError && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                style: {\n                    position: \"absolute\",\n                    bottom: \"100px\",\n                    left: \"50%\",\n                    transform: \"translateX(-50%)\",\n                    backgroundColor: \"#ef4444\",\n                    color: \"white\",\n                    padding: \"8px 16px\",\n                    borderRadius: \"8px\",\n                    fontSize: \"14px\",\n                    zIndex: 50\n                },\n                children: transcriptionError\n            }),\n            RenderedChatView\n        ]\n    });\n}\n((CopilotChat2)=>{\n    CopilotChat2.View = CopilotChatView;\n})(CopilotChat || (CopilotChat = {}));\n// src/components/chat/CopilotChatToggleButton.tsx\n\n\n\nvar DefaultOpenIcon = ({ className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_MessageCircle_X_lucide_react__WEBPACK_IMPORTED_MODULE_35__[\"default\"], {\n        className: cn(\"h-6 w-6\", className),\n        strokeWidth: 1.75,\n        fill: \"currentColor\",\n        ...props\n    });\nvar DefaultCloseIcon = ({ className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n        className: cn(\"h-6 w-6\", className),\n        strokeWidth: 1.75,\n        ...props\n    });\nDefaultOpenIcon.displayName = \"CopilotChatToggleButton.OpenIcon\";\nDefaultCloseIcon.displayName = \"CopilotChatToggleButton.CloseIcon\";\nvar ICON_TRANSITION_STYLE = Object.freeze({\n    transition: \"opacity 120ms ease-out, transform 260ms cubic-bezier(0.22, 1, 0.36, 1)\"\n});\nvar ICON_WRAPPER_BASE = \"pointer-events-none absolute inset-0 flex items-center justify-center will-change-transform\";\nvar BUTTON_BASE_CLASSES = cn(\"fixed bottom-6 right-6 z-[1100] flex h-14 w-14 items-center justify-center\", \"rounded-full border border-primary bg-primary text-primary-foreground\", \"shadow-sm transition-all duration-200 ease-out\", \"hover:scale-[1.04] hover:shadow-md\", \"cursor-pointer\", \"active:scale-[0.96]\", \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2 focus-visible:ring-offset-background\", \"disabled:pointer-events-none disabled:opacity-60\");\nvar CopilotChatToggleButton = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(function CopilotChatToggleButton2({ openIcon, closeIcon, className, ...buttonProps }, ref) {\n    const { onClick, type, disabled, ...restProps } = buttonProps;\n    const configuration = useCopilotChatConfiguration();\n    const labels = configuration?.labels ?? CopilotChatDefaultLabels;\n    const [fallbackOpen, setFallbackOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const isOpen = configuration?.isModalOpen ?? fallbackOpen;\n    const setModalOpen = configuration?.setModalOpen ?? setFallbackOpen;\n    const handleClick = (event)=>{\n        if (disabled) {\n            return;\n        }\n        if (onClick) {\n            onClick(event);\n        }\n        if (event.defaultPrevented) {\n            return;\n        }\n        const nextOpen = !isOpen;\n        setModalOpen(nextOpen);\n    };\n    const renderedOpenIcon = renderSlot(openIcon, DefaultOpenIcon, {\n        className: \"h-6 w-6\",\n        \"aria-hidden\": true,\n        focusable: false\n    });\n    const renderedCloseIcon = renderSlot(closeIcon, DefaultCloseIcon, {\n        className: \"h-6 w-6\",\n        \"aria-hidden\": true,\n        focusable: false\n    });\n    const openIconElement = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n        \"aria-hidden\": \"true\",\n        \"data-slot\": \"chat-toggle-button-open-icon\",\n        className: ICON_WRAPPER_BASE,\n        style: {\n            ...ICON_TRANSITION_STYLE,\n            opacity: isOpen ? 0 : 1,\n            transform: `scale(${isOpen ? 0.75 : 1}) rotate(${isOpen ? 90 : 0}deg)`\n        },\n        children: renderedOpenIcon\n    });\n    const closeIconElement = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n        \"aria-hidden\": \"true\",\n        \"data-slot\": \"chat-toggle-button-close-icon\",\n        className: ICON_WRAPPER_BASE,\n        style: {\n            ...ICON_TRANSITION_STYLE,\n            opacity: isOpen ? 1 : 0,\n            transform: `scale(${isOpen ? 1 : 0.75}) rotate(${isOpen ? 0 : -90}deg)`\n        },\n        children: renderedCloseIcon\n    });\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"button\", {\n        ref,\n        type: type ?? \"button\",\n        \"data-slot\": \"chat-toggle-button\",\n        \"data-state\": isOpen ? \"open\" : \"closed\",\n        className: cn(BUTTON_BASE_CLASSES, className),\n        \"aria-label\": isOpen ? labels.chatToggleCloseLabel : labels.chatToggleOpenLabel,\n        \"aria-pressed\": isOpen,\n        disabled,\n        onClick: handleClick,\n        ...restProps,\n        children: [\n            openIconElement,\n            closeIconElement\n        ]\n    });\n});\nCopilotChatToggleButton.displayName = \"CopilotChatToggleButton\";\nvar CopilotChatToggleButton_default = CopilotChatToggleButton;\n// src/components/chat/CopilotSidebarView.tsx\n\n// src/components/chat/CopilotModalHeader.tsx\n\n\n\nfunction CopilotModalHeader({ title, titleContent, closeButton, children, className, ...rest }) {\n    const configuration = useCopilotChatConfiguration();\n    const fallbackTitle = configuration?.labels.modalHeaderTitle ?? CopilotChatDefaultLabels.modalHeaderTitle;\n    const resolvedTitle = title ?? fallbackTitle;\n    const handleClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CopilotModalHeader.useCallback10[handleClose]\": ()=>{\n            configuration?.setModalOpen(false);\n        }\n    }[\"CopilotModalHeader.useCallback10[handleClose]\"], [\n        configuration\n    ]);\n    const BoundTitle = renderSlot(titleContent, CopilotModalHeader.Title, {\n        children: resolvedTitle\n    });\n    const BoundCloseButton = renderSlot(closeButton, CopilotModalHeader.CloseButton, {\n        onClick: handleClose\n    });\n    if (children) {\n        return children({\n            titleContent: BoundTitle,\n            closeButton: BoundCloseButton,\n            title: resolvedTitle,\n            ...rest\n        });\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"header\", {\n        \"data-slot\": \"copilot-modal-header\",\n        className: cn(\"flex items-center justify-between border-b border-border px-4 py-4\", \"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80\", className),\n        ...rest,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            className: \"flex w-full items-center gap-2\",\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"flex-1\",\n                    \"aria-hidden\": \"true\"\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"flex flex-1 justify-center text-center\",\n                    children: BoundTitle\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"flex flex-1 justify-end\",\n                    children: BoundCloseButton\n                })\n            ]\n        })\n    });\n}\nCopilotModalHeader.displayName = \"CopilotModalHeader\";\n((CopilotModalHeader2)=>{\n    CopilotModalHeader2.Title = ({ children, className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: cn(\"w-full text-base font-medium leading-none tracking-tight text-foreground\", className),\n            ...props,\n            children\n        });\n    CopilotModalHeader2.CloseButton = ({ className, ...props })=>/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"button\", {\n            type: \"button\",\n            className: cn(\"inline-flex size-8 items-center justify-center rounded-full text-muted-foreground transition cursor-pointer\", \"hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\", className),\n            \"aria-label\": \"Close\",\n            ...props,\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_barrel_optimize_names_ArrowUp_Check_Loader2_Mic_Plus_Square_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                className: \"h-4 w-4\",\n                \"aria-hidden\": \"true\"\n            })\n        });\n})(CopilotModalHeader || (CopilotModalHeader = {}));\nCopilotModalHeader.Title.displayName = \"CopilotModalHeader.Title\";\nCopilotModalHeader.CloseButton.displayName = \"CopilotModalHeader.CloseButton\";\n// src/components/chat/CopilotSidebarView.tsx\n\nvar DEFAULT_SIDEBAR_WIDTH = 480;\nvar SIDEBAR_TRANSITION_MS = 260;\nfunction CopilotSidebarView({ header, width, ...props }) {\n    const configuration = useCopilotChatConfiguration();\n    const isSidebarOpen = configuration?.isModalOpen ?? false;\n    const sidebarRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [sidebarWidth, setSidebarWidth] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(width ?? DEFAULT_SIDEBAR_WIDTH);\n    const widthToCss = (w)=>{\n        return typeof w === \"number\" ? `${w}px` : w;\n    };\n    const widthToMargin = (w)=>{\n        if (typeof w === \"number\") {\n            return `${w}px`;\n        }\n        return w;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotSidebarView.useEffect16\": ()=>{\n            if (width !== void 0) {\n                return;\n            }\n            if (true) {\n                return;\n            }\n            const element = sidebarRef.current;\n            if (!element) {\n                return;\n            }\n            const updateWidth = {\n                \"CopilotSidebarView.useEffect16.updateWidth\": ()=>{\n                    const rect = element.getBoundingClientRect();\n                    if (rect.width > 0) {\n                        setSidebarWidth(rect.width);\n                    }\n                }\n            }[\"CopilotSidebarView.useEffect16.updateWidth\"];\n            updateWidth();\n            if (typeof ResizeObserver !== \"undefined\") {\n                const observer = new ResizeObserver({\n                    \"CopilotSidebarView.useEffect16\": ()=>updateWidth()\n                }[\"CopilotSidebarView.useEffect16\"]);\n                observer.observe(element);\n                return ({\n                    \"CopilotSidebarView.useEffect16\": ()=>observer.disconnect()\n                })[\"CopilotSidebarView.useEffect16\"];\n            }\n            window.addEventListener(\"resize\", updateWidth);\n            return ({\n                \"CopilotSidebarView.useEffect16\": ()=>window.removeEventListener(\"resize\", updateWidth)\n            })[\"CopilotSidebarView.useEffect16\"];\n        }\n    }[\"CopilotSidebarView.useEffect16\"], [\n        width\n    ]);\n    const headerElement = renderSlot(header, CopilotModalHeader, {});\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n        children: [\n            isSidebarOpen && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"style\", {\n                dangerouslySetInnerHTML: {\n                    __html: `\n            @media (min-width: 768px) {\n              body {\n                margin-inline-end: ${widthToMargin(sidebarWidth)};\n                transition: margin-inline-end ${SIDEBAR_TRANSITION_MS}ms ease;\n              }\n            }`\n                }\n            }),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatToggleButton_default, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"aside\", {\n                ref: sidebarRef,\n                \"data-copilot-sidebar\": true,\n                className: cn(\"fixed right-0 top-0 z-[1200] flex\", // Height with dvh fallback and safe area support\n                \"h-[100vh] h-[100dvh] max-h-screen\", // Responsive width: full on mobile, custom on desktop\n                \"w-full\", \"border-l border-border bg-background text-foreground shadow-xl\", \"transition-transform duration-300 ease-out\", isSidebarOpen ? \"translate-x-0\" : \"translate-x-full pointer-events-none\"),\n                style: {\n                    // Use CSS custom property for responsive width\n                    [\"--sidebar-width\"]: widthToCss(sidebarWidth),\n                    // Safe area insets for iOS\n                    paddingTop: \"env(safe-area-inset-top)\",\n                    paddingBottom: \"env(safe-area-inset-bottom)\"\n                },\n                \"aria-hidden\": !isSidebarOpen,\n                \"aria-label\": \"Copilot chat sidebar\",\n                role: \"complementary\",\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                    className: \"flex h-full w-full flex-col overflow-hidden\",\n                    children: [\n                        headerElement,\n                        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                            className: \"flex-1 overflow-hidden\",\n                            \"data-sidebar-chat\": true,\n                            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatView_default, {\n                                ...props\n                            })\n                        })\n                    ]\n                })\n            })\n        ]\n    });\n}\nCopilotSidebarView.displayName = \"CopilotSidebarView\";\n((CopilotSidebarView2)=>{\n    CopilotSidebarView2.WelcomeScreen = ({ welcomeMessage, input, suggestionView, className, children, ...props })=>{\n        const BoundWelcomeMessage = renderSlot(welcomeMessage, CopilotChatView_default.WelcomeMessage, {});\n        if (children) {\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n                children: children({\n                    welcomeMessage: BoundWelcomeMessage,\n                    input,\n                    suggestionView,\n                    className,\n                    ...props\n                })\n            });\n        }\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            className: cn(\"h-full flex flex-col\", className),\n            ...props,\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"flex-1 flex flex-col items-center justify-center px-4\",\n                    children: BoundWelcomeMessage\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"px-8 pb-4\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                        className: \"max-w-3xl mx-auto\",\n                        children: [\n                            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                                className: \"mb-4 flex justify-center\",\n                                children: suggestionView\n                            }),\n                            input\n                        ]\n                    })\n                })\n            ]\n        });\n    };\n})(CopilotSidebarView || (CopilotSidebarView = {}));\n// src/components/chat/CopilotPopupView.tsx\n\n\nvar DEFAULT_POPUP_WIDTH = 420;\nvar DEFAULT_POPUP_HEIGHT = 560;\nvar dimensionToCss = (value, fallback)=>{\n    if (typeof value === \"number\" && Number.isFinite(value)) {\n        return `${value}px`;\n    }\n    if (typeof value === \"string\" && value.trim().length > 0) {\n        return value;\n    }\n    return `${fallback}px`;\n};\nfunction CopilotPopupView({ header, width, height, clickOutsideToClose, className, ...restProps }) {\n    const configuration = useCopilotChatConfiguration();\n    const isPopupOpen = configuration?.isModalOpen ?? false;\n    const setModalOpen = configuration?.setModalOpen;\n    const labels = configuration?.labels ?? CopilotChatDefaultLabels;\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isRendered, setIsRendered] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(isPopupOpen);\n    const [isAnimatingOut, setIsAnimatingOut] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotPopupView.useEffect17\": ()=>{\n            if (isPopupOpen) {\n                setIsRendered(true);\n                setIsAnimatingOut(false);\n                return;\n            }\n            if (!isRendered) {\n                return;\n            }\n            setIsAnimatingOut(true);\n            const timeout = setTimeout({\n                \"CopilotPopupView.useEffect17.timeout\": ()=>{\n                    setIsRendered(false);\n                    setIsAnimatingOut(false);\n                }\n            }[\"CopilotPopupView.useEffect17.timeout\"], 200);\n            return ({\n                \"CopilotPopupView.useEffect17\": ()=>clearTimeout(timeout)\n            })[\"CopilotPopupView.useEffect17\"];\n        }\n    }[\"CopilotPopupView.useEffect17\"], [\n        isPopupOpen,\n        isRendered\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotPopupView.useEffect17\": ()=>{\n            if (!isPopupOpen) {\n                return;\n            }\n            if (true) {\n                return;\n            }\n            const handleKeyDown = {\n                \"CopilotPopupView.useEffect17.handleKeyDown\": (event)=>{\n                    if (event.key === \"Escape\") {\n                        event.preventDefault();\n                        setModalOpen?.(false);\n                    }\n                }\n            }[\"CopilotPopupView.useEffect17.handleKeyDown\"];\n            window.addEventListener(\"keydown\", handleKeyDown);\n            return ({\n                \"CopilotPopupView.useEffect17\": ()=>window.removeEventListener(\"keydown\", handleKeyDown)\n            })[\"CopilotPopupView.useEffect17\"];\n        }\n    }[\"CopilotPopupView.useEffect17\"], [\n        isPopupOpen,\n        setModalOpen\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotPopupView.useEffect17\": ()=>{\n            if (!isPopupOpen) {\n                return;\n            }\n            const focusTimer = setTimeout({\n                \"CopilotPopupView.useEffect17.focusTimer\": ()=>{\n                    containerRef.current?.focus({\n                        preventScroll: true\n                    });\n                }\n            }[\"CopilotPopupView.useEffect17.focusTimer\"], 200);\n            return ({\n                \"CopilotPopupView.useEffect17\": ()=>clearTimeout(focusTimer)\n            })[\"CopilotPopupView.useEffect17\"];\n        }\n    }[\"CopilotPopupView.useEffect17\"], [\n        isPopupOpen\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CopilotPopupView.useEffect17\": ()=>{\n            if (!isPopupOpen || !clickOutsideToClose) {\n                return;\n            }\n            if (typeof document === \"undefined\") {\n                return;\n            }\n            const handlePointerDown = {\n                \"CopilotPopupView.useEffect17.handlePointerDown\": (event)=>{\n                    const target = event.target;\n                    if (!target) {\n                        return;\n                    }\n                    const container = containerRef.current;\n                    if (container?.contains(target)) {\n                        return;\n                    }\n                    const toggleButton = document.querySelector(\"[data-slot='chat-toggle-button']\");\n                    if (toggleButton && toggleButton.contains(target)) {\n                        return;\n                    }\n                    setModalOpen?.(false);\n                }\n            }[\"CopilotPopupView.useEffect17.handlePointerDown\"];\n            document.addEventListener(\"pointerdown\", handlePointerDown);\n            return ({\n                \"CopilotPopupView.useEffect17\": ()=>document.removeEventListener(\"pointerdown\", handlePointerDown)\n            })[\"CopilotPopupView.useEffect17\"];\n        }\n    }[\"CopilotPopupView.useEffect17\"], [\n        isPopupOpen,\n        clickOutsideToClose,\n        setModalOpen\n    ]);\n    const headerElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotPopupView.useMemo12[headerElement]\": ()=>renderSlot(header, CopilotModalHeader, {})\n    }[\"CopilotPopupView.useMemo12[headerElement]\"], [\n        header\n    ]);\n    const resolvedWidth = dimensionToCss(width, DEFAULT_POPUP_WIDTH);\n    const resolvedHeight = dimensionToCss(height, DEFAULT_POPUP_HEIGHT);\n    const popupStyle = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotPopupView.useMemo12[popupStyle]\": ()=>({\n                \"--copilot-popup-width\": resolvedWidth,\n                \"--copilot-popup-height\": resolvedHeight,\n                \"--copilot-popup-max-width\": \"calc(100vw - 3rem)\",\n                \"--copilot-popup-max-height\": \"calc(100dvh - 7.5rem)\",\n                paddingTop: \"env(safe-area-inset-top)\",\n                paddingBottom: \"env(safe-area-inset-bottom)\",\n                paddingLeft: \"env(safe-area-inset-left)\",\n                paddingRight: \"env(safe-area-inset-right)\"\n            })\n    }[\"CopilotPopupView.useMemo12[popupStyle]\"], [\n        resolvedHeight,\n        resolvedWidth\n    ]);\n    const popupAnimationClass = isPopupOpen && !isAnimatingOut ? \"pointer-events-auto translate-y-0 opacity-100 md:scale-100\" : \"pointer-events-none translate-y-4 opacity-0 md:translate-y-5 md:scale-[0.95]\";\n    const popupContent = isRendered ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n        className: cn(\"fixed inset-0 z-[1200] flex max-w-full flex-col items-stretch\", \"md:inset-auto md:bottom-24 md:right-6 md:items-end md:gap-4\"),\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            ref: containerRef,\n            tabIndex: -1,\n            role: \"dialog\",\n            \"aria-label\": labels.modalHeaderTitle,\n            \"data-copilot-popup\": true,\n            className: cn(\"relative flex h-full w-full flex-col overflow-hidden bg-background text-foreground\", \"origin-bottom focus:outline-none transform-gpu transition-transform transition-opacity duration-200 ease-out\", \"md:transition-transform md:transition-opacity\", \"rounded-none border border-border/0 shadow-none ring-0\", \"md:h-[var(--copilot-popup-height)] md:w-[var(--copilot-popup-width)]\", \"md:max-h-[var(--copilot-popup-max-height)] md:max-w-[var(--copilot-popup-max-width)]\", \"md:origin-bottom-right md:rounded-2xl md:border-border md:shadow-xl md:ring-1 md:ring-border/40\", popupAnimationClass),\n            style: popupStyle,\n            children: [\n                headerElement,\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"flex-1 overflow-hidden\",\n                    \"data-popup-chat\": true,\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatView_default, {\n                        ...restProps,\n                        className: cn(\"h-full min-h-0\", className)\n                    })\n                })\n            ]\n        })\n    }) : null;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n        children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChatToggleButton_default, {}),\n            popupContent\n        ]\n    });\n}\nCopilotPopupView.displayName = \"CopilotPopupView\";\n((CopilotPopupView2)=>{\n    CopilotPopupView2.WelcomeScreen = ({ welcomeMessage, input, suggestionView, className, children, ...props })=>{\n        const BoundWelcomeMessage = renderSlot(welcomeMessage, CopilotChatView_default.WelcomeMessage, {});\n        if (children) {\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n                children: children({\n                    welcomeMessage: BoundWelcomeMessage,\n                    input,\n                    suggestionView,\n                    className,\n                    ...props\n                })\n            });\n        }\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n            className: cn(\"h-full flex flex-col\", className),\n            ...props,\n            children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"flex-1 flex flex-col items-center justify-center px-4\",\n                    children: BoundWelcomeMessage\n                }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                    className: \"px-6 pb-4\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                        className: \"max-w-3xl mx-auto\",\n                        children: [\n                            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                                className: \"mb-4 flex justify-center\",\n                                children: suggestionView\n                            }),\n                            input\n                        ]\n                    })\n                })\n            ]\n        });\n    };\n})(CopilotPopupView || (CopilotPopupView = {}));\nvar CopilotPopupView_default = CopilotPopupView;\n// src/components/chat/CopilotSidebar.tsx\n\n\nfunction CopilotSidebar({ header, defaultOpen, width, ...chatProps }) {\n    const SidebarViewOverride = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotSidebar.useMemo13[SidebarViewOverride]\": ()=>{\n            const Component = {\n                \"CopilotSidebar.useMemo13[SidebarViewOverride].Component\": (viewProps)=>{\n                    const { header: viewHeader, width: viewWidth, ...restProps } = viewProps;\n                    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotSidebarView, {\n                        ...restProps,\n                        header: header ?? viewHeader,\n                        width: width ?? viewWidth\n                    });\n                }\n            }[\"CopilotSidebar.useMemo13[SidebarViewOverride].Component\"];\n            return Object.assign(Component, CopilotChatView_default);\n        }\n    }[\"CopilotSidebar.useMemo13[SidebarViewOverride]\"], [\n        header,\n        width\n    ]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChat, {\n        welcomeScreen: CopilotSidebarView.WelcomeScreen,\n        ...chatProps,\n        chatView: SidebarViewOverride,\n        isModalDefaultOpen: defaultOpen\n    });\n}\nCopilotSidebar.displayName = \"CopilotSidebar\";\n// src/components/chat/CopilotPopup.tsx\n\n\nfunction CopilotPopup({ header, defaultOpen, width, height, clickOutsideToClose, ...chatProps }) {\n    const PopupViewOverride = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CopilotPopup.useMemo14[PopupViewOverride]\": ()=>{\n            const Component = {\n                \"CopilotPopup.useMemo14[PopupViewOverride].Component\": (viewProps)=>{\n                    const { header: viewHeader, width: viewWidth, height: viewHeight, clickOutsideToClose: viewClickOutsideToClose, ...restProps } = viewProps;\n                    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotPopupView_default, {\n                        ...restProps,\n                        header: header ?? viewHeader,\n                        width: width ?? viewWidth,\n                        height: height ?? viewHeight,\n                        clickOutsideToClose: clickOutsideToClose ?? viewClickOutsideToClose\n                    });\n                }\n            }[\"CopilotPopup.useMemo14[PopupViewOverride].Component\"];\n            return Object.assign(Component, CopilotChatView_default);\n        }\n    }[\"CopilotPopup.useMemo14[PopupViewOverride]\"], [\n        clickOutsideToClose,\n        header,\n        height,\n        width\n    ]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CopilotChat, {\n        welcomeScreen: CopilotPopupView_default.WelcomeScreen,\n        ...chatProps,\n        chatView: PopupViewOverride,\n        isModalDefaultOpen: defaultOpen\n    });\n}\nCopilotPopup.displayName = \"CopilotPopup\";\n// src/types/defineToolCallRenderer.ts\n\nfunction defineToolCallRenderer(def) {\n    const argsSchema = def.name === \"*\" && !def.args ? zod__WEBPACK_IMPORTED_MODULE_22__.any() : def.args;\n    return {\n        name: def.name,\n        args: argsSchema,\n        render: def.render,\n        ...def.agentId ? {\n            agentId: def.agentId\n        } : {}\n    };\n}\n// src/components/WildcardToolCallRender.tsx\n\n\nvar WildcardToolCallRender = defineToolCallRenderer({\n    name: \"*\",\n    render: ({ args, result, name, status })=>{\n        const [isExpanded, setIsExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n        const statusString = String(status);\n        const isActive = statusString === \"inProgress\" || statusString === \"executing\";\n        const isComplete = statusString === \"complete\";\n        const statusStyles = isActive ? \"bg-amber-100 text-amber-800 dark:bg-amber-500/15 dark:text-amber-400\" : isComplete ? \"bg-emerald-100 text-emerald-800 dark:bg-emerald-500/15 dark:text-emerald-400\" : \"bg-zinc-100 text-zinc-800 dark:bg-zinc-700/40 dark:text-zinc-300\";\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n            className: \"mt-2 pb-2\",\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                className: \"rounded-xl border border-zinc-200/60 dark:border-zinc-800/60 bg-white/70 dark:bg-zinc-900/50 shadow-sm backdrop-blur p-4\",\n                children: [\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                        className: \"flex items-center justify-between gap-3 cursor-pointer\",\n                        onClick: ()=>setIsExpanded(!isExpanded),\n                        children: [\n                            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                                className: \"flex items-center gap-2 min-w-0\",\n                                children: [\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"svg\", {\n                                        className: `h-4 w-4 text-zinc-500 dark:text-zinc-400 transition-transform ${isExpanded ? \"rotate-90\" : \"\"}`,\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        strokeWidth: 2,\n                                        stroke: \"currentColor\",\n                                        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            d: \"M8.25 4.5l7.5 7.5-7.5 7.5\"\n                                        })\n                                    }),\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n                                        className: \"inline-block h-2 w-2 rounded-full bg-blue-500\"\n                                    }),\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n                                        className: \"truncate text-sm font-medium text-zinc-900 dark:text-zinc-100\",\n                                        children: name\n                                    })\n                                ]\n                            }),\n                            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n                                className: `inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${statusStyles}`,\n                                children: String(status)\n                            })\n                        ]\n                    }),\n                    isExpanded && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                        className: \"mt-3 grid gap-4\",\n                        children: [\n                            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                                children: [\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                                        className: \"text-xs uppercase tracking-wide text-zinc-500 dark:text-zinc-400\",\n                                        children: \"Arguments\"\n                                    }),\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"pre\", {\n                                        className: \"mt-2 max-h-64 overflow-auto rounded-md bg-zinc-50 dark:bg-zinc-800/60 p-3 text-xs leading-relaxed text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap break-words\",\n                                        children: JSON.stringify(args ?? {}, null, 2)\n                                    })\n                                ]\n                            }),\n                            result !== void 0 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", {\n                                children: [\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {\n                                        className: \"text-xs uppercase tracking-wide text-zinc-500 dark:text-zinc-400\",\n                                        children: \"Result\"\n                                    }),\n                                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"pre\", {\n                                        className: \"mt-2 max-h-64 overflow-auto rounded-md bg-zinc-50 dark:bg-zinc-800/60 p-3 text-xs leading-relaxed text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap break-words\",\n                                        children: typeof result === \"string\" ? result : JSON.stringify(result, null, 2)\n                                    })\n                                ]\n                            })\n                        ]\n                    })\n                ]\n            })\n        });\n    }\n});\n //# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3JlYWN0L2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1jOztBQ0tQO0FBQ2lCO0FBQ3NDOztBQ2JpQjtBQUNsQztBQTJHekM7QUF4R0csSUFBTSwyQkFBMkI7SUFDdEMsc0JBQXNCO0lBQ3RCLDRDQUE0QztJQUM1Qyw2Q0FBNkM7SUFDN0MsNkNBQTZDO0lBQzdDLGdDQUFnQztJQUNoQyxrQ0FBa0M7SUFDbEMsc0NBQXNDO0lBQ3RDLDRDQUE0QztJQUM1Qyx5Q0FBeUM7SUFDekMsc0NBQXNDO0lBQ3RDLHdDQUF3QztJQUN4Qyx1Q0FBdUM7SUFDdkMsd0NBQXdDO0lBQ3hDLG9DQUFvQztJQUNwQyxvQ0FBb0M7SUFDcEMsb0JBQW9CO0lBQ3BCLHFCQUFxQjtJQUNyQixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLG9CQUFvQjtBQUN0QjtBQWVBLElBQU0seUNBQ0osb0RBQWEsQ0FBdUMsSUFBSTtBQVluRCxJQUFNLG1DQUVULENBQUMsRUFBRSxVQUFVLFFBQVEsU0FBUyxVQUFVLG1CQUFtQjtJQUM3RCxNQUFNLGVBQWUsaURBQVUsQ0FBQyx3QkFBd0I7SUFFeEQsTUFBTSxlQUFrQyw4Q0FBTztrRUFDN0MsS0FBTztnQkFDTCxHQUFHO2dCQUNILEdBQUksY0FBYyxVQUFVLENBQUM7Z0JBQzdCLEdBQUksVUFBVSxDQUFDO2FBQ2pCO2lFQUNBO1FBQUM7UUFBUSxjQUFjLE1BQU07S0FBQTtJQUcvQixNQUFNLGtCQUFrQixXQUFXLGNBQWMsV0FBVyxvRUFBZ0I7SUFFNUUsTUFBTSxtQkFBbUIsOENBQU87c0VBQUM7WUFDL0IsSUFBSSxV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RUFBQUMsQ0FBQztnQ0FDQztvQ0FBQSxzRUFBQUQsQ0FBQzt3Q0FBSSxXQUFVO3dDQUFtRTtvQ0FBQSxDQUVsRjtvQ0FDQSxzRUFBQUEsQ0FBQzt3Q0FBSSxXQUFVO3dDQUNaLGlCQUFPLFdBQVcsV0FDZixTQUNBLEtBQUssVUFBVSxRQUFRLE1BQU0sQ0FBQztvQ0FBQSxDQUNwQztpQ0FBQTs0QkFBQSxDQUNGO3lCQUFBO29CQUFBLENBRUo7aUJBQUE7WUFBQSxDQUVKO1FBQUEsQ0FDRjtJQUVKO0FBQ0YsQ0FBQyIsInNvdXJjZXMiOlsiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2luZGV4LnRzIiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2NvbXBvbmVudHMvY2hhdC9Db3BpbG90Q2hhdElucHV0LnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXIudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2NvbXBvbmVudHMvdWkvYnV0dG9uLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9saWIvdXRpbHMudHMiLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy91aS90b29sdGlwLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL3VpL2Ryb3Bkb3duLW1lbnUudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2NvbXBvbmVudHMvY2hhdC9Db3BpbG90Q2hhdEF1ZGlvUmVjb3JkZXIudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2xpYi9zbG90cy50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy9jaGF0L0NvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvaG9va3MvdXNlLXJlbmRlci10b29sLWNhbGwudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL3Byb3ZpZGVycy9Db3BpbG90S2l0UHJvdmlkZXIudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2xpYi9yZWFjdC1jb3JlLnRzIiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2NvbXBvbmVudHMvQ29waWxvdEtpdEluc3BlY3Rvci50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy9NQ1BBcHBzQWN0aXZpdHlSZW5kZXJlci50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvaG9va3MvdXNlLXJlbmRlci1jdXN0b20tbWVzc2FnZXMudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2hvb2tzL3VzZS1yZW5kZXItYWN0aXZpdHktbWVzc2FnZS50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvaG9va3MvdXNlLWZyb250ZW5kLXRvb2wudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2hvb2tzL3VzZS1odW1hbi1pbi10aGUtbG9vcC50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvaG9va3MvdXNlLWFnZW50LnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9ob29rcy91c2UtYWdlbnQtY29udGV4dC50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvaG9va3MvdXNlLXN1Z2dlc3Rpb25zLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9ob29rcy91c2UtY29uZmlndXJlLXN1Z2dlc3Rpb25zLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL2NoYXQvQ29waWxvdENoYXRUb29sQ2FsbHNWaWV3LnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL2NoYXQvQ29waWxvdENoYXRVc2VyTWVzc2FnZS50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy9jaGF0L0NvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGwudHN4IiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2NvbXBvbmVudHMvY2hhdC9Db3BpbG90Q2hhdFN1Z2dlc3Rpb25WaWV3LnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL2NoYXQvQ29waWxvdENoYXRNZXNzYWdlVmlldy50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy9jaGF0L0NvcGlsb3RDaGF0Vmlldy50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvaG9va3MvdXNlLWtleWJvYXJkLWhlaWdodC50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy9jaGF0L0NvcGlsb3RDaGF0LnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9saWIvdHJhbnNjcmlwdGlvbi1jbGllbnQudHMiLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy9jaGF0L0NvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL2NoYXQvQ29waWxvdFNpZGViYXJWaWV3LnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL2NoYXQvQ29waWxvdE1vZGFsSGVhZGVyLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL2NoYXQvQ29waWxvdFBvcHVwVmlldy50c3giLCIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy9zcmMvY29tcG9uZW50cy9jaGF0L0NvcGlsb3RTaWRlYmFyLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy9jb21wb25lbnRzL2NoYXQvQ29waWxvdFBvcHVwLnRzeCIsIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3NyYy90eXBlcy9kZWZpbmVUb29sQ2FsbFJlbmRlcmVyLnRzIiwiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvc3JjL2NvbXBvbmVudHMvV2lsZGNhcmRUb29sQ2FsbFJlbmRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbi8vIFJlLWV4cG9ydCBBRy1VSSBydW50aW1lIGFuZCB0eXBlcyB0byBwcm92aWRlIGEgc2luZ2xlIGltcG9ydCBzdXJmYWNlXG4vLyBUaGlzIGhlbHBzIGF2b2lkIHZlcnNpb24gbWlzbWF0Y2hlcyBieSBsZXR0aW5nIGFwcHMgaW1wb3J0IGV2ZXJ5dGhpbmcgZnJvbSAnQGNvcGlsb3RraXRuZXh0L3JlYWN0J1xuLy8gTm90ZTogQGFnLXVpL2NsaWVudCBhbHJlYWR5IHJlLWV4cG9ydHMgZXZlcnl0aGluZyBmcm9tIEBhZy11aS9jb3JlLCBzbyB3ZSBvbmx5IGV4cG9ydCBmcm9tIGNsaWVudFxuLy8gdG8gYXZvaWQgY29uZmxpY3Rpbmcgc3RhciBleHBvcnRzIGR1cmluZyB3ZWJwYWNrIGJ1aWxkc1xuZXhwb3J0ICogZnJvbSBcIkBhZy11aS9jbGllbnRcIjtcblxuLy8gUmVhY3QgY29tcG9uZW50cyBhbmQgaG9va3MgZm9yIENvcGlsb3RLaXQyXG5leHBvcnQgKiBmcm9tIFwiLi9jb21wb25lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9ob29rc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcHJvdmlkZXJzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90eXBlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbGliL3JlYWN0LWNvcmVcIjtcbiIsImltcG9ydCBSZWFjdCwge1xuICB1c2VTdGF0ZSxcbiAgdXNlUmVmLFxuICBLZXlib2FyZEV2ZW50LFxuICBDaGFuZ2VFdmVudCxcbiAgdXNlRWZmZWN0LFxuICB1c2VMYXlvdXRFZmZlY3QsXG4gIGZvcndhcmRSZWYsXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUsXG4gIHVzZUNhbGxiYWNrLFxuICB1c2VNZW1vLFxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHR3TWVyZ2UgfSBmcm9tIFwidGFpbHdpbmQtbWVyZ2VcIjtcbmltcG9ydCB7IFBsdXMsIE1pYywgQXJyb3dVcCwgWCwgQ2hlY2ssIFNxdWFyZSwgTG9hZGVyMiB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcblxuaW1wb3J0IHtcbiAgQ29waWxvdENoYXRMYWJlbHMsXG4gIHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbixcbiAgQ29waWxvdENoYXREZWZhdWx0TGFiZWxzLFxufSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBUb29sdGlwLCBUb29sdGlwQ29udGVudCwgVG9vbHRpcFRyaWdnZXIgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3Rvb2x0aXBcIjtcbmltcG9ydCB7XG4gIERyb3Bkb3duTWVudSxcbiAgRHJvcGRvd25NZW51VHJpZ2dlcixcbiAgRHJvcGRvd25NZW51Q29udGVudCxcbiAgRHJvcGRvd25NZW51SXRlbSxcbiAgRHJvcGRvd25NZW51U3ViLFxuICBEcm9wZG93bk1lbnVTdWJUcmlnZ2VyLFxuICBEcm9wZG93bk1lbnVTdWJDb250ZW50LFxuICBEcm9wZG93bk1lbnVTZXBhcmF0b3IsXG59IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvZHJvcGRvd24tbWVudVwiO1xuXG5pbXBvcnQgeyBDb3BpbG90Q2hhdEF1ZGlvUmVjb3JkZXIgfSBmcm9tIFwiLi9Db3BpbG90Q2hhdEF1ZGlvUmVjb3JkZXJcIjtcbmltcG9ydCB7IHJlbmRlclNsb3QsIFdpdGhTbG90cyB9IGZyb20gXCJAL2xpYi9zbG90c1wiO1xuXG5leHBvcnQgdHlwZSBDb3BpbG90Q2hhdElucHV0TW9kZSA9IFwiaW5wdXRcIiB8IFwidHJhbnNjcmliZVwiIHwgXCJwcm9jZXNzaW5nXCI7XG5cbmV4cG9ydCB0eXBlIFRvb2xzTWVudUl0ZW0gPSB7XG4gIGxhYmVsOiBzdHJpbmc7XG59ICYgKFxuICB8IHtcbiAgICAgIGFjdGlvbjogKCkgPT4gdm9pZDtcbiAgICAgIGl0ZW1zPzogbmV2ZXI7XG4gICAgfVxuICB8IHtcbiAgICAgIGFjdGlvbj86IG5ldmVyO1xuICAgICAgaXRlbXM6IChUb29sc01lbnVJdGVtIHwgXCItXCIpW107XG4gICAgfVxuKTtcblxudHlwZSBDb3BpbG90Q2hhdElucHV0U2xvdHMgPSB7XG4gIHRleHRBcmVhOiB0eXBlb2YgQ29waWxvdENoYXRJbnB1dC5UZXh0QXJlYTtcbiAgc2VuZEJ1dHRvbjogdHlwZW9mIENvcGlsb3RDaGF0SW5wdXQuU2VuZEJ1dHRvbjtcbiAgc3RhcnRUcmFuc2NyaWJlQnV0dG9uOiB0eXBlb2YgQ29waWxvdENoYXRJbnB1dC5TdGFydFRyYW5zY3JpYmVCdXR0b247XG4gIGNhbmNlbFRyYW5zY3JpYmVCdXR0b246IHR5cGVvZiBDb3BpbG90Q2hhdElucHV0LkNhbmNlbFRyYW5zY3JpYmVCdXR0b247XG4gIGZpbmlzaFRyYW5zY3JpYmVCdXR0b246IHR5cGVvZiBDb3BpbG90Q2hhdElucHV0LkZpbmlzaFRyYW5zY3JpYmVCdXR0b247XG4gIGFkZE1lbnVCdXR0b246IHR5cGVvZiBDb3BpbG90Q2hhdElucHV0LkFkZE1lbnVCdXR0b247XG4gIGF1ZGlvUmVjb3JkZXI6IHR5cGVvZiBDb3BpbG90Q2hhdEF1ZGlvUmVjb3JkZXI7XG59O1xuXG50eXBlIENvcGlsb3RDaGF0SW5wdXRSZXN0UHJvcHMgPSB7XG4gIG1vZGU/OiBDb3BpbG90Q2hhdElucHV0TW9kZTtcbiAgdG9vbHNNZW51PzogKFRvb2xzTWVudUl0ZW0gfCBcIi1cIilbXTtcbiAgYXV0b0ZvY3VzPzogYm9vbGVhbjtcbiAgb25TdWJtaXRNZXNzYWdlPzogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uU3RvcD86ICgpID0+IHZvaWQ7XG4gIGlzUnVubmluZz86IGJvb2xlYW47XG4gIG9uU3RhcnRUcmFuc2NyaWJlPzogKCkgPT4gdm9pZDtcbiAgb25DYW5jZWxUcmFuc2NyaWJlPzogKCkgPT4gdm9pZDtcbiAgb25GaW5pc2hUcmFuc2NyaWJlPzogKCkgPT4gdm9pZDtcbiAgb25GaW5pc2hUcmFuc2NyaWJlV2l0aEF1ZGlvPzogKGF1ZGlvQmxvYjogQmxvYikgPT4gUHJvbWlzZTx2b2lkPjtcbiAgb25BZGRGaWxlPzogKCkgPT4gdm9pZDtcbiAgdmFsdWU/OiBzdHJpbmc7XG4gIG9uQ2hhbmdlPzogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG59ICYgT21pdDxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4sIFwib25DaGFuZ2VcIj47XG5cbnR5cGUgQ29waWxvdENoYXRJbnB1dEJhc2VQcm9wcyA9IFdpdGhTbG90czxDb3BpbG90Q2hhdElucHV0U2xvdHMsIENvcGlsb3RDaGF0SW5wdXRSZXN0UHJvcHM+O1xuXG50eXBlIENvcGlsb3RDaGF0SW5wdXRDaGlsZHJlbkFyZ3MgPSBDb3BpbG90Q2hhdElucHV0QmFzZVByb3BzIGV4dGVuZHMgeyBjaGlsZHJlbj86IGluZmVyIEMgfVxuICA/IEMgZXh0ZW5kcyAocHJvcHM6IGluZmVyIFApID0+IFJlYWN0LlJlYWN0Tm9kZVxuICAgID8gUFxuICAgIDogbmV2ZXJcbiAgOiBuZXZlcjtcblxuZXhwb3J0IHR5cGUgQ29waWxvdENoYXRJbnB1dFByb3BzID0gT21pdDxDb3BpbG90Q2hhdElucHV0QmFzZVByb3BzLCBcImNoaWxkcmVuXCI+ICYge1xuICBjaGlsZHJlbj86IChwcm9wczogQ29waWxvdENoYXRJbnB1dENoaWxkcmVuQXJncykgPT4gUmVhY3QuUmVhY3ROb2RlO1xufTtcblxuY29uc3QgU0xBU0hfTUVOVV9NQVhfVklTSUJMRV9JVEVNUyA9IDU7XG5jb25zdCBTTEFTSF9NRU5VX0lURU1fSEVJR0hUX1BYID0gNDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBDb3BpbG90Q2hhdElucHV0KHtcbiAgbW9kZSA9IFwiaW5wdXRcIixcbiAgb25TdWJtaXRNZXNzYWdlLFxuICBvblN0b3AsXG4gIGlzUnVubmluZyA9IGZhbHNlLFxuICBvblN0YXJ0VHJhbnNjcmliZSxcbiAgb25DYW5jZWxUcmFuc2NyaWJlLFxuICBvbkZpbmlzaFRyYW5zY3JpYmUsXG4gIG9uRmluaXNoVHJhbnNjcmliZVdpdGhBdWRpbyxcbiAgb25BZGRGaWxlLFxuICBvbkNoYW5nZSxcbiAgdmFsdWUsXG4gIHRvb2xzTWVudSxcbiAgYXV0b0ZvY3VzID0gdHJ1ZSxcbiAgdGV4dEFyZWEsXG4gIHNlbmRCdXR0b24sXG4gIHN0YXJ0VHJhbnNjcmliZUJ1dHRvbixcbiAgY2FuY2VsVHJhbnNjcmliZUJ1dHRvbixcbiAgZmluaXNoVHJhbnNjcmliZUJ1dHRvbixcbiAgYWRkTWVudUJ1dHRvbixcbiAgYXVkaW9SZWNvcmRlcixcbiAgY2hpbGRyZW4sXG4gIGNsYXNzTmFtZSxcbiAgLi4ucHJvcHNcbn06IENvcGlsb3RDaGF0SW5wdXRQcm9wcykge1xuICBjb25zdCBpc0NvbnRyb2xsZWQgPSB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xuICBjb25zdCBbaW50ZXJuYWxWYWx1ZSwgc2V0SW50ZXJuYWxWYWx1ZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCgpID0+IHZhbHVlID8/IFwiXCIpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc0NvbnRyb2xsZWQgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2V0SW50ZXJuYWxWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9LCBbaXNDb250cm9sbGVkLCB2YWx1ZV0pO1xuXG4gIGNvbnN0IHJlc29sdmVkVmFsdWUgPSBpc0NvbnRyb2xsZWQgPyAodmFsdWUgPz8gXCJcIikgOiBpbnRlcm5hbFZhbHVlO1xuXG4gIGNvbnN0IFtsYXlvdXQsIHNldExheW91dF0gPSB1c2VTdGF0ZTxcImNvbXBhY3RcIiB8IFwiZXhwYW5kZWRcIj4oXCJjb21wYWN0XCIpO1xuICBjb25zdCBpZ25vcmVSZXNpemVSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCByZXNpemVFdmFsdWF0aW9uUmFmUmVmID0gdXNlUmVmPG51bWJlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBpc0V4cGFuZGVkID0gbW9kZSA9PT0gXCJpbnB1dFwiICYmIGxheW91dCA9PT0gXCJleHBhbmRlZFwiO1xuICBjb25zdCBbY29tbWFuZFF1ZXJ5LCBzZXRDb21tYW5kUXVlcnldID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzbGFzaEhpZ2hsaWdodEluZGV4LCBzZXRTbGFzaEhpZ2hsaWdodEluZGV4XSA9IHVzZVN0YXRlKDApO1xuXG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBncmlkUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgYWRkQnV0dG9uQ29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgYWN0aW9uc0NvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvUmVjb3JkZXJSZWYgPSB1c2VSZWY8UmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgQ29waWxvdENoYXRBdWRpb1JlY29yZGVyPj4obnVsbCk7XG4gIGNvbnN0IHNsYXNoTWVudVJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICBjb25zdCBsYWJlbHMgPSBjb25maWc/LmxhYmVscyA/PyBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG5cbiAgY29uc3QgcHJldmlvdXNNb2RhbFN0YXRlUmVmID0gdXNlUmVmPGJvb2xlYW4gfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIGNvbnN0IG1lYXN1cmVtZW50Q2FudmFzUmVmID0gdXNlUmVmPEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IG1lYXN1cmVtZW50c1JlZiA9IHVzZVJlZih7XG4gICAgc2luZ2xlTGluZUhlaWdodDogMCxcbiAgICBtYXhIZWlnaHQ6IDAsXG4gICAgcGFkZGluZ0xlZnQ6IDAsXG4gICAgcGFkZGluZ1JpZ2h0OiAwLFxuICB9KTtcblxuICBjb25zdCBjb21tYW5kSXRlbXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBlbnRyaWVzOiBUb29sc01lbnVJdGVtW10gPSBbXTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICBjb25zdCBwdXNoSXRlbSA9IChpdGVtOiBUb29sc01lbnVJdGVtIHwgXCItXCIpID0+IHtcbiAgICAgIGlmIChpdGVtID09PSBcIi1cIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLml0ZW1zICYmIGl0ZW0uaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IG5lc3RlZCBvZiBpdGVtLml0ZW1zKSB7XG4gICAgICAgICAgcHVzaEl0ZW0obmVzdGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghc2Vlbi5oYXMoaXRlbS5sYWJlbCkpIHtcbiAgICAgICAgc2Vlbi5hZGQoaXRlbS5sYWJlbCk7XG4gICAgICAgIGVudHJpZXMucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKG9uQWRkRmlsZSkge1xuICAgICAgcHVzaEl0ZW0oe1xuICAgICAgICBsYWJlbDogbGFiZWxzLmNoYXRJbnB1dFRvb2xiYXJBZGRCdXR0b25MYWJlbCxcbiAgICAgICAgYWN0aW9uOiBvbkFkZEZpbGUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodG9vbHNNZW51ICYmIHRvb2xzTWVudS5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdG9vbHNNZW51KSB7XG4gICAgICAgIHB1c2hJdGVtKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBlbnRyaWVzO1xuICB9LCBbbGFiZWxzLmNoYXRJbnB1dFRvb2xiYXJBZGRCdXR0b25MYWJlbCwgb25BZGRGaWxlLCB0b29sc01lbnVdKTtcblxuICBjb25zdCBmaWx0ZXJlZENvbW1hbmRzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGNvbW1hbmRRdWVyeSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFtdIGFzIFRvb2xzTWVudUl0ZW1bXTtcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdIGFzIFRvb2xzTWVudUl0ZW1bXTtcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeSA9IGNvbW1hbmRRdWVyeS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAocXVlcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gY29tbWFuZEl0ZW1zO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0c1dpdGg6IFRvb2xzTWVudUl0ZW1bXSA9IFtdO1xuICAgIGNvbnN0IGNvbnRhaW5zOiBUb29sc01lbnVJdGVtW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29tbWFuZEl0ZW1zKSB7XG4gICAgICBjb25zdCBsYWJlbCA9IGl0ZW0ubGFiZWwudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsYWJlbC5zdGFydHNXaXRoKHF1ZXJ5KSkge1xuICAgICAgICBzdGFydHNXaXRoLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2UgaWYgKGxhYmVsLmluY2x1ZGVzKHF1ZXJ5KSkge1xuICAgICAgICBjb250YWlucy5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbLi4uc3RhcnRzV2l0aCwgLi4uY29udGFpbnNdO1xuICB9LCBbY29tbWFuZEl0ZW1zLCBjb21tYW5kUXVlcnldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXV0b0ZvY3VzKSB7XG4gICAgICBwcmV2aW91c01vZGFsU3RhdGVSZWYuY3VycmVudCA9IGNvbmZpZz8uaXNNb2RhbE9wZW47XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZz8uaXNNb2RhbE9wZW4gJiYgIXByZXZpb3VzTW9kYWxTdGF0ZVJlZi5jdXJyZW50KSB7XG4gICAgICBpbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgIH1cblxuICAgIHByZXZpb3VzTW9kYWxTdGF0ZVJlZi5jdXJyZW50ID0gY29uZmlnPy5pc01vZGFsT3BlbjtcbiAgfSwgW2NvbmZpZz8uaXNNb2RhbE9wZW4sIGF1dG9Gb2N1c10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbW1hbmRJdGVtcy5sZW5ndGggPT09IDAgJiYgY29tbWFuZFF1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICBzZXRDb21tYW5kUXVlcnkobnVsbCk7XG4gICAgfVxuICB9LCBbY29tbWFuZEl0ZW1zLmxlbmd0aCwgY29tbWFuZFF1ZXJ5XSk7XG5cbiAgY29uc3QgcHJldmlvdXNDb21tYW5kUXVlcnlSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoXG4gICAgICBjb21tYW5kUXVlcnkgIT09IG51bGwgJiZcbiAgICAgIGNvbW1hbmRRdWVyeSAhPT0gcHJldmlvdXNDb21tYW5kUXVlcnlSZWYuY3VycmVudCAmJlxuICAgICAgZmlsdGVyZWRDb21tYW5kcy5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICBzZXRTbGFzaEhpZ2hsaWdodEluZGV4KDApO1xuICAgIH1cblxuICAgIHByZXZpb3VzQ29tbWFuZFF1ZXJ5UmVmLmN1cnJlbnQgPSBjb21tYW5kUXVlcnk7XG4gIH0sIFtjb21tYW5kUXVlcnksIGZpbHRlcmVkQ29tbWFuZHMubGVuZ3RoXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29tbWFuZFF1ZXJ5ID09PSBudWxsKSB7XG4gICAgICBzZXRTbGFzaEhpZ2hsaWdodEluZGV4KDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmaWx0ZXJlZENvbW1hbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2V0U2xhc2hIaWdobGlnaHRJbmRleCgtMSk7XG4gICAgfSBlbHNlIGlmIChzbGFzaEhpZ2hsaWdodEluZGV4IDwgMCB8fCBzbGFzaEhpZ2hsaWdodEluZGV4ID49IGZpbHRlcmVkQ29tbWFuZHMubGVuZ3RoKSB7XG4gICAgICBzZXRTbGFzaEhpZ2hsaWdodEluZGV4KDApO1xuICAgIH1cbiAgfSwgW2NvbW1hbmRRdWVyeSwgZmlsdGVyZWRDb21tYW5kcywgc2xhc2hIaWdobGlnaHRJbmRleF0pO1xuXG4gIC8vIEhhbmRsZSByZWNvcmRpbmcgYmFzZWQgb24gbW9kZSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcmVjb3JkZXIgPSBhdWRpb1JlY29yZGVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFyZWNvcmRlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBcInRyYW5zY3JpYmVcIikge1xuICAgICAgLy8gU3RhcnQgcmVjb3JkaW5nIHdoZW4gZW50ZXJpbmcgdHJhbnNjcmliZSBtb2RlXG4gICAgICByZWNvcmRlci5zdGFydCgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTdG9wIHJlY29yZGluZyB3aGVuIGxlYXZpbmcgdHJhbnNjcmliZSBtb2RlXG4gICAgICBpZiAocmVjb3JkZXIuc3RhdGUgPT09IFwicmVjb3JkaW5nXCIpIHtcbiAgICAgICAgcmVjb3JkZXIuc3RvcCgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW21vZGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtb2RlICE9PSBcImlucHV0XCIpIHtcbiAgICAgIHNldExheW91dChcImNvbXBhY3RcIik7XG4gICAgICBzZXRDb21tYW5kUXVlcnkobnVsbCk7XG4gICAgfVxuICB9LCBbbW9kZV0pO1xuXG4gIGNvbnN0IHVwZGF0ZVNsYXNoU3RhdGUgPSB1c2VDYWxsYmFjayhcbiAgICAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKGNvbW1hbmRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0Q29tbWFuZFF1ZXJ5KChwcmV2KSA9PiAocHJldiA9PT0gbnVsbCA/IHByZXYgOiBudWxsKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0TGluZSA9IHZhbHVlLnNwbGl0KC9cXHI/XFxuLywgMSlbMF0gPz8gXCJcIjtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBmaXJzdExpbmUuc2xpY2UoMSk7XG4gICAgICAgIHNldENvbW1hbmRRdWVyeSgocHJldikgPT4gKHByZXYgPT09IHF1ZXJ5ID8gcHJldiA6IHF1ZXJ5KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRDb21tYW5kUXVlcnkoKHByZXYpID0+IChwcmV2ID09PSBudWxsID8gcHJldiA6IG51bGwpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtjb21tYW5kSXRlbXMubGVuZ3RoXSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHVwZGF0ZVNsYXNoU3RhdGUocmVzb2x2ZWRWYWx1ZSk7XG4gIH0sIFtyZXNvbHZlZFZhbHVlLCB1cGRhdGVTbGFzaFN0YXRlXSk7XG5cbiAgLy8gSGFuZGxlcnNcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGU6IENoYW5nZUV2ZW50PEhUTUxUZXh0QXJlYUVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgbmV4dFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgaWYgKCFpc0NvbnRyb2xsZWQpIHtcbiAgICAgIHNldEludGVybmFsVmFsdWUobmV4dFZhbHVlKTtcbiAgICB9XG4gICAgb25DaGFuZ2U/LihuZXh0VmFsdWUpO1xuICAgIHVwZGF0ZVNsYXNoU3RhdGUobmV4dFZhbHVlKTtcbiAgfTtcblxuICBjb25zdCBjbGVhcklucHV0VmFsdWUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFpc0NvbnRyb2xsZWQpIHtcbiAgICAgIHNldEludGVybmFsVmFsdWUoXCJcIik7XG4gICAgfVxuXG4gICAgaWYgKG9uQ2hhbmdlKSB7XG4gICAgICBvbkNoYW5nZShcIlwiKTtcbiAgICB9XG4gIH0sIFtpc0NvbnRyb2xsZWQsIG9uQ2hhbmdlXSk7XG5cbiAgY29uc3QgcnVuQ29tbWFuZCA9IHVzZUNhbGxiYWNrKFxuICAgIChpdGVtOiBUb29sc01lbnVJdGVtKSA9PiB7XG4gICAgICBjbGVhcklucHV0VmFsdWUoKTtcblxuICAgICAgaXRlbS5hY3Rpb24/LigpO1xuXG4gICAgICBzZXRDb21tYW5kUXVlcnkobnVsbCk7XG4gICAgICBzZXRTbGFzaEhpZ2hsaWdodEluZGV4KDApO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbY2xlYXJJbnB1dFZhbHVlXSxcbiAgKTtcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQ8SFRNTFRleHRBcmVhRWxlbWVudD4pID0+IHtcbiAgICBpZiAoY29tbWFuZFF1ZXJ5ICE9PSBudWxsICYmIG1vZGUgPT09IFwiaW5wdXRcIikge1xuICAgICAgaWYgKGUua2V5ID09PSBcIkFycm93RG93blwiKSB7XG4gICAgICAgIGlmIChmaWx0ZXJlZENvbW1hbmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgc2V0U2xhc2hIaWdobGlnaHRJbmRleCgocHJldikgPT4ge1xuICAgICAgICAgICAgaWYgKGZpbHRlcmVkQ29tbWFuZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHByZXYgPT09IC0xID8gMCA6IChwcmV2ICsgMSkgJSBmaWx0ZXJlZENvbW1hbmRzLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGUua2V5ID09PSBcIkFycm93VXBcIikge1xuICAgICAgICBpZiAoZmlsdGVyZWRDb21tYW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHNldFNsYXNoSGlnaGxpZ2h0SW5kZXgoKHByZXYpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZENvbW1hbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmV2ID09PSAtMSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRDb21tYW5kcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZXYgPD0gMCA/IGZpbHRlcmVkQ29tbWFuZHMubGVuZ3RoIC0gMSA6IHByZXYgLSAxO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBzbGFzaEhpZ2hsaWdodEluZGV4ID49IDAgPyBmaWx0ZXJlZENvbW1hbmRzW3NsYXNoSGlnaGxpZ2h0SW5kZXhdIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgcnVuQ29tbWFuZChzZWxlY3RlZCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNldENvbW1hbmRRdWVyeShudWxsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoaXNQcm9jZXNzaW5nKSB7XG4gICAgICAgIG9uU3RvcD8uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZW5kKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNlbmQgPSAoKSA9PiB7XG4gICAgaWYgKCFvblN1Ym1pdE1lc3NhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdHJpbW1lZCA9IHJlc29sdmVkVmFsdWUudHJpbSgpO1xuICAgIGlmICghdHJpbW1lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9uU3VibWl0TWVzc2FnZSh0cmltbWVkKTtcblxuICAgIGlmICghaXNDb250cm9sbGVkKSB7XG4gICAgICBzZXRJbnRlcm5hbFZhbHVlKFwiXCIpO1xuICAgICAgb25DaGFuZ2U/LihcIlwiKTtcbiAgICB9XG5cbiAgICBpZiAoaW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgaW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBCb3VuZFRleHRBcmVhID0gcmVuZGVyU2xvdCh0ZXh0QXJlYSwgQ29waWxvdENoYXRJbnB1dC5UZXh0QXJlYSwge1xuICAgIHJlZjogaW5wdXRSZWYsXG4gICAgdmFsdWU6IHJlc29sdmVkVmFsdWUsXG4gICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSxcbiAgICBvbktleURvd246IGhhbmRsZUtleURvd24sXG4gICAgYXV0b0ZvY3VzOiBhdXRvRm9jdXMsXG4gICAgY2xhc3NOYW1lOiB0d01lcmdlKFxuICAgICAgXCJ3LWZ1bGwgcHktM1wiLFxuICAgICAgaXNFeHBhbmRlZCA/IFwicHgtNVwiIDogXCJwci01XCIsXG4gICAgKSxcbiAgfSk7XG5cbiAgY29uc3QgaXNQcm9jZXNzaW5nID0gbW9kZSAhPT0gXCJ0cmFuc2NyaWJlXCIgJiYgaXNSdW5uaW5nO1xuICBjb25zdCBjYW5TZW5kID0gcmVzb2x2ZWRWYWx1ZS50cmltKCkubGVuZ3RoID4gMCAmJiAhIW9uU3VibWl0TWVzc2FnZTtcbiAgY29uc3QgY2FuU3RvcCA9ICEhb25TdG9wO1xuXG4gIGNvbnN0IGhhbmRsZVNlbmRCdXR0b25DbGljayA9ICgpID0+IHtcbiAgICBpZiAoaXNQcm9jZXNzaW5nKSB7XG4gICAgICBvblN0b3A/LigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZW5kKCk7XG4gIH07XG5cbiAgY29uc3QgQm91bmRBdWRpb1JlY29yZGVyID0gcmVuZGVyU2xvdChhdWRpb1JlY29yZGVyLCBDb3BpbG90Q2hhdEF1ZGlvUmVjb3JkZXIsIHtcbiAgICByZWY6IGF1ZGlvUmVjb3JkZXJSZWYsXG4gIH0pO1xuXG4gIGNvbnN0IEJvdW5kU2VuZEJ1dHRvbiA9IHJlbmRlclNsb3Qoc2VuZEJ1dHRvbiwgQ29waWxvdENoYXRJbnB1dC5TZW5kQnV0dG9uLCB7XG4gICAgb25DbGljazogaGFuZGxlU2VuZEJ1dHRvbkNsaWNrLFxuICAgIGRpc2FibGVkOiBpc1Byb2Nlc3NpbmcgPyAhY2FuU3RvcCA6ICFjYW5TZW5kLFxuICAgIGNoaWxkcmVuOiBpc1Byb2Nlc3NpbmcgJiYgY2FuU3RvcCA/IDxTcXVhcmUgY2xhc3NOYW1lPVwic2l6ZS1bMThweF0gZmlsbC1jdXJyZW50XCIgLz4gOiB1bmRlZmluZWQsXG4gIH0pO1xuXG4gIGNvbnN0IEJvdW5kU3RhcnRUcmFuc2NyaWJlQnV0dG9uID0gcmVuZGVyU2xvdChzdGFydFRyYW5zY3JpYmVCdXR0b24sIENvcGlsb3RDaGF0SW5wdXQuU3RhcnRUcmFuc2NyaWJlQnV0dG9uLCB7XG4gICAgb25DbGljazogb25TdGFydFRyYW5zY3JpYmUsXG4gIH0pO1xuXG4gIGNvbnN0IEJvdW5kQ2FuY2VsVHJhbnNjcmliZUJ1dHRvbiA9IHJlbmRlclNsb3QoY2FuY2VsVHJhbnNjcmliZUJ1dHRvbiwgQ29waWxvdENoYXRJbnB1dC5DYW5jZWxUcmFuc2NyaWJlQnV0dG9uLCB7XG4gICAgb25DbGljazogb25DYW5jZWxUcmFuc2NyaWJlLFxuICB9KTtcblxuICAvLyBIYW5kbGVyIGZvciBmaW5pc2ggYnV0dG9uIC0gc3RvcHMgcmVjb3JkaW5nIGFuZCBwYXNzZXMgYXVkaW8gYmxvYlxuICBjb25zdCBoYW5kbGVGaW5pc2hUcmFuc2NyaWJlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlY29yZGVyID0gYXVkaW9SZWNvcmRlclJlZi5jdXJyZW50O1xuICAgIGlmIChyZWNvcmRlciAmJiByZWNvcmRlci5zdGF0ZSA9PT0gXCJyZWNvcmRpbmdcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gYXdhaXQgcmVjb3JkZXIuc3RvcCgpO1xuICAgICAgICBpZiAob25GaW5pc2hUcmFuc2NyaWJlV2l0aEF1ZGlvKSB7XG4gICAgICAgICAgYXdhaXQgb25GaW5pc2hUcmFuc2NyaWJlV2l0aEF1ZGlvKGF1ZGlvQmxvYik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc3RvcCByZWNvcmRpbmc6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQWx3YXlzIGNhbGwgdGhlIG9yaWdpbmFsIGhhbmRsZXIgdG8gcmVzZXQgbW9kZVxuICAgIG9uRmluaXNoVHJhbnNjcmliZT8uKCk7XG4gIH0sIFtvbkZpbmlzaFRyYW5zY3JpYmUsIG9uRmluaXNoVHJhbnNjcmliZVdpdGhBdWRpb10pO1xuXG4gIGNvbnN0IEJvdW5kRmluaXNoVHJhbnNjcmliZUJ1dHRvbiA9IHJlbmRlclNsb3QoZmluaXNoVHJhbnNjcmliZUJ1dHRvbiwgQ29waWxvdENoYXRJbnB1dC5GaW5pc2hUcmFuc2NyaWJlQnV0dG9uLCB7XG4gICAgb25DbGljazogaGFuZGxlRmluaXNoVHJhbnNjcmliZSxcbiAgfSk7XG5cbiAgY29uc3QgQm91bmRBZGRNZW51QnV0dG9uID0gcmVuZGVyU2xvdChhZGRNZW51QnV0dG9uLCBDb3BpbG90Q2hhdElucHV0LkFkZE1lbnVCdXR0b24sIHtcbiAgICBkaXNhYmxlZDogbW9kZSA9PT0gXCJ0cmFuc2NyaWJlXCIsXG4gICAgb25BZGRGaWxlLFxuICAgIHRvb2xzTWVudSxcbiAgfSk7XG5cbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgY29uc3QgY2hpbGRQcm9wcyA9IHtcbiAgICAgIHRleHRBcmVhOiBCb3VuZFRleHRBcmVhLFxuICAgICAgYXVkaW9SZWNvcmRlcjogQm91bmRBdWRpb1JlY29yZGVyLFxuICAgICAgc2VuZEJ1dHRvbjogQm91bmRTZW5kQnV0dG9uLFxuICAgICAgc3RhcnRUcmFuc2NyaWJlQnV0dG9uOiBCb3VuZFN0YXJ0VHJhbnNjcmliZUJ1dHRvbixcbiAgICAgIGNhbmNlbFRyYW5zY3JpYmVCdXR0b246IEJvdW5kQ2FuY2VsVHJhbnNjcmliZUJ1dHRvbixcbiAgICAgIGZpbmlzaFRyYW5zY3JpYmVCdXR0b246IEJvdW5kRmluaXNoVHJhbnNjcmliZUJ1dHRvbixcbiAgICAgIGFkZE1lbnVCdXR0b246IEJvdW5kQWRkTWVudUJ1dHRvbixcbiAgICAgIG9uU3VibWl0TWVzc2FnZSxcbiAgICAgIG9uU3RvcCxcbiAgICAgIGlzUnVubmluZyxcbiAgICAgIG9uU3RhcnRUcmFuc2NyaWJlLFxuICAgICAgb25DYW5jZWxUcmFuc2NyaWJlLFxuICAgICAgb25GaW5pc2hUcmFuc2NyaWJlLFxuICAgICAgb25BZGRGaWxlLFxuICAgICAgbW9kZSxcbiAgICAgIHRvb2xzTWVudSxcbiAgICAgIGF1dG9Gb2N1cyxcbiAgICB9IGFzIENvcGlsb3RDaGF0SW5wdXRDaGlsZHJlbkFyZ3M7XG5cbiAgICByZXR1cm4gPD57Y2hpbGRyZW4oY2hpbGRQcm9wcyl9PC8+O1xuICB9XG5cbiAgY29uc3QgaGFuZGxlQ29udGFpbmVyQ2xpY2sgPSAoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAvLyBEb24ndCBmb2N1cyBpZiBjbGlja2luZyBvbiBidXR0b25zIG9yIG90aGVyIGludGVyYWN0aXZlIGVsZW1lbnRzXG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHRhcmdldC50YWdOYW1lICE9PSBcIkJVVFRPTlwiICYmICF0YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKSAmJiBpbnB1dFJlZi5jdXJyZW50ICYmIG1vZGUgPT09IFwiaW5wdXRcIikge1xuICAgICAgaW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBlbnN1cmVNZWFzdXJlbWVudHMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dFJlZi5jdXJyZW50O1xuICAgIGlmICghdGV4dGFyZWEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gdGV4dGFyZWEudmFsdWU7XG4gICAgY29uc3QgcHJldmlvdXNIZWlnaHQgPSB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQ7XG5cbiAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBcImF1dG9cIjtcblxuICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0YXJlYSk7XG4gICAgY29uc3QgcGFkZGluZ0xlZnQgPSBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGUucGFkZGluZ0xlZnQpIHx8IDA7XG4gICAgY29uc3QgcGFkZGluZ1JpZ2h0ID0gcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLnBhZGRpbmdSaWdodCkgfHwgMDtcbiAgICBjb25zdCBwYWRkaW5nVG9wID0gcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLnBhZGRpbmdUb3ApIHx8IDA7XG4gICAgY29uc3QgcGFkZGluZ0JvdHRvbSA9IHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZS5wYWRkaW5nQm90dG9tKSB8fCAwO1xuXG4gICAgdGV4dGFyZWEudmFsdWUgPSBcIlwiO1xuICAgIGNvbnN0IHNpbmdsZUxpbmVIZWlnaHQgPSB0ZXh0YXJlYS5zY3JvbGxIZWlnaHQ7XG4gICAgdGV4dGFyZWEudmFsdWUgPSBwcmV2aW91c1ZhbHVlO1xuXG4gICAgY29uc3QgY29udGVudEhlaWdodCA9IHNpbmdsZUxpbmVIZWlnaHQgLSBwYWRkaW5nVG9wIC0gcGFkZGluZ0JvdHRvbTtcbiAgICBjb25zdCBtYXhIZWlnaHQgPSBjb250ZW50SGVpZ2h0ICogNSArIHBhZGRpbmdUb3AgKyBwYWRkaW5nQm90dG9tO1xuXG4gICAgbWVhc3VyZW1lbnRzUmVmLmN1cnJlbnQgPSB7XG4gICAgICBzaW5nbGVMaW5lSGVpZ2h0LFxuICAgICAgbWF4SGVpZ2h0LFxuICAgICAgcGFkZGluZ0xlZnQsXG4gICAgICBwYWRkaW5nUmlnaHQsXG4gICAgfTtcblxuICAgIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9IHByZXZpb3VzSGVpZ2h0O1xuICAgIHRleHRhcmVhLnN0eWxlLm1heEhlaWdodCA9IGAke21heEhlaWdodH1weGA7XG4gIH0sIFtdKTtcblxuICBjb25zdCBhZGp1c3RUZXh0YXJlYUhlaWdodCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGlucHV0UmVmLmN1cnJlbnQ7XG4gICAgaWYgKCF0ZXh0YXJlYSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKG1lYXN1cmVtZW50c1JlZi5jdXJyZW50LnNpbmdsZUxpbmVIZWlnaHQgPT09IDApIHtcbiAgICAgIGVuc3VyZU1lYXN1cmVtZW50cygpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbWF4SGVpZ2h0IH0gPSBtZWFzdXJlbWVudHNSZWYuY3VycmVudDtcbiAgICBpZiAobWF4SGVpZ2h0KSB7XG4gICAgICB0ZXh0YXJlYS5zdHlsZS5tYXhIZWlnaHQgPSBgJHttYXhIZWlnaHR9cHhgO1xuICAgIH1cblxuICAgIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xuICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHRleHRhcmVhLnNjcm9sbEhlaWdodDtcbiAgICBpZiAobWF4SGVpZ2h0KSB7XG4gICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtNYXRoLm1pbihzY3JvbGxIZWlnaHQsIG1heEhlaWdodCl9cHhgO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtzY3JvbGxIZWlnaHR9cHhgO1xuICAgIH1cblxuICAgIHJldHVybiBzY3JvbGxIZWlnaHQ7XG4gIH0sIFtlbnN1cmVNZWFzdXJlbWVudHNdKTtcblxuICBjb25zdCB1cGRhdGVMYXlvdXQgPSB1c2VDYWxsYmFjaygobmV4dExheW91dDogXCJjb21wYWN0XCIgfCBcImV4cGFuZGVkXCIpID0+IHtcbiAgICBzZXRMYXlvdXQoKHByZXYpID0+IHtcbiAgICAgIGlmIChwcmV2ID09PSBuZXh0TGF5b3V0KSB7XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfVxuICAgICAgaWdub3JlUmVzaXplUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHRMYXlvdXQ7XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBldmFsdWF0ZUxheW91dCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAobW9kZSAhPT0gXCJpbnB1dFwiKSB7XG4gICAgICB1cGRhdGVMYXlvdXQoXCJjb21wYWN0XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aW5kb3cubWF0Y2hNZWRpYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjb25zdCBpc01vYmlsZVZpZXdwb3J0ID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA3NjdweClcIikubWF0Y2hlcztcbiAgICAgIGlmIChpc01vYmlsZVZpZXdwb3J0KSB7XG4gICAgICAgIGVuc3VyZU1lYXN1cmVtZW50cygpO1xuICAgICAgICBhZGp1c3RUZXh0YXJlYUhlaWdodCgpO1xuICAgICAgICB1cGRhdGVMYXlvdXQoXCJleHBhbmRlZFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRleHRhcmVhID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICBjb25zdCBncmlkID0gZ3JpZFJlZi5jdXJyZW50O1xuICAgIGNvbnN0IGFkZENvbnRhaW5lciA9IGFkZEJ1dHRvbkNvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGNvbnN0IGFjdGlvbnNDb250YWluZXIgPSBhY3Rpb25zQ29udGFpbmVyUmVmLmN1cnJlbnQ7XG5cbiAgICBpZiAoIXRleHRhcmVhIHx8ICFncmlkIHx8ICFhZGRDb250YWluZXIgfHwgIWFjdGlvbnNDb250YWluZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobWVhc3VyZW1lbnRzUmVmLmN1cnJlbnQuc2luZ2xlTGluZUhlaWdodCA9PT0gMCkge1xuICAgICAgZW5zdXJlTWVhc3VyZW1lbnRzKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gYWRqdXN0VGV4dGFyZWFIZWlnaHQoKTtcbiAgICBjb25zdCBiYXNlbGluZSA9IG1lYXN1cmVtZW50c1JlZi5jdXJyZW50LnNpbmdsZUxpbmVIZWlnaHQ7XG4gICAgY29uc3QgaGFzRXhwbGljaXRCcmVhayA9IHJlc29sdmVkVmFsdWUuaW5jbHVkZXMoXCJcXG5cIik7XG4gICAgY29uc3QgcmVuZGVyZWRNdWx0aWxpbmUgPSBiYXNlbGluZSA+IDAgPyBzY3JvbGxIZWlnaHQgPiBiYXNlbGluZSArIDEgOiBmYWxzZTtcbiAgICBsZXQgc2hvdWxkRXhwYW5kID0gaGFzRXhwbGljaXRCcmVhayB8fCByZW5kZXJlZE11bHRpbGluZTtcblxuICAgIGlmICghc2hvdWxkRXhwYW5kKSB7XG4gICAgICBjb25zdCBncmlkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZ3JpZCk7XG4gICAgICBjb25zdCBwYWRkaW5nTGVmdCA9IHBhcnNlRmxvYXQoZ3JpZFN0eWxlcy5wYWRkaW5nTGVmdCkgfHwgMDtcbiAgICAgIGNvbnN0IHBhZGRpbmdSaWdodCA9IHBhcnNlRmxvYXQoZ3JpZFN0eWxlcy5wYWRkaW5nUmlnaHQpIHx8IDA7XG4gICAgICBjb25zdCBjb2x1bW5HYXAgPSBwYXJzZUZsb2F0KGdyaWRTdHlsZXMuY29sdW1uR2FwKSB8fCAwO1xuICAgICAgY29uc3QgZ3JpZEF2YWlsYWJsZVdpZHRoID0gZ3JpZC5jbGllbnRXaWR0aCAtIHBhZGRpbmdMZWZ0IC0gcGFkZGluZ1JpZ2h0O1xuXG4gICAgICBpZiAoZ3JpZEF2YWlsYWJsZVdpZHRoID4gMCkge1xuICAgICAgICBjb25zdCBhZGRXaWR0aCA9IGFkZENvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgY29uc3QgYWN0aW9uc1dpZHRoID0gYWN0aW9uc0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgY29uc3QgY29tcGFjdFdpZHRoID0gTWF0aC5tYXgoZ3JpZEF2YWlsYWJsZVdpZHRoIC0gYWRkV2lkdGggLSBhY3Rpb25zV2lkdGggLSBjb2x1bW5HYXAgKiAyLCAwKTtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSBtZWFzdXJlbWVudENhbnZhc1JlZi5jdXJyZW50ID8/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGlmICghbWVhc3VyZW1lbnRDYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgICAgIG1lYXN1cmVtZW50Q2FudmFzUmVmLmN1cnJlbnQgPSBjYW52YXM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICBjb25zdCB0ZXh0YXJlYVN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRleHRhcmVhKTtcbiAgICAgICAgICBjb25zdCBmb250ID1cbiAgICAgICAgICAgIHRleHRhcmVhU3R5bGVzLmZvbnQgfHxcbiAgICAgICAgICAgIGAke3RleHRhcmVhU3R5bGVzLmZvbnRTdHlsZX0gJHt0ZXh0YXJlYVN0eWxlcy5mb250VmFyaWFudH0gJHt0ZXh0YXJlYVN0eWxlcy5mb250V2VpZ2h0fSAke3RleHRhcmVhU3R5bGVzLmZvbnRTaXplfS8ke3RleHRhcmVhU3R5bGVzLmxpbmVIZWlnaHR9ICR7dGV4dGFyZWFTdHlsZXMuZm9udEZhbWlseX1gO1xuICAgICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XG5cbiAgICAgICAgICBjb25zdCBjb21wYWN0SW5uZXJXaWR0aCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgY29tcGFjdFdpZHRoIC0gKG1lYXN1cmVtZW50c1JlZi5jdXJyZW50LnBhZGRpbmdMZWZ0IHx8IDApIC0gKG1lYXN1cmVtZW50c1JlZi5jdXJyZW50LnBhZGRpbmdSaWdodCB8fCAwKSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChjb21wYWN0SW5uZXJXaWR0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gcmVzb2x2ZWRWYWx1ZS5sZW5ndGggPiAwID8gcmVzb2x2ZWRWYWx1ZS5zcGxpdChcIlxcblwiKSA6IFtcIlwiXTtcbiAgICAgICAgICAgIGxldCBsb25nZXN0V2lkdGggPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1ldHJpY3MgPSBjb250ZXh0Lm1lYXN1cmVUZXh0KGxpbmUgfHwgXCIgXCIpO1xuICAgICAgICAgICAgICBpZiAobWV0cmljcy53aWR0aCA+IGxvbmdlc3RXaWR0aCkge1xuICAgICAgICAgICAgICAgIGxvbmdlc3RXaWR0aCA9IG1ldHJpY3Mud2lkdGg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxvbmdlc3RXaWR0aCA+IGNvbXBhY3RJbm5lcldpZHRoKSB7XG4gICAgICAgICAgICAgIHNob3VsZEV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV4dExheW91dCA9IHNob3VsZEV4cGFuZCA/IFwiZXhwYW5kZWRcIiA6IFwiY29tcGFjdFwiO1xuICAgIHVwZGF0ZUxheW91dChuZXh0TGF5b3V0KTtcbiAgfSwgW2FkanVzdFRleHRhcmVhSGVpZ2h0LCBlbnN1cmVNZWFzdXJlbWVudHMsIG1vZGUsIHJlc29sdmVkVmFsdWUsIHVwZGF0ZUxheW91dF0pO1xuXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgZXZhbHVhdGVMYXlvdXQoKTtcbiAgfSwgW2V2YWx1YXRlTGF5b3V0XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dFJlZi5jdXJyZW50O1xuICAgIGNvbnN0IGdyaWQgPSBncmlkUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgYWRkQ29udGFpbmVyID0gYWRkQnV0dG9uQ29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgYWN0aW9uc0NvbnRhaW5lciA9IGFjdGlvbnNDb250YWluZXJSZWYuY3VycmVudDtcblxuICAgIGlmICghdGV4dGFyZWEgfHwgIWdyaWQgfHwgIWFkZENvbnRhaW5lciB8fCAhYWN0aW9uc0NvbnRhaW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNjaGVkdWxlRXZhbHVhdGlvbiA9ICgpID0+IHtcbiAgICAgIGlmIChpZ25vcmVSZXNpemVSZWYuY3VycmVudCkge1xuICAgICAgICBpZ25vcmVSZXNpemVSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGV2YWx1YXRlTGF5b3V0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc2l6ZUV2YWx1YXRpb25SYWZSZWYuY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyZXNpemVFdmFsdWF0aW9uUmFmUmVmLmN1cnJlbnQpO1xuICAgICAgfVxuXG4gICAgICByZXNpemVFdmFsdWF0aW9uUmFmUmVmLmN1cnJlbnQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgcmVzaXplRXZhbHVhdGlvblJhZlJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgZXZhbHVhdGVMYXlvdXQoKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG4gICAgICBzY2hlZHVsZUV2YWx1YXRpb24oKTtcbiAgICB9KTtcblxuICAgIG9ic2VydmVyLm9ic2VydmUoZ3JpZCk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShhZGRDb250YWluZXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUoYWN0aW9uc0NvbnRhaW5lcik7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0YXJlYSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgcmVzaXplRXZhbHVhdGlvblJhZlJlZi5jdXJyZW50ICE9PSBudWxsKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlc2l6ZUV2YWx1YXRpb25SYWZSZWYuY3VycmVudCk7XG4gICAgICAgIHJlc2l6ZUV2YWx1YXRpb25SYWZSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2V2YWx1YXRlTGF5b3V0XSk7XG5cbiAgY29uc3Qgc2xhc2hNZW51VmlzaWJsZSA9IGNvbW1hbmRRdWVyeSAhPT0gbnVsbCAmJiBjb21tYW5kSXRlbXMubGVuZ3RoID4gMDtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2xhc2hNZW51VmlzaWJsZSB8fCBzbGFzaEhpZ2hsaWdodEluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGl2ZSA9IHNsYXNoTWVudVJlZi5jdXJyZW50Py5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcbiAgICAgIGBbZGF0YS1zbGFzaC1pbmRleD1cIiR7c2xhc2hIaWdobGlnaHRJbmRleH1cIl1gLFxuICAgICk7XG4gICAgYWN0aXZlPy5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiBcIm5lYXJlc3RcIiB9KTtcbiAgfSwgW3NsYXNoTWVudVZpc2libGUsIHNsYXNoSGlnaGxpZ2h0SW5kZXhdKTtcblxuICBjb25zdCBzbGFzaE1lbnUgPSBzbGFzaE1lbnVWaXNpYmxlID8gKFxuICAgIDxkaXZcbiAgICAgIGRhdGEtdGVzdGlkPVwiY29waWxvdC1zbGFzaC1tZW51XCJcbiAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgIGFyaWEtbGFiZWw9XCJTbGFzaCBjb21tYW5kc1wiXG4gICAgICByZWY9e3NsYXNoTWVudVJlZn1cbiAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS1mdWxsIGxlZnQtMCByaWdodC0wIHotMzAgbWItMiBtYXgtaC02NCBvdmVyZmxvdy15LWF1dG8gcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlciBiZy13aGl0ZSBzaGFkb3ctbGcgZGFyazpib3JkZXItWyMzYTNhM2FdIGRhcms6YmctWyMxZjFmMWZdXCJcbiAgICAgIHN0eWxlPXt7IG1heEhlaWdodDogYCR7U0xBU0hfTUVOVV9NQVhfVklTSUJMRV9JVEVNUyAqIFNMQVNIX01FTlVfSVRFTV9IRUlHSFRfUFh9cHhgIH19XG4gICAgPlxuICAgICAge2ZpbHRlcmVkQ29tbWFuZHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktMiB0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPk5vIGNvbW1hbmRzIGZvdW5kPC9kaXY+XG4gICAgICApIDogKFxuICAgICAgICBmaWx0ZXJlZENvbW1hbmRzLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGluZGV4ID09PSBzbGFzaEhpZ2hsaWdodEluZGV4O1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGtleT17YCR7aXRlbS5sYWJlbH0tJHtpbmRleH1gfVxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgICAgIGFyaWEtc2VsZWN0ZWQ9e2lzQWN0aXZlfVxuICAgICAgICAgICAgICBkYXRhLWFjdGl2ZT17aXNBY3RpdmUgPyBcInRydWVcIiA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgZGF0YS1zbGFzaC1pbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShcbiAgICAgICAgICAgICAgICBcInctZnVsbCBweC0zIHB5LTIgdGV4dC1sZWZ0IHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIixcbiAgICAgICAgICAgICAgICBcImhvdmVyOmJnLW11dGVkIGRhcms6aG92ZXI6YmctWyMyZjJmMmZdXCIsXG4gICAgICAgICAgICAgICAgaXNBY3RpdmUgPyBcImJnLW11dGVkIGRhcms6YmctWyMyZjJmMmZdXCIgOiBcImJnLXRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0U2xhc2hIaWdobGlnaHRJbmRleChpbmRleCl9XG4gICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJ1bkNvbW1hbmQoaXRlbSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpdGVtLmxhYmVsfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSlcbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICkgOiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXt0d01lcmdlKFxuICAgICAgICAvLyBMYXlvdXRcbiAgICAgICAgXCJmbGV4IHctZnVsbCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIixcbiAgICAgICAgLy8gSW50ZXJhY3Rpb25cbiAgICAgICAgXCJjdXJzb3ItdGV4dFwiLFxuICAgICAgICAvLyBPdmVyZmxvdyBhbmQgY2xpcHBpbmdcbiAgICAgICAgXCJvdmVyZmxvdy12aXNpYmxlIGJnLWNsaXAtcGFkZGluZyBjb250YWluLWlubGluZS1zaXplXCIsXG4gICAgICAgIC8vIEJhY2tncm91bmRcbiAgICAgICAgXCJiZy13aGl0ZSBkYXJrOmJnLVsjMzAzMDMwXVwiLFxuICAgICAgICAvLyBWaXN1YWwgZWZmZWN0c1xuICAgICAgICBcInNoYWRvdy1bMF80cHhfNHB4XzBfIzAwMDAwMDBhLDBfMF8xcHhfMF8jMDAwMDAwOWVdIHJvdW5kZWQtWzI4cHhdXCIsXG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICl9XG4gICAgICBvbkNsaWNrPXtoYW5kbGVDb250YWluZXJDbGlja31cbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIGRhdGEtbGF5b3V0PXtpc0V4cGFuZGVkID8gXCJleHBhbmRlZFwiIDogXCJjb21wYWN0XCJ9XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICByZWY9e2dyaWRSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShcbiAgICAgICAgICBcImdyaWQgdy1mdWxsIGdhcC14LTMgZ2FwLXktMyBweC0zIHB5LTJcIixcbiAgICAgICAgICBpc0V4cGFuZGVkXG4gICAgICAgICAgICA/IFwiZ3JpZC1jb2xzLVthdXRvX21pbm1heCgwLDFmcilfYXV0b10gZ3JpZC1yb3dzLVthdXRvX2F1dG9dXCJcbiAgICAgICAgICAgIDogXCJncmlkLWNvbHMtW2F1dG9fbWlubWF4KDAsMWZyKV9hdXRvXSBpdGVtcy1jZW50ZXJcIixcbiAgICAgICAgKX1cbiAgICAgICAgZGF0YS1sYXlvdXQ9e2lzRXhwYW5kZWQgPyBcImV4cGFuZGVkXCIgOiBcImNvbXBhY3RcIn1cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHJlZj17YWRkQnV0dG9uQ29udGFpbmVyUmVmfVxuICAgICAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShcbiAgICAgICAgICAgIFwiZmxleCBpdGVtcy1jZW50ZXJcIixcbiAgICAgICAgICAgIGlzRXhwYW5kZWQgPyBcInJvdy1zdGFydC0yXCIgOiBcInJvdy1zdGFydC0xXCIsXG4gICAgICAgICAgICBcImNvbC1zdGFydC0xXCIsXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtCb3VuZEFkZE1lbnVCdXR0b259XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXt0d01lcmdlKFxuICAgICAgICAgICAgXCJyZWxhdGl2ZSBmbGV4IG1pbi13LTAgZmxleC1jb2wgbWluLWgtWzUwcHhdIGp1c3RpZnktY2VudGVyXCIsXG4gICAgICAgICAgICBpc0V4cGFuZGVkID8gXCJjb2wtc3Bhbi0zIHJvdy1zdGFydC0xXCIgOiBcImNvbC1zdGFydC0yIHJvdy1zdGFydC0xXCIsXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIHttb2RlID09PSBcInRyYW5zY3JpYmVcIiA/IChcbiAgICAgICAgICAgIEJvdW5kQXVkaW9SZWNvcmRlclxuICAgICAgICAgICkgOiBtb2RlID09PSBcInByb2Nlc3NpbmdcIiA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LTMgcHgtNVwiPlxuICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJzaXplLVsyNnB4XSBhbmltYXRlLXNwaW4gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCIgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7Qm91bmRUZXh0QXJlYX1cbiAgICAgICAgICAgICAge3NsYXNoTWVudX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgcmVmPXthY3Rpb25zQ29udGFpbmVyUmVmfVxuICAgICAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShcbiAgICAgICAgICAgIFwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1lbmQgZ2FwLTJcIixcbiAgICAgICAgICAgIGlzRXhwYW5kZWQgPyBcImNvbC1zdGFydC0zIHJvdy1zdGFydC0yXCIgOiBcImNvbC1zdGFydC0zIHJvdy1zdGFydC0xXCIsXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIHttb2RlID09PSBcInRyYW5zY3JpYmVcIiA/IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHtvbkNhbmNlbFRyYW5zY3JpYmUgJiYgQm91bmRDYW5jZWxUcmFuc2NyaWJlQnV0dG9ufVxuICAgICAgICAgICAgICB7b25GaW5pc2hUcmFuc2NyaWJlICYmIEJvdW5kRmluaXNoVHJhbnNjcmliZUJ1dHRvbn1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7b25TdGFydFRyYW5zY3JpYmUgJiYgQm91bmRTdGFydFRyYW5zY3JpYmVCdXR0b259XG4gICAgICAgICAgICAgIHtCb3VuZFNlbmRCdXR0b259XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBDb3BpbG90Q2hhdElucHV0IHtcbiAgZXhwb3J0IGNvbnN0IFNlbmRCdXR0b246IFJlYWN0LkZDPFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50Pj4gPSAoeyBjbGFzc05hbWUsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtci1bMTBweF1cIj5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIHZhcmlhbnQ9XCJjaGF0SW5wdXRUb29sYmFyUHJpbWFyeVwiXG4gICAgICAgIHNpemU9XCJjaGF0SW5wdXRUb29sYmFySWNvblwiXG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIHtjaGlsZHJlbiA/PyA8QXJyb3dVcCBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+fVxuICAgICAgPC9CdXR0b24+XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgZXhwb3J0IGNvbnN0IFRvb2xiYXJCdXR0b246IFJlYWN0LkZDPFxuICAgIFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PiAmIHtcbiAgICAgIGljb246IFJlYWN0LlJlYWN0Tm9kZTtcbiAgICAgIGxhYmVsS2V5OiBrZXlvZiBDb3BpbG90Q2hhdExhYmVscztcbiAgICAgIGRlZmF1bHRDbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgfVxuICA+ID0gKHsgaWNvbiwgbGFiZWxLZXksIGRlZmF1bHRDbGFzc05hbWUsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbmZpZz8ubGFiZWxzID8/IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscztcbiAgICByZXR1cm4gKFxuICAgICAgPFRvb2x0aXA+XG4gICAgICAgIDxUb29sdGlwVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgdmFyaWFudD1cImNoYXRJbnB1dFRvb2xiYXJTZWNvbmRhcnlcIlxuICAgICAgICAgICAgc2l6ZT1cImNoYXRJbnB1dFRvb2xiYXJJY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShkZWZhdWx0Q2xhc3NOYW1lLCBjbGFzc05hbWUpfVxuICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpY29ufVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L1Rvb2x0aXBUcmlnZ2VyPlxuICAgICAgICA8VG9vbHRpcENvbnRlbnQgc2lkZT1cImJvdHRvbVwiPlxuICAgICAgICAgIDxwPntsYWJlbHNbbGFiZWxLZXldfTwvcD5cbiAgICAgICAgPC9Ub29sdGlwQ29udGVudD5cbiAgICAgIDwvVG9vbHRpcD5cbiAgICApO1xuICB9O1xuXG4gIGV4cG9ydCBjb25zdCBTdGFydFRyYW5zY3JpYmVCdXR0b246IFJlYWN0LkZDPFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50Pj4gPSAocHJvcHMpID0+IChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgaWNvbj17PE1pYyBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+fVxuICAgICAgbGFiZWxLZXk9XCJjaGF0SW5wdXRUb29sYmFyU3RhcnRUcmFuc2NyaWJlQnV0dG9uTGFiZWxcIlxuICAgICAgZGVmYXVsdENsYXNzTmFtZT1cIm1yLTJcIlxuICAgICAgey4uLnByb3BzfVxuICAgIC8+XG4gICk7XG5cbiAgZXhwb3J0IGNvbnN0IENhbmNlbFRyYW5zY3JpYmVCdXR0b246IFJlYWN0LkZDPFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50Pj4gPSAocHJvcHMpID0+IChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgaWNvbj17PFggY2xhc3NOYW1lPVwic2l6ZS1bMThweF1cIiAvPn1cbiAgICAgIGxhYmVsS2V5PVwiY2hhdElucHV0VG9vbGJhckNhbmNlbFRyYW5zY3JpYmVCdXR0b25MYWJlbFwiXG4gICAgICBkZWZhdWx0Q2xhc3NOYW1lPVwibXItMlwiXG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKTtcblxuICBleHBvcnQgY29uc3QgRmluaXNoVHJhbnNjcmliZUJ1dHRvbjogUmVhY3QuRkM8UmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+PiA9IChwcm9wcykgPT4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICBpY29uPXs8Q2hlY2sgY2xhc3NOYW1lPVwic2l6ZS1bMThweF1cIiAvPn1cbiAgICAgIGxhYmVsS2V5PVwiY2hhdElucHV0VG9vbGJhckZpbmlzaFRyYW5zY3JpYmVCdXR0b25MYWJlbFwiXG4gICAgICBkZWZhdWx0Q2xhc3NOYW1lPVwibXItWzEwcHhdXCJcbiAgICAgIHsuLi5wcm9wc31cbiAgICAvPlxuICApO1xuXG4gIGV4cG9ydCBjb25zdCBBZGRNZW51QnV0dG9uOiBSZWFjdC5GQzxcbiAgICBSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4gJiB7XG4gICAgICB0b29sc01lbnU/OiAoVG9vbHNNZW51SXRlbSB8IFwiLVwiKVtdO1xuICAgICAgb25BZGRGaWxlPzogKCkgPT4gdm9pZDtcbiAgICB9XG4gID4gPSAoeyBjbGFzc05hbWUsIHRvb2xzTWVudSwgb25BZGRGaWxlLCBkaXNhYmxlZCwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbmZpZz8ubGFiZWxzID8/IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscztcblxuICAgIGNvbnN0IG1lbnVJdGVtcyA9IHVzZU1lbW88KFRvb2xzTWVudUl0ZW0gfCBcIi1cIilbXT4oKCkgPT4ge1xuICAgICAgY29uc3QgaXRlbXM6IChUb29sc01lbnVJdGVtIHwgXCItXCIpW10gPSBbXTtcblxuICAgICAgaWYgKG9uQWRkRmlsZSkge1xuICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICBsYWJlbDogbGFiZWxzLmNoYXRJbnB1dFRvb2xiYXJBZGRCdXR0b25MYWJlbCxcbiAgICAgICAgICBhY3Rpb246IG9uQWRkRmlsZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0b29sc01lbnUgJiYgdG9vbHNNZW51Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKFwiLVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0b29sc01lbnUpIHtcbiAgICAgICAgICBpZiAoaXRlbSA9PT0gXCItXCIpIHtcbiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDAgfHwgaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV0gPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoaXRlbXMubGVuZ3RoID4gMCAmJiBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXSA9PT0gXCItXCIpIHtcbiAgICAgICAgICBpdGVtcy5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfSwgW29uQWRkRmlsZSwgdG9vbHNNZW51LCBsYWJlbHMuY2hhdElucHV0VG9vbGJhckFkZEJ1dHRvbkxhYmVsXSk7XG5cbiAgICBjb25zdCByZW5kZXJNZW51SXRlbXMgPSB1c2VDYWxsYmFjayhcbiAgICAgIChpdGVtczogKFRvb2xzTWVudUl0ZW0gfCBcIi1cIilbXSk6IFJlYWN0LlJlYWN0Tm9kZSA9PlxuICAgICAgICBpdGVtcy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGl0ZW0gPT09IFwiLVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gPERyb3Bkb3duTWVudVNlcGFyYXRvciBrZXk9e2BzZXBhcmF0b3ItJHtpbmRleH1gfSAvPjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXRlbS5pdGVtcyAmJiBpdGVtLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxEcm9wZG93bk1lbnVTdWIga2V5PXtgZ3JvdXAtJHtpbmRleH1gfT5cbiAgICAgICAgICAgICAgICA8RHJvcGRvd25NZW51U3ViVHJpZ2dlcj57aXRlbS5sYWJlbH08L0Ryb3Bkb3duTWVudVN1YlRyaWdnZXI+XG4gICAgICAgICAgICAgICAgPERyb3Bkb3duTWVudVN1YkNvbnRlbnQ+e3JlbmRlck1lbnVJdGVtcyhpdGVtLml0ZW1zKX08L0Ryb3Bkb3duTWVudVN1YkNvbnRlbnQ+XG4gICAgICAgICAgICAgIDwvRHJvcGRvd25NZW51U3ViPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPERyb3Bkb3duTWVudUl0ZW0ga2V5PXtgaXRlbS0ke2luZGV4fWB9IG9uQ2xpY2s9e2l0ZW0uYWN0aW9ufT5cbiAgICAgICAgICAgICAge2l0ZW0ubGFiZWx9XG4gICAgICAgICAgICA8L0Ryb3Bkb3duTWVudUl0ZW0+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSksXG4gICAgICBbXSxcbiAgICApO1xuXG4gICAgY29uc3QgaGFzTWVudUl0ZW1zID0gbWVudUl0ZW1zLmxlbmd0aCA+IDA7XG4gICAgY29uc3QgaXNEaXNhYmxlZCA9IGRpc2FibGVkIHx8ICFoYXNNZW51SXRlbXM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPERyb3Bkb3duTWVudT5cbiAgICAgICAgPFRvb2x0aXA+XG4gICAgICAgICAgPFRvb2x0aXBUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICA8RHJvcGRvd25NZW51VHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImNoYXRJbnB1dFRvb2xiYXJTZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgIHNpemU9XCJjaGF0SW5wdXRUb29sYmFySWNvblwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0d01lcmdlKFwibWwtMVwiLCBjbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0Rpc2FibGVkfVxuICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT1cInNpemUtWzIwcHhdXCIgLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L0Ryb3Bkb3duTWVudVRyaWdnZXI+XG4gICAgICAgICAgPC9Ub29sdGlwVHJpZ2dlcj5cbiAgICAgICAgICA8VG9vbHRpcENvbnRlbnQgc2lkZT1cImJvdHRvbVwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgdGV4dC14cyBmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAgICA8c3Bhbj5BZGQgZmlsZXMgYW5kIG1vcmU8L3NwYW4+XG4gICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctWyM0YTRhNGFdIHB4LTEgcHktWzFweF0gZm9udC1tb25vIHRleHQtWzExcHhdIHRleHQtd2hpdGUgZGFyazpiZy1bI2UwZTBlMF0gZGFyazp0ZXh0LWJsYWNrXCI+LzwvY29kZT5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L1Rvb2x0aXBDb250ZW50PlxuICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgIHtoYXNNZW51SXRlbXMgJiYgKFxuICAgICAgICAgIDxEcm9wZG93bk1lbnVDb250ZW50IHNpZGU9XCJ0b3BcIiBhbGlnbj1cInN0YXJ0XCI+XG4gICAgICAgICAgICB7cmVuZGVyTWVudUl0ZW1zKG1lbnVJdGVtcyl9XG4gICAgICAgICAgPC9Ecm9wZG93bk1lbnVDb250ZW50PlxuICAgICAgICApfVxuICAgICAgPC9Ecm9wZG93bk1lbnU+XG4gICAgKTtcbiAgfTtcblxuICBleHBvcnQgdHlwZSBUZXh0QXJlYVByb3BzID0gUmVhY3QuVGV4dGFyZWFIVE1MQXR0cmlidXRlczxIVE1MVGV4dEFyZWFFbGVtZW50PjtcblxuICBleHBvcnQgY29uc3QgVGV4dEFyZWEgPSBmb3J3YXJkUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQsIFRleHRBcmVhUHJvcHM+KGZ1bmN0aW9uIFRleHRBcmVhKFxuICAgIHsgc3R5bGUsIGNsYXNzTmFtZSwgYXV0b0ZvY3VzLCAuLi5wcm9wcyB9LFxuICAgIHJlZixcbiAgKSB7XG4gICAgY29uc3QgaW50ZXJuYWxUZXh0YXJlYVJlZiA9IHVzZVJlZjxIVE1MVGV4dEFyZWFFbGVtZW50PihudWxsKTtcbiAgICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgICBjb25zdCBsYWJlbHMgPSBjb25maWc/LmxhYmVscyA/PyBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG5cbiAgICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gaW50ZXJuYWxUZXh0YXJlYVJlZi5jdXJyZW50IGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpO1xuXG4gICAgLy8gQXV0by1zY3JvbGwgaW5wdXQgaW50byB2aWV3IG9uIG1vYmlsZSB3aGVuIGZvY3VzZWRcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgdGV4dGFyZWEgPSBpbnRlcm5hbFRleHRhcmVhUmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIXRleHRhcmVhKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGhhbmRsZUZvY3VzID0gKCkgPT4ge1xuICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBsZXQgdGhlIGtleWJvYXJkIHN0YXJ0IGFwcGVhcmluZ1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0ZXh0YXJlYS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiLCBibG9jazogXCJuZWFyZXN0XCIgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9O1xuXG4gICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgaGFuZGxlRm9jdXMpO1xuICAgICAgcmV0dXJuICgpID0+IHRleHRhcmVhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBoYW5kbGVGb2N1cyk7XG4gICAgfSwgW10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChhdXRvRm9jdXMpIHtcbiAgICAgICAgaW50ZXJuYWxUZXh0YXJlYVJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgICAgfVxuICAgIH0sIFthdXRvRm9jdXNdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8dGV4dGFyZWFcbiAgICAgICAgcmVmPXtpbnRlcm5hbFRleHRhcmVhUmVmfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgICAgICAgIHJlc2l6ZTogXCJub25lXCIsXG4gICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgIH19XG4gICAgICAgIHBsYWNlaG9sZGVyPXtsYWJlbHMuY2hhdElucHV0UGxhY2Vob2xkZXJ9XG4gICAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShcbiAgICAgICAgICBcImJnLXRyYW5zcGFyZW50IG91dGxpbmUtbm9uZSBhbnRpYWxpYXNlZCBmb250LXJlZ3VsYXIgbGVhZGluZy1yZWxheGVkIHRleHQtWzE2cHhdIHBsYWNlaG9sZGVyOnRleHQtWyMwMDAwMDA3N10gZGFyazpwbGFjZWhvbGRlcjp0ZXh0LVsjZmZmY11cIixcbiAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICl9XG4gICAgICAgIHJvd3M9ezF9XG4gICAgICAvPlxuICAgICk7XG4gIH0pO1xuXG4gIGV4cG9ydCBjb25zdCBBdWRpb1JlY29yZGVyID0gQ29waWxvdENoYXRBdWRpb1JlY29yZGVyO1xufVxuXG5Db3BpbG90Q2hhdElucHV0LlRleHRBcmVhLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdElucHV0LlRleHRBcmVhXCI7XG5Db3BpbG90Q2hhdElucHV0LlNlbmRCdXR0b24uZGlzcGxheU5hbWUgPSBcIkNvcGlsb3RDaGF0SW5wdXQuU2VuZEJ1dHRvblwiO1xuQ29waWxvdENoYXRJbnB1dC5Ub29sYmFyQnV0dG9uLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdElucHV0LlRvb2xiYXJCdXR0b25cIjtcbkNvcGlsb3RDaGF0SW5wdXQuU3RhcnRUcmFuc2NyaWJlQnV0dG9uLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdElucHV0LlN0YXJ0VHJhbnNjcmliZUJ1dHRvblwiO1xuQ29waWxvdENoYXRJbnB1dC5DYW5jZWxUcmFuc2NyaWJlQnV0dG9uLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdElucHV0LkNhbmNlbFRyYW5zY3JpYmVCdXR0b25cIjtcbkNvcGlsb3RDaGF0SW5wdXQuRmluaXNoVHJhbnNjcmliZUJ1dHRvbi5kaXNwbGF5TmFtZSA9IFwiQ29waWxvdENoYXRJbnB1dC5GaW5pc2hUcmFuc2NyaWJlQnV0dG9uXCI7XG5Db3BpbG90Q2hhdElucHV0LkFkZE1lbnVCdXR0b24uZGlzcGxheU5hbWUgPSBcIkNvcGlsb3RDaGF0SW5wdXQuQWRkTWVudUJ1dHRvblwiO1xuXG5leHBvcnQgZGVmYXVsdCBDb3BpbG90Q2hhdElucHV0O1xuIiwiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIFJlYWN0Tm9kZSwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERFRkFVTFRfQUdFTlRfSUQsIHJhbmRvbVVVSUQgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L3NoYXJlZFwiO1xuXG4vLyBEZWZhdWx0IGxhYmVsc1xuZXhwb3J0IGNvbnN0IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscyA9IHtcbiAgY2hhdElucHV0UGxhY2Vob2xkZXI6IFwiVHlwZSBhIG1lc3NhZ2UuLi5cIixcbiAgY2hhdElucHV0VG9vbGJhclN0YXJ0VHJhbnNjcmliZUJ1dHRvbkxhYmVsOiBcIlRyYW5zY3JpYmVcIixcbiAgY2hhdElucHV0VG9vbGJhckNhbmNlbFRyYW5zY3JpYmVCdXR0b25MYWJlbDogXCJDYW5jZWxcIixcbiAgY2hhdElucHV0VG9vbGJhckZpbmlzaFRyYW5zY3JpYmVCdXR0b25MYWJlbDogXCJGaW5pc2hcIixcbiAgY2hhdElucHV0VG9vbGJhckFkZEJ1dHRvbkxhYmVsOiBcIkFkZCBwaG90b3Mgb3IgZmlsZXNcIixcbiAgY2hhdElucHV0VG9vbGJhclRvb2xzQnV0dG9uTGFiZWw6IFwiVG9vbHNcIixcbiAgYXNzaXN0YW50TWVzc2FnZVRvb2xiYXJDb3B5Q29kZUxhYmVsOiBcIkNvcHlcIixcbiAgYXNzaXN0YW50TWVzc2FnZVRvb2xiYXJDb3B5Q29kZUNvcGllZExhYmVsOiBcIkNvcGllZFwiLFxuICBhc3Npc3RhbnRNZXNzYWdlVG9vbGJhckNvcHlNZXNzYWdlTGFiZWw6IFwiQ29weVwiLFxuICBhc3Npc3RhbnRNZXNzYWdlVG9vbGJhclRodW1ic1VwTGFiZWw6IFwiR29vZCByZXNwb25zZVwiLFxuICBhc3Npc3RhbnRNZXNzYWdlVG9vbGJhclRodW1ic0Rvd25MYWJlbDogXCJCYWQgcmVzcG9uc2VcIixcbiAgYXNzaXN0YW50TWVzc2FnZVRvb2xiYXJSZWFkQWxvdWRMYWJlbDogXCJSZWFkIGFsb3VkXCIsXG4gIGFzc2lzdGFudE1lc3NhZ2VUb29sYmFyUmVnZW5lcmF0ZUxhYmVsOiBcIlJlZ2VuZXJhdGVcIixcbiAgdXNlck1lc3NhZ2VUb29sYmFyQ29weU1lc3NhZ2VMYWJlbDogXCJDb3B5XCIsXG4gIHVzZXJNZXNzYWdlVG9vbGJhckVkaXRNZXNzYWdlTGFiZWw6IFwiRWRpdFwiLFxuICBjaGF0RGlzY2xhaW1lclRleHQ6IFwiQUkgY2FuIG1ha2UgbWlzdGFrZXMuIFBsZWFzZSB2ZXJpZnkgaW1wb3J0YW50IGluZm9ybWF0aW9uLlwiLFxuICBjaGF0VG9nZ2xlT3BlbkxhYmVsOiBcIk9wZW4gY2hhdFwiLFxuICBjaGF0VG9nZ2xlQ2xvc2VMYWJlbDogXCJDbG9zZSBjaGF0XCIsXG4gIG1vZGFsSGVhZGVyVGl0bGU6IFwiQ29waWxvdEtpdCBDaGF0XCIsXG4gIHdlbGNvbWVNZXNzYWdlVGV4dDogXCJIb3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/XCIsXG59O1xuXG5leHBvcnQgdHlwZSBDb3BpbG90Q2hhdExhYmVscyA9IHR5cGVvZiBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG5cbi8vIERlZmluZSB0aGUgZnVsbCBjb25maWd1cmF0aW9uIGludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb25WYWx1ZSB7XG4gIGxhYmVsczogQ29waWxvdENoYXRMYWJlbHM7XG4gIGFnZW50SWQ6IHN0cmluZztcbiAgdGhyZWFkSWQ6IHN0cmluZztcbiAgaXNNb2RhbE9wZW46IGJvb2xlYW47XG4gIHNldE1vZGFsT3BlbjogKG9wZW46IGJvb2xlYW4pID0+IHZvaWQ7XG4gIGlzTW9kYWxEZWZhdWx0T3BlbjogYm9vbGVhbjtcbn1cblxuLy8gQ3JlYXRlIHRoZSBjb25maWd1cmF0aW9uIGNvbnRleHRcbmNvbnN0IENvcGlsb3RDaGF0Q29uZmlndXJhdGlvbiA9XG4gIGNyZWF0ZUNvbnRleHQ8Q29waWxvdENoYXRDb25maWd1cmF0aW9uVmFsdWUgfCBudWxsPihudWxsKTtcblxuLy8gUHJvdmlkZXIgcHJvcHMgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIENvcGlsb3RDaGF0Q29uZmlndXJhdGlvblByb3ZpZGVyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlO1xuICBsYWJlbHM/OiBQYXJ0aWFsPENvcGlsb3RDaGF0TGFiZWxzPjtcbiAgYWdlbnRJZD86IHN0cmluZztcbiAgdGhyZWFkSWQ/OiBzdHJpbmc7XG4gIGlzTW9kYWxEZWZhdWx0T3Blbj86IGJvb2xlYW47XG59XG5cbi8vIFByb3ZpZGVyIGNvbXBvbmVudFxuZXhwb3J0IGNvbnN0IENvcGlsb3RDaGF0Q29uZmlndXJhdGlvblByb3ZpZGVyOiBSZWFjdC5GQzxcbiAgQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJQcm9wc1xuPiA9ICh7IGNoaWxkcmVuLCBsYWJlbHMsIGFnZW50SWQsIHRocmVhZElkLCBpc01vZGFsRGVmYXVsdE9wZW4gfSkgPT4ge1xuICBjb25zdCBwYXJlbnRDb25maWcgPSB1c2VDb250ZXh0KENvcGlsb3RDaGF0Q29uZmlndXJhdGlvbik7XG5cbiAgY29uc3QgbWVyZ2VkTGFiZWxzOiBDb3BpbG90Q2hhdExhYmVscyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIC4uLkNvcGlsb3RDaGF0RGVmYXVsdExhYmVscyxcbiAgICAgIC4uLihwYXJlbnRDb25maWc/LmxhYmVscyA/PyB7fSksXG4gICAgICAuLi4obGFiZWxzID8/IHt9KSxcbiAgICB9KSxcbiAgICBbbGFiZWxzLCBwYXJlbnRDb25maWc/LmxhYmVsc10sXG4gICk7XG5cbiAgY29uc3QgcmVzb2x2ZWRBZ2VudElkID0gYWdlbnRJZCA/PyBwYXJlbnRDb25maWc/LmFnZW50SWQgPz8gREVGQVVMVF9BR0VOVF9JRDtcblxuICBjb25zdCByZXNvbHZlZFRocmVhZElkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHRocmVhZElkKSB7XG4gICAgICByZXR1cm4gdGhyZWFkSWQ7XG4gICAgfVxuICAgIGlmIChwYXJlbnRDb25maWc/LnRocmVhZElkKSB7XG4gICAgICByZXR1cm4gcGFyZW50Q29uZmlnLnRocmVhZElkO1xuICAgIH1cbiAgICByZXR1cm4gcmFuZG9tVVVJRCgpO1xuICB9LCBbdGhyZWFkSWQsIHBhcmVudENvbmZpZz8udGhyZWFkSWRdKTtcblxuICBjb25zdCByZXNvbHZlZERlZmF1bHRPcGVuID0gaXNNb2RhbERlZmF1bHRPcGVuID8/IHBhcmVudENvbmZpZz8uaXNNb2RhbERlZmF1bHRPcGVuID8/IHRydWU7XG5cbiAgY29uc3QgW2ludGVybmFsTW9kYWxPcGVuLCBzZXRJbnRlcm5hbE1vZGFsT3Blbl0gPSB1c2VTdGF0ZTxib29sZWFuPihcbiAgICBwYXJlbnRDb25maWc/LmlzTW9kYWxPcGVuID8/IHJlc29sdmVkRGVmYXVsdE9wZW4sXG4gICk7XG5cbiAgY29uc3QgcmVzb2x2ZWRJc01vZGFsT3BlbiA9IHBhcmVudENvbmZpZz8uaXNNb2RhbE9wZW4gPz8gaW50ZXJuYWxNb2RhbE9wZW47XG4gIGNvbnN0IHJlc29sdmVkU2V0TW9kYWxPcGVuID0gcGFyZW50Q29uZmlnPy5zZXRNb2RhbE9wZW4gPz8gc2V0SW50ZXJuYWxNb2RhbE9wZW47XG5cbiAgY29uc3QgY29uZmlndXJhdGlvblZhbHVlOiBDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb25WYWx1ZSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIGxhYmVsczogbWVyZ2VkTGFiZWxzLFxuICAgICAgYWdlbnRJZDogcmVzb2x2ZWRBZ2VudElkLFxuICAgICAgdGhyZWFkSWQ6IHJlc29sdmVkVGhyZWFkSWQsXG4gICAgICBpc01vZGFsT3BlbjogcmVzb2x2ZWRJc01vZGFsT3BlbixcbiAgICAgIHNldE1vZGFsT3BlbjogcmVzb2x2ZWRTZXRNb2RhbE9wZW4sXG4gICAgICBpc01vZGFsRGVmYXVsdE9wZW46IHJlc29sdmVkRGVmYXVsdE9wZW4sXG4gICAgfSksXG4gICAgW1xuICAgICAgbWVyZ2VkTGFiZWxzLFxuICAgICAgcmVzb2x2ZWRBZ2VudElkLFxuICAgICAgcmVzb2x2ZWRUaHJlYWRJZCxcbiAgICAgIHJlc29sdmVkSXNNb2RhbE9wZW4sXG4gICAgICByZXNvbHZlZFNldE1vZGFsT3BlbixcbiAgICAgIHJlc29sdmVkRGVmYXVsdE9wZW4sXG4gICAgXSxcbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24uUHJvdmlkZXIgdmFsdWU9e2NvbmZpZ3VyYXRpb25WYWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9Db3BpbG90Q2hhdENvbmZpZ3VyYXRpb24uUHJvdmlkZXI+XG4gICk7XG59O1xuXG4vLyBIb29rIHRvIHVzZSB0aGUgZnVsbCBjb25maWd1cmF0aW9uXG5leHBvcnQgY29uc3QgdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uID1cbiAgKCk6IENvcGlsb3RDaGF0Q29uZmlndXJhdGlvblZhbHVlIHwgbnVsbCA9PiB7XG4gICAgY29uc3QgY29uZmlndXJhdGlvbiA9IHVzZUNvbnRleHQoQ29waWxvdENoYXRDb25maWd1cmF0aW9uKTtcbiAgICByZXR1cm4gY29uZmlndXJhdGlvbjtcbiAgfTtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgU2xvdCB9IGZyb20gXCJAcmFkaXgtdWkvcmVhY3Qtc2xvdFwiO1xuaW1wb3J0IHsgY3ZhLCB0eXBlIFZhcmlhbnRQcm9wcyB9IGZyb20gXCJjbGFzcy12YXJpYW5jZS1hdXRob3JpdHlcIjtcblxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcblxuY29uc3QgYnV0dG9uVmFyaWFudHMgPSBjdmEoXG4gIFwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIHdoaXRlc3BhY2Utbm93cmFwIHJvdW5kZWQtbWQgdGV4dC1zbSBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWFsbCBkaXNhYmxlZDpwb2ludGVyLWV2ZW50cy1ub25lIGRpc2FibGVkOm9wYWNpdHktNTAgWyZfc3ZnXTpwb2ludGVyLWV2ZW50cy1ub25lIFsmX3N2Zzpub3QoW2NsYXNzKj0nc2l6ZS0nXSldOnNpemUtNCBzaHJpbmstMCBbJl9zdmddOnNocmluay0wIG91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOmJvcmRlci1yaW5nIGZvY3VzLXZpc2libGU6cmluZy1yaW5nLzUwIGZvY3VzLXZpc2libGU6cmluZy1bM3B4XSBhcmlhLWludmFsaWQ6cmluZy1kZXN0cnVjdGl2ZS8yMCBkYXJrOmFyaWEtaW52YWxpZDpyaW5nLWRlc3RydWN0aXZlLzQwIGFyaWEtaW52YWxpZDpib3JkZXItZGVzdHJ1Y3RpdmVcIixcbiAge1xuICAgIHZhcmlhbnRzOiB7XG4gICAgICB2YXJpYW50OiB7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgXCJiZy1wcmltYXJ5IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kIHNoYWRvdy14cyBob3ZlcjpiZy1wcmltYXJ5LzkwXCIsXG4gICAgICAgIGRlc3RydWN0aXZlOlxuICAgICAgICAgIFwiYmctZGVzdHJ1Y3RpdmUgdGV4dC13aGl0ZSBzaGFkb3cteHMgaG92ZXI6YmctZGVzdHJ1Y3RpdmUvOTAgZm9jdXMtdmlzaWJsZTpyaW5nLWRlc3RydWN0aXZlLzIwIGRhcms6Zm9jdXMtdmlzaWJsZTpyaW5nLWRlc3RydWN0aXZlLzQwIGRhcms6YmctZGVzdHJ1Y3RpdmUvNjBcIixcbiAgICAgICAgb3V0bGluZTpcbiAgICAgICAgICBcImJvcmRlciBiZy1iYWNrZ3JvdW5kIHNoYWRvdy14cyBob3ZlcjpiZy1hY2NlbnQgaG92ZXI6dGV4dC1hY2NlbnQtZm9yZWdyb3VuZCBkYXJrOmJnLWlucHV0LzMwIGRhcms6Ym9yZGVyLWlucHV0IGRhcms6aG92ZXI6YmctaW5wdXQvNTBcIixcbiAgICAgICAgc2Vjb25kYXJ5OlxuICAgICAgICAgIFwiYmctc2Vjb25kYXJ5IHRleHQtc2Vjb25kYXJ5LWZvcmVncm91bmQgc2hhZG93LXhzIGhvdmVyOmJnLXNlY29uZGFyeS84MFwiLFxuICAgICAgICBnaG9zdDpcbiAgICAgICAgICBcImhvdmVyOmJnLWFjY2VudCBob3Zlcjp0ZXh0LWFjY2VudC1mb3JlZ3JvdW5kIGRhcms6aG92ZXI6YmctYWNjZW50LzUwIGN1cnNvci1wb2ludGVyXCIsXG4gICAgICAgIGxpbms6IFwidGV4dC1wcmltYXJ5IHVuZGVybGluZS1vZmZzZXQtNCBob3Zlcjp1bmRlcmxpbmVcIixcbiAgICAgICAgYXNzaXN0YW50TWVzc2FnZVRvb2xiYXJCdXR0b246IFtcbiAgICAgICAgICBcImN1cnNvci1wb2ludGVyXCIsXG4gICAgICAgICAgLy8gQmFja2dyb3VuZCBhbmQgdGV4dFxuICAgICAgICAgIFwicC0wIHRleHQtW3JnYig5Myw5Myw5MyldIGhvdmVyOmJnLVsjRThFOEU4XVwiLFxuICAgICAgICAgIC8vIERhcmsgbW9kZSAtIGxpZ2h0ZXIgZ3JheSBmb3IgYmV0dGVyIGNvbnRyYXN0XG4gICAgICAgICAgXCJkYXJrOnRleHQtW3JnYigyNDMsMjQzLDI0MyldIGRhcms6aG92ZXI6YmctWyMzMDMwMzBdXCIsXG4gICAgICAgICAgLy8gU2hhcGUgYW5kIHNpemluZ1xuICAgICAgICAgIFwiaC04IHctOFwiLFxuICAgICAgICAgIC8vIEludGVyYWN0aW9uc1xuICAgICAgICAgIFwidHJhbnNpdGlvbi1jb2xvcnNcIixcbiAgICAgICAgICAvLyBIb3ZlciBzdGF0ZXNcbiAgICAgICAgICBcImhvdmVyOnRleHQtW3JnYig5Myw5Myw5MyldXCIsXG4gICAgICAgICAgXCJkYXJrOmhvdmVyOnRleHQtW3JnYigyNDMsMjQzLDI0MyldXCIsXG4gICAgICAgIF0sXG4gICAgICAgIGNoYXRJbnB1dFRvb2xiYXJQcmltYXJ5OiBbXG4gICAgICAgICAgXCJjdXJzb3ItcG9pbnRlclwiLFxuICAgICAgICAgIC8vIEJhY2tncm91bmQgYW5kIHRleHRcbiAgICAgICAgICBcImJnLWJsYWNrIHRleHQtd2hpdGVcIixcbiAgICAgICAgICAvLyBEYXJrIG1vZGVcbiAgICAgICAgICBcImRhcms6Ymctd2hpdGUgZGFyazp0ZXh0LWJsYWNrIGRhcms6Zm9jdXMtdmlzaWJsZTpvdXRsaW5lLXdoaXRlXCIsXG4gICAgICAgICAgLy8gU2hhcGUgYW5kIHNpemluZ1xuICAgICAgICAgIFwicm91bmRlZC1mdWxsXCIsXG4gICAgICAgICAgLy8gSW50ZXJhY3Rpb25zXG4gICAgICAgICAgXCJ0cmFuc2l0aW9uLWNvbG9yc1wiLFxuICAgICAgICAgIC8vIEZvY3VzIHN0YXRlc1xuICAgICAgICAgIFwiZm9jdXM6b3V0bGluZS1ub25lXCIsXG4gICAgICAgICAgLy8gSG92ZXIgc3RhdGVzXG4gICAgICAgICAgXCJob3ZlcjpvcGFjaXR5LTcwIGRpc2FibGVkOmhvdmVyOm9wYWNpdHktMTAwXCIsXG4gICAgICAgICAgLy8gRGlzYWJsZWQgc3RhdGVzXG4gICAgICAgICAgXCJkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6YmctWyMwMDAwMDAxNF0gZGlzYWJsZWQ6dGV4dC1bcmdiKDEzLDEzLDEzKV1cIixcbiAgICAgICAgICBcImRhcms6ZGlzYWJsZWQ6YmctWyM0NTQ1NDVdIGRhcms6ZGlzYWJsZWQ6dGV4dC13aGl0ZSBcIixcbiAgICAgICAgXSxcbiAgICAgICAgY2hhdElucHV0VG9vbGJhclNlY29uZGFyeTogW1xuICAgICAgICAgIFwiY3Vyc29yLXBvaW50ZXJcIixcbiAgICAgICAgICAvLyBCYWNrZ3JvdW5kIGFuZCB0ZXh0XG4gICAgICAgICAgXCJiZy10cmFuc3BhcmVudCB0ZXh0LVsjNDQ0NDQ0XVwiLFxuICAgICAgICAgIC8vIERhcmsgbW9kZVxuICAgICAgICAgIFwiZGFyazp0ZXh0LXdoaXRlIGRhcms6Ym9yZGVyLVsjNDA0MDQwXVwiLFxuICAgICAgICAgIC8vIFNoYXBlIGFuZCBzaXppbmdcbiAgICAgICAgICBcInJvdW5kZWQtZnVsbFwiLFxuICAgICAgICAgIC8vIEludGVyYWN0aW9uc1xuICAgICAgICAgIFwidHJhbnNpdGlvbi1jb2xvcnNcIixcbiAgICAgICAgICAvLyBGb2N1cyBzdGF0ZXNcbiAgICAgICAgICBcImZvY3VzOm91dGxpbmUtbm9uZVwiLFxuICAgICAgICAgIC8vIEhvdmVyIHN0YXRlc1xuICAgICAgICAgIFwiaG92ZXI6YmctWyNmOGY4ZjhdIGhvdmVyOnRleHQtWyMzMzMzMzNdXCIsXG4gICAgICAgICAgXCJkYXJrOmhvdmVyOmJnLVsjNDA0MDQwXSBkYXJrOmhvdmVyOnRleHQtWyNGRkZGRkZdXCIsXG4gICAgICAgICAgLy8gRGlzYWJsZWQgc3RhdGVzXG4gICAgICAgICAgXCJkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6b3BhY2l0eS01MFwiLFxuICAgICAgICAgIFwiZGlzYWJsZWQ6aG92ZXI6YmctdHJhbnNwYXJlbnQgZGlzYWJsZWQ6aG92ZXI6dGV4dC1bIzQ0NDQ0NF1cIixcbiAgICAgICAgICBcImRhcms6ZGlzYWJsZWQ6aG92ZXI6YmctdHJhbnNwYXJlbnQgZGFyazpkaXNhYmxlZDpob3Zlcjp0ZXh0LVsjQ0NDQ0NDXVwiLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHNpemU6IHtcbiAgICAgICAgZGVmYXVsdDogXCJoLTkgcHgtNCBweS0yIGhhcy1bPnN2Z106cHgtM1wiLFxuICAgICAgICBzbTogXCJoLTggcm91bmRlZC1tZCBnYXAtMS41IHB4LTMgaGFzLVs+c3ZnXTpweC0yLjVcIixcbiAgICAgICAgbGc6IFwiaC0xMCByb3VuZGVkLW1kIHB4LTYgaGFzLVs+c3ZnXTpweC00XCIsXG4gICAgICAgIGljb246IFwic2l6ZS05XCIsXG4gICAgICAgIGNoYXRJbnB1dFRvb2xiYXJJY29uOiBbXG4gICAgICAgICAgLy8gU2hhcGUgYW5kIHNpemluZ1xuICAgICAgICAgIFwiaC05IHctOSByb3VuZGVkLWZ1bGxcIixcbiAgICAgICAgXSxcbiAgICAgICAgY2hhdElucHV0VG9vbGJhckljb25MYWJlbDogW1xuICAgICAgICAgIC8vIFNoYXBlIGFuZCBzaXppbmdcbiAgICAgICAgICBcImgtOSBweC0zIHJvdW5kZWQtZnVsbFwiLFxuICAgICAgICAgIC8vIExheW91dFxuICAgICAgICAgIFwiZ2FwLTJcIixcbiAgICAgICAgICAvLyBUeXBvZ3JhcGh5XG4gICAgICAgICAgXCJmb250LW5vcm1hbFwiLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGRlZmF1bHRWYXJpYW50czoge1xuICAgICAgdmFyaWFudDogXCJkZWZhdWx0XCIsXG4gICAgICBzaXplOiBcImRlZmF1bHRcIixcbiAgICB9LFxuICB9XG4pO1xuXG5mdW5jdGlvbiBCdXR0b24oe1xuICBjbGFzc05hbWUsXG4gIHZhcmlhbnQsXG4gIHNpemUsXG4gIGFzQ2hpbGQgPSBmYWxzZSxcbiAgLi4ucHJvcHNcbn06IFJlYWN0LkNvbXBvbmVudFByb3BzPFwiYnV0dG9uXCI+ICZcbiAgVmFyaWFudFByb3BzPHR5cGVvZiBidXR0b25WYXJpYW50cz4gJiB7XG4gICAgYXNDaGlsZD86IGJvb2xlYW47XG4gIH0pIHtcbiAgY29uc3QgQ29tcCA9IGFzQ2hpbGQgPyBTbG90IDogXCJidXR0b25cIjtcblxuICByZXR1cm4gKFxuICAgIDxDb21wXG4gICAgICBkYXRhLXNsb3Q9XCJidXR0b25cIlxuICAgICAgY2xhc3NOYW1lPXtjbihidXR0b25WYXJpYW50cyh7IHZhcmlhbnQsIHNpemUsIGNsYXNzTmFtZSB9KSl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKTtcbn1cblxuZXhwb3J0IHsgQnV0dG9uLCBidXR0b25WYXJpYW50cyB9O1xuIiwiaW1wb3J0IHsgY2xzeCwgdHlwZSBDbGFzc1ZhbHVlIH0gZnJvbSBcImNsc3hcIjtcbmltcG9ydCB7IHR3TWVyZ2UgfSBmcm9tIFwidGFpbHdpbmQtbWVyZ2VcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNuKC4uLmlucHV0czogQ2xhc3NWYWx1ZVtdKSB7XG4gIHJldHVybiB0d01lcmdlKGNsc3goaW5wdXRzKSk7XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIFRvb2x0aXBQcmltaXRpdmUgZnJvbSBcIkByYWRpeC11aS9yZWFjdC10b29sdGlwXCI7XG5cbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XG5cbmZ1bmN0aW9uIFRvb2x0aXBQcm92aWRlcih7XG4gIGRlbGF5RHVyYXRpb24gPSAwLFxuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIFRvb2x0aXBQcmltaXRpdmUuUHJvdmlkZXI+KSB7XG4gIHJldHVybiAoXG4gICAgPFRvb2x0aXBQcmltaXRpdmUuUHJvdmlkZXJcbiAgICAgIGRhdGEtc2xvdD1cInRvb2x0aXAtcHJvdmlkZXJcIlxuICAgICAgZGVsYXlEdXJhdGlvbj17ZGVsYXlEdXJhdGlvbn1cbiAgICAgIHsuLi5wcm9wc31cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBUb29sdGlwKHtcbiAgLi4ucHJvcHNcbn06IFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBUb29sdGlwUHJpbWl0aXZlLlJvb3Q+KSB7XG4gIHJldHVybiAoXG4gICAgPFRvb2x0aXBQcm92aWRlcj5cbiAgICAgIDxUb29sdGlwUHJpbWl0aXZlLlJvb3QgZGF0YS1zbG90PVwidG9vbHRpcFwiIHsuLi5wcm9wc30gLz5cbiAgICA8L1Rvb2x0aXBQcm92aWRlcj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVG9vbHRpcFRyaWdnZXIoe1xuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIFRvb2x0aXBQcmltaXRpdmUuVHJpZ2dlcj4pIHtcbiAgcmV0dXJuIDxUb29sdGlwUHJpbWl0aXZlLlRyaWdnZXIgZGF0YS1zbG90PVwidG9vbHRpcC10cmlnZ2VyXCIgey4uLnByb3BzfSAvPjtcbn1cblxuZnVuY3Rpb24gVG9vbHRpcENvbnRlbnQoe1xuICBjbGFzc05hbWUsXG4gIHNpZGVPZmZzZXQgPSAwLFxuICBjaGlsZHJlbixcbiAgLi4ucHJvcHNcbn06IFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBUb29sdGlwUHJpbWl0aXZlLkNvbnRlbnQ+KSB7XG4gIHJldHVybiAoXG4gICAgPFRvb2x0aXBQcmltaXRpdmUuUG9ydGFsPlxuICAgICAgPFRvb2x0aXBQcmltaXRpdmUuQ29udGVudFxuICAgICAgICBkYXRhLXNsb3Q9XCJ0b29sdGlwLWNvbnRlbnRcIlxuICAgICAgICBzaWRlT2Zmc2V0PXtzaWRlT2Zmc2V0fVxuICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgIFwiYmctcHJpbWFyeSB0ZXh0LXByaW1hcnktZm9yZWdyb3VuZCBhbmltYXRlLWluIGZhZGUtaW4tMCB6b29tLWluLTk1IGRhdGEtW3N0YXRlPWNsb3NlZF06YW5pbWF0ZS1vdXQgZGF0YS1bc3RhdGU9Y2xvc2VkXTpmYWRlLW91dC0wIGRhdGEtW3N0YXRlPWNsb3NlZF06em9vbS1vdXQtOTUgZGF0YS1bc2lkZT1ib3R0b21dOnNsaWRlLWluLWZyb20tdG9wLTIgZGF0YS1bc2lkZT1sZWZ0XTpzbGlkZS1pbi1mcm9tLXJpZ2h0LTIgZGF0YS1bc2lkZT1yaWdodF06c2xpZGUtaW4tZnJvbS1sZWZ0LTIgZGF0YS1bc2lkZT10b3BdOnNsaWRlLWluLWZyb20tYm90dG9tLTIgei01MCB3LWZpdCBvcmlnaW4tKC0tcmFkaXgtdG9vbHRpcC1jb250ZW50LXRyYW5zZm9ybS1vcmlnaW4pIHJvdW5kZWQtbWQgcHgtMyBweS0xLjUgdGV4dC14cyB0ZXh0LWJhbGFuY2VcIixcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKX1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgPlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDxUb29sdGlwUHJpbWl0aXZlLkFycm93IGNsYXNzTmFtZT1cImJnLXByaW1hcnkgZmlsbC1wcmltYXJ5IHotNTAgc2l6ZS0yLjUgdHJhbnNsYXRlLXktW2NhbGMoLTUwJV8tXzJweCldIHJvdGF0ZS00NSByb3VuZGVkLVsycHhdXCIgLz5cbiAgICAgIDwvVG9vbHRpcFByaW1pdGl2ZS5Db250ZW50PlxuICAgIDwvVG9vbHRpcFByaW1pdGl2ZS5Qb3J0YWw+XG4gICk7XG59XG5cbmV4cG9ydCB7IFRvb2x0aXAsIFRvb2x0aXBUcmlnZ2VyLCBUb29sdGlwQ29udGVudCwgVG9vbHRpcFByb3ZpZGVyIH07XG4iLCJcInVzZSBjbGllbnRcIlxuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIlxuaW1wb3J0ICogYXMgRHJvcGRvd25NZW51UHJpbWl0aXZlIGZyb20gXCJAcmFkaXgtdWkvcmVhY3QtZHJvcGRvd24tbWVudVwiXG5pbXBvcnQgeyBDaGVja0ljb24sIENoZXZyb25SaWdodEljb24sIENpcmNsZUljb24gfSBmcm9tIFwibHVjaWRlLXJlYWN0XCJcblxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIlxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnUoe1xuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERyb3Bkb3duTWVudVByaW1pdGl2ZS5Sb290Pikge1xuICByZXR1cm4gPERyb3Bkb3duTWVudVByaW1pdGl2ZS5Sb290IGRhdGEtc2xvdD1cImRyb3Bkb3duLW1lbnVcIiB7Li4ucHJvcHN9IC8+XG59XG5cbmZ1bmN0aW9uIERyb3Bkb3duTWVudVBvcnRhbCh7XG4gIC4uLnByb3BzXG59OiBSZWFjdC5Db21wb25lbnRQcm9wczx0eXBlb2YgRHJvcGRvd25NZW51UHJpbWl0aXZlLlBvcnRhbD4pIHtcbiAgcmV0dXJuIChcbiAgICA8RHJvcGRvd25NZW51UHJpbWl0aXZlLlBvcnRhbCBkYXRhLXNsb3Q9XCJkcm9wZG93bi1tZW51LXBvcnRhbFwiIHsuLi5wcm9wc30gLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnVUcmlnZ2VyKHtcbiAgLi4ucHJvcHNcbn06IFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBEcm9wZG93bk1lbnVQcmltaXRpdmUuVHJpZ2dlcj4pIHtcbiAgcmV0dXJuIChcbiAgICA8RHJvcGRvd25NZW51UHJpbWl0aXZlLlRyaWdnZXJcbiAgICAgIGRhdGEtc2xvdD1cImRyb3Bkb3duLW1lbnUtdHJpZ2dlclwiXG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnVDb250ZW50KHtcbiAgY2xhc3NOYW1lLFxuICBzaWRlT2Zmc2V0ID0gNCxcbiAgLi4ucHJvcHNcbn06IFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBEcm9wZG93bk1lbnVQcmltaXRpdmUuQ29udGVudD4pIHtcbiAgcmV0dXJuIChcbiAgICA8RHJvcGRvd25NZW51UHJpbWl0aXZlLlBvcnRhbD5cbiAgICAgIDxEcm9wZG93bk1lbnVQcmltaXRpdmUuQ29udGVudFxuICAgICAgICBkYXRhLXNsb3Q9XCJkcm9wZG93bi1tZW51LWNvbnRlbnRcIlxuICAgICAgICBzaWRlT2Zmc2V0PXtzaWRlT2Zmc2V0fVxuICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgIFwiYmctcG9wb3ZlciB0ZXh0LXBvcG92ZXItZm9yZWdyb3VuZCBkYXRhLVtzdGF0ZT1vcGVuXTphbmltYXRlLWluIGRhdGEtW3N0YXRlPWNsb3NlZF06YW5pbWF0ZS1vdXQgZGF0YS1bc3RhdGU9Y2xvc2VkXTpmYWRlLW91dC0wIGRhdGEtW3N0YXRlPW9wZW5dOmZhZGUtaW4tMCBkYXRhLVtzdGF0ZT1jbG9zZWRdOnpvb20tb3V0LTk1IGRhdGEtW3N0YXRlPW9wZW5dOnpvb20taW4tOTUgZGF0YS1bc2lkZT1ib3R0b21dOnNsaWRlLWluLWZyb20tdG9wLTIgZGF0YS1bc2lkZT1sZWZ0XTpzbGlkZS1pbi1mcm9tLXJpZ2h0LTIgZGF0YS1bc2lkZT1yaWdodF06c2xpZGUtaW4tZnJvbS1sZWZ0LTIgZGF0YS1bc2lkZT10b3BdOnNsaWRlLWluLWZyb20tYm90dG9tLTIgei01MCBtYXgtaC0oLS1yYWRpeC1kcm9wZG93bi1tZW51LWNvbnRlbnQtYXZhaWxhYmxlLWhlaWdodCkgbWluLXctWzhyZW1dIG9yaWdpbi0oLS1yYWRpeC1kcm9wZG93bi1tZW51LWNvbnRlbnQtdHJhbnNmb3JtLW9yaWdpbikgb3ZlcmZsb3cteC1oaWRkZW4gb3ZlcmZsb3cteS1hdXRvIHJvdW5kZWQtbWQgYm9yZGVyIHAtMSBzaGFkb3ctbWRcIixcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKX1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgLz5cbiAgICA8L0Ryb3Bkb3duTWVudVByaW1pdGl2ZS5Qb3J0YWw+XG4gIClcbn1cblxuZnVuY3Rpb24gRHJvcGRvd25NZW51R3JvdXAoe1xuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERyb3Bkb3duTWVudVByaW1pdGl2ZS5Hcm91cD4pIHtcbiAgcmV0dXJuIChcbiAgICA8RHJvcGRvd25NZW51UHJpbWl0aXZlLkdyb3VwIGRhdGEtc2xvdD1cImRyb3Bkb3duLW1lbnUtZ3JvdXBcIiB7Li4ucHJvcHN9IC8+XG4gIClcbn1cblxuZnVuY3Rpb24gRHJvcGRvd25NZW51SXRlbSh7XG4gIGNsYXNzTmFtZSxcbiAgaW5zZXQsXG4gIHZhcmlhbnQgPSBcImRlZmF1bHRcIixcbiAgLi4ucHJvcHNcbn06IFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBEcm9wZG93bk1lbnVQcmltaXRpdmUuSXRlbT4gJiB7XG4gIGluc2V0PzogYm9vbGVhblxuICB2YXJpYW50PzogXCJkZWZhdWx0XCIgfCBcImRlc3RydWN0aXZlXCJcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8RHJvcGRvd25NZW51UHJpbWl0aXZlLkl0ZW1cbiAgICAgIGRhdGEtc2xvdD1cImRyb3Bkb3duLW1lbnUtaXRlbVwiXG4gICAgICBkYXRhLWluc2V0PXtpbnNldH1cbiAgICAgIGRhdGEtdmFyaWFudD17dmFyaWFudH1cbiAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgIFwiZm9jdXM6YmctYWNjZW50IGZvY3VzOnRleHQtYWNjZW50LWZvcmVncm91bmQgZGF0YS1bdmFyaWFudD1kZXN0cnVjdGl2ZV06dGV4dC1kZXN0cnVjdGl2ZSBkYXRhLVt2YXJpYW50PWRlc3RydWN0aXZlXTpmb2N1czpiZy1kZXN0cnVjdGl2ZS8xMCBkYXJrOmRhdGEtW3ZhcmlhbnQ9ZGVzdHJ1Y3RpdmVdOmZvY3VzOmJnLWRlc3RydWN0aXZlLzIwIGRhdGEtW3ZhcmlhbnQ9ZGVzdHJ1Y3RpdmVdOmZvY3VzOnRleHQtZGVzdHJ1Y3RpdmUgZGF0YS1bdmFyaWFudD1kZXN0cnVjdGl2ZV06Kjpbc3ZnXTohdGV4dC1kZXN0cnVjdGl2ZSBbJl9zdmc6bm90KFtjbGFzcyo9J3RleHQtJ10pXTp0ZXh0LW11dGVkLWZvcmVncm91bmQgcmVsYXRpdmUgZmxleCBjdXJzb3ItZGVmYXVsdCBpdGVtcy1jZW50ZXIgZ2FwLTIgcm91bmRlZC1zbSBweC0yIHB5LTEuNSB0ZXh0LXNtIG91dGxpbmUtaGlkZGVuIHNlbGVjdC1ub25lIGRhdGEtW2Rpc2FibGVkXTpwb2ludGVyLWV2ZW50cy1ub25lIGRhdGEtW2Rpc2FibGVkXTpvcGFjaXR5LTUwIGRhdGEtW2luc2V0XTpwbC04IFsmX3N2Z106cG9pbnRlci1ldmVudHMtbm9uZSBbJl9zdmddOnNocmluay0wIFsmX3N2Zzpub3QoW2NsYXNzKj0nc2l6ZS0nXSldOnNpemUtNFwiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnVDaGVja2JveEl0ZW0oe1xuICBjbGFzc05hbWUsXG4gIGNoaWxkcmVuLFxuICBjaGVja2VkLFxuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERyb3Bkb3duTWVudVByaW1pdGl2ZS5DaGVja2JveEl0ZW0+KSB7XG4gIHJldHVybiAoXG4gICAgPERyb3Bkb3duTWVudVByaW1pdGl2ZS5DaGVja2JveEl0ZW1cbiAgICAgIGRhdGEtc2xvdD1cImRyb3Bkb3duLW1lbnUtY2hlY2tib3gtaXRlbVwiXG4gICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICBcImZvY3VzOmJnLWFjY2VudCBmb2N1czp0ZXh0LWFjY2VudC1mb3JlZ3JvdW5kIHJlbGF0aXZlIGZsZXggY3Vyc29yLWRlZmF1bHQgaXRlbXMtY2VudGVyIGdhcC0yIHJvdW5kZWQtc20gcHktMS41IHByLTIgcGwtOCB0ZXh0LXNtIG91dGxpbmUtaGlkZGVuIHNlbGVjdC1ub25lIGRhdGEtW2Rpc2FibGVkXTpwb2ludGVyLWV2ZW50cy1ub25lIGRhdGEtW2Rpc2FibGVkXTpvcGFjaXR5LTUwIFsmX3N2Z106cG9pbnRlci1ldmVudHMtbm9uZSBbJl9zdmddOnNocmluay0wIFsmX3N2Zzpub3QoW2NsYXNzKj0nc2l6ZS0nXSldOnNpemUtNFwiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICBjaGVja2VkPXtjaGVja2VkfVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInBvaW50ZXItZXZlbnRzLW5vbmUgYWJzb2x1dGUgbGVmdC0yIGZsZXggc2l6ZS0zLjUgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgIDxEcm9wZG93bk1lbnVQcmltaXRpdmUuSXRlbUluZGljYXRvcj5cbiAgICAgICAgICA8Q2hlY2tJY29uIGNsYXNzTmFtZT1cInNpemUtNFwiIC8+XG4gICAgICAgIDwvRHJvcGRvd25NZW51UHJpbWl0aXZlLkl0ZW1JbmRpY2F0b3I+XG4gICAgICA8L3NwYW4+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9Ecm9wZG93bk1lbnVQcmltaXRpdmUuQ2hlY2tib3hJdGVtPlxuICApXG59XG5cbmZ1bmN0aW9uIERyb3Bkb3duTWVudVJhZGlvR3JvdXAoe1xuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERyb3Bkb3duTWVudVByaW1pdGl2ZS5SYWRpb0dyb3VwPikge1xuICByZXR1cm4gKFxuICAgIDxEcm9wZG93bk1lbnVQcmltaXRpdmUuUmFkaW9Hcm91cFxuICAgICAgZGF0YS1zbG90PVwiZHJvcGRvd24tbWVudS1yYWRpby1ncm91cFwiXG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnVSYWRpb0l0ZW0oe1xuICBjbGFzc05hbWUsXG4gIGNoaWxkcmVuLFxuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERyb3Bkb3duTWVudVByaW1pdGl2ZS5SYWRpb0l0ZW0+KSB7XG4gIHJldHVybiAoXG4gICAgPERyb3Bkb3duTWVudVByaW1pdGl2ZS5SYWRpb0l0ZW1cbiAgICAgIGRhdGEtc2xvdD1cImRyb3Bkb3duLW1lbnUtcmFkaW8taXRlbVwiXG4gICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICBcImZvY3VzOmJnLWFjY2VudCBmb2N1czp0ZXh0LWFjY2VudC1mb3JlZ3JvdW5kIHJlbGF0aXZlIGZsZXggY3Vyc29yLWRlZmF1bHQgaXRlbXMtY2VudGVyIGdhcC0yIHJvdW5kZWQtc20gcHktMS41IHByLTIgcGwtOCB0ZXh0LXNtIG91dGxpbmUtaGlkZGVuIHNlbGVjdC1ub25lIGRhdGEtW2Rpc2FibGVkXTpwb2ludGVyLWV2ZW50cy1ub25lIGRhdGEtW2Rpc2FibGVkXTpvcGFjaXR5LTUwIFsmX3N2Z106cG9pbnRlci1ldmVudHMtbm9uZSBbJl9zdmddOnNocmluay0wIFsmX3N2Zzpub3QoW2NsYXNzKj0nc2l6ZS0nXSldOnNpemUtNFwiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgPlxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicG9pbnRlci1ldmVudHMtbm9uZSBhYnNvbHV0ZSBsZWZ0LTIgZmxleCBzaXplLTMuNSBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgPERyb3Bkb3duTWVudVByaW1pdGl2ZS5JdGVtSW5kaWNhdG9yPlxuICAgICAgICAgIDxDaXJjbGVJY29uIGNsYXNzTmFtZT1cInNpemUtMiBmaWxsLWN1cnJlbnRcIiAvPlxuICAgICAgICA8L0Ryb3Bkb3duTWVudVByaW1pdGl2ZS5JdGVtSW5kaWNhdG9yPlxuICAgICAgPC9zcGFuPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvRHJvcGRvd25NZW51UHJpbWl0aXZlLlJhZGlvSXRlbT5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnVMYWJlbCh7XG4gIGNsYXNzTmFtZSxcbiAgaW5zZXQsXG4gIC4uLnByb3BzXG59OiBSZWFjdC5Db21wb25lbnRQcm9wczx0eXBlb2YgRHJvcGRvd25NZW51UHJpbWl0aXZlLkxhYmVsPiAmIHtcbiAgaW5zZXQ/OiBib29sZWFuXG59KSB7XG4gIHJldHVybiAoXG4gICAgPERyb3Bkb3duTWVudVByaW1pdGl2ZS5MYWJlbFxuICAgICAgZGF0YS1zbG90PVwiZHJvcGRvd24tbWVudS1sYWJlbFwiXG4gICAgICBkYXRhLWluc2V0PXtpbnNldH1cbiAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgIFwicHgtMiBweS0xLjUgdGV4dC1zbSBmb250LW1lZGl1bSBkYXRhLVtpbnNldF06cGwtOFwiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnVTZXBhcmF0b3Ioe1xuICBjbGFzc05hbWUsXG4gIC4uLnByb3BzXG59OiBSZWFjdC5Db21wb25lbnRQcm9wczx0eXBlb2YgRHJvcGRvd25NZW51UHJpbWl0aXZlLlNlcGFyYXRvcj4pIHtcbiAgcmV0dXJuIChcbiAgICA8RHJvcGRvd25NZW51UHJpbWl0aXZlLlNlcGFyYXRvclxuICAgICAgZGF0YS1zbG90PVwiZHJvcGRvd24tbWVudS1zZXBhcmF0b3JcIlxuICAgICAgY2xhc3NOYW1lPXtjbihcImJnLWJvcmRlciAtbXgtMSBteS0xIGgtcHhcIiwgY2xhc3NOYW1lKX1cbiAgICAgIHsuLi5wcm9wc31cbiAgICAvPlxuICApXG59XG5cbmZ1bmN0aW9uIERyb3Bkb3duTWVudVNob3J0Y3V0KHtcbiAgY2xhc3NOYW1lLFxuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8XCJzcGFuXCI+KSB7XG4gIHJldHVybiAoXG4gICAgPHNwYW5cbiAgICAgIGRhdGEtc2xvdD1cImRyb3Bkb3duLW1lbnUtc2hvcnRjdXRcIlxuICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgXCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgbWwtYXV0byB0ZXh0LXhzIHRyYWNraW5nLXdpZGVzdFwiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKVxufVxuXG5mdW5jdGlvbiBEcm9wZG93bk1lbnVTdWIoe1xuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERyb3Bkb3duTWVudVByaW1pdGl2ZS5TdWI+KSB7XG4gIHJldHVybiA8RHJvcGRvd25NZW51UHJpbWl0aXZlLlN1YiBkYXRhLXNsb3Q9XCJkcm9wZG93bi1tZW51LXN1YlwiIHsuLi5wcm9wc30gLz5cbn1cblxuZnVuY3Rpb24gRHJvcGRvd25NZW51U3ViVHJpZ2dlcih7XG4gIGNsYXNzTmFtZSxcbiAgaW5zZXQsXG4gIGNoaWxkcmVuLFxuICAuLi5wcm9wc1xufTogUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIERyb3Bkb3duTWVudVByaW1pdGl2ZS5TdWJUcmlnZ2VyPiAmIHtcbiAgaW5zZXQ/OiBib29sZWFuXG59KSB7XG4gIHJldHVybiAoXG4gICAgPERyb3Bkb3duTWVudVByaW1pdGl2ZS5TdWJUcmlnZ2VyXG4gICAgICBkYXRhLXNsb3Q9XCJkcm9wZG93bi1tZW51LXN1Yi10cmlnZ2VyXCJcbiAgICAgIGRhdGEtaW5zZXQ9e2luc2V0fVxuICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgXCJmb2N1czpiZy1hY2NlbnQgZm9jdXM6dGV4dC1hY2NlbnQtZm9yZWdyb3VuZCBkYXRhLVtzdGF0ZT1vcGVuXTpiZy1hY2NlbnQgZGF0YS1bc3RhdGU9b3Blbl06dGV4dC1hY2NlbnQtZm9yZWdyb3VuZCBmbGV4IGN1cnNvci1kZWZhdWx0IGl0ZW1zLWNlbnRlciByb3VuZGVkLXNtIHB4LTIgcHktMS41IHRleHQtc20gb3V0bGluZS1oaWRkZW4gc2VsZWN0LW5vbmUgZGF0YS1baW5zZXRdOnBsLThcIixcbiAgICAgICAgY2xhc3NOYW1lXG4gICAgICApfVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDxDaGV2cm9uUmlnaHRJY29uIGNsYXNzTmFtZT1cIm1sLWF1dG8gc2l6ZS00XCIgLz5cbiAgICA8L0Ryb3Bkb3duTWVudVByaW1pdGl2ZS5TdWJUcmlnZ2VyPlxuICApXG59XG5cbmZ1bmN0aW9uIERyb3Bkb3duTWVudVN1YkNvbnRlbnQoe1xuICBjbGFzc05hbWUsXG4gIC4uLnByb3BzXG59OiBSZWFjdC5Db21wb25lbnRQcm9wczx0eXBlb2YgRHJvcGRvd25NZW51UHJpbWl0aXZlLlN1YkNvbnRlbnQ+KSB7XG4gIHJldHVybiAoXG4gICAgPERyb3Bkb3duTWVudVByaW1pdGl2ZS5TdWJDb250ZW50XG4gICAgICBkYXRhLXNsb3Q9XCJkcm9wZG93bi1tZW51LXN1Yi1jb250ZW50XCJcbiAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgIFwiYmctcG9wb3ZlciB0ZXh0LXBvcG92ZXItZm9yZWdyb3VuZCBkYXRhLVtzdGF0ZT1vcGVuXTphbmltYXRlLWluIGRhdGEtW3N0YXRlPWNsb3NlZF06YW5pbWF0ZS1vdXQgZGF0YS1bc3RhdGU9Y2xvc2VkXTpmYWRlLW91dC0wIGRhdGEtW3N0YXRlPW9wZW5dOmZhZGUtaW4tMCBkYXRhLVtzdGF0ZT1jbG9zZWRdOnpvb20tb3V0LTk1IGRhdGEtW3N0YXRlPW9wZW5dOnpvb20taW4tOTUgZGF0YS1bc2lkZT1ib3R0b21dOnNsaWRlLWluLWZyb20tdG9wLTIgZGF0YS1bc2lkZT1sZWZ0XTpzbGlkZS1pbi1mcm9tLXJpZ2h0LTIgZGF0YS1bc2lkZT1yaWdodF06c2xpZGUtaW4tZnJvbS1sZWZ0LTIgZGF0YS1bc2lkZT10b3BdOnNsaWRlLWluLWZyb20tYm90dG9tLTIgei01MCBtaW4tdy1bOHJlbV0gb3JpZ2luLSgtLXJhZGl4LWRyb3Bkb3duLW1lbnUtY29udGVudC10cmFuc2Zvcm0tb3JpZ2luKSBvdmVyZmxvdy1oaWRkZW4gcm91bmRlZC1tZCBib3JkZXIgcC0xIHNoYWRvdy1sZ1wiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKVxufVxuXG5leHBvcnQge1xuICBEcm9wZG93bk1lbnUsXG4gIERyb3Bkb3duTWVudVBvcnRhbCxcbiAgRHJvcGRvd25NZW51VHJpZ2dlcixcbiAgRHJvcGRvd25NZW51Q29udGVudCxcbiAgRHJvcGRvd25NZW51R3JvdXAsXG4gIERyb3Bkb3duTWVudUxhYmVsLFxuICBEcm9wZG93bk1lbnVJdGVtLFxuICBEcm9wZG93bk1lbnVDaGVja2JveEl0ZW0sXG4gIERyb3Bkb3duTWVudVJhZGlvR3JvdXAsXG4gIERyb3Bkb3duTWVudVJhZGlvSXRlbSxcbiAgRHJvcGRvd25NZW51U2VwYXJhdG9yLFxuICBEcm9wZG93bk1lbnVTaG9ydGN1dCxcbiAgRHJvcGRvd25NZW51U3ViLFxuICBEcm9wZG93bk1lbnVTdWJUcmlnZ2VyLFxuICBEcm9wZG93bk1lbnVTdWJDb250ZW50LFxufVxuIiwiaW1wb3J0IHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYsIHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gXCJ0YWlsd2luZC1tZXJnZVwiO1xuXG4vKiogRmluaXRlLXN0YXRlIG1hY2hpbmUgZm9yIGV2ZXJ5IHJlY29yZGVyIGltcGxlbWVudGF0aW9uICovXG5leHBvcnQgdHlwZSBBdWRpb1JlY29yZGVyU3RhdGUgPSBcImlkbGVcIiB8IFwicmVjb3JkaW5nXCIgfCBcInByb2Nlc3NpbmdcIjtcblxuLyoqIEVycm9yIHN1YmNsYXNzIHNvIGNhbGxlcnMgY2FuIGBpbnN0YW5jZW9mYC1ndWFyZCByZWNvcmRlciBmYWlsdXJlcyAqL1xuZXhwb3J0IGNsYXNzIEF1ZGlvUmVjb3JkZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJBdWRpb1JlY29yZGVyRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGlvUmVjb3JkZXJSZWYge1xuICBzdGF0ZTogQXVkaW9SZWNvcmRlclN0YXRlO1xuICBzdGFydDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc3RvcDogKCkgPT4gUHJvbWlzZTxCbG9iPjtcbiAgZGlzcG9zZTogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IENvcGlsb3RDaGF0QXVkaW9SZWNvcmRlciA9IGZvcndhcmRSZWY8XG4gIEF1ZGlvUmVjb3JkZXJSZWYsXG4gIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50PlxuPigocHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4uZGl2UHJvcHMgfSA9IHByb3BzO1xuICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpO1xuXG4gIC8vIFJlY29yZGluZyBzdGF0ZVxuICBjb25zdCBbcmVjb3JkZXJTdGF0ZSwgc2V0UmVjb3JkZXJTdGF0ZV0gPSB1c2VTdGF0ZTxBdWRpb1JlY29yZGVyU3RhdGU+KFwiaWRsZVwiKTtcbiAgY29uc3QgbWVkaWFSZWNvcmRlclJlZiA9IHVzZVJlZjxNZWRpYVJlY29yZGVyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvQ2h1bmtzUmVmID0gdXNlUmVmPEJsb2JbXT4oW10pO1xuICBjb25zdCBzdHJlYW1SZWYgPSB1c2VSZWY8TWVkaWFTdHJlYW0gfCBudWxsPihudWxsKTtcbiAgY29uc3QgYW5hbHlzZXJSZWYgPSB1c2VSZWY8QW5hbHlzZXJOb2RlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvQ29udGV4dFJlZiA9IHVzZVJlZjxBdWRpb0NvbnRleHQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYW5pbWF0aW9uSWRSZWYgPSB1c2VSZWY8bnVtYmVyIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gQW1wbGl0dWRlIGhpc3RvcnkgYnVmZmVyIGZvciBzY3JvbGxpbmcgd2F2ZWZvcm1cbiAgY29uc3QgYW1wbGl0dWRlSGlzdG9yeVJlZiA9IHVzZVJlZjxudW1iZXJbXT4oW10pO1xuICBjb25zdCBmcmFtZUNvdW50UmVmID0gdXNlUmVmPG51bWJlcj4oMCk7XG4gIGNvbnN0IHNjcm9sbE9mZnNldFJlZiA9IHVzZVJlZjxudW1iZXI+KDApO1xuICBjb25zdCBzbW9vdGhlZEFtcGxpdHVkZVJlZiA9IHVzZVJlZjxudW1iZXI+KDApO1xuICBjb25zdCBmYWRlT3BhY2l0eVJlZiA9IHVzZVJlZjxudW1iZXI+KDApO1xuXG4gIC8vIENsZWFuIHVwIGFsbCByZXNvdXJjZXNcbiAgY29uc3QgY2xlYW51cCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoYW5pbWF0aW9uSWRSZWYuY3VycmVudCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uSWRSZWYuY3VycmVudCk7XG4gICAgICBhbmltYXRpb25JZFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudCAmJiBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQuc3RhdGUgIT09IFwiaW5hY3RpdmVcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbWVkaWFSZWNvcmRlclJlZi5jdXJyZW50LnN0b3AoKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBJZ25vcmUgZXJyb3JzIGR1cmluZyBjbGVhbnVwXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzdHJlYW1SZWYuY3VycmVudCkge1xuICAgICAgc3RyZWFtUmVmLmN1cnJlbnQuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICBzdHJlYW1SZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIGlmIChhdWRpb0NvbnRleHRSZWYuY3VycmVudCAmJiBhdWRpb0NvbnRleHRSZWYuY3VycmVudC5zdGF0ZSAhPT0gXCJjbG9zZWRcIikge1xuICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQuY2xvc2UoKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIElnbm9yZSBjbG9zZSBlcnJvcnNcbiAgICAgIH0pO1xuICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIGFuYWx5c2VyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIGF1ZGlvQ2h1bmtzUmVmLmN1cnJlbnQgPSBbXTtcbiAgICBhbXBsaXR1ZGVIaXN0b3J5UmVmLmN1cnJlbnQgPSBbXTtcbiAgICBmcmFtZUNvdW50UmVmLmN1cnJlbnQgPSAwO1xuICAgIHNjcm9sbE9mZnNldFJlZi5jdXJyZW50ID0gMDtcbiAgICBzbW9vdGhlZEFtcGxpdHVkZVJlZi5jdXJyZW50ID0gMDtcbiAgICBmYWRlT3BhY2l0eVJlZi5jdXJyZW50ID0gMDtcbiAgfSwgW10pO1xuXG4gIC8vIFN0YXJ0IHJlY29yZGluZ1xuICBjb25zdCBzdGFydCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAocmVjb3JkZXJTdGF0ZSAhPT0gXCJpZGxlXCIpIHtcbiAgICAgIHRocm93IG5ldyBBdWRpb1JlY29yZGVyRXJyb3IoXCJSZWNvcmRlciBpcyBhbHJlYWR5IGFjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gUmVxdWVzdCBtaWNyb3Bob25lIGFjY2Vzc1xuICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSB9KTtcbiAgICAgIHN0cmVhbVJlZi5jdXJyZW50ID0gc3RyZWFtO1xuXG4gICAgICAvLyBTZXQgdXAgYXVkaW8gY29udGV4dCBmb3IgdmlzdWFsaXphdGlvblxuICAgICAgY29uc3QgYXVkaW9Db250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQgPSBhdWRpb0NvbnRleHQ7XG4gICAgICBjb25zdCBzb3VyY2UgPSBhdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTtcbiAgICAgIGNvbnN0IGFuYWx5c2VyID0gYXVkaW9Db250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7XG4gICAgICBhbmFseXNlci5mZnRTaXplID0gMjA0ODsgLy8gSGlnaGVyIHJlc29sdXRpb24gZm9yIHRpbWUtZG9tYWluIHdhdmVmb3JtXG4gICAgICBzb3VyY2UuY29ubmVjdChhbmFseXNlcik7XG4gICAgICBhbmFseXNlclJlZi5jdXJyZW50ID0gYW5hbHlzZXI7XG5cbiAgICAgIC8vIERldGVybWluZSBiZXN0IE1JTUUgdHlwZSBmb3IgcmVjb3JkaW5nXG4gICAgICBjb25zdCBtaW1lVHlwZSA9IE1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vd2VibTtjb2RlY3M9b3B1c1wiKVxuICAgICAgICA/IFwiYXVkaW8vd2VibTtjb2RlY3M9b3B1c1wiXG4gICAgICAgIDogTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby93ZWJtXCIpXG4gICAgICAgICAgPyBcImF1ZGlvL3dlYm1cIlxuICAgICAgICAgIDogTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby9tcDRcIilcbiAgICAgICAgICAgID8gXCJhdWRpby9tcDRcIlxuICAgICAgICAgICAgOiBcIlwiO1xuXG4gICAgICBjb25zdCBvcHRpb25zOiBNZWRpYVJlY29yZGVyT3B0aW9ucyA9IG1pbWVUeXBlID8geyBtaW1lVHlwZSB9IDoge307XG4gICAgICBjb25zdCBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoc3RyZWFtLCBvcHRpb25zKTtcbiAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudCA9IG1lZGlhUmVjb3JkZXI7XG4gICAgICBhdWRpb0NodW5rc1JlZi5jdXJyZW50ID0gW107XG5cbiAgICAgIG1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5kYXRhLnNpemUgPiAwKSB7XG4gICAgICAgICAgYXVkaW9DaHVua3NSZWYuY3VycmVudC5wdXNoKGV2ZW50LmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBTdGFydCByZWNvcmRpbmcgd2l0aCB0aW1lc2xpY2UgdG8gY29sbGVjdCBkYXRhIHBlcmlvZGljYWxseVxuICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgxMDApO1xuICAgICAgc2V0UmVjb3JkZXJTdGF0ZShcInJlY29yZGluZ1wiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY2xlYW51cCgpO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJOb3RBbGxvd2VkRXJyb3JcIikge1xuICAgICAgICB0aHJvdyBuZXcgQXVkaW9SZWNvcmRlckVycm9yKFwiTWljcm9waG9uZSBwZXJtaXNzaW9uIGRlbmllZFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09IFwiTm90Rm91bmRFcnJvclwiKSB7XG4gICAgICAgIHRocm93IG5ldyBBdWRpb1JlY29yZGVyRXJyb3IoXCJObyBtaWNyb3Bob25lIGZvdW5kXCIpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEF1ZGlvUmVjb3JkZXJFcnJvcihcbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzdGFydCByZWNvcmRpbmdcIlxuICAgICAgKTtcbiAgICB9XG4gIH0sIFtyZWNvcmRlclN0YXRlLCBjbGVhbnVwXSk7XG5cbiAgLy8gU3RvcCByZWNvcmRpbmcgYW5kIHJldHVybiBhdWRpbyBibG9iXG4gIGNvbnN0IHN0b3AgPSB1c2VDYWxsYmFjaygoKTogUHJvbWlzZTxCbG9iPiA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IG1lZGlhUmVjb3JkZXIgPSBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIW1lZGlhUmVjb3JkZXIgfHwgcmVjb3JkZXJTdGF0ZSAhPT0gXCJyZWNvcmRpbmdcIikge1xuICAgICAgICByZWplY3QobmV3IEF1ZGlvUmVjb3JkZXJFcnJvcihcIk5vIGFjdGl2ZSByZWNvcmRpbmdcIikpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldFJlY29yZGVyU3RhdGUoXCJwcm9jZXNzaW5nXCIpO1xuXG4gICAgICBtZWRpYVJlY29yZGVyLm9uc3RvcCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbWltZVR5cGUgPSBtZWRpYVJlY29yZGVyLm1pbWVUeXBlIHx8IFwiYXVkaW8vd2VibVwiO1xuICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBuZXcgQmxvYihhdWRpb0NodW5rc1JlZi5jdXJyZW50LCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xuXG4gICAgICAgIC8vIENsZWFuIHVwIGJ1dCBrZWVwIHRoZSBibG9iXG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgc2V0UmVjb3JkZXJTdGF0ZShcImlkbGVcIik7XG4gICAgICAgIHJlc29sdmUoYXVkaW9CbG9iKTtcbiAgICAgIH07XG5cbiAgICAgIG1lZGlhUmVjb3JkZXIub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICBzZXRSZWNvcmRlclN0YXRlKFwiaWRsZVwiKTtcbiAgICAgICAgcmVqZWN0KG5ldyBBdWRpb1JlY29yZGVyRXJyb3IoXCJSZWNvcmRpbmcgZmFpbGVkXCIpKTtcbiAgICAgIH07XG5cbiAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpO1xuICAgIH0pO1xuICB9LCBbcmVjb3JkZXJTdGF0ZSwgY2xlYW51cF0pO1xuXG4gIC8vIENhbGN1bGF0ZSBSTVMgYW1wbGl0dWRlIGZyb20gdGltZS1kb21haW4gZGF0YVxuICBjb25zdCBjYWxjdWxhdGVBbXBsaXR1ZGUgPSAoZGF0YUFycmF5OiBVaW50OEFycmF5KTogbnVtYmVyID0+IHtcbiAgICBsZXQgc3VtID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gTm9ybWFsaXplIHRvIC0xIHRvIDEgcmFuZ2UgKDEyOCBpcyBjZW50ZXIvc2lsZW5jZSlcbiAgICAgIGNvbnN0IHNhbXBsZSA9IChkYXRhQXJyYXlbaV0gPz8gMTI4KSAvIDEyOCAtIDE7XG4gICAgICBzdW0gKz0gc2FtcGxlICogc2FtcGxlO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5zcXJ0KHN1bSAvIGRhdGFBcnJheS5sZW5ndGgpO1xuICB9O1xuXG4gIC8vIENhbnZhcyByZW5kZXJpbmcgd2l0aCBhbmltYXRpb25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuO1xuXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBpZiAoIWN0eCkgcmV0dXJuO1xuXG4gICAgLy8gQ29uZmlndXJhdGlvblxuICAgIGNvbnN0IGJhcldpZHRoID0gMjtcbiAgICBjb25zdCBiYXJHYXAgPSAxO1xuICAgIGNvbnN0IGJhclNwYWNpbmcgPSBiYXJXaWR0aCArIGJhckdhcDtcbiAgICBjb25zdCBzY3JvbGxTcGVlZCA9IDEgLyAzOyAvLyBQaXhlbHMgcGVyIGZyYW1lXG5cbiAgICBjb25zdCBkcmF3ID0gKCkgPT4ge1xuICAgICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG5cbiAgICAgIC8vIFVwZGF0ZSBjYW52YXMgZGltZW5zaW9ucyBpZiBjb250YWluZXIgcmVzaXplZFxuICAgICAgaWYgKGNhbnZhcy53aWR0aCAhPT0gcmVjdC53aWR0aCAqIGRwciB8fCBjYW52YXMuaGVpZ2h0ICE9PSByZWN0LmhlaWdodCAqIGRwcikge1xuICAgICAgICBjYW52YXMud2lkdGggPSByZWN0LndpZHRoICogZHByO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiBkcHI7XG4gICAgICAgIGN0eC5zY2FsZShkcHIsIGRwcik7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBob3cgbWFueSBiYXJzIGZpdCBpbiB0aGUgY2FudmFzIChwbHVzIGV4dHJhIGZvciBzbW9vdGggc2Nyb2xsaW5nKVxuICAgICAgY29uc3QgbWF4QmFycyA9IE1hdGguZmxvb3IocmVjdC53aWR0aCAvIGJhclNwYWNpbmcpICsgMjtcblxuICAgICAgLy8gR2V0IGN1cnJlbnQgYW1wbGl0dWRlIGlmIHJlY29yZGluZ1xuICAgICAgaWYgKGFuYWx5c2VyUmVmLmN1cnJlbnQgJiYgcmVjb3JkZXJTdGF0ZSA9PT0gXCJyZWNvcmRpbmdcIikge1xuICAgICAgICAvLyBQcmUtZmlsbCBoaXN0b3J5IHdpdGggemVyb3Mgb24gZmlyc3QgZnJhbWUgc28gbGluZSBpcyB2aXNpYmxlIGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChhbXBsaXR1ZGVIaXN0b3J5UmVmLmN1cnJlbnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgYW1wbGl0dWRlSGlzdG9yeVJlZi5jdXJyZW50ID0gbmV3IEFycmF5KG1heEJhcnMpLmZpbGwoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGYWRlIGluIHRoZSB3YXZlZm9ybSBzbW9vdGhseVxuICAgICAgICBpZiAoZmFkZU9wYWNpdHlSZWYuY3VycmVudCA8IDEpIHtcbiAgICAgICAgICBmYWRlT3BhY2l0eVJlZi5jdXJyZW50ID0gTWF0aC5taW4oMSwgZmFkZU9wYWNpdHlSZWYuY3VycmVudCArIDAuMDMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU21vb3RoIHNjcm9sbGluZyAtIGluY3JlbWVudCBvZmZzZXQgZXZlcnkgZnJhbWVcbiAgICAgICAgc2Nyb2xsT2Zmc2V0UmVmLmN1cnJlbnQgKz0gc2Nyb2xsU3BlZWQ7XG5cbiAgICAgICAgLy8gU2FtcGxlIGFtcGxpdHVkZSBldmVyeSBmcmFtZSBmb3Igc21vb3RoaW5nXG4gICAgICAgIGNvbnN0IGJ1ZmZlckxlbmd0aCA9IGFuYWx5c2VyUmVmLmN1cnJlbnQuZmZ0U2l6ZTtcbiAgICAgICAgY29uc3QgZGF0YUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyTGVuZ3RoKTtcbiAgICAgICAgYW5hbHlzZXJSZWYuY3VycmVudC5nZXRCeXRlVGltZURvbWFpbkRhdGEoZGF0YUFycmF5KTtcbiAgICAgICAgY29uc3QgcmF3QW1wbGl0dWRlID0gY2FsY3VsYXRlQW1wbGl0dWRlKGRhdGFBcnJheSk7XG5cbiAgICAgICAgLy8gU21vb3RoaW5nOiBncmFkdWFsIGF0dGFjayBhbmQgZGVjYXlcbiAgICAgICAgY29uc3QgYXR0YWNrU3BlZWQgPSAwLjEyOyAvLyBTbW9vdGggcmlzZVxuICAgICAgICBjb25zdCBkZWNheVNwZWVkID0gMC4wODsgLy8gU21vb3RoIGZhZGUgb3V0XG4gICAgICAgIGNvbnN0IHNwZWVkID0gcmF3QW1wbGl0dWRlID4gc21vb3RoZWRBbXBsaXR1ZGVSZWYuY3VycmVudCA/IGF0dGFja1NwZWVkIDogZGVjYXlTcGVlZDtcbiAgICAgICAgc21vb3RoZWRBbXBsaXR1ZGVSZWYuY3VycmVudCArPSAocmF3QW1wbGl0dWRlIC0gc21vb3RoZWRBbXBsaXR1ZGVSZWYuY3VycmVudCkgKiBzcGVlZDtcblxuICAgICAgICAvLyBXaGVuIG9mZnNldCByZWFjaGVzIGEgZnVsbCBiYXIgd2lkdGgsIGFkZCBhIG5ldyBzYW1wbGUgYW5kIHJlc2V0IG9mZnNldFxuICAgICAgICBpZiAoc2Nyb2xsT2Zmc2V0UmVmLmN1cnJlbnQgPj0gYmFyU3BhY2luZykge1xuICAgICAgICAgIHNjcm9sbE9mZnNldFJlZi5jdXJyZW50IC09IGJhclNwYWNpbmc7XG4gICAgICAgICAgYW1wbGl0dWRlSGlzdG9yeVJlZi5jdXJyZW50LnB1c2goc21vb3RoZWRBbXBsaXR1ZGVSZWYuY3VycmVudCk7XG5cbiAgICAgICAgICAvLyBUcmltIGhpc3RvcnkgdG8gZml0IGNhbnZhc1xuICAgICAgICAgIGlmIChhbXBsaXR1ZGVIaXN0b3J5UmVmLmN1cnJlbnQubGVuZ3RoID4gbWF4QmFycykge1xuICAgICAgICAgICAgYW1wbGl0dWRlSGlzdG9yeVJlZi5jdXJyZW50ID0gYW1wbGl0dWRlSGlzdG9yeVJlZi5jdXJyZW50LnNsaWNlKC1tYXhCYXJzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgY2FudmFzXG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0KTtcblxuICAgICAgLy8gR2V0IGN1cnJlbnQgZm9yZWdyb3VuZCBjb2xvclxuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoY2FudmFzKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBjb21wdXRlZFN0eWxlLmNvbG9yO1xuICAgICAgY3R4Lmdsb2JhbEFscGhhID0gZmFkZU9wYWNpdHlSZWYuY3VycmVudDtcblxuICAgICAgY29uc3QgY2VudGVyWSA9IHJlY3QuaGVpZ2h0IC8gMjtcbiAgICAgIGNvbnN0IG1heEFtcGxpdHVkZSA9IHJlY3QuaGVpZ2h0IC8gMiAtIDI7IC8vIExlYXZlIHNvbWUgcGFkZGluZ1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gYW1wbGl0dWRlSGlzdG9yeVJlZi5jdXJyZW50O1xuXG4gICAgICAvLyBPbmx5IGRyYXcgd2hlbiByZWNvcmRpbmcgKGhpc3RvcnkgaGFzIGRhdGEpXG4gICAgICBpZiAoaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHNjcm9sbE9mZnNldFJlZi5jdXJyZW50O1xuICAgICAgICBjb25zdCBlZGdlRmFkZVdpZHRoID0gMTI7IC8vIFBpeGVscyB0byBmYWRlIGF0IGVhY2ggZWRnZVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGlzdG9yeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGFtcGxpdHVkZSA9IGhpc3RvcnlbaV0gPz8gMDtcbiAgICAgICAgICAvLyBTY2FsZSBhbXBsaXR1ZGUgKFJNUyBpcyB0eXBpY2FsbHkgMC0wLjUgZm9yIG5vcm1hbCBzcGVlY2gpXG4gICAgICAgICAgY29uc3Qgc2NhbGVkQW1wbGl0dWRlID0gTWF0aC5taW4oYW1wbGl0dWRlICogNCwgMSk7XG4gICAgICAgICAgY29uc3QgYmFySGVpZ2h0ID0gTWF0aC5tYXgoMiwgc2NhbGVkQW1wbGl0dWRlICogbWF4QW1wbGl0dWRlICogMik7XG5cbiAgICAgICAgICAvLyBQb3NpdGlvbjogcmlnaHQtYWxpZ25lZCB3aXRoIHNtb290aCBzY3JvbGwgb2Zmc2V0XG4gICAgICAgICAgY29uc3QgeCA9IHJlY3Qud2lkdGggLSAoaGlzdG9yeS5sZW5ndGggLSBpKSAqIGJhclNwYWNpbmcgLSBvZmZzZXQ7XG4gICAgICAgICAgY29uc3QgeSA9IGNlbnRlclkgLSBiYXJIZWlnaHQgLyAyO1xuXG4gICAgICAgICAgLy8gT25seSBkcmF3IGlmIHZpc2libGVcbiAgICAgICAgICBpZiAoeCArIGJhcldpZHRoID4gMCAmJiB4IDwgcmVjdC53aWR0aCkge1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGVkZ2UgZmFkZSBvcGFjaXR5XG4gICAgICAgICAgICBsZXQgZWRnZU9wYWNpdHkgPSAxO1xuICAgICAgICAgICAgaWYgKHggPCBlZGdlRmFkZVdpZHRoKSB7XG4gICAgICAgICAgICAgIC8vIEZhZGUgb3V0IG9uIGxlZnQgZWRnZVxuICAgICAgICAgICAgICBlZGdlT3BhY2l0eSA9IE1hdGgubWF4KDAsIHggLyBlZGdlRmFkZVdpZHRoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA+IHJlY3Qud2lkdGggLSBlZGdlRmFkZVdpZHRoKSB7XG4gICAgICAgICAgICAgIC8vIEZhZGUgaW4gb24gcmlnaHQgZWRnZVxuICAgICAgICAgICAgICBlZGdlT3BhY2l0eSA9IE1hdGgubWF4KDAsIChyZWN0LndpZHRoIC0geCkgLyBlZGdlRmFkZVdpZHRoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gZmFkZU9wYWNpdHlSZWYuY3VycmVudCAqIGVkZ2VPcGFjaXR5O1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHgsIHksIGJhcldpZHRoLCBiYXJIZWlnaHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhbmltYXRpb25JZFJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXcpO1xuICAgIH07XG5cbiAgICBkcmF3KCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGFuaW1hdGlvbklkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uSWRSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3JlY29yZGVyU3RhdGVdKTtcblxuICAvLyBDbGVhbnVwIG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gY2xlYW51cDtcbiAgfSwgW2NsZWFudXBdKTtcblxuICAvLyBFeHBvc2UgQXVkaW9SZWNvcmRlciBBUEkgdmlhIHJlZlxuICB1c2VJbXBlcmF0aXZlSGFuZGxlKFxuICAgIHJlZixcbiAgICAoKSA9PiAoe1xuICAgICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gcmVjb3JkZXJTdGF0ZTtcbiAgICAgIH0sXG4gICAgICBzdGFydCxcbiAgICAgIHN0b3AsXG4gICAgICBkaXNwb3NlOiBjbGVhbnVwLFxuICAgIH0pLFxuICAgIFtyZWNvcmRlclN0YXRlLCBzdGFydCwgc3RvcCwgY2xlYW51cF1cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXt0d01lcmdlKFwidy1mdWxsIHB5LTMgcHgtNVwiLCBjbGFzc05hbWUpfSB7Li4uZGl2UHJvcHN9PlxuICAgICAgPGNhbnZhcyByZWY9e2NhbnZhc1JlZn0gY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIGgtWzI2cHhdXCIgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn0pO1xuXG5Db3BpbG90Q2hhdEF1ZGlvUmVjb3JkZXIuZGlzcGxheU5hbWUgPSBcIkNvcGlsb3RDaGF0QXVkaW9SZWNvcmRlclwiO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG4vKiogRXhpc3RpbmcgdW5pb24gKHVuY2hhbmdlZCkgKi9cbmV4cG9ydCB0eXBlIFNsb3RWYWx1ZTxDIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+PiA9XG4gIHwgQ1xuICB8IHN0cmluZ1xuICB8IFBhcnRpYWw8UmVhY3QuQ29tcG9uZW50UHJvcHM8Qz4+O1xuXG4vKipcbiAqIFNoYWxsb3cgZXF1YWxpdHkgY29tcGFyaXNvbiBmb3Igb2JqZWN0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dFcXVhbDxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KG9iajE6IFQsIG9iajI6IFQpOiBib29sZWFuIHtcbiAgY29uc3Qga2V5czEgPSBPYmplY3Qua2V5cyhvYmoxKTtcbiAgY29uc3Qga2V5czIgPSBPYmplY3Qua2V5cyhvYmoyKTtcblxuICBpZiAoa2V5czEubGVuZ3RoICE9PSBrZXlzMi5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzMSkge1xuICAgIGlmIChvYmoxW2tleV0gIT09IG9iajJba2V5XSkgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKiBVdGlsaXR5OiBjb25jcmV0ZSBSZWFjdCBlbGVtZW50cyBmb3IgZXZlcnkgc2xvdCAqL1xudHlwZSBTbG90RWxlbWVudHM8Uz4gPSB7IFtLIGluIGtleW9mIFNdOiBSZWFjdC5SZWFjdEVsZW1lbnQgfTtcblxuZXhwb3J0IHR5cGUgV2l0aFNsb3RzPFxuICBTIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+PixcbiAgUmVzdCA9IHt9LFxuPiA9IHtcbiAgLyoqIFBlcuKAkXNsb3Qgb3ZlcnJpZGVzICovXG4gIFtLIGluIGtleW9mIFNdPzogU2xvdFZhbHVlPFNbS10+O1xufSAmIHtcbiAgY2hpbGRyZW4/OiAocHJvcHM6IFNsb3RFbGVtZW50czxTPiAmIFJlc3QpID0+IFJlYWN0LlJlYWN0Tm9kZTtcbn0gJiBPbWl0PFJlc3QsIFwiY2hpbGRyZW5cIj47XG5cbi8qKlxuICogSW50ZXJuYWwgZnVuY3Rpb24gdG8gcmVuZGVyIGEgc2xvdCB2YWx1ZSBhcyBhIFJlYWN0IGVsZW1lbnQgKG5vbi1tZW1vaXplZCkuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclNsb3RFbGVtZW50KFxuICBzbG90OiBTbG90VmFsdWU8UmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+PiB8IHVuZGVmaW5lZCxcbiAgRGVmYXVsdENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICBwcm9wczogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbik6IFJlYWN0LlJlYWN0RWxlbWVudCB7XG4gIGlmICh0eXBlb2Ygc2xvdCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERlZmF1bHRDb21wb25lbnQsIHtcbiAgICAgIC4uLnByb3BzLFxuICAgICAgY2xhc3NOYW1lOiBzbG90LFxuICAgIH0pO1xuICB9XG4gIGlmICh0eXBlb2Ygc2xvdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoc2xvdCBhcyBSZWFjdC5Db21wb25lbnRUeXBlPGFueT4sIHByb3BzKTtcbiAgfVxuXG4gIGlmIChzbG90ICYmIHR5cGVvZiBzbG90ID09PSBcIm9iamVjdFwiICYmICFSZWFjdC5pc1ZhbGlkRWxlbWVudChzbG90KSkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERlZmF1bHRDb21wb25lbnQsIHtcbiAgICAgIC4uLnByb3BzLFxuICAgICAgLi4uc2xvdCxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERlZmF1bHRDb21wb25lbnQsIHByb3BzKTtcbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBtZW1vaXplZCB3cmFwcGVyIGNvbXBvbmVudCBmb3IgcmVuZGVyU2xvdC5cbiAqIFVzZXMgZm9yd2FyZFJlZiB0byBzdXBwb3J0IHJlZiBmb3J3YXJkaW5nLlxuICovXG5jb25zdCBNZW1vaXplZFNsb3RXcmFwcGVyID0gUmVhY3QubWVtbyhcbiAgUmVhY3QuZm9yd2FyZFJlZjx1bmtub3duLCBhbnk+KGZ1bmN0aW9uIE1lbW9pemVkU2xvdFdyYXBwZXIocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHsgJHNsb3QsICRjb21wb25lbnQsIC4uLnJlc3QgfSA9IHByb3BzO1xuICAgIGNvbnN0IHByb3BzV2l0aFJlZjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSByZWYgIT09IG51bGwgPyB7IC4uLnJlc3QsIHJlZiB9IDogcmVzdDtcbiAgICByZXR1cm4gcmVuZGVyU2xvdEVsZW1lbnQoJHNsb3QsICRjb21wb25lbnQsIHByb3BzV2l0aFJlZik7XG4gIH0pLFxuICAocHJldjogYW55LCBuZXh0OiBhbnkpID0+IHtcbiAgICAvLyBDb21wYXJlIHNsb3QgYW5kIGNvbXBvbmVudCByZWZlcmVuY2VzXG4gICAgaWYgKHByZXYuJHNsb3QgIT09IG5leHQuJHNsb3QpIHJldHVybiBmYWxzZTtcbiAgICBpZiAocHJldi4kY29tcG9uZW50ICE9PSBuZXh0LiRjb21wb25lbnQpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFNoYWxsb3cgY29tcGFyZSByZW1haW5pbmcgcHJvcHMgKHJlZiBpcyBoYW5kbGVkIHNlcGFyYXRlbHkgYnkgUmVhY3QpXG4gICAgY29uc3QgeyAkc2xvdDogX3BzLCAkY29tcG9uZW50OiBfcGMsIC4uLnByZXZSZXN0IH0gPSBwcmV2O1xuICAgIGNvbnN0IHsgJHNsb3Q6IF9ucywgJGNvbXBvbmVudDogX25jLCAuLi5uZXh0UmVzdCB9ID0gbmV4dDtcbiAgICByZXR1cm4gc2hhbGxvd0VxdWFsKFxuICAgICAgcHJldlJlc3QgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgICBuZXh0UmVzdCBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgICk7XG4gIH1cbik7XG5cbi8qKlxuICogUmVuZGVycyBhIHNsb3QgdmFsdWUgYXMgYSBtZW1vaXplZCBSZWFjdCBlbGVtZW50LlxuICogQXV0b21hdGljYWxseSBwcmV2ZW50cyB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHVzaW5nIHNoYWxsb3cgcHJvcCBjb21wYXJpc29uLlxuICogU3VwcG9ydHMgcmVmIGZvcndhcmRpbmcuXG4gKlxuICogQGV4YW1wbGVcbiAqIHJlbmRlclNsb3QoY3VzdG9tSW5wdXQsIENvcGlsb3RDaGF0SW5wdXQsIHsgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCB9KVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU2xvdDxDIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LCBQID0gUmVhY3QuQ29tcG9uZW50UHJvcHM8Qz4+KFxuICBzbG90OiBTbG90VmFsdWU8Qz4gfCB1bmRlZmluZWQsXG4gIERlZmF1bHRDb21wb25lbnQ6IEMsXG4gIHByb3BzOiBQXG4pOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChNZW1vaXplZFNsb3RXcmFwcGVyLCB7XG4gICAgLi4ucHJvcHMsXG4gICAgJHNsb3Q6IHNsb3QsXG4gICAgJGNvbXBvbmVudDogRGVmYXVsdENvbXBvbmVudCxcbiAgfSBhcyBhbnkpO1xufVxuIiwiaW1wb3J0IHsgQXNzaXN0YW50TWVzc2FnZSwgTWVzc2FnZSB9IGZyb20gXCJAYWctdWkvY29yZVwiO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIENvcHksXG4gIENoZWNrLFxuICBUaHVtYnNVcCxcbiAgVGh1bWJzRG93bixcbiAgVm9sdW1lMixcbiAgUmVmcmVzaEN3LFxufSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5pbXBvcnQge1xuICB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24sXG4gIENvcGlsb3RDaGF0RGVmYXVsdExhYmVscyxcbn0gZnJvbSBcIkAvcHJvdmlkZXJzL0NvcGlsb3RDaGF0Q29uZmlndXJhdGlvblByb3ZpZGVyXCI7XG5pbXBvcnQgeyB0d01lcmdlIH0gZnJvbSBcInRhaWx3aW5kLW1lcmdlXCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuaW1wb3J0IHtcbiAgVG9vbHRpcCxcbiAgVG9vbHRpcENvbnRlbnQsXG4gIFRvb2x0aXBUcmlnZ2VyLFxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3Rvb2x0aXBcIjtcbmltcG9ydCBcImthdGV4L2Rpc3Qva2F0ZXgubWluLmNzc1wiO1xuaW1wb3J0IHsgV2l0aFNsb3RzLCByZW5kZXJTbG90IH0gZnJvbSBcIkAvbGliL3Nsb3RzXCI7XG5pbXBvcnQgeyBTdHJlYW1kb3duIH0gZnJvbSBcInN0cmVhbWRvd25cIjtcbmltcG9ydCBDb3BpbG90Q2hhdFRvb2xDYWxsc1ZpZXcgZnJvbSBcIi4vQ29waWxvdENoYXRUb29sQ2FsbHNWaWV3XCI7XG5cbmV4cG9ydCB0eXBlIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZVByb3BzID0gV2l0aFNsb3RzPFxuICB7XG4gICAgbWFya2Rvd25SZW5kZXJlcjogdHlwZW9mIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5NYXJrZG93blJlbmRlcmVyO1xuICAgIHRvb2xiYXI6IHR5cGVvZiBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuVG9vbGJhcjtcbiAgICBjb3B5QnV0dG9uOiB0eXBlb2YgQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLkNvcHlCdXR0b247XG4gICAgdGh1bWJzVXBCdXR0b246IHR5cGVvZiBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuVGh1bWJzVXBCdXR0b247XG4gICAgdGh1bWJzRG93bkJ1dHRvbjogdHlwZW9mIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5UaHVtYnNEb3duQnV0dG9uO1xuICAgIHJlYWRBbG91ZEJ1dHRvbjogdHlwZW9mIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5SZWFkQWxvdWRCdXR0b247XG4gICAgcmVnZW5lcmF0ZUJ1dHRvbjogdHlwZW9mIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5SZWdlbmVyYXRlQnV0dG9uO1xuICAgIHRvb2xDYWxsc1ZpZXc6IHR5cGVvZiBDb3BpbG90Q2hhdFRvb2xDYWxsc1ZpZXc7XG4gIH0sXG4gIHtcbiAgICBvblRodW1ic1VwPzogKG1lc3NhZ2U6IEFzc2lzdGFudE1lc3NhZ2UpID0+IHZvaWQ7XG4gICAgb25UaHVtYnNEb3duPzogKG1lc3NhZ2U6IEFzc2lzdGFudE1lc3NhZ2UpID0+IHZvaWQ7XG4gICAgb25SZWFkQWxvdWQ/OiAobWVzc2FnZTogQXNzaXN0YW50TWVzc2FnZSkgPT4gdm9pZDtcbiAgICBvblJlZ2VuZXJhdGU/OiAobWVzc2FnZTogQXNzaXN0YW50TWVzc2FnZSkgPT4gdm9pZDtcbiAgICBtZXNzYWdlOiBBc3Npc3RhbnRNZXNzYWdlO1xuICAgIG1lc3NhZ2VzPzogTWVzc2FnZVtdO1xuICAgIGlzUnVubmluZz86IGJvb2xlYW47XG4gICAgYWRkaXRpb25hbFRvb2xiYXJJdGVtcz86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgICB0b29sYmFyVmlzaWJsZT86IGJvb2xlYW47XG4gIH0gJiBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD5cbj47XG5cbmV4cG9ydCBmdW5jdGlvbiBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2Uoe1xuICBtZXNzYWdlLFxuICBtZXNzYWdlcyxcbiAgaXNSdW5uaW5nLFxuICBvblRodW1ic1VwLFxuICBvblRodW1ic0Rvd24sXG4gIG9uUmVhZEFsb3VkLFxuICBvblJlZ2VuZXJhdGUsXG4gIGFkZGl0aW9uYWxUb29sYmFySXRlbXMsXG4gIHRvb2xiYXJWaXNpYmxlID0gdHJ1ZSxcbiAgbWFya2Rvd25SZW5kZXJlcixcbiAgdG9vbGJhcixcbiAgY29weUJ1dHRvbixcbiAgdGh1bWJzVXBCdXR0b24sXG4gIHRodW1ic0Rvd25CdXR0b24sXG4gIHJlYWRBbG91ZEJ1dHRvbixcbiAgcmVnZW5lcmF0ZUJ1dHRvbixcbiAgdG9vbENhbGxzVmlldyxcbiAgY2hpbGRyZW4sXG4gIGNsYXNzTmFtZSxcbiAgLi4ucHJvcHNcbn06IENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZVByb3BzKSB7XG4gIGNvbnN0IGJvdW5kTWFya2Rvd25SZW5kZXJlciA9IHJlbmRlclNsb3QoXG4gICAgbWFya2Rvd25SZW5kZXJlcixcbiAgICBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuTWFya2Rvd25SZW5kZXJlcixcbiAgICB7XG4gICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQgfHwgXCJcIixcbiAgICAgIFxuICAgIH1cbiAgKTtcblxuICBjb25zdCBib3VuZENvcHlCdXR0b24gPSByZW5kZXJTbG90KFxuICAgIGNvcHlCdXR0b24sXG4gICAgQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLkNvcHlCdXR0b24sXG4gICAge1xuICAgICAgb25DbGljazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KG1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvcHkgbWVzc2FnZTpcIiwgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IGJvdW5kVGh1bWJzVXBCdXR0b24gPSByZW5kZXJTbG90KFxuICAgIHRodW1ic1VwQnV0dG9uLFxuICAgIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5UaHVtYnNVcEJ1dHRvbixcbiAgICB7XG4gICAgICBvbkNsaWNrOiBvblRodW1ic1VwLFxuICAgIH1cbiAgKTtcblxuICBjb25zdCBib3VuZFRodW1ic0Rvd25CdXR0b24gPSByZW5kZXJTbG90KFxuICAgIHRodW1ic0Rvd25CdXR0b24sXG4gICAgQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLlRodW1ic0Rvd25CdXR0b24sXG4gICAge1xuICAgICAgb25DbGljazogb25UaHVtYnNEb3duLFxuICAgIH1cbiAgKTtcblxuICBjb25zdCBib3VuZFJlYWRBbG91ZEJ1dHRvbiA9IHJlbmRlclNsb3QoXG4gICAgcmVhZEFsb3VkQnV0dG9uLFxuICAgIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5SZWFkQWxvdWRCdXR0b24sXG4gICAge1xuICAgICAgb25DbGljazogb25SZWFkQWxvdWQsXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IGJvdW5kUmVnZW5lcmF0ZUJ1dHRvbiA9IHJlbmRlclNsb3QoXG4gICAgcmVnZW5lcmF0ZUJ1dHRvbixcbiAgICBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuUmVnZW5lcmF0ZUJ1dHRvbixcbiAgICB7XG4gICAgICBvbkNsaWNrOiBvblJlZ2VuZXJhdGUsXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IGJvdW5kVG9vbGJhciA9IHJlbmRlclNsb3QoXG4gICAgdG9vbGJhcixcbiAgICBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuVG9vbGJhcixcbiAgICB7XG4gICAgICBjaGlsZHJlbjogKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XG4gICAgICAgICAge2JvdW5kQ29weUJ1dHRvbn1cbiAgICAgICAgICB7KG9uVGh1bWJzVXAgfHwgdGh1bWJzVXBCdXR0b24pICYmIGJvdW5kVGh1bWJzVXBCdXR0b259XG4gICAgICAgICAgeyhvblRodW1ic0Rvd24gfHwgdGh1bWJzRG93bkJ1dHRvbikgJiYgYm91bmRUaHVtYnNEb3duQnV0dG9ufVxuICAgICAgICAgIHsob25SZWFkQWxvdWQgfHwgcmVhZEFsb3VkQnV0dG9uKSAmJiBib3VuZFJlYWRBbG91ZEJ1dHRvbn1cbiAgICAgICAgICB7KG9uUmVnZW5lcmF0ZSB8fCByZWdlbmVyYXRlQnV0dG9uKSAmJiBib3VuZFJlZ2VuZXJhdGVCdXR0b259XG4gICAgICAgICAge2FkZGl0aW9uYWxUb29sYmFySXRlbXN9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSxcbiAgICB9XG4gICk7XG5cbiAgY29uc3QgYm91bmRUb29sQ2FsbHNWaWV3ID0gcmVuZGVyU2xvdChcbiAgICB0b29sQ2FsbHNWaWV3LFxuICAgIENvcGlsb3RDaGF0VG9vbENhbGxzVmlldyxcbiAgICB7XG4gICAgICBtZXNzYWdlLFxuICAgICAgbWVzc2FnZXMsXG4gICAgfVxuICApO1xuXG4gIC8vIERvbid0IHNob3cgdG9vbGJhciBpZiBtZXNzYWdlIGhhcyBubyBjb250ZW50IChvbmx5IHRvb2wgY2FsbHMpXG4gIGNvbnN0IGhhc0NvbnRlbnQgPSAhIShtZXNzYWdlLmNvbnRlbnQgJiYgbWVzc2FnZS5jb250ZW50LnRyaW0oKS5sZW5ndGggPiAwKTtcbiAgY29uc3QgaXNMYXRlc3RBc3Npc3RhbnRNZXNzYWdlID1cbiAgICBtZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgJiYgbWVzc2FnZXM/LlttZXNzYWdlcy5sZW5ndGggLSAxXT8uaWQgPT09IG1lc3NhZ2UuaWQ7XG4gIGNvbnN0IHNob3VsZFNob3dUb29sYmFyID0gdG9vbGJhclZpc2libGUgJiYgaGFzQ29udGVudCAmJiAhKGlzUnVubmluZyAmJiBpc0xhdGVzdEFzc2lzdGFudE1lc3NhZ2UpO1xuXG4gIGlmIChjaGlsZHJlbikge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7Y2hpbGRyZW4oe1xuICAgICAgICAgIG1hcmtkb3duUmVuZGVyZXI6IGJvdW5kTWFya2Rvd25SZW5kZXJlcixcbiAgICAgICAgICB0b29sYmFyOiBib3VuZFRvb2xiYXIsXG4gICAgICAgICAgdG9vbENhbGxzVmlldzogYm91bmRUb29sQ2FsbHNWaWV3LFxuICAgICAgICAgIGNvcHlCdXR0b246IGJvdW5kQ29weUJ1dHRvbixcbiAgICAgICAgICB0aHVtYnNVcEJ1dHRvbjogYm91bmRUaHVtYnNVcEJ1dHRvbixcbiAgICAgICAgICB0aHVtYnNEb3duQnV0dG9uOiBib3VuZFRodW1ic0Rvd25CdXR0b24sXG4gICAgICAgICAgcmVhZEFsb3VkQnV0dG9uOiBib3VuZFJlYWRBbG91ZEJ1dHRvbixcbiAgICAgICAgICByZWdlbmVyYXRlQnV0dG9uOiBib3VuZFJlZ2VuZXJhdGVCdXR0b24sXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgICBpc1J1bm5pbmcsXG4gICAgICAgICAgb25UaHVtYnNVcCxcbiAgICAgICAgICBvblRodW1ic0Rvd24sXG4gICAgICAgICAgb25SZWFkQWxvdWQsXG4gICAgICAgICAgb25SZWdlbmVyYXRlLFxuICAgICAgICAgIGFkZGl0aW9uYWxUb29sYmFySXRlbXMsXG4gICAgICAgICAgdG9vbGJhclZpc2libGU6IHNob3VsZFNob3dUb29sYmFyLFxuICAgICAgICB9KX1cbiAgICAgIDwvPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShcbiAgICAgICAgXCJwcm9zZSBtYXgtdy1mdWxsIGJyZWFrLXdvcmRzIGRhcms6cHJvc2UtaW52ZXJ0XCIsXG4gICAgICAgIGNsYXNzTmFtZVxuICAgICAgKX1cbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIGRhdGEtbWVzc2FnZS1pZD17bWVzc2FnZS5pZH1cbiAgICA+XG4gICAgICB7Ym91bmRNYXJrZG93blJlbmRlcmVyfVxuICAgICAge2JvdW5kVG9vbENhbGxzVmlld31cbiAgICAgIHtzaG91bGRTaG93VG9vbGJhciAmJiBib3VuZFRvb2xiYXJ9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZSB7XG4gIGV4cG9ydCBjb25zdCBNYXJrZG93blJlbmRlcmVyOiBSZWFjdC5GQzxcbiAgICBPbWl0PFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBTdHJlYW1kb3duPiwgXCJjaGlsZHJlblwiPiAmIHtcbiAgICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICB9XG4gID4gPSAoeyBjb250ZW50LCBjbGFzc05hbWUsIC4uLnByb3BzIH0pID0+IChcbiAgICA8U3RyZWFtZG93biBjbGFzc05hbWU9e2NsYXNzTmFtZX0gey4uLnByb3BzfT5cbiAgICAgIHtjb250ZW50ID8/IFwiXCJ9XG4gICAgPC9TdHJlYW1kb3duPlxuICApO1xuXG4gIGV4cG9ydCBjb25zdCBUb29sYmFyOiBSZWFjdC5GQzxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4+ID0gKHtcbiAgICBjbGFzc05hbWUsXG4gICAgLi4ucHJvcHNcbiAgfSkgPT4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17dHdNZXJnZShcbiAgICAgICAgXCJ3LWZ1bGwgYmctdHJhbnNwYXJlbnQgZmxleCBpdGVtcy1jZW50ZXIgLW1sLVs1cHhdIC1tdC1bMHB4XVwiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKTtcblxuICBleHBvcnQgY29uc3QgVG9vbGJhckJ1dHRvbjogUmVhY3QuRkM8XG4gICAgUmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+ICYge1xuICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgfVxuICA+ID0gKHsgdGl0bGUsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUb29sdGlwPlxuICAgICAgICA8VG9vbHRpcFRyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIHZhcmlhbnQ9XCJhc3Npc3RhbnRNZXNzYWdlVG9vbGJhckJ1dHRvblwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXt0aXRsZX1cbiAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvVG9vbHRpcFRyaWdnZXI+XG4gICAgICAgIDxUb29sdGlwQ29udGVudCBzaWRlPVwiYm90dG9tXCI+XG4gICAgICAgICAgPHA+e3RpdGxlfTwvcD5cbiAgICAgICAgPC9Ub29sdGlwQ29udGVudD5cbiAgICAgIDwvVG9vbHRpcD5cbiAgICApO1xuICB9O1xuXG4gIGV4cG9ydCBjb25zdCBDb3B5QnV0dG9uOiBSZWFjdC5GQzxcbiAgICBSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD5cbiAgPiA9ICh7IGNsYXNzTmFtZSwgdGl0bGUsIG9uQ2xpY2ssIC4uLnByb3BzIH0pID0+IHtcbiAgICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgICBjb25zdCBsYWJlbHMgPSBjb25maWc/LmxhYmVscyA/PyBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG4gICAgY29uc3QgW2NvcGllZCwgc2V0Q29waWVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xuICAgICAgc2V0Q29waWVkKHRydWUpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRDb3BpZWQoZmFsc2UpLCAyMDAwKTtcblxuICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgb25DbGljayhldmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgICB0aXRsZT17dGl0bGUgfHwgbGFiZWxzLmFzc2lzdGFudE1lc3NhZ2VUb29sYmFyQ29weU1lc3NhZ2VMYWJlbH1cbiAgICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIHtjb3BpZWQgPyAoXG4gICAgICAgICAgPENoZWNrIGNsYXNzTmFtZT1cInNpemUtWzE4cHhdXCIgLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8Q29weSBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+XG4gICAgICAgICl9XG4gICAgICA8L1Rvb2xiYXJCdXR0b24+XG4gICAgKTtcbiAgfTtcblxuICBleHBvcnQgY29uc3QgVGh1bWJzVXBCdXR0b246IFJlYWN0LkZDPFxuICAgIFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PlxuICA+ID0gKHsgdGl0bGUsIC4uLnByb3BzIH0pID0+IHtcbiAgICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgICBjb25zdCBsYWJlbHMgPSBjb25maWc/LmxhYmVscyA/PyBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICAgIHRpdGxlPXt0aXRsZSB8fCBsYWJlbHMuYXNzaXN0YW50TWVzc2FnZVRvb2xiYXJUaHVtYnNVcExhYmVsfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIDxUaHVtYnNVcCBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+XG4gICAgICA8L1Rvb2xiYXJCdXR0b24+XG4gICAgKTtcbiAgfTtcblxuICBleHBvcnQgY29uc3QgVGh1bWJzRG93bkJ1dHRvbjogUmVhY3QuRkM8XG4gICAgUmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+XG4gID4gPSAoeyB0aXRsZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbmZpZz8ubGFiZWxzID8/IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscztcbiAgICByZXR1cm4gKFxuICAgICAgPFRvb2xiYXJCdXR0b25cbiAgICAgICAgdGl0bGU9e3RpdGxlIHx8IGxhYmVscy5hc3Npc3RhbnRNZXNzYWdlVG9vbGJhclRodW1ic0Rvd25MYWJlbH1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgPlxuICAgICAgICA8VGh1bWJzRG93biBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+XG4gICAgICA8L1Rvb2xiYXJCdXR0b24+XG4gICAgKTtcbiAgfTtcblxuICBleHBvcnQgY29uc3QgUmVhZEFsb3VkQnV0dG9uOiBSZWFjdC5GQzxcbiAgICBSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD5cbiAgPiA9ICh7IHRpdGxlLCAuLi5wcm9wcyB9KSA9PiB7XG4gICAgY29uc3QgY29uZmlnID0gdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uKCk7XG4gICAgY29uc3QgbGFiZWxzID0gY29uZmlnPy5sYWJlbHMgPz8gQ29waWxvdENoYXREZWZhdWx0TGFiZWxzO1xuICAgIHJldHVybiAoXG4gICAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgICB0aXRsZT17dGl0bGUgfHwgbGFiZWxzLmFzc2lzdGFudE1lc3NhZ2VUb29sYmFyUmVhZEFsb3VkTGFiZWx9XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgID5cbiAgICAgICAgPFZvbHVtZTIgY2xhc3NOYW1lPVwic2l6ZS1bMjBweF1cIiAvPlxuICAgICAgPC9Ub29sYmFyQnV0dG9uPlxuICAgICk7XG4gIH07XG5cbiAgZXhwb3J0IGNvbnN0IFJlZ2VuZXJhdGVCdXR0b246IFJlYWN0LkZDPFxuICAgIFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PlxuICA+ID0gKHsgdGl0bGUsIC4uLnByb3BzIH0pID0+IHtcbiAgICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgICBjb25zdCBsYWJlbHMgPSBjb25maWc/LmxhYmVscyA/PyBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICAgIHRpdGxlPXt0aXRsZSB8fCBsYWJlbHMuYXNzaXN0YW50TWVzc2FnZVRvb2xiYXJSZWdlbmVyYXRlTGFiZWx9XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgID5cbiAgICAgICAgPFJlZnJlc2hDdyBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+XG4gICAgICA8L1Rvb2xiYXJCdXR0b24+XG4gICAgKTtcbiAgfTtcbn1cblxuQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLk1hcmtkb3duUmVuZGVyZXIuZGlzcGxheU5hbWUgPVxuICBcIkNvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5NYXJrZG93blJlbmRlcmVyXCI7XG5Db3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuVG9vbGJhci5kaXNwbGF5TmFtZSA9XG4gIFwiQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLlRvb2xiYXJcIjtcbkNvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5Db3B5QnV0dG9uLmRpc3BsYXlOYW1lID1cbiAgXCJDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuQ29weUJ1dHRvblwiO1xuQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLlRodW1ic1VwQnV0dG9uLmRpc3BsYXlOYW1lID1cbiAgXCJDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuVGh1bWJzVXBCdXR0b25cIjtcbkNvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5UaHVtYnNEb3duQnV0dG9uLmRpc3BsYXlOYW1lID1cbiAgXCJDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UuVGh1bWJzRG93bkJ1dHRvblwiO1xuQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLlJlYWRBbG91ZEJ1dHRvbi5kaXNwbGF5TmFtZSA9XG4gIFwiQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLlJlYWRBbG91ZEJ1dHRvblwiO1xuQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlLlJlZ2VuZXJhdGVCdXR0b24uZGlzcGxheU5hbWUgPVxuICBcIkNvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZS5SZWdlbmVyYXRlQnV0dG9uXCI7XG5cbmV4cG9ydCBkZWZhdWx0IENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZTtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlU3luY0V4dGVybmFsU3RvcmUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFRvb2xDYWxsLCBUb29sTWVzc2FnZSB9IGZyb20gXCJAYWctdWkvY29yZVwiO1xuaW1wb3J0IHsgVG9vbENhbGxTdGF0dXMgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcbmltcG9ydCB7IHVzZUNvcGlsb3RLaXQgfSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdEtpdFByb3ZpZGVyXCI7XG5pbXBvcnQgeyB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJcIjtcbmltcG9ydCB7IERFRkFVTFRfQUdFTlRfSUQgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L3NoYXJlZFwiO1xuaW1wb3J0IHsgcGFydGlhbEpTT05QYXJzZSB9IGZyb20gXCJAY29waWxvdGtpdG5leHQvc2hhcmVkXCI7XG5pbXBvcnQgeyBSZWFjdFRvb2xDYWxsUmVuZGVyZXIgfSBmcm9tIFwiQC90eXBlcy9yZWFjdC10b29sLWNhbGwtcmVuZGVyZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBVc2VSZW5kZXJUb29sQ2FsbFByb3BzIHtcbiAgdG9vbENhbGw6IFRvb2xDYWxsO1xuICB0b29sTWVzc2FnZT86IFRvb2xNZXNzYWdlO1xufVxuXG4vKipcbiAqIFByb3BzIGZvciB0aGUgbWVtb2l6ZWQgVG9vbENhbGxSZW5kZXJlciBjb21wb25lbnRcbiAqL1xuaW50ZXJmYWNlIFRvb2xDYWxsUmVuZGVyZXJQcm9wcyB7XG4gIHRvb2xDYWxsOiBUb29sQ2FsbDtcbiAgdG9vbE1lc3NhZ2U/OiBUb29sTWVzc2FnZTtcbiAgUmVuZGVyQ29tcG9uZW50OiBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8dW5rbm93bj5bXCJyZW5kZXJcIl07XG4gIGlzRXhlY3V0aW5nOiBib29sZWFuO1xufVxuXG4vKipcbiAqIE1lbW9pemVkIGNvbXBvbmVudCB0aGF0IHJlbmRlcnMgYSBzaW5nbGUgdG9vbCBjYWxsLlxuICogVGhpcyBwcmV2ZW50cyB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHdoZW4gcGFyZW50IGNvbXBvbmVudHMgdXBkYXRlXG4gKiBidXQgdGhlIHRvb2wgY2FsbCBkYXRhIGhhc24ndCBjaGFuZ2VkLlxuICovXG5jb25zdCBUb29sQ2FsbFJlbmRlcmVyID0gUmVhY3QubWVtbyhcbiAgZnVuY3Rpb24gVG9vbENhbGxSZW5kZXJlcih7XG4gICAgdG9vbENhbGwsXG4gICAgdG9vbE1lc3NhZ2UsXG4gICAgUmVuZGVyQ29tcG9uZW50LFxuICAgIGlzRXhlY3V0aW5nLFxuICB9OiBUb29sQ2FsbFJlbmRlcmVyUHJvcHMpIHtcbiAgICAvLyBNZW1vaXplIGFyZ3MgYmFzZWQgb24gdGhlIGFyZ3VtZW50cyBzdHJpbmcgdG8gbWFpbnRhaW4gc3RhYmxlIHJlZmVyZW5jZVxuICAgIGNvbnN0IGFyZ3MgPSB1c2VNZW1vKFxuICAgICAgKCkgPT4gcGFydGlhbEpTT05QYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpLFxuICAgICAgW3Rvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50c11cbiAgICApO1xuXG4gICAgY29uc3QgdG9vbE5hbWUgPSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lO1xuXG4gICAgLy8gUmVuZGVyIGJhc2VkIG9uIHN0YXR1cyB0byBwcmVzZXJ2ZSBkaXNjcmltaW5hdGVkIHVuaW9uIHR5cGUgaW5mZXJlbmNlXG4gICAgaWYgKHRvb2xNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UmVuZGVyQ29tcG9uZW50XG4gICAgICAgICAgbmFtZT17dG9vbE5hbWV9XG4gICAgICAgICAgYXJncz17YXJnc31cbiAgICAgICAgICBzdGF0dXM9e1Rvb2xDYWxsU3RhdHVzLkNvbXBsZXRlfVxuICAgICAgICAgIHJlc3VsdD17dG9vbE1lc3NhZ2UuY29udGVudH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChpc0V4ZWN1dGluZykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFJlbmRlckNvbXBvbmVudFxuICAgICAgICAgIG5hbWU9e3Rvb2xOYW1lfVxuICAgICAgICAgIGFyZ3M9e2FyZ3N9XG4gICAgICAgICAgc3RhdHVzPXtUb29sQ2FsbFN0YXR1cy5FeGVjdXRpbmd9XG4gICAgICAgICAgcmVzdWx0PXt1bmRlZmluZWR9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UmVuZGVyQ29tcG9uZW50XG4gICAgICAgICAgbmFtZT17dG9vbE5hbWV9XG4gICAgICAgICAgYXJncz17YXJnc31cbiAgICAgICAgICBzdGF0dXM9e1Rvb2xDYWxsU3RhdHVzLkluUHJvZ3Jlc3N9XG4gICAgICAgICAgcmVzdWx0PXt1bmRlZmluZWR9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgfSxcbiAgLy8gQ3VzdG9tIGNvbXBhcmlzb24gZnVuY3Rpb24gdG8gcHJldmVudCByZS1yZW5kZXJzIHdoZW4gdG9vbCBjYWxsIGRhdGEgaGFzbid0IGNoYW5nZWRcbiAgKHByZXZQcm9wcywgbmV4dFByb3BzKSA9PiB7XG4gICAgLy8gQ29tcGFyZSB0b29sIGNhbGwgaWRlbnRpdHkgYW5kIGNvbnRlbnRcbiAgICBpZiAocHJldlByb3BzLnRvb2xDYWxsLmlkICE9PSBuZXh0UHJvcHMudG9vbENhbGwuaWQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAocHJldlByb3BzLnRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUgIT09IG5leHRQcm9wcy50b29sQ2FsbC5mdW5jdGlvbi5uYW1lKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHByZXZQcm9wcy50b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgIT09IG5leHRQcm9wcy50b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIENvbXBhcmUgdG9vbCBtZXNzYWdlIChyZXN1bHQpXG4gICAgY29uc3QgcHJldlJlc3VsdCA9IHByZXZQcm9wcy50b29sTWVzc2FnZT8uY29udGVudDtcbiAgICBjb25zdCBuZXh0UmVzdWx0ID0gbmV4dFByb3BzLnRvb2xNZXNzYWdlPy5jb250ZW50O1xuICAgIGlmIChwcmV2UmVzdWx0ICE9PSBuZXh0UmVzdWx0KSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBDb21wYXJlIGV4ZWN1dGluZyBzdGF0ZVxuICAgIGlmIChwcmV2UHJvcHMuaXNFeGVjdXRpbmcgIT09IG5leHRQcm9wcy5pc0V4ZWN1dGluZykgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gQ29tcGFyZSByZW5kZXIgY29tcG9uZW50IHJlZmVyZW5jZVxuICAgIGlmIChwcmV2UHJvcHMuUmVuZGVyQ29tcG9uZW50ICE9PSBuZXh0UHJvcHMuUmVuZGVyQ29tcG9uZW50KSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuKTtcblxuLyoqXG4gKiBIb29rIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHJlbmRlciB0b29sIGNhbGxzIGJhc2VkIG9uIHRoZSByZW5kZXIgZnVuY3Rpb25zXG4gKiBkZWZpbmVkIGluIENvcGlsb3RLaXRQcm92aWRlci5cbiAqXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB0b29sIGNhbGwgYW5kIG9wdGlvbmFsIHRvb2wgbWVzc2FnZSBhbmQgcmV0dXJucyB0aGUgcmVuZGVyZWQgY29tcG9uZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VSZW5kZXJUb29sQ2FsbCgpIHtcbiAgY29uc3QgeyBjb3BpbG90a2l0LCBleGVjdXRpbmdUb29sQ2FsbElkcyB9ID0gdXNlQ29waWxvdEtpdCgpO1xuICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgY29uc3QgYWdlbnRJZCA9IGNvbmZpZz8uYWdlbnRJZCA/PyBERUZBVUxUX0FHRU5UX0lEO1xuXG4gIC8vIFN1YnNjcmliZSB0byByZW5kZXIgdG9vbCBjYWxscyBjaGFuZ2VzIHVzaW5nIHVzZVN5bmNFeHRlcm5hbFN0b3JlXG4gIC8vIFRoaXMgZW5zdXJlcyB3ZSBhbHdheXMgaGF2ZSB0aGUgbGF0ZXN0IHZhbHVlLCBldmVuIGlmIHN1YnNjcmlwdGlvbnMgcnVuIGluIGFueSBvcmRlclxuICBjb25zdCByZW5kZXJUb29sQ2FsbHMgPSB1c2VTeW5jRXh0ZXJuYWxTdG9yZShcbiAgICAoY2FsbGJhY2spID0+IHtcbiAgICAgIHJldHVybiBjb3BpbG90a2l0LnN1YnNjcmliZSh7XG4gICAgICAgIG9uUmVuZGVyVG9vbENhbGxzQ2hhbmdlZDogY2FsbGJhY2ssXG4gICAgICB9KS51bnN1YnNjcmliZTtcbiAgICB9LFxuICAgICgpID0+IGNvcGlsb3RraXQucmVuZGVyVG9vbENhbGxzLFxuICAgICgpID0+IGNvcGlsb3RraXQucmVuZGVyVG9vbENhbGxzXG4gICk7XG5cbiAgLy8gTm90ZTogZXhlY3V0aW5nVG9vbENhbGxJZHMgaXMgbm93IHByb3ZpZGVkIGJ5IENvcGlsb3RLaXRQcm92aWRlciBjb250ZXh0LlxuICAvLyBUaGlzIGlzIGNyaXRpY2FsIGZvciBISVRMIHJlY29ubmVjdGlvbjogd2hlbiBjb25uZWN0aW5nIHRvIGEgdGhyZWFkIHdpdGhcbiAgLy8gcGVuZGluZyB0b29sIGNhbGxzLCB0aGUgb25Ub29sRXhlY3V0aW9uU3RhcnQgZXZlbnQgZmlyZXMgYmVmb3JlIGNoaWxkIGNvbXBvbmVudHNcbiAgLy8gbW91bnQuIEJ5IHRyYWNraW5nIGF0IHRoZSBwcm92aWRlciBsZXZlbCwgdGhlIGV4ZWN1dGluZyBzdGF0ZSBpcyBhbHJlYWR5XG4gIC8vIGF2YWlsYWJsZSB3aGVuIHRoaXMgaG9vayBmaXJzdCBydW5zLlxuXG4gIGNvbnN0IHJlbmRlclRvb2xDYWxsID0gdXNlQ2FsbGJhY2soXG4gICAgKHtcbiAgICAgIHRvb2xDYWxsLFxuICAgICAgdG9vbE1lc3NhZ2UsXG4gICAgfTogVXNlUmVuZGVyVG9vbENhbGxQcm9wcyk6IFJlYWN0LlJlYWN0RWxlbWVudCB8IG51bGwgPT4ge1xuICAgICAgLy8gRmluZCB0aGUgcmVuZGVyIGNvbmZpZyBmb3IgdGhpcyB0b29sIGNhbGwgYnkgbmFtZVxuICAgICAgLy8gRm9yIHJlbmRlcmluZywgd2Ugc2hvdyBhbGwgdG9vbCBjYWxscyByZWdhcmRsZXNzIG9mIGFnZW50SWRcbiAgICAgIC8vIFRoZSBhZ2VudElkIHNjb3Bpbmcgb25seSBhZmZlY3RzIGhhbmRsZXIgZXhlY3V0aW9uIChpbiBjb3JlKVxuICAgICAgLy8gUHJpb3JpdHkgb3JkZXI6XG4gICAgICAvLyAxLiBFeGFjdCBtYXRjaCBieSBuYW1lIChwcmVmZXIgYWdlbnQtc3BlY2lmaWMgaWYgbXVsdGlwbGUgZXhpc3QpXG4gICAgICAvLyAyLiBXaWxkY2FyZCAoKikgcmVuZGVyZXJcbiAgICAgIGNvbnN0IGV4YWN0TWF0Y2hlcyA9IHJlbmRlclRvb2xDYWxscy5maWx0ZXIoXG4gICAgICAgIChyYykgPT4gcmMubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZVxuICAgICAgKTtcblxuICAgICAgLy8gSWYgbXVsdGlwbGUgcmVuZGVyZXJzIHdpdGggc2FtZSBuYW1lIGV4aXN0LCBwcmVmZXIgdGhlIG9uZSBtYXRjaGluZyBvdXIgYWdlbnRJZFxuICAgICAgY29uc3QgcmVuZGVyQ29uZmlnID1cbiAgICAgICAgZXhhY3RNYXRjaGVzLmZpbmQoKHJjKSA9PiByYy5hZ2VudElkID09PSBhZ2VudElkKSB8fFxuICAgICAgICBleGFjdE1hdGNoZXMuZmluZCgocmMpID0+ICFyYy5hZ2VudElkKSB8fFxuICAgICAgICBleGFjdE1hdGNoZXNbMF0gfHxcbiAgICAgICAgcmVuZGVyVG9vbENhbGxzLmZpbmQoKHJjKSA9PiByYy5uYW1lID09PSBcIipcIik7XG5cbiAgICAgIGlmICghcmVuZGVyQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBSZW5kZXJDb21wb25lbnQgPSByZW5kZXJDb25maWcucmVuZGVyO1xuICAgICAgY29uc3QgaXNFeGVjdXRpbmcgPSBleGVjdXRpbmdUb29sQ2FsbElkcy5oYXModG9vbENhbGwuaWQpO1xuXG4gICAgICAvLyBVc2UgdGhlIG1lbW9pemVkIFRvb2xDYWxsUmVuZGVyZXIgY29tcG9uZW50IHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcmUtcmVuZGVyc1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRvb2xDYWxsUmVuZGVyZXJcbiAgICAgICAgICBrZXk9e3Rvb2xDYWxsLmlkfVxuICAgICAgICAgIHRvb2xDYWxsPXt0b29sQ2FsbH1cbiAgICAgICAgICB0b29sTWVzc2FnZT17dG9vbE1lc3NhZ2V9XG4gICAgICAgICAgUmVuZGVyQ29tcG9uZW50PXtSZW5kZXJDb21wb25lbnR9XG4gICAgICAgICAgaXNFeGVjdXRpbmc9e2lzRXhlY3V0aW5nfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9LFxuICAgIFtyZW5kZXJUb29sQ2FsbHMsIGV4ZWN1dGluZ1Rvb2xDYWxsSWRzLCBhZ2VudElkXVxuICApO1xuXG4gIHJldHVybiByZW5kZXJUb29sQ2FsbDtcbn1cbiIsIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgUmVhY3ROb2RlLCB1c2VNZW1vLCB1c2VFZmZlY3QsIHVzZVJlZHVjZXIsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFJlYWN0QWN0aXZpdHlNZXNzYWdlUmVuZGVyZXIsIFJlYWN0VG9vbENhbGxSZW5kZXJlciB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgUmVhY3RDdXN0b21NZXNzYWdlUmVuZGVyZXIgfSBmcm9tIFwiLi4vdHlwZXMvcmVhY3QtY3VzdG9tLW1lc3NhZ2UtcmVuZGVyZXJcIjtcbmltcG9ydCB7IFJlYWN0RnJvbnRlbmRUb29sIH0gZnJvbSBcIi4uL3R5cGVzL2Zyb250ZW5kLXRvb2xcIjtcbmltcG9ydCB7IFJlYWN0SHVtYW5JblRoZUxvb3AgfSBmcm9tIFwiLi4vdHlwZXMvaHVtYW4taW4tdGhlLWxvb3BcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBGcm9udGVuZFRvb2wgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcbmltcG9ydCB7IEFic3RyYWN0QWdlbnQgfSBmcm9tIFwiQGFnLXVpL2NsaWVudFwiO1xuaW1wb3J0IHsgQ29waWxvdEtpdENvcmVSZWFjdCB9IGZyb20gXCIuLi9saWIvcmVhY3QtY29yZVwiO1xuaW1wb3J0IHsgQ29waWxvdEtpdEluc3BlY3RvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NvcGlsb3RLaXRJbnNwZWN0b3JcIjtcbmltcG9ydCB7XG4gIE1DUEFwcHNBY3Rpdml0eVJlbmRlcmVyLFxuICBNQ1BBcHBzQWN0aXZpdHlDb250ZW50U2NoZW1hLFxuICBNQ1BBcHBzQWN0aXZpdHlUeXBlLFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9NQ1BBcHBzQWN0aXZpdHlSZW5kZXJlclwiO1xuXG5jb25zdCBIRUFERVJfTkFNRSA9IFwiWC1Db3BpbG90Q2xvdWQtUHVibGljLUFwaS1LZXlcIjtcbmNvbnN0IENPUElMT1RfQ0xPVURfQ0hBVF9VUkwgPSBcImh0dHBzOi8vYXBpLmNsb3VkLmNvcGlsb3RraXQuYWkvY29waWxvdGtpdC92MVwiO1xuXG4vLyBEZWZpbmUgdGhlIGNvbnRleHQgdmFsdWUgaW50ZXJmYWNlIC0gaWRpb21hdGljIFJlYWN0IG5hbWluZ1xuZXhwb3J0IGludGVyZmFjZSBDb3BpbG90S2l0Q29udGV4dFZhbHVlIHtcbiAgY29waWxvdGtpdDogQ29waWxvdEtpdENvcmVSZWFjdDtcbiAgLyoqXG4gICAqIFNldCBvZiB0b29sIGNhbGwgSURzIGN1cnJlbnRseSBiZWluZyBleGVjdXRlZC5cbiAgICogVGhpcyBpcyB0cmFja2VkIGF0IHRoZSBwcm92aWRlciBsZXZlbCB0byBlbnN1cmUgdG9vbCBleGVjdXRpb24gZXZlbnRzXG4gICAqIGFyZSBjYXB0dXJlZCBldmVuIGJlZm9yZSBjaGlsZCBjb21wb25lbnRzIG1vdW50LlxuICAgKi9cbiAgZXhlY3V0aW5nVG9vbENhbGxJZHM6IFJlYWRvbmx5U2V0PHN0cmluZz47XG59XG5cbi8vIEVtcHR5IHNldCBmb3IgZGVmYXVsdCBjb250ZXh0IHZhbHVlXG5jb25zdCBFTVBUWV9TRVQ6IFJlYWRvbmx5U2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG5cbi8vIENyZWF0ZSB0aGUgQ29waWxvdEtpdCBjb250ZXh0XG5jb25zdCBDb3BpbG90S2l0Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8Q29waWxvdEtpdENvbnRleHRWYWx1ZT4oe1xuICBjb3BpbG90a2l0OiBudWxsISxcbiAgZXhlY3V0aW5nVG9vbENhbGxJZHM6IEVNUFRZX1NFVCxcbn0pO1xuXG4vLyBQcm92aWRlciBwcm9wcyBpbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgQ29waWxvdEtpdFByb3ZpZGVyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlO1xuICBydW50aW1lVXJsPzogc3RyaW5nO1xuICBoZWFkZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgLyoqXG4gICAqIENyZWRlbnRpYWxzIG1vZGUgZm9yIGZldGNoIHJlcXVlc3RzIChlLmcuLCBcImluY2x1ZGVcIiBmb3IgSFRUUC1vbmx5IGNvb2tpZXMgaW4gY3Jvc3Mtb3JpZ2luIHJlcXVlc3RzKS5cbiAgICovXG4gIGNyZWRlbnRpYWxzPzogUmVxdWVzdENyZWRlbnRpYWxzO1xuICAvKipcbiAgICogVGhlIENvcGlsb3QgQ2xvdWQgcHVibGljIEFQSSBrZXkuXG4gICAqL1xuICBwdWJsaWNBcGlLZXk/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgYHB1YmxpY0FwaUtleWBcbiAgICoqL1xuICBwdWJsaWNMaWNlbnNlS2V5Pzogc3RyaW5nO1xuICBwcm9wZXJ0aWVzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIHVzZVNpbmdsZUVuZHBvaW50PzogYm9vbGVhbjtcbiAgYWdlbnRzX191bnNhZmVfZGV2X29ubHk/OiBSZWNvcmQ8c3RyaW5nLCBBYnN0cmFjdEFnZW50PjtcbiAgcmVuZGVyVG9vbENhbGxzPzogUmVhY3RUb29sQ2FsbFJlbmRlcmVyPGFueT5bXTtcbiAgcmVuZGVyQWN0aXZpdHlNZXNzYWdlcz86IFJlYWN0QWN0aXZpdHlNZXNzYWdlUmVuZGVyZXI8YW55PltdO1xuICByZW5kZXJDdXN0b21NZXNzYWdlcz86IFJlYWN0Q3VzdG9tTWVzc2FnZVJlbmRlcmVyW107XG4gIGZyb250ZW5kVG9vbHM/OiBSZWFjdEZyb250ZW5kVG9vbFtdO1xuICBodW1hbkluVGhlTG9vcD86IFJlYWN0SHVtYW5JblRoZUxvb3BbXTtcbiAgc2hvd0RldkNvbnNvbGU/OiBib29sZWFuIHwgXCJhdXRvXCI7XG59XG5cbi8vIFNtYWxsIGhlbHBlciB0byBub3JtYWxpemUgYXJyYXkgcHJvcHMgdG8gYSBzdGFibGUgcmVmZXJlbmNlIGFuZCB3YXJuXG5mdW5jdGlvbiB1c2VTdGFibGVBcnJheVByb3A8VD4oXG4gIHByb3A6IFRbXSB8IHVuZGVmaW5lZCxcbiAgd2FybmluZ01lc3NhZ2U/OiBzdHJpbmcsXG4gIGlzTWVhbmluZ2Z1bENoYW5nZT86IChpbml0aWFsOiBUW10sIG5leHQ6IFRbXSkgPT4gYm9vbGVhbixcbik6IFRbXSB7XG4gIGNvbnN0IGVtcHR5ID0gdXNlTWVtbzxUW10+KCgpID0+IFtdLCBbXSk7XG4gIGNvbnN0IHZhbHVlID0gcHJvcCA/PyBlbXB0eTtcbiAgY29uc3QgaW5pdGlhbCA9IHVzZVJlZih2YWx1ZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoXG4gICAgICB3YXJuaW5nTWVzc2FnZSAmJlxuICAgICAgdmFsdWUgIT09IGluaXRpYWwuY3VycmVudCAmJlxuICAgICAgKGlzTWVhbmluZ2Z1bENoYW5nZSA/IGlzTWVhbmluZ2Z1bENoYW5nZShpbml0aWFsLmN1cnJlbnQsIHZhbHVlKSA6IHRydWUpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHdhcm5pbmdNZXNzYWdlKTtcbiAgICB9XG4gIH0sIFt2YWx1ZSwgd2FybmluZ01lc3NhZ2VdKTtcblxuICByZXR1cm4gdmFsdWU7XG59XG5cbi8vIFByb3ZpZGVyIGNvbXBvbmVudFxuZXhwb3J0IGNvbnN0IENvcGlsb3RLaXRQcm92aWRlcjogUmVhY3QuRkM8Q29waWxvdEtpdFByb3ZpZGVyUHJvcHM+ID0gKHtcbiAgY2hpbGRyZW4sXG4gIHJ1bnRpbWVVcmwsXG4gIGhlYWRlcnMgPSB7fSxcbiAgY3JlZGVudGlhbHMsXG4gIHB1YmxpY0FwaUtleSxcbiAgcHVibGljTGljZW5zZUtleSxcbiAgcHJvcGVydGllcyA9IHt9LFxuICBhZ2VudHNfX3Vuc2FmZV9kZXZfb25seTogYWdlbnRzID0ge30sXG4gIHJlbmRlclRvb2xDYWxscyxcbiAgcmVuZGVyQWN0aXZpdHlNZXNzYWdlcyxcbiAgcmVuZGVyQ3VzdG9tTWVzc2FnZXMsXG4gIGZyb250ZW5kVG9vbHMsXG4gIGh1bWFuSW5UaGVMb29wLFxuICBzaG93RGV2Q29uc29sZSA9IGZhbHNlLFxuICB1c2VTaW5nbGVFbmRwb2ludCA9IGZhbHNlLFxufSkgPT4ge1xuICBjb25zdCBbc2hvdWxkUmVuZGVySW5zcGVjdG9yLCBzZXRTaG91bGRSZW5kZXJJbnNwZWN0b3JdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2hvd0RldkNvbnNvbGUgPT09IHRydWUpIHtcbiAgICAgIC8vIEV4cGxpY2l0bHkgc2hvdyB0aGUgaW5zcGVjdG9yXG4gICAgICBzZXRTaG91bGRSZW5kZXJJbnNwZWN0b3IodHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChzaG93RGV2Q29uc29sZSA9PT0gXCJhdXRvXCIpIHtcbiAgICAgIC8vIFNob3cgb24gbG9jYWxob3N0IG9yIDEyNy4wLjAuMSBvbmx5XG4gICAgICBjb25zdCBsb2NhbGhvc3RIb3N0cyA9IG5ldyBTZXQoW1wibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCJdKTtcbiAgICAgIGlmIChsb2NhbGhvc3RIb3N0cy5oYXMod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKSkge1xuICAgICAgICBzZXRTaG91bGRSZW5kZXJJbnNwZWN0b3IodHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTaG91bGRSZW5kZXJJbnNwZWN0b3IoZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzaG93RGV2Q29uc29sZSBpcyBmYWxzZSBvciB1bmRlZmluZWQgKGRlZmF1bHQgZmFsc2UpXG4gICAgICBzZXRTaG91bGRSZW5kZXJJbnNwZWN0b3IoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3Nob3dEZXZDb25zb2xlXSk7XG5cbiAgLy8gTm9ybWFsaXplIGFycmF5IHByb3BzIHRvIHN0YWJsZSByZWZlcmVuY2VzIHdpdGggY2xlYXIgZGV2IHdhcm5pbmdzXG4gIGNvbnN0IHJlbmRlclRvb2xDYWxsc0xpc3QgPSB1c2VTdGFibGVBcnJheVByb3A8UmVhY3RUb29sQ2FsbFJlbmRlcmVyPGFueT4+KFxuICAgIHJlbmRlclRvb2xDYWxscyxcbiAgICBcInJlbmRlclRvb2xDYWxscyBtdXN0IGJlIGEgc3RhYmxlIGFycmF5LiBJZiB5b3Ugd2FudCB0byBkeW5hbWljYWxseSBhZGQgb3IgcmVtb3ZlIHRvb2xzLCB1c2UgYHVzZUZyb250ZW5kVG9vbGAgaW5zdGVhZC5cIixcbiAgICAoaW5pdGlhbCwgbmV4dCkgPT4ge1xuICAgICAgLy8gT25seSB3YXJuIGlmIHRoZSBzaGFwZSAobmFtZXMrYWdlbnRJZCkgY2hhbmdlZC4gQWxsb3cgaWRlbnRpdHkgY2hhbmdlc1xuICAgICAgLy8gdG8gc3VwcG9ydCB1cGRhdGVkIGNsb3N1cmVzIGZyb20gcGFyZW50cyAoZS5nLiwgU3Rvcnlib29rIHN0YXRlKS5cbiAgICAgIGNvbnN0IGtleSA9IChyYz86IFJlYWN0VG9vbENhbGxSZW5kZXJlcjx1bmtub3duPikgPT4gYCR7cmM/LmFnZW50SWQgPz8gXCJcIn06JHtyYz8ubmFtZSA/PyBcIlwifWA7XG4gICAgICBjb25zdCBzZXRGcm9tID0gKGFycjogUmVhY3RUb29sQ2FsbFJlbmRlcmVyPHVua25vd24+W10pID0+IG5ldyBTZXQoYXJyLm1hcChrZXkpKTtcbiAgICAgIGNvbnN0IGEgPSBzZXRGcm9tKGluaXRpYWwpO1xuICAgICAgY29uc3QgYiA9IHNldEZyb20obmV4dCk7XG4gICAgICBpZiAoYS5zaXplICE9PSBiLnNpemUpIHJldHVybiB0cnVlO1xuICAgICAgZm9yIChjb25zdCBrIG9mIGEpIGlmICghYi5oYXMoaykpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICk7XG5cbiAgY29uc3QgcmVuZGVyQ3VzdG9tTWVzc2FnZXNMaXN0ID0gdXNlU3RhYmxlQXJyYXlQcm9wPFJlYWN0Q3VzdG9tTWVzc2FnZVJlbmRlcmVyPihcbiAgICByZW5kZXJDdXN0b21NZXNzYWdlcyxcbiAgICBcInJlbmRlckN1c3RvbU1lc3NhZ2VzIG11c3QgYmUgYSBzdGFibGUgYXJyYXkuXCIsXG4gICk7XG5cbiAgY29uc3QgcmVuZGVyQWN0aXZpdHlNZXNzYWdlc0xpc3QgPSB1c2VTdGFibGVBcnJheVByb3A8UmVhY3RBY3Rpdml0eU1lc3NhZ2VSZW5kZXJlcjxhbnk+PihcbiAgICByZW5kZXJBY3Rpdml0eU1lc3NhZ2VzLFxuICAgIFwicmVuZGVyQWN0aXZpdHlNZXNzYWdlcyBtdXN0IGJlIGEgc3RhYmxlIGFycmF5LlwiLFxuICApO1xuXG4gIC8vIEJ1aWx0LWluIGFjdGl2aXR5IHJlbmRlcmVycyB0aGF0IGFyZSBhbHdheXMgaW5jbHVkZWRcbiAgY29uc3QgYnVpbHRJbkFjdGl2aXR5UmVuZGVyZXJzID0gdXNlTWVtbzxSZWFjdEFjdGl2aXR5TWVzc2FnZVJlbmRlcmVyPGFueT5bXT4oKCkgPT4gW1xuICAgIHtcbiAgICAgIGFjdGl2aXR5VHlwZTogTUNQQXBwc0FjdGl2aXR5VHlwZSxcbiAgICAgIGNvbnRlbnQ6IE1DUEFwcHNBY3Rpdml0eUNvbnRlbnRTY2hlbWEsXG4gICAgICByZW5kZXI6IE1DUEFwcHNBY3Rpdml0eVJlbmRlcmVyLFxuICAgIH0sXG4gIF0sIFtdKTtcblxuICAvLyBDb21iaW5lIHVzZXItcHJvdmlkZWQgYWN0aXZpdHkgcmVuZGVyZXJzIHdpdGggYnVpbHQtaW4gb25lc1xuICAvLyBVc2VyLXByb3ZpZGVkIHJlbmRlcmVycyB0YWtlIHByZWNlZGVuY2UgKGNvbWUgZmlyc3QpIHNvIHRoZXkgY2FuIG92ZXJyaWRlIGJ1aWx0LWluc1xuICBjb25zdCBhbGxBY3Rpdml0eVJlbmRlcmVycyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBbLi4ucmVuZGVyQWN0aXZpdHlNZXNzYWdlc0xpc3QsIC4uLmJ1aWx0SW5BY3Rpdml0eVJlbmRlcmVyc107XG4gIH0sIFtyZW5kZXJBY3Rpdml0eU1lc3NhZ2VzTGlzdCwgYnVpbHRJbkFjdGl2aXR5UmVuZGVyZXJzXSk7XG5cbiAgY29uc3QgcmVzb2x2ZWRQdWJsaWNLZXkgPSBwdWJsaWNBcGlLZXkgPz8gcHVibGljTGljZW5zZUtleTtcbiAgY29uc3QgaGFzTG9jYWxBZ2VudHMgPSBhZ2VudHMgJiYgT2JqZWN0LmtleXMoYWdlbnRzKS5sZW5ndGggPiAwO1xuXG4gIC8vIE1lcmdlIGEgcHJvdmlkZWQgcHVibGljQXBpS2V5IGludG8gaGVhZGVycyAod2l0aG91dCBvdmVyd3JpdGluZyBhbiBleHBsaWNpdCBoZWFkZXIpLlxuICBjb25zdCBtZXJnZWRIZWFkZXJzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFyZXNvbHZlZFB1YmxpY0tleSkgcmV0dXJuIGhlYWRlcnM7XG4gICAgaWYgKGhlYWRlcnNbSEVBREVSX05BTUVdKSByZXR1cm4gaGVhZGVycztcbiAgICByZXR1cm4ge1xuICAgICAgLi4uaGVhZGVycyxcbiAgICAgIFtIRUFERVJfTkFNRV06IHJlc29sdmVkUHVibGljS2V5LFxuICAgIH07XG4gIH0sIFtoZWFkZXJzLCByZXNvbHZlZFB1YmxpY0tleV0pO1xuXG4gIGlmICghcnVudGltZVVybCAmJiAhcmVzb2x2ZWRQdWJsaWNLZXkgJiYgIWhhc0xvY2FsQWdlbnRzKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IFwiTWlzc2luZyByZXF1aXJlZCBwcm9wOiAncnVudGltZVVybCcgb3IgJ3B1YmxpY0FwaUtleScgb3IgJ3B1YmxpY0xpY2Vuc2VLZXknXCI7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbiBkZXYvdGVzdCB3ZSB3YXJuIGJ1dCBhbGxvdyB0byBmYWNpbGl0YXRlIGxvY2FsIGFnZW50cyBhbmQgdW5pdCB0ZXN0cy5cbiAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBjaGF0QXBpRW5kcG9pbnQgPSBydW50aW1lVXJsID8/IChyZXNvbHZlZFB1YmxpY0tleSA/IENPUElMT1RfQ0xPVURfQ0hBVF9VUkwgOiB1bmRlZmluZWQpO1xuXG4gIGNvbnN0IGZyb250ZW5kVG9vbHNMaXN0ID0gdXNlU3RhYmxlQXJyYXlQcm9wPFJlYWN0RnJvbnRlbmRUb29sPihcbiAgICBmcm9udGVuZFRvb2xzLFxuICAgIFwiZnJvbnRlbmRUb29scyBtdXN0IGJlIGEgc3RhYmxlIGFycmF5LiBJZiB5b3Ugd2FudCB0byBkeW5hbWljYWxseSBhZGQgb3IgcmVtb3ZlIHRvb2xzLCB1c2UgYHVzZUZyb250ZW5kVG9vbGAgaW5zdGVhZC5cIixcbiAgKTtcbiAgY29uc3QgaHVtYW5JblRoZUxvb3BMaXN0ID0gdXNlU3RhYmxlQXJyYXlQcm9wPFJlYWN0SHVtYW5JblRoZUxvb3A+KFxuICAgIGh1bWFuSW5UaGVMb29wLFxuICAgIFwiaHVtYW5JblRoZUxvb3AgbXVzdCBiZSBhIHN0YWJsZSBhcnJheS4gSWYgeW91IHdhbnQgdG8gZHluYW1pY2FsbHkgYWRkIG9yIHJlbW92ZSBodW1hbi1pbi10aGUtbG9vcCB0b29scywgdXNlIGB1c2VIdW1hbkluVGhlTG9vcGAgaW5zdGVhZC5cIixcbiAgKTtcblxuICAvLyBOb3RlOiB3YXJuaW5ncyBmb3IgYXJyYXkgaWRlbnRpdHkgY2hhbmdlcyBhcmUgaGFuZGxlZCBieSB1c2VTdGFibGVBcnJheVByb3BcblxuICAvLyBQcm9jZXNzIGh1bWFuSW5UaGVMb29wIHRvb2xzIHRvIGNyZWF0ZSBoYW5kbGVycyBhbmQgYWRkIHJlbmRlciBjb21wb25lbnRzXG4gIGNvbnN0IHByb2Nlc3NlZEh1bWFuSW5UaGVMb29wVG9vbHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBwcm9jZXNzZWRUb29sczogRnJvbnRlbmRUb29sW10gPSBbXTtcbiAgICBjb25zdCBwcm9jZXNzZWRSZW5kZXJUb29sQ2FsbHM6IFJlYWN0VG9vbENhbGxSZW5kZXJlcjx1bmtub3duPltdID0gW107XG5cbiAgICBodW1hbkluVGhlTG9vcExpc3QuZm9yRWFjaCgodG9vbCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGEgcHJvbWlzZS1iYXNlZCBoYW5kbGVyIGZvciBlYWNoIGh1bWFuLWluLXRoZS1sb29wIHRvb2xcbiAgICAgIGNvbnN0IGZyb250ZW5kVG9vbDogRnJvbnRlbmRUb29sID0ge1xuICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXG4gICAgICAgIGZvbGxvd1VwOiB0b29sLmZvbGxvd1VwLFxuICAgICAgICAuLi4odG9vbC5hZ2VudElkICYmIHsgYWdlbnRJZDogdG9vbC5hZ2VudElkIH0pLFxuICAgICAgICBoYW5kbGVyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gVGhpcyBoYW5kbGVyIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIGhvb2sgd2hlbiBpdCBydW5zXG4gICAgICAgICAgLy8gRm9yIHByb3ZpZGVyLWxldmVsIHRvb2xzLCB3ZSBjcmVhdGUgYSBiYXNpYyBoYW5kbGVyIHRoYXQgd2FpdHMgZm9yIHVzZXIgaW50ZXJhY3Rpb25cbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24gd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSByZW5kZXIgY29tcG9uZW50XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgdGhhdCB0aGUgaG9vayB3aWxsIG92ZXJyaWRlXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEh1bWFuLWluLXRoZS1sb29wIHRvb2wgJyR7dG9vbC5uYW1lfScgY2FsbGVkIGJ1dCBubyBpbnRlcmFjdGl2ZSBoYW5kbGVyIGlzIHNldCB1cC5gKTtcbiAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBwcm9jZXNzZWRUb29scy5wdXNoKGZyb250ZW5kVG9vbCk7XG5cbiAgICAgIC8vIEFkZCB0aGUgcmVuZGVyIGNvbXBvbmVudCB0byByZW5kZXJUb29sQ2FsbHNcbiAgICAgIGlmICh0b29sLnJlbmRlcikge1xuICAgICAgICBwcm9jZXNzZWRSZW5kZXJUb29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgIGFyZ3M6IHRvb2wucGFyYW1ldGVycyEsXG4gICAgICAgICAgcmVuZGVyOiB0b29sLnJlbmRlcixcbiAgICAgICAgICAuLi4odG9vbC5hZ2VudElkICYmIHsgYWdlbnRJZDogdG9vbC5hZ2VudElkIH0pLFxuICAgICAgICB9IGFzIFJlYWN0VG9vbENhbGxSZW5kZXJlcjx1bmtub3duPik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4geyB0b29sczogcHJvY2Vzc2VkVG9vbHMsIHJlbmRlclRvb2xDYWxsczogcHJvY2Vzc2VkUmVuZGVyVG9vbENhbGxzIH07XG4gIH0sIFtodW1hbkluVGhlTG9vcExpc3RdKTtcblxuICAvLyBDb21iaW5lIGFsbCB0b29scyBmb3IgQ29waWxvdEtpdENvcmVcbiAgY29uc3QgYWxsVG9vbHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB0b29sczogRnJvbnRlbmRUb29sW10gPSBbXTtcblxuICAgIC8vIEFkZCBmcm9udGVuZCB0b29sc1xuICAgIHRvb2xzLnB1c2goLi4uZnJvbnRlbmRUb29sc0xpc3QpO1xuXG4gICAgLy8gQWRkIHByb2Nlc3NlZCBodW1hbi1pbi10aGUtbG9vcCB0b29sc1xuICAgIHRvb2xzLnB1c2goLi4ucHJvY2Vzc2VkSHVtYW5JblRoZUxvb3BUb29scy50b29scyk7XG5cbiAgICByZXR1cm4gdG9vbHM7XG4gIH0sIFtmcm9udGVuZFRvb2xzTGlzdCwgcHJvY2Vzc2VkSHVtYW5JblRoZUxvb3BUb29sc10pO1xuXG4gIC8vIENvbWJpbmUgYWxsIHJlbmRlciB0b29sIGNhbGxzXG4gIGNvbnN0IGFsbFJlbmRlclRvb2xDYWxscyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGNvbWJpbmVkOiBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8dW5rbm93bj5bXSA9IFsuLi5yZW5kZXJUb29sQ2FsbHNMaXN0XTtcblxuICAgIC8vIEFkZCByZW5kZXIgY29tcG9uZW50cyBmcm9tIGZyb250ZW5kIHRvb2xzXG4gICAgZnJvbnRlbmRUb29sc0xpc3QuZm9yRWFjaCgodG9vbCkgPT4ge1xuICAgICAgaWYgKHRvb2wucmVuZGVyKSB7XG4gICAgICAgIC8vIEZvciB3aWxkY2FyZCB0b29scyB3aXRob3V0IHBhcmFtZXRlcnMsIGRlZmF1bHQgdG8gei5hbnkoKVxuICAgICAgICBjb25zdCBhcmdzID0gdG9vbC5wYXJhbWV0ZXJzIHx8ICh0b29sLm5hbWUgPT09IFwiKlwiID8gei5hbnkoKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgY29tYmluZWQucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgICAgcmVuZGVyOiB0b29sLnJlbmRlcixcbiAgICAgICAgICB9IGFzIFJlYWN0VG9vbENhbGxSZW5kZXJlcjx1bmtub3duPik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEFkZCByZW5kZXIgY29tcG9uZW50cyBmcm9tIGh1bWFuLWluLXRoZS1sb29wIHRvb2xzXG4gICAgY29tYmluZWQucHVzaCguLi5wcm9jZXNzZWRIdW1hbkluVGhlTG9vcFRvb2xzLnJlbmRlclRvb2xDYWxscyk7XG5cbiAgICByZXR1cm4gY29tYmluZWQ7XG4gIH0sIFtyZW5kZXJUb29sQ2FsbHNMaXN0LCBmcm9udGVuZFRvb2xzTGlzdCwgcHJvY2Vzc2VkSHVtYW5JblRoZUxvb3BUb29sc10pO1xuXG4gIGNvbnN0IGNvcGlsb3RraXQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBjb3BpbG90a2l0ID0gbmV3IENvcGlsb3RLaXRDb3JlUmVhY3Qoe1xuICAgICAgcnVudGltZVVybDogY2hhdEFwaUVuZHBvaW50LFxuICAgICAgcnVudGltZVRyYW5zcG9ydDogdXNlU2luZ2xlRW5kcG9pbnQgPyBcInNpbmdsZVwiIDogXCJyZXN0XCIsXG4gICAgICBoZWFkZXJzOiBtZXJnZWRIZWFkZXJzLFxuICAgICAgY3JlZGVudGlhbHMsXG4gICAgICBwcm9wZXJ0aWVzLFxuICAgICAgYWdlbnRzX191bnNhZmVfZGV2X29ubHk6IGFnZW50cyxcbiAgICAgIHRvb2xzOiBhbGxUb29scyxcbiAgICAgIHJlbmRlclRvb2xDYWxsczogYWxsUmVuZGVyVG9vbENhbGxzLFxuICAgICAgcmVuZGVyQWN0aXZpdHlNZXNzYWdlczogYWxsQWN0aXZpdHlSZW5kZXJlcnMsXG4gICAgICByZW5kZXJDdXN0b21NZXNzYWdlczogcmVuZGVyQ3VzdG9tTWVzc2FnZXNMaXN0LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvcGlsb3RraXQ7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbYWxsVG9vbHMsIGFsbFJlbmRlclRvb2xDYWxscywgYWxsQWN0aXZpdHlSZW5kZXJlcnMsIHJlbmRlckN1c3RvbU1lc3NhZ2VzTGlzdCwgdXNlU2luZ2xlRW5kcG9pbnRdKTtcblxuICAvLyBTdWJzY3JpYmUgdG8gcmVuZGVyIHRvb2wgY2FsbHMgY2hhbmdlcyB0byBmb3JjZSByZS1yZW5kZXJzXG4gIGNvbnN0IFssIGZvcmNlVXBkYXRlXSA9IHVzZVJlZHVjZXIoKHgpID0+IHggKyAxLCAwKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGNvcGlsb3RraXQuc3Vic2NyaWJlKHtcbiAgICAgIG9uUmVuZGVyVG9vbENhbGxzQ2hhbmdlZDogKCkgPT4ge1xuICAgICAgICBmb3JjZVVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbY29waWxvdGtpdF0pO1xuXG4gIC8vIFRyYWNrIGV4ZWN1dGluZyB0b29sIGNhbGwgSURzIGF0IHRoZSBwcm92aWRlciBsZXZlbC5cbiAgLy8gVGhpcyBpcyBjcml0aWNhbCBmb3IgSElUTCByZWNvbm5lY3Rpb246IHdoZW4gY29ubmVjdGluZyB0byBhIHRocmVhZCB3aXRoXG4gIC8vIHBlbmRpbmcgdG9vbCBjYWxscywgdGhlIG9uVG9vbEV4ZWN1dGlvblN0YXJ0IGV2ZW50IGZpcmVzIGJlZm9yZSBjaGlsZCBjb21wb25lbnRzXG4gIC8vIChsaWtlIENvcGlsb3RDaGF0VG9vbENhbGxzVmlldykgbW91bnQuIEJ5IHRyYWNraW5nIGF0IHRoZSBwcm92aWRlciBsZXZlbCxcbiAgLy8gd2UgZW5zdXJlIHRoZSBleGVjdXRpbmcgc3RhdGUgaXMgY2FwdHVyZWQgYW5kIGF2YWlsYWJsZSB3aGVuIGNoaWxkcmVuIG1vdW50LlxuICBjb25zdCBbZXhlY3V0aW5nVG9vbENhbGxJZHMsIHNldEV4ZWN1dGluZ1Rvb2xDYWxsSWRzXSA9IHVzZVN0YXRlPFJlYWRvbmx5U2V0PHN0cmluZz4+KCgpID0+IG5ldyBTZXQoKSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBjb3BpbG90a2l0LnN1YnNjcmliZSh7XG4gICAgICBvblRvb2xFeGVjdXRpb25TdGFydDogKHsgdG9vbENhbGxJZCB9KSA9PiB7XG4gICAgICAgIHNldEV4ZWN1dGluZ1Rvb2xDYWxsSWRzKChwcmV2KSA9PiB7XG4gICAgICAgICAgaWYgKHByZXYuaGFzKHRvb2xDYWxsSWQpKSByZXR1cm4gcHJldjtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IFNldChwcmV2KTtcbiAgICAgICAgICBuZXh0LmFkZCh0b29sQ2FsbElkKTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgb25Ub29sRXhlY3V0aW9uRW5kOiAoeyB0b29sQ2FsbElkIH0pID0+IHtcbiAgICAgICAgc2V0RXhlY3V0aW5nVG9vbENhbGxJZHMoKHByZXYpID0+IHtcbiAgICAgICAgICBpZiAoIXByZXYuaGFzKHRvb2xDYWxsSWQpKSByZXR1cm4gcHJldjtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IFNldChwcmV2KTtcbiAgICAgICAgICBuZXh0LmRlbGV0ZSh0b29sQ2FsbElkKTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtjb3BpbG90a2l0XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb3BpbG90a2l0LnNldFJ1bnRpbWVVcmwoY2hhdEFwaUVuZHBvaW50KTtcbiAgICBjb3BpbG90a2l0LnNldFJ1bnRpbWVUcmFuc3BvcnQodXNlU2luZ2xlRW5kcG9pbnQgPyBcInNpbmdsZVwiIDogXCJyZXN0XCIpO1xuICAgIGNvcGlsb3RraXQuc2V0SGVhZGVycyhtZXJnZWRIZWFkZXJzKTtcbiAgICBjb3BpbG90a2l0LnNldENyZWRlbnRpYWxzKGNyZWRlbnRpYWxzKTtcbiAgICBjb3BpbG90a2l0LnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgY29waWxvdGtpdC5zZXRBZ2VudHNfX3Vuc2FmZV9kZXZfb25seShhZ2VudHMpO1xuICB9LCBbY2hhdEFwaUVuZHBvaW50LCBtZXJnZWRIZWFkZXJzLCBjcmVkZW50aWFscywgcHJvcGVydGllcywgYWdlbnRzLCB1c2VTaW5nbGVFbmRwb2ludF0pO1xuXG4gIHJldHVybiAoXG4gICAgPENvcGlsb3RLaXRDb250ZXh0LlByb3ZpZGVyXG4gICAgICB2YWx1ZT17e1xuICAgICAgICBjb3BpbG90a2l0LFxuICAgICAgICBleGVjdXRpbmdUb29sQ2FsbElkcyxcbiAgICAgIH19XG4gICAgPlxuICAgICAge2NoaWxkcmVufVxuICAgICAge3Nob3VsZFJlbmRlckluc3BlY3RvciA/IDxDb3BpbG90S2l0SW5zcGVjdG9yIGNvcmU9e2NvcGlsb3RraXR9IC8+IDogbnVsbH1cbiAgICA8L0NvcGlsb3RLaXRDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuLy8gSG9vayB0byB1c2UgdGhlIENvcGlsb3RLaXQgaW5zdGFuY2UgLSByZXR1cm5zIHRoZSBmdWxsIGNvbnRleHQgdmFsdWVcbmV4cG9ydCBjb25zdCB1c2VDb3BpbG90S2l0ID0gKCk6IENvcGlsb3RLaXRDb250ZXh0VmFsdWUgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChDb3BpbG90S2l0Q29udGV4dCk7XG4gIGNvbnN0IFssIGZvcmNlVXBkYXRlXSA9IHVzZVJlZHVjZXIoKHgpID0+IHggKyAxLCAwKTtcblxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VDb3BpbG90S2l0IG11c3QgYmUgdXNlZCB3aXRoaW4gQ29waWxvdEtpdFByb3ZpZGVyXCIpO1xuICB9XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gY29udGV4dC5jb3BpbG90a2l0LnN1YnNjcmliZSh7XG4gICAgICBvblJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzQ2hhbmdlZDogKCkgPT4ge1xuICAgICAgICBmb3JjZVVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtdKTtcblxuICByZXR1cm4gY29udGV4dDtcbn07XG4iLCJpbXBvcnQgeyBSZWFjdEFjdGl2aXR5TWVzc2FnZVJlbmRlcmVyLCBSZWFjdFRvb2xDYWxsUmVuZGVyZXIgfSBmcm9tIFwiQC90eXBlc1wiO1xuaW1wb3J0IHsgUmVhY3RDdXN0b21NZXNzYWdlUmVuZGVyZXIgfSBmcm9tIFwiQC90eXBlcy9yZWFjdC1jdXN0b20tbWVzc2FnZS1yZW5kZXJlclwiO1xuaW1wb3J0IHtcbiAgQ29waWxvdEtpdENvcmUsXG4gIENvcGlsb3RLaXRDb3JlQ29uZmlnLFxuICBDb3BpbG90S2l0Q29yZVN1YnNjcmliZXIsXG4gIENvcGlsb3RLaXRDb3JlU3Vic2NyaXB0aW9uLFxufSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb3BpbG90S2l0Q29yZVJlYWN0Q29uZmlnIGV4dGVuZHMgQ29waWxvdEtpdENvcmVDb25maWcge1xuICAvLyBBZGQgYW55IGFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzIHNwZWNpZmljIHRvIHRoZSBSZWFjdCBpbXBsZW1lbnRhdGlvblxuICByZW5kZXJUb29sQ2FsbHM/OiBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8YW55PltdO1xuICByZW5kZXJBY3Rpdml0eU1lc3NhZ2VzPzogUmVhY3RBY3Rpdml0eU1lc3NhZ2VSZW5kZXJlcjxhbnk+W107XG5cbiAgLy8gQWRkIGN1c3RvbSBtZXNzYWdlIHJlbmRlcmVyc1xuICByZW5kZXJDdXN0b21NZXNzYWdlcz86IFJlYWN0Q3VzdG9tTWVzc2FnZVJlbmRlcmVyW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29waWxvdEtpdENvcmVSZWFjdFN1YnNjcmliZXIgZXh0ZW5kcyBDb3BpbG90S2l0Q29yZVN1YnNjcmliZXIge1xuICBvblJlbmRlclRvb2xDYWxsc0NoYW5nZWQ/OiAoZXZlbnQ6IHtcbiAgICBjb3BpbG90a2l0OiBDb3BpbG90S2l0Q29yZTtcbiAgICByZW5kZXJUb29sQ2FsbHM6IFJlYWN0VG9vbENhbGxSZW5kZXJlcjxhbnk+W107XG4gIH0pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgY2xhc3MgQ29waWxvdEtpdENvcmVSZWFjdCBleHRlbmRzIENvcGlsb3RLaXRDb3JlIHtcbiAgcHJpdmF0ZSBfcmVuZGVyVG9vbENhbGxzOiBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8YW55PltdID0gW107XG4gIHByaXZhdGUgX3JlbmRlckN1c3RvbU1lc3NhZ2VzOiBSZWFjdEN1c3RvbU1lc3NhZ2VSZW5kZXJlcltdID0gW107XG4gIHByaXZhdGUgX3JlbmRlckFjdGl2aXR5TWVzc2FnZXM6IFJlYWN0QWN0aXZpdHlNZXNzYWdlUmVuZGVyZXI8YW55PltdID0gW107XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBDb3BpbG90S2l0Q29yZVJlYWN0Q29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKTtcbiAgICB0aGlzLl9yZW5kZXJUb29sQ2FsbHMgPSBjb25maWcucmVuZGVyVG9vbENhbGxzID8/IFtdO1xuICAgIHRoaXMuX3JlbmRlckN1c3RvbU1lc3NhZ2VzID0gY29uZmlnLnJlbmRlckN1c3RvbU1lc3NhZ2VzID8/IFtdO1xuICAgIHRoaXMuX3JlbmRlckFjdGl2aXR5TWVzc2FnZXMgPSBjb25maWcucmVuZGVyQWN0aXZpdHlNZXNzYWdlcyA/PyBbXTtcbiAgfVxuXG4gIGdldCByZW5kZXJDdXN0b21NZXNzYWdlcygpOiBSZWFkb25seTxSZWFjdEN1c3RvbU1lc3NhZ2VSZW5kZXJlcltdPiB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlckN1c3RvbU1lc3NhZ2VzO1xuICB9XG5cbiAgZ2V0IHJlbmRlckFjdGl2aXR5TWVzc2FnZXMoKTogUmVhZG9ubHk8UmVhY3RBY3Rpdml0eU1lc3NhZ2VSZW5kZXJlcjxhbnk+PltdIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyQWN0aXZpdHlNZXNzYWdlcztcbiAgfVxuXG4gIGdldCByZW5kZXJUb29sQ2FsbHMoKTogUmVhZG9ubHk8UmVhY3RUb29sQ2FsbFJlbmRlcmVyPGFueT4+W10ge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJUb29sQ2FsbHM7XG4gIH1cblxuICBzZXRSZW5kZXJUb29sQ2FsbHMocmVuZGVyVG9vbENhbGxzOiBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8YW55PltdKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyVG9vbENhbGxzID0gcmVuZGVyVG9vbENhbGxzO1xuXG4gICAgLy8gTm90aWZ5IFJlYWN0LXNwZWNpZmljIHN1YnNjcmliZXJzXG4gICAgdm9pZCB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKFxuICAgICAgKHN1YnNjcmliZXIpID0+IHtcbiAgICAgICAgY29uc3QgcmVhY3RTdWJzY3JpYmVyID0gc3Vic2NyaWJlciBhcyBDb3BpbG90S2l0Q29yZVJlYWN0U3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKHJlYWN0U3Vic2NyaWJlci5vblJlbmRlclRvb2xDYWxsc0NoYW5nZWQpIHtcbiAgICAgICAgICByZWFjdFN1YnNjcmliZXIub25SZW5kZXJUb29sQ2FsbHNDaGFuZ2VkKHtcbiAgICAgICAgICAgIGNvcGlsb3RraXQ6IHRoaXMsXG4gICAgICAgICAgICByZW5kZXJUb29sQ2FsbHM6IHRoaXMucmVuZGVyVG9vbENhbGxzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXCJTdWJzY3JpYmVyIG9uUmVuZGVyVG9vbENhbGxzQ2hhbmdlZCBlcnJvcjpcIlxuICAgICk7XG4gIH1cblxuICAvLyBPdmVycmlkZSB0byBhY2NlcHQgUmVhY3Qtc3BlY2lmaWMgc3Vic2NyaWJlciB0eXBlXG4gIHN1YnNjcmliZShzdWJzY3JpYmVyOiBDb3BpbG90S2l0Q29yZVJlYWN0U3Vic2NyaWJlcik6IENvcGlsb3RLaXRDb3JlU3Vic2NyaXB0aW9uIHtcbiAgICByZXR1cm4gc3VwZXIuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gXCJAbGl0LWxhYnMvcmVhY3RcIjtcbmltcG9ydCB0eXBlIHsgQ29waWxvdEtpdENvcmUgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcblxudHlwZSBDb3BpbG90S2l0SW5zcGVjdG9yQmFzZVByb3BzID0ge1xuICBjb3JlPzogQ29waWxvdEtpdENvcmUgfCBudWxsO1xuICBba2V5OiBzdHJpbmddOiB1bmtub3duO1xufTtcblxudHlwZSBJbnNwZWN0b3JDb21wb25lbnQgPSBSZWFjdC5Db21wb25lbnRUeXBlPENvcGlsb3RLaXRJbnNwZWN0b3JCYXNlUHJvcHM+O1xuXG5leHBvcnQgaW50ZXJmYWNlIENvcGlsb3RLaXRJbnNwZWN0b3JQcm9wcyBleHRlbmRzIENvcGlsb3RLaXRJbnNwZWN0b3JCYXNlUHJvcHMge31cblxuZXhwb3J0IGNvbnN0IENvcGlsb3RLaXRJbnNwZWN0b3I6IFJlYWN0LkZDPENvcGlsb3RLaXRJbnNwZWN0b3JQcm9wcz4gPSAoeyBjb3JlLCAuLi5yZXN0IH0pID0+IHtcbiAgY29uc3QgW0luc3BlY3RvckNvbXBvbmVudCwgc2V0SW5zcGVjdG9yQ29tcG9uZW50XSA9IFJlYWN0LnVzZVN0YXRlPEluc3BlY3RvckNvbXBvbmVudCB8IG51bGw+KG51bGwpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlO1xuXG4gICAgLy8gTG9hZCB0aGUgd2ViIGNvbXBvbmVudCBvbmx5IG9uIHRoZSBjbGllbnQgdG8ga2VlcCBTU1Igb3V0cHV0IHN0YWJsZS5cbiAgICBpbXBvcnQoXCJAY29waWxvdGtpdG5leHQvd2ViLWluc3BlY3RvclwiKS50aGVuKChtb2QpID0+IHtcbiAgICAgIG1vZC5kZWZpbmVXZWJJbnNwZWN0b3I/LigpO1xuXG4gICAgICBjb25zdCBDb21wb25lbnQgPSBjcmVhdGVDb21wb25lbnQoe1xuICAgICAgICB0YWdOYW1lOiBtb2QuV0VCX0lOU1BFQ1RPUl9UQUcsXG4gICAgICAgIGVsZW1lbnRDbGFzczogbW9kLldlYkluc3BlY3RvckVsZW1lbnQsXG4gICAgICAgIHJlYWN0OiBSZWFjdCxcbiAgICAgIH0pIGFzIEluc3BlY3RvckNvbXBvbmVudDtcblxuICAgICAgaWYgKG1vdW50ZWQpIHtcbiAgICAgICAgc2V0SW5zcGVjdG9yQ29tcG9uZW50KCgpID0+IENvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbW91bnRlZCA9IGZhbHNlO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBEdXJpbmcgU1NSIChhbmQgdW50aWwgdGhlIGNsaWVudCBmaW5pc2hlcyBsb2FkaW5nKSwgcmVuZGVyIG5vdGhpbmcgdG8ga2VlcCBtYXJrdXAgY29uc2lzdGVudC5cbiAgaWYgKCFJbnNwZWN0b3JDb21wb25lbnQpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiA8SW5zcGVjdG9yQ29tcG9uZW50IHsuLi5yZXN0fSBjb3JlPXtjb3JlID8/IG51bGx9IC8+O1xufTtcblxuQ29waWxvdEtpdEluc3BlY3Rvci5kaXNwbGF5TmFtZSA9IFwiQ29waWxvdEtpdEluc3BlY3RvclwiO1xuIiwiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHR5cGUgeyBBYnN0cmFjdEFnZW50LCBSdW5BZ2VudFJlc3VsdCB9IGZyb20gXCJAYWctdWkvY2xpZW50XCI7XG5cbi8vIFByb3RvY29sIHZlcnNpb24gc3VwcG9ydGVkXG5jb25zdCBQUk9UT0NPTF9WRVJTSU9OID0gXCIyMDI1LTA2LTE4XCI7XG5cbi8vIFNhbmRib3ggcHJveHkgSFRNTCAtIGVtYmVkZGVkIHRvIGF2b2lkIHJlcXVpcmluZyB1c2VycyB0byBhZGQgYSBmaWxlIHRvIHRoZWlyIHB1YmxpYyBmb2xkZXJcbmNvbnN0IFNBTkRCT1hfSFRNTCA9IGA8IWRvY3R5cGUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG48bWV0YSBjaGFyc2V0PVwidXRmLThcIiAvPlxuPG1ldGEgaHR0cC1lcXVpdj1cIkNvbnRlbnQtU2VjdXJpdHktUG9saWN5XCIgY29udGVudD1cImRlZmF1bHQtc3JjICdzZWxmJzsgaW1nLXNyYyAqIGRhdGE6IGJsb2I6ICd1bnNhZmUtaW5saW5lJzsgbWVkaWEtc3JjICogYmxvYjogZGF0YTo7IGZvbnQtc3JjICogYmxvYjogZGF0YTo7IHNjcmlwdC1zcmMgJ3NlbGYnICd3YXNtLXVuc2FmZS1ldmFsJyAndW5zYWZlLWlubGluZScgJ3Vuc2FmZS1ldmFsJyBibG9iOiBkYXRhOiBodHRwOi8vbG9jYWxob3N0OiogaHR0cHM6Ly9sb2NhbGhvc3Q6Kjsgc3R5bGUtc3JjICogYmxvYjogZGF0YTogJ3Vuc2FmZS1pbmxpbmUnOyBjb25uZWN0LXNyYyAqOyBmcmFtZS1zcmMgKiBibG9iOiBkYXRhOiBodHRwOi8vbG9jYWxob3N0OiogaHR0cHM6Ly9sb2NhbGhvc3Q6KjsgYmFzZS11cmkgJ3NlbGYnO1wiIC8+XG48c3R5bGU+aHRtbCxib2R5e21hcmdpbjowO3BhZGRpbmc6MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO292ZXJmbG93OmhpZGRlbn0qe2JveC1zaXppbmc6Ym9yZGVyLWJveH1pZnJhbWV7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXI6bm9uZTtwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVuO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCV9PC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuPHNjcmlwdD5cbmlmKHdpbmRvdy5zZWxmPT09d2luZG93LnRvcCl7dGhyb3cgbmV3IEVycm9yKFwiVGhpcyBmaWxlIG11c3QgYmUgdXNlZCBpbiBhbiBpZnJhbWUuXCIpfVxuY29uc3QgaW5uZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbmlubmVyLnN0eWxlPVwid2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXI6bm9uZTtcIjtcbmlubmVyLnNldEF0dHJpYnV0ZShcInNhbmRib3hcIixcImFsbG93LXNjcmlwdHMgYWxsb3ctc2FtZS1vcmlnaW4gYWxsb3ctZm9ybXNcIik7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlubmVyKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGFzeW5jKGV2ZW50KT0+e1xuaWYoZXZlbnQuc291cmNlPT09d2luZG93LnBhcmVudCl7XG5pZihldmVudC5kYXRhJiZldmVudC5kYXRhLm1ldGhvZD09PVwidWkvbm90aWZpY2F0aW9ucy9zYW5kYm94LXJlc291cmNlLXJlYWR5XCIpe1xuY29uc3R7aHRtbCxzYW5kYm94fT1ldmVudC5kYXRhLnBhcmFtcztcbmlmKHR5cGVvZiBzYW5kYm94PT09XCJzdHJpbmdcIilpbm5lci5zZXRBdHRyaWJ1dGUoXCJzYW5kYm94XCIsc2FuZGJveCk7XG5pZih0eXBlb2YgaHRtbD09PVwic3RyaW5nXCIpaW5uZXIuc3JjZG9jPWh0bWw7XG59ZWxzZSBpZihpbm5lciYmaW5uZXIuY29udGVudFdpbmRvdyl7XG5pbm5lci5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKGV2ZW50LmRhdGEsXCIqXCIpO1xufVxufWVsc2UgaWYoZXZlbnQuc291cmNlPT09aW5uZXIuY29udGVudFdpbmRvdyl7XG53aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKGV2ZW50LmRhdGEsXCIqXCIpO1xufVxufSk7XG53aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHtqc29ucnBjOlwiMi4wXCIsbWV0aG9kOlwidWkvbm90aWZpY2F0aW9ucy9zYW5kYm94LXByb3h5LXJlYWR5XCIscGFyYW1zOnt9fSxcIipcIik7XG48L3NjcmlwdD5cbjwvYm9keT5cbjwvaHRtbD5gO1xuXG4vKipcbiAqIFF1ZXVlIGZvciBzZXJpYWxpemluZyBNQ1AgYXBwIHJlcXVlc3RzIHRvIGFuIGFnZW50LlxuICogRW5zdXJlcyByZXF1ZXN0cyB3YWl0IGZvciB0aGUgYWdlbnQgdG8gc3RvcCBydW5uaW5nIGFuZCBhcmUgcHJvY2Vzc2VkIG9uZSBhdCBhIHRpbWUuXG4gKi9cbmNsYXNzIE1DUEFwcHNSZXF1ZXN0UXVldWUge1xuICBwcml2YXRlIHF1ZXVlcyA9IG5ldyBNYXA8c3RyaW5nLCBBcnJheTx7XG4gICAgZXhlY3V0ZTogKCkgPT4gUHJvbWlzZTxSdW5BZ2VudFJlc3VsdD47XG4gICAgcmVzb2x2ZTogKHJlc3VsdDogUnVuQWdlbnRSZXN1bHQpID0+IHZvaWQ7XG4gICAgcmVqZWN0OiAoZXJyb3I6IEVycm9yKSA9PiB2b2lkO1xuICB9Pj4oKTtcbiAgcHJpdmF0ZSBwcm9jZXNzaW5nID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG5cbiAgLyoqXG4gICAqIEFkZCBhIHJlcXVlc3QgdG8gdGhlIHF1ZXVlIGZvciBhIHNwZWNpZmljIGFnZW50IHRocmVhZC5cbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSByZXF1ZXN0IGNvbXBsZXRlcy5cbiAgICovXG4gIGFzeW5jIGVucXVldWUoXG4gICAgYWdlbnQ6IEFic3RyYWN0QWdlbnQsXG4gICAgcmVxdWVzdDogKCkgPT4gUHJvbWlzZTxSdW5BZ2VudFJlc3VsdD5cbiAgKTogUHJvbWlzZTxSdW5BZ2VudFJlc3VsdD4ge1xuICAgIGNvbnN0IHRocmVhZElkID0gYWdlbnQudGhyZWFkSWQgfHwgXCJkZWZhdWx0XCI7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8gR2V0IG9yIGNyZWF0ZSBxdWV1ZSBmb3IgdGhpcyB0aHJlYWRcbiAgICAgIGxldCBxdWV1ZSA9IHRoaXMucXVldWVzLmdldCh0aHJlYWRJZCk7XG4gICAgICBpZiAoIXF1ZXVlKSB7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHRoaXMucXVldWVzLnNldCh0aHJlYWRJZCwgcXVldWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgcmVxdWVzdCB0byBxdWV1ZVxuICAgICAgcXVldWUucHVzaCh7IGV4ZWN1dGU6IHJlcXVlc3QsIHJlc29sdmUsIHJlamVjdCB9KTtcblxuICAgICAgLy8gU3RhcnQgcHJvY2Vzc2luZyBpZiBub3QgYWxyZWFkeSBydW5uaW5nXG4gICAgICB0aGlzLnByb2Nlc3NRdWV1ZSh0aHJlYWRJZCwgYWdlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzUXVldWUodGhyZWFkSWQ6IHN0cmluZywgYWdlbnQ6IEFic3RyYWN0QWdlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBJZiBhbHJlYWR5IHByb2Nlc3NpbmcgdGhpcyBxdWV1ZSwgcmV0dXJuXG4gICAgaWYgKHRoaXMucHJvY2Vzc2luZy5nZXQodGhyZWFkSWQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wcm9jZXNzaW5nLnNldCh0aHJlYWRJZCwgdHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVldWUgPSB0aGlzLnF1ZXVlcy5nZXQodGhyZWFkSWQpO1xuICAgICAgaWYgKCFxdWV1ZSkgcmV0dXJuO1xuXG4gICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBpdGVtID0gcXVldWVbMF0hO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gV2FpdCBmb3IgYW55IGFjdGl2ZSBydW4gdG8gY29tcGxldGUgYmVmb3JlIHByb2Nlc3NpbmdcbiAgICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JBZ2VudElkbGUoYWdlbnQpO1xuXG4gICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgcmVxdWVzdFxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGl0ZW0uZXhlY3V0ZSgpO1xuICAgICAgICAgIGl0ZW0ucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGl0ZW0ucmVqZWN0KGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgcHJvY2Vzc2VkIGl0ZW1cbiAgICAgICAgcXVldWUuc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5wcm9jZXNzaW5nLnNldCh0aHJlYWRJZCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgd2FpdEZvckFnZW50SWRsZShhZ2VudDogQWJzdHJhY3RBZ2VudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgaWYgKCFhZ2VudC5pc1J1bm5pbmcpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgICBjb25zdCBmaW5pc2ggPSAoKSA9PiB7XG4gICAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xuICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcblxuICAgICAgY29uc3Qgc3ViID0gYWdlbnQuc3Vic2NyaWJlKHtcbiAgICAgICAgb25SdW5GaW5hbGl6ZWQ6IGZpbmlzaCxcbiAgICAgICAgb25SdW5GYWlsZWQ6IGZpbmlzaCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGYWxsYmFjayBmb3IgcmVjb25uZWN0IHNjZW5hcmlvcyB3aGVyZSBldmVudHMgZG9uJ3QgZmlyZVxuICAgICAgY29uc3QgY2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKCFhZ2VudC5pc1J1bm5pbmcpIGZpbmlzaCgpO1xuICAgICAgfSwgNTAwKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBHbG9iYWwgcXVldWUgaW5zdGFuY2UgZm9yIGFsbCBNQ1AgYXBwIHJlcXVlc3RzXG5jb25zdCBtY3BBcHBzUmVxdWVzdFF1ZXVlID0gbmV3IE1DUEFwcHNSZXF1ZXN0UXVldWUoKTtcblxuLyoqXG4gKiBBY3Rpdml0eSB0eXBlIGZvciBNQ1AgQXBwcyBldmVudHMgLSBtdXN0IG1hdGNoIHRoZSBtaWRkbGV3YXJlJ3MgTUNQQXBwc0FjdGl2aXR5VHlwZVxuICovXG5leHBvcnQgY29uc3QgTUNQQXBwc0FjdGl2aXR5VHlwZSA9IFwibWNwLWFwcHNcIjtcblxuLy8gWm9kIHNjaGVtYSBmb3IgYWN0aXZpdHkgY29udGVudCB2YWxpZGF0aW9uIChtaWRkbGV3YXJlIDAuMC4yIGZvcm1hdClcbmV4cG9ydCBjb25zdCBNQ1BBcHBzQWN0aXZpdHlDb250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICByZXN1bHQ6IHoub2JqZWN0KHtcbiAgICBjb250ZW50OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCksXG4gICAgc3RydWN0dXJlZENvbnRlbnQ6IHouYW55KCkub3B0aW9uYWwoKSxcbiAgICBpc0Vycm9yOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICB9KSxcbiAgLy8gUmVzb3VyY2UgVVJJIHRvIGZldGNoIChlLmcuLCBcInVpOi8vc2VydmVyL2Rhc2hib2FyZFwiKVxuICByZXNvdXJjZVVyaTogei5zdHJpbmcoKSxcbiAgLy8gTUQ1IGhhc2ggb2Ygc2VydmVyIGNvbmZpZyAocmVuYW1lZCBmcm9tIHNlcnZlcklkIGluIDAuMC4xKVxuICBzZXJ2ZXJIYXNoOiB6LnN0cmluZygpLFxuICAvLyBPcHRpb25hbCBzdGFibGUgc2VydmVyIElEIGZyb20gY29uZmlnICh0YWtlcyBwcmVjZWRlbmNlIG92ZXIgc2VydmVySGFzaClcbiAgc2VydmVySWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLy8gT3JpZ2luYWwgdG9vbCBpbnB1dCBhcmd1bWVudHNcbiAgdG9vbElucHV0OiB6LnJlY29yZCh6LnVua25vd24oKSkub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBNQ1BBcHBzQWN0aXZpdHlDb250ZW50ID0gei5pbmZlcjx0eXBlb2YgTUNQQXBwc0FjdGl2aXR5Q29udGVudFNjaGVtYT47XG5cbi8vIFR5cGUgZm9yIHRoZSByZXNvdXJjZSBmZXRjaGVkIGZyb20gdGhlIHNlcnZlclxuaW50ZXJmYWNlIEZldGNoZWRSZXNvdXJjZSB7XG4gIHVyaTogc3RyaW5nO1xuICBtaW1lVHlwZT86IHN0cmluZztcbiAgdGV4dD86IHN0cmluZztcbiAgYmxvYj86IHN0cmluZztcbiAgX21ldGE/OiB7XG4gICAgdWk/OiB7XG4gICAgICBwcmVmZXJzQm9yZGVyPzogYm9vbGVhbjtcbiAgICAgIGNzcD86IHtcbiAgICAgICAgY29ubmVjdERvbWFpbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgcmVzb3VyY2VEb21haW5zPzogc3RyaW5nW107XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbmludGVyZmFjZSBKU09OUlBDUmVxdWVzdCB7XG4gIGpzb25ycGM6IFwiMi4wXCI7XG4gIGlkOiBzdHJpbmcgfCBudW1iZXI7XG4gIG1ldGhvZDogc3RyaW5nO1xuICBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbn1cblxuaW50ZXJmYWNlIEpTT05SUENSZXNwb25zZSB7XG4gIGpzb25ycGM6IFwiMi4wXCI7XG4gIGlkOiBzdHJpbmcgfCBudW1iZXI7XG4gIHJlc3VsdD86IHVua25vd247XG4gIGVycm9yPzogeyBjb2RlOiBudW1iZXI7IG1lc3NhZ2U6IHN0cmluZyB9O1xufVxuXG5pbnRlcmZhY2UgSlNPTlJQQ05vdGlmaWNhdGlvbiB7XG4gIGpzb25ycGM6IFwiMi4wXCI7XG4gIG1ldGhvZDogc3RyaW5nO1xuICBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbn1cblxudHlwZSBKU09OUlBDTWVzc2FnZSA9IEpTT05SUENSZXF1ZXN0IHwgSlNPTlJQQ1Jlc3BvbnNlIHwgSlNPTlJQQ05vdGlmaWNhdGlvbjtcblxuZnVuY3Rpb24gaXNSZXF1ZXN0KG1zZzogSlNPTlJQQ01lc3NhZ2UpOiBtc2cgaXMgSlNPTlJQQ1JlcXVlc3Qge1xuICByZXR1cm4gXCJpZFwiIGluIG1zZyAmJiBcIm1ldGhvZFwiIGluIG1zZztcbn1cblxuZnVuY3Rpb24gaXNOb3RpZmljYXRpb24obXNnOiBKU09OUlBDTWVzc2FnZSk6IG1zZyBpcyBKU09OUlBDTm90aWZpY2F0aW9uIHtcbiAgcmV0dXJuICEoXCJpZFwiIGluIG1zZykgJiYgXCJtZXRob2RcIiBpbiBtc2c7XG59XG5cbi8qKlxuICogUHJvcHMgZm9yIHRoZSBhY3Rpdml0eSByZW5kZXJlciBjb21wb25lbnRcbiAqL1xuaW50ZXJmYWNlIE1DUEFwcHNBY3Rpdml0eVJlbmRlcmVyUHJvcHMge1xuICBhY3Rpdml0eVR5cGU6IHN0cmluZztcbiAgY29udGVudDogTUNQQXBwc0FjdGl2aXR5Q29udGVudDtcbiAgbWVzc2FnZTogdW5rbm93bjsgLy8gQWN0aXZpdHlNZXNzYWdlIGZyb20gQGFnLXVpL2NvcmVcbiAgYWdlbnQ6IEFic3RyYWN0QWdlbnQgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogTUNQIEFwcHMgRXh0ZW5zaW9uIEFjdGl2aXR5IFJlbmRlcmVyXG4gKlxuICogUmVuZGVycyBNQ1AgQXBwcyBVSSBpbiBhIHNhbmRib3hlZCBpZnJhbWUgd2l0aCBmdWxsIHByb3RvY29sIHN1cHBvcnQuXG4gKiBGZXRjaGVzIHJlc291cmNlIGNvbnRlbnQgb24tZGVtYW5kIHZpYSBwcm94aWVkIE1DUCByZXF1ZXN0cy5cbiAqL1xuZXhwb3J0IGNvbnN0IE1DUEFwcHNBY3Rpdml0eVJlbmRlcmVyOiBSZWFjdC5GQzxNQ1BBcHBzQWN0aXZpdHlSZW5kZXJlclByb3BzPiA9IGZ1bmN0aW9uIE1DUEFwcHNBY3Rpdml0eVJlbmRlcmVyKHsgY29udGVudCwgYWdlbnQgfSkge1xuXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGlmcmFtZVJlZiA9IHVzZVJlZjxIVE1MSUZyYW1lRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaWZyYW1lUmVhZHksIHNldElmcmFtZVJlYWR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxFcnJvciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpZnJhbWVTaXplLCBzZXRJZnJhbWVTaXplXSA9IHVzZVN0YXRlPHsgd2lkdGg/OiBudW1iZXI7IGhlaWdodD86IG51bWJlciB9Pih7fSk7XG4gIGNvbnN0IFtmZXRjaGVkUmVzb3VyY2UsIHNldEZldGNoZWRSZXNvdXJjZV0gPSB1c2VTdGF0ZTxGZXRjaGVkUmVzb3VyY2UgfCBudWxsPihudWxsKTtcblxuICAvLyBVc2UgcmVmcyBmb3IgdmFsdWVzIHRoYXQgc2hvdWxkbid0IHRyaWdnZXIgcmUtcmVuZGVycyBidXQgbmVlZCBsYXRlc3QgdmFsdWVzXG4gIGNvbnN0IGNvbnRlbnRSZWYgPSB1c2VSZWYoY29udGVudCk7XG4gIGNvbnRlbnRSZWYuY3VycmVudCA9IGNvbnRlbnQ7XG5cbiAgLy8gU3RvcmUgYWdlbnQgaW4gYSByZWYgZm9yIHVzZSBpbiBhc3luYyBoYW5kbGVyc1xuICBjb25zdCBhZ2VudFJlZiA9IHVzZVJlZihhZ2VudCk7XG4gIGFnZW50UmVmLmN1cnJlbnQgPSBhZ2VudDtcblxuICAvLyBSZWYgdG8gdHJhY2sgZmV0Y2ggc3RhdGUgLSBzdXJ2aXZlcyBTdHJpY3RNb2RlIHJlbW91bnRzXG4gIGNvbnN0IGZldGNoU3RhdGVSZWYgPSB1c2VSZWY8e1xuICAgIGluUHJvZ3Jlc3M6IGJvb2xlYW47XG4gICAgcHJvbWlzZTogUHJvbWlzZTxGZXRjaGVkUmVzb3VyY2UgfCBudWxsPiB8IG51bGw7XG4gICAgcmVzb3VyY2VVcmk6IHN0cmluZyB8IG51bGw7XG4gIH0+KHsgaW5Qcm9ncmVzczogZmFsc2UsIHByb21pc2U6IG51bGwsIHJlc291cmNlVXJpOiBudWxsIH0pO1xuXG4gIC8vIENhbGxiYWNrIHRvIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSBpZnJhbWVcbiAgY29uc3Qgc2VuZFRvSWZyYW1lID0gdXNlQ2FsbGJhY2soKG1zZzogSlNPTlJQQ01lc3NhZ2UpID0+IHtcbiAgICBpZiAoaWZyYW1lUmVmLmN1cnJlbnQ/LmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW01DUEFwcHNSZW5kZXJlcl0gU2VuZGluZyB0byBpZnJhbWU6XCIsIG1zZyk7XG4gICAgICBpZnJhbWVSZWYuY3VycmVudC5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1zZywgXCIqXCIpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIENhbGxiYWNrIHRvIHNlbmQgYSBKU09OLVJQQyByZXNwb25zZVxuICBjb25zdCBzZW5kUmVzcG9uc2UgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZyB8IG51bWJlciwgcmVzdWx0OiB1bmtub3duKSA9PiB7XG4gICAgc2VuZFRvSWZyYW1lKHtcbiAgICAgIGpzb25ycGM6IFwiMi4wXCIsXG4gICAgICBpZCxcbiAgICAgIHJlc3VsdCxcbiAgICB9KTtcbiAgfSwgW3NlbmRUb0lmcmFtZV0pO1xuXG4gIC8vIENhbGxiYWNrIHRvIHNlbmQgYSBKU09OLVJQQyBlcnJvciByZXNwb25zZVxuICBjb25zdCBzZW5kRXJyb3JSZXNwb25zZSA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nIHwgbnVtYmVyLCBjb2RlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgIHNlbmRUb0lmcmFtZSh7XG4gICAgICBqc29ucnBjOiBcIjIuMFwiLFxuICAgICAgaWQsXG4gICAgICBlcnJvcjogeyBjb2RlLCBtZXNzYWdlIH0sXG4gICAgfSk7XG4gIH0sIFtzZW5kVG9JZnJhbWVdKTtcblxuICAvLyBDYWxsYmFjayB0byBzZW5kIGEgbm90aWZpY2F0aW9uXG4gIGNvbnN0IHNlbmROb3RpZmljYXRpb24gPSB1c2VDYWxsYmFjaygobWV0aG9kOiBzdHJpbmcsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiB7XG4gICAgc2VuZFRvSWZyYW1lKHtcbiAgICAgIGpzb25ycGM6IFwiMi4wXCIsXG4gICAgICBtZXRob2QsXG4gICAgICBwYXJhbXM6IHBhcmFtcyB8fCB7fSxcbiAgICB9KTtcbiAgfSwgW3NlbmRUb0lmcmFtZV0pO1xuXG4gIC8vIEVmZmVjdCAwOiBGZXRjaCB0aGUgcmVzb3VyY2UgY29udGVudCBvbiBtb3VudFxuICAvLyBVc2VzIHJlZi1iYXNlZCBkZWR1cGxpY2F0aW9uIHRvIGhhbmRsZSBSZWFjdCBTdHJpY3RNb2RlIGRvdWJsZS1tb3VudGluZ1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzb3VyY2VVcmksIHNlcnZlckhhc2gsIHNlcnZlcklkIH0gPSBjb250ZW50O1xuXG4gICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGEgZmV0Y2ggaW4gcHJvZ3Jlc3MgZm9yIHRoaXMgcmVzb3VyY2VcbiAgICAvLyBUaGlzIGhhbmRsZXMgU3RyaWN0TW9kZSBkb3VibGUtbW91bnRpbmcgLSBzZWNvbmQgbW91bnQgcmV1c2VzIGZpcnN0IG1vdW50J3MgcHJvbWlzZVxuICAgIGlmIChmZXRjaFN0YXRlUmVmLmN1cnJlbnQuaW5Qcm9ncmVzcyAmJiBmZXRjaFN0YXRlUmVmLmN1cnJlbnQucmVzb3VyY2VVcmkgPT09IHJlc291cmNlVXJpKSB7XG4gICAgICAvLyBSZXVzZSB0aGUgZXhpc3RpbmcgcHJvbWlzZVxuICAgICAgZmV0Y2hTdGF0ZVJlZi5jdXJyZW50LnByb21pc2U/LnRoZW4oKHJlc291cmNlKSA9PiB7XG4gICAgICAgIGlmIChyZXNvdXJjZSkge1xuICAgICAgICAgIHNldEZldGNoZWRSZXNvdXJjZShyZXNvdXJjZSk7XG4gICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyKSkpO1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFhZ2VudCkge1xuICAgICAgc2V0RXJyb3IobmV3IEVycm9yKFwiTm8gYWdlbnQgYXZhaWxhYmxlIHRvIGZldGNoIHJlc291cmNlXCIpKTtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTWFyayBmZXRjaCBhcyBpbiBwcm9ncmVzc1xuICAgIGZldGNoU3RhdGVSZWYuY3VycmVudC5pblByb2dyZXNzID0gdHJ1ZTtcbiAgICBmZXRjaFN0YXRlUmVmLmN1cnJlbnQucmVzb3VyY2VVcmkgPSByZXNvdXJjZVVyaTtcblxuICAgIC8vIENyZWF0ZSB0aGUgZmV0Y2ggcHJvbWlzZSB1c2luZyB0aGUgcXVldWUgdG8gc2VyaWFsaXplIHJlcXVlc3RzXG4gICAgY29uc3QgZmV0Y2hQcm9taXNlID0gKGFzeW5jICgpOiBQcm9taXNlPEZldGNoZWRSZXNvdXJjZSB8IG51bGw+ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFVzZSBxdWV1ZSB0byB3YWl0IGZvciBhZ2VudCB0byBiZSBpZGxlIGFuZCBzZXJpYWxpemUgcmVxdWVzdHNcbiAgICAgICAgY29uc3QgcnVuUmVzdWx0ID0gYXdhaXQgbWNwQXBwc1JlcXVlc3RRdWV1ZS5lbnF1ZXVlKGFnZW50LCAoKSA9PlxuICAgICAgICAgIGFnZW50LnJ1bkFnZW50KHtcbiAgICAgICAgICAgIGZvcndhcmRlZFByb3BzOiB7XG4gICAgICAgICAgICAgIF9fcHJveGllZE1DUFJlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJIYXNoLFxuICAgICAgICAgICAgICAgIHNlcnZlcklkLCAvLyBvcHRpb25hbCwgdGFrZXMgcHJlY2VkZW5jZSBpZiBwcm92aWRlZFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJyZXNvdXJjZXMvcmVhZFwiLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyB1cmk6IHJlc291cmNlVXJpIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gRXh0cmFjdCByZXNvdXJjZSBmcm9tIHJlc3VsdFxuICAgICAgICAvLyBUaGUgcmVzcG9uc2UgZm9ybWF0IGlzOiB7IGNvbnRlbnRzOiBbeyB1cmksIG1pbWVUeXBlLCB0ZXh0PywgYmxvYj8sIF9tZXRhPyB9XSB9XG4gICAgICAgIGNvbnN0IHJlc3VsdERhdGEgPSBydW5SZXN1bHQucmVzdWx0IGFzIHsgY29udGVudHM/OiBGZXRjaGVkUmVzb3VyY2VbXSB9IHwgdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZXNvdXJjZSA9IHJlc3VsdERhdGE/LmNvbnRlbnRzPy5bMF07XG5cbiAgICAgICAgaWYgKCFyZXNvdXJjZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJlc291cmNlIGNvbnRlbnQgaW4gcmVzcG9uc2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzb3VyY2U7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIltNQ1BBcHBzUmVuZGVyZXJdIEZhaWxlZCB0byBmZXRjaCByZXNvdXJjZTpcIiwgZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gTWFyayBmZXRjaCBhcyBjb21wbGV0ZVxuICAgICAgICBmZXRjaFN0YXRlUmVmLmN1cnJlbnQuaW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pKCk7XG5cbiAgICAvLyBTdG9yZSB0aGUgcHJvbWlzZSBmb3IgcG90ZW50aWFsIHJldXNlXG4gICAgZmV0Y2hTdGF0ZVJlZi5jdXJyZW50LnByb21pc2UgPSBmZXRjaFByb21pc2U7XG5cbiAgICAvLyBIYW5kbGUgdGhlIHJlc3VsdFxuICAgIGZldGNoUHJvbWlzZS50aGVuKChyZXNvdXJjZSkgPT4ge1xuICAgICAgaWYgKHJlc291cmNlKSB7XG4gICAgICAgIHNldEZldGNoZWRSZXNvdXJjZShyZXNvdXJjZSk7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoU3RyaW5nKGVycikpKTtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG5cbiAgICAvLyBObyBjbGVhbnVwIG5lZWRlZCAtIHdlIHdhbnQgdGhlIGZldGNoIHRvIGNvbXBsZXRlIGV2ZW4gaWYgU3RyaWN0TW9kZSB1bm1vdW50c1xuICB9LCBbYWdlbnQsIGNvbnRlbnRdKTtcblxuICAvLyBFZmZlY3QgMTogU2V0dXAgc2FuZGJveCBwcm94eSBpZnJhbWUgYW5kIGNvbW11bmljYXRpb24gKGFmdGVyIHJlc291cmNlIGlzIGZldGNoZWQpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gV2FpdCBmb3IgcmVzb3VyY2UgdG8gYmUgZmV0Y2hlZFxuICAgIGlmIChpc0xvYWRpbmcgfHwgIWZldGNoZWRSZXNvdXJjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhcHR1cmUgY29udGFpbmVyIHJlZmVyZW5jZSBhdCBlZmZlY3Qgc3RhcnQgKHJlZnMgYXJlIGNsZWFyZWQgZHVyaW5nIHVubW91bnQpXG4gICAgY29uc3QgY29udGFpbmVyID0gY29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgbW91bnRlZCA9IHRydWU7XG4gICAgbGV0IG1lc3NhZ2VIYW5kbGVyOiAoKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGluaXRpYWxMaXN0ZW5lcjogKChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICAgIGxldCBjcmVhdGVkSWZyYW1lOiBIVE1MSUZyYW1lRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3Qgc2V0dXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDcmVhdGUgc2FuZGJveCBwcm94eSBpZnJhbWVcbiAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICAgICAgY3JlYXRlZElmcmFtZSA9IGlmcmFtZTsgLy8gVHJhY2sgZm9yIGNsZWFudXBcbiAgICAgICAgaWZyYW1lLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSBcIjEwMHB4XCI7IC8vIFN0YXJ0IHNtYWxsLCB3aWxsIGJlIHJlc2l6ZWQgYnkgc2l6ZS1jaGFuZ2VkIG5vdGlmaWNhdGlvblxuICAgICAgICBpZnJhbWUuc3R5bGUuYm9yZGVyID0gXCJub25lXCI7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic2FuZGJveFwiLCBcImFsbG93LXNjcmlwdHMgYWxsb3ctc2FtZS1vcmlnaW4gYWxsb3ctZm9ybXNcIik7XG5cbiAgICAgICAgLy8gV2FpdCBmb3Igc2FuZGJveCBwcm94eSB0byBiZSByZWFkeVxuICAgICAgICBjb25zdCBzYW5kYm94UmVhZHkgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIGluaXRpYWxMaXN0ZW5lciA9IChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBpZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YT8ubWV0aG9kID09PSBcInVpL25vdGlmaWNhdGlvbnMvc2FuZGJveC1wcm94eS1yZWFkeVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGluaXRpYWxMaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICBpbml0aWFsTGlzdGVuZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBpbml0aWFsTGlzdGVuZXIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDaGVjayBtb3VudGVkIGJlZm9yZSBhZGRpbmcgdG8gRE9NIChoYW5kbGVzIFN0cmljdE1vZGUgZG91YmxlLW1vdW50KVxuICAgICAgICBpZiAoIW1vdW50ZWQpIHtcbiAgICAgICAgICBpZiAoaW5pdGlhbExpc3RlbmVyKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaW5pdGlhbExpc3RlbmVyKTtcbiAgICAgICAgICAgIGluaXRpYWxMaXN0ZW5lciA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBpZnJhbWUgY29udGVudCBhbmQgYWRkIHRvIERPTVxuICAgICAgICBpZnJhbWUuc3JjZG9jID0gU0FOREJPWF9IVE1MO1xuICAgICAgICBpZnJhbWVSZWYuY3VycmVudCA9IGlmcmFtZTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cbiAgICAgICAgLy8gV2FpdCBmb3Igc2FuZGJveCBwcm94eSB0byBzaWduYWwgcmVhZHlcbiAgICAgICAgYXdhaXQgc2FuZGJveFJlYWR5O1xuICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVybjtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIltNQ1BBcHBzUmVuZGVyZXJdIFNhbmRib3ggcHJveHkgcmVhZHlcIik7XG5cbiAgICAgICAgLy8gU2V0dXAgbWVzc2FnZSBoYW5kbGVyIGZvciBKU09OLVJQQyBtZXNzYWdlcyBmcm9tIHRoZSBpbm5lciBpZnJhbWVcbiAgICAgICAgbWVzc2FnZUhhbmRsZXIgPSBhc3luYyAoZXZlbnQ6IE1lc3NhZ2VFdmVudCkgPT4ge1xuICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgIT09IGlmcmFtZS5jb250ZW50V2luZG93KSByZXR1cm47XG5cbiAgICAgICAgICBjb25zdCBtc2cgPSBldmVudC5kYXRhIGFzIEpTT05SUENNZXNzYWdlO1xuICAgICAgICAgIGlmICghbXNnIHx8IHR5cGVvZiBtc2cgIT09IFwib2JqZWN0XCIgfHwgbXNnLmpzb25ycGMgIT09IFwiMi4wXCIpIHJldHVybjtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiW01DUEFwcHNSZW5kZXJlcl0gUmVjZWl2ZWQgZnJvbSBpZnJhbWU6XCIsIG1zZyk7XG5cbiAgICAgICAgICAvLyBIYW5kbGUgcmVxdWVzdHMgKG5lZWQgcmVzcG9uc2UpXG4gICAgICAgICAgaWYgKGlzUmVxdWVzdChtc2cpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1zZy5tZXRob2QpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInVpL2luaXRpYWxpemVcIjoge1xuICAgICAgICAgICAgICAgIC8vIFJlc3BvbmQgd2l0aCBob3N0IGNhcGFiaWxpdGllc1xuICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShtc2cuaWQsIHtcbiAgICAgICAgICAgICAgICAgIHByb3RvY29sVmVyc2lvbjogUFJPVE9DT0xfVkVSU0lPTixcbiAgICAgICAgICAgICAgICAgIGhvc3RJbmZvOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQ29waWxvdEtpdCBNQ1AgQXBwcyBIb3N0XCIsXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IFwiMS4wLjBcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBob3N0Q2FwYWJpbGl0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5MaW5rczoge30sXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dpbmc6IHt9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGhvc3RDb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIHRoZW1lOiBcImxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBcIndlYlwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhc2UgXCJ1aS9tZXNzYWdlXCI6IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgbWVzc2FnZSB0byBDb3BpbG90S2l0IGNoYXRcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBhZ2VudFJlZi5jdXJyZW50O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50QWdlbnQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIltNQ1BBcHBzUmVuZGVyZXJdIHVpL21lc3NhZ2U6IE5vIGFnZW50IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShtc2cuaWQsIHsgaXNFcnJvcjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbXNnLnBhcmFtcyBhcyB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU/OiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ/OiBBcnJheTx7IHR5cGU6IHN0cmluZzsgdGV4dD86IHN0cmluZyB9PjtcbiAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGV4dCBjb250ZW50IGZyb20gdGhlIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gcGFyYW1zLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgPy5maWx0ZXIoKGMpID0+IGMudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgYy50ZXh0KVxuICAgICAgICAgICAgICAgICAgICAubWFwKChjKSA9PiBjLnRleHQpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpIHx8IFwiXCI7XG5cbiAgICAgICAgICAgICAgICAgIGlmICh0ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlbnQuYWRkTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZTogKHBhcmFtcy5yb2xlIGFzIFwidXNlclwiIHwgXCJhc3Npc3RhbnRcIikgfHwgXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGV4dENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKG1zZy5pZCwgeyBpc0Vycm9yOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbTUNQQXBwc1JlbmRlcmVyXSB1aS9tZXNzYWdlIGVycm9yOlwiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKG1zZy5pZCwgeyBpc0Vycm9yOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhc2UgXCJ1aS9vcGVuLWxpbmtcIjoge1xuICAgICAgICAgICAgICAgIC8vIE9wZW4gVVJMIGluIG5ldyB0YWJcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBtc2cucGFyYW1zPy51cmwgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCwgXCJfYmxhbmtcIiwgXCJub29wZW5lcixub3JlZmVycmVyXCIpO1xuICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKG1zZy5pZCwgeyBpc0Vycm9yOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2VuZEVycm9yUmVzcG9uc2UobXNnLmlkLCAtMzI2MDIsIFwiTWlzc2luZyB1cmwgcGFyYW1ldGVyXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhc2UgXCJ0b29scy9jYWxsXCI6IHtcbiAgICAgICAgICAgICAgICAvLyBQcm94eSB0b29sIGNhbGwgdG8gTUNQIHNlcnZlciB2aWEgYWdlbnQucnVuQWdlbnQoKVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VydmVySGFzaCwgc2VydmVySWQgfSA9IGNvbnRlbnRSZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBhZ2VudFJlZi5jdXJyZW50O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzZXJ2ZXJIYXNoKSB7XG4gICAgICAgICAgICAgICAgICBzZW5kRXJyb3JSZXNwb25zZShtc2cuaWQsIC0zMjYwMywgXCJObyBzZXJ2ZXIgaGFzaCBhdmFpbGFibGUgZm9yIHByb3h5aW5nXCIpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50QWdlbnQpIHtcbiAgICAgICAgICAgICAgICAgIHNlbmRFcnJvclJlc3BvbnNlKG1zZy5pZCwgLTMyNjAzLCBcIk5vIGFnZW50IGF2YWlsYWJsZSBmb3IgcHJveHlpbmdcIik7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgLy8gVXNlIHF1ZXVlIHRvIHdhaXQgZm9yIGFnZW50IHRvIGJlIGlkbGUgYW5kIHNlcmlhbGl6ZSByZXF1ZXN0c1xuICAgICAgICAgICAgICAgICAgY29uc3QgcnVuUmVzdWx0ID0gYXdhaXQgbWNwQXBwc1JlcXVlc3RRdWV1ZS5lbnF1ZXVlKGN1cnJlbnRBZ2VudCwgKCkgPT5cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEFnZW50LnJ1bkFnZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICBmb3J3YXJkZWRQcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX19wcm94aWVkTUNQUmVxdWVzdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJIYXNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJJZCwgLy8gb3B0aW9uYWwsIHRha2VzIHByZWNlZGVuY2UgaWYgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcInRvb2xzL2NhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBtc2cucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlc3VsdCBmcm9tIHJ1bkFnZW50IGNvbnRhaW5zIHRoZSBNQ1AgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShtc2cuaWQsIHJ1blJlc3VsdC5yZXN1bHQgfHwge30pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltNQ1BBcHBzUmVuZGVyZXJdIHRvb2xzL2NhbGwgZXJyb3I6XCIsIGVycik7XG4gICAgICAgICAgICAgICAgICBzZW5kRXJyb3JSZXNwb25zZShtc2cuaWQsIC0zMjYwMywgU3RyaW5nKGVycikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgc2VuZEVycm9yUmVzcG9uc2UobXNnLmlkLCAtMzI2MDEsIGBNZXRob2Qgbm90IGZvdW5kOiAke21zZy5tZXRob2R9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSGFuZGxlIG5vdGlmaWNhdGlvbnMgKG5vIHJlc3BvbnNlIG5lZWRlZClcbiAgICAgICAgICBpZiAoaXNOb3RpZmljYXRpb24obXNnKSkge1xuICAgICAgICAgICAgc3dpdGNoIChtc2cubWV0aG9kKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJ1aS9ub3RpZmljYXRpb25zL2luaXRpYWxpemVkXCI6IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltNQ1BBcHBzUmVuZGVyZXJdIElubmVyIGlmcmFtZSBpbml0aWFsaXplZFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgc2V0SWZyYW1lUmVhZHkodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2FzZSBcInVpL25vdGlmaWNhdGlvbnMvc2l6ZS1jaGFuZ2VkXCI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IG1zZy5wYXJhbXMgfHwge307XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbTUNQQXBwc1JlbmRlcmVyXSBTaXplIGNoYW5nZTpcIiwgeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgICAgICAgICAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICBzZXRJZnJhbWVTaXplKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHR5cGVvZiB3aWR0aCA9PT0gXCJudW1iZXJcIiA/IHdpZHRoIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHR5cGVvZiBoZWlnaHQgPT09IFwibnVtYmVyXCIgPyBoZWlnaHQgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjYXNlIFwibm90aWZpY2F0aW9ucy9tZXNzYWdlXCI6IHtcbiAgICAgICAgICAgICAgICAvLyBMb2dnaW5nIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBhcHBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltNQ1BBcHBzUmVuZGVyZXJdIEFwcCBsb2c6XCIsIG1zZy5wYXJhbXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBtZXNzYWdlSGFuZGxlcik7XG5cbiAgICAgICAgLy8gRXh0cmFjdCBIVE1MIGNvbnRlbnQgZnJvbSBmZXRjaGVkIHJlc291cmNlXG4gICAgICAgIGxldCBodG1sOiBzdHJpbmc7XG4gICAgICAgIGlmIChmZXRjaGVkUmVzb3VyY2UudGV4dCkge1xuICAgICAgICAgIGh0bWwgPSBmZXRjaGVkUmVzb3VyY2UudGV4dDtcbiAgICAgICAgfSBlbHNlIGlmIChmZXRjaGVkUmVzb3VyY2UuYmxvYikge1xuICAgICAgICAgIGh0bWwgPSBhdG9iKGZldGNoZWRSZXNvdXJjZS5ibG9iKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXNvdXJjZSBoYXMgbm8gdGV4dCBvciBibG9iIGNvbnRlbnRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZW5kIHRoZSByZXNvdXJjZSBjb250ZW50IHRvIHRoZSBzYW5kYm94IHByb3h5XG4gICAgICAgIHNlbmROb3RpZmljYXRpb24oXCJ1aS9ub3RpZmljYXRpb25zL3NhbmRib3gtcmVzb3VyY2UtcmVhZHlcIiwgeyBodG1sIH0pO1xuXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIltNQ1BBcHBzUmVuZGVyZXJdIFNldHVwIGVycm9yOlwiLCBlcnIpO1xuICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKFN0cmluZyhlcnIpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2V0dXAoKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgICAvLyBDbGVhbiB1cCBpbml0aWFsIGxpc3RlbmVyIGlmIHN0aWxsIGFjdGl2ZVxuICAgICAgaWYgKGluaXRpYWxMaXN0ZW5lcikge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaW5pdGlhbExpc3RlbmVyKTtcbiAgICAgICAgaW5pdGlhbExpc3RlbmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChtZXNzYWdlSGFuZGxlcikge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbWVzc2FnZUhhbmRsZXIpO1xuICAgICAgfVxuICAgICAgLy8gUmVtb3ZlIHRoZSBpZnJhbWUgd2UgY3JlYXRlZCAodXNpbmcgdHJhY2tlZCByZWZlcmVuY2UsIG5vdCBET00gcXVlcnkpXG4gICAgICAvLyBUaGlzIHdvcmtzIGV2ZW4gaWYgY29udGFpbmVyUmVmLmN1cnJlbnQgaXMgbnVsbCBkdXJpbmcgdW5tb3VudFxuICAgICAgaWYgKGNyZWF0ZWRJZnJhbWUpIHtcbiAgICAgICAgY3JlYXRlZElmcmFtZS5yZW1vdmUoKTtcbiAgICAgICAgY3JlYXRlZElmcmFtZSA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZnJhbWVSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfTtcbiAgfSwgW2lzTG9hZGluZywgZmV0Y2hlZFJlc291cmNlLCBzZW5kTm90aWZpY2F0aW9uLCBzZW5kUmVzcG9uc2UsIHNlbmRFcnJvclJlc3BvbnNlXSk7XG5cbiAgLy8gRWZmZWN0IDI6IFVwZGF0ZSBpZnJhbWUgc2l6ZSB3aGVuIGl0IGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWZyYW1lUmVmLmN1cnJlbnQpIHtcbiAgICAgIGlmIChpZnJhbWVTaXplLndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVXNlIG1pbldpZHRoIHdpdGggbWluKCkgdG8gYWxsb3cgZXhwYW5zaW9uIGJ1dCBjYXAgYXQgMTAwJVxuICAgICAgICBpZnJhbWVSZWYuY3VycmVudC5zdHlsZS5taW5XaWR0aCA9IGBtaW4oJHtpZnJhbWVTaXplLndpZHRofXB4LCAxMDAlKWA7XG4gICAgICAgIGlmcmFtZVJlZi5jdXJyZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICB9XG4gICAgICBpZiAoaWZyYW1lU2l6ZS5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZnJhbWVSZWYuY3VycmVudC5zdHlsZS5oZWlnaHQgPSBgJHtpZnJhbWVTaXplLmhlaWdodH1weGA7XG4gICAgICB9XG4gICAgfVxuICB9LCBbaWZyYW1lU2l6ZV0pO1xuXG4gIC8vIEVmZmVjdCAzOiBTZW5kIHRvb2wgaW5wdXQgd2hlbiBpZnJhbWUgcmVhZHlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaWZyYW1lUmVhZHkgJiYgY29udGVudC50b29sSW5wdXQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW01DUEFwcHNSZW5kZXJlcl0gU2VuZGluZyB0b29sIGlucHV0OlwiLCBjb250ZW50LnRvb2xJbnB1dCk7XG4gICAgICBzZW5kTm90aWZpY2F0aW9uKFwidWkvbm90aWZpY2F0aW9ucy90b29sLWlucHV0XCIsIHtcbiAgICAgICAgYXJndW1lbnRzOiBjb250ZW50LnRvb2xJbnB1dCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2lmcmFtZVJlYWR5LCBjb250ZW50LnRvb2xJbnB1dCwgc2VuZE5vdGlmaWNhdGlvbl0pO1xuXG4gIC8vIEVmZmVjdCA0OiBTZW5kIHRvb2wgcmVzdWx0IHdoZW4gaWZyYW1lIHJlYWR5XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlmcmFtZVJlYWR5ICYmIGNvbnRlbnQucmVzdWx0KSB7XG4gICAgICBjb25zb2xlLmxvZyhcIltNQ1BBcHBzUmVuZGVyZXJdIFNlbmRpbmcgdG9vbCByZXN1bHQ6XCIsIGNvbnRlbnQucmVzdWx0KTtcbiAgICAgIHNlbmROb3RpZmljYXRpb24oXCJ1aS9ub3RpZmljYXRpb25zL3Rvb2wtcmVzdWx0XCIsIGNvbnRlbnQucmVzdWx0KTtcbiAgICB9XG4gIH0sIFtpZnJhbWVSZWFkeSwgY29udGVudC5yZXN1bHQsIHNlbmROb3RpZmljYXRpb25dKTtcblxuICAvLyBEZXRlcm1pbmUgYm9yZGVyIHN0eWxpbmcgYmFzZWQgb24gcHJlZmVyc0JvcmRlciBtZXRhZGF0YSBmcm9tIGZldGNoZWQgcmVzb3VyY2VcbiAgLy8gdHJ1ZSA9IHNob3cgYm9yZGVyL2JhY2tncm91bmQsIGZhbHNlID0gbm9uZSwgdW5kZWZpbmVkID0gaG9zdCBkZWNpZGVzICh3ZSBkZWZhdWx0IHRvIG5vbmUpXG4gIGNvbnN0IHByZWZlcnNCb3JkZXIgPSBmZXRjaGVkUmVzb3VyY2U/Ll9tZXRhPy51aT8ucHJlZmVyc0JvcmRlcjtcbiAgY29uc3QgYm9yZGVyU3R5bGUgPSBwcmVmZXJzQm9yZGVyID09PSB0cnVlXG4gICAgPyB7XG4gICAgICAgIGJvcmRlclJhZGl1czogXCI4cHhcIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmOWY5ZjlcIixcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjZTBlMGUwXCIsXG4gICAgICB9XG4gICAgOiB7fTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHJlZj17Y29udGFpbmVyUmVmfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICBoZWlnaHQ6IGlmcmFtZVNpemUuaGVpZ2h0ID8gYCR7aWZyYW1lU2l6ZS5oZWlnaHR9cHhgIDogXCJhdXRvXCIsXG4gICAgICAgIG1pbkhlaWdodDogXCIxMDBweFwiLFxuICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgLi4uYm9yZGVyU3R5bGUsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtpc0xvYWRpbmcgJiYgKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6IFwiMXJlbVwiLCBjb2xvcjogXCIjNjY2XCIgfX0+XG4gICAgICAgICAgTG9hZGluZy4uLlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGNvbG9yOiBcInJlZFwiLCBwYWRkaW5nOiBcIjFyZW1cIiB9fT5cbiAgICAgICAgICBFcnJvcjoge2Vycm9yLm1lc3NhZ2V9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG4iLCJpbXBvcnQgeyB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24sIHVzZUNvcGlsb3RLaXQgfSBmcm9tIFwiQC9wcm92aWRlcnNcIjtcbmltcG9ydCB7IFJlYWN0Q3VzdG9tTWVzc2FnZVJlbmRlcmVyUG9zaXRpb24gfSBmcm9tIFwiQC90eXBlcy9yZWFjdC1jdXN0b20tbWVzc2FnZS1yZW5kZXJlclwiO1xuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gXCJAYWctdWkvY29yZVwiO1xuXG5pbnRlcmZhY2UgVXNlUmVuZGVyQ3VzdG9tTWVzc2FnZXNQYXJhbXMge1xuICBtZXNzYWdlOiBNZXNzYWdlO1xuICBwb3NpdGlvbjogUmVhY3RDdXN0b21NZXNzYWdlUmVuZGVyZXJQb3NpdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVJlbmRlckN1c3RvbU1lc3NhZ2VzKCkge1xuICBjb25zdCB7IGNvcGlsb3RraXQgfSA9IHVzZUNvcGlsb3RLaXQoKTtcbiAgY29uc3QgY29uZmlnID0gdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uKCk7XG5cbiAgaWYgKCFjb25maWcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHsgYWdlbnRJZCwgdGhyZWFkSWQgfSA9IGNvbmZpZztcblxuICBjb25zdCBjdXN0b21NZXNzYWdlUmVuZGVyZXJzID0gY29waWxvdGtpdC5yZW5kZXJDdXN0b21NZXNzYWdlc1xuICAgIC5maWx0ZXIoKHJlbmRlcmVyKSA9PiByZW5kZXJlci5hZ2VudElkID09PSB1bmRlZmluZWQgfHwgcmVuZGVyZXIuYWdlbnRJZCA9PT0gYWdlbnRJZClcbiAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgYUhhc0FnZW50ID0gYS5hZ2VudElkICE9PSB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBiSGFzQWdlbnQgPSBiLmFnZW50SWQgIT09IHVuZGVmaW5lZDtcbiAgICAgIGlmIChhSGFzQWdlbnQgPT09IGJIYXNBZ2VudCkgcmV0dXJuIDA7XG4gICAgICByZXR1cm4gYUhhc0FnZW50ID8gLTEgOiAxO1xuICAgIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAocGFyYW1zOiBVc2VSZW5kZXJDdXN0b21NZXNzYWdlc1BhcmFtcykge1xuICAgIGlmICghY3VzdG9tTWVzc2FnZVJlbmRlcmVycy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IG1lc3NhZ2UsIHBvc2l0aW9uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgcmVzb2x2ZWRSdW5JZCA9XG4gICAgICBjb3BpbG90a2l0LmdldFJ1bklkRm9yTWVzc2FnZShhZ2VudElkLCB0aHJlYWRJZCwgbWVzc2FnZS5pZCkgPz9cbiAgICAgIGNvcGlsb3RraXQuZ2V0UnVuSWRzRm9yVGhyZWFkKGFnZW50SWQsIHRocmVhZElkKS5zbGljZSgtMSlbMF07XG4gICAgY29uc3QgcnVuSWQgPSByZXNvbHZlZFJ1bklkID8/IGBtaXNzaW5nLXJ1bi1pZDoke21lc3NhZ2UuaWR9YDtcbiAgICBjb25zdCBhZ2VudCA9IGNvcGlsb3RraXQuZ2V0QWdlbnQoYWdlbnRJZCk7XG4gICAgaWYgKCFhZ2VudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWdlbnQgbm90IGZvdW5kXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VzSWRzSW5SdW4gPSByZXNvbHZlZFJ1bklkXG4gICAgICA/IGFnZW50Lm1lc3NhZ2VzXG4gICAgICAgICAgLmZpbHRlcigobXNnKSA9PiBjb3BpbG90a2l0LmdldFJ1bklkRm9yTWVzc2FnZShhZ2VudElkLCB0aHJlYWRJZCwgbXNnLmlkKSA9PT0gcmVzb2x2ZWRSdW5JZClcbiAgICAgICAgICAubWFwKChtc2cpID0+IG1zZy5pZClcbiAgICAgIDogW21lc3NhZ2UuaWRdO1xuXG4gICAgY29uc3QgcmF3TWVzc2FnZUluZGV4ID0gYWdlbnQubWVzc2FnZXMuZmluZEluZGV4KChtc2cpID0+IG1zZy5pZCA9PT0gbWVzc2FnZS5pZCk7XG4gICAgY29uc3QgbWVzc2FnZUluZGV4ID0gcmF3TWVzc2FnZUluZGV4ID49IDAgPyByYXdNZXNzYWdlSW5kZXggOiAwO1xuICAgIGNvbnN0IG1lc3NhZ2VJbmRleEluUnVuID0gcmVzb2x2ZWRSdW5JZCA/IE1hdGgubWF4KG1lc3NhZ2VzSWRzSW5SdW4uaW5kZXhPZihtZXNzYWdlLmlkKSwgMCkgOiAwO1xuICAgIGNvbnN0IG51bWJlck9mTWVzc2FnZXNJblJ1biA9IHJlc29sdmVkUnVuSWQgPyBtZXNzYWdlc0lkc0luUnVuLmxlbmd0aCA6IDE7XG4gICAgY29uc3Qgc3RhdGVTbmFwc2hvdCA9IHJlc29sdmVkUnVuSWRcbiAgICAgID8gY29waWxvdGtpdC5nZXRTdGF0ZUJ5UnVuKGFnZW50SWQsIHRocmVhZElkLCByZXNvbHZlZFJ1bklkKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHJlbmRlcmVyIG9mIGN1c3RvbU1lc3NhZ2VSZW5kZXJlcnMpIHtcbiAgICAgIGlmICghcmVuZGVyZXIucmVuZGVyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgQ29tcG9uZW50ID0gcmVuZGVyZXIucmVuZGVyO1xuICAgICAgcmVzdWx0ID0gKFxuICAgICAgICA8Q29tcG9uZW50XG4gICAgICAgICAga2V5PXtgJHtydW5JZH0tJHttZXNzYWdlLmlkfS0ke3Bvc2l0aW9ufWB9XG4gICAgICAgICAgbWVzc2FnZT17bWVzc2FnZX1cbiAgICAgICAgICBwb3NpdGlvbj17cG9zaXRpb259XG4gICAgICAgICAgcnVuSWQ9e3J1bklkfVxuICAgICAgICAgIG1lc3NhZ2VJbmRleD17bWVzc2FnZUluZGV4fVxuICAgICAgICAgIG1lc3NhZ2VJbmRleEluUnVuPXttZXNzYWdlSW5kZXhJblJ1bn1cbiAgICAgICAgICBudW1iZXJPZk1lc3NhZ2VzSW5SdW49e251bWJlck9mTWVzc2FnZXNJblJ1bn1cbiAgICAgICAgICBhZ2VudElkPXthZ2VudElkfVxuICAgICAgICAgIHN0YXRlU25hcHNob3Q9e3N0YXRlU25hcHNob3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbiIsImltcG9ydCB7IEFjdGl2aXR5TWVzc2FnZSB9IGZyb20gXCJAYWctdWkvY29yZVwiO1xuaW1wb3J0IHsgREVGQVVMVF9BR0VOVF9JRCB9IGZyb20gXCJAY29waWxvdGtpdG5leHQvc2hhcmVkXCI7XG5pbXBvcnQgeyB1c2VDb3BpbG90S2l0LCB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiQC9wcm92aWRlcnNcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBSZWFjdEFjdGl2aXR5TWVzc2FnZVJlbmRlcmVyIH0gZnJvbSBcIkAvdHlwZXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVJlbmRlckFjdGl2aXR5TWVzc2FnZSgpIHtcbiAgY29uc3QgeyBjb3BpbG90a2l0IH0gPSB1c2VDb3BpbG90S2l0KCk7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICBjb25zdCBhZ2VudElkID0gY29uZmlnPy5hZ2VudElkID8/IERFRkFVTFRfQUdFTlRfSUQ7XG5cbiAgY29uc3QgcmVuZGVyZXJzID0gY29waWxvdGtpdC5yZW5kZXJBY3Rpdml0eU1lc3NhZ2VzO1xuXG4gIC8vIEZpbmQgdGhlIHJlbmRlcmVyIGZvciBhIGdpdmVuIGFjdGl2aXR5IHR5cGVcbiAgY29uc3QgZmluZFJlbmRlcmVyID0gdXNlQ2FsbGJhY2soXG4gICAgKGFjdGl2aXR5VHlwZTogc3RyaW5nKTogUmVhY3RBY3Rpdml0eU1lc3NhZ2VSZW5kZXJlcjx1bmtub3duPiB8IG51bGwgPT4ge1xuICAgICAgaWYgKCFyZW5kZXJlcnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtYXRjaGVzID0gcmVuZGVyZXJzLmZpbHRlcihcbiAgICAgICAgKHJlbmRlcmVyKSA9PiByZW5kZXJlci5hY3Rpdml0eVR5cGUgPT09IGFjdGl2aXR5VHlwZVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgbWF0Y2hlcy5maW5kKChjYW5kaWRhdGUpID0+IGNhbmRpZGF0ZS5hZ2VudElkID09PSBhZ2VudElkKSA/P1xuICAgICAgICBtYXRjaGVzLmZpbmQoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlLmFnZW50SWQgPT09IHVuZGVmaW5lZCkgPz9cbiAgICAgICAgcmVuZGVyZXJzLmZpbmQoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlLmFjdGl2aXR5VHlwZSA9PT0gXCIqXCIpID8/XG4gICAgICAgIG51bGxcbiAgICAgICk7XG4gICAgfSxcbiAgICBbYWdlbnRJZCwgcmVuZGVyZXJzXVxuICApO1xuXG4gIGNvbnN0IHJlbmRlckFjdGl2aXR5TWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChtZXNzYWdlOiBBY3Rpdml0eU1lc3NhZ2UpOiBSZWFjdC5SZWFjdEVsZW1lbnQgfCBudWxsID0+IHtcbiAgICAgIGNvbnN0IHJlbmRlcmVyID0gZmluZFJlbmRlcmVyKG1lc3NhZ2UuYWN0aXZpdHlUeXBlKTtcblxuICAgICAgaWYgKCFyZW5kZXJlcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyc2VSZXN1bHQgPSByZW5kZXJlci5jb250ZW50LnNhZmVQYXJzZShtZXNzYWdlLmNvbnRlbnQpO1xuXG4gICAgICBpZiAoIXBhcnNlUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBGYWlsZWQgdG8gcGFyc2UgY29udGVudCBmb3IgYWN0aXZpdHkgbWVzc2FnZSAnJHttZXNzYWdlLmFjdGl2aXR5VHlwZX0nOmAsXG4gICAgICAgICAgcGFyc2VSZXN1bHQuZXJyb3JcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IENvbXBvbmVudCA9IHJlbmRlcmVyLnJlbmRlcjtcbiAgICAgIGNvbnN0IGFnZW50ID0gY29waWxvdGtpdC5nZXRBZ2VudChhZ2VudElkKTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPENvbXBvbmVudFxuICAgICAgICAgIGtleT17bWVzc2FnZS5pZH1cbiAgICAgICAgICBhY3Rpdml0eVR5cGU9e21lc3NhZ2UuYWN0aXZpdHlUeXBlfVxuICAgICAgICAgIGNvbnRlbnQ9e3BhcnNlUmVzdWx0LmRhdGF9XG4gICAgICAgICAgbWVzc2FnZT17bWVzc2FnZX1cbiAgICAgICAgICBhZ2VudD17YWdlbnR9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH0sXG4gICAgW2FnZW50SWQsIGNvcGlsb3RraXQsIGZpbmRSZW5kZXJlcl1cbiAgKTtcblxuICByZXR1cm4gdXNlTWVtbyhcbiAgICAoKSA9PiAoeyByZW5kZXJBY3Rpdml0eU1lc3NhZ2UsIGZpbmRSZW5kZXJlciB9KSxcbiAgICBbcmVuZGVyQWN0aXZpdHlNZXNzYWdlLCBmaW5kUmVuZGVyZXJdXG4gICk7XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNvcGlsb3RLaXQgfSBmcm9tIFwiLi4vcHJvdmlkZXJzL0NvcGlsb3RLaXRQcm92aWRlclwiO1xuaW1wb3J0IHsgUmVhY3RGcm9udGVuZFRvb2wgfSBmcm9tIFwiLi4vdHlwZXMvZnJvbnRlbmQtdG9vbFwiO1xuaW1wb3J0IHsgUmVhY3RUb29sQ2FsbFJlbmRlcmVyIH0gZnJvbSBcIi4uL3R5cGVzL3JlYWN0LXRvb2wtY2FsbC1yZW5kZXJlclwiO1xuXG5jb25zdCBFTVBUWV9ERVBTOiBSZWFkb25seUFycmF5PHVua25vd24+ID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VGcm9udGVuZFRvb2w8XG4gIFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuPih0b29sOiBSZWFjdEZyb250ZW5kVG9vbDxUPiwgZGVwcz86IFJlYWRvbmx5QXJyYXk8dW5rbm93bj4pIHtcbiAgY29uc3QgeyBjb3BpbG90a2l0IH0gPSB1c2VDb3BpbG90S2l0KCk7XG4gIGNvbnN0IGV4dHJhRGVwcyA9IGRlcHMgPz8gRU1QVFlfREVQUztcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSB0b29sLm5hbWU7XG5cbiAgICAvLyBBbHdheXMgcmVnaXN0ZXIvb3ZlcnJpZGUgdGhlIHRvb2wgZm9yIHRoaXMgbmFtZSBvbiBtb3VudFxuICAgIGlmIChjb3BpbG90a2l0LmdldFRvb2woeyB0b29sTmFtZTogbmFtZSwgYWdlbnRJZDogdG9vbC5hZ2VudElkIH0pKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBUb29sICcke25hbWV9JyBhbHJlYWR5IGV4aXN0cyBmb3IgYWdlbnQgJyR7dG9vbC5hZ2VudElkIHx8ICdnbG9iYWwnfScuIE92ZXJyaWRpbmcgd2l0aCBsYXRlc3QgcmVnaXN0cmF0aW9uLmBcbiAgICAgICk7XG4gICAgICBjb3BpbG90a2l0LnJlbW92ZVRvb2wobmFtZSwgdG9vbC5hZ2VudElkKTtcbiAgICB9XG4gICAgY29waWxvdGtpdC5hZGRUb29sKHRvb2wpO1xuXG4gICAgLy8gUmVnaXN0ZXIvb3ZlcnJpZGUgcmVuZGVyZXIgYnkgbmFtZSBhbmQgYWdlbnRJZCB0aHJvdWdoIGNvcmVcbiAgICBpZiAodG9vbC5yZW5kZXIpIHtcbiAgICAgIC8vIEdldCBjdXJyZW50IHJlbmRlciB0b29sIGNhbGxzIGFuZCBtZXJnZSB3aXRoIG5ldyBlbnRyeVxuICAgICAgY29uc3Qga2V5T2YgPSAocmM6IFJlYWN0VG9vbENhbGxSZW5kZXJlcjxhbnk+KSA9PiBgJHtyYy5hZ2VudElkID8/IFwiXCJ9OiR7cmMubmFtZX1gO1xuICAgICAgY29uc3QgY3VycmVudFJlbmRlclRvb2xDYWxscyA9IGNvcGlsb3RraXQucmVuZGVyVG9vbENhbGxzIGFzIFJlYWN0VG9vbENhbGxSZW5kZXJlcjxhbnk+W107XG5cbiAgICAgIC8vIEJ1aWxkIG1hcCBmcm9tIGV4aXN0aW5nIGVudHJpZXNcbiAgICAgIGNvbnN0IG1lcmdlZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8YW55Pj4oKTtcbiAgICAgIGZvciAoY29uc3QgcmMgb2YgY3VycmVudFJlbmRlclRvb2xDYWxscykge1xuICAgICAgICBtZXJnZWRNYXAuc2V0KGtleU9mKHJjKSwgcmMpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQvb3ZlcndyaXRlIHdpdGggbmV3IGVudHJ5XG4gICAgICBjb25zdCBuZXdFbnRyeSA9IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJnczogdG9vbC5wYXJhbWV0ZXJzLFxuICAgICAgICBhZ2VudElkOiB0b29sLmFnZW50SWQsXG4gICAgICAgIHJlbmRlcjogdG9vbC5yZW5kZXIsXG4gICAgICB9IGFzIFJlYWN0VG9vbENhbGxSZW5kZXJlcjxhbnk+O1xuICAgICAgbWVyZ2VkTWFwLnNldChrZXlPZihuZXdFbnRyeSksIG5ld0VudHJ5KTtcblxuICAgICAgLy8gU2V0IHRoZSBtZXJnZWQgbGlzdCBiYWNrXG4gICAgICBjb3BpbG90a2l0LnNldFJlbmRlclRvb2xDYWxscyhBcnJheS5mcm9tKG1lcmdlZE1hcC52YWx1ZXMoKSkpO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb3BpbG90a2l0LnJlbW92ZVRvb2wobmFtZSwgdG9vbC5hZ2VudElkKTtcbiAgICAgIC8vIHdlIGFyZSBpbnRlbnRpb25hbGx5IG5vdCByZW1vdmluZyB0aGUgcmVuZGVyIGhlcmUgc28gdGhhdCB0aGUgdG9vbHMgY2FuIHN0aWxsIHJlbmRlciBpbiB0aGUgY2hhdCBoaXN0b3J5XG4gICAgfTtcbiAgICAvLyBEZXBlbmQgb24gc3RhYmxlIGtleXMgYnkgZGVmYXVsdCBhbmQgYWxsb3cgY2FsbGVycyB0byBvcHQgaW50b1xuICAgIC8vIGFkZGl0aW9uYWwgZGVwZW5kZW5jaWVzIGZvciBkeW5hbWljIHRvb2wgY29uZmlndXJhdGlvbi5cbiAgfSwgW3Rvb2wubmFtZSwgY29waWxvdGtpdCwgZXh0cmFEZXBzLmxlbmd0aCwgLi4uZXh0cmFEZXBzXSk7XG59XG4iLCJpbXBvcnQgeyBSZWFjdFRvb2xDYWxsUmVuZGVyZXIgfSBmcm9tIFwiQC90eXBlcy9yZWFjdC10b29sLWNhbGwtcmVuZGVyZXJcIjtcbmltcG9ydCB7IHVzZUZyb250ZW5kVG9vbCB9IGZyb20gXCIuL3VzZS1mcm9udGVuZC10b29sXCI7XG5pbXBvcnQgeyBSZWFjdEZyb250ZW5kVG9vbCB9IGZyb20gXCJAL3R5cGVzL2Zyb250ZW5kLXRvb2xcIjtcbmltcG9ydCB7IFJlYWN0SHVtYW5JblRoZUxvb3AgfSBmcm9tIFwiQC90eXBlcy9odW1hbi1pbi10aGUtbG9vcFwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VDb3BpbG90S2l0IH0gZnJvbSBcIkAvcHJvdmlkZXJzL0NvcGlsb3RLaXRQcm92aWRlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlSHVtYW5JblRoZUxvb3A8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICB0b29sOiBSZWFjdEh1bWFuSW5UaGVMb29wPFQ+LFxuICBkZXBzPzogUmVhZG9ubHlBcnJheTx1bmtub3duPixcbikge1xuICBjb25zdCB7IGNvcGlsb3RraXQgfSA9IHVzZUNvcGlsb3RLaXQoKTtcbiAgY29uc3QgcmVzb2x2ZVByb21pc2VSZWYgPSB1c2VSZWY8KChyZXN1bHQ6IHVua25vd24pID0+IHZvaWQpIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgcmVzcG9uZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChyZXN1bHQ6IHVua25vd24pID0+IHtcbiAgICBpZiAocmVzb2x2ZVByb21pc2VSZWYuY3VycmVudCkge1xuICAgICAgcmVzb2x2ZVByb21pc2VSZWYuY3VycmVudChyZXN1bHQpO1xuICAgICAgcmVzb2x2ZVByb21pc2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlciA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHJlc29sdmVQcm9taXNlUmVmLmN1cnJlbnQgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgUmVuZGVyQ29tcG9uZW50OiBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8VD5bXCJyZW5kZXJcIl0gPSB1c2VDYWxsYmFjayhcbiAgICAocHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IFRvb2xDb21wb25lbnQgPSB0b29sLnJlbmRlcjtcblxuICAgICAgLy8gRW5oYW5jZSBwcm9wcyBiYXNlZCBvbiBjdXJyZW50IHN0YXR1c1xuICAgICAgaWYgKHByb3BzLnN0YXR1cyA9PT0gXCJpblByb2dyZXNzXCIpIHtcbiAgICAgICAgY29uc3QgZW5oYW5jZWRQcm9wcyA9IHtcbiAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgICByZXNwb25kOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2xDb21wb25lbnQsIGVuaGFuY2VkUHJvcHMpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wcy5zdGF0dXMgPT09IFwiZXhlY3V0aW5nXCIpIHtcbiAgICAgICAgY29uc3QgZW5oYW5jZWRQcm9wcyA9IHtcbiAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgICByZXNwb25kLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChUb29sQ29tcG9uZW50LCBlbmhhbmNlZFByb3BzKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcHMuc3RhdHVzID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgY29uc3QgZW5oYW5jZWRQcm9wcyA9IHtcbiAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgICByZXNwb25kOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2xDb21wb25lbnQsIGVuaGFuY2VkUHJvcHMpO1xuICAgICAgfVxuXG4gICAgICAvLyBGYWxsYmFjayAtIGp1c3QgcmVuZGVyIHdpdGggb3JpZ2luYWwgcHJvcHNcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChUb29sQ29tcG9uZW50LCBwcm9wcyBhcyBhbnkpO1xuICAgIH0sXG4gICAgW3Rvb2wucmVuZGVyLCB0b29sLm5hbWUsIHRvb2wuZGVzY3JpcHRpb24sIHJlc3BvbmRdLFxuICApO1xuXG4gIGNvbnN0IGZyb250ZW5kVG9vbDogUmVhY3RGcm9udGVuZFRvb2w8VD4gPSB7XG4gICAgLi4udG9vbCxcbiAgICBoYW5kbGVyLFxuICAgIHJlbmRlcjogUmVuZGVyQ29tcG9uZW50LFxuICB9O1xuXG4gIHVzZUZyb250ZW5kVG9vbChmcm9udGVuZFRvb2wsIGRlcHMpO1xuXG4gIC8vIEh1bWFuLWluLXRoZS1sb29wIHRvb2xzIHNob3VsZCByZW1vdmUgdGhlaXIgcmVuZGVyZXIgb24gdW5tb3VudFxuICAvLyBzaW5jZSB0aGV5IGNhbid0IHJlc3BvbmQgdG8gdXNlciBpbnRlcmFjdGlvbnMgYW55bW9yZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBrZXlPZiA9IChyYzogUmVhY3RUb29sQ2FsbFJlbmRlcmVyPGFueT4pID0+IGAke3JjLmFnZW50SWQgPz8gXCJcIn06JHtyYy5uYW1lfWA7XG4gICAgICBjb25zdCBjdXJyZW50UmVuZGVyVG9vbENhbGxzID0gY29waWxvdGtpdC5yZW5kZXJUb29sQ2FsbHMgYXMgUmVhY3RUb29sQ2FsbFJlbmRlcmVyPGFueT5bXTtcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gY3VycmVudFJlbmRlclRvb2xDYWxscy5maWx0ZXIoXG4gICAgICAgIChyYykgPT4ga2V5T2YocmMpICE9PSBrZXlPZih7IG5hbWU6IHRvb2wubmFtZSwgYWdlbnRJZDogdG9vbC5hZ2VudElkIH0gYXMgYW55KSxcbiAgICAgICk7XG4gICAgICBjb3BpbG90a2l0LnNldFJlbmRlclRvb2xDYWxscyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgfSwgW2NvcGlsb3RraXQsIHRvb2wubmFtZSwgdG9vbC5hZ2VudElkXSk7XG59XG4iLCJpbXBvcnQgeyB1c2VDb3BpbG90S2l0IH0gZnJvbSBcIkAvcHJvdmlkZXJzL0NvcGlsb3RLaXRQcm92aWRlclwiO1xuaW1wb3J0IHsgdXNlTWVtbywgdXNlRWZmZWN0LCB1c2VSZWR1Y2VyIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBERUZBVUxUX0FHRU5UX0lEIH0gZnJvbSBcIkBjb3BpbG90a2l0bmV4dC9zaGFyZWRcIjtcbmltcG9ydCB7IEFic3RyYWN0QWdlbnQgfSBmcm9tIFwiQGFnLXVpL2NsaWVudFwiO1xuaW1wb3J0IHsgUHJveGllZENvcGlsb3RSdW50aW1lQWdlbnQsIENvcGlsb3RLaXRDb3JlUnVudGltZUNvbm5lY3Rpb25TdGF0dXMgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcblxuZXhwb3J0IGVudW0gVXNlQWdlbnRVcGRhdGUge1xuICBPbk1lc3NhZ2VzQ2hhbmdlZCA9IFwiT25NZXNzYWdlc0NoYW5nZWRcIixcbiAgT25TdGF0ZUNoYW5nZWQgPSBcIk9uU3RhdGVDaGFuZ2VkXCIsXG4gIE9uUnVuU3RhdHVzQ2hhbmdlZCA9IFwiT25SdW5TdGF0dXNDaGFuZ2VkXCIsXG59XG5cbmNvbnN0IEFMTF9VUERBVEVTOiBVc2VBZ2VudFVwZGF0ZVtdID0gW1xuICBVc2VBZ2VudFVwZGF0ZS5Pbk1lc3NhZ2VzQ2hhbmdlZCxcbiAgVXNlQWdlbnRVcGRhdGUuT25TdGF0ZUNoYW5nZWQsXG4gIFVzZUFnZW50VXBkYXRlLk9uUnVuU3RhdHVzQ2hhbmdlZCxcbl07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlQWdlbnRQcm9wcyB7XG4gIGFnZW50SWQ/OiBzdHJpbmc7XG4gIHVwZGF0ZXM/OiBVc2VBZ2VudFVwZGF0ZVtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQWdlbnQoeyBhZ2VudElkLCB1cGRhdGVzIH06IFVzZUFnZW50UHJvcHMgPSB7fSkge1xuICBhZ2VudElkID8/PSBERUZBVUxUX0FHRU5UX0lEO1xuXG4gIGNvbnN0IHsgY29waWxvdGtpdCB9ID0gdXNlQ29waWxvdEtpdCgpO1xuICBjb25zdCBbLCBmb3JjZVVwZGF0ZV0gPSB1c2VSZWR1Y2VyKCh4KSA9PiB4ICsgMSwgMCk7XG5cbiAgY29uc3QgdXBkYXRlRmxhZ3MgPSB1c2VNZW1vKFxuICAgICgpID0+IHVwZGF0ZXMgPz8gQUxMX1VQREFURVMsXG4gICAgW0pTT04uc3RyaW5naWZ5KHVwZGF0ZXMpXVxuICApO1xuXG4gIGNvbnN0IGFnZW50OiBBYnN0cmFjdEFnZW50ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBjb3BpbG90a2l0LmdldEFnZW50KGFnZW50SWQpO1xuICAgIGlmIChleGlzdGluZykge1xuICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgIH1cblxuICAgIGNvbnN0IGlzUnVudGltZUNvbmZpZ3VyZWQgPSBjb3BpbG90a2l0LnJ1bnRpbWVVcmwgIT09IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzdGF0dXMgPSBjb3BpbG90a2l0LnJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzO1xuXG4gICAgLy8gV2hpbGUgcnVudGltZSBpcyBub3QgeWV0IHN5bmNlZCwgcmV0dXJuIGEgcHJvdmlzaW9uYWwgcnVudGltZSBhZ2VudFxuICAgIGlmIChcbiAgICAgIGlzUnVudGltZUNvbmZpZ3VyZWQgJiZcbiAgICAgIChzdGF0dXMgPT09IENvcGlsb3RLaXRDb3JlUnVudGltZUNvbm5lY3Rpb25TdGF0dXMuRGlzY29ubmVjdGVkIHx8XG4gICAgICAgIHN0YXR1cyA9PT0gQ29waWxvdEtpdENvcmVSdW50aW1lQ29ubmVjdGlvblN0YXR1cy5Db25uZWN0aW5nKVxuICAgICkge1xuICAgICAgY29uc3QgcHJvdmlzaW9uYWwgPSBuZXcgUHJveGllZENvcGlsb3RSdW50aW1lQWdlbnQoe1xuICAgICAgICBydW50aW1lVXJsOiBjb3BpbG90a2l0LnJ1bnRpbWVVcmwsXG4gICAgICAgIGFnZW50SWQsXG4gICAgICAgIHRyYW5zcG9ydDogY29waWxvdGtpdC5ydW50aW1lVHJhbnNwb3J0LFxuICAgICAgfSk7XG4gICAgICAvLyBBcHBseSBjdXJyZW50IGhlYWRlcnMgc28gcnVucy9jb25uZWN0cyBpbmhlcml0IHRoZW1cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAocHJvdmlzaW9uYWwgYXMgYW55KS5oZWFkZXJzID0geyAuLi5jb3BpbG90a2l0LmhlYWRlcnMgfTtcbiAgICAgIHJldHVybiBwcm92aXNpb25hbDtcbiAgICB9XG5cbiAgICAvLyBJZiBubyBydW50aW1lIGlzIGNvbmZpZ3VyZWQgKGRldi9sb2NhbCksIHJldHVybiBhIG5vLW9wIGFnZW50IHRvIHNhdGlzZnkgdGhlXG4gICAgLy8gbm9uLXVuZGVmaW5lZCBjb250cmFjdCB3aXRob3V0IGZvcmNpbmcgbmV0d29yayBiZWhhdmlvci5cbiAgICAvLyBBZnRlciBydW50aW1lIGhhcyBzeW5jZWQgKENvbm5lY3RlZCBvciBFcnJvcikgb3Igbm8gcnVudGltZSBjb25maWd1cmVkIGFuZCB0aGUgYWdlbnQgZG9lc24ndCBleGlzdCwgdGhyb3cgYSBkZXNjcmlwdGl2ZSBlcnJvclxuICAgIGNvbnN0IGtub3duQWdlbnRzID0gT2JqZWN0LmtleXMoY29waWxvdGtpdC5hZ2VudHMgPz8ge30pO1xuICAgIGNvbnN0IHJ1bnRpbWVQYXJ0ID0gaXNSdW50aW1lQ29uZmlndXJlZCA/IGBydW50aW1lVXJsPSR7Y29waWxvdGtpdC5ydW50aW1lVXJsfWAgOiBcIm5vIHJ1bnRpbWVVcmxcIjtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgdXNlQWdlbnQ6IEFnZW50ICcke2FnZW50SWR9JyBub3QgZm91bmQgYWZ0ZXIgcnVudGltZSBzeW5jICgke3J1bnRpbWVQYXJ0fSkuIGAgK1xuICAgICAgICAoa25vd25BZ2VudHMubGVuZ3RoID8gYEtub3duIGFnZW50czogWyR7a25vd25BZ2VudHMuam9pbihcIiwgXCIpfV1gIDogXCJObyBhZ2VudHMgcmVnaXN0ZXJlZC5cIikgK1xuICAgICAgICBcIiBWZXJpZnkgeW91ciBydW50aW1lIC9pbmZvIGFuZC9vciBhZ2VudHNfX3Vuc2FmZV9kZXZfb25seS5cIixcbiAgICApO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW1xuICAgIGFnZW50SWQsXG4gICAgY29waWxvdGtpdC5hZ2VudHMsXG4gICAgY29waWxvdGtpdC5ydW50aW1lQ29ubmVjdGlvblN0YXR1cyxcbiAgICBjb3BpbG90a2l0LnJ1bnRpbWVVcmwsXG4gICAgY29waWxvdGtpdC5ydW50aW1lVHJhbnNwb3J0LFxuICAgIEpTT04uc3RyaW5naWZ5KGNvcGlsb3RraXQuaGVhZGVycyksXG4gICAgY29waWxvdGtpdCxcbiAgXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodXBkYXRlRmxhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlcnM6IFBhcmFtZXRlcnM8QWJzdHJhY3RBZ2VudFtcInN1YnNjcmliZVwiXT5bMF0gPSB7fTtcblxuICAgIGlmICh1cGRhdGVGbGFncy5pbmNsdWRlcyhVc2VBZ2VudFVwZGF0ZS5Pbk1lc3NhZ2VzQ2hhbmdlZCkpIHtcbiAgICAgIC8vIENvbnRlbnQgc3RyaXBwaW5nIGZvciBpbW11dGFibGVDb250ZW50IHJlbmRlcmVycyBpcyBoYW5kbGVkIGJ5IENvcGlsb3RLaXRDb3JlUmVhY3RcbiAgICAgIGhhbmRsZXJzLm9uTWVzc2FnZXNDaGFuZ2VkID0gKCkgPT4ge1xuICAgICAgICBmb3JjZVVwZGF0ZSgpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodXBkYXRlRmxhZ3MuaW5jbHVkZXMoVXNlQWdlbnRVcGRhdGUuT25TdGF0ZUNoYW5nZWQpKSB7XG4gICAgICBoYW5kbGVycy5vblN0YXRlQ2hhbmdlZCA9IGZvcmNlVXBkYXRlO1xuICAgIH1cblxuICAgIGlmICh1cGRhdGVGbGFncy5pbmNsdWRlcyhVc2VBZ2VudFVwZGF0ZS5PblJ1blN0YXR1c0NoYW5nZWQpKSB7XG4gICAgICBoYW5kbGVycy5vblJ1bkluaXRpYWxpemVkID0gZm9yY2VVcGRhdGU7XG4gICAgICBoYW5kbGVycy5vblJ1bkZpbmFsaXplZCA9IGZvcmNlVXBkYXRlO1xuICAgICAgaGFuZGxlcnMub25SdW5GYWlsZWQgPSBmb3JjZVVwZGF0ZTtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhZ2VudC5zdWJzY3JpYmUoaGFuZGxlcnMpO1xuICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFthZ2VudCwgZm9yY2VVcGRhdGUsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZUZsYWdzKV0pO1xuXG4gIHJldHVybiB7XG4gICAgYWdlbnQsXG4gIH07XG59XG4iLCJpbXBvcnQgeyB1c2VDb3BpbG90S2l0IH0gZnJvbSBcIi4uL3Byb3ZpZGVycy9Db3BpbG90S2l0UHJvdmlkZXJcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYW55IHZhbHVlIHRoYXQgY2FuIGJlIHNlcmlhbGl6ZWQgdG8gSlNPTi5cbiAqL1xuZXhwb3J0IHR5cGUgSnNvblNlcmlhbGl6YWJsZSA9XG4gIHwgc3RyaW5nXG4gIHwgbnVtYmVyXG4gIHwgYm9vbGVhblxuICB8IG51bGxcbiAgfCBKc29uU2VyaWFsaXphYmxlW11cbiAgfCB7IFtrZXk6IHN0cmluZ106IEpzb25TZXJpYWxpemFibGUgfTtcblxuLyoqXG4gKiBDb250ZXh0IGNvbmZpZ3VyYXRpb24gZm9yIHVzZUFnZW50Q29udGV4dC5cbiAqIEFjY2VwdHMgYW55IEpTT04tc2VyaWFsaXphYmxlIHZhbHVlIHdoaWNoIHdpbGwgYmUgY29udmVydGVkIHRvIGEgc3RyaW5nLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFnZW50Q29udGV4dElucHV0IHtcbiAgLyoqIEEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGlzIGNvbnRleHQgcmVwcmVzZW50cyAqL1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAvKiogVGhlIGNvbnRleHQgdmFsdWUgLSB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIEpTT04gc3RyaW5nIGlmIG5vdCBhbHJlYWR5IGEgc3RyaW5nICovXG4gIHZhbHVlOiBKc29uU2VyaWFsaXphYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQWdlbnRDb250ZXh0KGNvbnRleHQ6IEFnZW50Q29udGV4dElucHV0KSB7XG4gIGNvbnN0IHsgZGVzY3JpcHRpb24sIHZhbHVlIH0gPSBjb250ZXh0O1xuICBjb25zdCB7IGNvcGlsb3RraXQgfSA9IHVzZUNvcGlsb3RLaXQoKTtcblxuICBjb25zdCBzdHJpbmdWYWx1ZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgfSwgW3ZhbHVlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvcGlsb3RraXQpIHJldHVybjtcblxuICAgIGNvbnN0IGlkID0gY29waWxvdGtpdC5hZGRDb250ZXh0KHsgZGVzY3JpcHRpb24sIHZhbHVlOiBzdHJpbmdWYWx1ZSB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29waWxvdGtpdC5yZW1vdmVDb250ZXh0KGlkKTtcbiAgICB9O1xuICB9LCBbZGVzY3JpcHRpb24sIHN0cmluZ1ZhbHVlLCBjb3BpbG90a2l0XSk7XG59XG4iLCJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgU3VnZ2VzdGlvbiB9IGZyb20gXCJAY29waWxvdGtpdG5leHQvY29yZVwiO1xuaW1wb3J0IHsgdXNlQ29waWxvdEtpdCB9IGZyb20gXCJAL3Byb3ZpZGVycy9Db3BpbG90S2l0UHJvdmlkZXJcIjtcbmltcG9ydCB7IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbiB9IGZyb20gXCJAL3Byb3ZpZGVycy9Db3BpbG90Q2hhdENvbmZpZ3VyYXRpb25Qcm92aWRlclwiO1xuaW1wb3J0IHsgREVGQVVMVF9BR0VOVF9JRCB9IGZyb20gXCJAY29waWxvdGtpdG5leHQvc2hhcmVkXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlU3VnZ2VzdGlvbnNPcHRpb25zIHtcbiAgYWdlbnRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VTdWdnZXN0aW9uc1Jlc3VsdCB7XG4gIHN1Z2dlc3Rpb25zOiBTdWdnZXN0aW9uW107XG4gIHJlbG9hZFN1Z2dlc3Rpb25zOiAoKSA9PiB2b2lkO1xuICBjbGVhclN1Z2dlc3Rpb25zOiAoKSA9PiB2b2lkO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdWdnZXN0aW9ucyh7IGFnZW50SWQgfTogVXNlU3VnZ2VzdGlvbnNPcHRpb25zID0ge30pOiBVc2VTdWdnZXN0aW9uc1Jlc3VsdCB7XG4gIGNvbnN0IHsgY29waWxvdGtpdCB9ID0gdXNlQ29waWxvdEtpdCgpO1xuICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgY29uc3QgcmVzb2x2ZWRBZ2VudElkID0gdXNlTWVtbygoKSA9PiBhZ2VudElkID8/IGNvbmZpZz8uYWdlbnRJZCA/PyBERUZBVUxUX0FHRU5UX0lELCBbYWdlbnRJZCwgY29uZmlnPy5hZ2VudElkXSk7XG5cbiAgY29uc3QgW3N1Z2dlc3Rpb25zLCBzZXRTdWdnZXN0aW9uc10gPSB1c2VTdGF0ZTxTdWdnZXN0aW9uW10+KCgpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBjb3BpbG90a2l0LmdldFN1Z2dlc3Rpb25zKHJlc29sdmVkQWdlbnRJZCk7XG4gICAgcmV0dXJuIHJlc3VsdC5zdWdnZXN0aW9ucztcbiAgfSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSgoKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gY29waWxvdGtpdC5nZXRTdWdnZXN0aW9ucyhyZXNvbHZlZEFnZW50SWQpO1xuICAgIHJldHVybiByZXN1bHQuaXNMb2FkaW5nO1xuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGNvcGlsb3RraXQuZ2V0U3VnZ2VzdGlvbnMocmVzb2x2ZWRBZ2VudElkKTtcbiAgICBzZXRTdWdnZXN0aW9ucyhyZXN1bHQuc3VnZ2VzdGlvbnMpO1xuICAgIHNldElzTG9hZGluZyhyZXN1bHQuaXNMb2FkaW5nKTtcbiAgfSwgW2NvcGlsb3RraXQsIHJlc29sdmVkQWdlbnRJZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gY29waWxvdGtpdC5zdWJzY3JpYmUoe1xuICAgICAgb25TdWdnZXN0aW9uc0NoYW5nZWQ6ICh7IGFnZW50SWQ6IGNoYW5nZWRBZ2VudElkLCBzdWdnZXN0aW9ucyB9KSA9PiB7XG4gICAgICAgIGlmIChjaGFuZ2VkQWdlbnRJZCAhPT0gcmVzb2x2ZWRBZ2VudElkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25zKTtcbiAgICAgIH0sXG4gICAgICBvblN1Z2dlc3Rpb25zU3RhcnRlZExvYWRpbmc6ICh7IGFnZW50SWQ6IGNoYW5nZWRBZ2VudElkIH0pID0+IHtcbiAgICAgICAgaWYgKGNoYW5nZWRBZ2VudElkICE9PSByZXNvbHZlZEFnZW50SWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgfSxcbiAgICAgIG9uU3VnZ2VzdGlvbnNGaW5pc2hlZExvYWRpbmc6ICh7IGFnZW50SWQ6IGNoYW5nZWRBZ2VudElkIH0pID0+IHtcbiAgICAgICAgaWYgKGNoYW5nZWRBZ2VudElkICE9PSByZXNvbHZlZEFnZW50SWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0sXG4gICAgICBvblN1Z2dlc3Rpb25zQ29uZmlnQ2hhbmdlZDogKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBjb3BpbG90a2l0LmdldFN1Z2dlc3Rpb25zKHJlc29sdmVkQWdlbnRJZCk7XG4gICAgICAgIHNldFN1Z2dlc3Rpb25zKHJlc3VsdC5zdWdnZXN0aW9ucyk7XG4gICAgICAgIHNldElzTG9hZGluZyhyZXN1bHQuaXNMb2FkaW5nKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfSwgW2NvcGlsb3RraXQsIHJlc29sdmVkQWdlbnRJZF0pO1xuXG4gIGNvbnN0IHJlbG9hZFN1Z2dlc3Rpb25zID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvcGlsb3RraXQucmVsb2FkU3VnZ2VzdGlvbnMocmVzb2x2ZWRBZ2VudElkKTtcbiAgICAvLyBMb2FkaW5nIHN0YXRlIGlzIGhhbmRsZWQgYnkgb25TdWdnZXN0aW9uc1N0YXJ0ZWRMb2FkaW5nIGV2ZW50XG4gIH0sIFtjb3BpbG90a2l0LCByZXNvbHZlZEFnZW50SWRdKTtcblxuICBjb25zdCBjbGVhclN1Z2dlc3Rpb25zID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvcGlsb3RraXQuY2xlYXJTdWdnZXN0aW9ucyhyZXNvbHZlZEFnZW50SWQpO1xuICAgIC8vIFN0YXRlIHVwZGF0ZXMgYXJlIGhhbmRsZWQgYnkgb25TdWdnZXN0aW9uc0NoYW5nZWQgZXZlbnRcbiAgfSwgW2NvcGlsb3RraXQsIHJlc29sdmVkQWdlbnRJZF0pO1xuXG4gIHJldHVybiB7XG4gICAgc3VnZ2VzdGlvbnMsXG4gICAgcmVsb2FkU3VnZ2VzdGlvbnMsXG4gICAgY2xlYXJTdWdnZXN0aW9ucyxcbiAgICBpc0xvYWRpbmcsXG4gIH07XG59XG4iLCJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNvcGlsb3RLaXQgfSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdEtpdFByb3ZpZGVyXCI7XG5pbXBvcnQgeyB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJcIjtcbmltcG9ydCB7IERFRkFVTFRfQUdFTlRfSUQgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L3NoYXJlZFwiO1xuaW1wb3J0IHtcbiAgRHluYW1pY1N1Z2dlc3Rpb25zQ29uZmlnLFxuICBTdGF0aWNTdWdnZXN0aW9uc0NvbmZpZyxcbiAgU3VnZ2VzdGlvbnNDb25maWcsXG4gIFN1Z2dlc3Rpb24sXG59IGZyb20gXCJAY29waWxvdGtpdG5leHQvY29yZVwiO1xuXG50eXBlIFN0YXRpY1N1Z2dlc3Rpb25JbnB1dCA9IE9taXQ8U3VnZ2VzdGlvbiwgXCJpc0xvYWRpbmdcIj4gJiBQYXJ0aWFsPFBpY2s8U3VnZ2VzdGlvbiwgXCJpc0xvYWRpbmdcIj4+O1xuXG50eXBlIFN0YXRpY1N1Z2dlc3Rpb25zQ29uZmlnSW5wdXQgPSBPbWl0PFN0YXRpY1N1Z2dlc3Rpb25zQ29uZmlnLCBcInN1Z2dlc3Rpb25zXCI+ICYge1xuICBzdWdnZXN0aW9uczogU3RhdGljU3VnZ2VzdGlvbklucHV0W107XG59O1xuXG50eXBlIFN1Z2dlc3Rpb25zQ29uZmlnSW5wdXQgPSBEeW5hbWljU3VnZ2VzdGlvbnNDb25maWcgfCBTdGF0aWNTdWdnZXN0aW9uc0NvbmZpZ0lucHV0O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ29uZmlndXJlU3VnZ2VzdGlvbnMoXG4gIGNvbmZpZzogU3VnZ2VzdGlvbnNDb25maWdJbnB1dCB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGRlcHM/OiBSZWFkb25seUFycmF5PHVua25vd24+LFxuKTogdm9pZCB7XG4gIGNvbnN0IHsgY29waWxvdGtpdCB9ID0gdXNlQ29waWxvdEtpdCgpO1xuICBjb25zdCBjaGF0Q29uZmlnID0gdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uKCk7XG4gIGNvbnN0IGV4dHJhRGVwcyA9IGRlcHMgPz8gW107XG5cbiAgY29uc3QgcmVzb2x2ZWRDb25zdW1lckFnZW50SWQgPSB1c2VNZW1vKCgpID0+IGNoYXRDb25maWc/LmFnZW50SWQgPz8gREVGQVVMVF9BR0VOVF9JRCwgW2NoYXRDb25maWc/LmFnZW50SWRdKTtcblxuICBjb25zdCByYXdDb25zdW1lckFnZW50SWQgPSB1c2VNZW1vKCgpID0+IChjb25maWcgPyAoY29uZmlnIGFzIFN1Z2dlc3Rpb25zQ29uZmlnSW5wdXQpLmNvbnN1bWVyQWdlbnRJZCA6IHVuZGVmaW5lZCksIFtjb25maWddKTtcblxuICBjb25zdCBub3JtYWxpemF0aW9uQ2FjaGVSZWYgPSB1c2VSZWY8eyBzZXJpYWxpemVkOiBzdHJpbmcgfCBudWxsOyBjb25maWc6IFN1Z2dlc3Rpb25zQ29uZmlnIHwgbnVsbCB9Pih7XG4gICAgc2VyaWFsaXplZDogbnVsbCxcbiAgICBjb25maWc6IG51bGwsXG4gIH0pO1xuXG4gIGNvbnN0IHsgbm9ybWFsaXplZENvbmZpZywgc2VyaWFsaXplZENvbmZpZyB9ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIG5vcm1hbGl6YXRpb25DYWNoZVJlZi5jdXJyZW50ID0geyBzZXJpYWxpemVkOiBudWxsLCBjb25maWc6IG51bGwgfTtcbiAgICAgIHJldHVybiB7IG5vcm1hbGl6ZWRDb25maWc6IG51bGwsIHNlcmlhbGl6ZWRDb25maWc6IG51bGwgfTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmF2YWlsYWJsZSA9PT0gXCJkaXNhYmxlZFwiKSB7XG4gICAgICBub3JtYWxpemF0aW9uQ2FjaGVSZWYuY3VycmVudCA9IHsgc2VyaWFsaXplZDogbnVsbCwgY29uZmlnOiBudWxsIH07XG4gICAgICByZXR1cm4geyBub3JtYWxpemVkQ29uZmlnOiBudWxsLCBzZXJpYWxpemVkQ29uZmlnOiBudWxsIH07XG4gICAgfVxuXG4gICAgbGV0IGJ1aWx0OiBTdWdnZXN0aW9uc0NvbmZpZztcbiAgICBpZiAoaXNEeW5hbWljQ29uZmlnKGNvbmZpZykpIHtcbiAgICAgIGJ1aWx0ID0ge1xuICAgICAgICAuLi5jb25maWcsXG4gICAgICB9IHNhdGlzZmllcyBEeW5hbWljU3VnZ2VzdGlvbnNDb25maWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTdWdnZXN0aW9ucyA9IG5vcm1hbGl6ZVN0YXRpY1N1Z2dlc3Rpb25zKGNvbmZpZy5zdWdnZXN0aW9ucyk7XG4gICAgICBjb25zdCBiYXNlQ29uZmlnOiBTdGF0aWNTdWdnZXN0aW9uc0NvbmZpZyA9IHtcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICBzdWdnZXN0aW9uczogbm9ybWFsaXplZFN1Z2dlc3Rpb25zLFxuICAgICAgfTtcbiAgICAgIGJ1aWx0ID0gYmFzZUNvbmZpZztcbiAgICB9XG5cbiAgICBjb25zdCBzZXJpYWxpemVkID0gSlNPTi5zdHJpbmdpZnkoYnVpbHQpO1xuICAgIGNvbnN0IGNhY2hlID0gbm9ybWFsaXphdGlvbkNhY2hlUmVmLmN1cnJlbnQ7XG4gICAgaWYgKGNhY2hlLnNlcmlhbGl6ZWQgPT09IHNlcmlhbGl6ZWQgJiYgY2FjaGUuY29uZmlnKSB7XG4gICAgICByZXR1cm4geyBub3JtYWxpemVkQ29uZmlnOiBjYWNoZS5jb25maWcsIHNlcmlhbGl6ZWRDb25maWc6IHNlcmlhbGl6ZWQgfTtcbiAgICB9XG5cbiAgICBub3JtYWxpemF0aW9uQ2FjaGVSZWYuY3VycmVudCA9IHsgc2VyaWFsaXplZCwgY29uZmlnOiBidWlsdCB9O1xuICAgIHJldHVybiB7IG5vcm1hbGl6ZWRDb25maWc6IGJ1aWx0LCBzZXJpYWxpemVkQ29uZmlnOiBzZXJpYWxpemVkIH07XG4gIH0sIFtjb25maWcsIHJlc29sdmVkQ29uc3VtZXJBZ2VudElkLCAuLi5leHRyYURlcHNdKTtcbiAgY29uc3QgbGF0ZXN0Q29uZmlnUmVmID0gdXNlUmVmPFN1Z2dlc3Rpb25zQ29uZmlnIHwgbnVsbD4obnVsbCk7XG4gIGxhdGVzdENvbmZpZ1JlZi5jdXJyZW50ID0gbm9ybWFsaXplZENvbmZpZztcbiAgY29uc3QgcHJldmlvdXNTZXJpYWxpemVkQ29uZmlnUmVmID0gdXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IHRhcmdldEFnZW50SWQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIW5vcm1hbGl6ZWRDb25maWcpIHtcbiAgICAgIHJldHVybiByZXNvbHZlZENvbnN1bWVyQWdlbnRJZDtcbiAgICB9XG4gICAgY29uc3QgY29uc3VtZXIgPSAobm9ybWFsaXplZENvbmZpZyBhcyBTdGF0aWNTdWdnZXN0aW9uc0NvbmZpZyB8IER5bmFtaWNTdWdnZXN0aW9uc0NvbmZpZykuY29uc3VtZXJBZ2VudElkO1xuICAgIGlmICghY29uc3VtZXIgfHwgY29uc3VtZXIgPT09IFwiKlwiKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZWRDb25zdW1lckFnZW50SWQ7XG4gICAgfVxuICAgIHJldHVybiBjb25zdW1lcjtcbiAgfSwgW25vcm1hbGl6ZWRDb25maWcsIHJlc29sdmVkQ29uc3VtZXJBZ2VudElkXSk7XG5cbiAgY29uc3QgaXNHbG9iYWxDb25maWcgPSByYXdDb25zdW1lckFnZW50SWQgPT09IHVuZGVmaW5lZCB8fCByYXdDb25zdW1lckFnZW50SWQgPT09IFwiKlwiO1xuXG4gIGNvbnN0IHJlcXVlc3RSZWxvYWQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFub3JtYWxpemVkQ29uZmlnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzR2xvYmFsQ29uZmlnKSB7XG4gICAgICBjb25zdCBhZ2VudHMgPSBPYmplY3QudmFsdWVzKGNvcGlsb3RraXQuYWdlbnRzID8/IHt9KTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgYWdlbnRzKSB7XG4gICAgICAgIGNvbnN0IGFnZW50SWQgPSBlbnRyeS5hZ2VudElkO1xuICAgICAgICBpZiAoIWFnZW50SWQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVudHJ5LmlzUnVubmluZykge1xuICAgICAgICAgIGNvcGlsb3RraXQucmVsb2FkU3VnZ2VzdGlvbnMoYWdlbnRJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldEFnZW50SWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb3BpbG90a2l0LnJlbG9hZFN1Z2dlc3Rpb25zKHRhcmdldEFnZW50SWQpO1xuICB9LCBbY29waWxvdGtpdCwgaXNHbG9iYWxDb25maWcsIG5vcm1hbGl6ZWRDb25maWcsIHRhcmdldEFnZW50SWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2VyaWFsaXplZENvbmZpZyB8fCAhbGF0ZXN0Q29uZmlnUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpZCA9IGNvcGlsb3RraXQuYWRkU3VnZ2VzdGlvbnNDb25maWcobGF0ZXN0Q29uZmlnUmVmLmN1cnJlbnQpO1xuXG4gICAgcmVxdWVzdFJlbG9hZCgpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvcGlsb3RraXQucmVtb3ZlU3VnZ2VzdGlvbnNDb25maWcoaWQpO1xuICAgIH07XG4gIH0sIFtjb3BpbG90a2l0LCBzZXJpYWxpemVkQ29uZmlnLCByZXF1ZXN0UmVsb2FkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW5vcm1hbGl6ZWRDb25maWcpIHtcbiAgICAgIHByZXZpb3VzU2VyaWFsaXplZENvbmZpZ1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlcmlhbGl6ZWRDb25maWcgJiYgcHJldmlvdXNTZXJpYWxpemVkQ29uZmlnUmVmLmN1cnJlbnQgPT09IHNlcmlhbGl6ZWRDb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlcmlhbGl6ZWRDb25maWcpIHtcbiAgICAgIHByZXZpb3VzU2VyaWFsaXplZENvbmZpZ1JlZi5jdXJyZW50ID0gc2VyaWFsaXplZENvbmZpZztcbiAgICB9XG4gICAgcmVxdWVzdFJlbG9hZCgpO1xuICB9LCBbbm9ybWFsaXplZENvbmZpZywgcmVxdWVzdFJlbG9hZCwgc2VyaWFsaXplZENvbmZpZ10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFub3JtYWxpemVkQ29uZmlnIHx8IGV4dHJhRGVwcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVxdWVzdFJlbG9hZCgpO1xuICB9LCBbZXh0cmFEZXBzLmxlbmd0aCwgbm9ybWFsaXplZENvbmZpZywgcmVxdWVzdFJlbG9hZCwgLi4uZXh0cmFEZXBzXSk7XG5cbn1cblxuZnVuY3Rpb24gaXNEeW5hbWljQ29uZmlnKGNvbmZpZzogU3VnZ2VzdGlvbnNDb25maWdJbnB1dCk6IGNvbmZpZyBpcyBEeW5hbWljU3VnZ2VzdGlvbnNDb25maWcge1xuICByZXR1cm4gXCJpbnN0cnVjdGlvbnNcIiBpbiBjb25maWc7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0YXRpY1N1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25zOiBTdGF0aWNTdWdnZXN0aW9uSW5wdXRbXSk6IFN1Z2dlc3Rpb25bXSB7XG4gIHJldHVybiBzdWdnZXN0aW9ucy5tYXAoKHN1Z2dlc3Rpb24pID0+ICh7XG4gICAgLi4uc3VnZ2VzdGlvbixcbiAgICBpc0xvYWRpbmc6IHN1Z2dlc3Rpb24uaXNMb2FkaW5nID8/IGZhbHNlLFxuICB9KSk7XG59XG4iLCJpbXBvcnQgeyB1c2VSZW5kZXJUb29sQ2FsbCB9IGZyb20gXCJAL2hvb2tzXCI7XG5pbXBvcnQgeyBBc3Npc3RhbnRNZXNzYWdlLCBNZXNzYWdlLCBUb29sTWVzc2FnZSB9IGZyb20gXCJAYWctdWkvY29yZVwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgdHlwZSBDb3BpbG90Q2hhdFRvb2xDYWxsc1ZpZXdQcm9wcyA9IHtcbiAgbWVzc2FnZTogQXNzaXN0YW50TWVzc2FnZTtcbiAgbWVzc2FnZXM/OiBNZXNzYWdlW107XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ29waWxvdENoYXRUb29sQ2FsbHNWaWV3KHtcbiAgbWVzc2FnZSxcbiAgbWVzc2FnZXMgPSBbXSxcbn06IENvcGlsb3RDaGF0VG9vbENhbGxzVmlld1Byb3BzKSB7XG4gIGNvbnN0IHJlbmRlclRvb2xDYWxsID0gdXNlUmVuZGVyVG9vbENhbGwoKTtcblxuICBpZiAoIW1lc3NhZ2UudG9vbENhbGxzIHx8IG1lc3NhZ2UudG9vbENhbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge21lc3NhZ2UudG9vbENhbGxzLm1hcCgodG9vbENhbGwpID0+IHtcbiAgICAgICAgY29uc3QgdG9vbE1lc3NhZ2UgPSBtZXNzYWdlcy5maW5kKFxuICAgICAgICAgIChtKSA9PiBtLnJvbGUgPT09IFwidG9vbFwiICYmIG0udG9vbENhbGxJZCA9PT0gdG9vbENhbGwuaWRcbiAgICAgICAgKSBhcyBUb29sTWVzc2FnZSB8IHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e3Rvb2xDYWxsLmlkfT5cbiAgICAgICAgICAgIHtyZW5kZXJUb29sQ2FsbCh7XG4gICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICB0b29sTWVzc2FnZSxcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICk7XG4gICAgICB9KX1cbiAgICA8Lz5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29waWxvdENoYXRUb29sQ2FsbHNWaWV3O1xuIiwiaW1wb3J0IHsgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENvcHksIENoZWNrLCBFZGl0LCBDaGV2cm9uTGVmdCwgQ2hldnJvblJpZ2h0IH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHtcbiAgdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uLFxuICBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHMsXG59IGZyb20gXCJAL3Byb3ZpZGVycy9Db3BpbG90Q2hhdENvbmZpZ3VyYXRpb25Qcm92aWRlclwiO1xuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gXCJ0YWlsd2luZC1tZXJnZVwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7IFVzZXJNZXNzYWdlIH0gZnJvbSBcIkBhZy11aS9jb3JlXCI7XG5pbXBvcnQge1xuICBUb29sdGlwLFxuICBUb29sdGlwQ29udGVudCxcbiAgVG9vbHRpcFRyaWdnZXIsXG59IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvdG9vbHRpcFwiO1xuaW1wb3J0IHsgcmVuZGVyU2xvdCwgV2l0aFNsb3RzIH0gZnJvbSBcIkAvbGliL3Nsb3RzXCI7XG5cbmZ1bmN0aW9uIGZsYXR0ZW5Vc2VyTWVzc2FnZUNvbnRlbnQoY29udGVudD86IFVzZXJNZXNzYWdlW1wiY29udGVudFwiXSk6IHN0cmluZyB7XG4gIGlmICghY29udGVudCkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICByZXR1cm4gY29udGVudFxuICAgIC5tYXAoKHBhcnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFydCAmJlxuICAgICAgICB0eXBlb2YgcGFydCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBcInR5cGVcIiBpbiBwYXJ0ICYmXG4gICAgICAgIChwYXJ0IGFzIHsgdHlwZT86IHVua25vd24gfSkudHlwZSA9PT0gXCJ0ZXh0XCIgJiZcbiAgICAgICAgdHlwZW9mIChwYXJ0IGFzIHsgdGV4dD86IHVua25vd24gfSkudGV4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiAocGFydCBhcyB7IHRleHQ6IHN0cmluZyB9KS50ZXh0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSlcbiAgICAuZmlsdGVyKCh0ZXh0KSA9PiB0ZXh0Lmxlbmd0aCA+IDApXG4gICAgLmpvaW4oXCJcXG5cIik7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29waWxvdENoYXRVc2VyTWVzc2FnZU9uRWRpdE1lc3NhZ2VQcm9wcyB7XG4gIG1lc3NhZ2U6IFVzZXJNZXNzYWdlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvcGlsb3RDaGF0VXNlck1lc3NhZ2VPblN3aXRjaFRvQnJhbmNoUHJvcHMge1xuICBtZXNzYWdlOiBVc2VyTWVzc2FnZTtcbiAgYnJhbmNoSW5kZXg6IG51bWJlcjtcbiAgbnVtYmVyT2ZCcmFuY2hlczogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlUHJvcHMgPSBXaXRoU2xvdHM8XG4gIHtcbiAgICBtZXNzYWdlUmVuZGVyZXI6IHR5cGVvZiBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlLk1lc3NhZ2VSZW5kZXJlcjtcbiAgICB0b29sYmFyOiB0eXBlb2YgQ29waWxvdENoYXRVc2VyTWVzc2FnZS5Ub29sYmFyO1xuICAgIGNvcHlCdXR0b246IHR5cGVvZiBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlLkNvcHlCdXR0b247XG4gICAgZWRpdEJ1dHRvbjogdHlwZW9mIENvcGlsb3RDaGF0VXNlck1lc3NhZ2UuRWRpdEJ1dHRvbjtcbiAgICBicmFuY2hOYXZpZ2F0aW9uOiB0eXBlb2YgQ29waWxvdENoYXRVc2VyTWVzc2FnZS5CcmFuY2hOYXZpZ2F0aW9uO1xuICB9LFxuICB7XG4gICAgb25FZGl0TWVzc2FnZT86IChwcm9wczogQ29waWxvdENoYXRVc2VyTWVzc2FnZU9uRWRpdE1lc3NhZ2VQcm9wcykgPT4gdm9pZDtcbiAgICBvblN3aXRjaFRvQnJhbmNoPzogKFxuICAgICAgcHJvcHM6IENvcGlsb3RDaGF0VXNlck1lc3NhZ2VPblN3aXRjaFRvQnJhbmNoUHJvcHNcbiAgICApID0+IHZvaWQ7XG4gICAgbWVzc2FnZTogVXNlck1lc3NhZ2U7XG4gICAgYnJhbmNoSW5kZXg/OiBudW1iZXI7XG4gICAgbnVtYmVyT2ZCcmFuY2hlcz86IG51bWJlcjtcbiAgICBhZGRpdGlvbmFsVG9vbGJhckl0ZW1zPzogUmVhY3QuUmVhY3ROb2RlO1xuICB9ICYgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+XG4+O1xuXG5leHBvcnQgZnVuY3Rpb24gQ29waWxvdENoYXRVc2VyTWVzc2FnZSh7XG4gIG1lc3NhZ2UsXG4gIG9uRWRpdE1lc3NhZ2UsXG4gIGJyYW5jaEluZGV4LFxuICBudW1iZXJPZkJyYW5jaGVzLFxuICBvblN3aXRjaFRvQnJhbmNoLFxuICBhZGRpdGlvbmFsVG9vbGJhckl0ZW1zLFxuICBtZXNzYWdlUmVuZGVyZXIsXG4gIHRvb2xiYXIsXG4gIGNvcHlCdXR0b24sXG4gIGVkaXRCdXR0b24sXG4gIGJyYW5jaE5hdmlnYXRpb24sXG4gIGNoaWxkcmVuLFxuICBjbGFzc05hbWUsXG4gIC4uLnByb3BzXG59OiBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlUHJvcHMpIHtcbiAgY29uc3QgZmxhdHRlbmVkQ29udGVudCA9IHVzZU1lbW8oXG4gICAgKCkgPT4gZmxhdHRlblVzZXJNZXNzYWdlQ29udGVudChtZXNzYWdlLmNvbnRlbnQpLFxuICAgIFttZXNzYWdlLmNvbnRlbnRdXG4gICk7XG5cbiAgY29uc3QgQm91bmRNZXNzYWdlUmVuZGVyZXIgPSByZW5kZXJTbG90KFxuICAgIG1lc3NhZ2VSZW5kZXJlcixcbiAgICBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlLk1lc3NhZ2VSZW5kZXJlcixcbiAgICB7XG4gICAgICBjb250ZW50OiBmbGF0dGVuZWRDb250ZW50LFxuICAgIH1cbiAgKTtcblxuICBjb25zdCBCb3VuZENvcHlCdXR0b24gPSByZW5kZXJTbG90KFxuICAgIGNvcHlCdXR0b24sXG4gICAgQ29waWxvdENoYXRVc2VyTWVzc2FnZS5Db3B5QnV0dG9uLFxuICAgIHtcbiAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKGZsYXR0ZW5lZENvbnRlbnQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZmxhdHRlbmVkQ29udGVudCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvcHkgbWVzc2FnZTpcIiwgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IEJvdW5kRWRpdEJ1dHRvbiA9IHJlbmRlclNsb3QoXG4gICAgZWRpdEJ1dHRvbixcbiAgICBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlLkVkaXRCdXR0b24sXG4gICAge1xuICAgICAgb25DbGljazogKCkgPT4gb25FZGl0TWVzc2FnZT8uKHsgbWVzc2FnZSB9KSxcbiAgICB9XG4gICk7XG5cbiAgY29uc3QgQm91bmRCcmFuY2hOYXZpZ2F0aW9uID0gcmVuZGVyU2xvdChcbiAgICBicmFuY2hOYXZpZ2F0aW9uLFxuICAgIENvcGlsb3RDaGF0VXNlck1lc3NhZ2UuQnJhbmNoTmF2aWdhdGlvbixcbiAgICB7XG4gICAgICBjdXJyZW50QnJhbmNoOiBicmFuY2hJbmRleCxcbiAgICAgIG51bWJlck9mQnJhbmNoZXMsXG4gICAgICBvblN3aXRjaFRvQnJhbmNoLFxuICAgICAgbWVzc2FnZSxcbiAgICB9XG4gICk7XG5cbiAgY29uc3Qgc2hvd0JyYW5jaE5hdmlnYXRpb24gPVxuICAgIG51bWJlck9mQnJhbmNoZXMgJiYgbnVtYmVyT2ZCcmFuY2hlcyA+IDEgJiYgb25Td2l0Y2hUb0JyYW5jaDtcblxuICBjb25zdCBCb3VuZFRvb2xiYXIgPSByZW5kZXJTbG90KHRvb2xiYXIsIENvcGlsb3RDaGF0VXNlck1lc3NhZ2UuVG9vbGJhciwge1xuICAgIGNoaWxkcmVuOiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIGp1c3RpZnktZW5kXCI+XG4gICAgICAgIHthZGRpdGlvbmFsVG9vbGJhckl0ZW1zfVxuICAgICAgICB7Qm91bmRDb3B5QnV0dG9ufVxuICAgICAgICB7b25FZGl0TWVzc2FnZSAmJiBCb3VuZEVkaXRCdXR0b259XG4gICAgICAgIHtzaG93QnJhbmNoTmF2aWdhdGlvbiAmJiBCb3VuZEJyYW5jaE5hdmlnYXRpb259XG4gICAgICA8L2Rpdj5cbiAgICApLFxuICB9KTtcblxuICBpZiAoY2hpbGRyZW4pIHtcbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAge2NoaWxkcmVuKHtcbiAgICAgICAgICBtZXNzYWdlUmVuZGVyZXI6IEJvdW5kTWVzc2FnZVJlbmRlcmVyLFxuICAgICAgICAgIHRvb2xiYXI6IEJvdW5kVG9vbGJhcixcbiAgICAgICAgICBjb3B5QnV0dG9uOiBCb3VuZENvcHlCdXR0b24sXG4gICAgICAgICAgZWRpdEJ1dHRvbjogQm91bmRFZGl0QnV0dG9uLFxuICAgICAgICAgIGJyYW5jaE5hdmlnYXRpb246IEJvdW5kQnJhbmNoTmF2aWdhdGlvbixcbiAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgIGJyYW5jaEluZGV4LFxuICAgICAgICAgIG51bWJlck9mQnJhbmNoZXMsXG4gICAgICAgICAgYWRkaXRpb25hbFRvb2xiYXJJdGVtcyxcbiAgICAgICAgfSl9XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e3R3TWVyZ2UoXCJmbGV4IGZsZXgtY29sIGl0ZW1zLWVuZCBncm91cCBwdC0xMFwiLCBjbGFzc05hbWUpfVxuICAgICAgZGF0YS1tZXNzYWdlLWlkPXttZXNzYWdlLmlkfVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIHtCb3VuZE1lc3NhZ2VSZW5kZXJlcn1cbiAgICAgIHtCb3VuZFRvb2xiYXJ9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIENvcGlsb3RDaGF0VXNlck1lc3NhZ2Uge1xuICBleHBvcnQgY29uc3QgQ29udGFpbmVyOiBSZWFjdC5GQzxcbiAgICBSZWFjdC5Qcm9wc1dpdGhDaGlsZHJlbjxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4+XG4gID4gPSAoeyBjaGlsZHJlbiwgY2xhc3NOYW1lLCAuLi5wcm9wcyB9KSA9PiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXt0d01lcmdlKFwiZmxleCBmbGV4LWNvbCBpdGVtcy1lbmQgZ3JvdXBcIiwgY2xhc3NOYW1lKX1cbiAgICAgIHsuLi5wcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgZXhwb3J0IGNvbnN0IE1lc3NhZ2VSZW5kZXJlcjogUmVhY3QuRkM8e1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIH0+ID0gKHsgY29udGVudCwgY2xhc3NOYW1lIH0pID0+IChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e3R3TWVyZ2UoXG4gICAgICAgIFwicHJvc2UgZGFyazpwcm9zZS1pbnZlcnQgYmctbXV0ZWQgcmVsYXRpdmUgbWF4LXctWzgwJV0gcm91bmRlZC1bMThweF0gcHgtNCBweS0xLjUgZGF0YS1bbXVsdGlsaW5lXTpweS0zIGlubGluZS1ibG9jayB3aGl0ZXNwYWNlLXByZS13cmFwXCIsXG4gICAgICAgIGNsYXNzTmFtZVxuICAgICAgKX1cbiAgICA+XG4gICAgICB7Y29udGVudH1cbiAgICA8L2Rpdj5cbiAgKTtcblxuICBleHBvcnQgY29uc3QgVG9vbGJhcjogUmVhY3QuRkM8UmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+PiA9ICh7XG4gICAgY2xhc3NOYW1lLFxuICAgIC4uLnByb3BzXG4gIH0pID0+IChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e3R3TWVyZ2UoXG4gICAgICAgIFwidy1mdWxsIGJnLXRyYW5zcGFyZW50IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIC1tci1bNXB4XSBtdC1bNHB4XSBpbnZpc2libGUgZ3JvdXAtaG92ZXI6dmlzaWJsZVwiLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKTtcblxuICBleHBvcnQgY29uc3QgVG9vbGJhckJ1dHRvbjogUmVhY3QuRkM8XG4gICAgUmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+ICYge1xuICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgfVxuICA+ID0gKHsgdGl0bGUsIGNoaWxkcmVuLCBjbGFzc05hbWUsIC4uLnByb3BzIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRvb2x0aXA+XG4gICAgICAgIDxUb29sdGlwVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgdmFyaWFudD1cImFzc2lzdGFudE1lc3NhZ2VUb29sYmFyQnV0dG9uXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e3RpdGxlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0d01lcmdlKGNsYXNzTmFtZSl9XG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L1Rvb2x0aXBUcmlnZ2VyPlxuICAgICAgICA8VG9vbHRpcENvbnRlbnQgc2lkZT1cImJvdHRvbVwiPlxuICAgICAgICAgIDxwPnt0aXRsZX08L3A+XG4gICAgICAgIDwvVG9vbHRpcENvbnRlbnQ+XG4gICAgICA8L1Rvb2x0aXA+XG4gICAgKTtcbiAgfTtcblxuICBleHBvcnQgY29uc3QgQ29weUJ1dHRvbjogUmVhY3QuRkM8XG4gICAgUmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+ICYgeyBjb3BpZWQ/OiBib29sZWFuIH1cbiAgPiA9ICh7IGNsYXNzTmFtZSwgdGl0bGUsIG9uQ2xpY2ssIC4uLnByb3BzIH0pID0+IHtcbiAgICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgICBjb25zdCBsYWJlbHMgPSBjb25maWc/LmxhYmVscyA/PyBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG4gICAgY29uc3QgW2NvcGllZCwgc2V0Q29waWVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xuICAgICAgc2V0Q29waWVkKHRydWUpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRDb3BpZWQoZmFsc2UpLCAyMDAwKTtcblxuICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgb25DbGljayhldmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgICB0aXRsZT17dGl0bGUgfHwgbGFiZWxzLnVzZXJNZXNzYWdlVG9vbGJhckNvcHlNZXNzYWdlTGFiZWx9XG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrfVxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgPlxuICAgICAgICB7Y29waWVkID8gKFxuICAgICAgICAgIDxDaGVjayBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPENvcHkgY2xhc3NOYW1lPVwic2l6ZS1bMThweF1cIiAvPlxuICAgICAgICApfVxuICAgICAgPC9Ub29sYmFyQnV0dG9uPlxuICAgICk7XG4gIH07XG5cbiAgZXhwb3J0IGNvbnN0IEVkaXRCdXR0b246IFJlYWN0LkZDPFxuICAgIFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PlxuICA+ID0gKHsgY2xhc3NOYW1lLCB0aXRsZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbmZpZz8ubGFiZWxzID8/IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscztcbiAgICByZXR1cm4gKFxuICAgICAgPFRvb2xiYXJCdXR0b25cbiAgICAgICAgdGl0bGU9e3RpdGxlIHx8IGxhYmVscy51c2VyTWVzc2FnZVRvb2xiYXJFZGl0TWVzc2FnZUxhYmVsfVxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgPlxuICAgICAgICA8RWRpdCBjbGFzc05hbWU9XCJzaXplLVsxOHB4XVwiIC8+XG4gICAgICA8L1Rvb2xiYXJCdXR0b24+XG4gICAgKTtcbiAgfTtcblxuICBleHBvcnQgY29uc3QgQnJhbmNoTmF2aWdhdGlvbjogUmVhY3QuRkM8XG4gICAgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+ICYge1xuICAgICAgY3VycmVudEJyYW5jaD86IG51bWJlcjtcbiAgICAgIG51bWJlck9mQnJhbmNoZXM/OiBudW1iZXI7XG4gICAgICBvblN3aXRjaFRvQnJhbmNoPzogKFxuICAgICAgICBwcm9wczogQ29waWxvdENoYXRVc2VyTWVzc2FnZU9uU3dpdGNoVG9CcmFuY2hQcm9wc1xuICAgICAgKSA9PiB2b2lkO1xuICAgICAgbWVzc2FnZTogVXNlck1lc3NhZ2U7XG4gICAgfVxuICA+ID0gKHtcbiAgICBjbGFzc05hbWUsXG4gICAgY3VycmVudEJyYW5jaCA9IDAsXG4gICAgbnVtYmVyT2ZCcmFuY2hlcyA9IDEsXG4gICAgb25Td2l0Y2hUb0JyYW5jaCxcbiAgICBtZXNzYWdlLFxuICAgIC4uLnByb3BzXG4gIH0pID0+IHtcbiAgICBpZiAoIW51bWJlck9mQnJhbmNoZXMgfHwgbnVtYmVyT2ZCcmFuY2hlcyA8PSAxIHx8ICFvblN3aXRjaFRvQnJhbmNoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjYW5Hb1ByZXYgPSBjdXJyZW50QnJhbmNoID4gMDtcbiAgICBjb25zdCBjYW5Hb05leHQgPSBjdXJyZW50QnJhbmNoIDwgbnVtYmVyT2ZCcmFuY2hlcyAtIDE7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3R3TWVyZ2UoXCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiLCBjbGFzc05hbWUpfSB7Li4ucHJvcHN9PlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgdmFyaWFudD1cImFzc2lzdGFudE1lc3NhZ2VUb29sYmFyQnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgb25Td2l0Y2hUb0JyYW5jaD8uKHtcbiAgICAgICAgICAgICAgYnJhbmNoSW5kZXg6IGN1cnJlbnRCcmFuY2ggLSAxLFxuICAgICAgICAgICAgICBudW1iZXJPZkJyYW5jaGVzLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGlzYWJsZWQ9eyFjYW5Hb1ByZXZ9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiaC02IHctNiBwLTBcIlxuICAgICAgICA+XG4gICAgICAgICAgPENoZXZyb25MZWZ0IGNsYXNzTmFtZT1cInNpemUtWzIwcHhdXCIgLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHB4LTAgZm9udC1tZWRpdW1cIj5cbiAgICAgICAgICB7Y3VycmVudEJyYW5jaCArIDF9L3tudW1iZXJPZkJyYW5jaGVzfVxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICB2YXJpYW50PVwiYXNzaXN0YW50TWVzc2FnZVRvb2xiYXJCdXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICBvblN3aXRjaFRvQnJhbmNoPy4oe1xuICAgICAgICAgICAgICBicmFuY2hJbmRleDogY3VycmVudEJyYW5jaCArIDEsXG4gICAgICAgICAgICAgIG51bWJlck9mQnJhbmNoZXMsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBkaXNhYmxlZD17IWNhbkdvTmV4dH1cbiAgICAgICAgICBjbGFzc05hbWU9XCJoLTYgdy02IHAtMFwiXG4gICAgICAgID5cbiAgICAgICAgICA8Q2hldnJvblJpZ2h0IGNsYXNzTmFtZT1cInNpemUtWzIwcHhdXCIgLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufVxuXG5Db3BpbG90Q2hhdFVzZXJNZXNzYWdlLkNvbnRhaW5lci5kaXNwbGF5TmFtZSA9XG4gIFwiQ29waWxvdENoYXRVc2VyTWVzc2FnZS5Db250YWluZXJcIjtcbkNvcGlsb3RDaGF0VXNlck1lc3NhZ2UuTWVzc2FnZVJlbmRlcmVyLmRpc3BsYXlOYW1lID1cbiAgXCJDb3BpbG90Q2hhdFVzZXJNZXNzYWdlLk1lc3NhZ2VSZW5kZXJlclwiO1xuQ29waWxvdENoYXRVc2VyTWVzc2FnZS5Ub29sYmFyLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdFVzZXJNZXNzYWdlLlRvb2xiYXJcIjtcbkNvcGlsb3RDaGF0VXNlck1lc3NhZ2UuVG9vbGJhckJ1dHRvbi5kaXNwbGF5TmFtZSA9XG4gIFwiQ29waWxvdENoYXRVc2VyTWVzc2FnZS5Ub29sYmFyQnV0dG9uXCI7XG5Db3BpbG90Q2hhdFVzZXJNZXNzYWdlLkNvcHlCdXR0b24uZGlzcGxheU5hbWUgPVxuICBcIkNvcGlsb3RDaGF0VXNlck1lc3NhZ2UuQ29weUJ1dHRvblwiO1xuQ29waWxvdENoYXRVc2VyTWVzc2FnZS5FZGl0QnV0dG9uLmRpc3BsYXlOYW1lID1cbiAgXCJDb3BpbG90Q2hhdFVzZXJNZXNzYWdlLkVkaXRCdXR0b25cIjtcbkNvcGlsb3RDaGF0VXNlck1lc3NhZ2UuQnJhbmNoTmF2aWdhdGlvbi5kaXNwbGF5TmFtZSA9XG4gIFwiQ29waWxvdENoYXRVc2VyTWVzc2FnZS5CcmFuY2hOYXZpZ2F0aW9uXCI7XG5cbmV4cG9ydCBkZWZhdWx0IENvcGlsb3RDaGF0VXNlck1lc3NhZ2U7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMb2FkZXIyIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb3BpbG90Q2hhdFN1Z2dlc3Rpb25QaWxsUHJvcHNcbiAgZXh0ZW5kcyBSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4ge1xuICAvKiogT3B0aW9uYWwgaWNvbiB0byByZW5kZXIgb24gdGhlIGxlZnQgc2lkZSB3aGVuIG5vdCBsb2FkaW5nLiAqL1xuICBpY29uPzogUmVhY3QuUmVhY3ROb2RlO1xuICAvKiogV2hldGhlciB0aGUgcGlsbCBzaG91bGQgZGlzcGxheSBhIGxvYWRpbmcgc3Bpbm5lci4gKi9cbiAgaXNMb2FkaW5nPzogYm9vbGVhbjtcbn1cblxuY29uc3QgYmFzZUNsYXNzZXMgPVxuICBcImdyb3VwIGlubGluZS1mbGV4IGgtNyBzbTpoLTggaXRlbXMtY2VudGVyIGdhcC0xIHNtOmdhcC0xLjUgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItYm9yZGVyLzYwIGJnLWJhY2tncm91bmQgcHgtMi41IHNtOnB4LTMgdGV4dC1bMTFweF0gc206dGV4dC14cyBsZWFkaW5nLW5vbmUgdGV4dC1mb3JlZ3JvdW5kIHRyYW5zaXRpb24tY29sb3JzIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWFjY2VudC82MCBob3Zlcjp0ZXh0LWZvcmVncm91bmQgZm9jdXMtdmlzaWJsZTpvdXRsaW5lLW5vbmUgZm9jdXMtdmlzaWJsZTpyaW5nLTIgZm9jdXMtdmlzaWJsZTpyaW5nLXJpbmcgZm9jdXMtdmlzaWJsZTpyaW5nLW9mZnNldC0yIGZvY3VzLXZpc2libGU6cmluZy1vZmZzZXQtYmFja2dyb3VuZCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6dGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGRpc2FibGVkOmhvdmVyOmJnLWJhY2tncm91bmQgZGlzYWJsZWQ6aG92ZXI6dGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHBvaW50ZXItZXZlbnRzLWF1dG9cIjtcblxuY29uc3QgbGFiZWxDbGFzc2VzID0gXCJ3aGl0ZXNwYWNlLW5vd3JhcCBmb250LW1lZGl1bSBsZWFkaW5nLW5vbmVcIjtcblxuZXhwb3J0IGNvbnN0IENvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGwgPSBSZWFjdC5mb3J3YXJkUmVmPFxuICBIVE1MQnV0dG9uRWxlbWVudCxcbiAgQ29waWxvdENoYXRTdWdnZXN0aW9uUGlsbFByb3BzXG4+KGZ1bmN0aW9uIENvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGwoXG4gIHsgY2xhc3NOYW1lLCBjaGlsZHJlbiwgaWNvbiwgaXNMb2FkaW5nLCB0eXBlLCAuLi5wcm9wcyB9LFxuICByZWZcbikge1xuICBjb25zdCBzaG93SWNvbiA9ICFpc0xvYWRpbmcgJiYgaWNvbjtcblxuICByZXR1cm4gKFxuICAgIDxidXR0b25cbiAgICAgIHJlZj17cmVmfVxuICAgICAgZGF0YS1zbG90PVwic3VnZ2VzdGlvbi1waWxsXCJcbiAgICAgIGNsYXNzTmFtZT17Y24oYmFzZUNsYXNzZXMsIGNsYXNzTmFtZSl9XG4gICAgICB0eXBlPXt0eXBlID8/IFwiYnV0dG9uXCJ9XG4gICAgICBhcmlhLWJ1c3k9e2lzTG9hZGluZyB8fCB1bmRlZmluZWR9XG4gICAgICBkaXNhYmxlZD17aXNMb2FkaW5nIHx8IHByb3BzLmRpc2FibGVkfVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXggaC0zLjUgc206aC00IHctMy41IHNtOnctNCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC0zLjUgc206aC00IHctMy41IHNtOnctNCBhbmltYXRlLXNwaW5cIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICA8L3NwYW4+XG4gICAgICApIDogKFxuICAgICAgICBzaG93SWNvbiAmJiAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmxleCBoLTMuNSBzbTpoLTQgdy0zLjUgc206dy00IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj57aWNvbn08L3NwYW4+XG4gICAgICAgIClcbiAgICAgICl9XG4gICAgICA8c3BhbiBjbGFzc05hbWU9e2xhYmVsQ2xhc3Nlc30+e2NoaWxkcmVufTwvc3Bhbj5cbiAgICA8L2J1dHRvbj5cbiAgKTtcbn0pO1xuXG5Db3BpbG90Q2hhdFN1Z2dlc3Rpb25QaWxsLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdFN1Z2dlc3Rpb25QaWxsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IENvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGw7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBTdWdnZXN0aW9uIH0gZnJvbSBcIkBjb3BpbG90a2l0bmV4dC9jb3JlXCI7XG5pbXBvcnQgeyByZW5kZXJTbG90LCBXaXRoU2xvdHMgfSBmcm9tIFwiQC9saWIvc2xvdHNcIjtcbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XG5pbXBvcnQgQ29waWxvdENoYXRTdWdnZXN0aW9uUGlsbCwge1xuICBDb3BpbG90Q2hhdFN1Z2dlc3Rpb25QaWxsUHJvcHMsXG59IGZyb20gXCIuL0NvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGxcIjtcblxuY29uc3QgRGVmYXVsdENvbnRhaW5lciA9IFJlYWN0LmZvcndhcmRSZWY8XG4gIEhUTUxEaXZFbGVtZW50LFxuICBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD5cbj4oZnVuY3Rpb24gRGVmYXVsdENvbnRhaW5lcih7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfSwgcmVmKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgcmVmPXtyZWZ9XG4gICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICBcImZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtMS41IHNtOmdhcC0yIHBsLTAgcHItNCBzbTpweC0wIHBvaW50ZXItZXZlbnRzLW5vbmVcIixcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgKX1cbiAgICAgIHsuLi5wcm9wc31cbiAgICAvPlxuICApO1xufSk7XG5cbmV4cG9ydCB0eXBlIENvcGlsb3RDaGF0U3VnZ2VzdGlvblZpZXdQcm9wcyA9IFdpdGhTbG90czxcbiAge1xuICAgIGNvbnRhaW5lcjogdHlwZW9mIERlZmF1bHRDb250YWluZXI7XG4gICAgc3VnZ2VzdGlvbjogdHlwZW9mIENvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGw7XG4gIH0sXG4gIHtcbiAgICBzdWdnZXN0aW9uczogU3VnZ2VzdGlvbltdO1xuICAgIG9uU2VsZWN0U3VnZ2VzdGlvbj86IChzdWdnZXN0aW9uOiBTdWdnZXN0aW9uLCBpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIGxvYWRpbmdJbmRleGVzPzogUmVhZG9ubHlBcnJheTxudW1iZXI+O1xuICB9ICYgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+XG4+O1xuXG5leHBvcnQgY29uc3QgQ29waWxvdENoYXRTdWdnZXN0aW9uVmlldyA9IFJlYWN0LmZvcndhcmRSZWY8XG4gIEhUTUxEaXZFbGVtZW50LFxuICBDb3BpbG90Q2hhdFN1Z2dlc3Rpb25WaWV3UHJvcHNcbj4oZnVuY3Rpb24gQ29waWxvdENoYXRTdWdnZXN0aW9uVmlldyhcbiAge1xuICAgIHN1Z2dlc3Rpb25zLFxuICAgIG9uU2VsZWN0U3VnZ2VzdGlvbixcbiAgICBsb2FkaW5nSW5kZXhlcyxcbiAgICBjb250YWluZXIsXG4gICAgc3VnZ2VzdGlvbjogc3VnZ2VzdGlvblNsb3QsXG4gICAgY2xhc3NOYW1lLFxuICAgIGNoaWxkcmVuLFxuICAgIC4uLnJlc3RQcm9wc1xuICB9LFxuICByZWYsXG4pIHtcbiAgY29uc3QgbG9hZGluZ1NldCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghbG9hZGluZ0luZGV4ZXMgfHwgbG9hZGluZ0luZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2V0KGxvYWRpbmdJbmRleGVzKTtcbiAgfSwgW2xvYWRpbmdJbmRleGVzXSk7XG5cbiAgY29uc3QgQ29udGFpbmVyRWxlbWVudCA9IHJlbmRlclNsb3QoY29udGFpbmVyLCBEZWZhdWx0Q29udGFpbmVyLCB7XG4gICAgcmVmLFxuICAgIGNsYXNzTmFtZSxcbiAgICAuLi5yZXN0UHJvcHMsXG4gIH0pO1xuXG4gIGNvbnN0IHN1Z2dlc3Rpb25FbGVtZW50cyA9IHN1Z2dlc3Rpb25zLm1hcCgoc3VnZ2VzdGlvbiwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBpc0xvYWRpbmcgPSBsb2FkaW5nU2V0LmhhcyhpbmRleCkgfHwgc3VnZ2VzdGlvbi5pc0xvYWRpbmcgPT09IHRydWU7XG4gICAgY29uc3QgcGlsbCA9IHJlbmRlclNsb3Q8XG4gICAgICB0eXBlb2YgQ29waWxvdENoYXRTdWdnZXN0aW9uUGlsbCxcbiAgICAgIENvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGxQcm9wc1xuICAgID4oc3VnZ2VzdGlvblNsb3QsIENvcGlsb3RDaGF0U3VnZ2VzdGlvblBpbGwsIHtcbiAgICAgIGNoaWxkcmVuOiBzdWdnZXN0aW9uLnRpdGxlLFxuICAgICAgaXNMb2FkaW5nLFxuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgIG9uQ2xpY2s6ICgpID0+IG9uU2VsZWN0U3VnZ2VzdGlvbj8uKHN1Z2dlc3Rpb24sIGluZGV4KSxcbiAgICB9KTtcblxuICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQocGlsbCwge1xuICAgICAga2V5OiBgJHtzdWdnZXN0aW9uLnRpdGxlfS0ke2luZGV4fWAsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IGJvdW5kQ29udGFpbmVyID0gUmVhY3QuY2xvbmVFbGVtZW50KFxuICAgIENvbnRhaW5lckVsZW1lbnQsXG4gICAgdW5kZWZpbmVkLFxuICAgIHN1Z2dlc3Rpb25FbGVtZW50cyxcbiAgKTtcblxuICBpZiAodHlwZW9mIGNoaWxkcmVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCBzYW1wbGVTdWdnZXN0aW9uID0gcmVuZGVyU2xvdDxcbiAgICAgIHR5cGVvZiBDb3BpbG90Q2hhdFN1Z2dlc3Rpb25QaWxsLFxuICAgICAgQ29waWxvdENoYXRTdWdnZXN0aW9uUGlsbFByb3BzXG4gICAgPihzdWdnZXN0aW9uU2xvdCwgQ29waWxvdENoYXRTdWdnZXN0aW9uUGlsbCwge1xuICAgICAgY2hpbGRyZW46IHN1Z2dlc3Rpb25zWzBdPy50aXRsZSA/PyBcIlwiLFxuICAgICAgaXNMb2FkaW5nOlxuICAgICAgICBzdWdnZXN0aW9ucy5sZW5ndGggPiAwID8gbG9hZGluZ1NldC5oYXMoMCkgfHwgc3VnZ2VzdGlvbnNbMF0/LmlzTG9hZGluZyA9PT0gdHJ1ZSA6IGZhbHNlLFxuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7Y2hpbGRyZW4oe1xuICAgICAgICAgIGNvbnRhaW5lcjogYm91bmRDb250YWluZXIsXG4gICAgICAgICAgc3VnZ2VzdGlvbjogc2FtcGxlU3VnZ2VzdGlvbixcbiAgICAgICAgICBzdWdnZXN0aW9ucyxcbiAgICAgICAgICBvblNlbGVjdFN1Z2dlc3Rpb24sXG4gICAgICAgICAgbG9hZGluZ0luZGV4ZXMsXG4gICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgIC4uLnJlc3RQcm9wcyxcbiAgICAgICAgfSl9XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG5cbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIHtib3VuZENvbnRhaW5lcn1cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBib3VuZENvbnRhaW5lcjtcbn0pO1xuXG5Db3BpbG90Q2hhdFN1Z2dlc3Rpb25WaWV3LmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdFN1Z2dlc3Rpb25WaWV3XCI7XG5cbmV4cG9ydCBkZWZhdWx0IENvcGlsb3RDaGF0U3VnZ2VzdGlvblZpZXc7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWR1Y2VyIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBXaXRoU2xvdHMsIHJlbmRlclNsb3QgfSBmcm9tIFwiQC9saWIvc2xvdHNcIjtcbmltcG9ydCBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UgZnJvbSBcIi4vQ29waWxvdENoYXRBc3Npc3RhbnRNZXNzYWdlXCI7XG5pbXBvcnQgQ29waWxvdENoYXRVc2VyTWVzc2FnZSBmcm9tIFwiLi9Db3BpbG90Q2hhdFVzZXJNZXNzYWdlXCI7XG5pbXBvcnQgeyBBY3Rpdml0eU1lc3NhZ2UsIEFzc2lzdGFudE1lc3NhZ2UsIE1lc3NhZ2UsIFVzZXJNZXNzYWdlIH0gZnJvbSBcIkBhZy11aS9jb3JlXCI7XG5pbXBvcnQgeyB0d01lcmdlIH0gZnJvbSBcInRhaWx3aW5kLW1lcmdlXCI7XG5pbXBvcnQgeyB1c2VSZW5kZXJBY3Rpdml0eU1lc3NhZ2UsIHVzZVJlbmRlckN1c3RvbU1lc3NhZ2VzIH0gZnJvbSBcIkAvaG9va3NcIjtcbmltcG9ydCB7IHVzZUNvcGlsb3RLaXQgfSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdEtpdFByb3ZpZGVyXCI7XG5pbXBvcnQgeyB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJcIjtcblxuXG4vKipcbiAqIE1lbW9pemVkIHdyYXBwZXIgZm9yIGFzc2lzdGFudCBtZXNzYWdlcyB0byBwcmV2ZW50IHJlLXJlbmRlcnMgd2hlbiBvdGhlciBtZXNzYWdlcyBjaGFuZ2UuXG4gKi9cbmNvbnN0IE1lbW9pemVkQXNzaXN0YW50TWVzc2FnZSA9IFJlYWN0Lm1lbW8oXG4gIGZ1bmN0aW9uIE1lbW9pemVkQXNzaXN0YW50TWVzc2FnZSh7XG4gICAgbWVzc2FnZSxcbiAgICBtZXNzYWdlcyxcbiAgICBpc1J1bm5pbmcsXG4gICAgQXNzaXN0YW50TWVzc2FnZUNvbXBvbmVudCxcbiAgfToge1xuICAgIG1lc3NhZ2U6IEFzc2lzdGFudE1lc3NhZ2U7XG4gICAgbWVzc2FnZXM6IE1lc3NhZ2VbXTtcbiAgICBpc1J1bm5pbmc6IGJvb2xlYW47XG4gICAgQXNzaXN0YW50TWVzc2FnZUNvbXBvbmVudDogdHlwZW9mIENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZTtcbiAgfSkge1xuICAgIHJldHVybiAoXG4gICAgICA8QXNzaXN0YW50TWVzc2FnZUNvbXBvbmVudFxuICAgICAgICBtZXNzYWdlPXttZXNzYWdlfVxuICAgICAgICBtZXNzYWdlcz17bWVzc2FnZXN9XG4gICAgICAgIGlzUnVubmluZz17aXNSdW5uaW5nfVxuICAgICAgLz5cbiAgICApO1xuICB9LFxuICAocHJldlByb3BzLCBuZXh0UHJvcHMpID0+IHtcbiAgICAvLyBPbmx5IHJlLXJlbmRlciBpZiB0aGlzIHNwZWNpZmljIG1lc3NhZ2UgY2hhbmdlZFxuICAgIGlmIChwcmV2UHJvcHMubWVzc2FnZS5pZCAhPT0gbmV4dFByb3BzLm1lc3NhZ2UuaWQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAocHJldlByb3BzLm1lc3NhZ2UuY29udGVudCAhPT0gbmV4dFByb3BzLm1lc3NhZ2UuY29udGVudCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gQ29tcGFyZSB0b29sIGNhbGxzIGlmIHByZXNlbnRcbiAgICBjb25zdCBwcmV2VG9vbENhbGxzID0gcHJldlByb3BzLm1lc3NhZ2UudG9vbENhbGxzO1xuICAgIGNvbnN0IG5leHRUb29sQ2FsbHMgPSBuZXh0UHJvcHMubWVzc2FnZS50b29sQ2FsbHM7XG4gICAgaWYgKHByZXZUb29sQ2FsbHM/Lmxlbmd0aCAhPT0gbmV4dFRvb2xDYWxscz8ubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHByZXZUb29sQ2FsbHMgJiYgbmV4dFRvb2xDYWxscykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2VG9vbENhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHByZXZUYyA9IHByZXZUb29sQ2FsbHNbaV07XG4gICAgICAgIGNvbnN0IG5leHRUYyA9IG5leHRUb29sQ2FsbHNbaV07XG4gICAgICAgIGlmICghcHJldlRjIHx8ICFuZXh0VGMpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHByZXZUYy5pZCAhPT0gbmV4dFRjLmlkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChwcmV2VGMuZnVuY3Rpb24uYXJndW1lbnRzICE9PSBuZXh0VGMuZnVuY3Rpb24uYXJndW1lbnRzKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdG9vbCByZXN1bHRzIGNoYW5nZWQgZm9yIHRoaXMgbWVzc2FnZSdzIHRvb2wgY2FsbHNcbiAgICAvLyBUb29sIHJlc3VsdHMgYXJlIHNlcGFyYXRlIG1lc3NhZ2VzIHdpdGggcm9sZT1cInRvb2xcIiB0aGF0IHJlZmVyZW5jZSB0b29sIGNhbGwgSURzXG4gICAgaWYgKHByZXZUb29sQ2FsbHMgJiYgcHJldlRvb2xDYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0b29sQ2FsbElkcyA9IG5ldyBTZXQocHJldlRvb2xDYWxscy5tYXAodGMgPT4gdGMuaWQpKTtcblxuICAgICAgY29uc3QgcHJldlRvb2xSZXN1bHRzID0gcHJldlByb3BzLm1lc3NhZ2VzLmZpbHRlcihcbiAgICAgICAgbSA9PiBtLnJvbGUgPT09IFwidG9vbFwiICYmIHRvb2xDYWxsSWRzLmhhcygobSBhcyBhbnkpLnRvb2xDYWxsSWQpXG4gICAgICApO1xuICAgICAgY29uc3QgbmV4dFRvb2xSZXN1bHRzID0gbmV4dFByb3BzLm1lc3NhZ2VzLmZpbHRlcihcbiAgICAgICAgbSA9PiBtLnJvbGUgPT09IFwidG9vbFwiICYmIHRvb2xDYWxsSWRzLmhhcygobSBhcyBhbnkpLnRvb2xDYWxsSWQpXG4gICAgICApO1xuXG4gICAgICAvLyBJZiBudW1iZXIgb2YgdG9vbCByZXN1bHRzIGNoYW5nZWQsIHJlLXJlbmRlclxuICAgICAgaWYgKHByZXZUb29sUmVzdWx0cy5sZW5ndGggIT09IG5leHRUb29sUmVzdWx0cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gSWYgYW55IHRvb2wgcmVzdWx0IGNvbnRlbnQgY2hhbmdlZCwgcmUtcmVuZGVyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZUb29sUmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoKHByZXZUb29sUmVzdWx0c1tpXSBhcyBhbnkpLmNvbnRlbnQgIT09IChuZXh0VG9vbFJlc3VsdHNbaV0gYXMgYW55KS5jb250ZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT25seSBjYXJlIGFib3V0IGlzUnVubmluZyBpZiB0aGlzIG1lc3NhZ2UgaXMgQ1VSUkVOVExZIHRoZSBsYXRlc3RcbiAgICAvLyAod2UgZG9uJ3QgbmVlZCB0byByZS1yZW5kZXIganVzdCBiZWNhdXNlIGEgbWVzc2FnZSBzdG9wcGVkIGJlaW5nIHRoZSBsYXRlc3QpXG4gICAgY29uc3QgbmV4dElzTGF0ZXN0ID0gbmV4dFByb3BzLm1lc3NhZ2VzW25leHRQcm9wcy5tZXNzYWdlcy5sZW5ndGggLSAxXT8uaWQgPT09IG5leHRQcm9wcy5tZXNzYWdlLmlkO1xuICAgIGlmIChuZXh0SXNMYXRlc3QgJiYgcHJldlByb3BzLmlzUnVubmluZyAhPT0gbmV4dFByb3BzLmlzUnVubmluZykgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gQ2hlY2sgaWYgY29tcG9uZW50IHJlZmVyZW5jZSBjaGFuZ2VkXG4gICAgaWYgKHByZXZQcm9wcy5Bc3Npc3RhbnRNZXNzYWdlQ29tcG9uZW50ICE9PSBuZXh0UHJvcHMuQXNzaXN0YW50TWVzc2FnZUNvbXBvbmVudCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbik7XG5cbi8qKlxuICogTWVtb2l6ZWQgd3JhcHBlciBmb3IgdXNlciBtZXNzYWdlcyB0byBwcmV2ZW50IHJlLXJlbmRlcnMgd2hlbiBvdGhlciBtZXNzYWdlcyBjaGFuZ2UuXG4gKi9cbmNvbnN0IE1lbW9pemVkVXNlck1lc3NhZ2UgPSBSZWFjdC5tZW1vKFxuICBmdW5jdGlvbiBNZW1vaXplZFVzZXJNZXNzYWdlKHtcbiAgICBtZXNzYWdlLFxuICAgIFVzZXJNZXNzYWdlQ29tcG9uZW50LFxuICB9OiB7XG4gICAgbWVzc2FnZTogVXNlck1lc3NhZ2U7XG4gICAgVXNlck1lc3NhZ2VDb21wb25lbnQ6IHR5cGVvZiBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlO1xuICB9KSB7XG4gICAgcmV0dXJuIDxVc2VyTWVzc2FnZUNvbXBvbmVudCBtZXNzYWdlPXttZXNzYWdlfSAvPjtcbiAgfSxcbiAgKHByZXZQcm9wcywgbmV4dFByb3BzKSA9PiB7XG4gICAgLy8gT25seSByZS1yZW5kZXIgaWYgdGhpcyBzcGVjaWZpYyBtZXNzYWdlIGNoYW5nZWRcbiAgICBpZiAocHJldlByb3BzLm1lc3NhZ2UuaWQgIT09IG5leHRQcm9wcy5tZXNzYWdlLmlkKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHByZXZQcm9wcy5tZXNzYWdlLmNvbnRlbnQgIT09IG5leHRQcm9wcy5tZXNzYWdlLmNvbnRlbnQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAocHJldlByb3BzLlVzZXJNZXNzYWdlQ29tcG9uZW50ICE9PSBuZXh0UHJvcHMuVXNlck1lc3NhZ2VDb21wb25lbnQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuKTtcblxuLyoqXG4gKiBNZW1vaXplZCB3cmFwcGVyIGZvciBhY3Rpdml0eSBtZXNzYWdlcyB0byBwcmV2ZW50IHJlLXJlbmRlcnMgd2hlbiBvdGhlciBtZXNzYWdlcyBjaGFuZ2UuXG4gKi9cbmNvbnN0IE1lbW9pemVkQWN0aXZpdHlNZXNzYWdlID0gUmVhY3QubWVtbyhcbiAgZnVuY3Rpb24gTWVtb2l6ZWRBY3Rpdml0eU1lc3NhZ2Uoe1xuICAgIG1lc3NhZ2UsXG4gICAgcmVuZGVyQWN0aXZpdHlNZXNzYWdlLFxuICB9OiB7XG4gICAgbWVzc2FnZTogQWN0aXZpdHlNZXNzYWdlO1xuICAgIHJlbmRlckFjdGl2aXR5TWVzc2FnZTogKG1lc3NhZ2U6IEFjdGl2aXR5TWVzc2FnZSkgPT4gUmVhY3QuUmVhY3RFbGVtZW50IHwgbnVsbDtcbiAgfSkge1xuICAgIHJldHVybiByZW5kZXJBY3Rpdml0eU1lc3NhZ2UobWVzc2FnZSk7XG4gIH0sXG4gIChwcmV2UHJvcHMsIG5leHRQcm9wcykgPT4ge1xuICAgIC8vIE1lc3NhZ2UgSUQgY2hhbmdlZCA9IGRpZmZlcmVudCBtZXNzYWdlLCBtdXN0IHJlLXJlbmRlclxuICAgIGlmIChwcmV2UHJvcHMubWVzc2FnZS5pZCAhPT0gbmV4dFByb3BzLm1lc3NhZ2UuaWQpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIEFjdGl2aXR5IHR5cGUgY2hhbmdlZCA9IG11c3QgcmUtcmVuZGVyXG4gICAgaWYgKHByZXZQcm9wcy5tZXNzYWdlLmFjdGl2aXR5VHlwZSAhPT0gbmV4dFByb3BzLm1lc3NhZ2UuYWN0aXZpdHlUeXBlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBDb21wYXJlIGNvbnRlbnQgdXNpbmcgSlNPTi5zdHJpbmdpZnkgKG5hdGl2ZSBjb2RlLCBoYW5kbGVzIGRlZXAgY29tcGFyaXNvbilcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkocHJldlByb3BzLm1lc3NhZ2UuY29udGVudCkgIT09IEpTT04uc3RyaW5naWZ5KG5leHRQcm9wcy5tZXNzYWdlLmNvbnRlbnQpKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuKTtcblxuLyoqXG4gKiBNZW1vaXplZCB3cmFwcGVyIGZvciBjdXN0b20gbWVzc2FnZXMgdG8gcHJldmVudCByZS1yZW5kZXJzIHdoZW4gb3RoZXIgbWVzc2FnZXMgY2hhbmdlLlxuICovXG5jb25zdCBNZW1vaXplZEN1c3RvbU1lc3NhZ2UgPSBSZWFjdC5tZW1vKFxuICBmdW5jdGlvbiBNZW1vaXplZEN1c3RvbU1lc3NhZ2Uoe1xuICAgIG1lc3NhZ2UsXG4gICAgcG9zaXRpb24sXG4gICAgcmVuZGVyQ3VzdG9tTWVzc2FnZSxcbiAgfToge1xuICAgIG1lc3NhZ2U6IE1lc3NhZ2U7XG4gICAgcG9zaXRpb246IFwiYmVmb3JlXCIgfCBcImFmdGVyXCI7XG4gICAgcmVuZGVyQ3VzdG9tTWVzc2FnZTogKHBhcmFtczogeyBtZXNzYWdlOiBNZXNzYWdlOyBwb3NpdGlvbjogXCJiZWZvcmVcIiB8IFwiYWZ0ZXJcIiB9KSA9PiBSZWFjdC5SZWFjdEVsZW1lbnQgfCBudWxsO1xuICAgIHN0YXRlU25hcHNob3Q/OiB1bmtub3duO1xuICB9KSB7XG4gICAgcmV0dXJuIHJlbmRlckN1c3RvbU1lc3NhZ2UoeyBtZXNzYWdlLCBwb3NpdGlvbiB9KTtcbiAgfSxcbiAgKHByZXZQcm9wcywgbmV4dFByb3BzKSA9PiB7XG4gICAgLy8gT25seSByZS1yZW5kZXIgaWYgdGhlIG1lc3NhZ2Ugb3IgcG9zaXRpb24gY2hhbmdlZFxuICAgIGlmIChwcmV2UHJvcHMubWVzc2FnZS5pZCAhPT0gbmV4dFByb3BzLm1lc3NhZ2UuaWQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAocHJldlByb3BzLnBvc2l0aW9uICE9PSBuZXh0UHJvcHMucG9zaXRpb24pIHJldHVybiBmYWxzZTtcbiAgICAvLyBDb21wYXJlIG1lc3NhZ2UgY29udGVudCAtIGZvciBhc3Npc3RhbnQgbWVzc2FnZXMgdGhpcyBpcyBhIHN0cmluZywgZm9yIG90aGVycyBtYXkgZGlmZmVyXG4gICAgaWYgKHByZXZQcm9wcy5tZXNzYWdlLmNvbnRlbnQgIT09IG5leHRQcm9wcy5tZXNzYWdlLmNvbnRlbnQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAocHJldlByb3BzLm1lc3NhZ2Uucm9sZSAhPT0gbmV4dFByb3BzLm1lc3NhZ2Uucm9sZSkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIENvbXBhcmUgc3RhdGUgc25hcHNob3QgLSBjdXN0b20gcmVuZGVyZXJzIG1heSBkZXBlbmQgb24gc3RhdGVcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkocHJldlByb3BzLnN0YXRlU25hcHNob3QpICE9PSBKU09OLnN0cmluZ2lmeShuZXh0UHJvcHMuc3RhdGVTbmFwc2hvdCkpIHJldHVybiBmYWxzZTtcbiAgICAvLyBOb3RlOiBXZSBkb24ndCBjb21wYXJlIHJlbmRlckN1c3RvbU1lc3NhZ2UgZnVuY3Rpb24gcmVmZXJlbmNlIGJlY2F1c2UgaXQgY2hhbmdlc1xuICAgIC8vIGZyZXF1ZW50bHkuIFRoZSBtZXNzYWdlIGFuZCBzdGF0ZSBjb21wYXJpc29uIGlzIHN1ZmZpY2llbnQgdG8gZGV0ZXJtaW5lIGlmIGEgcmUtcmVuZGVyIGlzIG5lZWRlZC5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuKTtcblxuZXhwb3J0IHR5cGUgQ29waWxvdENoYXRNZXNzYWdlVmlld1Byb3BzID0gT21pdDxcbiAgV2l0aFNsb3RzPFxuICAgIHtcbiAgICAgIGFzc2lzdGFudE1lc3NhZ2U6IHR5cGVvZiBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2U7XG4gICAgICB1c2VyTWVzc2FnZTogdHlwZW9mIENvcGlsb3RDaGF0VXNlck1lc3NhZ2U7XG4gICAgICBjdXJzb3I6IHR5cGVvZiBDb3BpbG90Q2hhdE1lc3NhZ2VWaWV3LkN1cnNvcjtcbiAgICB9LFxuICAgIHtcbiAgICAgIGlzUnVubmluZz86IGJvb2xlYW47XG4gICAgICBtZXNzYWdlcz86IE1lc3NhZ2VbXTtcbiAgICB9ICYgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+XG4gID4sXG4gIFwiY2hpbGRyZW5cIlxuPiAmIHtcbiAgY2hpbGRyZW4/OiAocHJvcHM6IHtcbiAgICBpc1J1bm5pbmc6IGJvb2xlYW47XG4gICAgbWVzc2FnZXM6IE1lc3NhZ2VbXTtcbiAgICBtZXNzYWdlRWxlbWVudHM6IFJlYWN0LlJlYWN0RWxlbWVudFtdO1xuICB9KSA9PiBSZWFjdC5SZWFjdEVsZW1lbnQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ29waWxvdENoYXRNZXNzYWdlVmlldyh7XG4gIG1lc3NhZ2VzID0gW10sXG4gIGFzc2lzdGFudE1lc3NhZ2UsXG4gIHVzZXJNZXNzYWdlLFxuICBjdXJzb3IsXG4gIGlzUnVubmluZyA9IGZhbHNlLFxuICBjaGlsZHJlbixcbiAgY2xhc3NOYW1lLFxuICAuLi5wcm9wc1xufTogQ29waWxvdENoYXRNZXNzYWdlVmlld1Byb3BzKSB7XG4gIGNvbnN0IHJlbmRlckN1c3RvbU1lc3NhZ2UgPSB1c2VSZW5kZXJDdXN0b21NZXNzYWdlcygpO1xuICBjb25zdCB7IHJlbmRlckFjdGl2aXR5TWVzc2FnZSB9ID0gdXNlUmVuZGVyQWN0aXZpdHlNZXNzYWdlKCk7XG4gIGNvbnN0IHsgY29waWxvdGtpdCB9ID0gdXNlQ29waWxvdEtpdCgpO1xuICBjb25zdCBjb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcbiAgY29uc3QgWywgZm9yY2VVcGRhdGVdID0gdXNlUmVkdWNlcigoeCkgPT4geCArIDEsIDApO1xuXG4gIC8vIFN1YnNjcmliZSB0byBzdGF0ZSBjaGFuZ2VzIHNvIGN1c3RvbSBtZXNzYWdlIHJlbmRlcmVycyByZS1yZW5kZXIgd2hlbiBzdGF0ZSB1cGRhdGVzLlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghY29uZmlnPy5hZ2VudElkKSByZXR1cm47XG4gICAgY29uc3QgYWdlbnQgPSBjb3BpbG90a2l0LmdldEFnZW50KGNvbmZpZy5hZ2VudElkKTtcbiAgICBpZiAoIWFnZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhZ2VudC5zdWJzY3JpYmUoe1xuICAgICAgb25TdGF0ZUNoYW5nZWQ6IGZvcmNlVXBkYXRlLFxuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfSwgW2NvbmZpZz8uYWdlbnRJZCwgY29waWxvdGtpdCwgZm9yY2VVcGRhdGVdKTtcblxuICAvLyBIZWxwZXIgdG8gZ2V0IHN0YXRlIHNuYXBzaG90IGZvciBhIG1lc3NhZ2UgKHVzZWQgZm9yIG1lbW9pemF0aW9uKVxuICBjb25zdCBnZXRTdGF0ZVNuYXBzaG90Rm9yTWVzc2FnZSA9IChtZXNzYWdlSWQ6IHN0cmluZyk6IHVua25vd24gPT4ge1xuICAgIGlmICghY29uZmlnKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHJlc29sdmVkUnVuSWQgPVxuICAgICAgY29waWxvdGtpdC5nZXRSdW5JZEZvck1lc3NhZ2UoY29uZmlnLmFnZW50SWQsIGNvbmZpZy50aHJlYWRJZCwgbWVzc2FnZUlkKSA/P1xuICAgICAgY29waWxvdGtpdC5nZXRSdW5JZHNGb3JUaHJlYWQoY29uZmlnLmFnZW50SWQsIGNvbmZpZy50aHJlYWRJZCkuc2xpY2UoLTEpWzBdO1xuICAgIGlmICghcmVzb2x2ZWRSdW5JZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gY29waWxvdGtpdC5nZXRTdGF0ZUJ5UnVuKGNvbmZpZy5hZ2VudElkLCBjb25maWcudGhyZWFkSWQsIHJlc29sdmVkUnVuSWQpO1xuICB9O1xuXG4gIGNvbnN0IG1lc3NhZ2VFbGVtZW50czogUmVhY3QuUmVhY3RFbGVtZW50W10gPSBtZXNzYWdlc1xuICAgIC5mbGF0TWFwKChtZXNzYWdlKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50czogKFJlYWN0LlJlYWN0RWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWQpW10gPSBbXTtcbiAgICAgIGNvbnN0IHN0YXRlU25hcHNob3QgPSBnZXRTdGF0ZVNuYXBzaG90Rm9yTWVzc2FnZShtZXNzYWdlLmlkKTtcblxuICAgICAgLy8gUmVuZGVyIGN1c3RvbSBtZXNzYWdlIGJlZm9yZSAodXNpbmcgbWVtb2l6ZWQgd3JhcHBlcilcbiAgICAgIGlmIChyZW5kZXJDdXN0b21NZXNzYWdlKSB7XG4gICAgICAgIGVsZW1lbnRzLnB1c2goXG4gICAgICAgICAgPE1lbW9pemVkQ3VzdG9tTWVzc2FnZVxuICAgICAgICAgICAga2V5PXtgJHttZXNzYWdlLmlkfS1jdXN0b20tYmVmb3JlYH1cbiAgICAgICAgICAgIG1lc3NhZ2U9e21lc3NhZ2V9XG4gICAgICAgICAgICBwb3NpdGlvbj1cImJlZm9yZVwiXG4gICAgICAgICAgICByZW5kZXJDdXN0b21NZXNzYWdlPXtyZW5kZXJDdXN0b21NZXNzYWdlfVxuICAgICAgICAgICAgc3RhdGVTbmFwc2hvdD17c3RhdGVTbmFwc2hvdH1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW5kZXIgdGhlIG1haW4gbWVzc2FnZSB1c2luZyBtZW1vaXplZCB3cmFwcGVycyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnNcbiAgICAgIGlmIChtZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjb21wb25lbnQgdG8gdXNlIChjdXN0b20gc2xvdCBvciBkZWZhdWx0KVxuICAgICAgICBjb25zdCBBc3Npc3RhbnRDb21wb25lbnQgPSAoXG4gICAgICAgICAgdHlwZW9mIGFzc2lzdGFudE1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBhc3Npc3RhbnRNZXNzYWdlXG4gICAgICAgICAgICA6IENvcGlsb3RDaGF0QXNzaXN0YW50TWVzc2FnZVxuICAgICAgICApIGFzIHR5cGVvZiBDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2U7XG5cbiAgICAgICAgZWxlbWVudHMucHVzaChcbiAgICAgICAgICA8TWVtb2l6ZWRBc3Npc3RhbnRNZXNzYWdlXG4gICAgICAgICAgICBrZXk9e21lc3NhZ2UuaWR9XG4gICAgICAgICAgICBtZXNzYWdlPXttZXNzYWdlIGFzIEFzc2lzdGFudE1lc3NhZ2V9XG4gICAgICAgICAgICBtZXNzYWdlcz17bWVzc2FnZXN9XG4gICAgICAgICAgICBpc1J1bm5pbmc9e2lzUnVubmluZ31cbiAgICAgICAgICAgIEFzc2lzdGFudE1lc3NhZ2VDb21wb25lbnQ9e0Fzc2lzdGFudENvbXBvbmVudH1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnJvbGUgPT09IFwidXNlclwiKSB7XG4gICAgICAgIC8vIERldGVybWluZSB0aGUgY29tcG9uZW50IHRvIHVzZSAoY3VzdG9tIHNsb3Qgb3IgZGVmYXVsdClcbiAgICAgICAgY29uc3QgVXNlckNvbXBvbmVudCA9IChcbiAgICAgICAgICB0eXBlb2YgdXNlck1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyB1c2VyTWVzc2FnZVxuICAgICAgICAgICAgOiBDb3BpbG90Q2hhdFVzZXJNZXNzYWdlXG4gICAgICAgICkgYXMgdHlwZW9mIENvcGlsb3RDaGF0VXNlck1lc3NhZ2U7XG5cbiAgICAgICAgZWxlbWVudHMucHVzaChcbiAgICAgICAgICA8TWVtb2l6ZWRVc2VyTWVzc2FnZVxuICAgICAgICAgICAga2V5PXttZXNzYWdlLmlkfVxuICAgICAgICAgICAgbWVzc2FnZT17bWVzc2FnZSBhcyBVc2VyTWVzc2FnZX1cbiAgICAgICAgICAgIFVzZXJNZXNzYWdlQ29tcG9uZW50PXtVc2VyQ29tcG9uZW50fVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG1lc3NhZ2Uucm9sZSA9PT0gXCJhY3Rpdml0eVwiKSB7XG4gICAgICAgIC8vIFVzZSBtZW1vaXplZCB3cmFwcGVyIHRvIHByZXZlbnQgcmUtcmVuZGVycyB3aGVuIG90aGVyIG1lc3NhZ2VzIGNoYW5nZVxuICAgICAgICBjb25zdCBhY3Rpdml0eU1zZyA9IG1lc3NhZ2UgYXMgQWN0aXZpdHlNZXNzYWdlO1xuICAgICAgICBlbGVtZW50cy5wdXNoKFxuICAgICAgICAgIDxNZW1vaXplZEFjdGl2aXR5TWVzc2FnZVxuICAgICAgICAgICAga2V5PXttZXNzYWdlLmlkfVxuICAgICAgICAgICAgbWVzc2FnZT17YWN0aXZpdHlNc2d9XG4gICAgICAgICAgICByZW5kZXJBY3Rpdml0eU1lc3NhZ2U9e3JlbmRlckFjdGl2aXR5TWVzc2FnZX1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW5kZXIgY3VzdG9tIG1lc3NhZ2UgYWZ0ZXIgKHVzaW5nIG1lbW9pemVkIHdyYXBwZXIpXG4gICAgICBpZiAocmVuZGVyQ3VzdG9tTWVzc2FnZSkge1xuICAgICAgICBlbGVtZW50cy5wdXNoKFxuICAgICAgICAgIDxNZW1vaXplZEN1c3RvbU1lc3NhZ2VcbiAgICAgICAgICAgIGtleT17YCR7bWVzc2FnZS5pZH0tY3VzdG9tLWFmdGVyYH1cbiAgICAgICAgICAgIG1lc3NhZ2U9e21lc3NhZ2V9XG4gICAgICAgICAgICBwb3NpdGlvbj1cImFmdGVyXCJcbiAgICAgICAgICAgIHJlbmRlckN1c3RvbU1lc3NhZ2U9e3JlbmRlckN1c3RvbU1lc3NhZ2V9XG4gICAgICAgICAgICBzdGF0ZVNuYXBzaG90PXtzdGF0ZVNuYXBzaG90fVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICB9KVxuICAgIC5maWx0ZXIoQm9vbGVhbikgYXMgUmVhY3QuUmVhY3RFbGVtZW50W107XG5cbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuKHsgbWVzc2FnZUVsZW1lbnRzLCBtZXNzYWdlcywgaXNSdW5uaW5nIH0pO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17dHdNZXJnZShcImZsZXggZmxleC1jb2xcIiwgY2xhc3NOYW1lKX0gey4uLnByb3BzfT5cbiAgICAgIHttZXNzYWdlRWxlbWVudHN9XG4gICAgICB7aXNSdW5uaW5nICYmIHJlbmRlclNsb3QoY3Vyc29yLCBDb3BpbG90Q2hhdE1lc3NhZ2VWaWV3LkN1cnNvciwge30pfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5Db3BpbG90Q2hhdE1lc3NhZ2VWaWV3LkN1cnNvciA9IGZ1bmN0aW9uIEN1cnNvcih7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfTogUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXt0d01lcmdlKFwidy1bMTFweF0gaC1bMTFweF0gcm91bmRlZC1mdWxsIGJnLWZvcmVncm91bmQgYW5pbWF0ZS1wdWxzZS1jdXJzb3IgbWwtMVwiLCBjbGFzc05hbWUpfVxuICAgICAgey4uLnByb3BzfVxuICAgIC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb3BpbG90Q2hhdE1lc3NhZ2VWaWV3O1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgV2l0aFNsb3RzLCBTbG90VmFsdWUsIHJlbmRlclNsb3QgfSBmcm9tIFwiQC9saWIvc2xvdHNcIjtcbmltcG9ydCBDb3BpbG90Q2hhdE1lc3NhZ2VWaWV3IGZyb20gXCIuL0NvcGlsb3RDaGF0TWVzc2FnZVZpZXdcIjtcbmltcG9ydCBDb3BpbG90Q2hhdElucHV0LCB7IENvcGlsb3RDaGF0SW5wdXRQcm9wcyB9IGZyb20gXCIuL0NvcGlsb3RDaGF0SW5wdXRcIjtcbmltcG9ydCBDb3BpbG90Q2hhdFN1Z2dlc3Rpb25WaWV3LCB7IENvcGlsb3RDaGF0U3VnZ2VzdGlvblZpZXdQcm9wcyB9IGZyb20gXCIuL0NvcGlsb3RDaGF0U3VnZ2VzdGlvblZpZXdcIjtcbmltcG9ydCB7IFN1Z2dlc3Rpb24gfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiQGFnLXVpL2NvcmVcIjtcbmltcG9ydCB7IHR3TWVyZ2UgfSBmcm9tIFwidGFpbHdpbmQtbWVyZ2VcIjtcbmltcG9ydCB7IFN0aWNrVG9Cb3R0b20sIHVzZVN0aWNrVG9Cb3R0b20sIHVzZVN0aWNrVG9Cb3R0b21Db250ZXh0IH0gZnJvbSBcInVzZS1zdGljay10by1ib3R0b21cIjtcbmltcG9ydCB7IENoZXZyb25Eb3duIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XG5pbXBvcnQgeyB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24sIENvcGlsb3RDaGF0RGVmYXVsdExhYmVscyB9IGZyb20gXCJAL3Byb3ZpZGVycy9Db3BpbG90Q2hhdENvbmZpZ3VyYXRpb25Qcm92aWRlclwiO1xuaW1wb3J0IHsgdXNlS2V5Ym9hcmRIZWlnaHQgfSBmcm9tIFwiQC9ob29rcy91c2Uta2V5Ym9hcmQtaGVpZ2h0XCI7XG5cbi8vIEZvcndhcmQgZGVjbGFyYXRpb24gZm9yIFdlbGNvbWVTY3JlZW4gY29tcG9uZW50IHR5cGVcbmV4cG9ydCB0eXBlIFdlbGNvbWVTY3JlZW5Qcm9wcyA9IFdpdGhTbG90czxcbiAge1xuICAgIHdlbGNvbWVNZXNzYWdlOiBSZWFjdC5GQzxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4+O1xuICB9LFxuICB7XG4gICAgaW5wdXQ6IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgICBzdWdnZXN0aW9uVmlldzogUmVhY3QuUmVhY3RFbGVtZW50O1xuICB9ICYgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+XG4+O1xuXG5leHBvcnQgdHlwZSBDb3BpbG90Q2hhdFZpZXdQcm9wcyA9IFdpdGhTbG90czxcbiAge1xuICAgIG1lc3NhZ2VWaWV3OiB0eXBlb2YgQ29waWxvdENoYXRNZXNzYWdlVmlldztcbiAgICBzY3JvbGxWaWV3OiBSZWFjdC5GQzxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4+O1xuICAgIHNjcm9sbFRvQm90dG9tQnV0dG9uOiBSZWFjdC5GQzxSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4+O1xuICAgIGlucHV0OiB0eXBlb2YgQ29waWxvdENoYXRJbnB1dDtcbiAgICBpbnB1dENvbnRhaW5lcjogUmVhY3QuRkM8UmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+ICYgeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+O1xuICAgIGZlYXRoZXI6IFJlYWN0LkZDPFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pj47XG4gICAgZGlzY2xhaW1lcjogUmVhY3QuRkM8UmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+PjtcbiAgICBzdWdnZXN0aW9uVmlldzogdHlwZW9mIENvcGlsb3RDaGF0U3VnZ2VzdGlvblZpZXc7XG4gIH0sXG4gIHtcbiAgICBtZXNzYWdlcz86IE1lc3NhZ2VbXTtcbiAgICBhdXRvU2Nyb2xsPzogYm9vbGVhbjtcbiAgICBpbnB1dFByb3BzPzogUGFydGlhbDxPbWl0PENvcGlsb3RDaGF0SW5wdXRQcm9wcywgXCJjaGlsZHJlblwiPj47XG4gICAgaXNSdW5uaW5nPzogYm9vbGVhbjtcbiAgICBzdWdnZXN0aW9ucz86IFN1Z2dlc3Rpb25bXTtcbiAgICBzdWdnZXN0aW9uTG9hZGluZ0luZGV4ZXM/OiBSZWFkb25seUFycmF5PG51bWJlcj47XG4gICAgb25TZWxlY3RTdWdnZXN0aW9uPzogKHN1Z2dlc3Rpb246IFN1Z2dlc3Rpb24sIGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgd2VsY29tZVNjcmVlbj86IFNsb3RWYWx1ZTxSZWFjdC5GQzxXZWxjb21lU2NyZWVuUHJvcHM+PiB8IGJvb2xlYW47XG4gIH0gJiBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD5cbj47XG5cbmV4cG9ydCBmdW5jdGlvbiBDb3BpbG90Q2hhdFZpZXcoe1xuICBtZXNzYWdlVmlldyxcbiAgaW5wdXQsXG4gIHNjcm9sbFZpZXcsXG4gIHNjcm9sbFRvQm90dG9tQnV0dG9uLFxuICBmZWF0aGVyLFxuICBpbnB1dENvbnRhaW5lcixcbiAgZGlzY2xhaW1lcixcbiAgc3VnZ2VzdGlvblZpZXcsXG4gIHdlbGNvbWVTY3JlZW4sXG4gIG1lc3NhZ2VzID0gW10sXG4gIGF1dG9TY3JvbGwgPSB0cnVlLFxuICBpbnB1dFByb3BzLFxuICBpc1J1bm5pbmcgPSBmYWxzZSxcbiAgc3VnZ2VzdGlvbnMsXG4gIHN1Z2dlc3Rpb25Mb2FkaW5nSW5kZXhlcyxcbiAgb25TZWxlY3RTdWdnZXN0aW9uLFxuICBjaGlsZHJlbixcbiAgY2xhc3NOYW1lLFxuICAuLi5wcm9wc1xufTogQ29waWxvdENoYXRWaWV3UHJvcHMpIHtcbiAgY29uc3QgaW5wdXRDb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBbaW5wdXRDb250YWluZXJIZWlnaHQsIHNldElucHV0Q29udGFpbmVySGVpZ2h0XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbaXNSZXNpemluZywgc2V0SXNSZXNpemluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHJlc2l6ZVRpbWVvdXRSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBUcmFjayBrZXlib2FyZCBzdGF0ZSBmb3IgbW9iaWxlXG4gIGNvbnN0IHsgaXNLZXlib2FyZE9wZW4sIGtleWJvYXJkSGVpZ2h0LCBhdmFpbGFibGVIZWlnaHQgfSA9IHVzZUtleWJvYXJkSGVpZ2h0KCk7XG5cbiAgLy8gVHJhY2sgaW5wdXQgY29udGFpbmVyIGhlaWdodCBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGlucHV0Q29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IGVudHJ5LmNvbnRlbnRSZWN0LmhlaWdodDtcblxuICAgICAgICAvLyBVcGRhdGUgaGVpZ2h0IGFuZCBzZXQgcmVzaXppbmcgc3RhdGVcbiAgICAgICAgc2V0SW5wdXRDb250YWluZXJIZWlnaHQoKHByZXZIZWlnaHQpID0+IHtcbiAgICAgICAgICBpZiAobmV3SGVpZ2h0ICE9PSBwcmV2SGVpZ2h0KSB7XG4gICAgICAgICAgICBzZXRJc1Jlc2l6aW5nKHRydWUpO1xuXG4gICAgICAgICAgICAvLyBDbGVhciBleGlzdGluZyB0aW1lb3V0XG4gICAgICAgICAgICBpZiAocmVzaXplVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXQgaXNSZXNpemluZyB0byBmYWxzZSBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgICAgICByZXNpemVUaW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2V0SXNSZXNpemluZyhmYWxzZSk7XG4gICAgICAgICAgICB9LCAyNTApO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3SGVpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHJldkhlaWdodDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpO1xuXG4gICAgLy8gU2V0IGluaXRpYWwgaGVpZ2h0XG4gICAgc2V0SW5wdXRDb250YWluZXJIZWlnaHQoZWxlbWVudC5vZmZzZXRIZWlnaHQpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIGlmIChyZXNpemVUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IEJvdW5kTWVzc2FnZVZpZXcgPSByZW5kZXJTbG90KG1lc3NhZ2VWaWV3LCBDb3BpbG90Q2hhdE1lc3NhZ2VWaWV3LCB7XG4gICAgbWVzc2FnZXMsXG4gICAgaXNSdW5uaW5nLFxuICB9KTtcblxuICBjb25zdCBCb3VuZElucHV0ID0gcmVuZGVyU2xvdChpbnB1dCwgQ29waWxvdENoYXRJbnB1dCwgKGlucHV0UHJvcHMgPz8ge30pIGFzIENvcGlsb3RDaGF0SW5wdXRQcm9wcyk7XG5cbiAgY29uc3QgaGFzU3VnZ2VzdGlvbnMgPSBBcnJheS5pc0FycmF5KHN1Z2dlc3Rpb25zKSAmJiBzdWdnZXN0aW9ucy5sZW5ndGggPiAwO1xuICBjb25zdCBCb3VuZFN1Z2dlc3Rpb25WaWV3ID0gaGFzU3VnZ2VzdGlvbnNcbiAgICA/IHJlbmRlclNsb3Qoc3VnZ2VzdGlvblZpZXcsIENvcGlsb3RDaGF0U3VnZ2VzdGlvblZpZXcsIHtcbiAgICAgICAgc3VnZ2VzdGlvbnMsXG4gICAgICAgIGxvYWRpbmdJbmRleGVzOiBzdWdnZXN0aW9uTG9hZGluZ0luZGV4ZXMsXG4gICAgICAgIG9uU2VsZWN0U3VnZ2VzdGlvbixcbiAgICAgICAgY2xhc3NOYW1lOiBcIm1iLTMgbGc6bWwtNCBsZzptci00IG1sLTAgbXItMFwiLFxuICAgICAgfSlcbiAgICA6IG51bGw7XG5cbiAgY29uc3QgQm91bmRGZWF0aGVyID0gcmVuZGVyU2xvdChmZWF0aGVyLCBDb3BpbG90Q2hhdFZpZXcuRmVhdGhlciwge30pO1xuXG4gIGNvbnN0IEJvdW5kU2Nyb2xsVmlldyA9IHJlbmRlclNsb3Qoc2Nyb2xsVmlldywgQ29waWxvdENoYXRWaWV3LlNjcm9sbFZpZXcsIHtcbiAgICBhdXRvU2Nyb2xsLFxuICAgIHNjcm9sbFRvQm90dG9tQnV0dG9uLFxuICAgIGlucHV0Q29udGFpbmVySGVpZ2h0LFxuICAgIGlzUmVzaXppbmcsXG4gICAgY2hpbGRyZW46IChcbiAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZ0JvdHRvbTogYCR7aW5wdXRDb250YWluZXJIZWlnaHQgKyAoaGFzU3VnZ2VzdGlvbnMgPyA0IDogMzIpfXB4YCB9fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0zeGwgbXgtYXV0b1wiPlxuICAgICAgICAgIHtCb3VuZE1lc3NhZ2VWaWV3fVxuICAgICAgICAgIHtoYXNTdWdnZXN0aW9ucyA/IDxkaXYgY2xhc3NOYW1lPVwicGwtMCBwci00IHNtOnB4LTAgbXQtNFwiPntCb3VuZFN1Z2dlc3Rpb25WaWV3fTwvZGl2PiA6IG51bGx9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKSxcbiAgfSk7XG5cbiAgY29uc3QgQm91bmRTY3JvbGxUb0JvdHRvbUJ1dHRvbiA9IHJlbmRlclNsb3Qoc2Nyb2xsVG9Cb3R0b21CdXR0b24sIENvcGlsb3RDaGF0Vmlldy5TY3JvbGxUb0JvdHRvbUJ1dHRvbiwge30pO1xuXG4gIGNvbnN0IEJvdW5kRGlzY2xhaW1lciA9IHJlbmRlclNsb3QoZGlzY2xhaW1lciwgQ29waWxvdENoYXRWaWV3LkRpc2NsYWltZXIsIHt9KTtcblxuICBjb25zdCBCb3VuZElucHV0Q29udGFpbmVyID0gcmVuZGVyU2xvdChpbnB1dENvbnRhaW5lciwgQ29waWxvdENoYXRWaWV3LklucHV0Q29udGFpbmVyLCB7XG4gICAgcmVmOiBpbnB1dENvbnRhaW5lclJlZixcbiAgICBrZXlib2FyZEhlaWdodDogaXNLZXlib2FyZE9wZW4gPyBrZXlib2FyZEhlaWdodCA6IDAsXG4gICAgY2hpbGRyZW46IChcbiAgICAgIDw+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctM3hsIG14LWF1dG8gcHktMCBweC00IHNtOnB4LTAgW2RpdltkYXRhLXNpZGViYXItY2hhdF1fJl06cHgtOCBbZGl2W2RhdGEtcG9wdXAtY2hhdF1fJl06cHgtNiBwb2ludGVyLWV2ZW50cy1hdXRvXCI+XG4gICAgICAgICAge0JvdW5kSW5wdXR9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7Qm91bmREaXNjbGFpbWVyfVxuICAgICAgPC8+XG4gICAgKSxcbiAgfSk7XG5cbiAgLy8gV2VsY29tZSBzY3JlZW4gbG9naWNcbiAgY29uc3QgaXNFbXB0eSA9IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMDtcbiAgLy8gVHlwZSBhc3NlcnRpb24gbmVlZGVkIGJlY2F1c2UgVHlwZVNjcmlwdCBkb2Vzbid0IGZ1bGx5IHByb3BhZ2F0ZSBgfCBib29sZWFuYCB0aHJvdWdoIFdpdGhTbG90c1xuICBjb25zdCB3ZWxjb21lU2NyZWVuRGlzYWJsZWQgPSAod2VsY29tZVNjcmVlbiBhcyB1bmtub3duKSA9PT0gZmFsc2U7XG4gIGNvbnN0IHNob3VsZFNob3dXZWxjb21lU2NyZWVuID0gaXNFbXB0eSAmJiAhd2VsY29tZVNjcmVlbkRpc2FibGVkO1xuXG4gIGlmIChzaG91bGRTaG93V2VsY29tZVNjcmVlbikge1xuICAgIC8vIENvbnZlcnQgYm9vbGVhbiBgdHJ1ZWAgdG8gdW5kZWZpbmVkICh1c2UgZGVmYXVsdCksIGFuZCBleGNsdWRlIGBmYWxzZWAgc2luY2Ugd2UndmUgY2hlY2tlZCBmb3IgaXRcbiAgICBjb25zdCB3ZWxjb21lU2NyZWVuU2xvdCA9ICh3ZWxjb21lU2NyZWVuID09PSB0cnVlID8gdW5kZWZpbmVkIDogd2VsY29tZVNjcmVlbikgYXMgU2xvdFZhbHVlPFJlYWN0LkZDPFdlbGNvbWVTY3JlZW5Qcm9wcz4+IHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IEJvdW5kV2VsY29tZVNjcmVlbiA9IHJlbmRlclNsb3QoXG4gICAgICB3ZWxjb21lU2NyZWVuU2xvdCxcbiAgICAgIENvcGlsb3RDaGF0Vmlldy5XZWxjb21lU2NyZWVuLFxuICAgICAge1xuICAgICAgICBpbnB1dDogQm91bmRJbnB1dCxcbiAgICAgICAgc3VnZ2VzdGlvblZpZXc6IEJvdW5kU3VnZ2VzdGlvblZpZXcgPz8gPD48Lz4sXG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17dHdNZXJnZShcInJlbGF0aXZlIGgtZnVsbCBmbGV4IGZsZXgtY29sXCIsIGNsYXNzTmFtZSl9IHsuLi5wcm9wc30+XG4gICAgICAgIHtCb3VuZFdlbGNvbWVTY3JlZW59XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIGNoaWxkcmVuKHtcbiAgICAgIG1lc3NhZ2VWaWV3OiBCb3VuZE1lc3NhZ2VWaWV3LFxuICAgICAgaW5wdXQ6IEJvdW5kSW5wdXQsXG4gICAgICBzY3JvbGxWaWV3OiBCb3VuZFNjcm9sbFZpZXcsXG4gICAgICBzY3JvbGxUb0JvdHRvbUJ1dHRvbjogQm91bmRTY3JvbGxUb0JvdHRvbUJ1dHRvbixcbiAgICAgIGZlYXRoZXI6IEJvdW5kRmVhdGhlcixcbiAgICAgIGlucHV0Q29udGFpbmVyOiBCb3VuZElucHV0Q29udGFpbmVyLFxuICAgICAgZGlzY2xhaW1lcjogQm91bmREaXNjbGFpbWVyLFxuICAgICAgc3VnZ2VzdGlvblZpZXc6IEJvdW5kU3VnZ2VzdGlvblZpZXcgPz8gPD48Lz4sXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXt0d01lcmdlKFwicmVsYXRpdmUgaC1mdWxsXCIsIGNsYXNzTmFtZSl9IHsuLi5wcm9wc30+XG4gICAgICB7Qm91bmRTY3JvbGxWaWV3fVxuXG4gICAgICB7Qm91bmRGZWF0aGVyfVxuXG4gICAgICB7Qm91bmRJbnB1dENvbnRhaW5lcn1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb3BpbG90Q2hhdFZpZXcge1xuICAvLyBJbm5lciBjb21wb25lbnQgdGhhdCBoYXMgYWNjZXNzIHRvIFN0aWNrVG9Cb3R0b20gY29udGV4dFxuICBjb25zdCBTY3JvbGxDb250ZW50OiBSZWFjdC5GQzx7XG4gICAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgICBzY3JvbGxUb0JvdHRvbUJ1dHRvbj86IFNsb3RWYWx1ZTxSZWFjdC5GQzxSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4+PjtcbiAgICBpbnB1dENvbnRhaW5lckhlaWdodDogbnVtYmVyO1xuICAgIGlzUmVzaXppbmc6IGJvb2xlYW47XG4gIH0+ID0gKHsgY2hpbGRyZW4sIHNjcm9sbFRvQm90dG9tQnV0dG9uLCBpbnB1dENvbnRhaW5lckhlaWdodCwgaXNSZXNpemluZyB9KSA9PiB7XG4gICAgY29uc3QgeyBpc0F0Qm90dG9tLCBzY3JvbGxUb0JvdHRvbSB9ID0gdXNlU3RpY2tUb0JvdHRvbUNvbnRleHQoKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8U3RpY2tUb0JvdHRvbS5Db250ZW50IGNsYXNzTmFtZT1cIm92ZXJmbG93LXktc2Nyb2xsIG92ZXJmbG93LXgtaGlkZGVuXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBzbTpweC0wIFtkaXZbZGF0YS1zaWRlYmFyLWNoYXRdXyZdOnB4LTggW2RpdltkYXRhLXBvcHVwLWNoYXRdXyZdOnB4LTZcIj57Y2hpbGRyZW59PC9kaXY+XG4gICAgICAgIDwvU3RpY2tUb0JvdHRvbS5Db250ZW50PlxuXG4gICAgICAgIHsvKiBTY3JvbGwgdG8gYm90dG9tIGJ1dHRvbiAtIGhpZGRlbiBkdXJpbmcgcmVzaXplICovfVxuICAgICAgICB7IWlzQXRCb3R0b20gJiYgIWlzUmVzaXppbmcgJiYgKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LXgtMCBmbGV4IGp1c3RpZnktY2VudGVyIHotMTAgcG9pbnRlci1ldmVudHMtbm9uZVwiXG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBib3R0b206IGAke2lucHV0Q29udGFpbmVySGVpZ2h0ICsgMTZ9cHhgLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cmVuZGVyU2xvdChzY3JvbGxUb0JvdHRvbUJ1dHRvbiwgQ29waWxvdENoYXRWaWV3LlNjcm9sbFRvQm90dG9tQnV0dG9uLCB7XG4gICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHNjcm9sbFRvQm90dG9tKCksXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvPlxuICAgICk7XG4gIH07XG5cbiAgZXhwb3J0IGNvbnN0IFNjcm9sbFZpZXc6IFJlYWN0LkZDPFxuICAgIFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50PiAmIHtcbiAgICAgIGF1dG9TY3JvbGw/OiBib29sZWFuO1xuICAgICAgc2Nyb2xsVG9Cb3R0b21CdXR0b24/OiBTbG90VmFsdWU8UmVhY3QuRkM8UmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+Pj47XG4gICAgICBpbnB1dENvbnRhaW5lckhlaWdodD86IG51bWJlcjtcbiAgICAgIGlzUmVzaXppbmc/OiBib29sZWFuO1xuICAgIH1cbiAgPiA9ICh7XG4gICAgY2hpbGRyZW4sXG4gICAgYXV0b1Njcm9sbCA9IHRydWUsXG4gICAgc2Nyb2xsVG9Cb3R0b21CdXR0b24sXG4gICAgaW5wdXRDb250YWluZXJIZWlnaHQgPSAwLFxuICAgIGlzUmVzaXppbmcgPSBmYWxzZSxcbiAgICBjbGFzc05hbWUsXG4gICAgLi4ucHJvcHNcbiAgfSkgPT4ge1xuICAgIGNvbnN0IFtoYXNNb3VudGVkLCBzZXRIYXNNb3VudGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCB7IHNjcm9sbFJlZiwgY29udGVudFJlZiwgc2Nyb2xsVG9Cb3R0b20gfSA9IHVzZVN0aWNrVG9Cb3R0b20oKTtcbiAgICBjb25zdCBbc2hvd1Njcm9sbEJ1dHRvbiwgc2V0U2hvd1Njcm9sbEJ1dHRvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgc2V0SGFzTW91bnRlZCh0cnVlKTtcbiAgICB9LCBbXSk7XG5cbiAgICAvLyBNb25pdG9yIHNjcm9sbCBwb3NpdGlvbiBmb3Igbm9uLWF1dG9zY3JvbGwgbW9kZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoYXV0b1Njcm9sbCkgcmV0dXJuOyAvLyBTa2lwIGZvciBhdXRvc2Nyb2xsIG1vZGVcblxuICAgICAgY29uc3Qgc2Nyb2xsRWxlbWVudCA9IHNjcm9sbFJlZi5jdXJyZW50O1xuICAgICAgaWYgKCFzY3JvbGxFbGVtZW50KSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGNoZWNrU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhdEJvdHRvbSA9IHNjcm9sbEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AgLSBzY3JvbGxFbGVtZW50LmNsaWVudEhlaWdodCA8IDEwO1xuICAgICAgICBzZXRTaG93U2Nyb2xsQnV0dG9uKCFhdEJvdHRvbSk7XG4gICAgICB9O1xuXG4gICAgICBjaGVja1Njcm9sbCgpO1xuICAgICAgc2Nyb2xsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGNoZWNrU2Nyb2xsKTtcblxuICAgICAgLy8gQWxzbyBjaGVjayBvbiByZXNpemVcbiAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGNoZWNrU2Nyb2xsKTtcbiAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoc2Nyb2xsRWxlbWVudCk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHNjcm9sbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBjaGVja1Njcm9sbCk7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH07XG4gICAgfSwgW3Njcm9sbFJlZiwgYXV0b1Njcm9sbF0pO1xuXG4gICAgaWYgKCFoYXNNb3VudGVkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBtYXgtaC1mdWxsIGZsZXggZmxleC1jb2wgbWluLWgtMCBvdmVyZmxvdy15LXNjcm9sbCBvdmVyZmxvdy14LWhpZGRlblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBzbTpweC0wIFtkaXZbZGF0YS1zaWRlYmFyLWNoYXRdXyZdOnB4LTggW2RpdltkYXRhLXBvcHVwLWNoYXRdXyZdOnB4LTZcIj57Y2hpbGRyZW59PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIGF1dG9TY3JvbGwgaXMgZmFsc2UsIHdlIGRvbid0IHVzZSBTdGlja1RvQm90dG9tXG4gICAgaWYgKCFhdXRvU2Nyb2xsKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgcmVmPXtzY3JvbGxSZWZ9XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgIFwiaC1mdWxsIG1heC1oLWZ1bGwgZmxleCBmbGV4LWNvbCBtaW4taC0wIG92ZXJmbG93LXktc2Nyb2xsIG92ZXJmbG93LXgtaGlkZGVuIHJlbGF0aXZlXCIsXG4gICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgKX1cbiAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IHJlZj17Y29udGVudFJlZn0gY2xhc3NOYW1lPVwicHgtNCBzbTpweC0wIFtkaXZbZGF0YS1zaWRlYmFyLWNoYXRdXyZdOnB4LTggW2RpdltkYXRhLXBvcHVwLWNoYXRdXyZdOnB4LTZcIj5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBTY3JvbGwgdG8gYm90dG9tIGJ1dHRvbiBmb3IgbWFudWFsIG1vZGUgKi99XG4gICAgICAgICAge3Nob3dTY3JvbGxCdXR0b24gJiYgIWlzUmVzaXppbmcgJiYgKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC14LTAgZmxleCBqdXN0aWZ5LWNlbnRlciB6LTEwIHBvaW50ZXItZXZlbnRzLW5vbmVcIlxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIGJvdHRvbTogYCR7aW5wdXRDb250YWluZXJIZWlnaHQgKyAxNn1weGAsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtyZW5kZXJTbG90KHNjcm9sbFRvQm90dG9tQnV0dG9uLCBDb3BpbG90Q2hhdFZpZXcuU2Nyb2xsVG9Cb3R0b21CdXR0b24sIHtcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBzY3JvbGxUb0JvdHRvbSgpLFxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFN0aWNrVG9Cb3R0b21cbiAgICAgICAgY2xhc3NOYW1lPXtjbihcImgtZnVsbCBtYXgtaC1mdWxsIGZsZXggZmxleC1jb2wgbWluLWgtMCByZWxhdGl2ZVwiLCBjbGFzc05hbWUpfVxuICAgICAgICByZXNpemU9XCJzbW9vdGhcIlxuICAgICAgICBpbml0aWFsPVwic21vb3RoXCJcbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgPlxuICAgICAgICA8U2Nyb2xsQ29udGVudFxuICAgICAgICAgIHNjcm9sbFRvQm90dG9tQnV0dG9uPXtzY3JvbGxUb0JvdHRvbUJ1dHRvbn1cbiAgICAgICAgICBpbnB1dENvbnRhaW5lckhlaWdodD17aW5wdXRDb250YWluZXJIZWlnaHR9XG4gICAgICAgICAgaXNSZXNpemluZz17aXNSZXNpemluZ31cbiAgICAgICAgPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9TY3JvbGxDb250ZW50PlxuICAgICAgPC9TdGlja1RvQm90dG9tPlxuICAgICk7XG4gIH07XG5cbiAgZXhwb3J0IGNvbnN0IFNjcm9sbFRvQm90dG9tQnV0dG9uOiBSZWFjdC5GQzxSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4+ID0gKHtcbiAgICBjbGFzc05hbWUsXG4gICAgLi4ucHJvcHNcbiAgfSkgPT4gKFxuICAgIDxCdXR0b25cbiAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgIHNpemU9XCJzbVwiXG4gICAgICBjbGFzc05hbWU9e3R3TWVyZ2UoXG4gICAgICAgIFwicm91bmRlZC1mdWxsIHctMTAgaC0xMCBwLTAgcG9pbnRlci1ldmVudHMtYXV0b1wiLFxuICAgICAgICBcImJnLXdoaXRlIGRhcms6YmctZ3JheS05MDBcIixcbiAgICAgICAgXCJzaGFkb3ctbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMFwiLFxuICAgICAgICBcImhvdmVyOmJnLWdyYXktNTAgZGFyazpob3ZlcjpiZy1ncmF5LTgwMFwiLFxuICAgICAgICBcImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGN1cnNvci1wb2ludGVyXCIsXG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICl9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgPlxuICAgICAgPENoZXZyb25Eb3duIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTYwMCBkYXJrOnRleHQtd2hpdGVcIiAvPlxuICAgIDwvQnV0dG9uPlxuICApO1xuXG4gIGV4cG9ydCBjb25zdCBGZWF0aGVyOiBSZWFjdC5GQzxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4+ID0gKHsgY2xhc3NOYW1lLCBzdHlsZSwgLi4ucHJvcHMgfSkgPT4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgIFwiYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTQgaC0yNCBwb2ludGVyLWV2ZW50cy1ub25lIHotMTAgYmctZ3JhZGllbnQtdG8tdFwiLFxuICAgICAgICBcImZyb20td2hpdGUgdmlhLXdoaXRlIHRvLXRyYW5zcGFyZW50XCIsXG4gICAgICAgIFwiZGFyazpmcm9tLVtyZ2IoMzMsMzMsMzMpXSBkYXJrOnZpYS1bcmdiKDMzLDMzLDMzKV1cIixcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgKX1cbiAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgIHsuLi5wcm9wc31cbiAgICAvPlxuICApO1xuXG4gIGV4cG9ydCBjb25zdCBJbnB1dENvbnRhaW5lciA9IFJlYWN0LmZvcndhcmRSZWY8XG4gICAgSFRNTERpdkVsZW1lbnQsXG4gICAgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+ICYgeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlOyBrZXlib2FyZEhlaWdodD86IG51bWJlciB9XG4gID4oKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSwga2V5Ym9hcmRIZWlnaHQgPSAwLCAuLi5wcm9wcyB9LCByZWYpID0+IChcbiAgICA8ZGl2XG4gICAgICByZWY9e3JlZn1cbiAgICAgIGNsYXNzTmFtZT17Y24oXCJhYnNvbHV0ZSBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCB6LTIwIHBvaW50ZXItZXZlbnRzLW5vbmVcIiwgY2xhc3NOYW1lKX1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIC8vIEFkanVzdCBwb3NpdGlvbiB3aGVuIGtleWJvYXJkIGlzIG9wZW4gdG8ga2VlcCBpbnB1dCB2aXNpYmxlXG4gICAgICAgIHRyYW5zZm9ybToga2V5Ym9hcmRIZWlnaHQgPiAwID8gYHRyYW5zbGF0ZVkoLSR7a2V5Ym9hcmRIZWlnaHR9cHgpYCA6IHVuZGVmaW5lZCxcbiAgICAgICAgdHJhbnNpdGlvbjogXCJ0cmFuc2Zvcm0gMC4ycyBlYXNlLW91dFwiLFxuICAgICAgfX1cbiAgICAgIHsuLi5wcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICkpO1xuXG4gIElucHV0Q29udGFpbmVyLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdFZpZXcuSW5wdXRDb250YWluZXJcIjtcblxuICBleHBvcnQgY29uc3QgRGlzY2xhaW1lcjogUmVhY3QuRkM8UmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+PiA9ICh7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbmZpZz8ubGFiZWxzID8/IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y24oXCJ0ZXh0LWNlbnRlciB0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBweS0zIHB4LTQgbWF4LXctM3hsIG14LWF1dG9cIiwgY2xhc3NOYW1lKX1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgPlxuICAgICAgICB7bGFiZWxzLmNoYXREaXNjbGFpbWVyVGV4dH1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgZXhwb3J0IGNvbnN0IFdlbGNvbWVNZXNzYWdlOiBSZWFjdC5GQzxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4+ID0gKHtcbiAgICBjbGFzc05hbWUsXG4gICAgLi4ucHJvcHNcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbigpO1xuICAgIGNvbnN0IGxhYmVscyA9IGNvbmZpZz8ubGFiZWxzID8/IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscztcblxuICAgIHJldHVybiAoXG4gICAgICA8aDFcbiAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICBcInRleHQteGwgc206dGV4dC0yeGwgZm9udC1tZWRpdW0gdGV4dC1mb3JlZ3JvdW5kIHRleHQtY2VudGVyXCIsXG4gICAgICAgICAgY2xhc3NOYW1lXG4gICAgICAgICl9XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgID5cbiAgICAgICAge2xhYmVscy53ZWxjb21lTWVzc2FnZVRleHR9XG4gICAgICA8L2gxPlxuICAgICk7XG4gIH07XG5cbiAgZXhwb3J0IGNvbnN0IFdlbGNvbWVTY3JlZW46IFJlYWN0LkZDPFdlbGNvbWVTY3JlZW5Qcm9wcz4gPSAoe1xuICAgIHdlbGNvbWVNZXNzYWdlLFxuICAgIGlucHV0LFxuICAgIHN1Z2dlc3Rpb25WaWV3LFxuICAgIGNsYXNzTmFtZSxcbiAgICBjaGlsZHJlbixcbiAgICAuLi5wcm9wc1xuICB9KSA9PiB7XG4gICAgLy8gUmVuZGVyIHRoZSB3ZWxjb21lTWVzc2FnZSBzbG90IGludGVybmFsbHlcbiAgICBjb25zdCBCb3VuZFdlbGNvbWVNZXNzYWdlID0gcmVuZGVyU2xvdChcbiAgICAgIHdlbGNvbWVNZXNzYWdlLFxuICAgICAgQ29waWxvdENoYXRWaWV3LldlbGNvbWVNZXNzYWdlLFxuICAgICAge31cbiAgICApO1xuXG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgIHtjaGlsZHJlbih7XG4gICAgICAgICAgICB3ZWxjb21lTWVzc2FnZTogQm91bmRXZWxjb21lTWVzc2FnZSxcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgc3VnZ2VzdGlvblZpZXcsXG4gICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgXCJmbGV4LTEgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtNFwiLFxuICAgICAgICAgIGNsYXNzTmFtZVxuICAgICAgICApfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LTN4bCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIHsvKiBXZWxjb21lIG1lc3NhZ2UgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgICB7Qm91bmRXZWxjb21lTWVzc2FnZX1cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBJbnB1dCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbFwiPlxuICAgICAgICAgICAge2lucHV0fVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIFN1Z2dlc3Rpb25zICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNCBmbGV4IGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICB7c3VnZ2VzdGlvblZpZXd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29waWxvdENoYXRWaWV3O1xuIiwiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEtleWJvYXJkU3RhdGUge1xuICBpc0tleWJvYXJkT3BlbjogYm9vbGVhbjtcbiAga2V5Ym9hcmRIZWlnaHQ6IG51bWJlcjtcbiAgYXZhaWxhYmxlSGVpZ2h0OiBudW1iZXI7XG4gIHZpZXdwb3J0SGVpZ2h0OiBudW1iZXI7XG59XG5cbi8qKlxuICogSG9vayB0byBkZXRlY3QgbW9iaWxlIGtleWJvYXJkIGFwcGVhcmFuY2UgYW5kIGNhbGN1bGF0ZSBhdmFpbGFibGUgdmlld3BvcnQgaGVpZ2h0LlxuICogVXNlcyB0aGUgVmlzdWFsIFZpZXdwb3J0IEFQSSB0byB0cmFjayBrZXlib2FyZCBzdGF0ZSBvbiBtb2JpbGUgZGV2aWNlcy5cbiAqXG4gKiBAcmV0dXJucyBLZXlib2FyZFN0YXRlIG9iamVjdCB3aXRoIGtleWJvYXJkIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VLZXlib2FyZEhlaWdodCgpOiBLZXlib2FyZFN0YXRlIHtcbiAgY29uc3QgW2tleWJvYXJkU3RhdGUsIHNldEtleWJvYXJkU3RhdGVdID0gdXNlU3RhdGU8S2V5Ym9hcmRTdGF0ZT4oe1xuICAgIGlzS2V5Ym9hcmRPcGVuOiBmYWxzZSxcbiAgICBrZXlib2FyZEhlaWdodDogMCxcbiAgICBhdmFpbGFibGVIZWlnaHQ6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiAwLFxuICAgIHZpZXdwb3J0SGVpZ2h0OiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93LmlubmVySGVpZ2h0IDogMCxcbiAgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIFZpc3VhbCBWaWV3cG9ydCBBUEkgaXMgYXZhaWxhYmxlXG4gICAgY29uc3QgdmlzdWFsVmlld3BvcnQgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQ7XG4gICAgaWYgKCF2aXN1YWxWaWV3cG9ydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZUtleWJvYXJkU3RhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBsYXlvdXRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICBjb25zdCB2aXN1YWxIZWlnaHQgPSB2aXN1YWxWaWV3cG9ydC5oZWlnaHQ7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBrZXlib2FyZCBoZWlnaHQgKGRpZmZlcmVuY2UgYmV0d2VlbiBsYXlvdXQgYW5kIHZpc3VhbCB2aWV3cG9ydClcbiAgICAgIGNvbnN0IGtleWJvYXJkSGVpZ2h0ID0gTWF0aC5tYXgoMCwgbGF5b3V0SGVpZ2h0IC0gdmlzdWFsSGVpZ2h0KTtcblxuICAgICAgLy8gS2V5Ym9hcmQgaXMgY29uc2lkZXJlZCBvcGVuIGlmIHRoZSBoZWlnaHQgZGlmZmVyZW5jZSBpcyBzaWduaWZpY2FudCAoPiAxNTBweClcbiAgICAgIGNvbnN0IGlzS2V5Ym9hcmRPcGVuID0ga2V5Ym9hcmRIZWlnaHQgPiAxNTA7XG5cbiAgICAgIHNldEtleWJvYXJkU3RhdGUoe1xuICAgICAgICBpc0tleWJvYXJkT3BlbixcbiAgICAgICAga2V5Ym9hcmRIZWlnaHQsXG4gICAgICAgIGF2YWlsYWJsZUhlaWdodDogdmlzdWFsSGVpZ2h0LFxuICAgICAgICB2aWV3cG9ydEhlaWdodDogbGF5b3V0SGVpZ2h0LFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEluaXRpYWwgc3RhdGVcbiAgICB1cGRhdGVLZXlib2FyZFN0YXRlKCk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHZpZXdwb3J0IGNoYW5nZXNcbiAgICB2aXN1YWxWaWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUtleWJvYXJkU3RhdGUpO1xuICAgIHZpc3VhbFZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdXBkYXRlS2V5Ym9hcmRTdGF0ZSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdmlzdWFsVmlld3BvcnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVLZXlib2FyZFN0YXRlKTtcbiAgICAgIHZpc3VhbFZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdXBkYXRlS2V5Ym9hcmRTdGF0ZSk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBrZXlib2FyZFN0YXRlO1xufVxuIiwiaW1wb3J0IHsgdXNlQWdlbnQgfSBmcm9tIFwiQC9ob29rcy91c2UtYWdlbnRcIjtcbmltcG9ydCB7IHVzZVN1Z2dlc3Rpb25zIH0gZnJvbSBcIkAvaG9va3MvdXNlLXN1Z2dlc3Rpb25zXCI7XG5pbXBvcnQgeyBDb3BpbG90Q2hhdFZpZXcsIENvcGlsb3RDaGF0Vmlld1Byb3BzIH0gZnJvbSBcIi4vQ29waWxvdENoYXRWaWV3XCI7XG5pbXBvcnQgQ29waWxvdENoYXRJbnB1dCwgeyBDb3BpbG90Q2hhdElucHV0UHJvcHMsIENvcGlsb3RDaGF0SW5wdXRNb2RlIH0gZnJvbSBcIi4vQ29waWxvdENoYXRJbnB1dFwiO1xuaW1wb3J0IHtcbiAgQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXIsXG4gIENvcGlsb3RDaGF0TGFiZWxzLFxuICB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24sXG59IGZyb20gXCJAL3Byb3ZpZGVycy9Db3BpbG90Q2hhdENvbmZpZ3VyYXRpb25Qcm92aWRlclwiO1xuaW1wb3J0IHsgREVGQVVMVF9BR0VOVF9JRCwgcmFuZG9tVVVJRCwgVHJhbnNjcmlwdGlvbkVycm9yQ29kZSB9IGZyb20gXCJAY29waWxvdGtpdG5leHQvc2hhcmVkXCI7XG5pbXBvcnQgeyBTdWdnZXN0aW9uLCBDb3BpbG90S2l0Q29yZUVycm9yQ29kZSB9IGZyb20gXCJAY29waWxvdGtpdG5leHQvY29yZVwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IG1lcmdlIH0gZnJvbSBcInRzLWRlZXBtZXJnZVwiO1xuaW1wb3J0IHsgdXNlQ29waWxvdEtpdCB9IGZyb20gXCJAL3Byb3ZpZGVycy9Db3BpbG90S2l0UHJvdmlkZXJcIjtcbmltcG9ydCB7IEFic3RyYWN0QWdlbnQsIEFHVUlDb25uZWN0Tm90SW1wbGVtZW50ZWRFcnJvciB9IGZyb20gXCJAYWctdWkvY2xpZW50XCI7XG5pbXBvcnQgeyByZW5kZXJTbG90LCBTbG90VmFsdWUgfSBmcm9tIFwiQC9saWIvc2xvdHNcIjtcbmltcG9ydCB7IHRyYW5zY3JpYmVBdWRpbywgVHJhbnNjcmlwdGlvbkVycm9yIH0gZnJvbSBcIkAvbGliL3RyYW5zY3JpcHRpb24tY2xpZW50XCI7XG5cbmV4cG9ydCB0eXBlIENvcGlsb3RDaGF0UHJvcHMgPSBPbWl0PFxuICBDb3BpbG90Q2hhdFZpZXdQcm9wcyxcbiAgXCJtZXNzYWdlc1wiIHwgXCJpc1J1bm5pbmdcIiB8IFwic3VnZ2VzdGlvbnNcIiB8IFwic3VnZ2VzdGlvbkxvYWRpbmdJbmRleGVzXCIgfCBcIm9uU2VsZWN0U3VnZ2VzdGlvblwiXG4+ICYge1xuICBhZ2VudElkPzogc3RyaW5nO1xuICB0aHJlYWRJZD86IHN0cmluZztcbiAgbGFiZWxzPzogUGFydGlhbDxDb3BpbG90Q2hhdExhYmVscz47XG4gIGNoYXRWaWV3PzogU2xvdFZhbHVlPHR5cGVvZiBDb3BpbG90Q2hhdFZpZXc+O1xuICBpc01vZGFsRGVmYXVsdE9wZW4/OiBib29sZWFuO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBDb3BpbG90Q2hhdCh7IGFnZW50SWQsIHRocmVhZElkLCBsYWJlbHMsIGNoYXRWaWV3LCBpc01vZGFsRGVmYXVsdE9wZW4sIC4uLnByb3BzIH06IENvcGlsb3RDaGF0UHJvcHMpIHtcbiAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb24gcHJvdmlkZXJcbiAgY29uc3QgZXhpc3RpbmdDb25maWcgPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcblxuICAvLyBBcHBseSBwcmlvcml0eTogcHJvcHMgPiBleGlzdGluZyBjb25maWcgPiBkZWZhdWx0c1xuICBjb25zdCByZXNvbHZlZEFnZW50SWQgPSBhZ2VudElkID8/IGV4aXN0aW5nQ29uZmlnPy5hZ2VudElkID8/IERFRkFVTFRfQUdFTlRfSUQ7XG4gIGNvbnN0IHJlc29sdmVkVGhyZWFkSWQgPSB1c2VNZW1vKFxuICAgICgpID0+IHRocmVhZElkID8/IGV4aXN0aW5nQ29uZmlnPy50aHJlYWRJZCA/PyByYW5kb21VVUlEKCksXG4gICAgW3RocmVhZElkLCBleGlzdGluZ0NvbmZpZz8udGhyZWFkSWRdLFxuICApO1xuXG4gIGNvbnN0IHsgYWdlbnQgfSA9IHVzZUFnZW50KHsgYWdlbnRJZDogcmVzb2x2ZWRBZ2VudElkIH0pO1xuICBjb25zdCB7IGNvcGlsb3RraXQgfSA9IHVzZUNvcGlsb3RLaXQoKTtcbiAgY29uc3QgeyBzdWdnZXN0aW9uczogYXV0b1N1Z2dlc3Rpb25zIH0gPSB1c2VTdWdnZXN0aW9ucyh7IGFnZW50SWQ6IHJlc29sdmVkQWdlbnRJZCB9KTtcblxuICAvLyBUcmFuc2NyaXB0aW9uIHN0YXRlXG4gIGNvbnN0IFt0cmFuc2NyaWJlTW9kZSwgc2V0VHJhbnNjcmliZU1vZGVdID0gdXNlU3RhdGU8Q29waWxvdENoYXRJbnB1dE1vZGU+KFwiaW5wdXRcIik7XG4gIGNvbnN0IFtpbnB1dFZhbHVlLCBzZXRJbnB1dFZhbHVlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdHJhbnNjcmlwdGlvbkVycm9yLCBzZXRUcmFuc2NyaXB0aW9uRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc1RyYW5zY3JpYmluZywgc2V0SXNUcmFuc2NyaWJpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIENoZWNrIGlmIHRyYW5zY3JpcHRpb24gaXMgZW5hYmxlZFxuICBjb25zdCBpc1RyYW5zY3JpcHRpb25FbmFibGVkID0gY29waWxvdGtpdC5hdWRpb0ZpbGVUcmFuc2NyaXB0aW9uRW5hYmxlZDtcblxuICAvLyBDaGVjayBpZiBicm93c2VyIHN1cHBvcnRzIE1lZGlhUmVjb3JkZXJcbiAgY29uc3QgaXNNZWRpYVJlY29yZGVyU3VwcG9ydGVkID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgTWVkaWFSZWNvcmRlciAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICBjb25zdCB7XG4gICAgaW5wdXRQcm9wczogcHJvdmlkZWRJbnB1dFByb3BzLFxuICAgIG1lc3NhZ2VWaWV3OiBwcm92aWRlZE1lc3NhZ2VWaWV3LFxuICAgIHN1Z2dlc3Rpb25WaWV3OiBwcm92aWRlZFN1Z2dlc3Rpb25WaWV3LFxuICAgIC4uLnJlc3RQcm9wc1xuICB9ID0gcHJvcHM7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjb25uZWN0ID0gYXN5bmMgKGFnZW50OiBBYnN0cmFjdEFnZW50KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjb3BpbG90a2l0LmNvbm5lY3RBZ2VudCh7IGFnZW50IH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQUdVSUNvbm5lY3ROb3RJbXBsZW1lbnRlZEVycm9yKSB7XG4gICAgICAgICAgLy8gY29ubmVjdCBub3QgaW1wbGVtZW50ZWQsIGlnbm9yZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBhZ2VudC50aHJlYWRJZCA9IHJlc29sdmVkVGhyZWFkSWQ7XG4gICAgY29ubmVjdChhZ2VudCk7XG4gICAgcmV0dXJuICgpID0+IHt9O1xuICB9LCBbcmVzb2x2ZWRUaHJlYWRJZCwgYWdlbnQsIGNvcGlsb3RraXQsIHJlc29sdmVkQWdlbnRJZF0pO1xuXG4gIGNvbnN0IG9uU3VibWl0SW5wdXQgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgYWdlbnQuYWRkTWVzc2FnZSh7XG4gICAgICAgIGlkOiByYW5kb21VVUlEKCksXG4gICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICBjb250ZW50OiB2YWx1ZSxcbiAgICAgIH0pO1xuICAgICAgLy8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc3VibWl0dGluZ1xuICAgICAgc2V0SW5wdXRWYWx1ZShcIlwiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvcGlsb3RraXQucnVuQWdlbnQoeyBhZ2VudCB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3BpbG90Q2hhdDogcnVuQWdlbnQgZmFpbGVkXCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFthZ2VudCwgY29waWxvdGtpdF0sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0U3VnZ2VzdGlvbiA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChzdWdnZXN0aW9uOiBTdWdnZXN0aW9uKSA9PiB7XG4gICAgICBhZ2VudC5hZGRNZXNzYWdlKHtcbiAgICAgICAgaWQ6IHJhbmRvbVVVSUQoKSxcbiAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgIGNvbnRlbnQ6IHN1Z2dlc3Rpb24ubWVzc2FnZSxcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjb3BpbG90a2l0LnJ1bkFnZW50KHsgYWdlbnQgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ29waWxvdENoYXQ6IHJ1bkFnZW50IGZhaWxlZCBhZnRlciBzZWxlY3Rpbmcgc3VnZ2VzdGlvblwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBbYWdlbnQsIGNvcGlsb3RraXRdLFxuICApO1xuXG4gIGNvbnN0IHN0b3BDdXJyZW50UnVuID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb3BpbG90a2l0LnN0b3BBZ2VudCh7IGFnZW50IH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ29waWxvdENoYXQ6IHN0b3BBZ2VudCBmYWlsZWRcIiwgZXJyb3IpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYWdlbnQuYWJvcnRSdW4oKTtcbiAgICAgIH0gY2F0Y2ggKGFib3J0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNvcGlsb3RDaGF0OiBhYm9ydFJ1biBmYWxsYmFjayBmYWlsZWRcIiwgYWJvcnRFcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbYWdlbnQsIGNvcGlsb3RraXRdKTtcblxuICAvLyBUcmFuc2NyaXB0aW9uIGhhbmRsZXJzXG4gIGNvbnN0IGhhbmRsZVN0YXJ0VHJhbnNjcmliZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRUcmFuc2NyaXB0aW9uRXJyb3IobnVsbCk7XG4gICAgc2V0VHJhbnNjcmliZU1vZGUoXCJ0cmFuc2NyaWJlXCIpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlQ2FuY2VsVHJhbnNjcmliZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRUcmFuc2NyaXB0aW9uRXJyb3IobnVsbCk7XG4gICAgc2V0VHJhbnNjcmliZU1vZGUoXCJpbnB1dFwiKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbmlzaFRyYW5zY3JpYmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0VHJhbnNjcmliZU1vZGUoXCJpbnB1dFwiKTtcbiAgfSwgW10pO1xuXG4gIC8vIEhhbmRsZSBhdWRpbyBibG9iIGZyb20gQ29waWxvdENoYXRJbnB1dCBhbmQgdHJhbnNjcmliZSBpdFxuICBjb25zdCBoYW5kbGVGaW5pc2hUcmFuc2NyaWJlV2l0aEF1ZGlvID0gdXNlQ2FsbGJhY2soYXN5bmMgKGF1ZGlvQmxvYjogQmxvYikgPT4ge1xuICAgIHNldElzVHJhbnNjcmliaW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBzZXRUcmFuc2NyaXB0aW9uRXJyb3IobnVsbCk7XG5cbiAgICAgIC8vIFNlbmQgdG8gdHJhbnNjcmlwdGlvbiBlbmRwb2ludFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNjcmliZUF1ZGlvKGNvcGlsb3RraXQsIGF1ZGlvQmxvYik7XG5cbiAgICAgIC8vIEluc2VydCB0cmFuc2NyaWJlZCB0ZXh0IGludG8gaW5wdXRcbiAgICAgIHNldElucHV0VmFsdWUoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgdHJpbW1lZFByZXYgPSBwcmV2LnRyaW0oKTtcbiAgICAgICAgaWYgKHRyaW1tZWRQcmV2KSB7XG4gICAgICAgICAgcmV0dXJuIGAke3RyaW1tZWRQcmV2fSAke3Jlc3VsdC50ZXh0fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC50ZXh0O1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3BpbG90Q2hhdDogVHJhbnNjcmlwdGlvbiBmYWlsZWRcIiwgZXJyb3IpO1xuXG4gICAgICAvLyBTaG93IGNvbnRleHR1YWwgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiBlcnJvciB0eXBlXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUcmFuc2NyaXB0aW9uRXJyb3IpIHtcbiAgICAgICAgY29uc3QgeyBjb2RlLCByZXRyeWFibGUsIG1lc3NhZ2UgfSA9IGVycm9yLmluZm87XG4gICAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICAgIGNhc2UgVHJhbnNjcmlwdGlvbkVycm9yQ29kZS5SQVRFX0xJTUlURUQ6XG4gICAgICAgICAgICBzZXRUcmFuc2NyaXB0aW9uRXJyb3IoXCJUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHdhaXQgYSBtb21lbnQuXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLkFVVEhfRkFJTEVEOlxuICAgICAgICAgICAgc2V0VHJhbnNjcmlwdGlvbkVycm9yKFwiQXV0aGVudGljYXRpb24gZXJyb3IuIFBsZWFzZSBjaGVjayB5b3VyIGNvbmZpZ3VyYXRpb24uXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLkFVRElPX1RPT19MT05HOlxuICAgICAgICAgICAgc2V0VHJhbnNjcmlwdGlvbkVycm9yKFwiUmVjb3JkaW5nIGlzIHRvbyBsb25nLiBQbGVhc2UgdHJ5IGEgc2hvcnRlciByZWNvcmRpbmcuXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLkFVRElPX1RPT19TSE9SVDpcbiAgICAgICAgICAgIHNldFRyYW5zY3JpcHRpb25FcnJvcihcIlJlY29yZGluZyBpcyB0b28gc2hvcnQuIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLklOVkFMSURfQVVESU9fRk9STUFUOlxuICAgICAgICAgICAgc2V0VHJhbnNjcmlwdGlvbkVycm9yKFwiQXVkaW8gZm9ybWF0IG5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLlNFUlZJQ0VfTk9UX0NPTkZJR1VSRUQ6XG4gICAgICAgICAgICBzZXRUcmFuc2NyaXB0aW9uRXJyb3IoXCJUcmFuc2NyaXB0aW9uIHNlcnZpY2UgaXMgbm90IGF2YWlsYWJsZS5cIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFRyYW5zY3JpcHRpb25FcnJvckNvZGUuTkVUV09SS19FUlJPUjpcbiAgICAgICAgICAgIHNldFRyYW5zY3JpcHRpb25FcnJvcihcIk5ldHdvcmsgZXJyb3IuIFBsZWFzZSBjaGVjayB5b3VyIGNvbm5lY3Rpb24uXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIEZvciByZXRyeWFibGUgZXJyb3JzLCBzaG93IG1vcmUgaGVscGZ1bCBtZXNzYWdlXG4gICAgICAgICAgICBzZXRUcmFuc2NyaXB0aW9uRXJyb3IoXG4gICAgICAgICAgICAgIHJldHJ5YWJsZVxuICAgICAgICAgICAgICAgID8gXCJUcmFuc2NyaXB0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIlxuICAgICAgICAgICAgICAgIDogbWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgZm9yIHVuZXhwZWN0ZWQgZXJyb3JzXG4gICAgICAgIHNldFRyYW5zY3JpcHRpb25FcnJvcihcIlRyYW5zY3JpcHRpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNUcmFuc2NyaWJpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2NvcGlsb3RraXRdKTtcblxuICAvLyBDbGVhciB0cmFuc2NyaXB0aW9uIGVycm9yIGFmdGVyIGEgZGVsYXlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHJhbnNjcmlwdGlvbkVycm9yKSB7XG4gICAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRUcmFuc2NyaXB0aW9uRXJyb3IobnVsbCk7XG4gICAgICB9LCA1MDAwKTtcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgIH1cbiAgfSwgW3RyYW5zY3JpcHRpb25FcnJvcl0pO1xuXG4gIGNvbnN0IG1lcmdlZFByb3BzID0gbWVyZ2UoXG4gICAge1xuICAgICAgaXNSdW5uaW5nOiBhZ2VudC5pc1J1bm5pbmcsXG4gICAgICBzdWdnZXN0aW9uczogYXV0b1N1Z2dlc3Rpb25zLFxuICAgICAgb25TZWxlY3RTdWdnZXN0aW9uOiBoYW5kbGVTZWxlY3RTdWdnZXN0aW9uLFxuICAgICAgc3VnZ2VzdGlvblZpZXc6IHByb3ZpZGVkU3VnZ2VzdGlvblZpZXcsXG4gICAgfSxcbiAgICB7XG4gICAgICAuLi5yZXN0UHJvcHMsXG4gICAgICAuLi4odHlwZW9mIHByb3ZpZGVkTWVzc2FnZVZpZXcgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyB7IG1lc3NhZ2VWaWV3OiB7IGNsYXNzTmFtZTogcHJvdmlkZWRNZXNzYWdlVmlldyB9IH1cbiAgICAgICAgOiBwcm92aWRlZE1lc3NhZ2VWaWV3ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHsgbWVzc2FnZVZpZXc6IHByb3ZpZGVkTWVzc2FnZVZpZXcgfVxuICAgICAgICAgIDoge30pLFxuICAgIH0sXG4gICk7XG5cbiAgY29uc3QgcHJvdmlkZWRTdG9wSGFuZGxlciA9IHByb3ZpZGVkSW5wdXRQcm9wcz8ub25TdG9wO1xuICBjb25zdCBoYXNNZXNzYWdlcyA9IGFnZW50Lm1lc3NhZ2VzLmxlbmd0aCA+IDA7XG4gIGNvbnN0IHNob3VsZEFsbG93U3RvcCA9IGFnZW50LmlzUnVubmluZyAmJiBoYXNNZXNzYWdlcztcbiAgY29uc3QgZWZmZWN0aXZlU3RvcEhhbmRsZXIgPSBzaG91bGRBbGxvd1N0b3AgPyAocHJvdmlkZWRTdG9wSGFuZGxlciA/PyBzdG9wQ3VycmVudFJ1bikgOiBwcm92aWRlZFN0b3BIYW5kbGVyO1xuXG4gIC8vIERldGVybWluZSBpZiB0cmFuc2NyaXB0aW9uIGZlYXR1cmUgc2hvdWxkIGJlIGF2YWlsYWJsZVxuICBjb25zdCBzaG93VHJhbnNjcmlwdGlvbiA9IGlzVHJhbnNjcmlwdGlvbkVuYWJsZWQgJiYgaXNNZWRpYVJlY29yZGVyU3VwcG9ydGVkO1xuXG4gIC8vIERldGVybWluZSBtb2RlOiB0cmFuc2NyaWJpbmcgdGFrZXMgcHJpb3JpdHksIHRoZW4gdHJhbnNjcmliZSBtb2RlLCB0aGVuIGRlZmF1bHQgdG8gaW5wdXRcbiAgY29uc3QgZWZmZWN0aXZlTW9kZTogQ29waWxvdENoYXRJbnB1dE1vZGUgPSBpc1RyYW5zY3JpYmluZ1xuICAgID8gXCJwcm9jZXNzaW5nXCJcbiAgICA6IHRyYW5zY3JpYmVNb2RlO1xuXG4gIGNvbnN0IGZpbmFsSW5wdXRQcm9wcyA9IHtcbiAgICAuLi5wcm92aWRlZElucHV0UHJvcHMsXG4gICAgb25TdWJtaXRNZXNzYWdlOiBvblN1Ym1pdElucHV0LFxuICAgIG9uU3RvcDogZWZmZWN0aXZlU3RvcEhhbmRsZXIsXG4gICAgaXNSdW5uaW5nOiBhZ2VudC5pc1J1bm5pbmcsXG4gICAgbW9kZTogZWZmZWN0aXZlTW9kZSxcbiAgICB2YWx1ZTogaW5wdXRWYWx1ZSxcbiAgICBvbkNoYW5nZTogc2V0SW5wdXRWYWx1ZSxcbiAgICAvLyBPbmx5IHByb3ZpZGUgdHJhbnNjcmlwdGlvbiBoYW5kbGVycyBpZiBmZWF0dXJlIGlzIGF2YWlsYWJsZVxuICAgIG9uU3RhcnRUcmFuc2NyaWJlOiBzaG93VHJhbnNjcmlwdGlvbiA/IGhhbmRsZVN0YXJ0VHJhbnNjcmliZSA6IHVuZGVmaW5lZCxcbiAgICBvbkNhbmNlbFRyYW5zY3JpYmU6IHNob3dUcmFuc2NyaXB0aW9uID8gaGFuZGxlQ2FuY2VsVHJhbnNjcmliZSA6IHVuZGVmaW5lZCxcbiAgICBvbkZpbmlzaFRyYW5zY3JpYmU6IHNob3dUcmFuc2NyaXB0aW9uID8gaGFuZGxlRmluaXNoVHJhbnNjcmliZSA6IHVuZGVmaW5lZCxcbiAgICBvbkZpbmlzaFRyYW5zY3JpYmVXaXRoQXVkaW86IHNob3dUcmFuc2NyaXB0aW9uID8gaGFuZGxlRmluaXNoVHJhbnNjcmliZVdpdGhBdWRpbyA6IHVuZGVmaW5lZCxcbiAgfSBhcyBQYXJ0aWFsPENvcGlsb3RDaGF0SW5wdXRQcm9wcz4gJiB7IG9uU3VibWl0TWVzc2FnZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQgfTtcblxuICAvLyBNZW1vaXplIG1lc3NhZ2VzIGFycmF5IC0gb25seSBjcmVhdGUgbmV3IHJlZmVyZW5jZSB3aGVuIGNvbnRlbnQgYWN0dWFsbHkgY2hhbmdlc1xuICAvLyAoYWdlbnQubWVzc2FnZXMgaXMgbXV0YXRlZCBpbiBwbGFjZSwgc28gd2UgbmVlZCBhIG5ldyByZWZlcmVuY2UgZm9yIFJlYWN0IHRvIGRldGVjdCBjaGFuZ2VzKVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIGNvbnN0IG1lc3NhZ2VzID0gdXNlTWVtbygoKSA9PiBbLi4uYWdlbnQubWVzc2FnZXNdLCBbSlNPTi5zdHJpbmdpZnkoYWdlbnQubWVzc2FnZXMpXSk7XG5cbiAgY29uc3QgZmluYWxQcm9wcyA9IG1lcmdlKG1lcmdlZFByb3BzLCB7XG4gICAgbWVzc2FnZXMsXG4gICAgaW5wdXRQcm9wczogZmluYWxJbnB1dFByb3BzLFxuICB9KSBhcyBDb3BpbG90Q2hhdFZpZXdQcm9wcztcblxuICAvLyBBbHdheXMgY3JlYXRlIGEgcHJvdmlkZXIgd2l0aCBtZXJnZWQgdmFsdWVzXG4gIC8vIFRoaXMgZW5zdXJlcyBwcmlvcml0eTogcHJvcHMgPiBleGlzdGluZyBjb25maWcgPiBkZWZhdWx0c1xuICBjb25zdCBSZW5kZXJlZENoYXRWaWV3ID0gcmVuZGVyU2xvdChjaGF0VmlldywgQ29waWxvdENoYXRWaWV3LCBmaW5hbFByb3BzKTtcblxuICByZXR1cm4gKFxuICAgIDxDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb25Qcm92aWRlclxuICAgICAgYWdlbnRJZD17cmVzb2x2ZWRBZ2VudElkfVxuICAgICAgdGhyZWFkSWQ9e3Jlc29sdmVkVGhyZWFkSWR9XG4gICAgICBsYWJlbHM9e2xhYmVsc31cbiAgICAgIGlzTW9kYWxEZWZhdWx0T3Blbj17aXNNb2RhbERlZmF1bHRPcGVufVxuICAgID5cbiAgICAgIHt0cmFuc2NyaXB0aW9uRXJyb3IgJiYgKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICBib3R0b206IFwiMTAwcHhcIixcbiAgICAgICAgICAgIGxlZnQ6IFwiNTAlXCIsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgtNTAlKVwiLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNlZjQ0NDRcIixcbiAgICAgICAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICAgICAgICBwYWRkaW5nOiBcIjhweCAxNnB4XCIsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6IFwiOHB4XCIsXG4gICAgICAgICAgICBmb250U2l6ZTogXCIxNHB4XCIsXG4gICAgICAgICAgICB6SW5kZXg6IDUwLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7dHJhbnNjcmlwdGlvbkVycm9yfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICB7UmVuZGVyZWRDaGF0Vmlld31cbiAgICA8L0NvcGlsb3RDaGF0Q29uZmlndXJhdGlvblByb3ZpZGVyPlxuICApO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBDb3BpbG90Q2hhdCB7XG4gIGV4cG9ydCBjb25zdCBWaWV3ID0gQ29waWxvdENoYXRWaWV3O1xufVxuIiwiaW1wb3J0IHR5cGUgeyBDb3BpbG90S2l0Q29yZVJlYWN0IH0gZnJvbSBcIi4vcmVhY3QtY29yZVwiO1xuaW1wb3J0IHtcbiAgVHJhbnNjcmlwdGlvbkVycm9yQ29kZSxcbiAgdHlwZSBUcmFuc2NyaXB0aW9uRXJyb3JSZXNwb25zZSxcbn0gZnJvbSBcIkBjb3BpbG90a2l0bmV4dC9zaGFyZWRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2NyaXB0aW9uUmVzdWx0IHtcbiAgdGV4dDogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBFcnJvciBpbmZvIHBhcnNlZCBmcm9tIHRyYW5zY3JpcHRpb24gZW5kcG9pbnQgZXJyb3IgcmVzcG9uc2VzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zY3JpcHRpb25FcnJvckluZm8ge1xuICBjb2RlOiBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHJldHJ5YWJsZTogYm9vbGVhbjtcbn1cblxuLy8gUmUtZXhwb3J0IGVycm9yIGNvZGUgZW51bSBmb3IgY29udmVuaWVuY2VcbmV4cG9ydCB7IFRyYW5zY3JpcHRpb25FcnJvckNvZGUgfTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgQmxvYiB0byBhIGJhc2U2NCBzdHJpbmdcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYmxvYlRvQmFzZTY0KGJsb2I6IEJsb2IpOiBQcm9taXNlPHN0cmluZz4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgLy8gUmVtb3ZlIHRoZSBkYXRhIFVSTCBwcmVmaXggdG8gZ2V0IHB1cmUgYmFzZTY0XG4gICAgICBjb25zdCBiYXNlNjQgPSByZXN1bHQuc3BsaXQoXCIsXCIpWzFdO1xuICAgICAgcmVzb2x2ZShiYXNlNjQgPz8gXCJcIik7XG4gICAgfTtcbiAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmVhZCBhdWRpbyBkYXRhXCIpKTtcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXJyb3IgcmVzcG9uc2UgbWF0Y2hlcyBvdXIgZXhwZWN0ZWQgZm9ybWF0XG4gKi9cbmZ1bmN0aW9uIGlzVHJhbnNjcmlwdGlvbkVycm9yUmVzcG9uc2UoZGF0YTogdW5rbm93bik6IGRhdGEgaXMgVHJhbnNjcmlwdGlvbkVycm9yUmVzcG9uc2Uge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmXG4gICAgZGF0YSAhPT0gbnVsbCAmJlxuICAgIFwiZXJyb3JcIiBpbiBkYXRhICYmXG4gICAgXCJtZXNzYWdlXCIgaW4gZGF0YSAmJlxuICAgIHR5cGVvZiAoZGF0YSBhcyBUcmFuc2NyaXB0aW9uRXJyb3JSZXNwb25zZSkuZXJyb3IgPT09IFwic3RyaW5nXCIgJiZcbiAgICB0eXBlb2YgKGRhdGEgYXMgVHJhbnNjcmlwdGlvbkVycm9yUmVzcG9uc2UpLm1lc3NhZ2UgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBlcnJvciBpbmZvIGZyb20gYSB0cmFuc2NyaXB0aW9uIGVycm9yIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlVHJhbnNjcmlwdGlvbkVycm9yKHJlc3BvbnNlOiBUcmFuc2NyaXB0aW9uRXJyb3JSZXNwb25zZSk6IFRyYW5zY3JpcHRpb25FcnJvckluZm8ge1xuICByZXR1cm4ge1xuICAgIGNvZGU6IHJlc3BvbnNlLmVycm9yLFxuICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UsXG4gICAgcmV0cnlhYmxlOiByZXNwb25zZS5yZXRyeWFibGUgPz8gZmFsc2UsXG4gIH07XG59XG5cbi8qKlxuICogQ3VzdG9tIGVycm9yIHR5cGUgZm9yIHRyYW5zY3JpcHRpb24gZmFpbHVyZXMuXG4gKiBFeHRlbmRzIEVycm9yIHdpdGggdHJhbnNjcmlwdGlvbi1zcGVjaWZpYyBpbmZvIGZvciBjb250ZXh0dWFsIGVycm9yIGhhbmRsaW5nLlxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNjcmlwdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgaW5mbzogVHJhbnNjcmlwdGlvbkVycm9ySW5mbztcblxuICBjb25zdHJ1Y3RvcihpbmZvOiBUcmFuc2NyaXB0aW9uRXJyb3JJbmZvKSB7XG4gICAgc3VwZXIoaW5mby5tZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIlRyYW5zY3JpcHRpb25FcnJvclwiO1xuICAgIHRoaXMuaW5mbyA9IGluZm87XG4gIH1cbn1cblxuLyoqXG4gKiBUcmFuc2NyaWJlIGFuIGF1ZGlvIGJsb2IgdXNpbmcgdGhlIENvcGlsb3RLaXQgcnVudGltZVxuICpcbiAqIFN1cHBvcnRzIGJvdGggUkVTVCBtb2RlIChtdWx0aXBhcnQvZm9ybS1kYXRhKSBhbmQgc2luZ2xlLWVuZHBvaW50IG1vZGUgKGJhc2U2NCBKU09OKVxuICpcbiAqIEB0aHJvd3Mge1RyYW5zY3JpcHRpb25FcnJvcn0gV2hlbiB0cmFuc2NyaXB0aW9uIGZhaWxzIHdpdGggdHlwZWQgZXJyb3IgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYW5zY3JpYmVBdWRpbyhcbiAgY29yZTogQ29waWxvdEtpdENvcmVSZWFjdCxcbiAgYXVkaW9CbG9iOiBCbG9iLFxuICBmaWxlbmFtZTogc3RyaW5nID0gXCJyZWNvcmRpbmcud2VibVwiXG4pOiBQcm9taXNlPFRyYW5zY3JpcHRpb25SZXN1bHQ+IHtcbiAgY29uc3QgcnVudGltZVVybCA9IGNvcmUucnVudGltZVVybDtcbiAgaWYgKCFydW50aW1lVXJsKSB7XG4gICAgdGhyb3cgbmV3IFRyYW5zY3JpcHRpb25FcnJvcih7XG4gICAgICBjb2RlOiBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLklOVkFMSURfUkVRVUVTVCxcbiAgICAgIG1lc3NhZ2U6IFwiUnVudGltZSBVUkwgaXMgbm90IGNvbmZpZ3VyZWRcIixcbiAgICAgIHJldHJ5YWJsZTogZmFsc2UsXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyAuLi5jb3JlLmhlYWRlcnMgfTtcbiAgbGV0IHJlc3BvbnNlOiBSZXNwb25zZTtcblxuICB0cnkge1xuICAgIGlmIChjb3JlLnJ1bnRpbWVUcmFuc3BvcnQgPT09IFwic2luZ2xlXCIpIHtcbiAgICAgIC8vIFNpbmdsZS1lbmRwb2ludCBtb2RlOiBQT1NUIEpTT04gd2l0aCBiYXNlNjQgYXVkaW9cbiAgICAgIGNvbnN0IGJhc2U2NEF1ZGlvID0gYXdhaXQgYmxvYlRvQmFzZTY0KGF1ZGlvQmxvYik7XG5cbiAgICAgIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcblxuICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChydW50aW1lVXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBtZXRob2Q6IFwidHJhbnNjcmliZVwiLFxuICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIGF1ZGlvOiBiYXNlNjRBdWRpbyxcbiAgICAgICAgICAgIG1pbWVUeXBlOiBhdWRpb0Jsb2IudHlwZSB8fCBcImF1ZGlvL3dlYm1cIixcbiAgICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJFU1QgbW9kZTogUE9TVCBtdWx0aXBhcnQvZm9ybS1kYXRhIHRvIC90cmFuc2NyaWJlXG4gICAgICAvLyBEb24ndCBzZXQgQ29udGVudC1UeXBlIC0gYnJvd3NlciB3aWxsIHNldCBpdCB3aXRoIGJvdW5kYXJ5IGZvciBGb3JtRGF0YVxuICAgICAgZGVsZXRlIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl07XG5cbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoXCJhdWRpb1wiLCBhdWRpb0Jsb2IsIGZpbGVuYW1lKTtcblxuICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtydW50aW1lVXJsfS90cmFuc2NyaWJlYCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBOZXR3b3JrIGVycm9yIC0gZmV0Y2ggZmFpbGVkXG4gICAgdGhyb3cgbmV3IFRyYW5zY3JpcHRpb25FcnJvcih7XG4gICAgICBjb2RlOiBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLk5FVFdPUktfRVJST1IsXG4gICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiTmV0d29yayByZXF1ZXN0IGZhaWxlZFwiLFxuICAgICAgcmV0cnlhYmxlOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGxldCBlcnJvckRhdGE6IHVua25vd247XG4gICAgdHJ5IHtcbiAgICAgIGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIENvdWxkIG5vdCBwYXJzZSBlcnJvciByZXNwb25zZVxuICAgICAgdGhyb3cgbmV3IFRyYW5zY3JpcHRpb25FcnJvcih7XG4gICAgICAgIGNvZGU6IFRyYW5zY3JpcHRpb25FcnJvckNvZGUuUFJPVklERVJfRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgIHJldHJ5YWJsZTogcmVzcG9uc2Uuc3RhdHVzID49IDUwMCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIElmIHdlIGdvdCBhIHR5cGVkIGVycm9yIHJlc3BvbnNlLCB1c2UgaXRcbiAgICBpZiAoaXNUcmFuc2NyaXB0aW9uRXJyb3JSZXNwb25zZShlcnJvckRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgVHJhbnNjcmlwdGlvbkVycm9yKHBhcnNlVHJhbnNjcmlwdGlvbkVycm9yKGVycm9yRGF0YSkpO1xuICAgIH1cblxuICAgIC8vIFVua25vd24gZXJyb3IgZm9ybWF0XG4gICAgdGhyb3cgbmV3IFRyYW5zY3JpcHRpb25FcnJvcih7XG4gICAgICBjb2RlOiBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlLlBST1ZJREVSX0VSUk9SLFxuICAgICAgbWVzc2FnZTogdHlwZW9mIGVycm9yRGF0YSA9PT0gXCJvYmplY3RcIiAmJiBlcnJvckRhdGEgIT09IG51bGwgJiYgXCJtZXNzYWdlXCIgaW4gZXJyb3JEYXRhXG4gICAgICAgID8gU3RyaW5nKChlcnJvckRhdGEgYXMgeyBtZXNzYWdlOiB1bmtub3duIH0pLm1lc3NhZ2UpXG4gICAgICAgIDogXCJUcmFuc2NyaXB0aW9uIGZhaWxlZFwiLFxuICAgICAgcmV0cnlhYmxlOiByZXNwb25zZS5zdGF0dXMgPj0gNTAwLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIChhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIFRyYW5zY3JpcHRpb25SZXN1bHQ7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIE1vdXNlRXZlbnQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE1lc3NhZ2VDaXJjbGUsIFggfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5cbmltcG9ydCB7IHJlbmRlclNsb3QsIFNsb3RWYWx1ZSB9IGZyb20gXCJAL2xpYi9zbG90c1wiO1xuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcbmltcG9ydCB7XG4gIENvcGlsb3RDaGF0RGVmYXVsdExhYmVscyxcbiAgdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uLFxufSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJcIjtcblxuY29uc3QgRGVmYXVsdE9wZW5JY29uOiBSZWFjdC5GQzxSZWFjdC5TVkdQcm9wczxTVkdTVkdFbGVtZW50Pj4gPSAoe1xuICBjbGFzc05hbWUsXG4gIC4uLnByb3BzXG59KSA9PiAoXG4gIDxNZXNzYWdlQ2lyY2xlIGNsYXNzTmFtZT17Y24oXCJoLTYgdy02XCIsIGNsYXNzTmFtZSl9IHN0cm9rZVdpZHRoPXsxLjc1fSBmaWxsPVwiY3VycmVudENvbG9yXCIgey4uLnByb3BzfSAvPlxuKTtcblxuY29uc3QgRGVmYXVsdENsb3NlSWNvbjogUmVhY3QuRkM8UmVhY3QuU1ZHUHJvcHM8U1ZHU1ZHRWxlbWVudD4+ID0gKHtcbiAgY2xhc3NOYW1lLFxuICAuLi5wcm9wc1xufSkgPT4gPFggY2xhc3NOYW1lPXtjbihcImgtNiB3LTZcIiwgY2xhc3NOYW1lKX0gc3Ryb2tlV2lkdGg9ezEuNzV9IHsuLi5wcm9wc30gLz47XG5cbkRlZmF1bHRPcGVuSWNvbi5kaXNwbGF5TmFtZSA9IFwiQ29waWxvdENoYXRUb2dnbGVCdXR0b24uT3Blbkljb25cIjtcbkRlZmF1bHRDbG9zZUljb24uZGlzcGxheU5hbWUgPSBcIkNvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uLkNsb3NlSWNvblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uUHJvcHNcbiAgZXh0ZW5kcyBPbWl0PFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PiwgXCJjaGlsZHJlblwiPiB7XG4gIC8qKiBPcHRpb25hbCBzbG90IG92ZXJyaWRlIGZvciB0aGUgY2hhdCAoY2xvc2VkKSBpY29uLiAqL1xuICBvcGVuSWNvbj86IFNsb3RWYWx1ZTx0eXBlb2YgRGVmYXVsdE9wZW5JY29uPjtcbiAgLyoqIE9wdGlvbmFsIHNsb3Qgb3ZlcnJpZGUgZm9yIHRoZSBjbG9zZSBpY29uLiAqL1xuICBjbG9zZUljb24/OiBTbG90VmFsdWU8dHlwZW9mIERlZmF1bHRDbG9zZUljb24+O1xufVxuXG5jb25zdCBJQ09OX1RSQU5TSVRJT05fU1RZTEU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSBPYmplY3QuZnJlZXplKHtcbiAgdHJhbnNpdGlvbjogXCJvcGFjaXR5IDEyMG1zIGVhc2Utb3V0LCB0cmFuc2Zvcm0gMjYwbXMgY3ViaWMtYmV6aWVyKDAuMjIsIDEsIDAuMzYsIDEpXCIsXG59KTtcblxuY29uc3QgSUNPTl9XUkFQUEVSX0JBU0UgPVxuICBcInBvaW50ZXItZXZlbnRzLW5vbmUgYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3aWxsLWNoYW5nZS10cmFuc2Zvcm1cIjtcblxuY29uc3QgQlVUVE9OX0JBU0VfQ0xBU1NFUyA9IGNuKFxuICBcImZpeGVkIGJvdHRvbS02IHJpZ2h0LTYgei1bMTEwMF0gZmxleCBoLTE0IHctMTQgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIsXG4gIFwicm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItcHJpbWFyeSBiZy1wcmltYXJ5IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kXCIsXG4gIFwic2hhZG93LXNtIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBlYXNlLW91dFwiLFxuICBcImhvdmVyOnNjYWxlLVsxLjA0XSBob3ZlcjpzaGFkb3ctbWRcIixcbiAgXCJjdXJzb3ItcG9pbnRlclwiLFxuICBcImFjdGl2ZTpzY2FsZS1bMC45Nl1cIixcbiAgXCJmb2N1cy12aXNpYmxlOm91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMiBmb2N1cy12aXNpYmxlOnJpbmctcHJpbWFyeS81MCBmb2N1cy12aXNpYmxlOnJpbmctb2Zmc2V0LTIgZm9jdXMtdmlzaWJsZTpyaW5nLW9mZnNldC1iYWNrZ3JvdW5kXCIsXG4gIFwiZGlzYWJsZWQ6cG9pbnRlci1ldmVudHMtbm9uZSBkaXNhYmxlZDpvcGFjaXR5LTYwXCJcbik7XG5cbmV4cG9ydCBjb25zdCBDb3BpbG90Q2hhdFRvZ2dsZUJ1dHRvbiA9IFJlYWN0LmZvcndhcmRSZWY8XG4gIEhUTUxCdXR0b25FbGVtZW50LFxuICBDb3BpbG90Q2hhdFRvZ2dsZUJ1dHRvblByb3BzXG4+KGZ1bmN0aW9uIENvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uKHsgb3Blbkljb24sIGNsb3NlSWNvbiwgY2xhc3NOYW1lLCAuLi5idXR0b25Qcm9wcyB9LCByZWYpIHtcbiAgY29uc3QgeyBvbkNsaWNrLCB0eXBlLCBkaXNhYmxlZCwgLi4ucmVzdFByb3BzIH0gPSBidXR0b25Qcm9wcztcblxuICBjb25zdCBjb25maWd1cmF0aW9uID0gdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uKCk7XG4gIGNvbnN0IGxhYmVscyA9IGNvbmZpZ3VyYXRpb24/LmxhYmVscyA/PyBDb3BpbG90Q2hhdERlZmF1bHRMYWJlbHM7XG5cbiAgY29uc3QgW2ZhbGxiYWNrT3Blbiwgc2V0RmFsbGJhY2tPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBpc09wZW4gPSBjb25maWd1cmF0aW9uPy5pc01vZGFsT3BlbiA/PyBmYWxsYmFja09wZW47XG4gIGNvbnN0IHNldE1vZGFsT3BlbiA9IGNvbmZpZ3VyYXRpb24/LnNldE1vZGFsT3BlbiA/PyBzZXRGYWxsYmFja09wZW47XG5cbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZXZlbnQ6IE1vdXNlRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgIG9uQ2xpY2soZXZlbnQpO1xuICAgIH1cblxuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV4dE9wZW4gPSAhaXNPcGVuO1xuICAgIHNldE1vZGFsT3BlbihuZXh0T3Blbik7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyZWRPcGVuSWNvbiA9IHJlbmRlclNsb3QoXG4gICAgb3Blbkljb24sXG4gICAgRGVmYXVsdE9wZW5JY29uLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogXCJoLTYgdy02XCIsXG4gICAgICBcImFyaWEtaGlkZGVuXCI6IHRydWUsXG4gICAgICBmb2N1c2FibGU6IGZhbHNlLFxuICAgIH1cbiAgKTtcblxuICBjb25zdCByZW5kZXJlZENsb3NlSWNvbiA9IHJlbmRlclNsb3QoXG4gICAgY2xvc2VJY29uLFxuICAgIERlZmF1bHRDbG9zZUljb24sXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImgtNiB3LTZcIixcbiAgICAgIFwiYXJpYS1oaWRkZW5cIjogdHJ1ZSxcbiAgICAgIGZvY3VzYWJsZTogZmFsc2UsXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IG9wZW5JY29uRWxlbWVudCA9IChcbiAgICA8c3BhblxuICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAgIGRhdGEtc2xvdD1cImNoYXQtdG9nZ2xlLWJ1dHRvbi1vcGVuLWljb25cIlxuICAgICAgY2xhc3NOYW1lPXtJQ09OX1dSQVBQRVJfQkFTRX1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIC4uLklDT05fVFJBTlNJVElPTl9TVFlMRSxcbiAgICAgICAgb3BhY2l0eTogaXNPcGVuID8gMCA6IDEsXG4gICAgICAgIHRyYW5zZm9ybTogYHNjYWxlKCR7aXNPcGVuID8gMC43NSA6IDF9KSByb3RhdGUoJHtpc09wZW4gPyA5MCA6IDB9ZGVnKWAsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtyZW5kZXJlZE9wZW5JY29ufVxuICAgIDwvc3Bhbj5cbiAgKTtcblxuICBjb25zdCBjbG9zZUljb25FbGVtZW50ID0gKFxuICAgIDxzcGFuXG4gICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgZGF0YS1zbG90PVwiY2hhdC10b2dnbGUtYnV0dG9uLWNsb3NlLWljb25cIlxuICAgICAgY2xhc3NOYW1lPXtJQ09OX1dSQVBQRVJfQkFTRX1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIC4uLklDT05fVFJBTlNJVElPTl9TVFlMRSxcbiAgICAgICAgb3BhY2l0eTogaXNPcGVuID8gMSA6IDAsXG4gICAgICAgIHRyYW5zZm9ybTogYHNjYWxlKCR7aXNPcGVuID8gMSA6IDAuNzV9KSByb3RhdGUoJHtpc09wZW4gPyAwIDogLTkwfWRlZylgLFxuICAgICAgfX1cbiAgICA+XG4gICAgICB7cmVuZGVyZWRDbG9zZUljb259XG4gICAgPC9zcGFuPlxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPGJ1dHRvblxuICAgICAgcmVmPXtyZWZ9XG4gICAgICB0eXBlPXt0eXBlID8/IFwiYnV0dG9uXCJ9XG4gICAgICBkYXRhLXNsb3Q9XCJjaGF0LXRvZ2dsZS1idXR0b25cIlxuICAgICAgZGF0YS1zdGF0ZT17aXNPcGVuID8gXCJvcGVuXCIgOiBcImNsb3NlZFwifVxuICAgICAgY2xhc3NOYW1lPXtjbihCVVRUT05fQkFTRV9DTEFTU0VTLCBjbGFzc05hbWUpfVxuICAgICAgYXJpYS1sYWJlbD17aXNPcGVuID8gbGFiZWxzLmNoYXRUb2dnbGVDbG9zZUxhYmVsIDogbGFiZWxzLmNoYXRUb2dnbGVPcGVuTGFiZWx9XG4gICAgICBhcmlhLXByZXNzZWQ9e2lzT3Blbn1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrfVxuICAgICAgey4uLnJlc3RQcm9wc31cbiAgICA+XG4gICAgICB7b3Blbkljb25FbGVtZW50fVxuICAgICAge2Nsb3NlSWNvbkVsZW1lbnR9XG4gICAgPC9idXR0b24+XG4gICk7XG59KTtcbkNvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90Q2hhdFRvZ2dsZUJ1dHRvblwiO1xuZXhwb3J0IGRlZmF1bHQgQ29waWxvdENoYXRUb2dnbGVCdXR0b247XG5cbmV4cG9ydCB7XG4gIERlZmF1bHRPcGVuSWNvbiBhcyBDb3BpbG90Q2hhdFRvZ2dsZUJ1dHRvbk9wZW5JY29uLFxuICBEZWZhdWx0Q2xvc2VJY29uIGFzIENvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uQ2xvc2VJY29uLFxufTtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IENvcGlsb3RDaGF0VmlldywgeyBDb3BpbG90Q2hhdFZpZXdQcm9wcywgV2VsY29tZVNjcmVlblByb3BzIH0gZnJvbSBcIi4vQ29waWxvdENoYXRWaWV3XCI7XG5pbXBvcnQgeyB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24gfSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJcIjtcbmltcG9ydCBDb3BpbG90Q2hhdFRvZ2dsZUJ1dHRvbiBmcm9tIFwiLi9Db3BpbG90Q2hhdFRvZ2dsZUJ1dHRvblwiO1xuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcbmltcG9ydCB7IENvcGlsb3RNb2RhbEhlYWRlciB9IGZyb20gXCIuL0NvcGlsb3RNb2RhbEhlYWRlclwiO1xuaW1wb3J0IHsgcmVuZGVyU2xvdCwgU2xvdFZhbHVlIH0gZnJvbSBcIkAvbGliL3Nsb3RzXCI7XG5cbmNvbnN0IERFRkFVTFRfU0lERUJBUl9XSURUSCA9IDQ4MDtcbmNvbnN0IFNJREVCQVJfVFJBTlNJVElPTl9NUyA9IDI2MDtcblxuZXhwb3J0IHR5cGUgQ29waWxvdFNpZGViYXJWaWV3UHJvcHMgPSBDb3BpbG90Q2hhdFZpZXdQcm9wcyAmIHtcbiAgaGVhZGVyPzogU2xvdFZhbHVlPHR5cGVvZiBDb3BpbG90TW9kYWxIZWFkZXI+O1xuICB3aWR0aD86IG51bWJlciB8IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBDb3BpbG90U2lkZWJhclZpZXcoeyBoZWFkZXIsIHdpZHRoLCAuLi5wcm9wcyB9OiBDb3BpbG90U2lkZWJhclZpZXdQcm9wcykge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0gdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uKCk7XG5cbiAgY29uc3QgaXNTaWRlYmFyT3BlbiA9IGNvbmZpZ3VyYXRpb24/LmlzTW9kYWxPcGVuID8/IGZhbHNlO1xuXG4gIGNvbnN0IHNpZGViYXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NpZGViYXJXaWR0aCwgc2V0U2lkZWJhcldpZHRoXSA9IHVzZVN0YXRlPG51bWJlciB8IHN0cmluZz4od2lkdGggPz8gREVGQVVMVF9TSURFQkFSX1dJRFRIKTtcblxuICAvLyBIZWxwZXIgdG8gY29udmVydCB3aWR0aCB0byBDU1MgdmFsdWVcbiAgY29uc3Qgd2lkdGhUb0NzcyA9ICh3OiBudW1iZXIgfCBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgdyA9PT0gXCJudW1iZXJcIiA/IGAke3d9cHhgIDogdztcbiAgfTtcblxuICAvLyBIZWxwZXIgdG8gZXh0cmFjdCBudW1lcmljIHZhbHVlIGZvciBib2R5IG1hcmdpbiAob25seSB3b3JrcyB3aXRoIHB4IHZhbHVlcylcbiAgY29uc3Qgd2lkdGhUb01hcmdpbiA9ICh3OiBudW1iZXIgfCBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIGlmICh0eXBlb2YgdyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIGAke3d9cHhgO1xuICAgIH1cbiAgICAvLyBGb3Igc3RyaW5nIHZhbHVlcywgdXNlIGFzLWlzIChhc3N1bWVzIHZhbGlkIENTUyB1bml0KVxuICAgIHJldHVybiB3O1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSWYgd2lkdGggaXMgZXhwbGljaXRseSBwcm92aWRlZCwgZG9uJ3QgbWVhc3VyZVxuICAgIGlmICh3aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtZW50ID0gc2lkZWJhclJlZi5jdXJyZW50O1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZVdpZHRoID0gKCkgPT4ge1xuICAgICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBpZiAocmVjdC53aWR0aCA+IDApIHtcbiAgICAgICAgc2V0U2lkZWJhcldpZHRoKHJlY3Qud2lkdGgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB1cGRhdGVXaWR0aCgpO1xuXG4gICAgaWYgKHR5cGVvZiBSZXNpemVPYnNlcnZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gdXBkYXRlV2lkdGgoKSk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgcmV0dXJuICgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVXaWR0aCk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZVdpZHRoKTtcbiAgfSwgW3dpZHRoXSk7XG5cbiAgY29uc3QgaGVhZGVyRWxlbWVudCA9IHJlbmRlclNsb3QoaGVhZGVyLCBDb3BpbG90TW9kYWxIZWFkZXIsIHt9KTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7aXNTaWRlYmFyT3BlbiAmJiAoXG4gICAgICAgIDxzdHlsZVxuICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7XG4gICAgICAgICAgICBfX2h0bWw6IGBcbiAgICAgICAgICAgIEBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkge1xuICAgICAgICAgICAgICBib2R5IHtcbiAgICAgICAgICAgICAgICBtYXJnaW4taW5saW5lLWVuZDogJHt3aWR0aFRvTWFyZ2luKHNpZGViYXJXaWR0aCl9O1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG1hcmdpbi1pbmxpbmUtZW5kICR7U0lERUJBUl9UUkFOU0lUSU9OX01TfW1zIGVhc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1gLFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAgPENvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uIC8+XG4gICAgICA8YXNpZGVcbiAgICAgICAgcmVmPXtzaWRlYmFyUmVmfVxuICAgICAgICBkYXRhLWNvcGlsb3Qtc2lkZWJhclxuICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgIFwiZml4ZWQgcmlnaHQtMCB0b3AtMCB6LVsxMjAwXSBmbGV4XCIsXG4gICAgICAgICAgLy8gSGVpZ2h0IHdpdGggZHZoIGZhbGxiYWNrIGFuZCBzYWZlIGFyZWEgc3VwcG9ydFxuICAgICAgICAgIFwiaC1bMTAwdmhdIGgtWzEwMGR2aF0gbWF4LWgtc2NyZWVuXCIsXG4gICAgICAgICAgLy8gUmVzcG9uc2l2ZSB3aWR0aDogZnVsbCBvbiBtb2JpbGUsIGN1c3RvbSBvbiBkZXNrdG9wXG4gICAgICAgICAgXCJ3LWZ1bGxcIixcbiAgICAgICAgICBcImJvcmRlci1sIGJvcmRlci1ib3JkZXIgYmctYmFja2dyb3VuZCB0ZXh0LWZvcmVncm91bmQgc2hhZG93LXhsXCIsXG4gICAgICAgICAgXCJ0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0zMDAgZWFzZS1vdXRcIixcbiAgICAgICAgICBpc1NpZGViYXJPcGVuID8gXCJ0cmFuc2xhdGUteC0wXCIgOiBcInRyYW5zbGF0ZS14LWZ1bGwgcG9pbnRlci1ldmVudHMtbm9uZVwiLFxuICAgICAgICApfVxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIC8vIFVzZSBDU1MgY3VzdG9tIHByb3BlcnR5IGZvciByZXNwb25zaXZlIHdpZHRoXG4gICAgICAgICAgW1wiLS1zaWRlYmFyLXdpZHRoXCIgYXMgc3RyaW5nXTogd2lkdGhUb0NzcyhzaWRlYmFyV2lkdGgpLFxuICAgICAgICAgIC8vIFNhZmUgYXJlYSBpbnNldHMgZm9yIGlPU1xuICAgICAgICAgIHBhZGRpbmdUb3A6IFwiZW52KHNhZmUtYXJlYS1pbnNldC10b3ApXCIsXG4gICAgICAgICAgcGFkZGluZ0JvdHRvbTogXCJlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSlcIixcbiAgICAgICAgfSBhcyBSZWFjdC5DU1NQcm9wZXJ0aWVzfVxuICAgICAgICBhcmlhLWhpZGRlbj17IWlzU2lkZWJhck9wZW59XG4gICAgICAgIGFyaWEtbGFiZWw9XCJDb3BpbG90IGNoYXQgc2lkZWJhclwiXG4gICAgICAgIHJvbGU9XCJjb21wbGVtZW50YXJ5XCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtZnVsbCB3LWZ1bGwgZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAge2hlYWRlckVsZW1lbnR9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuXCIgZGF0YS1zaWRlYmFyLWNoYXQ+XG4gICAgICAgICAgICA8Q29waWxvdENoYXRWaWV3IHsuLi5wcm9wc30gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2FzaWRlPlxuICAgIDwvPlxuICApO1xufVxuXG5Db3BpbG90U2lkZWJhclZpZXcuZGlzcGxheU5hbWUgPSBcIkNvcGlsb3RTaWRlYmFyVmlld1wiO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuZXhwb3J0IG5hbWVzcGFjZSBDb3BpbG90U2lkZWJhclZpZXcge1xuICAvKipcbiAgICogU2lkZWJhci1zcGVjaWZpYyB3ZWxjb21lIHNjcmVlbiBsYXlvdXQ6XG4gICAqIC0gU3VnZ2VzdGlvbnMgYXQgdGhlIHRvcFxuICAgKiAtIFdlbGNvbWUgbWVzc2FnZSBpbiB0aGUgbWlkZGxlXG4gICAqIC0gSW5wdXQgZml4ZWQgYXQgdGhlIGJvdHRvbSAobGlrZSBub3JtYWwgY2hhdClcbiAgICovXG4gIGV4cG9ydCBjb25zdCBXZWxjb21lU2NyZWVuOiBSZWFjdC5GQzxXZWxjb21lU2NyZWVuUHJvcHM+ID0gKHtcbiAgICB3ZWxjb21lTWVzc2FnZSxcbiAgICBpbnB1dCxcbiAgICBzdWdnZXN0aW9uVmlldyxcbiAgICBjbGFzc05hbWUsXG4gICAgY2hpbGRyZW4sXG4gICAgLi4ucHJvcHNcbiAgfSkgPT4ge1xuICAgIC8vIFJlbmRlciB0aGUgd2VsY29tZU1lc3NhZ2Ugc2xvdCBpbnRlcm5hbGx5XG4gICAgY29uc3QgQm91bmRXZWxjb21lTWVzc2FnZSA9IHJlbmRlclNsb3QoXG4gICAgICB3ZWxjb21lTWVzc2FnZSxcbiAgICAgIENvcGlsb3RDaGF0Vmlldy5XZWxjb21lTWVzc2FnZSxcbiAgICAgIHt9XG4gICAgKTtcblxuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgICB7Y2hpbGRyZW4oe1xuICAgICAgICAgICAgd2VsY29tZU1lc3NhZ2U6IEJvdW5kV2VsY29tZU1lc3NhZ2UsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25WaWV3LFxuICAgICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9e2NuKFwiaC1mdWxsIGZsZXggZmxleC1jb2xcIiwgY2xhc3NOYW1lKX1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgPlxuICAgICAgICB7LyogV2VsY29tZSBtZXNzYWdlIC0gY2VudGVyZWQgdmVydGljYWxseSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtNFwiPlxuICAgICAgICAgIHtCb3VuZFdlbGNvbWVNZXNzYWdlfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU3VnZ2VzdGlvbnMgYW5kIGlucHV0IGF0IGJvdHRvbSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC04IHBiLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LTN4bCBteC1hdXRvXCI+XG4gICAgICAgICAgICB7LyogU3VnZ2VzdGlvbnMgYWJvdmUgaW5wdXQgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgZmxleCBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICB7c3VnZ2VzdGlvblZpZXd9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtpbnB1dH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb3BpbG90U2lkZWJhclZpZXc7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcbmltcG9ydCB7IHVzZUNvcGlsb3RDaGF0Q29uZmlndXJhdGlvbiwgQ29waWxvdENoYXREZWZhdWx0TGFiZWxzIH0gZnJvbSBcIkAvcHJvdmlkZXJzL0NvcGlsb3RDaGF0Q29uZmlndXJhdGlvblByb3ZpZGVyXCI7XG5pbXBvcnQgeyByZW5kZXJTbG90LCBXaXRoU2xvdHMgfSBmcm9tIFwiQC9saWIvc2xvdHNcIjtcbmltcG9ydCB7IFggfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5cbnR5cGUgSGVhZGVyU2xvdHMgPSB7XG4gIHRpdGxlQ29udGVudDogdHlwZW9mIENvcGlsb3RNb2RhbEhlYWRlci5UaXRsZTtcbiAgY2xvc2VCdXR0b246IHR5cGVvZiBDb3BpbG90TW9kYWxIZWFkZXIuQ2xvc2VCdXR0b247XG59O1xuXG50eXBlIEhlYWRlclJlc3RQcm9wcyA9IHtcbiAgdGl0bGU/OiBzdHJpbmc7XG59ICYgT21pdDxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4sIFwiY2hpbGRyZW5cIj47XG5cbmV4cG9ydCB0eXBlIENvcGlsb3RNb2RhbEhlYWRlclByb3BzID0gV2l0aFNsb3RzPEhlYWRlclNsb3RzLCBIZWFkZXJSZXN0UHJvcHM+O1xuXG5leHBvcnQgZnVuY3Rpb24gQ29waWxvdE1vZGFsSGVhZGVyKHtcbiAgdGl0bGUsXG4gIHRpdGxlQ29udGVudCxcbiAgY2xvc2VCdXR0b24sXG4gIGNoaWxkcmVuLFxuICBjbGFzc05hbWUsXG4gIC4uLnJlc3Rcbn06IENvcGlsb3RNb2RhbEhlYWRlclByb3BzKSB7XG4gIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSB1c2VDb3BpbG90Q2hhdENvbmZpZ3VyYXRpb24oKTtcblxuICBjb25zdCBmYWxsYmFja1RpdGxlID0gY29uZmlndXJhdGlvbj8ubGFiZWxzLm1vZGFsSGVhZGVyVGl0bGUgPz8gQ29waWxvdENoYXREZWZhdWx0TGFiZWxzLm1vZGFsSGVhZGVyVGl0bGU7XG4gIGNvbnN0IHJlc29sdmVkVGl0bGUgPSB0aXRsZSA/PyBmYWxsYmFja1RpdGxlO1xuXG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbmZpZ3VyYXRpb24/LnNldE1vZGFsT3BlbihmYWxzZSk7XG4gIH0sIFtjb25maWd1cmF0aW9uXSk7XG5cbiAgY29uc3QgQm91bmRUaXRsZSA9IHJlbmRlclNsb3QodGl0bGVDb250ZW50LCBDb3BpbG90TW9kYWxIZWFkZXIuVGl0bGUsIHtcbiAgICBjaGlsZHJlbjogcmVzb2x2ZWRUaXRsZSxcbiAgfSk7XG5cbiAgY29uc3QgQm91bmRDbG9zZUJ1dHRvbiA9IHJlbmRlclNsb3QoY2xvc2VCdXR0b24sIENvcGlsb3RNb2RhbEhlYWRlci5DbG9zZUJ1dHRvbiwge1xuICAgIG9uQ2xpY2s6IGhhbmRsZUNsb3NlLFxuICB9KTtcblxuICBpZiAoY2hpbGRyZW4pIHtcbiAgICByZXR1cm4gY2hpbGRyZW4oe1xuICAgICAgdGl0bGVDb250ZW50OiBCb3VuZFRpdGxlLFxuICAgICAgY2xvc2VCdXR0b246IEJvdW5kQ2xvc2VCdXR0b24sXG4gICAgICB0aXRsZTogcmVzb2x2ZWRUaXRsZSxcbiAgICAgIC4uLnJlc3QsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxoZWFkZXJcbiAgICAgIGRhdGEtc2xvdD1cImNvcGlsb3QtbW9kYWwtaGVhZGVyXCJcbiAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgIFwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJvcmRlci1iIGJvcmRlci1ib3JkZXIgcHgtNCBweS00XCIsXG4gICAgICAgIFwiYmctYmFja2dyb3VuZC85NSBiYWNrZHJvcC1ibHVyIHN1cHBvcnRzLVtiYWNrZHJvcC1maWx0ZXJdOmJnLWJhY2tncm91bmQvODBcIixcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgKX1cbiAgICAgIHsuLi5yZXN0fVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtMSBqdXN0aWZ5LWNlbnRlciB0ZXh0LWNlbnRlclwiPntCb3VuZFRpdGxlfTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC0xIGp1c3RpZnktZW5kXCI+e0JvdW5kQ2xvc2VCdXR0b259PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2hlYWRlcj5cbiAgKTtcbn1cblxuQ29waWxvdE1vZGFsSGVhZGVyLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90TW9kYWxIZWFkZXJcIjtcblxuZXhwb3J0IG5hbWVzcGFjZSBDb3BpbG90TW9kYWxIZWFkZXIge1xuICBleHBvcnQgY29uc3QgVGl0bGU6IFJlYWN0LkZDPFJlYWN0LkhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pj4gPSAoeyBjaGlsZHJlbiwgY2xhc3NOYW1lLCAuLi5wcm9wcyB9KSA9PiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgXCJ3LWZ1bGwgdGV4dC1iYXNlIGZvbnQtbWVkaXVtIGxlYWRpbmctbm9uZSB0cmFja2luZy10aWdodCB0ZXh0LWZvcmVncm91bmRcIixcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgKX1cbiAgICAgIHsuLi5wcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgZXhwb3J0IGNvbnN0IENsb3NlQnV0dG9uOiBSZWFjdC5GQzxSZWFjdC5CdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4+ID0gKHtcbiAgICBjbGFzc05hbWUsXG4gICAgLi4ucHJvcHNcbiAgfSkgPT4gKFxuICAgIDxidXR0b25cbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgXCJpbmxpbmUtZmxleCBzaXplLTggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtZnVsbCB0ZXh0LW11dGVkLWZvcmVncm91bmQgdHJhbnNpdGlvbiBjdXJzb3ItcG9pbnRlclwiLFxuICAgICAgICBcImhvdmVyOmJnLW11dGVkIGhvdmVyOnRleHQtZm9yZWdyb3VuZCBmb2N1cy12aXNpYmxlOm91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMiBmb2N1cy12aXNpYmxlOnJpbmctcmluZ1wiLFxuICAgICAgICBjbGFzc05hbWUsXG4gICAgICApfVxuICAgICAgYXJpYS1sYWJlbD1cIkNsb3NlXCJcbiAgICAgIHsuLi5wcm9wc31cbiAgICA+XG4gICAgICA8WCBjbGFzc05hbWU9XCJoLTQgdy00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICA8L2J1dHRvbj5cbiAgKTtcbn1cblxuQ29waWxvdE1vZGFsSGVhZGVyLlRpdGxlLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90TW9kYWxIZWFkZXIuVGl0bGVcIjtcbkNvcGlsb3RNb2RhbEhlYWRlci5DbG9zZUJ1dHRvbi5kaXNwbGF5TmFtZSA9IFwiQ29waWxvdE1vZGFsSGVhZGVyLkNsb3NlQnV0dG9uXCI7XG5cbmV4cG9ydCBkZWZhdWx0IENvcGlsb3RNb2RhbEhlYWRlcjtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBDb3BpbG90Q2hhdFZpZXcsIHsgQ29waWxvdENoYXRWaWV3UHJvcHMsIFdlbGNvbWVTY3JlZW5Qcm9wcyB9IGZyb20gXCIuL0NvcGlsb3RDaGF0Vmlld1wiO1xuaW1wb3J0IENvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uIGZyb20gXCIuL0NvcGlsb3RDaGF0VG9nZ2xlQnV0dG9uXCI7XG5pbXBvcnQgeyBDb3BpbG90TW9kYWxIZWFkZXIgfSBmcm9tIFwiLi9Db3BpbG90TW9kYWxIZWFkZXJcIjtcbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XG5pbXBvcnQgeyByZW5kZXJTbG90LCBTbG90VmFsdWUgfSBmcm9tIFwiQC9saWIvc2xvdHNcIjtcbmltcG9ydCB7XG4gIENvcGlsb3RDaGF0RGVmYXVsdExhYmVscyxcbiAgdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uLFxufSBmcm9tIFwiQC9wcm92aWRlcnMvQ29waWxvdENoYXRDb25maWd1cmF0aW9uUHJvdmlkZXJcIjtcblxuY29uc3QgREVGQVVMVF9QT1BVUF9XSURUSCA9IDQyMDtcbmNvbnN0IERFRkFVTFRfUE9QVVBfSEVJR0hUID0gNTYwO1xuXG5leHBvcnQgdHlwZSBDb3BpbG90UG9wdXBWaWV3UHJvcHMgPSBDb3BpbG90Q2hhdFZpZXdQcm9wcyAmIHtcbiAgaGVhZGVyPzogU2xvdFZhbHVlPHR5cGVvZiBDb3BpbG90TW9kYWxIZWFkZXI+O1xuICB3aWR0aD86IG51bWJlciB8IHN0cmluZztcbiAgaGVpZ2h0PzogbnVtYmVyIHwgc3RyaW5nO1xuICBjbGlja091dHNpZGVUb0Nsb3NlPzogYm9vbGVhbjtcbn07XG5cbmNvbnN0IGRpbWVuc2lvblRvQ3NzID0gKHZhbHVlOiBudW1iZXIgfCBzdHJpbmcgfCB1bmRlZmluZWQsIGZhbGxiYWNrOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gYCR7dmFsdWV9cHhgO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBgJHtmYWxsYmFja31weGA7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ29waWxvdFBvcHVwVmlldyh7XG4gIGhlYWRlcixcbiAgd2lkdGgsXG4gIGhlaWdodCxcbiAgY2xpY2tPdXRzaWRlVG9DbG9zZSxcbiAgY2xhc3NOYW1lLFxuICAuLi5yZXN0UHJvcHNcbn06IENvcGlsb3RQb3B1cFZpZXdQcm9wcykge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0gdXNlQ29waWxvdENoYXRDb25maWd1cmF0aW9uKCk7XG4gIGNvbnN0IGlzUG9wdXBPcGVuID0gY29uZmlndXJhdGlvbj8uaXNNb2RhbE9wZW4gPz8gZmFsc2U7XG4gIGNvbnN0IHNldE1vZGFsT3BlbiA9IGNvbmZpZ3VyYXRpb24/LnNldE1vZGFsT3BlbjtcbiAgY29uc3QgbGFiZWxzID0gY29uZmlndXJhdGlvbj8ubGFiZWxzID8/IENvcGlsb3RDaGF0RGVmYXVsdExhYmVscztcblxuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBbaXNSZW5kZXJlZCwgc2V0SXNSZW5kZXJlZF0gPSB1c2VTdGF0ZShpc1BvcHVwT3Blbik7XG4gIGNvbnN0IFtpc0FuaW1hdGluZ091dCwgc2V0SXNBbmltYXRpbmdPdXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzUG9wdXBPcGVuKSB7XG4gICAgICBzZXRJc1JlbmRlcmVkKHRydWUpO1xuICAgICAgc2V0SXNBbmltYXRpbmdPdXQoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghaXNSZW5kZXJlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldElzQW5pbWF0aW5nT3V0KHRydWUpO1xuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldElzUmVuZGVyZWQoZmFsc2UpO1xuICAgICAgc2V0SXNBbmltYXRpbmdPdXQoZmFsc2UpO1xuICAgIH0sIDIwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICB9LCBbaXNQb3B1cE9wZW4sIGlzUmVuZGVyZWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNQb3B1cE9wZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2V0TW9kYWxPcGVuPy4oZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93bik7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgfSwgW2lzUG9wdXBPcGVuLCBzZXRNb2RhbE9wZW5dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNQb3B1cE9wZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb2N1c1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb250YWluZXJSZWYuY3VycmVudD8uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICAgIH0sIDIwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KGZvY3VzVGltZXIpO1xuICB9LCBbaXNQb3B1cE9wZW5dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNQb3B1cE9wZW4gfHwgIWNsaWNrT3V0c2lkZVRvQ2xvc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlUG9pbnRlckRvd24gPSAoZXZlbnQ6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIE5vZGUgfCBudWxsO1xuICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJSZWYuY3VycmVudDtcbiAgICAgIGlmIChjb250YWluZXI/LmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0b2dnbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtc2xvdD0nY2hhdC10b2dnbGUtYnV0dG9uJ11cIik7XG4gICAgICBpZiAodG9nZ2xlQnV0dG9uICYmIHRvZ2dsZUJ1dHRvbi5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2V0TW9kYWxPcGVuPy4oZmFsc2UpO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgaGFuZGxlUG9pbnRlckRvd24pO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgaGFuZGxlUG9pbnRlckRvd24pO1xuICB9LCBbaXNQb3B1cE9wZW4sIGNsaWNrT3V0c2lkZVRvQ2xvc2UsIHNldE1vZGFsT3Blbl0pO1xuXG4gIGNvbnN0IGhlYWRlckVsZW1lbnQgPSB1c2VNZW1vKCgpID0+IHJlbmRlclNsb3QoaGVhZGVyLCBDb3BpbG90TW9kYWxIZWFkZXIsIHt9KSwgW2hlYWRlcl0pO1xuXG4gIGNvbnN0IHJlc29sdmVkV2lkdGggPSBkaW1lbnNpb25Ub0Nzcyh3aWR0aCwgREVGQVVMVF9QT1BVUF9XSURUSCk7XG4gIGNvbnN0IHJlc29sdmVkSGVpZ2h0ID0gZGltZW5zaW9uVG9Dc3MoaGVpZ2h0LCBERUZBVUxUX1BPUFVQX0hFSUdIVCk7XG5cbiAgY29uc3QgcG9wdXBTdHlsZSA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgICh7XG4gICAgICAgIFwiLS1jb3BpbG90LXBvcHVwLXdpZHRoXCI6IHJlc29sdmVkV2lkdGgsXG4gICAgICAgIFwiLS1jb3BpbG90LXBvcHVwLWhlaWdodFwiOiByZXNvbHZlZEhlaWdodCxcbiAgICAgICAgXCItLWNvcGlsb3QtcG9wdXAtbWF4LXdpZHRoXCI6IFwiY2FsYygxMDB2dyAtIDNyZW0pXCIsXG4gICAgICAgIFwiLS1jb3BpbG90LXBvcHVwLW1heC1oZWlnaHRcIjogXCJjYWxjKDEwMGR2aCAtIDcuNXJlbSlcIixcbiAgICAgICAgcGFkZGluZ1RvcDogXCJlbnYoc2FmZS1hcmVhLWluc2V0LXRvcClcIixcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogXCJlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSlcIixcbiAgICAgICAgcGFkZGluZ0xlZnQ6IFwiZW52KHNhZmUtYXJlYS1pbnNldC1sZWZ0KVwiLFxuICAgICAgICBwYWRkaW5nUmlnaHQ6IFwiZW52KHNhZmUtYXJlYS1pbnNldC1yaWdodClcIixcbiAgICAgIH0pIGFzIFJlYWN0LkNTU1Byb3BlcnRpZXMsXG4gICAgW3Jlc29sdmVkSGVpZ2h0LCByZXNvbHZlZFdpZHRoXSxcbiAgKTtcblxuICBjb25zdCBwb3B1cEFuaW1hdGlvbkNsYXNzID1cbiAgICBpc1BvcHVwT3BlbiAmJiAhaXNBbmltYXRpbmdPdXRcbiAgICAgID8gXCJwb2ludGVyLWV2ZW50cy1hdXRvIHRyYW5zbGF0ZS15LTAgb3BhY2l0eS0xMDAgbWQ6c2NhbGUtMTAwXCJcbiAgICAgIDogXCJwb2ludGVyLWV2ZW50cy1ub25lIHRyYW5zbGF0ZS15LTQgb3BhY2l0eS0wIG1kOnRyYW5zbGF0ZS15LTUgbWQ6c2NhbGUtWzAuOTVdXCI7XG5cbiAgY29uc3QgcG9wdXBDb250ZW50ID0gaXNSZW5kZXJlZCA/IChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICBcImZpeGVkIGluc2V0LTAgei1bMTIwMF0gZmxleCBtYXgtdy1mdWxsIGZsZXgtY29sIGl0ZW1zLXN0cmV0Y2hcIixcbiAgICAgICAgXCJtZDppbnNldC1hdXRvIG1kOmJvdHRvbS0yNCBtZDpyaWdodC02IG1kOml0ZW1zLWVuZCBtZDpnYXAtNFwiLFxuICAgICAgKX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17Y29udGFpbmVyUmVmfVxuICAgICAgICB0YWJJbmRleD17LTF9XG4gICAgICAgIHJvbGU9XCJkaWFsb2dcIlxuICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbHMubW9kYWxIZWFkZXJUaXRsZX1cbiAgICAgICAgZGF0YS1jb3BpbG90LXBvcHVwXG4gICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgXCJyZWxhdGl2ZSBmbGV4IGgtZnVsbCB3LWZ1bGwgZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuIGJnLWJhY2tncm91bmQgdGV4dC1mb3JlZ3JvdW5kXCIsXG4gICAgICAgICAgXCJvcmlnaW4tYm90dG9tIGZvY3VzOm91dGxpbmUtbm9uZSB0cmFuc2Zvcm0tZ3B1IHRyYW5zaXRpb24tdHJhbnNmb3JtIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0yMDAgZWFzZS1vdXRcIixcbiAgICAgICAgICBcIm1kOnRyYW5zaXRpb24tdHJhbnNmb3JtIG1kOnRyYW5zaXRpb24tb3BhY2l0eVwiLFxuICAgICAgICAgIFwicm91bmRlZC1ub25lIGJvcmRlciBib3JkZXItYm9yZGVyLzAgc2hhZG93LW5vbmUgcmluZy0wXCIsXG4gICAgICAgICAgXCJtZDpoLVt2YXIoLS1jb3BpbG90LXBvcHVwLWhlaWdodCldIG1kOnctW3ZhcigtLWNvcGlsb3QtcG9wdXAtd2lkdGgpXVwiLFxuICAgICAgICAgIFwibWQ6bWF4LWgtW3ZhcigtLWNvcGlsb3QtcG9wdXAtbWF4LWhlaWdodCldIG1kOm1heC13LVt2YXIoLS1jb3BpbG90LXBvcHVwLW1heC13aWR0aCldXCIsXG4gICAgICAgICAgXCJtZDpvcmlnaW4tYm90dG9tLXJpZ2h0IG1kOnJvdW5kZWQtMnhsIG1kOmJvcmRlci1ib3JkZXIgbWQ6c2hhZG93LXhsIG1kOnJpbmctMSBtZDpyaW5nLWJvcmRlci80MFwiLFxuICAgICAgICAgIHBvcHVwQW5pbWF0aW9uQ2xhc3MsXG4gICAgICAgICl9XG4gICAgICAgIHN0eWxlPXtwb3B1cFN0eWxlfVxuICAgICAgPlxuICAgICAgICB7aGVhZGVyRWxlbWVudH1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuXCIgZGF0YS1wb3B1cC1jaGF0PlxuICAgICAgICAgIDxDb3BpbG90Q2hhdFZpZXdcbiAgICAgICAgICAgIHsuLi5yZXN0UHJvcHN9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NuKFwiaC1mdWxsIG1pbi1oLTBcIiwgY2xhc3NOYW1lKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApIDogbnVsbDtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8Q29waWxvdENoYXRUb2dnbGVCdXR0b24gLz5cbiAgICAgIHtwb3B1cENvbnRlbnR9XG4gICAgPC8+XG4gICk7XG59XG5cbkNvcGlsb3RQb3B1cFZpZXcuZGlzcGxheU5hbWUgPSBcIkNvcGlsb3RQb3B1cFZpZXdcIjtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgQ29waWxvdFBvcHVwVmlldyB7XG4gIC8qKlxuICAgKiBQb3B1cC1zcGVjaWZpYyB3ZWxjb21lIHNjcmVlbiBsYXlvdXQ6XG4gICAqIC0gV2VsY29tZSBtZXNzYWdlIGNlbnRlcmVkIHZlcnRpY2FsbHlcbiAgICogLSBTdWdnZXN0aW9ucyBqdXN0IGFib3ZlIGlucHV0XG4gICAqIC0gSW5wdXQgZml4ZWQgYXQgdGhlIGJvdHRvbVxuICAgKi9cbiAgZXhwb3J0IGNvbnN0IFdlbGNvbWVTY3JlZW46IFJlYWN0LkZDPFdlbGNvbWVTY3JlZW5Qcm9wcz4gPSAoe1xuICAgIHdlbGNvbWVNZXNzYWdlLFxuICAgIGlucHV0LFxuICAgIHN1Z2dlc3Rpb25WaWV3LFxuICAgIGNsYXNzTmFtZSxcbiAgICBjaGlsZHJlbixcbiAgICAuLi5wcm9wc1xuICB9KSA9PiB7XG4gICAgLy8gUmVuZGVyIHRoZSB3ZWxjb21lTWVzc2FnZSBzbG90IGludGVybmFsbHlcbiAgICBjb25zdCBCb3VuZFdlbGNvbWVNZXNzYWdlID0gcmVuZGVyU2xvdChcbiAgICAgIHdlbGNvbWVNZXNzYWdlLFxuICAgICAgQ29waWxvdENoYXRWaWV3LldlbGNvbWVNZXNzYWdlLFxuICAgICAge31cbiAgICApO1xuXG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgIHtjaGlsZHJlbih7XG4gICAgICAgICAgICB3ZWxjb21lTWVzc2FnZTogQm91bmRXZWxjb21lTWVzc2FnZSxcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgc3VnZ2VzdGlvblZpZXcsXG4gICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y24oXCJoLWZ1bGwgZmxleCBmbGV4LWNvbFwiLCBjbGFzc05hbWUpfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIHsvKiBXZWxjb21lIG1lc3NhZ2UgLSBjZW50ZXJlZCB2ZXJ0aWNhbGx5ICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC00XCI+XG4gICAgICAgICAge0JvdW5kV2VsY29tZU1lc3NhZ2V9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBTdWdnZXN0aW9ucyBhbmQgaW5wdXQgYXQgYm90dG9tICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTYgcGItNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctM3hsIG14LWF1dG9cIj5cbiAgICAgICAgICAgIHsvKiBTdWdnZXN0aW9ucyBhYm92ZSBpbnB1dCAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCBmbGV4IGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgIHtzdWdnZXN0aW9uVmlld31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge2lucHV0fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvcGlsb3RQb3B1cFZpZXc7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBDb3BpbG90Q2hhdCwgQ29waWxvdENoYXRQcm9wcyB9IGZyb20gXCIuL0NvcGlsb3RDaGF0XCI7XG5pbXBvcnQgQ29waWxvdENoYXRWaWV3LCB7IENvcGlsb3RDaGF0Vmlld1Byb3BzIH0gZnJvbSBcIi4vQ29waWxvdENoYXRWaWV3XCI7XG5pbXBvcnQgeyBDb3BpbG90U2lkZWJhclZpZXcsIENvcGlsb3RTaWRlYmFyVmlld1Byb3BzIH0gZnJvbSBcIi4vQ29waWxvdFNpZGViYXJWaWV3XCI7XG5cbmV4cG9ydCB0eXBlIENvcGlsb3RTaWRlYmFyUHJvcHMgPSBPbWl0PENvcGlsb3RDaGF0UHJvcHMsIFwiY2hhdFZpZXdcIj4gJiB7XG4gIGhlYWRlcj86IENvcGlsb3RTaWRlYmFyVmlld1Byb3BzW1wiaGVhZGVyXCJdO1xuICBkZWZhdWx0T3Blbj86IGJvb2xlYW47XG4gIHdpZHRoPzogbnVtYmVyIHwgc3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIENvcGlsb3RTaWRlYmFyKHsgaGVhZGVyLCBkZWZhdWx0T3Blbiwgd2lkdGgsIC4uLmNoYXRQcm9wcyB9OiBDb3BpbG90U2lkZWJhclByb3BzKSB7XG4gIGNvbnN0IFNpZGViYXJWaWV3T3ZlcnJpZGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBDb21wb25lbnQ6IFJlYWN0LkZDPENvcGlsb3RDaGF0Vmlld1Byb3BzPiA9ICh2aWV3UHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IHsgaGVhZGVyOiB2aWV3SGVhZGVyLCB3aWR0aDogdmlld1dpZHRoLCAuLi5yZXN0UHJvcHMgfSA9IHZpZXdQcm9wcyBhcyBDb3BpbG90U2lkZWJhclZpZXdQcm9wcztcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPENvcGlsb3RTaWRlYmFyVmlld1xuICAgICAgICAgIHsuLi4ocmVzdFByb3BzIGFzIENvcGlsb3RTaWRlYmFyVmlld1Byb3BzKX1cbiAgICAgICAgICBoZWFkZXI9e2hlYWRlciA/PyB2aWV3SGVhZGVyfVxuICAgICAgICAgIHdpZHRoPXt3aWR0aCA/PyB2aWV3V2lkdGh9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihDb21wb25lbnQsIENvcGlsb3RDaGF0Vmlldyk7XG4gIH0sIFtoZWFkZXIsIHdpZHRoXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q29waWxvdENoYXRcbiAgICAgIHdlbGNvbWVTY3JlZW49e0NvcGlsb3RTaWRlYmFyVmlldy5XZWxjb21lU2NyZWVufVxuICAgICAgey4uLmNoYXRQcm9wc31cbiAgICAgIGNoYXRWaWV3PXtTaWRlYmFyVmlld092ZXJyaWRlfVxuICAgICAgaXNNb2RhbERlZmF1bHRPcGVuPXtkZWZhdWx0T3Blbn1cbiAgICAvPlxuICApO1xufVxuXG5Db3BpbG90U2lkZWJhci5kaXNwbGF5TmFtZSA9IFwiQ29waWxvdFNpZGViYXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgQ29waWxvdFNpZGViYXI7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBDb3BpbG90Q2hhdCwgQ29waWxvdENoYXRQcm9wcyB9IGZyb20gXCIuL0NvcGlsb3RDaGF0XCI7XG5pbXBvcnQgQ29waWxvdENoYXRWaWV3LCB7IENvcGlsb3RDaGF0Vmlld1Byb3BzIH0gZnJvbSBcIi4vQ29waWxvdENoYXRWaWV3XCI7XG5pbXBvcnQgQ29waWxvdFBvcHVwVmlldywgeyBDb3BpbG90UG9wdXBWaWV3UHJvcHMgfSBmcm9tIFwiLi9Db3BpbG90UG9wdXBWaWV3XCI7XG5cbmV4cG9ydCB0eXBlIENvcGlsb3RQb3B1cFByb3BzID0gT21pdDxDb3BpbG90Q2hhdFByb3BzLCBcImNoYXRWaWV3XCI+ICYge1xuICBoZWFkZXI/OiBDb3BpbG90UG9wdXBWaWV3UHJvcHNbXCJoZWFkZXJcIl07XG4gIGRlZmF1bHRPcGVuPzogYm9vbGVhbjtcbiAgd2lkdGg/OiBDb3BpbG90UG9wdXBWaWV3UHJvcHNbXCJ3aWR0aFwiXTtcbiAgaGVpZ2h0PzogQ29waWxvdFBvcHVwVmlld1Byb3BzW1wiaGVpZ2h0XCJdO1xuICBjbGlja091dHNpZGVUb0Nsb3NlPzogQ29waWxvdFBvcHVwVmlld1Byb3BzW1wiY2xpY2tPdXRzaWRlVG9DbG9zZVwiXTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBDb3BpbG90UG9wdXAoe1xuICBoZWFkZXIsXG4gIGRlZmF1bHRPcGVuLFxuICB3aWR0aCxcbiAgaGVpZ2h0LFxuICBjbGlja091dHNpZGVUb0Nsb3NlLFxuICAuLi5jaGF0UHJvcHNcbn06IENvcGlsb3RQb3B1cFByb3BzKSB7XG4gIGNvbnN0IFBvcHVwVmlld092ZXJyaWRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgQ29tcG9uZW50OiBSZWFjdC5GQzxDb3BpbG90Q2hhdFZpZXdQcm9wcz4gPSAodmlld1Byb3BzKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGhlYWRlcjogdmlld0hlYWRlcixcbiAgICAgICAgd2lkdGg6IHZpZXdXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB2aWV3SGVpZ2h0LFxuICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB2aWV3Q2xpY2tPdXRzaWRlVG9DbG9zZSxcbiAgICAgICAgLi4ucmVzdFByb3BzXG4gICAgICB9ID0gdmlld1Byb3BzIGFzIENvcGlsb3RQb3B1cFZpZXdQcm9wcztcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPENvcGlsb3RQb3B1cFZpZXdcbiAgICAgICAgICB7Li4uKHJlc3RQcm9wcyBhcyBDb3BpbG90UG9wdXBWaWV3UHJvcHMpfVxuICAgICAgICAgIGhlYWRlcj17aGVhZGVyID8/IHZpZXdIZWFkZXJ9XG4gICAgICAgICAgd2lkdGg9e3dpZHRoID8/IHZpZXdXaWR0aH1cbiAgICAgICAgICBoZWlnaHQ9e2hlaWdodCA/PyB2aWV3SGVpZ2h0fVxuICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U9e2NsaWNrT3V0c2lkZVRvQ2xvc2UgPz8gdmlld0NsaWNrT3V0c2lkZVRvQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihDb21wb25lbnQsIENvcGlsb3RDaGF0Vmlldyk7XG4gIH0sIFtjbGlja091dHNpZGVUb0Nsb3NlLCBoZWFkZXIsIGhlaWdodCwgd2lkdGhdKTtcblxuICByZXR1cm4gKFxuICAgIDxDb3BpbG90Q2hhdFxuICAgICAgd2VsY29tZVNjcmVlbj17Q29waWxvdFBvcHVwVmlldy5XZWxjb21lU2NyZWVufVxuICAgICAgey4uLmNoYXRQcm9wc31cbiAgICAgIGNoYXRWaWV3PXtQb3B1cFZpZXdPdmVycmlkZX1cbiAgICAgIGlzTW9kYWxEZWZhdWx0T3Blbj17ZGVmYXVsdE9wZW59XG4gICAgLz5cbiAgKTtcbn1cblxuQ29waWxvdFBvcHVwLmRpc3BsYXlOYW1lID0gXCJDb3BpbG90UG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgQ29waWxvdFBvcHVwO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IFJlYWN0VG9vbENhbGxSZW5kZXJlciB9IGZyb20gXCIuL3JlYWN0LXRvb2wtY2FsbC1yZW5kZXJlclwiO1xuaW1wb3J0IHsgVG9vbENhbGxTdGF0dXMgfSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcblxuLyoqXG4gKiBIZWxwZXIgdG8gZGVmaW5lIGEgdHlwZS1zYWZlIHRvb2wgY2FsbCByZW5kZXJlciBlbnRyeS5cbiAqIC0gQWNjZXB0cyBhIHNpbmdsZSBvYmplY3Qgd2hvc2Uga2V5cyBtYXRjaCBSZWFjdFRvb2xDYWxsUmVuZGVyZXIncyBmaWVsZHM6IHsgbmFtZSwgYXJncywgcmVuZGVyLCBhZ2VudElkPyB9LlxuICogLSBEZXJpdmVzIGBhcmdzYCB0eXBlIGZyb20gdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEuXG4gKiAtIEVuc3VyZXMgdGhlIHJlbmRlciBmdW5jdGlvbiBwYXJhbSB0eXBlIGV4YWN0bHkgbWF0Y2hlcyBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8VD5bXCJyZW5kZXJcIl0ncyBwYXJhbS5cbiAqIC0gRm9yIHdpbGRjYXJkIHRvb2xzIChuYW1lOiBcIipcIiksIGFyZ3MgaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIHouYW55KClcbiAqL1xudHlwZSBSZW5kZXJQcm9wczxUPiA9XG4gIHwge1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgYXJnczogUGFydGlhbDxUPjtcbiAgICAgIHN0YXR1czogVG9vbENhbGxTdGF0dXMuSW5Qcm9ncmVzcztcbiAgICAgIHJlc3VsdDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfCB7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICBhcmdzOiBUO1xuICAgICAgc3RhdHVzOiBUb29sQ2FsbFN0YXR1cy5FeGVjdXRpbmc7XG4gICAgICByZXN1bHQ6IHVuZGVmaW5lZDtcbiAgICB9XG4gIHwge1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgYXJnczogVDtcbiAgICAgIHN0YXR1czogVG9vbENhbGxTdGF0dXMuQ29tcGxldGU7XG4gICAgICByZXN1bHQ6IHN0cmluZztcbiAgICB9O1xuXG4vLyBPdmVybG9hZCBmb3Igd2lsZGNhcmQgdG9vbHMgd2l0aG91dCBhcmdzXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lVG9vbENhbGxSZW5kZXJlcihkZWY6IHtcbiAgbmFtZTogXCIqXCI7XG4gIHJlbmRlcjogKHByb3BzOiBSZW5kZXJQcm9wczxhbnk+KSA9PiBSZWFjdC5SZWFjdEVsZW1lbnQ7XG4gIGFnZW50SWQ/OiBzdHJpbmc7XG59KTogUmVhY3RUb29sQ2FsbFJlbmRlcmVyPGFueT47XG5cbi8vIE92ZXJsb2FkIGZvciByZWd1bGFyIHRvb2xzIHdpdGggYXJnc1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVRvb2xDYWxsUmVuZGVyZXI8UyBleHRlbmRzIHouWm9kVHlwZUFueT4oZGVmOiB7XG4gIG5hbWU6IHN0cmluZztcbiAgYXJnczogUztcbiAgcmVuZGVyOiAocHJvcHM6IFJlbmRlclByb3BzPHouaW5mZXI8Uz4+KSA9PiBSZWFjdC5SZWFjdEVsZW1lbnQ7XG4gIGFnZW50SWQ/OiBzdHJpbmc7XG59KTogUmVhY3RUb29sQ2FsbFJlbmRlcmVyPHouaW5mZXI8Uz4+O1xuXG4vLyBJbXBsZW1lbnRhdGlvblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVRvb2xDYWxsUmVuZGVyZXI8UyBleHRlbmRzIHouWm9kVHlwZUFueT4oZGVmOiB7XG4gIG5hbWU6IHN0cmluZztcbiAgYXJncz86IFM7XG4gIHJlbmRlcjogKHByb3BzOiBhbnkpID0+IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgYWdlbnRJZD86IHN0cmluZztcbn0pOiBSZWFjdFRvb2xDYWxsUmVuZGVyZXI8YW55PiB7XG4gIC8vIEZvciB3aWxkY2FyZCB0b29scywgZGVmYXVsdCB0byB6LmFueSgpIGlmIG5vIGFyZ3MgcHJvdmlkZWRcbiAgY29uc3QgYXJnc1NjaGVtYSA9IGRlZi5uYW1lID09PSBcIipcIiAmJiAhZGVmLmFyZ3MgPyB6LmFueSgpIDogZGVmLmFyZ3M7XG5cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBkZWYubmFtZSxcbiAgICBhcmdzOiBhcmdzU2NoZW1hIGFzIGFueSxcbiAgICByZW5kZXI6IGRlZi5yZW5kZXIgYXMgUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICAgIC4uLihkZWYuYWdlbnRJZCA/IHsgYWdlbnRJZDogZGVmLmFnZW50SWQgfSA6IHt9KSxcbiAgfTtcbn1cbiIsImltcG9ydCB7IGRlZmluZVRvb2xDYWxsUmVuZGVyZXIgfSBmcm9tIFwiLi4vdHlwZXMvZGVmaW5lVG9vbENhbGxSZW5kZXJlclwiO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGNvbnN0IFdpbGRjYXJkVG9vbENhbGxSZW5kZXIgPSBkZWZpbmVUb29sQ2FsbFJlbmRlcmVyKHtcbiAgbmFtZTogXCIqXCIsXG4gIHJlbmRlcjogKHsgYXJncywgcmVzdWx0LCBuYW1lLCBzdGF0dXMgfSkgPT4ge1xuICAgIGNvbnN0IFtpc0V4cGFuZGVkLCBzZXRJc0V4cGFuZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgIGNvbnN0IHN0YXR1c1N0cmluZyA9IFN0cmluZyhzdGF0dXMpIGFzXG4gICAgICB8IFwiaW5Qcm9ncmVzc1wiXG4gICAgICB8IFwiZXhlY3V0aW5nXCJcbiAgICAgIHwgXCJjb21wbGV0ZVwiO1xuICAgIGNvbnN0IGlzQWN0aXZlID1cbiAgICAgIHN0YXR1c1N0cmluZyA9PT0gXCJpblByb2dyZXNzXCIgfHwgc3RhdHVzU3RyaW5nID09PSBcImV4ZWN1dGluZ1wiO1xuICAgIGNvbnN0IGlzQ29tcGxldGUgPSBzdGF0dXNTdHJpbmcgPT09IFwiY29tcGxldGVcIjtcbiAgICBjb25zdCBzdGF0dXNTdHlsZXMgPSBpc0FjdGl2ZVxuICAgICAgPyBcImJnLWFtYmVyLTEwMCB0ZXh0LWFtYmVyLTgwMCBkYXJrOmJnLWFtYmVyLTUwMC8xNSBkYXJrOnRleHQtYW1iZXItNDAwXCJcbiAgICAgIDogaXNDb21wbGV0ZVxuICAgICAgICA/IFwiYmctZW1lcmFsZC0xMDAgdGV4dC1lbWVyYWxkLTgwMCBkYXJrOmJnLWVtZXJhbGQtNTAwLzE1IGRhcms6dGV4dC1lbWVyYWxkLTQwMFwiXG4gICAgICAgIDogXCJiZy16aW5jLTEwMCB0ZXh0LXppbmMtODAwIGRhcms6YmctemluYy03MDAvNDAgZGFyazp0ZXh0LXppbmMtMzAwXCI7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHBiLTJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLXhsIGJvcmRlciBib3JkZXItemluYy0yMDAvNjAgZGFyazpib3JkZXItemluYy04MDAvNjAgYmctd2hpdGUvNzAgZGFyazpiZy16aW5jLTkwMC81MCBzaGFkb3ctc20gYmFja2Ryb3AtYmx1ciBwLTRcIj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTMgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNFeHBhbmRlZCghaXNFeHBhbmRlZCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BoLTQgdy00IHRleHQtemluYy01MDAgZGFyazp0ZXh0LXppbmMtNDAwIHRyYW5zaXRpb24tdHJhbnNmb3JtICR7XG4gICAgICAgICAgICAgICAgICBpc0V4cGFuZGVkID8gXCJyb3RhdGUtOTBcIiA6IFwiXCJcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezJ9XG4gICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICBkPVwiTTguMjUgNC41bDcuNSA3LjUtNy41IDcuNVwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1ibG9jayBoLTIgdy0yIHJvdW5kZWQtZnVsbCBiZy1ibHVlLTUwMFwiIC8+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRydW5jYXRlIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC16aW5jLTkwMCBkYXJrOnRleHQtemluYy0xMDBcIj5cbiAgICAgICAgICAgICAgICB7bmFtZX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgcm91bmRlZC1mdWxsIHB4LTIgcHktMSB0ZXh0LXhzIGZvbnQtbWVkaXVtICR7c3RhdHVzU3R5bGVzfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtTdHJpbmcoc3RhdHVzKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHtpc0V4cGFuZGVkICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBncmlkIGdhcC00XCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIHRleHQtemluYy01MDAgZGFyazp0ZXh0LXppbmMtNDAwXCI+XG4gICAgICAgICAgICAgICAgICBBcmd1bWVudHNcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8cHJlIGNsYXNzTmFtZT1cIm10LTIgbWF4LWgtNjQgb3ZlcmZsb3ctYXV0byByb3VuZGVkLW1kIGJnLXppbmMtNTAgZGFyazpiZy16aW5jLTgwMC82MCBwLTMgdGV4dC14cyBsZWFkaW5nLXJlbGF4ZWQgdGV4dC16aW5jLTgwMCBkYXJrOnRleHQtemluYy0yMDAgd2hpdGVzcGFjZS1wcmUtd3JhcCBicmVhay13b3Jkc1wiPlxuICAgICAgICAgICAgICAgICAge0pTT04uc3RyaW5naWZ5KGFyZ3MgPz8ge30sIG51bGwsIDIpfVxuICAgICAgICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICB7cmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgdGV4dC16aW5jLTUwMCBkYXJrOnRleHQtemluYy00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgUmVzdWx0XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3NOYW1lPVwibXQtMiBtYXgtaC02NCBvdmVyZmxvdy1hdXRvIHJvdW5kZWQtbWQgYmctemluYy01MCBkYXJrOmJnLXppbmMtODAwLzYwIHAtMyB0ZXh0LXhzIGxlYWRpbmctcmVsYXhlZCB0ZXh0LXppbmMtODAwIGRhcms6dGV4dC16aW5jLTIwMCB3aGl0ZXNwYWNlLXByZS13cmFwIGJyZWFrLXdvcmRzXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0eXBlb2YgcmVzdWx0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICA6IEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgMil9XG4gICAgICAgICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbn0pO1xuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiZm9yd2FyZFJlZiIsInVzZUltcGVyYXRpdmVIYW5kbGUiLCJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJ0d01lcmdlIiwianN4IiwianN4cyIsIlJlYWN0IiwiTWVtb2l6ZWRTbG90V3JhcHBlciIsInZhbHVlIiwiQ29waWxvdENoYXRJbnB1dCIsIlRleHRBcmVhIiwiQ2hlY2siLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInoiLCJNQ1BBcHBzQWN0aXZpdHlSZW5kZXJlciIsImNvcGlsb3RraXQiLCJERUZBVUxUX0FHRU5UX0lEIiwiVG9vbENhbGxSZW5kZXJlciIsInVzZVJlZHVjZXIiLCJVc2VBZ2VudFVwZGF0ZSIsInN1Z2dlc3Rpb25zIiwiRnJhZ21lbnQiLCJDb3BpbG90Q2hhdEFzc2lzdGFudE1lc3NhZ2UiLCJDb3B5IiwiQ29waWxvdENoYXRVc2VyTWVzc2FnZSIsIkxvYWRlcjIiLCJDb3BpbG90Q2hhdFN1Z2dlc3Rpb25QaWxsIiwiRGVmYXVsdENvbnRhaW5lciIsIkNvcGlsb3RDaGF0U3VnZ2VzdGlvblZpZXciLCJNZW1vaXplZEFzc2lzdGFudE1lc3NhZ2UiLCJNZW1vaXplZFVzZXJNZXNzYWdlIiwiTWVtb2l6ZWRBY3Rpdml0eU1lc3NhZ2UiLCJNZW1vaXplZEN1c3RvbU1lc3NhZ2UiLCJDb3BpbG90Q2hhdFZpZXciLCJyYW5kb21VVUlEIiwiVHJhbnNjcmlwdGlvbkVycm9yQ29kZSIsImFnZW50IiwiQ29waWxvdENoYXQiLCJYIiwiQ29waWxvdENoYXRUb2dnbGVCdXR0b24iLCJDb3BpbG90TW9kYWxIZWFkZXIiLCJDb3BpbG90U2lkZWJhclZpZXciLCJDb3BpbG90UG9wdXBWaWV3Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/react/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/client/dist/index.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@copilotkitnext/react/node_modules/@ag-ui/client/dist/index.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIConnectNotImplementedError: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIConnectNotImplementedError),\n/* harmony export */   AGUIError: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError),\n/* harmony export */   AbstractAgent: () => (/* binding */ W),\n/* harmony export */   ActivityDeltaEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ActivityDeltaEventSchema),\n/* harmony export */   ActivityMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ActivityMessageSchema),\n/* harmony export */   ActivitySnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ActivitySnapshotEventSchema),\n/* harmony export */   AssistantMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AssistantMessageSchema),\n/* harmony export */   BackwardCompatibility_0_0_39: () => (/* binding */ J),\n/* harmony export */   BaseEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.BaseEventSchema),\n/* harmony export */   BaseMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.BaseMessageSchema),\n/* harmony export */   BinaryInputContentSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.BinaryInputContentSchema),\n/* harmony export */   ContextSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ContextSchema),\n/* harmony export */   CustomEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas),\n/* harmony export */   EventType: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType),\n/* harmony export */   FilterToolCallsMiddleware: () => (/* binding */ Q),\n/* harmony export */   FunctionCallSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.FunctionCallSchema),\n/* harmony export */   FunctionMiddleware: () => (/* binding */ K),\n/* harmony export */   HttpAgent: () => (/* binding */ ot),\n/* harmony export */   InputContentSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.InputContentSchema),\n/* harmony export */   MessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.MessagesSnapshotEventSchema),\n/* harmony export */   Middleware: () => (/* binding */ k),\n/* harmony export */   RawEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunErrorEventSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunFinishedEventSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.RunStartedEventSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepFinishedEventSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.StepStartedEventSchema),\n/* harmony export */   SystemMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.SystemMessageSchema),\n/* harmony export */   TextInputContentSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextInputContentSchema),\n/* harmony export */   TextMessageChunkEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageChunkEventSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.TextMessageStartEventSchema),\n/* harmony export */   ThinkingEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingEndEventSchema),\n/* harmony export */   ThinkingStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingStartEventSchema),\n/* harmony export */   ThinkingTextMessageContentEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageContentEventSchema),\n/* harmony export */   ThinkingTextMessageEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageEndEventSchema),\n/* harmony export */   ThinkingTextMessageStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ThinkingTextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallArgsEventSchema),\n/* harmony export */   ToolCallChunkEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallChunkEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallEndEventSchema),\n/* harmony export */   ToolCallResultEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallResultEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.ToolSchema),\n/* harmony export */   UserMessageSchema: () => (/* reexport safe */ _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.UserMessageSchema),\n/* harmony export */   compactEvents: () => (/* binding */ he),\n/* harmony export */   convertToLegacyEvents: () => (/* binding */ at),\n/* harmony export */   defaultApplyEvents: () => (/* binding */ $),\n/* harmony export */   parseProtoStream: () => (/* binding */ nt),\n/* harmony export */   parseSSEStream: () => (/* binding */ et),\n/* harmony export */   randomUUID: () => (/* binding */ Re),\n/* harmony export */   runHttpRequest: () => (/* binding */ tt),\n/* harmony export */   structuredClone_: () => (/* binding */ y),\n/* harmony export */   transformChunks: () => (/* binding */ j),\n/* harmony export */   transformHttpEventStream: () => (/* binding */ st),\n/* harmony export */   verifyEvents: () => (/* binding */ z)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ag-ui/core */ \"(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/core/dist/index.mjs\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ \"(ssr)/./node_modules/rxjs/dist/cjs/operators/index.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/cjs/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var fast_json_patch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fast-json-patch */ \"(ssr)/./node_modules/fast-json-patch/index.mjs\");\n/* harmony import */ var untruncate_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! untruncate-json */ \"(ssr)/./node_modules/untruncate-json/dist/esm/index.js\");\n/* harmony import */ var _ag_ui_proto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ag-ui/proto */ \"(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/proto/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var compare_versions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! compare-versions */ \"(ssr)/./node_modules/compare-versions/lib/esm/compareVersions.js\");\nvar xt=Object.defineProperty,_t=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var rt=(l,a,e)=>a in l?xt(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,N=(l,a)=>{for(var e in a||(a={}))it.call(a,e)&&rt(l,e,a[e]);if(Y)for(var e of Y(a))lt.call(a,e)&&rt(l,e,a[e]);return l},G=(l,a)=>_t(l,Nt(a));var gt=(l,a)=>{var e={};for(var n in l)it.call(l,n)&&a.indexOf(n)<0&&(e[n]=l[n]);if(l!=null&&Y)for(var n of Y(l))a.indexOf(n)<0&&lt.call(l,n)&&(e[n]=l[n]);return e};var y=l=>{if(typeof structuredClone==\"function\")return structuredClone(l);try{return JSON.parse(JSON.stringify(l))}catch(a){return N({},l)}};function Re(){return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])()}async function x(l,a,e,n){let t=a,s=e,r;for(let o of l)try{let i=await n(o,y(t),y(s));if(i===void 0)continue;if(i.messages!==void 0&&(t=i.messages),i.state!==void 0&&(s=i.state),r=i.stopPropagation,r===!0)break}catch(i){ false||process.env.JEST_WORKER_ID!==void 0||console.error(\"Subscriber error:\",i);continue}return N(N(N({},JSON.stringify(t)!==JSON.stringify(a)?{messages:t}:{}),JSON.stringify(s)!==JSON.stringify(e)?{state:s}:{}),r!==void 0?{stopPropagation:r}:{})}var $=(l,a,e,n)=>{let t=y(e.messages),s=y(l.state),r={},o=d=>{d.messages!==void 0&&(t=d.messages,r.messages=d.messages),d.state!==void 0&&(s=d.state,r.state=d.state)},i=()=>{let d=y(r);return r={},d.messages!==void 0||d.state!==void 0?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(d):rxjs__WEBPACK_IMPORTED_MODULE_3__.EMPTY};return a.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.concatMap)(async d=>{var T,v,c,b,U;let I=await x(n,t,s,(E,g,p)=>{var m;return(m=E.onEvent)==null?void 0:m.call(E,{event:d,agent:e,input:l,messages:g,state:p})});if(o(I),I.stopPropagation===!0)return i();switch(d.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onTextMessageStartEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{messageId:g,role:p=\"assistant\"}=d,m={id:g,role:p,content:\"\"};t.push(m),o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let{messageId:E,delta:g}=d,p=t.find(u=>u.id===E);if(!p)return console.warn(`TEXT_MESSAGE_CONTENT: No message found with ID '${E}'`),i();let m=await x(n,t,s,(u,A,h)=>{var _;return(_=u.onTextMessageContentEvent)==null?void 0:_.call(u,{event:d,messages:A,state:h,agent:e,input:l,textMessageBuffer:typeof p.content==\"string\"?p.content:\"\"})});if(o(m),m.stopPropagation!==!0){let u=typeof p.content==\"string\"?p.content:\"\";p.content=`${u}${g}`,o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:{let{messageId:E}=d,g=t.find(m=>m.id===E);if(!g)return console.warn(`TEXT_MESSAGE_END: No message found with ID '${E}'`),i();let p=await x(n,t,s,(m,u,A)=>{var h;return(h=m.onTextMessageEndEvent)==null?void 0:h.call(m,{event:d,messages:u,state:A,agent:e,input:l,textMessageBuffer:typeof g.content==\"string\"?g.content:\"\"})});return o(p),await Promise.all(n.map(m=>{var u;(u=m.onNewMessage)==null||u.call(m,{message:g,messages:t,state:s,agent:e,input:l})})),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onToolCallStartEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{toolCallId:g,toolCallName:p,parentMessageId:m}=d,u;m&&t.length>0&&t[t.length-1].id===m?u=t[t.length-1]:(u={id:m||g,role:\"assistant\",toolCalls:[]},t.push(u)),(T=u.toolCalls)!=null||(u.toolCalls=[]),u.toolCalls.push({id:g,type:\"function\",function:{name:p,arguments:\"\"}}),o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let{toolCallId:E,delta:g}=d,p=t.find(A=>{var h;return(h=A.toolCalls)==null?void 0:h.some(_=>_.id===E)});if(!p)return console.warn(`TOOL_CALL_ARGS: No message found containing tool call with ID '${E}'`),i();let m=p.toolCalls.find(A=>A.id===E);if(!m)return console.warn(`TOOL_CALL_ARGS: No tool call found with ID '${E}'`),i();let u=await x(n,t,s,(A,h,_)=>{var Z;let H=m.function.arguments,F=m.function.name,X={};try{X=(0,untruncate_json__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(H)}catch(ye){}return(Z=A.onToolCallArgsEvent)==null?void 0:Z.call(A,{event:d,messages:h,state:_,agent:e,input:l,toolCallBuffer:H,toolCallName:F,partialToolCallArgs:X})});return o(u),u.stopPropagation!==!0&&(m.function.arguments+=g,o({messages:t})),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:{let{toolCallId:E}=d,g=t.find(u=>{var A;return(A=u.toolCalls)==null?void 0:A.some(h=>h.id===E)});if(!g)return console.warn(`TOOL_CALL_END: No message found containing tool call with ID '${E}'`),i();let p=g.toolCalls.find(u=>u.id===E);if(!p)return console.warn(`TOOL_CALL_END: No tool call found with ID '${E}'`),i();let m=await x(n,t,s,(u,A,h)=>{var X;let _=p.function.arguments,H=p.function.name,F={};try{F=JSON.parse(_)}catch(Z){}return(X=u.onToolCallEndEvent)==null?void 0:X.call(u,{event:d,messages:A,state:h,agent:e,input:l,toolCallName:H,toolCallArgs:F})});return o(m),await Promise.all(n.map(u=>{var A;(A=u.onNewToolCall)==null||A.call(u,{toolCall:p,messages:t,state:s,agent:e,input:l})})),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onToolCallResultEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{messageId:g,toolCallId:p,content:m,role:u}=d,A={id:g,toolCallId:p,role:u||\"tool\",content:m};t.push(A),await Promise.all(n.map(h=>{var _;(_=h.onNewMessage)==null||_.call(h,{message:A,messages:t,state:s,agent:e,input:l})})),o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStateSnapshotEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{snapshot:g}=d;s=g,o({state:s})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStateDeltaEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{delta:g}=d;try{s=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_2__.applyPatch)(s,g,!0,!1).newDocument,o({state:s})}catch(p){let m=p instanceof Error?p.message:String(p);console.warn(`Failed to apply state patch:\nCurrent state: ${JSON.stringify(s,null,2)}\nPatch operations: ${JSON.stringify(g,null,2)}\nError: ${m}`)}}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onMessagesSnapshotEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let{messages:g}=d;t=g,o({messages:t})}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_SNAPSHOT:{let E=d,g=t.findIndex(h=>h.id===E.messageId),p=g>=0?t[g]:void 0,m=(p==null?void 0:p.role)===\"activity\"?p:void 0,u=(v=E.replace)!=null?v:!0,A=await x(n,t,s,(h,_,H)=>{var F;return(F=h.onActivitySnapshotEvent)==null?void 0:F.call(h,{event:E,messages:_,state:H,agent:e,input:l,activityMessage:m,existingMessage:p})});if(o(A),A.stopPropagation!==!0){let h={id:E.messageId,role:\"activity\",activityType:E.activityType,content:y(E.content)},_;g===-1?(t.push(h),_=h):m?u&&(t[g]=G(N({},m),{activityType:E.activityType,content:y(E.content)})):u&&(t[g]=h,_=h),o({messages:t}),_&&await Promise.all(n.map(H=>{var F;return(F=H.onNewMessage)==null?void 0:F.call(H,{message:_,messages:t,state:s,agent:e,input:l})}))}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_DELTA:{let E=d,g=t.findIndex(A=>A.id===E.messageId);if(g===-1)return console.warn(`ACTIVITY_DELTA: No message found with ID '${E.messageId}' to apply patch`),i();let p=t[g];if(p.role!==\"activity\")return console.warn(`ACTIVITY_DELTA: Message '${E.messageId}' is not an activity message`),i();let m=p,u=await x(n,t,s,(A,h,_)=>{var H;return(H=A.onActivityDeltaEvent)==null?void 0:H.call(A,{event:E,messages:h,state:_,agent:e,input:l,activityMessage:m})});if(o(u),u.stopPropagation!==!0)try{let A=y((c=m.content)!=null?c:{}),_=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_2__.applyPatch)(A,(b=E.patch)!=null?b:[],!0,!1).newDocument;t[g]=G(N({},m),{content:y(_),activityType:E.activityType}),o({messages:t})}catch(A){let h=A instanceof Error?A.message:String(A);console.warn(`Failed to apply activity patch for '${E.messageId}': ${h}`)}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRawEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onCustomEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRunStartedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});if(o(E),E.stopPropagation!==!0){let g=d;if((U=g.input)!=null&&U.messages){for(let p of g.input.messages)t.find(u=>u.id===p.id)||t.push(p);o({messages:t})}}return i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRunFinishedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l,result:d.result})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onRunErrorEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStepStartedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:{let E=await x(n,t,s,(g,p,m)=>{var u;return(u=g.onStepFinishedEvent)==null?void 0:u.call(g,{event:d,messages:p,state:m,agent:e,input:l})});return o(E),i()}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CHUNK:throw new Error(\"TEXT_MESSAGE_CHUNK must be tranformed before being applied\");case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_CHUNK:throw new Error(\"TOOL_CALL_CHUNK must be tranformed before being applied\");case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_START:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_END:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_START:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_CONTENT:return i();case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_END:return i()}let S=d.type;return i()}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeAll)(),n.length>0?(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.defaultIfEmpty)({}):d=>d)};var z=l=>a=>{let e=new Map,n=new Map,t=!1,s=!1,r=!1,o=new Map,i=!1,d=!1,I=!1,S=()=>{e.clear(),n.clear(),o.clear(),i=!1,d=!1,t=!1,s=!1,I=!0};return a.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeMap)(T=>{let v=T.type;if(l&&console.debug(\"[VERIFY]:\",JSON.stringify(T)),s)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${v}': The run has already errored with 'RUN_ERROR'. No further events can be sent.`));if(t&&v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR&&v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send event type '${v}': The run has already finished with 'RUN_FINISHED'. Start a new run with 'RUN_STARTED'.`));if(r){if(v===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED){if(I&&!t)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'RUN_STARTED' while a run is still active. The previous run must be finished with 'RUN_FINISHED' before starting a new run.\"));t&&S()}}else if(r=!0,v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED&&v!==_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR)return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"First event must be 'RUN_STARTED'\"));switch(v){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let c=T.messageId;return e.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_START' event: A text message with ID '${c}' is already in progress. Complete it with 'TEXT_MESSAGE_END' first.`)):(e.set(c,!0),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let c=T.messageId;return e.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_CONTENT' event: No active text message found with ID '${c}'. Start a text message with 'TEXT_MESSAGE_START' first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:{let c=T.messageId;return e.has(c)?(e.delete(c),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TEXT_MESSAGE_END' event: No active text message found with ID '${c}'. A 'TEXT_MESSAGE_START' event must be sent first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let c=T.toolCallId;return n.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_START' event: A tool call with ID '${c}' is already in progress. Complete it with 'TOOL_CALL_END' first.`)):(n.set(c,!0),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let c=T.toolCallId;return n.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_ARGS' event: No active tool call found with ID '${c}'. Start a tool call with 'TOOL_CALL_START' first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:{let c=T.toolCallId;return n.has(c)?(n.delete(c),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'TOOL_CALL_END' event: No active tool call found with ID '${c}'. A 'TOOL_CALL_START' event must be sent first.`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:{let c=T.stepName;return o.has(c)?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Step \"${c}\" is already active for 'STEP_STARTED'`)):(o.set(c,!0),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:{let c=T.stepName;return o.has(c)?(o.delete(c),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'STEP_FINISHED' for step \"${c}\" that was not started`))}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:return I=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:{if(o.size>0){let c=Array.from(o.keys()).join(\", \");return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'RUN_FINISHED' while steps are still active: ${c}`))}if(e.size>0){let c=Array.from(e.keys()).join(\", \");return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'RUN_FINISHED' while text messages are still active: ${c}`))}if(n.size>0){let c=Array.from(n.keys()).join(\", \");return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(`Cannot send 'RUN_FINISHED' while tool calls are still active: ${c}`))}return t=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:return s=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T);case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_START:return i?d?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking message is already in progress. Complete it with 'THINKING_TEXT_MESSAGE_END' first.\")):(d=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking step is not in progress. Create one with 'THINKING_START' first.\"));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_CONTENT:return d?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_CONTENT' event: No active thinking message found. Start a message with 'THINKING_TEXT_MESSAGE_START' first.\"));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_END:return d?(d=!1,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_TEXT_MESSAGE_END' event: No active thinking message found. A 'THINKING_TEXT_MESSAGE_START' event must be sent first.\"));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_START:return i?(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_START' event: A thinking step is already in progress. End it with 'THINKING_END' first.\")):(i=!0,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T));case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_END:return i?(i=!1,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIError(\"Cannot send 'THINKING_END' event: No active thinking step found. A 'THINKING_START' event must be sent first.\"));default:return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(T)}}))};var tt=(l,a)=>(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.defer)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.from)(fetch(l,a))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.switchMap)(e=>{var s;if(!e.ok){let r=e.headers.get(\"content-type\")||\"\";return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.from)(e.text()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeMap)(o=>{let i=o;if(r.includes(\"application/json\"))try{i=JSON.parse(o)}catch(I){}let d=new Error(`HTTP ${e.status}: ${typeof i==\"string\"?i:JSON.stringify(i)}`);return d.status=e.status,d.payload=i,(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>d)}))}let n={type:\"headers\",status:e.status,headers:e.headers},t=(s=e.body)==null?void 0:s.getReader();return t?new rxjs__WEBPACK_IMPORTED_MODULE_3__.Observable(r=>(r.next(n),(async()=>{try{for(;;){let{done:o,value:i}=await t.read();if(o)break;let d={type:\"data\",data:i};r.next(d)}r.complete()}catch(o){r.error(o)}})(),()=>{t.cancel().catch(o=>{if((o==null?void 0:o.name)!==\"AbortError\")throw o})})):(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.throwError)(()=>new Error(\"Failed to getReader() from response\"))}));var et=l=>{let a=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject,e=new TextDecoder(\"utf-8\",{fatal:!1}),n=\"\";l.subscribe({next:s=>{if(s.type!==\"headers\"&&s.type===\"data\"&&s.data){let r=e.decode(s.data,{stream:!0});n+=r;let o=n.split(/\\n\\n/);n=o.pop()||\"\";for(let i of o)t(i)}},error:s=>a.error(s),complete:()=>{n&&(n+=e.decode(),t(n)),a.complete()}});function t(s){let r=s.split(`\n`),o=[];for(let i of r)i.startsWith(\"data: \")&&o.push(i.slice(6));if(o.length>0)try{let i=o.join(`\n`),d=JSON.parse(i);a.next(d)}catch(i){a.error(i)}}return a.asObservable()};var nt=l=>{let a=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject,e=new Uint8Array(0);l.subscribe({next:t=>{if(t.type!==\"headers\"&&t.type===\"data\"&&t.data){let s=new Uint8Array(e.length+t.data.length);s.set(e,0),s.set(t.data,e.length),e=s,n()}},error:t=>a.error(t),complete:()=>{if(e.length>0)try{n()}catch(t){console.warn(\"Incomplete or invalid protocol buffer data at stream end\")}a.complete()}});function n(){for(;e.length>=4;){let r=4+new DataView(e.buffer,e.byteOffset,4).getUint32(0,!1);if(e.length<r)break;try{let o=e.slice(4,r),i=_ag_ui_proto__WEBPACK_IMPORTED_MODULE_6__.decode(o);a.next(i),e=e.slice(r)}catch(o){let i=o instanceof Error?o.message:String(o);a.error(new Error(`Failed to decode protocol buffer message: ${i}`));return}}}return a.asObservable()};var st=l=>{let a=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject,e=new rxjs__WEBPACK_IMPORTED_MODULE_3__.ReplaySubject,n=!1;return l.subscribe({next:t=>{e.next(t),t.type===\"headers\"&&!n?(n=!0,t.headers.get(\"content-type\")===_ag_ui_proto__WEBPACK_IMPORTED_MODULE_6__.AGUI_MEDIA_TYPE?nt(e).subscribe({next:r=>a.next(r),error:r=>a.error(r),complete:()=>a.complete()}):et(e).subscribe({next:r=>{try{let o=_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas.parse(r);a.next(o)}catch(o){a.error(o)}},error:r=>{if((r==null?void 0:r.name)===\"AbortError\"){a.next({type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR,rawEvent:r}),a.complete();return}return a.error(r)},complete:()=>a.complete()})):n||a.error(new Error(\"No headers event received before data events\"))},error:t=>{e.error(t),a.error(t)},complete:()=>{e.complete()}}),a.asObservable()};var C=zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\"TextMessageStart\",\"TextMessageContent\",\"TextMessageEnd\",\"ActionExecutionStart\",\"ActionExecutionArgs\",\"ActionExecutionEnd\",\"ActionExecutionResult\",\"AgentStateMessage\",\"MetaEvent\",\"RunStarted\",\"RunFinished\",\"RunError\",\"NodeStarted\",\"NodeFinished\"]),Vt=zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\"LangGraphInterruptEvent\",\"PredictState\",\"Exit\"]),Wt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.TextMessageStart),messageId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),role:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),Yt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.TextMessageContent),messageId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),content:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),qt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.TextMessageEnd),messageId:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),Qt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionStart),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),actionName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),Zt=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionArgs),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),args:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),te=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionEnd),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),ee=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.ActionExecutionResult),actionName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),result:zod__WEBPACK_IMPORTED_MODULE_7__.string()}),ne=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.AgentStateMessage),threadId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),agentName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),nodeName:zod__WEBPACK_IMPORTED_MODULE_7__.string(),runId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),active:zod__WEBPACK_IMPORTED_MODULE_7__.boolean(),role:zod__WEBPACK_IMPORTED_MODULE_7__.string(),state:zod__WEBPACK_IMPORTED_MODULE_7__.string(),running:zod__WEBPACK_IMPORTED_MODULE_7__.boolean()}),se=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.MetaEvent),name:Vt,value:zod__WEBPACK_IMPORTED_MODULE_7__.any()}),ae=zod__WEBPACK_IMPORTED_MODULE_7__.object({type:zod__WEBPACK_IMPORTED_MODULE_7__.literal(C.enum.RunError),message:zod__WEBPACK_IMPORTED_MODULE_7__.string(),code:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),Qn=zod__WEBPACK_IMPORTED_MODULE_7__.discriminatedUnion(\"type\",[Wt,Yt,qt,Qt,Zt,te,ee,ne,se,ae]),Zn=zod__WEBPACK_IMPORTED_MODULE_7__.object({id:zod__WEBPACK_IMPORTED_MODULE_7__.string(),role:zod__WEBPACK_IMPORTED_MODULE_7__.string(),content:zod__WEBPACK_IMPORTED_MODULE_7__.string(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),ts=zod__WEBPACK_IMPORTED_MODULE_7__.object({id:zod__WEBPACK_IMPORTED_MODULE_7__.string(),name:zod__WEBPACK_IMPORTED_MODULE_7__.string(),arguments:zod__WEBPACK_IMPORTED_MODULE_7__.any(),parentMessageId:zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()}),es=zod__WEBPACK_IMPORTED_MODULE_7__.object({id:zod__WEBPACK_IMPORTED_MODULE_7__.string(),result:zod__WEBPACK_IMPORTED_MODULE_7__.any(),actionExecutionId:zod__WEBPACK_IMPORTED_MODULE_7__.string(),actionName:zod__WEBPACK_IMPORTED_MODULE_7__.string()});var le=l=>{if(typeof l==\"string\")return l;if(!Array.isArray(l))return;let a=l.filter(e=>e.type===\"text\").map(e=>e.text).filter(e=>e.length>0);if(a.length!==0)return a.join(`\n`)},at=(l,a,e)=>n=>{let t={},s=!0,r=!0,o=\"\",i=null,d=null,I=[],S={},T=v=>{typeof v==\"object\"&&v!==null&&(\"messages\"in v&&delete v.messages,t=v)};return n.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.mergeMap)(v=>{switch(v.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:{let c=v;return[{type:C.enum.TextMessageStart,messageId:c.messageId,role:c.role}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:{let c=v;return[{type:C.enum.TextMessageContent,messageId:c.messageId,content:c.delta}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:{let c=v;return[{type:C.enum.TextMessageEnd,messageId:c.messageId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:{let c=v;return I.push({id:c.toolCallId,type:\"function\",function:{name:c.toolCallName,arguments:\"\"}}),r=!0,S[c.toolCallId]=c.toolCallName,[{type:C.enum.ActionExecutionStart,actionExecutionId:c.toolCallId,actionName:c.toolCallName,parentMessageId:c.parentMessageId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:{let c=v,b=I.find(E=>E.id===c.toolCallId);if(!b)return console.warn(`TOOL_CALL_ARGS: No tool call found with ID '${c.toolCallId}'`),[];b.function.arguments+=c.delta;let U=!1;if(d){let E=d.find(g=>g.tool==b.function.name);if(E)try{let g=JSON.parse((0,untruncate_json__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(b.function.arguments));E.tool_argument&&E.tool_argument in g?(T(G(N({},t),{[E.state_key]:g[E.tool_argument]})),U=!0):E.tool_argument||(T(G(N({},t),{[E.state_key]:g})),U=!0)}catch(g){}}return[{type:C.enum.ActionExecutionArgs,actionExecutionId:c.toolCallId,args:c.delta},...U?[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:r}]:[]]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:{let c=v;return[{type:C.enum.ActionExecutionEnd,actionExecutionId:c.toolCallId}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT:{let c=v;return[{type:C.enum.ActionExecutionResult,actionExecutionId:c.toolCallId,result:c.content,actionName:S[c.toolCallId]||\"unknown\"}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:return[];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:{let c=v;switch(c.name){case\"Exit\":s=!1;break;case\"PredictState\":d=c.value;break}return[{type:C.enum.MetaEvent,name:c.name,value:c.value}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:return T(v.snapshot),[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:r}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:{let b=(0,fast_json_patch__WEBPACK_IMPORTED_MODULE_2__.applyPatch)(t,v.delta,!0,!1);return b?(T(b.newDocument),[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:r}]):[]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:return i=v.messages,[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(N(N({},t),i?{messages:i}:{})),active:!0}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:return[];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:return i&&(t.messages=i),Object.keys(t).length===0?[]:[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(N(N({},t),i?{messages:ge(i)}:{})),active:!1}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:{let c=v;return[{type:C.enum.RunError,message:c.message,code:c.code}]}case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:return o=v.stepName,I=[],d=null,[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:!0}];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:return I=[],d=null,[{type:C.enum.AgentStateMessage,threadId:l,agentName:e,nodeName:o,runId:a,running:s,role:\"assistant\",state:JSON.stringify(t),active:!1}];default:return[]}}))};function ge(l){var e;let a=[];for(let n of l)if(n.role===\"assistant\"||n.role===\"user\"||n.role===\"system\"){let t=le(n.content);if(t){let s={id:n.id,role:n.role,content:t};a.push(s)}if(n.role===\"assistant\"&&n.toolCalls&&n.toolCalls.length>0)for(let s of n.toolCalls){let r={id:s.id,name:s.function.name,arguments:JSON.parse(s.function.arguments),parentMessageId:n.id};a.push(r)}}else if(n.role===\"tool\"){let t=\"unknown\";for(let r of l)if(r.role===\"assistant\"&&((e=r.toolCalls)!=null&&e.length)){for(let o of r.toolCalls)if(o.id===n.toolCallId){t=o.function.name;break}}let s={id:n.id,result:n.content,actionExecutionId:n.toolCallId,actionName:t};a.push(s)}return a}var j=l=>a=>{let e,n,t,s=()=>{if(!e||t!==\"text\")throw new Error(\"No text message to close\");let i={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END,messageId:e.messageId};return t=void 0,e=void 0,l&&console.debug(\"[TRANSFORM]: TEXT_MESSAGE_END\",JSON.stringify(i)),i},r=()=>{if(!n||t!==\"tool\")throw new Error(\"No tool call to close\");let i={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END,toolCallId:n.toolCallId};return t=void 0,n=void 0,l&&console.debug(\"[TRANSFORM]: TOOL_CALL_END\",JSON.stringify(i)),i},o=()=>t===\"text\"?[s()]:t===\"tool\"?[r()]:[];return a.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.mergeMap)(i=>{switch(i.type){case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_SNAPSHOT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.CUSTOM:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_STARTED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_FINISHED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RUN_ERROR:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_STARTED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STEP_FINISHED:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_END:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_START:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_CONTENT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.THINKING_TEXT_MESSAGE_END:return[...o(),i];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.RAW:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_SNAPSHOT:case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.ACTIVITY_DELTA:return[i];case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CHUNK:let I=i,S=[];if((t!==\"text\"||I.messageId!==void 0&&I.messageId!==(e==null?void 0:e.messageId))&&S.push(...o()),t!==\"text\"){if(I.messageId===void 0)throw new Error(\"First TEXT_MESSAGE_CHUNK must have a messageId\");e={messageId:I.messageId},t=\"text\";let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START,messageId:I.messageId,role:I.role||\"assistant\"};S.push(c),l&&console.debug(\"[TRANSFORM]: TEXT_MESSAGE_START\",JSON.stringify(c))}if(I.delta!==void 0){let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT,messageId:e.messageId,delta:I.delta};S.push(c),l&&console.debug(\"[TRANSFORM]: TEXT_MESSAGE_CONTENT\",JSON.stringify(c))}return S;case _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_CHUNK:let T=i,v=[];if((t!==\"tool\"||T.toolCallId!==void 0&&T.toolCallId!==(n==null?void 0:n.toolCallId))&&v.push(...o()),t!==\"tool\"){if(T.toolCallId===void 0)throw new Error(\"First TOOL_CALL_CHUNK must have a toolCallId\");if(T.toolCallName===void 0)throw new Error(\"First TOOL_CALL_CHUNK must have a toolCallName\");n={toolCallId:T.toolCallId,toolCallName:T.toolCallName,parentMessageId:T.parentMessageId},t=\"tool\";let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START,toolCallId:T.toolCallId,toolCallName:T.toolCallName,parentMessageId:T.parentMessageId};v.push(c),l&&console.debug(\"[TRANSFORM]: TOOL_CALL_START\",JSON.stringify(c))}if(T.delta!==void 0){let c={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS,toolCallId:n.toolCallId,delta:T.delta};v.push(c),l&&console.debug(\"[TRANSFORM]: TOOL_CALL_ARGS\",JSON.stringify(c))}return v}let d=i.type;return[]}),(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.finalize)(()=>{o()}))};var k=class{runNext(a,e){return e.run(a).pipe(j(!1))}runNextWithState(a,e){let n=y(a.messages||[]),t=y(a.state||{}),s=new rxjs__WEBPACK_IMPORTED_MODULE_3__.ReplaySubject;return $(a,s,e,[]).subscribe(o=>{o.messages!==void 0&&(n=o.messages),o.state!==void 0&&(t=o.state)}),this.runNext(a,e).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.concatMap)(async o=>(s.next(o),await new Promise(i=>setTimeout(i,0)),{event:o,messages:y(n),state:y(t)})))}},K=class extends k{constructor(e){super();this.fn=e}run(e,n){return this.fn(e,n)}};var Q=class extends k{constructor(e){super();this.blockedToolCallIds=new Set;if(e.allowedToolCalls&&e.disallowedToolCalls)throw new Error(\"Cannot specify both allowedToolCalls and disallowedToolCalls\");if(!e.allowedToolCalls&&!e.disallowedToolCalls)throw new Error(\"Must specify either allowedToolCalls or disallowedToolCalls\");e.allowedToolCalls?this.allowedTools=new Set(e.allowedToolCalls):e.disallowedToolCalls&&(this.disallowedTools=new Set(e.disallowedToolCalls))}run(e,n){return this.runNext(e,n).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(t=>{if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START){let s=t;return this.shouldFilterTool(s.toolCallName)?(this.blockedToolCallIds.add(s.toolCallId),!1):!0}if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS){let s=t;return!this.blockedToolCallIds.has(s.toolCallId)}if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END){let s=t;return!this.blockedToolCallIds.has(s.toolCallId)}if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_RESULT){let s=t;return this.blockedToolCallIds.has(s.toolCallId)?(this.blockedToolCallIds.delete(s.toolCallId),!1):!0}return!0}))}shouldFilterTool(e){return this.allowedTools?!this.allowedTools.has(e):this.disallowedTools?this.disallowedTools.has(e):!1}};function me(l){let a=l.content;if(Array.isArray(a)){let e=a.filter(n=>typeof n==\"object\"&&n!==null&&\"type\"in n&&n.type===\"text\"&&typeof n.text==\"string\").map(n=>n.text).join(\"\");return G(N({},l),{content:e})}return typeof a==\"string\"?l:G(N({},l),{content:\"\"})}var J=class extends k{run(a,e){let r=a,{parentRunId:n}=r,t=gt(r,[\"parentRunId\"]),s=G(N({},t),{messages:t.messages.map(me)});return this.runNext(s,e)}};var mt={name:\"@ag-ui/client\",author:\"Markus Ecker <markus.ecker@gmail.com>\",version:\"0.0.42\",private:!1,publishConfig:{access:\"public\"},main:\"./dist/index.js\",module:\"./dist/index.mjs\",types:\"./dist/index.d.ts\",sideEffects:!1,files:[\"dist/**\",\"README.md\"],scripts:{build:\"tsup\",dev:\"tsup --watch\",clean:\"rm -rf dist .turbo node_modules\",typecheck:\"tsc --noEmit\",test:\"jest\",\"link:global\":\"pnpm link --global\",\"unlink:global\":\"pnpm unlink --global\"},dependencies:{\"@ag-ui/core\":\"workspace:*\",\"@ag-ui/encoder\":\"workspace:*\",\"@ag-ui/proto\":\"workspace:*\",\"@types/uuid\":\"^10.0.0\",\"compare-versions\":\"^6.1.1\",\"fast-json-patch\":\"^3.1.1\",rxjs:\"7.8.1\",\"untruncate-json\":\"^0.0.1\",uuid:\"^11.1.0\",zod:\"^3.22.4\"},devDependencies:{\"@types/jest\":\"^29.5.14\",\"@types/node\":\"^20.11.19\",jest:\"^29.7.0\",\"ts-jest\":\"^29.1.2\",tsup:\"^8.0.2\",typescript:\"^5.3.3\"}};var W=class{constructor({agentId:a,description:e,threadId:n,initialMessages:t,initialState:s,debug:r}={}){this.debug=!1;this.subscribers=[];this.isRunning=!1;this.middlewares=[];this.agentId=a,this.description=e!=null?e:\"\",this.threadId=n!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),this.messages=y(t!=null?t:[]),this.state=y(s!=null?s:{}),this.debug=r!=null?r:!1,(0,compare_versions__WEBPACK_IMPORTED_MODULE_8__.compareVersions)(this.maxVersion,\"0.0.39\")<=0&&this.middlewares.unshift(new J)}get maxVersion(){return mt.version}subscribe(a){return this.subscribers.push(a),{unsubscribe:()=>{this.subscribers=this.subscribers.filter(e=>e!==a)}}}use(...a){let e=a.map(n=>typeof n==\"function\"?new K(n):n);return this.middlewares.push(...e),this}async runAgent(a,e){var n;try{this.isRunning=!0,this.agentId=(n=this.agentId)!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();let t=this.prepareRunAgentInput(a),s,r=new Set(this.messages.map(S=>S.id)),o=[{onRunFinishedEvent:S=>{s=S.result}},...this.subscribers,e!=null?e:{}];await this.onInitialize(t,o),this.activeRunDetach$=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject;let i;this.activeRunCompletionPromise=new Promise(S=>{i=S});let d=(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.pipe)(()=>this.middlewares.length===0?this.run(t):this.middlewares.reduceRight((T,v)=>({run:c=>v.run(c,T)}),this).run(t),j(this.debug),z(this.debug),S=>S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.takeUntil)(this.activeRunDetach$)),S=>this.apply(t,S,o),S=>this.processApplyEvents(t,S,o),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.catchError)(S=>(this.isRunning=!1,this.onError(t,S,o))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.finalize)(()=>{this.isRunning=!1,this.onFinalize(t,o),i==null||i(),i=void 0,this.activeRunCompletionPromise=void 0,this.activeRunDetach$=void 0}));await (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.lastValueFrom)(d((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(null)));let I=y(this.messages).filter(S=>!r.has(S.id));return{result:s,newMessages:I}}finally{this.isRunning=!1}}connect(a){throw new _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIConnectNotImplementedError}async connectAgent(a,e){var n;try{this.isRunning=!0,this.agentId=(n=this.agentId)!=null?n:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();let t=this.prepareRunAgentInput(a),s,r=new Set(this.messages.map(S=>S.id)),o=[{onRunFinishedEvent:S=>{s=S.result}},...this.subscribers,e!=null?e:{}];await this.onInitialize(t,o),this.activeRunDetach$=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject;let i;this.activeRunCompletionPromise=new Promise(S=>{i=S});let d=(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.pipe)(()=>this.connect(t),j(this.debug),z(this.debug),S=>S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.takeUntil)(this.activeRunDetach$)),S=>this.apply(t,S,o),S=>this.processApplyEvents(t,S,o),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.catchError)(S=>(this.isRunning=!1,S instanceof _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.AGUIConnectNotImplementedError?rxjs__WEBPACK_IMPORTED_MODULE_3__.EMPTY:this.onError(t,S,o))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.finalize)(()=>{this.isRunning=!1,this.onFinalize(t,o),i==null||i(),i=void 0,this.activeRunCompletionPromise=void 0,this.activeRunDetach$=void 0}));await (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.lastValueFrom)(d((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(null)));let I=y(this.messages).filter(S=>!r.has(S.id));return{result:s,newMessages:I}}finally{this.isRunning=!1}}abortRun(){}async detachActiveRun(){var e,n;if(!this.activeRunDetach$)return;let a=(e=this.activeRunCompletionPromise)!=null?e:Promise.resolve();this.activeRunDetach$.next(),(n=this.activeRunDetach$)==null||n.complete(),await a}apply(a,e,n){return $(a,e,this,n)}processApplyEvents(a,e,n){return e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.tap)(t=>{t.messages&&(this.messages=t.messages,n.forEach(s=>{var r;(r=s.onMessagesChanged)==null||r.call(s,{messages:this.messages,state:this.state,agent:this,input:a})})),t.state&&(this.state=t.state,n.forEach(s=>{var r;(r=s.onStateChanged)==null||r.call(s,{state:this.state,messages:this.messages,agent:this,input:a})}))}))}prepareRunAgentInput(a){var t,s,r;let n=y(this.messages).filter(o=>o.role!==\"activity\");return{threadId:this.threadId,runId:(a==null?void 0:a.runId)||(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),tools:y((t=a==null?void 0:a.tools)!=null?t:[]),context:y((s=a==null?void 0:a.context)!=null?s:[]),forwardedProps:y((r=a==null?void 0:a.forwardedProps)!=null?r:{}),state:y(this.state),messages:n}}async onInitialize(a,e){let n=await x(e,this.messages,this.state,(t,s,r)=>{var o;return(o=t.onRunInitialized)==null?void 0:o.call(t,{messages:s,state:r,agent:this,input:a})});(n.messages!==void 0||n.state!==void 0)&&(n.messages&&(this.messages=n.messages,a.messages=n.messages,e.forEach(t=>{var s;(s=t.onMessagesChanged)==null||s.call(t,{messages:this.messages,state:this.state,agent:this,input:a})})),n.state&&(this.state=n.state,a.state=n.state,e.forEach(t=>{var s;(s=t.onStateChanged)==null||s.call(t,{state:this.state,messages:this.messages,agent:this,input:a})})))}onError(a,e,n){return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.from)(x(n,this.messages,this.state,(t,s,r)=>{var o;return(o=t.onRunFailed)==null?void 0:o.call(t,{error:e,messages:s,state:r,agent:this,input:a})})).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(t=>{let s=t;if((s.messages!==void 0||s.state!==void 0)&&(s.messages!==void 0&&(this.messages=s.messages,n.forEach(r=>{var o;(o=r.onMessagesChanged)==null||o.call(r,{messages:this.messages,state:this.state,agent:this,input:a})})),s.state!==void 0&&(this.state=s.state,n.forEach(r=>{var o;(o=r.onStateChanged)==null||o.call(r,{state:this.state,messages:this.messages,agent:this,input:a})}))),s.stopPropagation!==!0)throw console.error(\"Agent execution failed:\",e),e;return{}}))}async onFinalize(a,e){let n=await x(e,this.messages,this.state,(t,s,r)=>{var o;return(o=t.onRunFinalized)==null?void 0:o.call(t,{messages:s,state:r,agent:this,input:a})});(n.messages!==void 0||n.state!==void 0)&&(n.messages!==void 0&&(this.messages=n.messages,e.forEach(t=>{var s;(s=t.onMessagesChanged)==null||s.call(t,{messages:this.messages,state:this.state,agent:this,input:a})})),n.state!==void 0&&(this.state=n.state,e.forEach(t=>{var s;(s=t.onStateChanged)==null||s.call(t,{state:this.state,messages:this.messages,agent:this,input:a})})))}clone(){let a=Object.create(Object.getPrototypeOf(this));return a.agentId=this.agentId,a.description=this.description,a.threadId=this.threadId,a.messages=y(this.messages),a.state=y(this.state),a.debug=this.debug,a.isRunning=this.isRunning,a.subscribers=[...this.subscribers],a.middlewares=[...this.middlewares],a}addMessage(a){this.messages.push(a),(async()=>{var e,n,t;for(let s of this.subscribers)await((e=s.onNewMessage)==null?void 0:e.call(s,{message:a,messages:this.messages,state:this.state,agent:this}));if(a.role===\"assistant\"&&a.toolCalls)for(let s of a.toolCalls)for(let r of this.subscribers)await((n=r.onNewToolCall)==null?void 0:n.call(r,{toolCall:s,messages:this.messages,state:this.state,agent:this}));for(let s of this.subscribers)await((t=s.onMessagesChanged)==null?void 0:t.call(s,{messages:this.messages,state:this.state,agent:this}))})()}addMessages(a){this.messages.push(...a),(async()=>{var e,n,t;for(let s of a){for(let r of this.subscribers)await((e=r.onNewMessage)==null?void 0:e.call(r,{message:s,messages:this.messages,state:this.state,agent:this}));if(s.role===\"assistant\"&&s.toolCalls)for(let r of s.toolCalls)for(let o of this.subscribers)await((n=o.onNewToolCall)==null?void 0:n.call(o,{toolCall:r,messages:this.messages,state:this.state,agent:this}))}for(let s of this.subscribers)await((t=s.onMessagesChanged)==null?void 0:t.call(s,{messages:this.messages,state:this.state,agent:this}))})()}setMessages(a){this.messages=y(a),(async()=>{var e;for(let n of this.subscribers)await((e=n.onMessagesChanged)==null?void 0:e.call(n,{messages:this.messages,state:this.state,agent:this}))})()}setState(a){this.state=y(a),(async()=>{var e;for(let n of this.subscribers)await((e=n.onStateChanged)==null?void 0:e.call(n,{messages:this.messages,state:this.state,agent:this}))})()}legacy_to_be_removed_runAgentBridged(a){var t;this.agentId=(t=this.agentId)!=null?t:(0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();let e=this.prepareRunAgentInput(a);return(this.middlewares.length===0?this.run(e):this.middlewares.reduceRight((r,o)=>({run:i=>o.run(i,r)}),this).run(e)).pipe(j(this.debug),z(this.debug),at(this.threadId,e.runId,this.agentId),s=>s.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(r=>(this.debug&&console.debug(\"[LEGACY]:\",JSON.stringify(r)),r))))}};var ot=class extends W{constructor(e){var n;super(e);this.abortController=new AbortController;this.url=e.url,this.headers=y((n=e.headers)!=null?n:{})}requestInit(e){return{method:\"POST\",headers:G(N({},this.headers),{\"Content-Type\":\"application/json\",Accept:\"text/event-stream\"}),body:JSON.stringify(e),signal:this.abortController.signal}}runAgent(e,n){var t;return this.abortController=(t=e==null?void 0:e.abortController)!=null?t:new AbortController,super.runAgent(e,n)}abortRun(){this.abortController.abort(),super.abortRun()}run(e){let n=tt(this.url,this.requestInit(e));return st(n)}clone(){var s;let e=super.clone();e.url=this.url,e.headers=y((s=this.headers)!=null?s:{});let n=new AbortController,t=this.abortController.signal;return t.aborted&&n.abort(t.reason),e.abortController=n,e}};function he(l){let a=[],e=new Map,n=new Map;for(let t of l)if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_START){let s=t,r=s.messageId;e.has(r)||e.set(r,{contents:[],otherEvents:[]});let o=e.get(r);o.start=s}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT){let s=t,r=s.messageId;e.has(r)||e.set(r,{contents:[],otherEvents:[]}),e.get(r).contents.push(s)}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_END){let s=t,r=s.messageId;e.has(r)||e.set(r,{contents:[],otherEvents:[]});let o=e.get(r);o.end=s,Rt(r,o,a),e.delete(r)}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_START){let s=t,r=s.toolCallId;n.has(r)||n.set(r,{args:[],otherEvents:[]});let o=n.get(r);o.start=s}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS){let s=t,r=s.toolCallId;n.has(r)||n.set(r,{args:[],otherEvents:[]}),n.get(r).args.push(s)}else if(t.type===_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_END){let s=t,r=s.toolCallId;n.has(r)||n.set(r,{args:[],otherEvents:[]});let o=n.get(r);o.end=s,It(r,o,a),n.delete(r)}else{let s=!1;for(let[r,o]of e)if(o.start&&!o.end){o.otherEvents.push(t),s=!0;break}if(!s){for(let[r,o]of n)if(o.start&&!o.end){o.otherEvents.push(t),s=!0;break}}s||a.push(t)}for(let[t,s]of e)Rt(t,s,a);for(let[t,s]of n)It(t,s,a);return a}function Rt(l,a,e){if(a.start&&e.push(a.start),a.contents.length>0){let n=a.contents.map(s=>s.delta).join(\"\"),t={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TEXT_MESSAGE_CONTENT,messageId:l,delta:n};e.push(t)}a.end&&e.push(a.end);for(let n of a.otherEvents)e.push(n)}function It(l,a,e){if(a.start&&e.push(a.start),a.args.length>0){let n=a.args.map(s=>s.delta).join(\"\"),t={type:_ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.TOOL_CALL_ARGS,toolCallId:l,delta:n};e.push(t)}a.end&&e.push(a.end);for(let n of a.otherEvents)e.push(n)}\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3JlYWN0L25vZGVfbW9kdWxlcy9AYWctdWkvY2xpZW50L2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHdEQUF3RCx3Q0FBd0MsbUNBQW1DLGdGQUFnRiwrQkFBK0Isa0RBQWtELG1CQUFtQixxQkFBcUIsNkJBQTZCLGtEQUFrRCxTQUFTLHNCQUFzQixlQUFlLFNBQVMseURBQXlELDBFQUEwRSxVQUFvTSxVQUFVLGdFQUFnRSxJQUFJLHFDQUFxQyxTQUFTLFdBQVcsTUFBTSxjQUFjLE9BQU8sZ0RBQUUsR0FBaUQsMEJBQTBCLGNBQWMsbUJBQW1CLDJCQUEyQix1QkFBdUIsc0dBQXNHLFNBQVMsTUFBNkIsNEVBQTRFLFNBQVMsZUFBZSx3Q0FBd0MsV0FBVyxHQUFHLHlDQUF5QyxRQUFRLEdBQUcsY0FBYyxrQkFBa0IsR0FBRyxFQUFrQyxrQkFBa0IscUNBQXFDLE9BQU8sd0dBQXdHLFFBQVEsV0FBVyxXQUFXLHVDQUF1Qyx3Q0FBRSxJQUFJLHVDQUFFLEVBQUUsY0FBYyx5REFBRSxXQUFXLGNBQWMsOEJBQThCLE1BQU0sMkNBQTJDLDJDQUEyQyxFQUFFLEVBQUUsMENBQTBDLGVBQWUsS0FBSyxrREFBQyxxQkFBcUIsOEJBQThCLE1BQU0sMkRBQTJELDJDQUEyQyxFQUFFLEVBQUUsZ0NBQWdDLElBQUksK0JBQStCLE1BQU0sd0JBQXdCLGFBQWEsV0FBVyxFQUFFLFdBQVcsS0FBSyxrREFBQyx1QkFBdUIsSUFBSSxvQkFBb0IseUJBQXlCLDZFQUE2RSxFQUFFLFFBQVEsOEJBQThCLE1BQU0sNkRBQTZELHFHQUFxRyxFQUFFLEVBQUUsZ0NBQWdDLDhDQUE4QyxhQUFhLEVBQUUsRUFBRSxFQUFFLEtBQUssV0FBVyxFQUFFLFdBQVcsS0FBSyxrREFBQyxt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QUMsc0NBQXNDLFVBQVUscUJBQXFCLHFDQUF3YztBQUN6b25CIiwic291cmNlcyI6WyIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy90cmF2ZWwtdWkvbm9kZV9tb2R1bGVzL0Bjb3BpbG90a2l0bmV4dC9yZWFjdC9ub2RlX21vZHVsZXMvQGFnLXVpL2NsaWVudC9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgeHQ9T2JqZWN0LmRlZmluZVByb3BlcnR5LF90PU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO3ZhciBOdD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yczt2YXIgWT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO3ZhciBpdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGx0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7dmFyIHJ0PShsLGEsZSk9PmEgaW4gbD94dChsLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmV9KTpsW2FdPWUsTj0obCxhKT0+e2Zvcih2YXIgZSBpbiBhfHwoYT17fSkpaXQuY2FsbChhLGUpJiZydChsLGUsYVtlXSk7aWYoWSlmb3IodmFyIGUgb2YgWShhKSlsdC5jYWxsKGEsZSkmJnJ0KGwsZSxhW2VdKTtyZXR1cm4gbH0sRz0obCxhKT0+X3QobCxOdChhKSk7dmFyIGd0PShsLGEpPT57dmFyIGU9e307Zm9yKHZhciBuIGluIGwpaXQuY2FsbChsLG4pJiZhLmluZGV4T2Yobik8MCYmKGVbbl09bFtuXSk7aWYobCE9bnVsbCYmWSlmb3IodmFyIG4gb2YgWShsKSlhLmluZGV4T2Yobik8MCYmbHQuY2FsbChsLG4pJiYoZVtuXT1sW25dKTtyZXR1cm4gZX07aW1wb3J0e0V2ZW50VHlwZSBhcyBSfWZyb21cIkBhZy11aS9jb3JlXCI7aW1wb3J0e21lcmdlQWxsIGFzIEx0LGRlZmF1bHRJZkVtcHR5IGFzIE90LGNvbmNhdE1hcCBhcyBQdH1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO2ltcG9ydHtvZiBhcyBEdCxFTVBUWSBhcyBIdH1mcm9tXCJyeGpzXCI7aW1wb3J0e3Y0IGFzIHd0fWZyb21cInV1aWRcIjt2YXIgeT1sPT57aWYodHlwZW9mIHN0cnVjdHVyZWRDbG9uZT09XCJmdW5jdGlvblwiKXJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUobCk7dHJ5e3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGwpKX1jYXRjaChhKXtyZXR1cm4gTih7fSxsKX19O2Z1bmN0aW9uIFJlKCl7cmV0dXJuIHd0KCl9aW1wb3J0e2FwcGx5UGF0Y2ggYXMgY3R9ZnJvbVwiZmFzdC1qc29uLXBhdGNoXCI7YXN5bmMgZnVuY3Rpb24geChsLGEsZSxuKXtsZXQgdD1hLHM9ZSxyO2ZvcihsZXQgbyBvZiBsKXRyeXtsZXQgaT1hd2FpdCBuKG8seSh0KSx5KHMpKTtpZihpPT09dm9pZCAwKWNvbnRpbnVlO2lmKGkubWVzc2FnZXMhPT12b2lkIDAmJih0PWkubWVzc2FnZXMpLGkuc3RhdGUhPT12b2lkIDAmJihzPWkuc3RhdGUpLHI9aS5zdG9wUHJvcGFnYXRpb24scj09PSEwKWJyZWFrfWNhdGNoKGkpe3Byb2Nlc3MuZW52Lk5PREVfRU5WPT09XCJ0ZXN0XCJ8fHByb2Nlc3MuZW52LkpFU1RfV09SS0VSX0lEIT09dm9pZCAwfHxjb25zb2xlLmVycm9yKFwiU3Vic2NyaWJlciBlcnJvcjpcIixpKTtjb250aW51ZX1yZXR1cm4gTihOKE4oe30sSlNPTi5zdHJpbmdpZnkodCkhPT1KU09OLnN0cmluZ2lmeShhKT97bWVzc2FnZXM6dH06e30pLEpTT04uc3RyaW5naWZ5KHMpIT09SlNPTi5zdHJpbmdpZnkoZSk/e3N0YXRlOnN9Ont9KSxyIT09dm9pZCAwP3tzdG9wUHJvcGFnYXRpb246cn06e30pfWltcG9ydCBHdCBmcm9tXCJ1bnRydW5jYXRlLWpzb25cIjt2YXIgJD0obCxhLGUsbik9PntsZXQgdD15KGUubWVzc2FnZXMpLHM9eShsLnN0YXRlKSxyPXt9LG89ZD0+e2QubWVzc2FnZXMhPT12b2lkIDAmJih0PWQubWVzc2FnZXMsci5tZXNzYWdlcz1kLm1lc3NhZ2VzKSxkLnN0YXRlIT09dm9pZCAwJiYocz1kLnN0YXRlLHIuc3RhdGU9ZC5zdGF0ZSl9LGk9KCk9PntsZXQgZD15KHIpO3JldHVybiByPXt9LGQubWVzc2FnZXMhPT12b2lkIDB8fGQuc3RhdGUhPT12b2lkIDA/RHQoZCk6SHR9O3JldHVybiBhLnBpcGUoUHQoYXN5bmMgZD0+e3ZhciBULHYsYyxiLFU7bGV0IEk9YXdhaXQgeChuLHQscywoRSxnLHApPT57dmFyIG07cmV0dXJuKG09RS5vbkV2ZW50KT09bnVsbD92b2lkIDA6bS5jYWxsKEUse2V2ZW50OmQsYWdlbnQ6ZSxpbnB1dDpsLG1lc3NhZ2VzOmcsc3RhdGU6cH0pfSk7aWYobyhJKSxJLnN0b3BQcm9wYWdhdGlvbj09PSEwKXJldHVybiBpKCk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlRFWFRfTUVTU0FHRV9TVEFSVDp7bGV0IEU9YXdhaXQgeChuLHQscywoZyxwLG0pPT57dmFyIHU7cmV0dXJuKHU9Zy5vblRleHRNZXNzYWdlU3RhcnRFdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO2lmKG8oRSksRS5zdG9wUHJvcGFnYXRpb24hPT0hMCl7bGV0e21lc3NhZ2VJZDpnLHJvbGU6cD1cImFzc2lzdGFudFwifT1kLG09e2lkOmcscm9sZTpwLGNvbnRlbnQ6XCJcIn07dC5wdXNoKG0pLG8oe21lc3NhZ2VzOnR9KX1yZXR1cm4gaSgpfWNhc2UgUi5URVhUX01FU1NBR0VfQ09OVEVOVDp7bGV0e21lc3NhZ2VJZDpFLGRlbHRhOmd9PWQscD10LmZpbmQodT0+dS5pZD09PUUpO2lmKCFwKXJldHVybiBjb25zb2xlLndhcm4oYFRFWFRfTUVTU0FHRV9DT05URU5UOiBObyBtZXNzYWdlIGZvdW5kIHdpdGggSUQgJyR7RX0nYCksaSgpO2xldCBtPWF3YWl0IHgobix0LHMsKHUsQSxoKT0+e3ZhciBfO3JldHVybihfPXUub25UZXh0TWVzc2FnZUNvbnRlbnRFdmVudCk9PW51bGw/dm9pZCAwOl8uY2FsbCh1LHtldmVudDpkLG1lc3NhZ2VzOkEsc3RhdGU6aCxhZ2VudDplLGlucHV0OmwsdGV4dE1lc3NhZ2VCdWZmZXI6dHlwZW9mIHAuY29udGVudD09XCJzdHJpbmdcIj9wLmNvbnRlbnQ6XCJcIn0pfSk7aWYobyhtKSxtLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXQgdT10eXBlb2YgcC5jb250ZW50PT1cInN0cmluZ1wiP3AuY29udGVudDpcIlwiO3AuY29udGVudD1gJHt1fSR7Z31gLG8oe21lc3NhZ2VzOnR9KX1yZXR1cm4gaSgpfWNhc2UgUi5URVhUX01FU1NBR0VfRU5EOntsZXR7bWVzc2FnZUlkOkV9PWQsZz10LmZpbmQobT0+bS5pZD09PUUpO2lmKCFnKXJldHVybiBjb25zb2xlLndhcm4oYFRFWFRfTUVTU0FHRV9FTkQ6IE5vIG1lc3NhZ2UgZm91bmQgd2l0aCBJRCAnJHtFfSdgKSxpKCk7bGV0IHA9YXdhaXQgeChuLHQscywobSx1LEEpPT57dmFyIGg7cmV0dXJuKGg9bS5vblRleHRNZXNzYWdlRW5kRXZlbnQpPT1udWxsP3ZvaWQgMDpoLmNhbGwobSx7ZXZlbnQ6ZCxtZXNzYWdlczp1LHN0YXRlOkEsYWdlbnQ6ZSxpbnB1dDpsLHRleHRNZXNzYWdlQnVmZmVyOnR5cGVvZiBnLmNvbnRlbnQ9PVwic3RyaW5nXCI/Zy5jb250ZW50OlwiXCJ9KX0pO3JldHVybiBvKHApLGF3YWl0IFByb21pc2UuYWxsKG4ubWFwKG09Pnt2YXIgdTsodT1tLm9uTmV3TWVzc2FnZSk9PW51bGx8fHUuY2FsbChtLHttZXNzYWdlOmcsbWVzc2FnZXM6dCxzdGF0ZTpzLGFnZW50OmUsaW5wdXQ6bH0pfSkpLGkoKX1jYXNlIFIuVE9PTF9DQUxMX1NUQVJUOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uVG9vbENhbGxTdGFydEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7aWYobyhFKSxFLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXR7dG9vbENhbGxJZDpnLHRvb2xDYWxsTmFtZTpwLHBhcmVudE1lc3NhZ2VJZDptfT1kLHU7bSYmdC5sZW5ndGg+MCYmdFt0Lmxlbmd0aC0xXS5pZD09PW0/dT10W3QubGVuZ3RoLTFdOih1PXtpZDptfHxnLHJvbGU6XCJhc3Npc3RhbnRcIix0b29sQ2FsbHM6W119LHQucHVzaCh1KSksKFQ9dS50b29sQ2FsbHMpIT1udWxsfHwodS50b29sQ2FsbHM9W10pLHUudG9vbENhbGxzLnB1c2goe2lkOmcsdHlwZTpcImZ1bmN0aW9uXCIsZnVuY3Rpb246e25hbWU6cCxhcmd1bWVudHM6XCJcIn19KSxvKHttZXNzYWdlczp0fSl9cmV0dXJuIGkoKX1jYXNlIFIuVE9PTF9DQUxMX0FSR1M6e2xldHt0b29sQ2FsbElkOkUsZGVsdGE6Z309ZCxwPXQuZmluZChBPT57dmFyIGg7cmV0dXJuKGg9QS50b29sQ2FsbHMpPT1udWxsP3ZvaWQgMDpoLnNvbWUoXz0+Xy5pZD09PUUpfSk7aWYoIXApcmV0dXJuIGNvbnNvbGUud2FybihgVE9PTF9DQUxMX0FSR1M6IE5vIG1lc3NhZ2UgZm91bmQgY29udGFpbmluZyB0b29sIGNhbGwgd2l0aCBJRCAnJHtFfSdgKSxpKCk7bGV0IG09cC50b29sQ2FsbHMuZmluZChBPT5BLmlkPT09RSk7aWYoIW0pcmV0dXJuIGNvbnNvbGUud2FybihgVE9PTF9DQUxMX0FSR1M6IE5vIHRvb2wgY2FsbCBmb3VuZCB3aXRoIElEICcke0V9J2ApLGkoKTtsZXQgdT1hd2FpdCB4KG4sdCxzLChBLGgsXyk9Pnt2YXIgWjtsZXQgSD1tLmZ1bmN0aW9uLmFyZ3VtZW50cyxGPW0uZnVuY3Rpb24ubmFtZSxYPXt9O3RyeXtYPUd0KEgpfWNhdGNoKHllKXt9cmV0dXJuKFo9QS5vblRvb2xDYWxsQXJnc0V2ZW50KT09bnVsbD92b2lkIDA6Wi5jYWxsKEEse2V2ZW50OmQsbWVzc2FnZXM6aCxzdGF0ZTpfLGFnZW50OmUsaW5wdXQ6bCx0b29sQ2FsbEJ1ZmZlcjpILHRvb2xDYWxsTmFtZTpGLHBhcnRpYWxUb29sQ2FsbEFyZ3M6WH0pfSk7cmV0dXJuIG8odSksdS5zdG9wUHJvcGFnYXRpb24hPT0hMCYmKG0uZnVuY3Rpb24uYXJndW1lbnRzKz1nLG8oe21lc3NhZ2VzOnR9KSksaSgpfWNhc2UgUi5UT09MX0NBTExfRU5EOntsZXR7dG9vbENhbGxJZDpFfT1kLGc9dC5maW5kKHU9Pnt2YXIgQTtyZXR1cm4oQT11LnRvb2xDYWxscyk9PW51bGw/dm9pZCAwOkEuc29tZShoPT5oLmlkPT09RSl9KTtpZighZylyZXR1cm4gY29uc29sZS53YXJuKGBUT09MX0NBTExfRU5EOiBObyBtZXNzYWdlIGZvdW5kIGNvbnRhaW5pbmcgdG9vbCBjYWxsIHdpdGggSUQgJyR7RX0nYCksaSgpO2xldCBwPWcudG9vbENhbGxzLmZpbmQodT0+dS5pZD09PUUpO2lmKCFwKXJldHVybiBjb25zb2xlLndhcm4oYFRPT0xfQ0FMTF9FTkQ6IE5vIHRvb2wgY2FsbCBmb3VuZCB3aXRoIElEICcke0V9J2ApLGkoKTtsZXQgbT1hd2FpdCB4KG4sdCxzLCh1LEEsaCk9Pnt2YXIgWDtsZXQgXz1wLmZ1bmN0aW9uLmFyZ3VtZW50cyxIPXAuZnVuY3Rpb24ubmFtZSxGPXt9O3RyeXtGPUpTT04ucGFyc2UoXyl9Y2F0Y2goWil7fXJldHVybihYPXUub25Ub29sQ2FsbEVuZEV2ZW50KT09bnVsbD92b2lkIDA6WC5jYWxsKHUse2V2ZW50OmQsbWVzc2FnZXM6QSxzdGF0ZTpoLGFnZW50OmUsaW5wdXQ6bCx0b29sQ2FsbE5hbWU6SCx0b29sQ2FsbEFyZ3M6Rn0pfSk7cmV0dXJuIG8obSksYXdhaXQgUHJvbWlzZS5hbGwobi5tYXAodT0+e3ZhciBBOyhBPXUub25OZXdUb29sQ2FsbCk9PW51bGx8fEEuY2FsbCh1LHt0b29sQ2FsbDpwLG1lc3NhZ2VzOnQsc3RhdGU6cyxhZ2VudDplLGlucHV0Omx9KX0pKSxpKCl9Y2FzZSBSLlRPT0xfQ0FMTF9SRVNVTFQ6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25Ub29sQ2FsbFJlc3VsdEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7aWYobyhFKSxFLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXR7bWVzc2FnZUlkOmcsdG9vbENhbGxJZDpwLGNvbnRlbnQ6bSxyb2xlOnV9PWQsQT17aWQ6Zyx0b29sQ2FsbElkOnAscm9sZTp1fHxcInRvb2xcIixjb250ZW50Om19O3QucHVzaChBKSxhd2FpdCBQcm9taXNlLmFsbChuLm1hcChoPT57dmFyIF87KF89aC5vbk5ld01lc3NhZ2UpPT1udWxsfHxfLmNhbGwoaCx7bWVzc2FnZTpBLG1lc3NhZ2VzOnQsc3RhdGU6cyxhZ2VudDplLGlucHV0Omx9KX0pKSxvKHttZXNzYWdlczp0fSl9cmV0dXJuIGkoKX1jYXNlIFIuU1RBVEVfU05BUFNIT1Q6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25TdGF0ZVNuYXBzaG90RXZlbnQpPT1udWxsP3ZvaWQgMDp1LmNhbGwoZyx7ZXZlbnQ6ZCxtZXNzYWdlczpwLHN0YXRlOm0sYWdlbnQ6ZSxpbnB1dDpsfSl9KTtpZihvKEUpLEUuc3RvcFByb3BhZ2F0aW9uIT09ITApe2xldHtzbmFwc2hvdDpnfT1kO3M9ZyxvKHtzdGF0ZTpzfSl9cmV0dXJuIGkoKX1jYXNlIFIuU1RBVEVfREVMVEE6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25TdGF0ZURlbHRhRXZlbnQpPT1udWxsP3ZvaWQgMDp1LmNhbGwoZyx7ZXZlbnQ6ZCxtZXNzYWdlczpwLHN0YXRlOm0sYWdlbnQ6ZSxpbnB1dDpsfSl9KTtpZihvKEUpLEUuc3RvcFByb3BhZ2F0aW9uIT09ITApe2xldHtkZWx0YTpnfT1kO3RyeXtzPWN0KHMsZywhMCwhMSkubmV3RG9jdW1lbnQsbyh7c3RhdGU6c30pfWNhdGNoKHApe2xldCBtPXAgaW5zdGFuY2VvZiBFcnJvcj9wLm1lc3NhZ2U6U3RyaW5nKHApO2NvbnNvbGUud2FybihgRmFpbGVkIHRvIGFwcGx5IHN0YXRlIHBhdGNoOlxuQ3VycmVudCBzdGF0ZTogJHtKU09OLnN0cmluZ2lmeShzLG51bGwsMil9XG5QYXRjaCBvcGVyYXRpb25zOiAke0pTT04uc3RyaW5naWZ5KGcsbnVsbCwyKX1cbkVycm9yOiAke219YCl9fXJldHVybiBpKCl9Y2FzZSBSLk1FU1NBR0VTX1NOQVBTSE9UOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uTWVzc2FnZXNTbmFwc2hvdEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7aWYobyhFKSxFLnN0b3BQcm9wYWdhdGlvbiE9PSEwKXtsZXR7bWVzc2FnZXM6Z309ZDt0PWcsbyh7bWVzc2FnZXM6dH0pfXJldHVybiBpKCl9Y2FzZSBSLkFDVElWSVRZX1NOQVBTSE9UOntsZXQgRT1kLGc9dC5maW5kSW5kZXgoaD0+aC5pZD09PUUubWVzc2FnZUlkKSxwPWc+PTA/dFtnXTp2b2lkIDAsbT0ocD09bnVsbD92b2lkIDA6cC5yb2xlKT09PVwiYWN0aXZpdHlcIj9wOnZvaWQgMCx1PSh2PUUucmVwbGFjZSkhPW51bGw/djohMCxBPWF3YWl0IHgobix0LHMsKGgsXyxIKT0+e3ZhciBGO3JldHVybihGPWgub25BY3Rpdml0eVNuYXBzaG90RXZlbnQpPT1udWxsP3ZvaWQgMDpGLmNhbGwoaCx7ZXZlbnQ6RSxtZXNzYWdlczpfLHN0YXRlOkgsYWdlbnQ6ZSxpbnB1dDpsLGFjdGl2aXR5TWVzc2FnZTptLGV4aXN0aW5nTWVzc2FnZTpwfSl9KTtpZihvKEEpLEEuc3RvcFByb3BhZ2F0aW9uIT09ITApe2xldCBoPXtpZDpFLm1lc3NhZ2VJZCxyb2xlOlwiYWN0aXZpdHlcIixhY3Rpdml0eVR5cGU6RS5hY3Rpdml0eVR5cGUsY29udGVudDp5KEUuY29udGVudCl9LF87Zz09PS0xPyh0LnB1c2goaCksXz1oKTptP3UmJih0W2ddPUcoTih7fSxtKSx7YWN0aXZpdHlUeXBlOkUuYWN0aXZpdHlUeXBlLGNvbnRlbnQ6eShFLmNvbnRlbnQpfSkpOnUmJih0W2ddPWgsXz1oKSxvKHttZXNzYWdlczp0fSksXyYmYXdhaXQgUHJvbWlzZS5hbGwobi5tYXAoSD0+e3ZhciBGO3JldHVybihGPUgub25OZXdNZXNzYWdlKT09bnVsbD92b2lkIDA6Ri5jYWxsKEgse21lc3NhZ2U6XyxtZXNzYWdlczp0LHN0YXRlOnMsYWdlbnQ6ZSxpbnB1dDpsfSl9KSl9cmV0dXJuIGkoKX1jYXNlIFIuQUNUSVZJVFlfREVMVEE6e2xldCBFPWQsZz10LmZpbmRJbmRleChBPT5BLmlkPT09RS5tZXNzYWdlSWQpO2lmKGc9PT0tMSlyZXR1cm4gY29uc29sZS53YXJuKGBBQ1RJVklUWV9ERUxUQTogTm8gbWVzc2FnZSBmb3VuZCB3aXRoIElEICcke0UubWVzc2FnZUlkfScgdG8gYXBwbHkgcGF0Y2hgKSxpKCk7bGV0IHA9dFtnXTtpZihwLnJvbGUhPT1cImFjdGl2aXR5XCIpcmV0dXJuIGNvbnNvbGUud2FybihgQUNUSVZJVFlfREVMVEE6IE1lc3NhZ2UgJyR7RS5tZXNzYWdlSWR9JyBpcyBub3QgYW4gYWN0aXZpdHkgbWVzc2FnZWApLGkoKTtsZXQgbT1wLHU9YXdhaXQgeChuLHQscywoQSxoLF8pPT57dmFyIEg7cmV0dXJuKEg9QS5vbkFjdGl2aXR5RGVsdGFFdmVudCk9PW51bGw/dm9pZCAwOkguY2FsbChBLHtldmVudDpFLG1lc3NhZ2VzOmgsc3RhdGU6XyxhZ2VudDplLGlucHV0OmwsYWN0aXZpdHlNZXNzYWdlOm19KX0pO2lmKG8odSksdS5zdG9wUHJvcGFnYXRpb24hPT0hMCl0cnl7bGV0IEE9eSgoYz1tLmNvbnRlbnQpIT1udWxsP2M6e30pLF89Y3QoQSwoYj1FLnBhdGNoKSE9bnVsbD9iOltdLCEwLCExKS5uZXdEb2N1bWVudDt0W2ddPUcoTih7fSxtKSx7Y29udGVudDp5KF8pLGFjdGl2aXR5VHlwZTpFLmFjdGl2aXR5VHlwZX0pLG8oe21lc3NhZ2VzOnR9KX1jYXRjaChBKXtsZXQgaD1BIGluc3RhbmNlb2YgRXJyb3I/QS5tZXNzYWdlOlN0cmluZyhBKTtjb25zb2xlLndhcm4oYEZhaWxlZCB0byBhcHBseSBhY3Rpdml0eSBwYXRjaCBmb3IgJyR7RS5tZXNzYWdlSWR9JzogJHtofWApfXJldHVybiBpKCl9Y2FzZSBSLlJBVzp7bGV0IEU9YXdhaXQgeChuLHQscywoZyxwLG0pPT57dmFyIHU7cmV0dXJuKHU9Zy5vblJhd0V2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7cmV0dXJuIG8oRSksaSgpfWNhc2UgUi5DVVNUT006e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25DdXN0b21FdmVudCk9PW51bGw/dm9pZCAwOnUuY2FsbChnLHtldmVudDpkLG1lc3NhZ2VzOnAsc3RhdGU6bSxhZ2VudDplLGlucHV0Omx9KX0pO3JldHVybiBvKEUpLGkoKX1jYXNlIFIuUlVOX1NUQVJURUQ6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25SdW5TdGFydGVkRXZlbnQpPT1udWxsP3ZvaWQgMDp1LmNhbGwoZyx7ZXZlbnQ6ZCxtZXNzYWdlczpwLHN0YXRlOm0sYWdlbnQ6ZSxpbnB1dDpsfSl9KTtpZihvKEUpLEUuc3RvcFByb3BhZ2F0aW9uIT09ITApe2xldCBnPWQ7aWYoKFU9Zy5pbnB1dCkhPW51bGwmJlUubWVzc2FnZXMpe2ZvcihsZXQgcCBvZiBnLmlucHV0Lm1lc3NhZ2VzKXQuZmluZCh1PT51LmlkPT09cC5pZCl8fHQucHVzaChwKTtvKHttZXNzYWdlczp0fSl9fXJldHVybiBpKCl9Y2FzZSBSLlJVTl9GSU5JU0hFRDp7bGV0IEU9YXdhaXQgeChuLHQscywoZyxwLG0pPT57dmFyIHU7cmV0dXJuKHU9Zy5vblJ1bkZpbmlzaGVkRXZlbnQpPT1udWxsP3ZvaWQgMDp1LmNhbGwoZyx7ZXZlbnQ6ZCxtZXNzYWdlczpwLHN0YXRlOm0sYWdlbnQ6ZSxpbnB1dDpsLHJlc3VsdDpkLnJlc3VsdH0pfSk7cmV0dXJuIG8oRSksaSgpfWNhc2UgUi5SVU5fRVJST1I6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25SdW5FcnJvckV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7cmV0dXJuIG8oRSksaSgpfWNhc2UgUi5TVEVQX1NUQVJURUQ6e2xldCBFPWF3YWl0IHgobix0LHMsKGcscCxtKT0+e3ZhciB1O3JldHVybih1PWcub25TdGVwU3RhcnRlZEV2ZW50KT09bnVsbD92b2lkIDA6dS5jYWxsKGcse2V2ZW50OmQsbWVzc2FnZXM6cCxzdGF0ZTptLGFnZW50OmUsaW5wdXQ6bH0pfSk7cmV0dXJuIG8oRSksaSgpfWNhc2UgUi5TVEVQX0ZJTklTSEVEOntsZXQgRT1hd2FpdCB4KG4sdCxzLChnLHAsbSk9Pnt2YXIgdTtyZXR1cm4odT1nLm9uU3RlcEZpbmlzaGVkRXZlbnQpPT1udWxsP3ZvaWQgMDp1LmNhbGwoZyx7ZXZlbnQ6ZCxtZXNzYWdlczpwLHN0YXRlOm0sYWdlbnQ6ZSxpbnB1dDpsfSl9KTtyZXR1cm4gbyhFKSxpKCl9Y2FzZSBSLlRFWFRfTUVTU0FHRV9DSFVOSzp0aHJvdyBuZXcgRXJyb3IoXCJURVhUX01FU1NBR0VfQ0hVTksgbXVzdCBiZSB0cmFuZm9ybWVkIGJlZm9yZSBiZWluZyBhcHBsaWVkXCIpO2Nhc2UgUi5UT09MX0NBTExfQ0hVTks6dGhyb3cgbmV3IEVycm9yKFwiVE9PTF9DQUxMX0NIVU5LIG11c3QgYmUgdHJhbmZvcm1lZCBiZWZvcmUgYmVpbmcgYXBwbGllZFwiKTtjYXNlIFIuVEhJTktJTkdfU1RBUlQ6cmV0dXJuIGkoKTtjYXNlIFIuVEhJTktJTkdfRU5EOnJldHVybiBpKCk7Y2FzZSBSLlRISU5LSU5HX1RFWFRfTUVTU0FHRV9TVEFSVDpyZXR1cm4gaSgpO2Nhc2UgUi5USElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVDpyZXR1cm4gaSgpO2Nhc2UgUi5USElOS0lOR19URVhUX01FU1NBR0VfRU5EOnJldHVybiBpKCl9bGV0IFM9ZC50eXBlO3JldHVybiBpKCl9KSxMdCgpLG4ubGVuZ3RoPjA/T3Qoe30pOmQ9PmQpfTtpbXBvcnR7RXZlbnRUeXBlIGFzIHcsQUdVSUVycm9yIGFzIEx9ZnJvbVwiQGFnLXVpL2NvcmVcIjtpbXBvcnR7dGhyb3dFcnJvciBhcyBPLG9mIGFzIFB9ZnJvbVwicnhqc1wiO2ltcG9ydHttZXJnZU1hcCBhcyBidH1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO3ZhciB6PWw9PmE9PntsZXQgZT1uZXcgTWFwLG49bmV3IE1hcCx0PSExLHM9ITEscj0hMSxvPW5ldyBNYXAsaT0hMSxkPSExLEk9ITEsUz0oKT0+e2UuY2xlYXIoKSxuLmNsZWFyKCksby5jbGVhcigpLGk9ITEsZD0hMSx0PSExLHM9ITEsST0hMH07cmV0dXJuIGEucGlwZShidChUPT57bGV0IHY9VC50eXBlO2lmKGwmJmNvbnNvbGUuZGVidWcoXCJbVkVSSUZZXTpcIixKU09OLnN0cmluZ2lmeShUKSkscylyZXR1cm4gTygoKT0+bmV3IEwoYENhbm5vdCBzZW5kIGV2ZW50IHR5cGUgJyR7dn0nOiBUaGUgcnVuIGhhcyBhbHJlYWR5IGVycm9yZWQgd2l0aCAnUlVOX0VSUk9SJy4gTm8gZnVydGhlciBldmVudHMgY2FuIGJlIHNlbnQuYCkpO2lmKHQmJnYhPT13LlJVTl9FUlJPUiYmdiE9PXcuUlVOX1NUQVJURUQpcmV0dXJuIE8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCBldmVudCB0eXBlICcke3Z9JzogVGhlIHJ1biBoYXMgYWxyZWFkeSBmaW5pc2hlZCB3aXRoICdSVU5fRklOSVNIRUQnLiBTdGFydCBhIG5ldyBydW4gd2l0aCAnUlVOX1NUQVJURUQnLmApKTtpZihyKXtpZih2PT09dy5SVU5fU1RBUlRFRCl7aWYoSSYmIXQpcmV0dXJuIE8oKCk9Pm5ldyBMKFwiQ2Fubm90IHNlbmQgJ1JVTl9TVEFSVEVEJyB3aGlsZSBhIHJ1biBpcyBzdGlsbCBhY3RpdmUuIFRoZSBwcmV2aW91cyBydW4gbXVzdCBiZSBmaW5pc2hlZCB3aXRoICdSVU5fRklOSVNIRUQnIGJlZm9yZSBzdGFydGluZyBhIG5ldyBydW4uXCIpKTt0JiZTKCl9fWVsc2UgaWYocj0hMCx2IT09dy5SVU5fU1RBUlRFRCYmdiE9PXcuUlVOX0VSUk9SKXJldHVybiBPKCgpPT5uZXcgTChcIkZpcnN0IGV2ZW50IG11c3QgYmUgJ1JVTl9TVEFSVEVEJ1wiKSk7c3dpdGNoKHYpe2Nhc2Ugdy5URVhUX01FU1NBR0VfU1RBUlQ6e2xldCBjPVQubWVzc2FnZUlkO3JldHVybiBlLmhhcyhjKT9PKCgpPT5uZXcgTChgQ2Fubm90IHNlbmQgJ1RFWFRfTUVTU0FHRV9TVEFSVCcgZXZlbnQ6IEEgdGV4dCBtZXNzYWdlIHdpdGggSUQgJyR7Y30nIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIENvbXBsZXRlIGl0IHdpdGggJ1RFWFRfTUVTU0FHRV9FTkQnIGZpcnN0LmApKTooZS5zZXQoYywhMCksUChUKSl9Y2FzZSB3LlRFWFRfTUVTU0FHRV9DT05URU5UOntsZXQgYz1ULm1lc3NhZ2VJZDtyZXR1cm4gZS5oYXMoYyk/UChUKTpPKCgpPT5uZXcgTChgQ2Fubm90IHNlbmQgJ1RFWFRfTUVTU0FHRV9DT05URU5UJyBldmVudDogTm8gYWN0aXZlIHRleHQgbWVzc2FnZSBmb3VuZCB3aXRoIElEICcke2N9Jy4gU3RhcnQgYSB0ZXh0IG1lc3NhZ2Ugd2l0aCAnVEVYVF9NRVNTQUdFX1NUQVJUJyBmaXJzdC5gKSl9Y2FzZSB3LlRFWFRfTUVTU0FHRV9FTkQ6e2xldCBjPVQubWVzc2FnZUlkO3JldHVybiBlLmhhcyhjKT8oZS5kZWxldGUoYyksUChUKSk6TygoKT0+bmV3IEwoYENhbm5vdCBzZW5kICdURVhUX01FU1NBR0VfRU5EJyBldmVudDogTm8gYWN0aXZlIHRleHQgbWVzc2FnZSBmb3VuZCB3aXRoIElEICcke2N9Jy4gQSAnVEVYVF9NRVNTQUdFX1NUQVJUJyBldmVudCBtdXN0IGJlIHNlbnQgZmlyc3QuYCkpfWNhc2Ugdy5UT09MX0NBTExfU1RBUlQ6e2xldCBjPVQudG9vbENhbGxJZDtyZXR1cm4gbi5oYXMoYyk/TygoKT0+bmV3IEwoYENhbm5vdCBzZW5kICdUT09MX0NBTExfU1RBUlQnIGV2ZW50OiBBIHRvb2wgY2FsbCB3aXRoIElEICcke2N9JyBpcyBhbHJlYWR5IGluIHByb2dyZXNzLiBDb21wbGV0ZSBpdCB3aXRoICdUT09MX0NBTExfRU5EJyBmaXJzdC5gKSk6KG4uc2V0KGMsITApLFAoVCkpfWNhc2Ugdy5UT09MX0NBTExfQVJHUzp7bGV0IGM9VC50b29sQ2FsbElkO3JldHVybiBuLmhhcyhjKT9QKFQpOk8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCAnVE9PTF9DQUxMX0FSR1MnIGV2ZW50OiBObyBhY3RpdmUgdG9vbCBjYWxsIGZvdW5kIHdpdGggSUQgJyR7Y30nLiBTdGFydCBhIHRvb2wgY2FsbCB3aXRoICdUT09MX0NBTExfU1RBUlQnIGZpcnN0LmApKX1jYXNlIHcuVE9PTF9DQUxMX0VORDp7bGV0IGM9VC50b29sQ2FsbElkO3JldHVybiBuLmhhcyhjKT8obi5kZWxldGUoYyksUChUKSk6TygoKT0+bmV3IEwoYENhbm5vdCBzZW5kICdUT09MX0NBTExfRU5EJyBldmVudDogTm8gYWN0aXZlIHRvb2wgY2FsbCBmb3VuZCB3aXRoIElEICcke2N9Jy4gQSAnVE9PTF9DQUxMX1NUQVJUJyBldmVudCBtdXN0IGJlIHNlbnQgZmlyc3QuYCkpfWNhc2Ugdy5TVEVQX1NUQVJURUQ6e2xldCBjPVQuc3RlcE5hbWU7cmV0dXJuIG8uaGFzKGMpP08oKCk9Pm5ldyBMKGBTdGVwIFwiJHtjfVwiIGlzIGFscmVhZHkgYWN0aXZlIGZvciAnU1RFUF9TVEFSVEVEJ2ApKTooby5zZXQoYywhMCksUChUKSl9Y2FzZSB3LlNURVBfRklOSVNIRUQ6e2xldCBjPVQuc3RlcE5hbWU7cmV0dXJuIG8uaGFzKGMpPyhvLmRlbGV0ZShjKSxQKFQpKTpPKCgpPT5uZXcgTChgQ2Fubm90IHNlbmQgJ1NURVBfRklOSVNIRUQnIGZvciBzdGVwIFwiJHtjfVwiIHRoYXQgd2FzIG5vdCBzdGFydGVkYCkpfWNhc2Ugdy5SVU5fU1RBUlRFRDpyZXR1cm4gST0hMCxQKFQpO2Nhc2Ugdy5SVU5fRklOSVNIRUQ6e2lmKG8uc2l6ZT4wKXtsZXQgYz1BcnJheS5mcm9tKG8ua2V5cygpKS5qb2luKFwiLCBcIik7cmV0dXJuIE8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCAnUlVOX0ZJTklTSEVEJyB3aGlsZSBzdGVwcyBhcmUgc3RpbGwgYWN0aXZlOiAke2N9YCkpfWlmKGUuc2l6ZT4wKXtsZXQgYz1BcnJheS5mcm9tKGUua2V5cygpKS5qb2luKFwiLCBcIik7cmV0dXJuIE8oKCk9Pm5ldyBMKGBDYW5ub3Qgc2VuZCAnUlVOX0ZJTklTSEVEJyB3aGlsZSB0ZXh0IG1lc3NhZ2VzIGFyZSBzdGlsbCBhY3RpdmU6ICR7Y31gKSl9aWYobi5zaXplPjApe2xldCBjPUFycmF5LmZyb20obi5rZXlzKCkpLmpvaW4oXCIsIFwiKTtyZXR1cm4gTygoKT0+bmV3IEwoYENhbm5vdCBzZW5kICdSVU5fRklOSVNIRUQnIHdoaWxlIHRvb2wgY2FsbHMgYXJlIHN0aWxsIGFjdGl2ZTogJHtjfWApKX1yZXR1cm4gdD0hMCxQKFQpfWNhc2Ugdy5SVU5fRVJST1I6cmV0dXJuIHM9ITAsUChUKTtjYXNlIHcuQ1VTVE9NOnJldHVybiBQKFQpO2Nhc2Ugdy5USElOS0lOR19URVhUX01FU1NBR0VfU1RBUlQ6cmV0dXJuIGk/ZD9PKCgpPT5uZXcgTChcIkNhbm5vdCBzZW5kICdUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlQnIGV2ZW50OiBBIHRoaW5raW5nIG1lc3NhZ2UgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4gQ29tcGxldGUgaXQgd2l0aCAnVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORCcgZmlyc3QuXCIpKTooZD0hMCxQKFQpKTpPKCgpPT5uZXcgTChcIkNhbm5vdCBzZW5kICdUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlQnIGV2ZW50OiBBIHRoaW5raW5nIHN0ZXAgaXMgbm90IGluIHByb2dyZXNzLiBDcmVhdGUgb25lIHdpdGggJ1RISU5LSU5HX1NUQVJUJyBmaXJzdC5cIikpO2Nhc2Ugdy5USElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVDpyZXR1cm4gZD9QKFQpOk8oKCk9Pm5ldyBMKFwiQ2Fubm90IHNlbmQgJ1RISU5LSU5HX1RFWFRfTUVTU0FHRV9DT05URU5UJyBldmVudDogTm8gYWN0aXZlIHRoaW5raW5nIG1lc3NhZ2UgZm91bmQuIFN0YXJ0IGEgbWVzc2FnZSB3aXRoICdUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlQnIGZpcnN0LlwiKSk7Y2FzZSB3LlRISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkQ6cmV0dXJuIGQ/KGQ9ITEsUChUKSk6TygoKT0+bmV3IEwoXCJDYW5ub3Qgc2VuZCAnVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORCcgZXZlbnQ6IE5vIGFjdGl2ZSB0aGlua2luZyBtZXNzYWdlIGZvdW5kLiBBICdUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlQnIGV2ZW50IG11c3QgYmUgc2VudCBmaXJzdC5cIikpO2Nhc2Ugdy5USElOS0lOR19TVEFSVDpyZXR1cm4gaT9PKCgpPT5uZXcgTChcIkNhbm5vdCBzZW5kICdUSElOS0lOR19TVEFSVCcgZXZlbnQ6IEEgdGhpbmtpbmcgc3RlcCBpcyBhbHJlYWR5IGluIHByb2dyZXNzLiBFbmQgaXQgd2l0aCAnVEhJTktJTkdfRU5EJyBmaXJzdC5cIikpOihpPSEwLFAoVCkpO2Nhc2Ugdy5USElOS0lOR19FTkQ6cmV0dXJuIGk/KGk9ITEsUChUKSk6TygoKT0+bmV3IEwoXCJDYW5ub3Qgc2VuZCAnVEhJTktJTkdfRU5EJyBldmVudDogTm8gYWN0aXZlIHRoaW5raW5nIHN0ZXAgZm91bmQuIEEgJ1RISU5LSU5HX1NUQVJUJyBldmVudCBtdXN0IGJlIHNlbnQgZmlyc3QuXCIpKTtkZWZhdWx0OnJldHVybiBQKFQpfX0pKX07aW1wb3J0e0V2ZW50U2NoZW1hcyBhcyAkdH1mcm9tXCJAYWctdWkvY29yZVwiO2ltcG9ydHtTdWJqZWN0IGFzIHp0LFJlcGxheVN1YmplY3QgYXMgS3R9ZnJvbVwicnhqc1wiO2ltcG9ydHtPYnNlcnZhYmxlIGFzIEZ0LGZyb20gYXMgdXQsZGVmZXIgYXMga3QsdGhyb3dFcnJvciBhcyBFdH1mcm9tXCJyeGpzXCI7aW1wb3J0e21lcmdlTWFwIGFzIEJ0LHN3aXRjaE1hcCBhcyBVdH1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO3ZhciB0dD0obCxhKT0+a3QoKCk9PnV0KGZldGNoKGwsYSkpKS5waXBlKFV0KGU9Pnt2YXIgcztpZighZS5vayl7bGV0IHI9ZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKXx8XCJcIjtyZXR1cm4gdXQoZS50ZXh0KCkpLnBpcGUoQnQobz0+e2xldCBpPW87aWYoci5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpdHJ5e2k9SlNPTi5wYXJzZShvKX1jYXRjaChJKXt9bGV0IGQ9bmV3IEVycm9yKGBIVFRQICR7ZS5zdGF0dXN9OiAke3R5cGVvZiBpPT1cInN0cmluZ1wiP2k6SlNPTi5zdHJpbmdpZnkoaSl9YCk7cmV0dXJuIGQuc3RhdHVzPWUuc3RhdHVzLGQucGF5bG9hZD1pLEV0KCgpPT5kKX0pKX1sZXQgbj17dHlwZTpcImhlYWRlcnNcIixzdGF0dXM6ZS5zdGF0dXMsaGVhZGVyczplLmhlYWRlcnN9LHQ9KHM9ZS5ib2R5KT09bnVsbD92b2lkIDA6cy5nZXRSZWFkZXIoKTtyZXR1cm4gdD9uZXcgRnQocj0+KHIubmV4dChuKSwoYXN5bmMoKT0+e3RyeXtmb3IoOzspe2xldHtkb25lOm8sdmFsdWU6aX09YXdhaXQgdC5yZWFkKCk7aWYobylicmVhaztsZXQgZD17dHlwZTpcImRhdGFcIixkYXRhOml9O3IubmV4dChkKX1yLmNvbXBsZXRlKCl9Y2F0Y2gobyl7ci5lcnJvcihvKX19KSgpLCgpPT57dC5jYW5jZWwoKS5jYXRjaChvPT57aWYoKG89PW51bGw/dm9pZCAwOm8ubmFtZSkhPT1cIkFib3J0RXJyb3JcIil0aHJvdyBvfSl9KSk6RXQoKCk9Pm5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXRSZWFkZXIoKSBmcm9tIHJlc3BvbnNlXCIpKX0pKTtpbXBvcnR7U3ViamVjdCBhcyBqdH1mcm9tXCJyeGpzXCI7dmFyIGV0PWw9PntsZXQgYT1uZXcganQsZT1uZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiLHtmYXRhbDohMX0pLG49XCJcIjtsLnN1YnNjcmliZSh7bmV4dDpzPT57aWYocy50eXBlIT09XCJoZWFkZXJzXCImJnMudHlwZT09PVwiZGF0YVwiJiZzLmRhdGEpe2xldCByPWUuZGVjb2RlKHMuZGF0YSx7c3RyZWFtOiEwfSk7bis9cjtsZXQgbz1uLnNwbGl0KC9cXG5cXG4vKTtuPW8ucG9wKCl8fFwiXCI7Zm9yKGxldCBpIG9mIG8pdChpKX19LGVycm9yOnM9PmEuZXJyb3IocyksY29tcGxldGU6KCk9PntuJiYobis9ZS5kZWNvZGUoKSx0KG4pKSxhLmNvbXBsZXRlKCl9fSk7ZnVuY3Rpb24gdChzKXtsZXQgcj1zLnNwbGl0KGBcbmApLG89W107Zm9yKGxldCBpIG9mIHIpaS5zdGFydHNXaXRoKFwiZGF0YTogXCIpJiZvLnB1c2goaS5zbGljZSg2KSk7aWYoby5sZW5ndGg+MCl0cnl7bGV0IGk9by5qb2luKGBcbmApLGQ9SlNPTi5wYXJzZShpKTthLm5leHQoZCl9Y2F0Y2goaSl7YS5lcnJvcihpKX19cmV0dXJuIGEuYXNPYnNlcnZhYmxlKCl9O2ltcG9ydHtTdWJqZWN0IGFzIFh0fWZyb21cInJ4anNcIjtpbXBvcnQqYXMgZHQgZnJvbVwiQGFnLXVpL3Byb3RvXCI7dmFyIG50PWw9PntsZXQgYT1uZXcgWHQsZT1uZXcgVWludDhBcnJheSgwKTtsLnN1YnNjcmliZSh7bmV4dDp0PT57aWYodC50eXBlIT09XCJoZWFkZXJzXCImJnQudHlwZT09PVwiZGF0YVwiJiZ0LmRhdGEpe2xldCBzPW5ldyBVaW50OEFycmF5KGUubGVuZ3RoK3QuZGF0YS5sZW5ndGgpO3Muc2V0KGUsMCkscy5zZXQodC5kYXRhLGUubGVuZ3RoKSxlPXMsbigpfX0sZXJyb3I6dD0+YS5lcnJvcih0KSxjb21wbGV0ZTooKT0+e2lmKGUubGVuZ3RoPjApdHJ5e24oKX1jYXRjaCh0KXtjb25zb2xlLndhcm4oXCJJbmNvbXBsZXRlIG9yIGludmFsaWQgcHJvdG9jb2wgYnVmZmVyIGRhdGEgYXQgc3RyZWFtIGVuZFwiKX1hLmNvbXBsZXRlKCl9fSk7ZnVuY3Rpb24gbigpe2Zvcig7ZS5sZW5ndGg+PTQ7KXtsZXQgcj00K25ldyBEYXRhVmlldyhlLmJ1ZmZlcixlLmJ5dGVPZmZzZXQsNCkuZ2V0VWludDMyKDAsITEpO2lmKGUubGVuZ3RoPHIpYnJlYWs7dHJ5e2xldCBvPWUuc2xpY2UoNCxyKSxpPWR0LmRlY29kZShvKTthLm5leHQoaSksZT1lLnNsaWNlKHIpfWNhdGNoKG8pe2xldCBpPW8gaW5zdGFuY2VvZiBFcnJvcj9vLm1lc3NhZ2U6U3RyaW5nKG8pO2EuZXJyb3IobmV3IEVycm9yKGBGYWlsZWQgdG8gZGVjb2RlIHByb3RvY29sIGJ1ZmZlciBtZXNzYWdlOiAke2l9YCkpO3JldHVybn19fXJldHVybiBhLmFzT2JzZXJ2YWJsZSgpfTtpbXBvcnQqYXMgcHQgZnJvbVwiQGFnLXVpL3Byb3RvXCI7aW1wb3J0e0V2ZW50VHlwZSBhcyBKdH1mcm9tXCJAYWctdWkvY29yZVwiO3ZhciBzdD1sPT57bGV0IGE9bmV3IHp0LGU9bmV3IEt0LG49ITE7cmV0dXJuIGwuc3Vic2NyaWJlKHtuZXh0OnQ9PntlLm5leHQodCksdC50eXBlPT09XCJoZWFkZXJzXCImJiFuPyhuPSEwLHQuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik9PT1wdC5BR1VJX01FRElBX1RZUEU/bnQoZSkuc3Vic2NyaWJlKHtuZXh0OnI9PmEubmV4dChyKSxlcnJvcjpyPT5hLmVycm9yKHIpLGNvbXBsZXRlOigpPT5hLmNvbXBsZXRlKCl9KTpldChlKS5zdWJzY3JpYmUoe25leHQ6cj0+e3RyeXtsZXQgbz0kdC5wYXJzZShyKTthLm5leHQobyl9Y2F0Y2gobyl7YS5lcnJvcihvKX19LGVycm9yOnI9PntpZigocj09bnVsbD92b2lkIDA6ci5uYW1lKT09PVwiQWJvcnRFcnJvclwiKXthLm5leHQoe3R5cGU6SnQuUlVOX0VSUk9SLHJhd0V2ZW50OnJ9KSxhLmNvbXBsZXRlKCk7cmV0dXJufXJldHVybiBhLmVycm9yKHIpfSxjb21wbGV0ZTooKT0+YS5jb21wbGV0ZSgpfSkpOm58fGEuZXJyb3IobmV3IEVycm9yKFwiTm8gaGVhZGVycyBldmVudCByZWNlaXZlZCBiZWZvcmUgZGF0YSBldmVudHNcIikpfSxlcnJvcjp0PT57ZS5lcnJvcih0KSxhLmVycm9yKHQpfSxjb21wbGV0ZTooKT0+e2UuY29tcGxldGUoKX19KSxhLmFzT2JzZXJ2YWJsZSgpfTtpbXBvcnR7bWVyZ2VNYXAgYXMgb2V9ZnJvbVwicnhqcy9vcGVyYXRvcnNcIjtpbXBvcnR7YXBwbHlQYXRjaCBhcyByZX1mcm9tXCJmYXN0LWpzb24tcGF0Y2hcIjtpbXBvcnR7RXZlbnRUeXBlIGFzIER9ZnJvbVwiQGFnLXVpL2NvcmVcIjtpbXBvcnR7eiBhcyBmfWZyb21cInpvZFwiO3ZhciBDPWYuZW51bShbXCJUZXh0TWVzc2FnZVN0YXJ0XCIsXCJUZXh0TWVzc2FnZUNvbnRlbnRcIixcIlRleHRNZXNzYWdlRW5kXCIsXCJBY3Rpb25FeGVjdXRpb25TdGFydFwiLFwiQWN0aW9uRXhlY3V0aW9uQXJnc1wiLFwiQWN0aW9uRXhlY3V0aW9uRW5kXCIsXCJBY3Rpb25FeGVjdXRpb25SZXN1bHRcIixcIkFnZW50U3RhdGVNZXNzYWdlXCIsXCJNZXRhRXZlbnRcIixcIlJ1blN0YXJ0ZWRcIixcIlJ1bkZpbmlzaGVkXCIsXCJSdW5FcnJvclwiLFwiTm9kZVN0YXJ0ZWRcIixcIk5vZGVGaW5pc2hlZFwiXSksVnQ9Zi5lbnVtKFtcIkxhbmdHcmFwaEludGVycnVwdEV2ZW50XCIsXCJQcmVkaWN0U3RhdGVcIixcIkV4aXRcIl0pLFd0PWYub2JqZWN0KHt0eXBlOmYubGl0ZXJhbChDLmVudW0uVGV4dE1lc3NhZ2VTdGFydCksbWVzc2FnZUlkOmYuc3RyaW5nKCkscGFyZW50TWVzc2FnZUlkOmYuc3RyaW5nKCkub3B0aW9uYWwoKSxyb2xlOmYuc3RyaW5nKCkub3B0aW9uYWwoKX0pLFl0PWYub2JqZWN0KHt0eXBlOmYubGl0ZXJhbChDLmVudW0uVGV4dE1lc3NhZ2VDb250ZW50KSxtZXNzYWdlSWQ6Zi5zdHJpbmcoKSxjb250ZW50OmYuc3RyaW5nKCl9KSxxdD1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLlRleHRNZXNzYWdlRW5kKSxtZXNzYWdlSWQ6Zi5zdHJpbmcoKX0pLFF0PWYub2JqZWN0KHt0eXBlOmYubGl0ZXJhbChDLmVudW0uQWN0aW9uRXhlY3V0aW9uU3RhcnQpLGFjdGlvbkV4ZWN1dGlvbklkOmYuc3RyaW5nKCksYWN0aW9uTmFtZTpmLnN0cmluZygpLHBhcmVudE1lc3NhZ2VJZDpmLnN0cmluZygpLm9wdGlvbmFsKCl9KSxadD1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLkFjdGlvbkV4ZWN1dGlvbkFyZ3MpLGFjdGlvbkV4ZWN1dGlvbklkOmYuc3RyaW5nKCksYXJnczpmLnN0cmluZygpfSksdGU9Zi5vYmplY3Qoe3R5cGU6Zi5saXRlcmFsKEMuZW51bS5BY3Rpb25FeGVjdXRpb25FbmQpLGFjdGlvbkV4ZWN1dGlvbklkOmYuc3RyaW5nKCl9KSxlZT1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLkFjdGlvbkV4ZWN1dGlvblJlc3VsdCksYWN0aW9uTmFtZTpmLnN0cmluZygpLGFjdGlvbkV4ZWN1dGlvbklkOmYuc3RyaW5nKCkscmVzdWx0OmYuc3RyaW5nKCl9KSxuZT1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLkFnZW50U3RhdGVNZXNzYWdlKSx0aHJlYWRJZDpmLnN0cmluZygpLGFnZW50TmFtZTpmLnN0cmluZygpLG5vZGVOYW1lOmYuc3RyaW5nKCkscnVuSWQ6Zi5zdHJpbmcoKSxhY3RpdmU6Zi5ib29sZWFuKCkscm9sZTpmLnN0cmluZygpLHN0YXRlOmYuc3RyaW5nKCkscnVubmluZzpmLmJvb2xlYW4oKX0pLHNlPWYub2JqZWN0KHt0eXBlOmYubGl0ZXJhbChDLmVudW0uTWV0YUV2ZW50KSxuYW1lOlZ0LHZhbHVlOmYuYW55KCl9KSxhZT1mLm9iamVjdCh7dHlwZTpmLmxpdGVyYWwoQy5lbnVtLlJ1bkVycm9yKSxtZXNzYWdlOmYuc3RyaW5nKCksY29kZTpmLnN0cmluZygpLm9wdGlvbmFsKCl9KSxRbj1mLmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIixbV3QsWXQscXQsUXQsWnQsdGUsZWUsbmUsc2UsYWVdKSxabj1mLm9iamVjdCh7aWQ6Zi5zdHJpbmcoKSxyb2xlOmYuc3RyaW5nKCksY29udGVudDpmLnN0cmluZygpLHBhcmVudE1lc3NhZ2VJZDpmLnN0cmluZygpLm9wdGlvbmFsKCl9KSx0cz1mLm9iamVjdCh7aWQ6Zi5zdHJpbmcoKSxuYW1lOmYuc3RyaW5nKCksYXJndW1lbnRzOmYuYW55KCkscGFyZW50TWVzc2FnZUlkOmYuc3RyaW5nKCkub3B0aW9uYWwoKX0pLGVzPWYub2JqZWN0KHtpZDpmLnN0cmluZygpLHJlc3VsdDpmLmFueSgpLGFjdGlvbkV4ZWN1dGlvbklkOmYuc3RyaW5nKCksYWN0aW9uTmFtZTpmLnN0cmluZygpfSk7aW1wb3J0IGllIGZyb21cInVudHJ1bmNhdGUtanNvblwiO3ZhciBsZT1sPT57aWYodHlwZW9mIGw9PVwic3RyaW5nXCIpcmV0dXJuIGw7aWYoIUFycmF5LmlzQXJyYXkobCkpcmV0dXJuO2xldCBhPWwuZmlsdGVyKGU9PmUudHlwZT09PVwidGV4dFwiKS5tYXAoZT0+ZS50ZXh0KS5maWx0ZXIoZT0+ZS5sZW5ndGg+MCk7aWYoYS5sZW5ndGghPT0wKXJldHVybiBhLmpvaW4oYFxuYCl9LGF0PShsLGEsZSk9Pm49PntsZXQgdD17fSxzPSEwLHI9ITAsbz1cIlwiLGk9bnVsbCxkPW51bGwsST1bXSxTPXt9LFQ9dj0+e3R5cGVvZiB2PT1cIm9iamVjdFwiJiZ2IT09bnVsbCYmKFwibWVzc2FnZXNcImluIHYmJmRlbGV0ZSB2Lm1lc3NhZ2VzLHQ9dil9O3JldHVybiBuLnBpcGUob2Uodj0+e3N3aXRjaCh2LnR5cGUpe2Nhc2UgRC5URVhUX01FU1NBR0VfU1RBUlQ6e2xldCBjPXY7cmV0dXJuW3t0eXBlOkMuZW51bS5UZXh0TWVzc2FnZVN0YXJ0LG1lc3NhZ2VJZDpjLm1lc3NhZ2VJZCxyb2xlOmMucm9sZX1dfWNhc2UgRC5URVhUX01FU1NBR0VfQ09OVEVOVDp7bGV0IGM9djtyZXR1cm5be3R5cGU6Qy5lbnVtLlRleHRNZXNzYWdlQ29udGVudCxtZXNzYWdlSWQ6Yy5tZXNzYWdlSWQsY29udGVudDpjLmRlbHRhfV19Y2FzZSBELlRFWFRfTUVTU0FHRV9FTkQ6e2xldCBjPXY7cmV0dXJuW3t0eXBlOkMuZW51bS5UZXh0TWVzc2FnZUVuZCxtZXNzYWdlSWQ6Yy5tZXNzYWdlSWR9XX1jYXNlIEQuVE9PTF9DQUxMX1NUQVJUOntsZXQgYz12O3JldHVybiBJLnB1c2goe2lkOmMudG9vbENhbGxJZCx0eXBlOlwiZnVuY3Rpb25cIixmdW5jdGlvbjp7bmFtZTpjLnRvb2xDYWxsTmFtZSxhcmd1bWVudHM6XCJcIn19KSxyPSEwLFNbYy50b29sQ2FsbElkXT1jLnRvb2xDYWxsTmFtZSxbe3R5cGU6Qy5lbnVtLkFjdGlvbkV4ZWN1dGlvblN0YXJ0LGFjdGlvbkV4ZWN1dGlvbklkOmMudG9vbENhbGxJZCxhY3Rpb25OYW1lOmMudG9vbENhbGxOYW1lLHBhcmVudE1lc3NhZ2VJZDpjLnBhcmVudE1lc3NhZ2VJZH1dfWNhc2UgRC5UT09MX0NBTExfQVJHUzp7bGV0IGM9dixiPUkuZmluZChFPT5FLmlkPT09Yy50b29sQ2FsbElkKTtpZighYilyZXR1cm4gY29uc29sZS53YXJuKGBUT09MX0NBTExfQVJHUzogTm8gdG9vbCBjYWxsIGZvdW5kIHdpdGggSUQgJyR7Yy50b29sQ2FsbElkfSdgKSxbXTtiLmZ1bmN0aW9uLmFyZ3VtZW50cys9Yy5kZWx0YTtsZXQgVT0hMTtpZihkKXtsZXQgRT1kLmZpbmQoZz0+Zy50b29sPT1iLmZ1bmN0aW9uLm5hbWUpO2lmKEUpdHJ5e2xldCBnPUpTT04ucGFyc2UoaWUoYi5mdW5jdGlvbi5hcmd1bWVudHMpKTtFLnRvb2xfYXJndW1lbnQmJkUudG9vbF9hcmd1bWVudCBpbiBnPyhUKEcoTih7fSx0KSx7W0Uuc3RhdGVfa2V5XTpnW0UudG9vbF9hcmd1bWVudF19KSksVT0hMCk6RS50b29sX2FyZ3VtZW50fHwoVChHKE4oe30sdCkse1tFLnN0YXRlX2tleV06Z30pKSxVPSEwKX1jYXRjaChnKXt9fXJldHVyblt7dHlwZTpDLmVudW0uQWN0aW9uRXhlY3V0aW9uQXJncyxhY3Rpb25FeGVjdXRpb25JZDpjLnRvb2xDYWxsSWQsYXJnczpjLmRlbHRhfSwuLi5VP1t7dHlwZTpDLmVudW0uQWdlbnRTdGF0ZU1lc3NhZ2UsdGhyZWFkSWQ6bCxhZ2VudE5hbWU6ZSxub2RlTmFtZTpvLHJ1bklkOmEscnVubmluZzpzLHJvbGU6XCJhc3Npc3RhbnRcIixzdGF0ZTpKU09OLnN0cmluZ2lmeSh0KSxhY3RpdmU6cn1dOltdXX1jYXNlIEQuVE9PTF9DQUxMX0VORDp7bGV0IGM9djtyZXR1cm5be3R5cGU6Qy5lbnVtLkFjdGlvbkV4ZWN1dGlvbkVuZCxhY3Rpb25FeGVjdXRpb25JZDpjLnRvb2xDYWxsSWR9XX1jYXNlIEQuVE9PTF9DQUxMX1JFU1VMVDp7bGV0IGM9djtyZXR1cm5be3R5cGU6Qy5lbnVtLkFjdGlvbkV4ZWN1dGlvblJlc3VsdCxhY3Rpb25FeGVjdXRpb25JZDpjLnRvb2xDYWxsSWQscmVzdWx0OmMuY29udGVudCxhY3Rpb25OYW1lOlNbYy50b29sQ2FsbElkXXx8XCJ1bmtub3duXCJ9XX1jYXNlIEQuUkFXOnJldHVybltdO2Nhc2UgRC5DVVNUT006e2xldCBjPXY7c3dpdGNoKGMubmFtZSl7Y2FzZVwiRXhpdFwiOnM9ITE7YnJlYWs7Y2FzZVwiUHJlZGljdFN0YXRlXCI6ZD1jLnZhbHVlO2JyZWFrfXJldHVyblt7dHlwZTpDLmVudW0uTWV0YUV2ZW50LG5hbWU6Yy5uYW1lLHZhbHVlOmMudmFsdWV9XX1jYXNlIEQuU1RBVEVfU05BUFNIT1Q6cmV0dXJuIFQodi5zbmFwc2hvdCksW3t0eXBlOkMuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDpsLGFnZW50TmFtZTplLG5vZGVOYW1lOm8scnVuSWQ6YSxydW5uaW5nOnMscm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KHQpLGFjdGl2ZTpyfV07Y2FzZSBELlNUQVRFX0RFTFRBOntsZXQgYj1yZSh0LHYuZGVsdGEsITAsITEpO3JldHVybiBiPyhUKGIubmV3RG9jdW1lbnQpLFt7dHlwZTpDLmVudW0uQWdlbnRTdGF0ZU1lc3NhZ2UsdGhyZWFkSWQ6bCxhZ2VudE5hbWU6ZSxub2RlTmFtZTpvLHJ1bklkOmEscnVubmluZzpzLHJvbGU6XCJhc3Npc3RhbnRcIixzdGF0ZTpKU09OLnN0cmluZ2lmeSh0KSxhY3RpdmU6cn1dKTpbXX1jYXNlIEQuTUVTU0FHRVNfU05BUFNIT1Q6cmV0dXJuIGk9di5tZXNzYWdlcyxbe3R5cGU6Qy5lbnVtLkFnZW50U3RhdGVNZXNzYWdlLHRocmVhZElkOmwsYWdlbnROYW1lOmUsbm9kZU5hbWU6byxydW5JZDphLHJ1bm5pbmc6cyxyb2xlOlwiYXNzaXN0YW50XCIsc3RhdGU6SlNPTi5zdHJpbmdpZnkoTihOKHt9LHQpLGk/e21lc3NhZ2VzOml9Ont9KSksYWN0aXZlOiEwfV07Y2FzZSBELlJVTl9TVEFSVEVEOnJldHVybltdO2Nhc2UgRC5SVU5fRklOSVNIRUQ6cmV0dXJuIGkmJih0Lm1lc3NhZ2VzPWkpLE9iamVjdC5rZXlzKHQpLmxlbmd0aD09PTA/W106W3t0eXBlOkMuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDpsLGFnZW50TmFtZTplLG5vZGVOYW1lOm8scnVuSWQ6YSxydW5uaW5nOnMscm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KE4oTih7fSx0KSxpP3ttZXNzYWdlczpnZShpKX06e30pKSxhY3RpdmU6ITF9XTtjYXNlIEQuUlVOX0VSUk9SOntsZXQgYz12O3JldHVyblt7dHlwZTpDLmVudW0uUnVuRXJyb3IsbWVzc2FnZTpjLm1lc3NhZ2UsY29kZTpjLmNvZGV9XX1jYXNlIEQuU1RFUF9TVEFSVEVEOnJldHVybiBvPXYuc3RlcE5hbWUsST1bXSxkPW51bGwsW3t0eXBlOkMuZW51bS5BZ2VudFN0YXRlTWVzc2FnZSx0aHJlYWRJZDpsLGFnZW50TmFtZTplLG5vZGVOYW1lOm8scnVuSWQ6YSxydW5uaW5nOnMscm9sZTpcImFzc2lzdGFudFwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KHQpLGFjdGl2ZTohMH1dO2Nhc2UgRC5TVEVQX0ZJTklTSEVEOnJldHVybiBJPVtdLGQ9bnVsbCxbe3R5cGU6Qy5lbnVtLkFnZW50U3RhdGVNZXNzYWdlLHRocmVhZElkOmwsYWdlbnROYW1lOmUsbm9kZU5hbWU6byxydW5JZDphLHJ1bm5pbmc6cyxyb2xlOlwiYXNzaXN0YW50XCIsc3RhdGU6SlNPTi5zdHJpbmdpZnkodCksYWN0aXZlOiExfV07ZGVmYXVsdDpyZXR1cm5bXX19KSl9O2Z1bmN0aW9uIGdlKGwpe3ZhciBlO2xldCBhPVtdO2ZvcihsZXQgbiBvZiBsKWlmKG4ucm9sZT09PVwiYXNzaXN0YW50XCJ8fG4ucm9sZT09PVwidXNlclwifHxuLnJvbGU9PT1cInN5c3RlbVwiKXtsZXQgdD1sZShuLmNvbnRlbnQpO2lmKHQpe2xldCBzPXtpZDpuLmlkLHJvbGU6bi5yb2xlLGNvbnRlbnQ6dH07YS5wdXNoKHMpfWlmKG4ucm9sZT09PVwiYXNzaXN0YW50XCImJm4udG9vbENhbGxzJiZuLnRvb2xDYWxscy5sZW5ndGg+MClmb3IobGV0IHMgb2Ygbi50b29sQ2FsbHMpe2xldCByPXtpZDpzLmlkLG5hbWU6cy5mdW5jdGlvbi5uYW1lLGFyZ3VtZW50czpKU09OLnBhcnNlKHMuZnVuY3Rpb24uYXJndW1lbnRzKSxwYXJlbnRNZXNzYWdlSWQ6bi5pZH07YS5wdXNoKHIpfX1lbHNlIGlmKG4ucm9sZT09PVwidG9vbFwiKXtsZXQgdD1cInVua25vd25cIjtmb3IobGV0IHIgb2YgbClpZihyLnJvbGU9PT1cImFzc2lzdGFudFwiJiYoKGU9ci50b29sQ2FsbHMpIT1udWxsJiZlLmxlbmd0aCkpe2ZvcihsZXQgbyBvZiByLnRvb2xDYWxscylpZihvLmlkPT09bi50b29sQ2FsbElkKXt0PW8uZnVuY3Rpb24ubmFtZTticmVha319bGV0IHM9e2lkOm4uaWQscmVzdWx0Om4uY29udGVudCxhY3Rpb25FeGVjdXRpb25JZDpuLnRvb2xDYWxsSWQsYWN0aW9uTmFtZTp0fTthLnB1c2gocyl9cmV0dXJuIGF9aW1wb3J0e3Y0IGFzIFZ9ZnJvbVwidXVpZFwiO2ltcG9ydHtjb21wYXJlVmVyc2lvbnMgYXMgVGV9ZnJvbVwiY29tcGFyZS12ZXJzaW9uc1wiO2ltcG9ydHtjYXRjaEVycm9yIGFzIGZ0LG1hcCBhcyBUdCx0YXAgYXMgU2V9ZnJvbVwicnhqcy9vcGVyYXRvcnNcIjtpbXBvcnR7ZmluYWxpemUgYXMgU3R9ZnJvbVwicnhqcy9vcGVyYXRvcnNcIjtpbXBvcnR7dGFrZVVudGlsIGFzIHZ0fWZyb21cInJ4anMvb3BlcmF0b3JzXCI7aW1wb3J0e3BpcGUgYXMgQXQsZnJvbSBhcyB2ZSxvZiBhcyBodCxFTVBUWSBhcyBBZSxTdWJqZWN0IGFzIHl0fWZyb21cInJ4anNcIjtpbXBvcnR7bGFzdFZhbHVlRnJvbSBhcyBNdH1mcm9tXCJyeGpzXCI7aW1wb3J0e21lcmdlTWFwIGFzIGNlLGZpbmFsaXplIGFzIHVlfWZyb21cInJ4anNcIjtpbXBvcnR7RXZlbnRUeXBlIGFzIE19ZnJvbVwiQGFnLXVpL2NvcmVcIjt2YXIgaj1sPT5hPT57bGV0IGUsbix0LHM9KCk9PntpZighZXx8dCE9PVwidGV4dFwiKXRocm93IG5ldyBFcnJvcihcIk5vIHRleHQgbWVzc2FnZSB0byBjbG9zZVwiKTtsZXQgaT17dHlwZTpNLlRFWFRfTUVTU0FHRV9FTkQsbWVzc2FnZUlkOmUubWVzc2FnZUlkfTtyZXR1cm4gdD12b2lkIDAsZT12b2lkIDAsbCYmY29uc29sZS5kZWJ1ZyhcIltUUkFOU0ZPUk1dOiBURVhUX01FU1NBR0VfRU5EXCIsSlNPTi5zdHJpbmdpZnkoaSkpLGl9LHI9KCk9PntpZighbnx8dCE9PVwidG9vbFwiKXRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgY2FsbCB0byBjbG9zZVwiKTtsZXQgaT17dHlwZTpNLlRPT0xfQ0FMTF9FTkQsdG9vbENhbGxJZDpuLnRvb2xDYWxsSWR9O3JldHVybiB0PXZvaWQgMCxuPXZvaWQgMCxsJiZjb25zb2xlLmRlYnVnKFwiW1RSQU5TRk9STV06IFRPT0xfQ0FMTF9FTkRcIixKU09OLnN0cmluZ2lmeShpKSksaX0sbz0oKT0+dD09PVwidGV4dFwiP1tzKCldOnQ9PT1cInRvb2xcIj9bcigpXTpbXTtyZXR1cm4gYS5waXBlKGNlKGk9Pntzd2l0Y2goaS50eXBlKXtjYXNlIE0uVEVYVF9NRVNTQUdFX1NUQVJUOmNhc2UgTS5URVhUX01FU1NBR0VfQ09OVEVOVDpjYXNlIE0uVEVYVF9NRVNTQUdFX0VORDpjYXNlIE0uVE9PTF9DQUxMX1NUQVJUOmNhc2UgTS5UT09MX0NBTExfQVJHUzpjYXNlIE0uVE9PTF9DQUxMX0VORDpjYXNlIE0uVE9PTF9DQUxMX1JFU1VMVDpjYXNlIE0uU1RBVEVfU05BUFNIT1Q6Y2FzZSBNLlNUQVRFX0RFTFRBOmNhc2UgTS5NRVNTQUdFU19TTkFQU0hPVDpjYXNlIE0uQ1VTVE9NOmNhc2UgTS5SVU5fU1RBUlRFRDpjYXNlIE0uUlVOX0ZJTklTSEVEOmNhc2UgTS5SVU5fRVJST1I6Y2FzZSBNLlNURVBfU1RBUlRFRDpjYXNlIE0uU1RFUF9GSU5JU0hFRDpjYXNlIE0uVEhJTktJTkdfU1RBUlQ6Y2FzZSBNLlRISU5LSU5HX0VORDpjYXNlIE0uVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUOmNhc2UgTS5USElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVDpjYXNlIE0uVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORDpyZXR1cm5bLi4ubygpLGldO2Nhc2UgTS5SQVc6Y2FzZSBNLkFDVElWSVRZX1NOQVBTSE9UOmNhc2UgTS5BQ1RJVklUWV9ERUxUQTpyZXR1cm5baV07Y2FzZSBNLlRFWFRfTUVTU0FHRV9DSFVOSzpsZXQgST1pLFM9W107aWYoKHQhPT1cInRleHRcInx8SS5tZXNzYWdlSWQhPT12b2lkIDAmJkkubWVzc2FnZUlkIT09KGU9PW51bGw/dm9pZCAwOmUubWVzc2FnZUlkKSkmJlMucHVzaCguLi5vKCkpLHQhPT1cInRleHRcIil7aWYoSS5tZXNzYWdlSWQ9PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgVEVYVF9NRVNTQUdFX0NIVU5LIG11c3QgaGF2ZSBhIG1lc3NhZ2VJZFwiKTtlPXttZXNzYWdlSWQ6SS5tZXNzYWdlSWR9LHQ9XCJ0ZXh0XCI7bGV0IGM9e3R5cGU6TS5URVhUX01FU1NBR0VfU1RBUlQsbWVzc2FnZUlkOkkubWVzc2FnZUlkLHJvbGU6SS5yb2xlfHxcImFzc2lzdGFudFwifTtTLnB1c2goYyksbCYmY29uc29sZS5kZWJ1ZyhcIltUUkFOU0ZPUk1dOiBURVhUX01FU1NBR0VfU1RBUlRcIixKU09OLnN0cmluZ2lmeShjKSl9aWYoSS5kZWx0YSE9PXZvaWQgMCl7bGV0IGM9e3R5cGU6TS5URVhUX01FU1NBR0VfQ09OVEVOVCxtZXNzYWdlSWQ6ZS5tZXNzYWdlSWQsZGVsdGE6SS5kZWx0YX07Uy5wdXNoKGMpLGwmJmNvbnNvbGUuZGVidWcoXCJbVFJBTlNGT1JNXTogVEVYVF9NRVNTQUdFX0NPTlRFTlRcIixKU09OLnN0cmluZ2lmeShjKSl9cmV0dXJuIFM7Y2FzZSBNLlRPT0xfQ0FMTF9DSFVOSzpsZXQgVD1pLHY9W107aWYoKHQhPT1cInRvb2xcInx8VC50b29sQ2FsbElkIT09dm9pZCAwJiZULnRvb2xDYWxsSWQhPT0obj09bnVsbD92b2lkIDA6bi50b29sQ2FsbElkKSkmJnYucHVzaCguLi5vKCkpLHQhPT1cInRvb2xcIil7aWYoVC50b29sQ2FsbElkPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihcIkZpcnN0IFRPT0xfQ0FMTF9DSFVOSyBtdXN0IGhhdmUgYSB0b29sQ2FsbElkXCIpO2lmKFQudG9vbENhbGxOYW1lPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihcIkZpcnN0IFRPT0xfQ0FMTF9DSFVOSyBtdXN0IGhhdmUgYSB0b29sQ2FsbE5hbWVcIik7bj17dG9vbENhbGxJZDpULnRvb2xDYWxsSWQsdG9vbENhbGxOYW1lOlQudG9vbENhbGxOYW1lLHBhcmVudE1lc3NhZ2VJZDpULnBhcmVudE1lc3NhZ2VJZH0sdD1cInRvb2xcIjtsZXQgYz17dHlwZTpNLlRPT0xfQ0FMTF9TVEFSVCx0b29sQ2FsbElkOlQudG9vbENhbGxJZCx0b29sQ2FsbE5hbWU6VC50b29sQ2FsbE5hbWUscGFyZW50TWVzc2FnZUlkOlQucGFyZW50TWVzc2FnZUlkfTt2LnB1c2goYyksbCYmY29uc29sZS5kZWJ1ZyhcIltUUkFOU0ZPUk1dOiBUT09MX0NBTExfU1RBUlRcIixKU09OLnN0cmluZ2lmeShjKSl9aWYoVC5kZWx0YSE9PXZvaWQgMCl7bGV0IGM9e3R5cGU6TS5UT09MX0NBTExfQVJHUyx0b29sQ2FsbElkOm4udG9vbENhbGxJZCxkZWx0YTpULmRlbHRhfTt2LnB1c2goYyksbCYmY29uc29sZS5kZWJ1ZyhcIltUUkFOU0ZPUk1dOiBUT09MX0NBTExfQVJHU1wiLEpTT04uc3RyaW5naWZ5KGMpKX1yZXR1cm4gdn1sZXQgZD1pLnR5cGU7cmV0dXJuW119KSx1ZSgoKT0+e28oKX0pKX07aW1wb3J0e0FHVUlDb25uZWN0Tm90SW1wbGVtZW50ZWRFcnJvciBhcyBDdH1mcm9tXCJAYWctdWkvY29yZVwiO2ltcG9ydHtSZXBsYXlTdWJqZWN0IGFzIEVlfWZyb21cInJ4anNcIjtpbXBvcnR7Y29uY2F0TWFwIGFzIGRlfWZyb21cInJ4anMvb3BlcmF0b3JzXCI7dmFyIGs9Y2xhc3N7cnVuTmV4dChhLGUpe3JldHVybiBlLnJ1bihhKS5waXBlKGooITEpKX1ydW5OZXh0V2l0aFN0YXRlKGEsZSl7bGV0IG49eShhLm1lc3NhZ2VzfHxbXSksdD15KGEuc3RhdGV8fHt9KSxzPW5ldyBFZTtyZXR1cm4gJChhLHMsZSxbXSkuc3Vic2NyaWJlKG89PntvLm1lc3NhZ2VzIT09dm9pZCAwJiYobj1vLm1lc3NhZ2VzKSxvLnN0YXRlIT09dm9pZCAwJiYodD1vLnN0YXRlKX0pLHRoaXMucnVuTmV4dChhLGUpLnBpcGUoZGUoYXN5bmMgbz0+KHMubmV4dChvKSxhd2FpdCBuZXcgUHJvbWlzZShpPT5zZXRUaW1lb3V0KGksMCkpLHtldmVudDpvLG1lc3NhZ2VzOnkobiksc3RhdGU6eSh0KX0pKSl9fSxLPWNsYXNzIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpO3RoaXMuZm49ZX1ydW4oZSxuKXtyZXR1cm4gdGhpcy5mbihlLG4pfX07aW1wb3J0e0V2ZW50VHlwZSBhcyBxfWZyb21cIkBhZy11aS9jb3JlXCI7aW1wb3J0e2ZpbHRlciBhcyBwZX1mcm9tXCJyeGpzL29wZXJhdG9yc1wiO3ZhciBRPWNsYXNzIGV4dGVuZHMga3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpO3RoaXMuYmxvY2tlZFRvb2xDYWxsSWRzPW5ldyBTZXQ7aWYoZS5hbGxvd2VkVG9vbENhbGxzJiZlLmRpc2FsbG93ZWRUb29sQ2FsbHMpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNwZWNpZnkgYm90aCBhbGxvd2VkVG9vbENhbGxzIGFuZCBkaXNhbGxvd2VkVG9vbENhbGxzXCIpO2lmKCFlLmFsbG93ZWRUb29sQ2FsbHMmJiFlLmRpc2FsbG93ZWRUb29sQ2FsbHMpdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBzcGVjaWZ5IGVpdGhlciBhbGxvd2VkVG9vbENhbGxzIG9yIGRpc2FsbG93ZWRUb29sQ2FsbHNcIik7ZS5hbGxvd2VkVG9vbENhbGxzP3RoaXMuYWxsb3dlZFRvb2xzPW5ldyBTZXQoZS5hbGxvd2VkVG9vbENhbGxzKTplLmRpc2FsbG93ZWRUb29sQ2FsbHMmJih0aGlzLmRpc2FsbG93ZWRUb29scz1uZXcgU2V0KGUuZGlzYWxsb3dlZFRvb2xDYWxscykpfXJ1bihlLG4pe3JldHVybiB0aGlzLnJ1bk5leHQoZSxuKS5waXBlKHBlKHQ9PntpZih0LnR5cGU9PT1xLlRPT0xfQ0FMTF9TVEFSVCl7bGV0IHM9dDtyZXR1cm4gdGhpcy5zaG91bGRGaWx0ZXJUb29sKHMudG9vbENhbGxOYW1lKT8odGhpcy5ibG9ja2VkVG9vbENhbGxJZHMuYWRkKHMudG9vbENhbGxJZCksITEpOiEwfWlmKHQudHlwZT09PXEuVE9PTF9DQUxMX0FSR1Mpe2xldCBzPXQ7cmV0dXJuIXRoaXMuYmxvY2tlZFRvb2xDYWxsSWRzLmhhcyhzLnRvb2xDYWxsSWQpfWlmKHQudHlwZT09PXEuVE9PTF9DQUxMX0VORCl7bGV0IHM9dDtyZXR1cm4hdGhpcy5ibG9ja2VkVG9vbENhbGxJZHMuaGFzKHMudG9vbENhbGxJZCl9aWYodC50eXBlPT09cS5UT09MX0NBTExfUkVTVUxUKXtsZXQgcz10O3JldHVybiB0aGlzLmJsb2NrZWRUb29sQ2FsbElkcy5oYXMocy50b29sQ2FsbElkKT8odGhpcy5ibG9ja2VkVG9vbENhbGxJZHMuZGVsZXRlKHMudG9vbENhbGxJZCksITEpOiEwfXJldHVybiEwfSkpfXNob3VsZEZpbHRlclRvb2woZSl7cmV0dXJuIHRoaXMuYWxsb3dlZFRvb2xzPyF0aGlzLmFsbG93ZWRUb29scy5oYXMoZSk6dGhpcy5kaXNhbGxvd2VkVG9vbHM/dGhpcy5kaXNhbGxvd2VkVG9vbHMuaGFzKGUpOiExfX07ZnVuY3Rpb24gbWUobCl7bGV0IGE9bC5jb250ZW50O2lmKEFycmF5LmlzQXJyYXkoYSkpe2xldCBlPWEuZmlsdGVyKG49PnR5cGVvZiBuPT1cIm9iamVjdFwiJiZuIT09bnVsbCYmXCJ0eXBlXCJpbiBuJiZuLnR5cGU9PT1cInRleHRcIiYmdHlwZW9mIG4udGV4dD09XCJzdHJpbmdcIikubWFwKG49Pm4udGV4dCkuam9pbihcIlwiKTtyZXR1cm4gRyhOKHt9LGwpLHtjb250ZW50OmV9KX1yZXR1cm4gdHlwZW9mIGE9PVwic3RyaW5nXCI/bDpHKE4oe30sbCkse2NvbnRlbnQ6XCJcIn0pfXZhciBKPWNsYXNzIGV4dGVuZHMga3tydW4oYSxlKXtsZXQgcj1hLHtwYXJlbnRSdW5JZDpufT1yLHQ9Z3QocixbXCJwYXJlbnRSdW5JZFwiXSkscz1HKE4oe30sdCkse21lc3NhZ2VzOnQubWVzc2FnZXMubWFwKG1lKX0pO3JldHVybiB0aGlzLnJ1bk5leHQocyxlKX19O3ZhciBtdD17bmFtZTpcIkBhZy11aS9jbGllbnRcIixhdXRob3I6XCJNYXJrdXMgRWNrZXIgPG1hcmt1cy5lY2tlckBnbWFpbC5jb20+XCIsdmVyc2lvbjpcIjAuMC40MlwiLHByaXZhdGU6ITEscHVibGlzaENvbmZpZzp7YWNjZXNzOlwicHVibGljXCJ9LG1haW46XCIuL2Rpc3QvaW5kZXguanNcIixtb2R1bGU6XCIuL2Rpc3QvaW5kZXgubWpzXCIsdHlwZXM6XCIuL2Rpc3QvaW5kZXguZC50c1wiLHNpZGVFZmZlY3RzOiExLGZpbGVzOltcImRpc3QvKipcIixcIlJFQURNRS5tZFwiXSxzY3JpcHRzOntidWlsZDpcInRzdXBcIixkZXY6XCJ0c3VwIC0td2F0Y2hcIixjbGVhbjpcInJtIC1yZiBkaXN0IC50dXJibyBub2RlX21vZHVsZXNcIix0eXBlY2hlY2s6XCJ0c2MgLS1ub0VtaXRcIix0ZXN0OlwiamVzdFwiLFwibGluazpnbG9iYWxcIjpcInBucG0gbGluayAtLWdsb2JhbFwiLFwidW5saW5rOmdsb2JhbFwiOlwicG5wbSB1bmxpbmsgLS1nbG9iYWxcIn0sZGVwZW5kZW5jaWVzOntcIkBhZy11aS9jb3JlXCI6XCJ3b3Jrc3BhY2U6KlwiLFwiQGFnLXVpL2VuY29kZXJcIjpcIndvcmtzcGFjZToqXCIsXCJAYWctdWkvcHJvdG9cIjpcIndvcmtzcGFjZToqXCIsXCJAdHlwZXMvdXVpZFwiOlwiXjEwLjAuMFwiLFwiY29tcGFyZS12ZXJzaW9uc1wiOlwiXjYuMS4xXCIsXCJmYXN0LWpzb24tcGF0Y2hcIjpcIl4zLjEuMVwiLHJ4anM6XCI3LjguMVwiLFwidW50cnVuY2F0ZS1qc29uXCI6XCJeMC4wLjFcIix1dWlkOlwiXjExLjEuMFwiLHpvZDpcIl4zLjIyLjRcIn0sZGV2RGVwZW5kZW5jaWVzOntcIkB0eXBlcy9qZXN0XCI6XCJeMjkuNS4xNFwiLFwiQHR5cGVzL25vZGVcIjpcIl4yMC4xMS4xOVwiLGplc3Q6XCJeMjkuNy4wXCIsXCJ0cy1qZXN0XCI6XCJeMjkuMS4yXCIsdHN1cDpcIl44LjAuMlwiLHR5cGVzY3JpcHQ6XCJeNS4zLjNcIn19O3ZhciBXPWNsYXNze2NvbnN0cnVjdG9yKHthZ2VudElkOmEsZGVzY3JpcHRpb246ZSx0aHJlYWRJZDpuLGluaXRpYWxNZXNzYWdlczp0LGluaXRpYWxTdGF0ZTpzLGRlYnVnOnJ9PXt9KXt0aGlzLmRlYnVnPSExO3RoaXMuc3Vic2NyaWJlcnM9W107dGhpcy5pc1J1bm5pbmc9ITE7dGhpcy5taWRkbGV3YXJlcz1bXTt0aGlzLmFnZW50SWQ9YSx0aGlzLmRlc2NyaXB0aW9uPWUhPW51bGw/ZTpcIlwiLHRoaXMudGhyZWFkSWQ9biE9bnVsbD9uOlYoKSx0aGlzLm1lc3NhZ2VzPXkodCE9bnVsbD90OltdKSx0aGlzLnN0YXRlPXkocyE9bnVsbD9zOnt9KSx0aGlzLmRlYnVnPXIhPW51bGw/cjohMSxUZSh0aGlzLm1heFZlcnNpb24sXCIwLjAuMzlcIik8PTAmJnRoaXMubWlkZGxld2FyZXMudW5zaGlmdChuZXcgSil9Z2V0IG1heFZlcnNpb24oKXtyZXR1cm4gbXQudmVyc2lvbn1zdWJzY3JpYmUoYSl7cmV0dXJuIHRoaXMuc3Vic2NyaWJlcnMucHVzaChhKSx7dW5zdWJzY3JpYmU6KCk9Pnt0aGlzLnN1YnNjcmliZXJzPXRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyKGU9PmUhPT1hKX19fXVzZSguLi5hKXtsZXQgZT1hLm1hcChuPT50eXBlb2Ygbj09XCJmdW5jdGlvblwiP25ldyBLKG4pOm4pO3JldHVybiB0aGlzLm1pZGRsZXdhcmVzLnB1c2goLi4uZSksdGhpc31hc3luYyBydW5BZ2VudChhLGUpe3ZhciBuO3RyeXt0aGlzLmlzUnVubmluZz0hMCx0aGlzLmFnZW50SWQ9KG49dGhpcy5hZ2VudElkKSE9bnVsbD9uOlYoKTtsZXQgdD10aGlzLnByZXBhcmVSdW5BZ2VudElucHV0KGEpLHMscj1uZXcgU2V0KHRoaXMubWVzc2FnZXMubWFwKFM9PlMuaWQpKSxvPVt7b25SdW5GaW5pc2hlZEV2ZW50OlM9PntzPVMucmVzdWx0fX0sLi4udGhpcy5zdWJzY3JpYmVycyxlIT1udWxsP2U6e31dO2F3YWl0IHRoaXMub25Jbml0aWFsaXplKHQsbyksdGhpcy5hY3RpdmVSdW5EZXRhY2gkPW5ldyB5dDtsZXQgaTt0aGlzLmFjdGl2ZVJ1bkNvbXBsZXRpb25Qcm9taXNlPW5ldyBQcm9taXNlKFM9PntpPVN9KTtsZXQgZD1BdCgoKT0+dGhpcy5taWRkbGV3YXJlcy5sZW5ndGg9PT0wP3RoaXMucnVuKHQpOnRoaXMubWlkZGxld2FyZXMucmVkdWNlUmlnaHQoKFQsdik9Pih7cnVuOmM9PnYucnVuKGMsVCl9KSx0aGlzKS5ydW4odCksaih0aGlzLmRlYnVnKSx6KHRoaXMuZGVidWcpLFM9PlMucGlwZSh2dCh0aGlzLmFjdGl2ZVJ1bkRldGFjaCQpKSxTPT50aGlzLmFwcGx5KHQsUyxvKSxTPT50aGlzLnByb2Nlc3NBcHBseUV2ZW50cyh0LFMsbyksZnQoUz0+KHRoaXMuaXNSdW5uaW5nPSExLHRoaXMub25FcnJvcih0LFMsbykpKSxTdCgoKT0+e3RoaXMuaXNSdW5uaW5nPSExLHRoaXMub25GaW5hbGl6ZSh0LG8pLGk9PW51bGx8fGkoKSxpPXZvaWQgMCx0aGlzLmFjdGl2ZVJ1bkNvbXBsZXRpb25Qcm9taXNlPXZvaWQgMCx0aGlzLmFjdGl2ZVJ1bkRldGFjaCQ9dm9pZCAwfSkpO2F3YWl0IE10KGQoaHQobnVsbCkpKTtsZXQgST15KHRoaXMubWVzc2FnZXMpLmZpbHRlcihTPT4hci5oYXMoUy5pZCkpO3JldHVybntyZXN1bHQ6cyxuZXdNZXNzYWdlczpJfX1maW5hbGx5e3RoaXMuaXNSdW5uaW5nPSExfX1jb25uZWN0KGEpe3Rocm93IG5ldyBDdH1hc3luYyBjb25uZWN0QWdlbnQoYSxlKXt2YXIgbjt0cnl7dGhpcy5pc1J1bm5pbmc9ITAsdGhpcy5hZ2VudElkPShuPXRoaXMuYWdlbnRJZCkhPW51bGw/bjpWKCk7bGV0IHQ9dGhpcy5wcmVwYXJlUnVuQWdlbnRJbnB1dChhKSxzLHI9bmV3IFNldCh0aGlzLm1lc3NhZ2VzLm1hcChTPT5TLmlkKSksbz1be29uUnVuRmluaXNoZWRFdmVudDpTPT57cz1TLnJlc3VsdH19LC4uLnRoaXMuc3Vic2NyaWJlcnMsZSE9bnVsbD9lOnt9XTthd2FpdCB0aGlzLm9uSW5pdGlhbGl6ZSh0LG8pLHRoaXMuYWN0aXZlUnVuRGV0YWNoJD1uZXcgeXQ7bGV0IGk7dGhpcy5hY3RpdmVSdW5Db21wbGV0aW9uUHJvbWlzZT1uZXcgUHJvbWlzZShTPT57aT1TfSk7bGV0IGQ9QXQoKCk9PnRoaXMuY29ubmVjdCh0KSxqKHRoaXMuZGVidWcpLHoodGhpcy5kZWJ1ZyksUz0+Uy5waXBlKHZ0KHRoaXMuYWN0aXZlUnVuRGV0YWNoJCkpLFM9PnRoaXMuYXBwbHkodCxTLG8pLFM9PnRoaXMucHJvY2Vzc0FwcGx5RXZlbnRzKHQsUyxvKSxmdChTPT4odGhpcy5pc1J1bm5pbmc9ITEsUyBpbnN0YW5jZW9mIEN0P0FlOnRoaXMub25FcnJvcih0LFMsbykpKSxTdCgoKT0+e3RoaXMuaXNSdW5uaW5nPSExLHRoaXMub25GaW5hbGl6ZSh0LG8pLGk9PW51bGx8fGkoKSxpPXZvaWQgMCx0aGlzLmFjdGl2ZVJ1bkNvbXBsZXRpb25Qcm9taXNlPXZvaWQgMCx0aGlzLmFjdGl2ZVJ1bkRldGFjaCQ9dm9pZCAwfSkpO2F3YWl0IE10KGQoaHQobnVsbCkpKTtsZXQgST15KHRoaXMubWVzc2FnZXMpLmZpbHRlcihTPT4hci5oYXMoUy5pZCkpO3JldHVybntyZXN1bHQ6cyxuZXdNZXNzYWdlczpJfX1maW5hbGx5e3RoaXMuaXNSdW5uaW5nPSExfX1hYm9ydFJ1bigpe31hc3luYyBkZXRhY2hBY3RpdmVSdW4oKXt2YXIgZSxuO2lmKCF0aGlzLmFjdGl2ZVJ1bkRldGFjaCQpcmV0dXJuO2xldCBhPShlPXRoaXMuYWN0aXZlUnVuQ29tcGxldGlvblByb21pc2UpIT1udWxsP2U6UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5hY3RpdmVSdW5EZXRhY2gkLm5leHQoKSwobj10aGlzLmFjdGl2ZVJ1bkRldGFjaCQpPT1udWxsfHxuLmNvbXBsZXRlKCksYXdhaXQgYX1hcHBseShhLGUsbil7cmV0dXJuICQoYSxlLHRoaXMsbil9cHJvY2Vzc0FwcGx5RXZlbnRzKGEsZSxuKXtyZXR1cm4gZS5waXBlKFNlKHQ9Pnt0Lm1lc3NhZ2VzJiYodGhpcy5tZXNzYWdlcz10Lm1lc3NhZ2VzLG4uZm9yRWFjaChzPT57dmFyIHI7KHI9cy5vbk1lc3NhZ2VzQ2hhbmdlZCk9PW51bGx8fHIuY2FsbChzLHttZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpcyxpbnB1dDphfSl9KSksdC5zdGF0ZSYmKHRoaXMuc3RhdGU9dC5zdGF0ZSxuLmZvckVhY2gocz0+e3ZhciByOyhyPXMub25TdGF0ZUNoYW5nZWQpPT1udWxsfHxyLmNhbGwocyx7c3RhdGU6dGhpcy5zdGF0ZSxtZXNzYWdlczp0aGlzLm1lc3NhZ2VzLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSkpfSkpfXByZXBhcmVSdW5BZ2VudElucHV0KGEpe3ZhciB0LHMscjtsZXQgbj15KHRoaXMubWVzc2FnZXMpLmZpbHRlcihvPT5vLnJvbGUhPT1cImFjdGl2aXR5XCIpO3JldHVybnt0aHJlYWRJZDp0aGlzLnRocmVhZElkLHJ1bklkOihhPT1udWxsP3ZvaWQgMDphLnJ1bklkKXx8VigpLHRvb2xzOnkoKHQ9YT09bnVsbD92b2lkIDA6YS50b29scykhPW51bGw/dDpbXSksY29udGV4dDp5KChzPWE9PW51bGw/dm9pZCAwOmEuY29udGV4dCkhPW51bGw/czpbXSksZm9yd2FyZGVkUHJvcHM6eSgocj1hPT1udWxsP3ZvaWQgMDphLmZvcndhcmRlZFByb3BzKSE9bnVsbD9yOnt9KSxzdGF0ZTp5KHRoaXMuc3RhdGUpLG1lc3NhZ2VzOm59fWFzeW5jIG9uSW5pdGlhbGl6ZShhLGUpe2xldCBuPWF3YWl0IHgoZSx0aGlzLm1lc3NhZ2VzLHRoaXMuc3RhdGUsKHQscyxyKT0+e3ZhciBvO3JldHVybihvPXQub25SdW5Jbml0aWFsaXplZCk9PW51bGw/dm9pZCAwOm8uY2FsbCh0LHttZXNzYWdlczpzLHN0YXRlOnIsYWdlbnQ6dGhpcyxpbnB1dDphfSl9KTsobi5tZXNzYWdlcyE9PXZvaWQgMHx8bi5zdGF0ZSE9PXZvaWQgMCkmJihuLm1lc3NhZ2VzJiYodGhpcy5tZXNzYWdlcz1uLm1lc3NhZ2VzLGEubWVzc2FnZXM9bi5tZXNzYWdlcyxlLmZvckVhY2godD0+e3ZhciBzOyhzPXQub25NZXNzYWdlc0NoYW5nZWQpPT1udWxsfHxzLmNhbGwodCx7bWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxzdGF0ZTp0aGlzLnN0YXRlLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSkpLG4uc3RhdGUmJih0aGlzLnN0YXRlPW4uc3RhdGUsYS5zdGF0ZT1uLnN0YXRlLGUuZm9yRWFjaCh0PT57dmFyIHM7KHM9dC5vblN0YXRlQ2hhbmdlZCk9PW51bGx8fHMuY2FsbCh0LHtzdGF0ZTp0aGlzLnN0YXRlLG1lc3NhZ2VzOnRoaXMubWVzc2FnZXMsYWdlbnQ6dGhpcyxpbnB1dDphfSl9KSkpfW9uRXJyb3IoYSxlLG4pe3JldHVybiB2ZSh4KG4sdGhpcy5tZXNzYWdlcyx0aGlzLnN0YXRlLCh0LHMscik9Pnt2YXIgbztyZXR1cm4obz10Lm9uUnVuRmFpbGVkKT09bnVsbD92b2lkIDA6by5jYWxsKHQse2Vycm9yOmUsbWVzc2FnZXM6cyxzdGF0ZTpyLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSkpLnBpcGUoVHQodD0+e2xldCBzPXQ7aWYoKHMubWVzc2FnZXMhPT12b2lkIDB8fHMuc3RhdGUhPT12b2lkIDApJiYocy5tZXNzYWdlcyE9PXZvaWQgMCYmKHRoaXMubWVzc2FnZXM9cy5tZXNzYWdlcyxuLmZvckVhY2gocj0+e3ZhciBvOyhvPXIub25NZXNzYWdlc0NoYW5nZWQpPT1udWxsfHxvLmNhbGwocix7bWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxzdGF0ZTp0aGlzLnN0YXRlLGFnZW50OnRoaXMsaW5wdXQ6YX0pfSkpLHMuc3RhdGUhPT12b2lkIDAmJih0aGlzLnN0YXRlPXMuc3RhdGUsbi5mb3JFYWNoKHI9Pnt2YXIgbzsobz1yLm9uU3RhdGVDaGFuZ2VkKT09bnVsbHx8by5jYWxsKHIse3N0YXRlOnRoaXMuc3RhdGUsbWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxhZ2VudDp0aGlzLGlucHV0OmF9KX0pKSkscy5zdG9wUHJvcGFnYXRpb24hPT0hMCl0aHJvdyBjb25zb2xlLmVycm9yKFwiQWdlbnQgZXhlY3V0aW9uIGZhaWxlZDpcIixlKSxlO3JldHVybnt9fSkpfWFzeW5jIG9uRmluYWxpemUoYSxlKXtsZXQgbj1hd2FpdCB4KGUsdGhpcy5tZXNzYWdlcyx0aGlzLnN0YXRlLCh0LHMscik9Pnt2YXIgbztyZXR1cm4obz10Lm9uUnVuRmluYWxpemVkKT09bnVsbD92b2lkIDA6by5jYWxsKHQse21lc3NhZ2VzOnMsc3RhdGU6cixhZ2VudDp0aGlzLGlucHV0OmF9KX0pOyhuLm1lc3NhZ2VzIT09dm9pZCAwfHxuLnN0YXRlIT09dm9pZCAwKSYmKG4ubWVzc2FnZXMhPT12b2lkIDAmJih0aGlzLm1lc3NhZ2VzPW4ubWVzc2FnZXMsZS5mb3JFYWNoKHQ9Pnt2YXIgczsocz10Lm9uTWVzc2FnZXNDaGFuZ2VkKT09bnVsbHx8cy5jYWxsKHQse21lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzLGlucHV0OmF9KX0pKSxuLnN0YXRlIT09dm9pZCAwJiYodGhpcy5zdGF0ZT1uLnN0YXRlLGUuZm9yRWFjaCh0PT57dmFyIHM7KHM9dC5vblN0YXRlQ2hhbmdlZCk9PW51bGx8fHMuY2FsbCh0LHtzdGF0ZTp0aGlzLnN0YXRlLG1lc3NhZ2VzOnRoaXMubWVzc2FnZXMsYWdlbnQ6dGhpcyxpbnB1dDphfSl9KSkpfWNsb25lKCl7bGV0IGE9T2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykpO3JldHVybiBhLmFnZW50SWQ9dGhpcy5hZ2VudElkLGEuZGVzY3JpcHRpb249dGhpcy5kZXNjcmlwdGlvbixhLnRocmVhZElkPXRoaXMudGhyZWFkSWQsYS5tZXNzYWdlcz15KHRoaXMubWVzc2FnZXMpLGEuc3RhdGU9eSh0aGlzLnN0YXRlKSxhLmRlYnVnPXRoaXMuZGVidWcsYS5pc1J1bm5pbmc9dGhpcy5pc1J1bm5pbmcsYS5zdWJzY3JpYmVycz1bLi4udGhpcy5zdWJzY3JpYmVyc10sYS5taWRkbGV3YXJlcz1bLi4udGhpcy5taWRkbGV3YXJlc10sYX1hZGRNZXNzYWdlKGEpe3RoaXMubWVzc2FnZXMucHVzaChhKSwoYXN5bmMoKT0+e3ZhciBlLG4sdDtmb3IobGV0IHMgb2YgdGhpcy5zdWJzY3JpYmVycylhd2FpdCgoZT1zLm9uTmV3TWVzc2FnZSk9PW51bGw/dm9pZCAwOmUuY2FsbChzLHttZXNzYWdlOmEsbWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxzdGF0ZTp0aGlzLnN0YXRlLGFnZW50OnRoaXN9KSk7aWYoYS5yb2xlPT09XCJhc3Npc3RhbnRcIiYmYS50b29sQ2FsbHMpZm9yKGxldCBzIG9mIGEudG9vbENhbGxzKWZvcihsZXQgciBvZiB0aGlzLnN1YnNjcmliZXJzKWF3YWl0KChuPXIub25OZXdUb29sQ2FsbCk9PW51bGw/dm9pZCAwOm4uY2FsbChyLHt0b29sQ2FsbDpzLG1lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzfSkpO2ZvcihsZXQgcyBvZiB0aGlzLnN1YnNjcmliZXJzKWF3YWl0KCh0PXMub25NZXNzYWdlc0NoYW5nZWQpPT1udWxsP3ZvaWQgMDp0LmNhbGwocyx7bWVzc2FnZXM6dGhpcy5tZXNzYWdlcyxzdGF0ZTp0aGlzLnN0YXRlLGFnZW50OnRoaXN9KSl9KSgpfWFkZE1lc3NhZ2VzKGEpe3RoaXMubWVzc2FnZXMucHVzaCguLi5hKSwoYXN5bmMoKT0+e3ZhciBlLG4sdDtmb3IobGV0IHMgb2YgYSl7Zm9yKGxldCByIG9mIHRoaXMuc3Vic2NyaWJlcnMpYXdhaXQoKGU9ci5vbk5ld01lc3NhZ2UpPT1udWxsP3ZvaWQgMDplLmNhbGwocix7bWVzc2FnZTpzLG1lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzfSkpO2lmKHMucm9sZT09PVwiYXNzaXN0YW50XCImJnMudG9vbENhbGxzKWZvcihsZXQgciBvZiBzLnRvb2xDYWxscylmb3IobGV0IG8gb2YgdGhpcy5zdWJzY3JpYmVycylhd2FpdCgobj1vLm9uTmV3VG9vbENhbGwpPT1udWxsP3ZvaWQgMDpuLmNhbGwobyx7dG9vbENhbGw6cixtZXNzYWdlczp0aGlzLm1lc3NhZ2VzLHN0YXRlOnRoaXMuc3RhdGUsYWdlbnQ6dGhpc30pKX1mb3IobGV0IHMgb2YgdGhpcy5zdWJzY3JpYmVycylhd2FpdCgodD1zLm9uTWVzc2FnZXNDaGFuZ2VkKT09bnVsbD92b2lkIDA6dC5jYWxsKHMse21lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzfSkpfSkoKX1zZXRNZXNzYWdlcyhhKXt0aGlzLm1lc3NhZ2VzPXkoYSksKGFzeW5jKCk9Pnt2YXIgZTtmb3IobGV0IG4gb2YgdGhpcy5zdWJzY3JpYmVycylhd2FpdCgoZT1uLm9uTWVzc2FnZXNDaGFuZ2VkKT09bnVsbD92b2lkIDA6ZS5jYWxsKG4se21lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzfSkpfSkoKX1zZXRTdGF0ZShhKXt0aGlzLnN0YXRlPXkoYSksKGFzeW5jKCk9Pnt2YXIgZTtmb3IobGV0IG4gb2YgdGhpcy5zdWJzY3JpYmVycylhd2FpdCgoZT1uLm9uU3RhdGVDaGFuZ2VkKT09bnVsbD92b2lkIDA6ZS5jYWxsKG4se21lc3NhZ2VzOnRoaXMubWVzc2FnZXMsc3RhdGU6dGhpcy5zdGF0ZSxhZ2VudDp0aGlzfSkpfSkoKX1sZWdhY3lfdG9fYmVfcmVtb3ZlZF9ydW5BZ2VudEJyaWRnZWQoYSl7dmFyIHQ7dGhpcy5hZ2VudElkPSh0PXRoaXMuYWdlbnRJZCkhPW51bGw/dDpWKCk7bGV0IGU9dGhpcy5wcmVwYXJlUnVuQWdlbnRJbnB1dChhKTtyZXR1cm4odGhpcy5taWRkbGV3YXJlcy5sZW5ndGg9PT0wP3RoaXMucnVuKGUpOnRoaXMubWlkZGxld2FyZXMucmVkdWNlUmlnaHQoKHIsbyk9Pih7cnVuOmk9Pm8ucnVuKGkscil9KSx0aGlzKS5ydW4oZSkpLnBpcGUoaih0aGlzLmRlYnVnKSx6KHRoaXMuZGVidWcpLGF0KHRoaXMudGhyZWFkSWQsZS5ydW5JZCx0aGlzLmFnZW50SWQpLHM9PnMucGlwZShUdChyPT4odGhpcy5kZWJ1ZyYmY29uc29sZS5kZWJ1ZyhcIltMRUdBQ1ldOlwiLEpTT04uc3RyaW5naWZ5KHIpKSxyKSkpKX19O3ZhciBvdD1jbGFzcyBleHRlbmRzIFd7Y29uc3RydWN0b3IoZSl7dmFyIG47c3VwZXIoZSk7dGhpcy5hYm9ydENvbnRyb2xsZXI9bmV3IEFib3J0Q29udHJvbGxlcjt0aGlzLnVybD1lLnVybCx0aGlzLmhlYWRlcnM9eSgobj1lLmhlYWRlcnMpIT1udWxsP246e30pfXJlcXVlc3RJbml0KGUpe3JldHVybnttZXRob2Q6XCJQT1NUXCIsaGVhZGVyczpHKE4oe30sdGhpcy5oZWFkZXJzKSx7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIixBY2NlcHQ6XCJ0ZXh0L2V2ZW50LXN0cmVhbVwifSksYm9keTpKU09OLnN0cmluZ2lmeShlKSxzaWduYWw6dGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsfX1ydW5BZ2VudChlLG4pe3ZhciB0O3JldHVybiB0aGlzLmFib3J0Q29udHJvbGxlcj0odD1lPT1udWxsP3ZvaWQgMDplLmFib3J0Q29udHJvbGxlcikhPW51bGw/dDpuZXcgQWJvcnRDb250cm9sbGVyLHN1cGVyLnJ1bkFnZW50KGUsbil9YWJvcnRSdW4oKXt0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpLHN1cGVyLmFib3J0UnVuKCl9cnVuKGUpe2xldCBuPXR0KHRoaXMudXJsLHRoaXMucmVxdWVzdEluaXQoZSkpO3JldHVybiBzdChuKX1jbG9uZSgpe3ZhciBzO2xldCBlPXN1cGVyLmNsb25lKCk7ZS51cmw9dGhpcy51cmwsZS5oZWFkZXJzPXkoKHM9dGhpcy5oZWFkZXJzKSE9bnVsbD9zOnt9KTtsZXQgbj1uZXcgQWJvcnRDb250cm9sbGVyLHQ9dGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsO3JldHVybiB0LmFib3J0ZWQmJm4uYWJvcnQodC5yZWFzb24pLGUuYWJvcnRDb250cm9sbGVyPW4sZX19O2ltcG9ydHtFdmVudFR5cGUgYXMgQn1mcm9tXCJAYWctdWkvY29yZVwiO2Z1bmN0aW9uIGhlKGwpe2xldCBhPVtdLGU9bmV3IE1hcCxuPW5ldyBNYXA7Zm9yKGxldCB0IG9mIGwpaWYodC50eXBlPT09Qi5URVhUX01FU1NBR0VfU1RBUlQpe2xldCBzPXQscj1zLm1lc3NhZ2VJZDtlLmhhcyhyKXx8ZS5zZXQocix7Y29udGVudHM6W10sb3RoZXJFdmVudHM6W119KTtsZXQgbz1lLmdldChyKTtvLnN0YXJ0PXN9ZWxzZSBpZih0LnR5cGU9PT1CLlRFWFRfTUVTU0FHRV9DT05URU5UKXtsZXQgcz10LHI9cy5tZXNzYWdlSWQ7ZS5oYXMocil8fGUuc2V0KHIse2NvbnRlbnRzOltdLG90aGVyRXZlbnRzOltdfSksZS5nZXQocikuY29udGVudHMucHVzaChzKX1lbHNlIGlmKHQudHlwZT09PUIuVEVYVF9NRVNTQUdFX0VORCl7bGV0IHM9dCxyPXMubWVzc2FnZUlkO2UuaGFzKHIpfHxlLnNldChyLHtjb250ZW50czpbXSxvdGhlckV2ZW50czpbXX0pO2xldCBvPWUuZ2V0KHIpO28uZW5kPXMsUnQocixvLGEpLGUuZGVsZXRlKHIpfWVsc2UgaWYodC50eXBlPT09Qi5UT09MX0NBTExfU1RBUlQpe2xldCBzPXQscj1zLnRvb2xDYWxsSWQ7bi5oYXMocil8fG4uc2V0KHIse2FyZ3M6W10sb3RoZXJFdmVudHM6W119KTtsZXQgbz1uLmdldChyKTtvLnN0YXJ0PXN9ZWxzZSBpZih0LnR5cGU9PT1CLlRPT0xfQ0FMTF9BUkdTKXtsZXQgcz10LHI9cy50b29sQ2FsbElkO24uaGFzKHIpfHxuLnNldChyLHthcmdzOltdLG90aGVyRXZlbnRzOltdfSksbi5nZXQocikuYXJncy5wdXNoKHMpfWVsc2UgaWYodC50eXBlPT09Qi5UT09MX0NBTExfRU5EKXtsZXQgcz10LHI9cy50b29sQ2FsbElkO24uaGFzKHIpfHxuLnNldChyLHthcmdzOltdLG90aGVyRXZlbnRzOltdfSk7bGV0IG89bi5nZXQocik7by5lbmQ9cyxJdChyLG8sYSksbi5kZWxldGUocil9ZWxzZXtsZXQgcz0hMTtmb3IobGV0W3Isb11vZiBlKWlmKG8uc3RhcnQmJiFvLmVuZCl7by5vdGhlckV2ZW50cy5wdXNoKHQpLHM9ITA7YnJlYWt9aWYoIXMpe2ZvcihsZXRbcixvXW9mIG4paWYoby5zdGFydCYmIW8uZW5kKXtvLm90aGVyRXZlbnRzLnB1c2godCkscz0hMDticmVha319c3x8YS5wdXNoKHQpfWZvcihsZXRbdCxzXW9mIGUpUnQodCxzLGEpO2ZvcihsZXRbdCxzXW9mIG4pSXQodCxzLGEpO3JldHVybiBhfWZ1bmN0aW9uIFJ0KGwsYSxlKXtpZihhLnN0YXJ0JiZlLnB1c2goYS5zdGFydCksYS5jb250ZW50cy5sZW5ndGg+MCl7bGV0IG49YS5jb250ZW50cy5tYXAocz0+cy5kZWx0YSkuam9pbihcIlwiKSx0PXt0eXBlOkIuVEVYVF9NRVNTQUdFX0NPTlRFTlQsbWVzc2FnZUlkOmwsZGVsdGE6bn07ZS5wdXNoKHQpfWEuZW5kJiZlLnB1c2goYS5lbmQpO2ZvcihsZXQgbiBvZiBhLm90aGVyRXZlbnRzKWUucHVzaChuKX1mdW5jdGlvbiBJdChsLGEsZSl7aWYoYS5zdGFydCYmZS5wdXNoKGEuc3RhcnQpLGEuYXJncy5sZW5ndGg+MCl7bGV0IG49YS5hcmdzLm1hcChzPT5zLmRlbHRhKS5qb2luKFwiXCIpLHQ9e3R5cGU6Qi5UT09MX0NBTExfQVJHUyx0b29sQ2FsbElkOmwsZGVsdGE6bn07ZS5wdXNoKHQpfWEuZW5kJiZlLnB1c2goYS5lbmQpO2ZvcihsZXQgbiBvZiBhLm90aGVyRXZlbnRzKWUucHVzaChuKX1leHBvcnQqZnJvbVwiQGFnLXVpL2NvcmVcIjtleHBvcnR7VyBhcyBBYnN0cmFjdEFnZW50LEogYXMgQmFja3dhcmRDb21wYXRpYmlsaXR5XzBfMF8zOSxRIGFzIEZpbHRlclRvb2xDYWxsc01pZGRsZXdhcmUsSyBhcyBGdW5jdGlvbk1pZGRsZXdhcmUsb3QgYXMgSHR0cEFnZW50LGsgYXMgTWlkZGxld2FyZSxoZSBhcyBjb21wYWN0RXZlbnRzLGF0IGFzIGNvbnZlcnRUb0xlZ2FjeUV2ZW50cywkIGFzIGRlZmF1bHRBcHBseUV2ZW50cyxudCBhcyBwYXJzZVByb3RvU3RyZWFtLGV0IGFzIHBhcnNlU1NFU3RyZWFtLFJlIGFzIHJhbmRvbVVVSUQsdHQgYXMgcnVuSHR0cFJlcXVlc3QseSBhcyBzdHJ1Y3R1cmVkQ2xvbmVfLGogYXMgdHJhbnNmb3JtQ2h1bmtzLHN0IGFzIHRyYW5zZm9ybUh0dHBFdmVudFN0cmVhbSx6IGFzIHZlcmlmeUV2ZW50c307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/client/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/core/dist/index.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@copilotkitnext/react/node_modules/@ag-ui/core/dist/index.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIConnectNotImplementedError: () => (/* binding */ AGUIConnectNotImplementedError),\n/* harmony export */   AGUIError: () => (/* binding */ AGUIError),\n/* harmony export */   ActivityDeltaEventSchema: () => (/* binding */ ActivityDeltaEventSchema),\n/* harmony export */   ActivityMessageSchema: () => (/* binding */ ActivityMessageSchema),\n/* harmony export */   ActivitySnapshotEventSchema: () => (/* binding */ ActivitySnapshotEventSchema),\n/* harmony export */   AssistantMessageSchema: () => (/* binding */ AssistantMessageSchema),\n/* harmony export */   BaseEventSchema: () => (/* binding */ BaseEventSchema),\n/* harmony export */   BaseMessageSchema: () => (/* binding */ BaseMessageSchema),\n/* harmony export */   BinaryInputContentSchema: () => (/* binding */ BinaryInputContentSchema),\n/* harmony export */   ContextSchema: () => (/* binding */ ContextSchema),\n/* harmony export */   CustomEventSchema: () => (/* binding */ CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* binding */ DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* binding */ EventSchemas),\n/* harmony export */   EventType: () => (/* binding */ EventType),\n/* harmony export */   FunctionCallSchema: () => (/* binding */ FunctionCallSchema),\n/* harmony export */   InputContentSchema: () => (/* binding */ InputContentSchema),\n/* harmony export */   MessageSchema: () => (/* binding */ MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* binding */ MessagesSnapshotEventSchema),\n/* harmony export */   RawEventSchema: () => (/* binding */ RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* binding */ RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* binding */ RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* binding */ RunErrorEventSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* binding */ RunFinishedEventSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* binding */ RunStartedEventSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* binding */ StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* binding */ StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* binding */ StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* binding */ StepFinishedEventSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* binding */ StepStartedEventSchema),\n/* harmony export */   SystemMessageSchema: () => (/* binding */ SystemMessageSchema),\n/* harmony export */   TextInputContentSchema: () => (/* binding */ TextInputContentSchema),\n/* harmony export */   TextMessageChunkEventSchema: () => (/* binding */ TextMessageChunkEventSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* binding */ TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* binding */ TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* binding */ TextMessageStartEventSchema),\n/* harmony export */   ThinkingEndEventSchema: () => (/* binding */ ThinkingEndEventSchema),\n/* harmony export */   ThinkingStartEventSchema: () => (/* binding */ ThinkingStartEventSchema),\n/* harmony export */   ThinkingTextMessageContentEventSchema: () => (/* binding */ ThinkingTextMessageContentEventSchema),\n/* harmony export */   ThinkingTextMessageEndEventSchema: () => (/* binding */ ThinkingTextMessageEndEventSchema),\n/* harmony export */   ThinkingTextMessageStartEventSchema: () => (/* binding */ ThinkingTextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* binding */ ToolCallArgsEventSchema),\n/* harmony export */   ToolCallChunkEventSchema: () => (/* binding */ ToolCallChunkEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* binding */ ToolCallEndEventSchema),\n/* harmony export */   ToolCallResultEventSchema: () => (/* binding */ ToolCallResultEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* binding */ ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* binding */ ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* binding */ ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* binding */ ToolSchema),\n/* harmony export */   UserMessageSchema: () => (/* binding */ UserMessageSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/ZodError.js\");\n// src/types.ts\n\nvar FunctionCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  arguments: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\"),\n  function: FunctionCallSchema\n});\nvar BaseMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar TextInputContentSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"text\"),\n  text: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar BinaryInputContentObjectSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"binary\"),\n  mimeType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  url: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  data: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  filename: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ensureBinaryPayload = (value, ctx) => {\n  if (!value.id && !value.url && !value.data) {\n    ctx.addIssue({\n      code: zod__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.custom,\n      message: \"BinaryInputContent requires at least one of id, url, or data.\",\n      path: [\"id\"]\n    });\n  }\n};\nvar BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {\n  ensureBinaryPayload(value, ctx);\n});\nvar InputContentBaseSchema = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  TextInputContentSchema,\n  BinaryInputContentObjectSchema\n]);\nvar InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {\n  if (value.type === \"binary\") {\n    ensureBinaryPayload(value, ctx);\n  }\n});\nvar DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar SystemMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar AssistantMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  toolCalls: zod__WEBPACK_IMPORTED_MODULE_0__.array(ToolCallSchema).optional()\n});\nvar UserMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.union([zod__WEBPACK_IMPORTED_MODULE_0__.string(), zod__WEBPACK_IMPORTED_MODULE_0__.array(InputContentSchema)])\n});\nvar ToolMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\"),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  error: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ActivityMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"activity\"),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n});\nvar MessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema,\n  ActivityMessageSchema\n]);\nvar RoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"activity\")\n]);\nvar ContextSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parameters: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n  // JSON Schema for the tool parameters\n});\nvar RunAgentInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentRunId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  state: zod__WEBPACK_IMPORTED_MODULE_0__.any(),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.array(MessageSchema),\n  tools: zod__WEBPACK_IMPORTED_MODULE_0__.array(ToolSchema),\n  context: zod__WEBPACK_IMPORTED_MODULE_0__.array(ContextSchema),\n  forwardedProps: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n});\nvar StateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.any();\nvar AGUIError = class extends Error {\n  constructor(message) {\n    super(message);\n  }\n};\nvar AGUIConnectNotImplementedError = class extends AGUIError {\n  constructor() {\n    super(\"Connect not implemented. This method is not supported by the current agent.\");\n  }\n};\n\n// src/events.ts\n\nvar TextMessageRoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\")\n]);\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[\"TEXT_MESSAGE_START\"] = \"TEXT_MESSAGE_START\";\n  EventType2[\"TEXT_MESSAGE_CONTENT\"] = \"TEXT_MESSAGE_CONTENT\";\n  EventType2[\"TEXT_MESSAGE_END\"] = \"TEXT_MESSAGE_END\";\n  EventType2[\"TEXT_MESSAGE_CHUNK\"] = \"TEXT_MESSAGE_CHUNK\";\n  EventType2[\"THINKING_TEXT_MESSAGE_START\"] = \"THINKING_TEXT_MESSAGE_START\";\n  EventType2[\"THINKING_TEXT_MESSAGE_CONTENT\"] = \"THINKING_TEXT_MESSAGE_CONTENT\";\n  EventType2[\"THINKING_TEXT_MESSAGE_END\"] = \"THINKING_TEXT_MESSAGE_END\";\n  EventType2[\"TOOL_CALL_START\"] = \"TOOL_CALL_START\";\n  EventType2[\"TOOL_CALL_ARGS\"] = \"TOOL_CALL_ARGS\";\n  EventType2[\"TOOL_CALL_END\"] = \"TOOL_CALL_END\";\n  EventType2[\"TOOL_CALL_CHUNK\"] = \"TOOL_CALL_CHUNK\";\n  EventType2[\"TOOL_CALL_RESULT\"] = \"TOOL_CALL_RESULT\";\n  EventType2[\"THINKING_START\"] = \"THINKING_START\";\n  EventType2[\"THINKING_END\"] = \"THINKING_END\";\n  EventType2[\"STATE_SNAPSHOT\"] = \"STATE_SNAPSHOT\";\n  EventType2[\"STATE_DELTA\"] = \"STATE_DELTA\";\n  EventType2[\"MESSAGES_SNAPSHOT\"] = \"MESSAGES_SNAPSHOT\";\n  EventType2[\"ACTIVITY_SNAPSHOT\"] = \"ACTIVITY_SNAPSHOT\";\n  EventType2[\"ACTIVITY_DELTA\"] = \"ACTIVITY_DELTA\";\n  EventType2[\"RAW\"] = \"RAW\";\n  EventType2[\"CUSTOM\"] = \"CUSTOM\";\n  EventType2[\"RUN_STARTED\"] = \"RUN_STARTED\";\n  EventType2[\"RUN_FINISHED\"] = \"RUN_FINISHED\";\n  EventType2[\"RUN_ERROR\"] = \"RUN_ERROR\";\n  EventType2[\"STEP_STARTED\"] = \"STEP_STARTED\";\n  EventType2[\"STEP_FINISHED\"] = \"STEP_FINISHED\";\n  return EventType2;\n})(EventType || {});\nvar BaseEventSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.nativeEnum(EventType),\n  timestamp: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  rawEvent: zod__WEBPACK_IMPORTED_MODULE_0__.any().optional()\n});\nvar TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_START\" /* TEXT_MESSAGE_START */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: TextMessageRoleSchema.default(\"assistant\")\n});\nvar TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_CONTENT\" /* TEXT_MESSAGE_CONTENT */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().refine((s) => s.length > 0, \"Delta must not be an empty string\")\n});\nvar TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_END\" /* TEXT_MESSAGE_END */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar TextMessageChunkEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_CHUNK\" /* TEXT_MESSAGE_CHUNK */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  role: TextMessageRoleSchema.optional(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_START\" /* THINKING_TEXT_MESSAGE_START */)\n});\nvar ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({\n  messageId: true,\n  type: true\n}).extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_CONTENT\" /* THINKING_TEXT_MESSAGE_CONTENT */)\n});\nvar ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_END\" /* THINKING_TEXT_MESSAGE_END */)\n});\nvar ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_START\" /* TOOL_CALL_START */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  toolCallName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentMessageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_ARGS\" /* TOOL_CALL_ARGS */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_END\" /* TOOL_CALL_END */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallResultEventSchema = BaseEventSchema.extend({\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_RESULT\" /* TOOL_CALL_RESULT */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\").optional()\n});\nvar ToolCallChunkEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_CHUNK\" /* TOOL_CALL_CHUNK */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  toolCallName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  parentMessageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_START\" /* THINKING_START */),\n  title: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_END\" /* THINKING_END */)\n});\nvar StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STATE_SNAPSHOT\" /* STATE_SNAPSHOT */),\n  snapshot: StateSchema\n});\nvar StateDeltaEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STATE_DELTA\" /* STATE_DELTA */),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n  // JSON Patch (RFC 6902)\n});\nvar MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"MESSAGES_SNAPSHOT\" /* MESSAGES_SNAPSHOT */),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.array(MessageSchema)\n});\nvar ActivitySnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"ACTIVITY_SNAPSHOT\" /* ACTIVITY_SNAPSHOT */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any()),\n  replace: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(true)\n});\nvar ActivityDeltaEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"ACTIVITY_DELTA\" /* ACTIVITY_DELTA */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  patch: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n});\nvar RawEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RAW\" /* RAW */),\n  event: zod__WEBPACK_IMPORTED_MODULE_0__.any(),\n  source: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar CustomEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"CUSTOM\" /* CUSTOM */),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n});\nvar RunStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_STARTED\" /* RUN_STARTED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentRunId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  input: RunAgentInputSchema.optional()\n});\nvar RunFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_FINISHED\" /* RUN_FINISHED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  result: zod__WEBPACK_IMPORTED_MODULE_0__.any().optional()\n});\nvar RunErrorEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_ERROR\" /* RUN_ERROR */),\n  message: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  code: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar StepStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STEP_STARTED\" /* STEP_STARTED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar StepFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STEP_FINISHED\" /* STEP_FINISHED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar EventSchemas = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageChunkEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallResultEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  ActivitySnapshotEventSchema,\n  ActivityDeltaEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema\n]);\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3JlYWN0L25vZGVfbW9kdWxlcy9AYWctdWkvY29yZS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN3QjtBQUN4Qix5QkFBeUIsdUNBQVE7QUFDakMsUUFBUSx1Q0FBUTtBQUNoQixhQUFhLHVDQUFRO0FBQ3JCLENBQUM7QUFDRCxxQkFBcUIsdUNBQVE7QUFDN0IsTUFBTSx1Q0FBUTtBQUNkLFFBQVEsd0NBQVM7QUFDakI7QUFDQSxDQUFDO0FBQ0Qsd0JBQXdCLHVDQUFRO0FBQ2hDLE1BQU0sdUNBQVE7QUFDZCxRQUFRLHVDQUFRO0FBQ2hCLFdBQVcsdUNBQVE7QUFDbkIsUUFBUSx1Q0FBUTtBQUNoQixDQUFDO0FBQ0QsNkJBQTZCLHVDQUFRO0FBQ3JDLFFBQVEsd0NBQVM7QUFDakIsUUFBUSx1Q0FBUTtBQUNoQixDQUFDO0FBQ0QscUNBQXFDLHVDQUFRO0FBQzdDLFFBQVEsd0NBQVM7QUFDakIsWUFBWSx1Q0FBUTtBQUNwQixNQUFNLHVDQUFRO0FBQ2QsT0FBTyx1Q0FBUTtBQUNmLFFBQVEsdUNBQVE7QUFDaEIsWUFBWSx1Q0FBUTtBQUNwQixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2Q0FBYztBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDZCQUE2QixtREFBb0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFTO0FBQ2pCLFdBQVcsdUNBQVE7QUFDbkIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBUztBQUNqQixXQUFXLHVDQUFRO0FBQ25CLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVM7QUFDakIsV0FBVyx1Q0FBUTtBQUNuQixhQUFhLHNDQUFPO0FBQ3BCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVM7QUFDakIsV0FBVyxzQ0FBTyxFQUFFLHVDQUFRLElBQUksc0NBQU87QUFDdkMsQ0FBQztBQUNELHdCQUF3Qix1Q0FBUTtBQUNoQyxNQUFNLHVDQUFRO0FBQ2QsV0FBVyx1Q0FBUTtBQUNuQixRQUFRLHdDQUFTO0FBQ2pCLGNBQWMsdUNBQVE7QUFDdEIsU0FBUyx1Q0FBUTtBQUNqQixDQUFDO0FBQ0QsNEJBQTRCLHVDQUFRO0FBQ3BDLE1BQU0sdUNBQVE7QUFDZCxRQUFRLHdDQUFTO0FBQ2pCLGdCQUFnQix1Q0FBUTtBQUN4QixXQUFXLHVDQUFRLENBQUMsb0NBQUs7QUFDekIsQ0FBQztBQUNELG9CQUFvQixtREFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0NBQU87QUFDeEIsRUFBRSx3Q0FBUztBQUNYLEVBQUUsd0NBQVM7QUFDWCxFQUFFLHdDQUFTO0FBQ1gsRUFBRSx3Q0FBUztBQUNYLEVBQUUsd0NBQVM7QUFDWCxFQUFFLHdDQUFTO0FBQ1g7QUFDQSxvQkFBb0IsdUNBQVE7QUFDNUIsZUFBZSx1Q0FBUTtBQUN2QixTQUFTLHVDQUFRO0FBQ2pCLENBQUM7QUFDRCxpQkFBaUIsdUNBQVE7QUFDekIsUUFBUSx1Q0FBUTtBQUNoQixlQUFlLHVDQUFRO0FBQ3ZCLGNBQWMsb0NBQUs7QUFDbkI7QUFDQSxDQUFDO0FBQ0QsMEJBQTBCLHVDQUFRO0FBQ2xDLFlBQVksdUNBQVE7QUFDcEIsU0FBUyx1Q0FBUTtBQUNqQixlQUFlLHVDQUFRO0FBQ3ZCLFNBQVMsb0NBQUs7QUFDZCxZQUFZLHNDQUFPO0FBQ25CLFNBQVMsc0NBQU87QUFDaEIsV0FBVyxzQ0FBTztBQUNsQixrQkFBa0Isb0NBQUs7QUFDdkIsQ0FBQztBQUNELGtCQUFrQixvQ0FBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QjtBQUM5Qiw0QkFBNEIsc0NBQVE7QUFDcEMsRUFBRSx3Q0FBVTtBQUNaLEVBQUUsd0NBQVU7QUFDWixFQUFFLHdDQUFVO0FBQ1osRUFBRSx3Q0FBVTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGlCQUFpQjtBQUNsQixzQkFBc0IsdUNBQVM7QUFDL0IsUUFBUSwyQ0FBYTtBQUNyQixhQUFhLHVDQUFTO0FBQ3RCLFlBQVksb0NBQU07QUFDbEIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixhQUFhLHVDQUFTO0FBQ3RCO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixhQUFhLHVDQUFTO0FBQ3RCLFNBQVMsdUNBQVM7QUFDbEIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixhQUFhLHVDQUFTO0FBQ3RCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsYUFBYSx1Q0FBUztBQUN0QjtBQUNBLFNBQVMsdUNBQVM7QUFDbEIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFFBQVEsd0NBQVU7QUFDbEIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLGNBQWMsdUNBQVM7QUFDdkIsZ0JBQWdCLHVDQUFTO0FBQ3pCLG1CQUFtQix1Q0FBUztBQUM1QixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLGNBQWMsdUNBQVM7QUFDdkIsU0FBUyx1Q0FBUztBQUNsQixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLGNBQWMsdUNBQVM7QUFDdkIsQ0FBQztBQUNEO0FBQ0EsYUFBYSx1Q0FBUztBQUN0QixRQUFRLHdDQUFVO0FBQ2xCLGNBQWMsdUNBQVM7QUFDdkIsV0FBVyx1Q0FBUztBQUNwQixRQUFRLHdDQUFVO0FBQ2xCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsY0FBYyx1Q0FBUztBQUN2QixnQkFBZ0IsdUNBQVM7QUFDekIsbUJBQW1CLHVDQUFTO0FBQzVCLFNBQVMsdUNBQVM7QUFDbEIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixTQUFTLHVDQUFTO0FBQ2xCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQjtBQUNBLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsU0FBUyxzQ0FBUSxDQUFDLG9DQUFNO0FBQ3hCO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixZQUFZLHNDQUFRO0FBQ3BCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsYUFBYSx1Q0FBUztBQUN0QixnQkFBZ0IsdUNBQVM7QUFDekIsV0FBVyx1Q0FBUyxDQUFDLG9DQUFNO0FBQzNCLFdBQVcsd0NBQVU7QUFDckIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixhQUFhLHVDQUFTO0FBQ3RCLGdCQUFnQix1Q0FBUztBQUN6QixTQUFTLHNDQUFRLENBQUMsb0NBQU07QUFDeEIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixTQUFTLG9DQUFNO0FBQ2YsVUFBVSx1Q0FBUztBQUNuQixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLFFBQVEsdUNBQVM7QUFDakIsU0FBUyxvQ0FBTTtBQUNmLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsWUFBWSx1Q0FBUztBQUNyQixTQUFTLHVDQUFTO0FBQ2xCLGVBQWUsdUNBQVM7QUFDeEI7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLFlBQVksdUNBQVM7QUFDckIsU0FBUyx1Q0FBUztBQUNsQixVQUFVLG9DQUFNO0FBQ2hCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsV0FBVyx1Q0FBUztBQUNwQixRQUFRLHVDQUFTO0FBQ2pCLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVU7QUFDbEIsWUFBWSx1Q0FBUztBQUNyQixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLFlBQVksdUNBQVM7QUFDckIsQ0FBQztBQUNELG1CQUFtQixtREFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbURFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3RyYXZlbC11aS9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3JlYWN0L25vZGVfbW9kdWxlcy9AYWctdWkvY29yZS9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdHlwZXMudHNcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG52YXIgRnVuY3Rpb25DYWxsU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLFxuICBhcmd1bWVudHM6IHouc3RyaW5nKClcbn0pO1xudmFyIFRvb2xDYWxsU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbiAgdHlwZTogei5saXRlcmFsKFwiZnVuY3Rpb25cIiksXG4gIGZ1bmN0aW9uOiBGdW5jdGlvbkNhbGxTY2hlbWFcbn0pO1xudmFyIEJhc2VNZXNzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbiAgcm9sZTogei5zdHJpbmcoKSxcbiAgY29udGVudDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRleHRJbnB1dENvbnRlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcInRleHRcIiksXG4gIHRleHQ6IHouc3RyaW5nKClcbn0pO1xudmFyIEJpbmFyeUlucHV0Q29udGVudE9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdHlwZTogei5saXRlcmFsKFwiYmluYXJ5XCIpLFxuICBtaW1lVHlwZTogei5zdHJpbmcoKSxcbiAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdXJsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGRhdGE6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZmlsZW5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgZW5zdXJlQmluYXJ5UGF5bG9hZCA9ICh2YWx1ZSwgY3R4KSA9PiB7XG4gIGlmICghdmFsdWUuaWQgJiYgIXZhbHVlLnVybCAmJiAhdmFsdWUuZGF0YSkge1xuICAgIGN0eC5hZGRJc3N1ZSh7XG4gICAgICBjb2RlOiB6LlpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICBtZXNzYWdlOiBcIkJpbmFyeUlucHV0Q29udGVudCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgb2YgaWQsIHVybCwgb3IgZGF0YS5cIixcbiAgICAgIHBhdGg6IFtcImlkXCJdXG4gICAgfSk7XG4gIH1cbn07XG52YXIgQmluYXJ5SW5wdXRDb250ZW50U2NoZW1hID0gQmluYXJ5SW5wdXRDb250ZW50T2JqZWN0U2NoZW1hLnN1cGVyUmVmaW5lKCh2YWx1ZSwgY3R4KSA9PiB7XG4gIGVuc3VyZUJpbmFyeVBheWxvYWQodmFsdWUsIGN0eCk7XG59KTtcbnZhciBJbnB1dENvbnRlbnRCYXNlU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgVGV4dElucHV0Q29udGVudFNjaGVtYSxcbiAgQmluYXJ5SW5wdXRDb250ZW50T2JqZWN0U2NoZW1hXG5dKTtcbnZhciBJbnB1dENvbnRlbnRTY2hlbWEgPSBJbnB1dENvbnRlbnRCYXNlU2NoZW1hLnN1cGVyUmVmaW5lKCh2YWx1ZSwgY3R4KSA9PiB7XG4gIGlmICh2YWx1ZS50eXBlID09PSBcImJpbmFyeVwiKSB7XG4gICAgZW5zdXJlQmluYXJ5UGF5bG9hZCh2YWx1ZSwgY3R4KTtcbiAgfVxufSk7XG52YXIgRGV2ZWxvcGVyTWVzc2FnZVNjaGVtYSA9IEJhc2VNZXNzYWdlU2NoZW1hLmV4dGVuZCh7XG4gIHJvbGU6IHoubGl0ZXJhbChcImRldmVsb3BlclwiKSxcbiAgY29udGVudDogei5zdHJpbmcoKVxufSk7XG52YXIgU3lzdGVtTWVzc2FnZVNjaGVtYSA9IEJhc2VNZXNzYWdlU2NoZW1hLmV4dGVuZCh7XG4gIHJvbGU6IHoubGl0ZXJhbChcInN5c3RlbVwiKSxcbiAgY29udGVudDogei5zdHJpbmcoKVxufSk7XG52YXIgQXNzaXN0YW50TWVzc2FnZVNjaGVtYSA9IEJhc2VNZXNzYWdlU2NoZW1hLmV4dGVuZCh7XG4gIHJvbGU6IHoubGl0ZXJhbChcImFzc2lzdGFudFwiKSxcbiAgY29udGVudDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0b29sQ2FsbHM6IHouYXJyYXkoVG9vbENhbGxTY2hlbWEpLm9wdGlvbmFsKClcbn0pO1xudmFyIFVzZXJNZXNzYWdlU2NoZW1hID0gQmFzZU1lc3NhZ2VTY2hlbWEuZXh0ZW5kKHtcbiAgcm9sZTogei5saXRlcmFsKFwidXNlclwiKSxcbiAgY29udGVudDogei51bmlvbihbei5zdHJpbmcoKSwgei5hcnJheShJbnB1dENvbnRlbnRTY2hlbWEpXSlcbn0pO1xudmFyIFRvb2xNZXNzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbiAgY29udGVudDogei5zdHJpbmcoKSxcbiAgcm9sZTogei5saXRlcmFsKFwidG9vbFwiKSxcbiAgdG9vbENhbGxJZDogei5zdHJpbmcoKSxcbiAgZXJyb3I6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgQWN0aXZpdHlNZXNzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbiAgcm9sZTogei5saXRlcmFsKFwiYWN0aXZpdHlcIiksXG4gIGFjdGl2aXR5VHlwZTogei5zdHJpbmcoKSxcbiAgY29udGVudDogei5yZWNvcmQoei5hbnkoKSlcbn0pO1xudmFyIE1lc3NhZ2VTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbihcInJvbGVcIiwgW1xuICBEZXZlbG9wZXJNZXNzYWdlU2NoZW1hLFxuICBTeXN0ZW1NZXNzYWdlU2NoZW1hLFxuICBBc3Npc3RhbnRNZXNzYWdlU2NoZW1hLFxuICBVc2VyTWVzc2FnZVNjaGVtYSxcbiAgVG9vbE1lc3NhZ2VTY2hlbWEsXG4gIEFjdGl2aXR5TWVzc2FnZVNjaGVtYVxuXSk7XG52YXIgUm9sZVNjaGVtYSA9IHoudW5pb24oW1xuICB6LmxpdGVyYWwoXCJkZXZlbG9wZXJcIiksXG4gIHoubGl0ZXJhbChcInN5c3RlbVwiKSxcbiAgei5saXRlcmFsKFwiYXNzaXN0YW50XCIpLFxuICB6LmxpdGVyYWwoXCJ1c2VyXCIpLFxuICB6LmxpdGVyYWwoXCJ0b29sXCIpLFxuICB6LmxpdGVyYWwoXCJhY3Rpdml0eVwiKVxuXSk7XG52YXIgQ29udGV4dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXG4gIHZhbHVlOiB6LnN0cmluZygpXG59KTtcbnZhciBUb29sU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKSxcbiAgcGFyYW1ldGVyczogei5hbnkoKVxuICAvLyBKU09OIFNjaGVtYSBmb3IgdGhlIHRvb2wgcGFyYW1ldGVyc1xufSk7XG52YXIgUnVuQWdlbnRJbnB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdGhyZWFkSWQ6IHouc3RyaW5nKCksXG4gIHJ1bklkOiB6LnN0cmluZygpLFxuICBwYXJlbnRSdW5JZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzdGF0ZTogei5hbnkoKSxcbiAgbWVzc2FnZXM6IHouYXJyYXkoTWVzc2FnZVNjaGVtYSksXG4gIHRvb2xzOiB6LmFycmF5KFRvb2xTY2hlbWEpLFxuICBjb250ZXh0OiB6LmFycmF5KENvbnRleHRTY2hlbWEpLFxuICBmb3J3YXJkZWRQcm9wczogei5hbnkoKVxufSk7XG52YXIgU3RhdGVTY2hlbWEgPSB6LmFueSgpO1xudmFyIEFHVUlFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gIH1cbn07XG52YXIgQUdVSUNvbm5lY3ROb3RJbXBsZW1lbnRlZEVycm9yID0gY2xhc3MgZXh0ZW5kcyBBR1VJRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIkNvbm5lY3Qgbm90IGltcGxlbWVudGVkLiBUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGFnZW50LlwiKTtcbiAgfVxufTtcblxuLy8gc3JjL2V2ZW50cy50c1xuaW1wb3J0IHsgeiBhcyB6MiB9IGZyb20gXCJ6b2RcIjtcbnZhciBUZXh0TWVzc2FnZVJvbGVTY2hlbWEgPSB6Mi51bmlvbihbXG4gIHoyLmxpdGVyYWwoXCJkZXZlbG9wZXJcIiksXG4gIHoyLmxpdGVyYWwoXCJzeXN0ZW1cIiksXG4gIHoyLmxpdGVyYWwoXCJhc3Npc3RhbnRcIiksXG4gIHoyLmxpdGVyYWwoXCJ1c2VyXCIpXG5dKTtcbnZhciBFdmVudFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChFdmVudFR5cGUyKSA9PiB7XG4gIEV2ZW50VHlwZTJbXCJURVhUX01FU1NBR0VfU1RBUlRcIl0gPSBcIlRFWFRfTUVTU0FHRV9TVEFSVFwiO1xuICBFdmVudFR5cGUyW1wiVEVYVF9NRVNTQUdFX0NPTlRFTlRcIl0gPSBcIlRFWFRfTUVTU0FHRV9DT05URU5UXCI7XG4gIEV2ZW50VHlwZTJbXCJURVhUX01FU1NBR0VfRU5EXCJdID0gXCJURVhUX01FU1NBR0VfRU5EXCI7XG4gIEV2ZW50VHlwZTJbXCJURVhUX01FU1NBR0VfQ0hVTktcIl0gPSBcIlRFWFRfTUVTU0FHRV9DSFVOS1wiO1xuICBFdmVudFR5cGUyW1wiVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUXCJdID0gXCJUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlRcIjtcbiAgRXZlbnRUeXBlMltcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9DT05URU5UXCJdID0gXCJUSElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVFwiO1xuICBFdmVudFR5cGUyW1wiVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORFwiXSA9IFwiVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORFwiO1xuICBFdmVudFR5cGUyW1wiVE9PTF9DQUxMX1NUQVJUXCJdID0gXCJUT09MX0NBTExfU1RBUlRcIjtcbiAgRXZlbnRUeXBlMltcIlRPT0xfQ0FMTF9BUkdTXCJdID0gXCJUT09MX0NBTExfQVJHU1wiO1xuICBFdmVudFR5cGUyW1wiVE9PTF9DQUxMX0VORFwiXSA9IFwiVE9PTF9DQUxMX0VORFwiO1xuICBFdmVudFR5cGUyW1wiVE9PTF9DQUxMX0NIVU5LXCJdID0gXCJUT09MX0NBTExfQ0hVTktcIjtcbiAgRXZlbnRUeXBlMltcIlRPT0xfQ0FMTF9SRVNVTFRcIl0gPSBcIlRPT0xfQ0FMTF9SRVNVTFRcIjtcbiAgRXZlbnRUeXBlMltcIlRISU5LSU5HX1NUQVJUXCJdID0gXCJUSElOS0lOR19TVEFSVFwiO1xuICBFdmVudFR5cGUyW1wiVEhJTktJTkdfRU5EXCJdID0gXCJUSElOS0lOR19FTkRcIjtcbiAgRXZlbnRUeXBlMltcIlNUQVRFX1NOQVBTSE9UXCJdID0gXCJTVEFURV9TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUyW1wiU1RBVEVfREVMVEFcIl0gPSBcIlNUQVRFX0RFTFRBXCI7XG4gIEV2ZW50VHlwZTJbXCJNRVNTQUdFU19TTkFQU0hPVFwiXSA9IFwiTUVTU0FHRVNfU05BUFNIT1RcIjtcbiAgRXZlbnRUeXBlMltcIkFDVElWSVRZX1NOQVBTSE9UXCJdID0gXCJBQ1RJVklUWV9TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUyW1wiQUNUSVZJVFlfREVMVEFcIl0gPSBcIkFDVElWSVRZX0RFTFRBXCI7XG4gIEV2ZW50VHlwZTJbXCJSQVdcIl0gPSBcIlJBV1wiO1xuICBFdmVudFR5cGUyW1wiQ1VTVE9NXCJdID0gXCJDVVNUT01cIjtcbiAgRXZlbnRUeXBlMltcIlJVTl9TVEFSVEVEXCJdID0gXCJSVU5fU1RBUlRFRFwiO1xuICBFdmVudFR5cGUyW1wiUlVOX0ZJTklTSEVEXCJdID0gXCJSVU5fRklOSVNIRURcIjtcbiAgRXZlbnRUeXBlMltcIlJVTl9FUlJPUlwiXSA9IFwiUlVOX0VSUk9SXCI7XG4gIEV2ZW50VHlwZTJbXCJTVEVQX1NUQVJURURcIl0gPSBcIlNURVBfU1RBUlRFRFwiO1xuICBFdmVudFR5cGUyW1wiU1RFUF9GSU5JU0hFRFwiXSA9IFwiU1RFUF9GSU5JU0hFRFwiO1xuICByZXR1cm4gRXZlbnRUeXBlMjtcbn0pKEV2ZW50VHlwZSB8fCB7fSk7XG52YXIgQmFzZUV2ZW50U2NoZW1hID0gejIub2JqZWN0KHtcbiAgdHlwZTogejIubmF0aXZlRW51bShFdmVudFR5cGUpLFxuICB0aW1lc3RhbXA6IHoyLm51bWJlcigpLm9wdGlvbmFsKCksXG4gIHJhd0V2ZW50OiB6Mi5hbnkoKS5vcHRpb25hbCgpXG59KTtcbnZhciBUZXh0TWVzc2FnZVN0YXJ0RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRFWFRfTUVTU0FHRV9TVEFSVFwiIC8qIFRFWFRfTUVTU0FHRV9TVEFSVCAqLyksXG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKCksXG4gIHJvbGU6IFRleHRNZXNzYWdlUm9sZVNjaGVtYS5kZWZhdWx0KFwiYXNzaXN0YW50XCIpXG59KTtcbnZhciBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEVYVF9NRVNTQUdFX0NPTlRFTlRcIiAvKiBURVhUX01FU1NBR0VfQ09OVEVOVCAqLyksXG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKCksXG4gIGRlbHRhOiB6Mi5zdHJpbmcoKS5yZWZpbmUoKHMpID0+IHMubGVuZ3RoID4gMCwgXCJEZWx0YSBtdXN0IG5vdCBiZSBhbiBlbXB0eSBzdHJpbmdcIilcbn0pO1xudmFyIFRleHRNZXNzYWdlRW5kRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRFWFRfTUVTU0FHRV9FTkRcIiAvKiBURVhUX01FU1NBR0VfRU5EICovKSxcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgVGV4dE1lc3NhZ2VDaHVua0V2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJURVhUX01FU1NBR0VfQ0hVTktcIiAvKiBURVhUX01FU1NBR0VfQ0hVTksgKi8pLFxuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHJvbGU6IFRleHRNZXNzYWdlUm9sZVNjaGVtYS5vcHRpb25hbCgpLFxuICBkZWx0YTogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgVGhpbmtpbmdUZXh0TWVzc2FnZVN0YXJ0RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9TVEFSVFwiIC8qIFRISU5LSU5HX1RFWFRfTUVTU0FHRV9TVEFSVCAqLylcbn0pO1xudmFyIFRoaW5raW5nVGV4dE1lc3NhZ2VDb250ZW50RXZlbnRTY2hlbWEgPSBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYS5vbWl0KHtcbiAgbWVzc2FnZUlkOiB0cnVlLFxuICB0eXBlOiB0cnVlXG59KS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEhJTktJTkdfVEVYVF9NRVNTQUdFX0NPTlRFTlRcIiAvKiBUSElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVCAqLylcbn0pO1xudmFyIFRoaW5raW5nVGV4dE1lc3NhZ2VFbmRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORFwiIC8qIFRISU5LSU5HX1RFWFRfTUVTU0FHRV9FTkQgKi8pXG59KTtcbnZhciBUb29sQ2FsbFN0YXJ0RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRPT0xfQ0FMTF9TVEFSVFwiIC8qIFRPT0xfQ0FMTF9TVEFSVCAqLyksXG4gIHRvb2xDYWxsSWQ6IHoyLnN0cmluZygpLFxuICB0b29sQ2FsbE5hbWU6IHoyLnN0cmluZygpLFxuICBwYXJlbnRNZXNzYWdlSWQ6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRvb2xDYWxsQXJnc0V2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUT09MX0NBTExfQVJHU1wiIC8qIFRPT0xfQ0FMTF9BUkdTICovKSxcbiAgdG9vbENhbGxJZDogejIuc3RyaW5nKCksXG4gIGRlbHRhOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgVG9vbENhbGxFbmRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVE9PTF9DQUxMX0VORFwiIC8qIFRPT0xfQ0FMTF9FTkQgKi8pLFxuICB0b29sQ2FsbElkOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgVG9vbENhbGxSZXN1bHRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpLFxuICB0eXBlOiB6Mi5saXRlcmFsKFwiVE9PTF9DQUxMX1JFU1VMVFwiIC8qIFRPT0xfQ0FMTF9SRVNVTFQgKi8pLFxuICB0b29sQ2FsbElkOiB6Mi5zdHJpbmcoKSxcbiAgY29udGVudDogejIuc3RyaW5nKCksXG4gIHJvbGU6IHoyLmxpdGVyYWwoXCJ0b29sXCIpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRvb2xDYWxsQ2h1bmtFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVE9PTF9DQUxMX0NIVU5LXCIgLyogVE9PTF9DQUxMX0NIVU5LICovKSxcbiAgdG9vbENhbGxJZDogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdG9vbENhbGxOYW1lOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBwYXJlbnRNZXNzYWdlSWQ6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGRlbHRhOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBUaGlua2luZ1N0YXJ0RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRISU5LSU5HX1NUQVJUXCIgLyogVEhJTktJTkdfU1RBUlQgKi8pLFxuICB0aXRsZTogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgVGhpbmtpbmdFbmRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEhJTktJTkdfRU5EXCIgLyogVEhJTktJTkdfRU5EICovKVxufSk7XG52YXIgU3RhdGVTbmFwc2hvdEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJTVEFURV9TTkFQU0hPVFwiIC8qIFNUQVRFX1NOQVBTSE9UICovKSxcbiAgc25hcHNob3Q6IFN0YXRlU2NoZW1hXG59KTtcbnZhciBTdGF0ZURlbHRhRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlNUQVRFX0RFTFRBXCIgLyogU1RBVEVfREVMVEEgKi8pLFxuICBkZWx0YTogejIuYXJyYXkoejIuYW55KCkpXG4gIC8vIEpTT04gUGF0Y2ggKFJGQyA2OTAyKVxufSk7XG52YXIgTWVzc2FnZXNTbmFwc2hvdEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJNRVNTQUdFU19TTkFQU0hPVFwiIC8qIE1FU1NBR0VTX1NOQVBTSE9UICovKSxcbiAgbWVzc2FnZXM6IHoyLmFycmF5KE1lc3NhZ2VTY2hlbWEpXG59KTtcbnZhciBBY3Rpdml0eVNuYXBzaG90RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIkFDVElWSVRZX1NOQVBTSE9UXCIgLyogQUNUSVZJVFlfU05BUFNIT1QgKi8pLFxuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpLFxuICBhY3Rpdml0eVR5cGU6IHoyLnN0cmluZygpLFxuICBjb250ZW50OiB6Mi5yZWNvcmQoejIuYW55KCkpLFxuICByZXBsYWNlOiB6Mi5ib29sZWFuKCkub3B0aW9uYWwoKS5kZWZhdWx0KHRydWUpXG59KTtcbnZhciBBY3Rpdml0eURlbHRhRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIkFDVElWSVRZX0RFTFRBXCIgLyogQUNUSVZJVFlfREVMVEEgKi8pLFxuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpLFxuICBhY3Rpdml0eVR5cGU6IHoyLnN0cmluZygpLFxuICBwYXRjaDogejIuYXJyYXkoejIuYW55KCkpXG59KTtcbnZhciBSYXdFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiUkFXXCIgLyogUkFXICovKSxcbiAgZXZlbnQ6IHoyLmFueSgpLFxuICBzb3VyY2U6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIEN1c3RvbUV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJDVVNUT01cIiAvKiBDVVNUT00gKi8pLFxuICBuYW1lOiB6Mi5zdHJpbmcoKSxcbiAgdmFsdWU6IHoyLmFueSgpXG59KTtcbnZhciBSdW5TdGFydGVkRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlJVTl9TVEFSVEVEXCIgLyogUlVOX1NUQVJURUQgKi8pLFxuICB0aHJlYWRJZDogejIuc3RyaW5nKCksXG4gIHJ1bklkOiB6Mi5zdHJpbmcoKSxcbiAgcGFyZW50UnVuSWQ6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGlucHV0OiBSdW5BZ2VudElucHV0U2NoZW1hLm9wdGlvbmFsKClcbn0pO1xudmFyIFJ1bkZpbmlzaGVkRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlJVTl9GSU5JU0hFRFwiIC8qIFJVTl9GSU5JU0hFRCAqLyksXG4gIHRocmVhZElkOiB6Mi5zdHJpbmcoKSxcbiAgcnVuSWQ6IHoyLnN0cmluZygpLFxuICByZXN1bHQ6IHoyLmFueSgpLm9wdGlvbmFsKClcbn0pO1xudmFyIFJ1bkVycm9yRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlJVTl9FUlJPUlwiIC8qIFJVTl9FUlJPUiAqLyksXG4gIG1lc3NhZ2U6IHoyLnN0cmluZygpLFxuICBjb2RlOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBTdGVwU3RhcnRlZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJTVEVQX1NUQVJURURcIiAvKiBTVEVQX1NUQVJURUQgKi8pLFxuICBzdGVwTmFtZTogejIuc3RyaW5nKClcbn0pO1xudmFyIFN0ZXBGaW5pc2hlZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJTVEVQX0ZJTklTSEVEXCIgLyogU1RFUF9GSU5JU0hFRCAqLyksXG4gIHN0ZXBOYW1lOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgRXZlbnRTY2hlbWFzID0gejIuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gIFRleHRNZXNzYWdlU3RhcnRFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VDb250ZW50RXZlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlRW5kRXZlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlQ2h1bmtFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdTdGFydEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ0VuZEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ1RleHRNZXNzYWdlU3RhcnRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdUZXh0TWVzc2FnZUVuZEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbFN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsQXJnc0V2ZW50U2NoZW1hLFxuICBUb29sQ2FsbEVuZEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbENodW5rRXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsUmVzdWx0RXZlbnRTY2hlbWEsXG4gIFN0YXRlU25hcHNob3RFdmVudFNjaGVtYSxcbiAgU3RhdGVEZWx0YUV2ZW50U2NoZW1hLFxuICBNZXNzYWdlc1NuYXBzaG90RXZlbnRTY2hlbWEsXG4gIEFjdGl2aXR5U25hcHNob3RFdmVudFNjaGVtYSxcbiAgQWN0aXZpdHlEZWx0YUV2ZW50U2NoZW1hLFxuICBSYXdFdmVudFNjaGVtYSxcbiAgQ3VzdG9tRXZlbnRTY2hlbWEsXG4gIFJ1blN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgUnVuRmluaXNoZWRFdmVudFNjaGVtYSxcbiAgUnVuRXJyb3JFdmVudFNjaGVtYSxcbiAgU3RlcFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgU3RlcEZpbmlzaGVkRXZlbnRTY2hlbWFcbl0pO1xuZXhwb3J0IHtcbiAgQUdVSUNvbm5lY3ROb3RJbXBsZW1lbnRlZEVycm9yLFxuICBBR1VJRXJyb3IsXG4gIEFjdGl2aXR5RGVsdGFFdmVudFNjaGVtYSxcbiAgQWN0aXZpdHlNZXNzYWdlU2NoZW1hLFxuICBBY3Rpdml0eVNuYXBzaG90RXZlbnRTY2hlbWEsXG4gIEFzc2lzdGFudE1lc3NhZ2VTY2hlbWEsXG4gIEJhc2VFdmVudFNjaGVtYSxcbiAgQmFzZU1lc3NhZ2VTY2hlbWEsXG4gIEJpbmFyeUlucHV0Q29udGVudFNjaGVtYSxcbiAgQ29udGV4dFNjaGVtYSxcbiAgQ3VzdG9tRXZlbnRTY2hlbWEsXG4gIERldmVsb3Blck1lc3NhZ2VTY2hlbWEsXG4gIEV2ZW50U2NoZW1hcyxcbiAgRXZlbnRUeXBlLFxuICBGdW5jdGlvbkNhbGxTY2hlbWEsXG4gIElucHV0Q29udGVudFNjaGVtYSxcbiAgTWVzc2FnZVNjaGVtYSxcbiAgTWVzc2FnZXNTbmFwc2hvdEV2ZW50U2NoZW1hLFxuICBSYXdFdmVudFNjaGVtYSxcbiAgUm9sZVNjaGVtYSxcbiAgUnVuQWdlbnRJbnB1dFNjaGVtYSxcbiAgUnVuRXJyb3JFdmVudFNjaGVtYSxcbiAgUnVuRmluaXNoZWRFdmVudFNjaGVtYSxcbiAgUnVuU3RhcnRlZEV2ZW50U2NoZW1hLFxuICBTdGF0ZURlbHRhRXZlbnRTY2hlbWEsXG4gIFN0YXRlU2NoZW1hLFxuICBTdGF0ZVNuYXBzaG90RXZlbnRTY2hlbWEsXG4gIFN0ZXBGaW5pc2hlZEV2ZW50U2NoZW1hLFxuICBTdGVwU3RhcnRlZEV2ZW50U2NoZW1hLFxuICBTeXN0ZW1NZXNzYWdlU2NoZW1hLFxuICBUZXh0SW5wdXRDb250ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZUNodW5rRXZlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZUVuZEV2ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZVN0YXJ0RXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nRW5kRXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nU3RhcnRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdUZXh0TWVzc2FnZUVuZEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ1RleHRNZXNzYWdlU3RhcnRFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxBcmdzRXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsQ2h1bmtFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxFbmRFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxSZXN1bHRFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxTY2hlbWEsXG4gIFRvb2xDYWxsU3RhcnRFdmVudFNjaGVtYSxcbiAgVG9vbE1lc3NhZ2VTY2hlbWEsXG4gIFRvb2xTY2hlbWEsXG4gIFVzZXJNZXNzYWdlU2NoZW1hXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/core/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/proto/dist/index.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@copilotkitnext/react/node_modules/@ag-ui/proto/dist/index.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUI_MEDIA_TYPE: () => (/* binding */ AGUI_MEDIA_TYPE),\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n/* harmony import */ var _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ag-ui/core */ \"(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/core/dist/index.mjs\");\n/* harmony import */ var _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bufbuild/protobuf/wire */ \"(ssr)/./node_modules/@bufbuild/protobuf/dist/esm/wire/binary-encoding.js\");\n// src/proto.ts\n\n\n// src/generated/events.ts\n\n\n// src/generated/google/protobuf/struct.ts\n\nfunction createBaseStruct() {\n  return { fields: {} };\n}\nvar Struct = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    Object.entries(message.fields).forEach(([key, value]) => {\n      if (value !== void 0) {\n        Struct_FieldsEntry.encode({ key, value }, writer.uint32(10).fork()).join();\n      }\n    });\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStruct();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          const entry1 = Struct_FieldsEntry.decode(reader, reader.uint32());\n          if (entry1.value !== void 0) {\n            message.fields[entry1.key] = entry1.value;\n          }\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Struct.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStruct();\n    message.fields = Object.entries((_a = object.fields) != null ? _a : {}).reduce(\n      (acc, [key, value]) => {\n        if (value !== void 0) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {}\n    );\n    return message;\n  },\n  wrap(object) {\n    const struct = createBaseStruct();\n    if (object !== void 0) {\n      for (const key of Object.keys(object)) {\n        struct.fields[key] = object[key];\n      }\n    }\n    return struct;\n  },\n  unwrap(message) {\n    const object = {};\n    if (message.fields) {\n      for (const key of Object.keys(message.fields)) {\n        object[key] = message.fields[key];\n      }\n    }\n    return object;\n  }\n};\nfunction createBaseStruct_FieldsEntry() {\n  return { key: \"\", value: void 0 };\n}\nvar Struct_FieldsEntry = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.key !== \"\") {\n      writer.uint32(10).string(message.key);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStruct_FieldsEntry();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.key = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Struct_FieldsEntry.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseStruct_FieldsEntry();\n    message.key = (_a = object.key) != null ? _a : \"\";\n    message.value = (_b = object.value) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseValue() {\n  return {\n    nullValue: void 0,\n    numberValue: void 0,\n    stringValue: void 0,\n    boolValue: void 0,\n    structValue: void 0,\n    listValue: void 0\n  };\n}\nvar Value = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.nullValue !== void 0) {\n      writer.uint32(8).int32(message.nullValue);\n    }\n    if (message.numberValue !== void 0) {\n      writer.uint32(17).double(message.numberValue);\n    }\n    if (message.stringValue !== void 0) {\n      writer.uint32(26).string(message.stringValue);\n    }\n    if (message.boolValue !== void 0) {\n      writer.uint32(32).bool(message.boolValue);\n    }\n    if (message.structValue !== void 0) {\n      Struct.encode(Struct.wrap(message.structValue), writer.uint32(42).fork()).join();\n    }\n    if (message.listValue !== void 0) {\n      ListValue.encode(ListValue.wrap(message.listValue), writer.uint32(50).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.nullValue = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 17) {\n            break;\n          }\n          message.numberValue = reader.double();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.stringValue = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 32) {\n            break;\n          }\n          message.boolValue = reader.bool();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.structValue = Struct.unwrap(Struct.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.listValue = ListValue.unwrap(ListValue.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Value.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d, _e, _f;\n    const message = createBaseValue();\n    message.nullValue = (_a = object.nullValue) != null ? _a : void 0;\n    message.numberValue = (_b = object.numberValue) != null ? _b : void 0;\n    message.stringValue = (_c = object.stringValue) != null ? _c : void 0;\n    message.boolValue = (_d = object.boolValue) != null ? _d : void 0;\n    message.structValue = (_e = object.structValue) != null ? _e : void 0;\n    message.listValue = (_f = object.listValue) != null ? _f : void 0;\n    return message;\n  },\n  wrap(value) {\n    const result = createBaseValue();\n    if (value === null) {\n      result.nullValue = 0 /* NULL_VALUE */;\n    } else if (typeof value === \"boolean\") {\n      result.boolValue = value;\n    } else if (typeof value === \"number\") {\n      result.numberValue = value;\n    } else if (typeof value === \"string\") {\n      result.stringValue = value;\n    } else if (globalThis.Array.isArray(value)) {\n      result.listValue = value;\n    } else if (typeof value === \"object\") {\n      result.structValue = value;\n    } else if (typeof value !== \"undefined\") {\n      throw new globalThis.Error(\"Unsupported any value type: \" + typeof value);\n    }\n    return result;\n  },\n  unwrap(message) {\n    if (message.stringValue !== void 0) {\n      return message.stringValue;\n    } else if ((message == null ? void 0 : message.numberValue) !== void 0) {\n      return message.numberValue;\n    } else if ((message == null ? void 0 : message.boolValue) !== void 0) {\n      return message.boolValue;\n    } else if ((message == null ? void 0 : message.structValue) !== void 0) {\n      return message.structValue;\n    } else if ((message == null ? void 0 : message.listValue) !== void 0) {\n      return message.listValue;\n    } else if ((message == null ? void 0 : message.nullValue) !== void 0) {\n      return null;\n    }\n    return void 0;\n  }\n};\nfunction createBaseListValue() {\n  return { values: [] };\n}\nvar ListValue = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    for (const v of message.values) {\n      Value.encode(Value.wrap(v), writer.uint32(10).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseListValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.values.push(Value.unwrap(Value.decode(reader, reader.uint32())));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ListValue.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseListValue();\n    message.values = ((_a = object.values) == null ? void 0 : _a.map((e) => e)) || [];\n    return message;\n  },\n  wrap(array) {\n    const result = createBaseListValue();\n    result.values = array != null ? array : [];\n    return result;\n  },\n  unwrap(message) {\n    if ((message == null ? void 0 : message.hasOwnProperty(\"values\")) && globalThis.Array.isArray(message.values)) {\n      return message.values;\n    } else {\n      return message;\n    }\n  }\n};\n\n// src/generated/patch.ts\n\nvar JsonPatchOperationType = /* @__PURE__ */ ((JsonPatchOperationType2) => {\n  JsonPatchOperationType2[JsonPatchOperationType2[\"ADD\"] = 0] = \"ADD\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"REMOVE\"] = 1] = \"REMOVE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"REPLACE\"] = 2] = \"REPLACE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"MOVE\"] = 3] = \"MOVE\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"COPY\"] = 4] = \"COPY\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"TEST\"] = 5] = \"TEST\";\n  JsonPatchOperationType2[JsonPatchOperationType2[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n  return JsonPatchOperationType2;\n})(JsonPatchOperationType || {});\nfunction createBaseJsonPatchOperation() {\n  return { op: 0, path: \"\", from: void 0, value: void 0 };\n}\nvar JsonPatchOperation = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.op !== 0) {\n      writer.uint32(8).int32(message.op);\n    }\n    if (message.path !== \"\") {\n      writer.uint32(18).string(message.path);\n    }\n    if (message.from !== void 0) {\n      writer.uint32(26).string(message.from);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseJsonPatchOperation();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.op = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.path = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.from = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return JsonPatchOperation.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d;\n    const message = createBaseJsonPatchOperation();\n    message.op = (_a = object.op) != null ? _a : 0;\n    message.path = (_b = object.path) != null ? _b : \"\";\n    message.from = (_c = object.from) != null ? _c : void 0;\n    message.value = (_d = object.value) != null ? _d : void 0;\n    return message;\n  }\n};\n\n// src/generated/types.ts\n\nfunction createBaseToolCall() {\n  return { id: \"\", type: \"\", function: void 0 };\n}\nvar ToolCall = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.type !== \"\") {\n      writer.uint32(18).string(message.type);\n    }\n    if (message.function !== void 0) {\n      ToolCall_Function.encode(message.function, writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCall();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.type = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.function = ToolCall_Function.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCall.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCall();\n    message.id = (_a = object.id) != null ? _a : \"\";\n    message.type = (_b = object.type) != null ? _b : \"\";\n    message.function = object.function !== void 0 && object.function !== null ? ToolCall_Function.fromPartial(object.function) : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCall_Function() {\n  return { name: \"\", arguments: \"\" };\n}\nvar ToolCall_Function = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.name !== \"\") {\n      writer.uint32(10).string(message.name);\n    }\n    if (message.arguments !== \"\") {\n      writer.uint32(18).string(message.arguments);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCall_Function();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.arguments = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCall_Function.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCall_Function();\n    message.name = (_a = object.name) != null ? _a : \"\";\n    message.arguments = (_b = object.arguments) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseMessage() {\n  return {\n    id: \"\",\n    role: \"\",\n    content: void 0,\n    name: void 0,\n    toolCalls: [],\n    toolCallId: void 0,\n    error: void 0\n  };\n}\nvar Message = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.role !== \"\") {\n      writer.uint32(18).string(message.role);\n    }\n    if (message.content !== void 0) {\n      writer.uint32(26).string(message.content);\n    }\n    if (message.name !== void 0) {\n      writer.uint32(34).string(message.name);\n    }\n    for (const v of message.toolCalls) {\n      ToolCall.encode(v, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallId !== void 0) {\n      writer.uint32(50).string(message.toolCallId);\n    }\n    if (message.error !== void 0) {\n      writer.uint32(58).string(message.error);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseMessage();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.content = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.toolCalls.push(ToolCall.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n          message.error = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Message.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const message = createBaseMessage();\n    message.id = (_a = object.id) != null ? _a : \"\";\n    message.role = (_b = object.role) != null ? _b : \"\";\n    message.content = (_c = object.content) != null ? _c : void 0;\n    message.name = (_d = object.name) != null ? _d : void 0;\n    message.toolCalls = ((_e = object.toolCalls) == null ? void 0 : _e.map((e) => ToolCall.fromPartial(e))) || [];\n    message.toolCallId = (_f = object.toolCallId) != null ? _f : void 0;\n    message.error = (_g = object.error) != null ? _g : void 0;\n    return message;\n  }\n};\n\n// src/generated/events.ts\nvar EventType = /* @__PURE__ */ ((EventType3) => {\n  EventType3[EventType3[\"TEXT_MESSAGE_START\"] = 0] = \"TEXT_MESSAGE_START\";\n  EventType3[EventType3[\"TEXT_MESSAGE_CONTENT\"] = 1] = \"TEXT_MESSAGE_CONTENT\";\n  EventType3[EventType3[\"TEXT_MESSAGE_END\"] = 2] = \"TEXT_MESSAGE_END\";\n  EventType3[EventType3[\"TOOL_CALL_START\"] = 3] = \"TOOL_CALL_START\";\n  EventType3[EventType3[\"TOOL_CALL_ARGS\"] = 4] = \"TOOL_CALL_ARGS\";\n  EventType3[EventType3[\"TOOL_CALL_END\"] = 5] = \"TOOL_CALL_END\";\n  EventType3[EventType3[\"STATE_SNAPSHOT\"] = 6] = \"STATE_SNAPSHOT\";\n  EventType3[EventType3[\"STATE_DELTA\"] = 7] = \"STATE_DELTA\";\n  EventType3[EventType3[\"MESSAGES_SNAPSHOT\"] = 8] = \"MESSAGES_SNAPSHOT\";\n  EventType3[EventType3[\"RAW\"] = 9] = \"RAW\";\n  EventType3[EventType3[\"CUSTOM\"] = 10] = \"CUSTOM\";\n  EventType3[EventType3[\"RUN_STARTED\"] = 11] = \"RUN_STARTED\";\n  EventType3[EventType3[\"RUN_FINISHED\"] = 12] = \"RUN_FINISHED\";\n  EventType3[EventType3[\"RUN_ERROR\"] = 13] = \"RUN_ERROR\";\n  EventType3[EventType3[\"STEP_STARTED\"] = 14] = \"STEP_STARTED\";\n  EventType3[EventType3[\"STEP_FINISHED\"] = 15] = \"STEP_FINISHED\";\n  EventType3[EventType3[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n  return EventType3;\n})(EventType || {});\nfunction createBaseBaseEvent() {\n  return { type: 0, timestamp: void 0, rawEvent: void 0 };\n}\nvar BaseEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.type !== 0) {\n      writer.uint32(8).int32(message.type);\n    }\n    if (message.timestamp !== void 0) {\n      writer.uint32(16).int64(message.timestamp);\n    }\n    if (message.rawEvent !== void 0) {\n      Value.encode(Value.wrap(message.rawEvent), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n          message.type = reader.int32();\n          continue;\n        }\n        case 2: {\n          if (tag !== 16) {\n            break;\n          }\n          message.timestamp = longToNumber(reader.int64());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.rawEvent = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return BaseEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseBaseEvent();\n    message.type = (_a = object.type) != null ? _a : 0;\n    message.timestamp = (_b = object.timestamp) != null ? _b : void 0;\n    message.rawEvent = (_c = object.rawEvent) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseTextMessageStartEvent() {\n  return { baseEvent: void 0, messageId: \"\", role: void 0 };\n}\nvar TextMessageStartEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== void 0) {\n      writer.uint32(26).string(message.role);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageStartEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseTextMessageStartEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    message.role = (_b = object.role) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseTextMessageContentEvent() {\n  return { baseEvent: void 0, messageId: \"\", delta: \"\" };\n}\nvar TextMessageContentEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageContentEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageContentEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseTextMessageContentEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    message.delta = (_b = object.delta) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseTextMessageEndEvent() {\n  return { baseEvent: void 0, messageId: \"\" };\n}\nvar TextMessageEndEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageEndEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseTextMessageEndEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseToolCallStartEvent() {\n  return { baseEvent: void 0, toolCallId: \"\", toolCallName: \"\", parentMessageId: void 0 };\n}\nvar ToolCallStartEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== \"\") {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== void 0) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.parentMessageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallStartEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseToolCallStartEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    message.toolCallName = (_b = object.toolCallName) != null ? _b : \"\";\n    message.parentMessageId = (_c = object.parentMessageId) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCallArgsEvent() {\n  return { baseEvent: void 0, toolCallId: \"\", delta: \"\" };\n}\nvar ToolCallArgsEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallArgsEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallArgsEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseToolCallArgsEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    message.delta = (_b = object.delta) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseToolCallEndEvent() {\n  return { baseEvent: void 0, toolCallId: \"\" };\n}\nvar ToolCallEndEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallEndEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseToolCallEndEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseStateSnapshotEvent() {\n  return { baseEvent: void 0, snapshot: void 0 };\n}\nvar StateSnapshotEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.snapshot !== void 0) {\n      Value.encode(Value.wrap(message.snapshot), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStateSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.snapshot = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StateSnapshotEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStateSnapshotEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.snapshot = (_a = object.snapshot) != null ? _a : void 0;\n    return message;\n  }\n};\nfunction createBaseStateDeltaEvent() {\n  return { baseEvent: void 0, delta: [] };\n}\nvar StateDeltaEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.delta) {\n      JsonPatchOperation.encode(v, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStateDeltaEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.delta.push(JsonPatchOperation.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StateDeltaEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStateDeltaEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.delta = ((_a = object.delta) == null ? void 0 : _a.map((e) => JsonPatchOperation.fromPartial(e))) || [];\n    return message;\n  }\n};\nfunction createBaseMessagesSnapshotEvent() {\n  return { baseEvent: void 0, messages: [] };\n}\nvar MessagesSnapshotEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.messages) {\n      Message.encode(v, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseMessagesSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messages.push(Message.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return MessagesSnapshotEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseMessagesSnapshotEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messages = ((_a = object.messages) == null ? void 0 : _a.map((e) => Message.fromPartial(e))) || [];\n    return message;\n  }\n};\nfunction createBaseRawEvent() {\n  return { baseEvent: void 0, event: void 0, source: void 0 };\n}\nvar RawEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.event !== void 0) {\n      Value.encode(Value.wrap(message.event), writer.uint32(18).fork()).join();\n    }\n    if (message.source !== void 0) {\n      writer.uint32(26).string(message.source);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRawEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.event = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.source = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RawEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRawEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.event = (_a = object.event) != null ? _a : void 0;\n    message.source = (_b = object.source) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseCustomEvent() {\n  return { baseEvent: void 0, name: \"\", value: void 0 };\n}\nvar CustomEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.name !== \"\") {\n      writer.uint32(18).string(message.name);\n    }\n    if (message.value !== void 0) {\n      Value.encode(Value.wrap(message.value), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseCustomEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.name = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return CustomEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseCustomEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.name = (_a = object.name) != null ? _a : \"\";\n    message.value = (_b = object.value) != null ? _b : void 0;\n    return message;\n  }\n};\nfunction createBaseRunStartedEvent() {\n  return { baseEvent: void 0, threadId: \"\", runId: \"\" };\n}\nvar RunStartedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.runId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunStartedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRunStartedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.threadId = (_a = object.threadId) != null ? _a : \"\";\n    message.runId = (_b = object.runId) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseRunFinishedEvent() {\n  return { baseEvent: void 0, threadId: \"\", runId: \"\", result: void 0 };\n}\nvar RunFinishedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    if (message.result !== void 0) {\n      Value.encode(Value.wrap(message.result), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.runId = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.result = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunFinishedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseRunFinishedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.threadId = (_a = object.threadId) != null ? _a : \"\";\n    message.runId = (_b = object.runId) != null ? _b : \"\";\n    message.result = (_c = object.result) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseRunErrorEvent() {\n  return { baseEvent: void 0, code: void 0, message: \"\" };\n}\nvar RunErrorEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.code !== void 0) {\n      writer.uint32(18).string(message.code);\n    }\n    if (message.message !== \"\") {\n      writer.uint32(26).string(message.message);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseRunErrorEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.code = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.message = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return RunErrorEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b;\n    const message = createBaseRunErrorEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.code = (_a = object.code) != null ? _a : void 0;\n    message.message = (_b = object.message) != null ? _b : \"\";\n    return message;\n  }\n};\nfunction createBaseStepStartedEvent() {\n  return { baseEvent: void 0, stepName: \"\" };\n}\nvar StepStartedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStepStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StepStartedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStepStartedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.stepName = (_a = object.stepName) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseStepFinishedEvent() {\n  return { baseEvent: void 0, stepName: \"\" };\n}\nvar StepFinishedEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseStepFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return StepFinishedEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a;\n    const message = createBaseStepFinishedEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.stepName = (_a = object.stepName) != null ? _a : \"\";\n    return message;\n  }\n};\nfunction createBaseTextMessageChunkEvent() {\n  return { baseEvent: void 0, messageId: void 0, role: void 0, delta: void 0 };\n}\nvar TextMessageChunkEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== void 0) {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== void 0) {\n      writer.uint32(26).string(message.role);\n    }\n    if (message.delta !== void 0) {\n      writer.uint32(34).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.role = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return TextMessageChunkEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c;\n    const message = createBaseTextMessageChunkEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.messageId = (_a = object.messageId) != null ? _a : void 0;\n    message.role = (_b = object.role) != null ? _b : void 0;\n    message.delta = (_c = object.delta) != null ? _c : void 0;\n    return message;\n  }\n};\nfunction createBaseToolCallChunkEvent() {\n  return {\n    baseEvent: void 0,\n    toolCallId: void 0,\n    toolCallName: void 0,\n    parentMessageId: void 0,\n    delta: void 0\n  };\n}\nvar ToolCallChunkEvent = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.baseEvent !== void 0) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== void 0) {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== void 0) {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== void 0) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    if (message.delta !== void 0) {\n      writer.uint32(42).string(message.delta);\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseToolCallChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.parentMessageId = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return ToolCallChunkEvent.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    var _a, _b, _c, _d;\n    const message = createBaseToolCallChunkEvent();\n    message.baseEvent = object.baseEvent !== void 0 && object.baseEvent !== null ? BaseEvent.fromPartial(object.baseEvent) : void 0;\n    message.toolCallId = (_a = object.toolCallId) != null ? _a : void 0;\n    message.toolCallName = (_b = object.toolCallName) != null ? _b : void 0;\n    message.parentMessageId = (_c = object.parentMessageId) != null ? _c : void 0;\n    message.delta = (_d = object.delta) != null ? _d : void 0;\n    return message;\n  }\n};\nfunction createBaseEvent() {\n  return {\n    textMessageStart: void 0,\n    textMessageContent: void 0,\n    textMessageEnd: void 0,\n    toolCallStart: void 0,\n    toolCallArgs: void 0,\n    toolCallEnd: void 0,\n    stateSnapshot: void 0,\n    stateDelta: void 0,\n    messagesSnapshot: void 0,\n    raw: void 0,\n    custom: void 0,\n    runStarted: void 0,\n    runFinished: void 0,\n    runError: void 0,\n    stepStarted: void 0,\n    stepFinished: void 0,\n    textMessageChunk: void 0,\n    toolCallChunk: void 0\n  };\n}\nvar Event = {\n  encode(message, writer = new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryWriter()) {\n    if (message.textMessageStart !== void 0) {\n      TextMessageStartEvent.encode(message.textMessageStart, writer.uint32(10).fork()).join();\n    }\n    if (message.textMessageContent !== void 0) {\n      TextMessageContentEvent.encode(message.textMessageContent, writer.uint32(18).fork()).join();\n    }\n    if (message.textMessageEnd !== void 0) {\n      TextMessageEndEvent.encode(message.textMessageEnd, writer.uint32(26).fork()).join();\n    }\n    if (message.toolCallStart !== void 0) {\n      ToolCallStartEvent.encode(message.toolCallStart, writer.uint32(34).fork()).join();\n    }\n    if (message.toolCallArgs !== void 0) {\n      ToolCallArgsEvent.encode(message.toolCallArgs, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallEnd !== void 0) {\n      ToolCallEndEvent.encode(message.toolCallEnd, writer.uint32(50).fork()).join();\n    }\n    if (message.stateSnapshot !== void 0) {\n      StateSnapshotEvent.encode(message.stateSnapshot, writer.uint32(58).fork()).join();\n    }\n    if (message.stateDelta !== void 0) {\n      StateDeltaEvent.encode(message.stateDelta, writer.uint32(66).fork()).join();\n    }\n    if (message.messagesSnapshot !== void 0) {\n      MessagesSnapshotEvent.encode(message.messagesSnapshot, writer.uint32(74).fork()).join();\n    }\n    if (message.raw !== void 0) {\n      RawEvent.encode(message.raw, writer.uint32(82).fork()).join();\n    }\n    if (message.custom !== void 0) {\n      CustomEvent.encode(message.custom, writer.uint32(90).fork()).join();\n    }\n    if (message.runStarted !== void 0) {\n      RunStartedEvent.encode(message.runStarted, writer.uint32(98).fork()).join();\n    }\n    if (message.runFinished !== void 0) {\n      RunFinishedEvent.encode(message.runFinished, writer.uint32(106).fork()).join();\n    }\n    if (message.runError !== void 0) {\n      RunErrorEvent.encode(message.runError, writer.uint32(114).fork()).join();\n    }\n    if (message.stepStarted !== void 0) {\n      StepStartedEvent.encode(message.stepStarted, writer.uint32(122).fork()).join();\n    }\n    if (message.stepFinished !== void 0) {\n      StepFinishedEvent.encode(message.stepFinished, writer.uint32(130).fork()).join();\n    }\n    if (message.textMessageChunk !== void 0) {\n      TextMessageChunkEvent.encode(message.textMessageChunk, writer.uint32(138).fork()).join();\n    }\n    if (message.toolCallChunk !== void 0) {\n      ToolCallChunkEvent.encode(message.toolCallChunk, writer.uint32(146).fork()).join();\n    }\n    return writer;\n  },\n  decode(input, length) {\n    const reader = input instanceof _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader ? input : new _bufbuild_protobuf_wire__WEBPACK_IMPORTED_MODULE_1__.BinaryReader(input);\n    const end = length === void 0 ? reader.len : reader.pos + length;\n    const message = createBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n          message.textMessageStart = TextMessageStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n          message.textMessageContent = TextMessageContentEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n          message.textMessageEnd = TextMessageEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n          message.toolCallStart = ToolCallStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n          message.toolCallArgs = ToolCallArgsEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n          message.toolCallEnd = ToolCallEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n          message.stateSnapshot = StateSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 8: {\n          if (tag !== 66) {\n            break;\n          }\n          message.stateDelta = StateDeltaEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 9: {\n          if (tag !== 74) {\n            break;\n          }\n          message.messagesSnapshot = MessagesSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 10: {\n          if (tag !== 82) {\n            break;\n          }\n          message.raw = RawEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 11: {\n          if (tag !== 90) {\n            break;\n          }\n          message.custom = CustomEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 12: {\n          if (tag !== 98) {\n            break;\n          }\n          message.runStarted = RunStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 13: {\n          if (tag !== 106) {\n            break;\n          }\n          message.runFinished = RunFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 14: {\n          if (tag !== 114) {\n            break;\n          }\n          message.runError = RunErrorEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 15: {\n          if (tag !== 122) {\n            break;\n          }\n          message.stepStarted = StepStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 16: {\n          if (tag !== 130) {\n            break;\n          }\n          message.stepFinished = StepFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 17: {\n          if (tag !== 138) {\n            break;\n          }\n          message.textMessageChunk = TextMessageChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 18: {\n          if (tag !== 146) {\n            break;\n          }\n          message.toolCallChunk = ToolCallChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n  create(base) {\n    return Event.fromPartial(base != null ? base : {});\n  },\n  fromPartial(object) {\n    const message = createBaseEvent();\n    message.textMessageStart = object.textMessageStart !== void 0 && object.textMessageStart !== null ? TextMessageStartEvent.fromPartial(object.textMessageStart) : void 0;\n    message.textMessageContent = object.textMessageContent !== void 0 && object.textMessageContent !== null ? TextMessageContentEvent.fromPartial(object.textMessageContent) : void 0;\n    message.textMessageEnd = object.textMessageEnd !== void 0 && object.textMessageEnd !== null ? TextMessageEndEvent.fromPartial(object.textMessageEnd) : void 0;\n    message.toolCallStart = object.toolCallStart !== void 0 && object.toolCallStart !== null ? ToolCallStartEvent.fromPartial(object.toolCallStart) : void 0;\n    message.toolCallArgs = object.toolCallArgs !== void 0 && object.toolCallArgs !== null ? ToolCallArgsEvent.fromPartial(object.toolCallArgs) : void 0;\n    message.toolCallEnd = object.toolCallEnd !== void 0 && object.toolCallEnd !== null ? ToolCallEndEvent.fromPartial(object.toolCallEnd) : void 0;\n    message.stateSnapshot = object.stateSnapshot !== void 0 && object.stateSnapshot !== null ? StateSnapshotEvent.fromPartial(object.stateSnapshot) : void 0;\n    message.stateDelta = object.stateDelta !== void 0 && object.stateDelta !== null ? StateDeltaEvent.fromPartial(object.stateDelta) : void 0;\n    message.messagesSnapshot = object.messagesSnapshot !== void 0 && object.messagesSnapshot !== null ? MessagesSnapshotEvent.fromPartial(object.messagesSnapshot) : void 0;\n    message.raw = object.raw !== void 0 && object.raw !== null ? RawEvent.fromPartial(object.raw) : void 0;\n    message.custom = object.custom !== void 0 && object.custom !== null ? CustomEvent.fromPartial(object.custom) : void 0;\n    message.runStarted = object.runStarted !== void 0 && object.runStarted !== null ? RunStartedEvent.fromPartial(object.runStarted) : void 0;\n    message.runFinished = object.runFinished !== void 0 && object.runFinished !== null ? RunFinishedEvent.fromPartial(object.runFinished) : void 0;\n    message.runError = object.runError !== void 0 && object.runError !== null ? RunErrorEvent.fromPartial(object.runError) : void 0;\n    message.stepStarted = object.stepStarted !== void 0 && object.stepStarted !== null ? StepStartedEvent.fromPartial(object.stepStarted) : void 0;\n    message.stepFinished = object.stepFinished !== void 0 && object.stepFinished !== null ? StepFinishedEvent.fromPartial(object.stepFinished) : void 0;\n    message.textMessageChunk = object.textMessageChunk !== void 0 && object.textMessageChunk !== null ? TextMessageChunkEvent.fromPartial(object.textMessageChunk) : void 0;\n    message.toolCallChunk = object.toolCallChunk !== void 0 && object.toolCallChunk !== null ? ToolCallChunkEvent.fromPartial(object.toolCallChunk) : void 0;\n    return message;\n  }\n};\nfunction longToNumber(int64) {\n  const num = globalThis.Number(int64.toString());\n  if (num > globalThis.Number.MAX_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n  }\n  if (num < globalThis.Number.MIN_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is smaller than Number.MIN_SAFE_INTEGER\");\n  }\n  return num;\n}\n\n// src/proto.ts\nfunction toCamelCase(str) {\n  return str.toLowerCase().replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\nfunction encode(event) {\n  const oneofField = toCamelCase(event.type);\n  const { type, timestamp, rawEvent, ...rest } = event;\n  if (type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT) {\n    rest.messages = rest.messages.map((message) => {\n      const untypedMessage = message;\n      if (untypedMessage.toolCalls === void 0) {\n        return { ...message, toolCalls: [] };\n      }\n      return message;\n    });\n  }\n  if (type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA) {\n    rest.delta = rest.delta.map((operation) => ({\n      ...operation,\n      op: JsonPatchOperationType[operation.op.toUpperCase()]\n    }));\n  }\n  const eventMessage = {\n    [oneofField]: {\n      baseEvent: {\n        type: EventType[event.type],\n        timestamp,\n        rawEvent\n      },\n      ...rest\n    }\n  };\n  return Event.encode(eventMessage).finish();\n}\nfunction decode(data) {\n  var _a;\n  const event = Event.decode(data);\n  const decoded = Object.values(event).find((value) => value !== void 0);\n  if (!decoded) {\n    throw new Error(\"Invalid event\");\n  }\n  decoded.type = EventType[decoded.baseEvent.type];\n  decoded.timestamp = decoded.baseEvent.timestamp;\n  decoded.rawEvent = decoded.baseEvent.rawEvent;\n  if (decoded.type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.MESSAGES_SNAPSHOT) {\n    for (const message of decoded.messages) {\n      const untypedMessage = message;\n      if (((_a = untypedMessage.toolCalls) == null ? void 0 : _a.length) === 0) {\n        untypedMessage.toolCalls = void 0;\n      }\n    }\n  }\n  if (decoded.type === _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventType.STATE_DELTA) {\n    for (const operation of decoded.delta) {\n      operation.op = JsonPatchOperationType[operation.op].toLowerCase();\n      Object.keys(operation).forEach((key) => {\n        if (operation[key] === void 0) {\n          delete operation[key];\n        }\n      });\n    }\n  }\n  Object.keys(decoded).forEach((key) => {\n    if (decoded[key] === void 0) {\n      delete decoded[key];\n    }\n  });\n  return _ag_ui_core__WEBPACK_IMPORTED_MODULE_0__.EventSchemas.parse(decoded);\n}\n\n// src/index.ts\nvar AGUI_MEDIA_TYPE = \"application/vnd.ag-ui.event+proto\";\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3JlYWN0L25vZGVfbW9kdWxlcy9AYWctdWkvcHJvdG8vZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNvRTs7QUFFcEU7QUFDdUc7O0FBRXZHO0FBQ3FFO0FBQ3JFO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQVk7QUFDM0M7QUFDQTtBQUNBLG9DQUFvQyxZQUFZO0FBQ2hEO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFZLGVBQWUsaUVBQVk7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzREFBc0Q7QUFDdEQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBWTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBWSxlQUFlLGlFQUFZO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFH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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxRUFBcUU7QUFDckUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx1RUFBdUU7QUFDdkUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUVBQW1FO0FBQ25FLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esa0VBQWtFO0FBQ2xFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxpRUFBaUU7QUFDakUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0VBQWdFO0FBQ2hFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxrRUFBa0U7QUFDbEUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsK0JBQStCLGlFQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0NBQW9DLGlFQUFhLGVBQWUsaUVBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLCtEQUErRDtBQUMvRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0MsaUVBQWEsZUFBZSxpRUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EscUVBQXFFO0FBQ3JFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHdEQUF3RDtBQUN4RCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDJEQUEyRDtBQUMzRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUErQixpRUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLCtEQUErRDtBQUMvRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLCtCQUEr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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQyxpRUFBYSxlQUFlLGlFQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFEQUFxRDtBQUNyRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUNBQXFDO0FBQy9DLGVBQWUsa0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxlQUFlLGtEQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxTQUFTLHFEQUFZO0FBQ3JCOztBQUVBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy90cmF2ZWwtdWkvbm9kZV9tb2R1bGVzL0Bjb3BpbG90a2l0bmV4dC9yZWFjdC9ub2RlX21vZHVsZXMvQGFnLXVpL3Byb3RvL2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9wcm90by50c1xuaW1wb3J0IHsgRXZlbnRTY2hlbWFzLCBFdmVudFR5cGUgYXMgRXZlbnRUeXBlMiB9IGZyb20gXCJAYWctdWkvY29yZVwiO1xuXG4vLyBzcmMvZ2VuZXJhdGVkL2V2ZW50cy50c1xuaW1wb3J0IHsgQmluYXJ5UmVhZGVyIGFzIEJpbmFyeVJlYWRlcjQsIEJpbmFyeVdyaXRlciBhcyBCaW5hcnlXcml0ZXI0IH0gZnJvbSBcIkBidWZidWlsZC9wcm90b2J1Zi93aXJlXCI7XG5cbi8vIHNyYy9nZW5lcmF0ZWQvZ29vZ2xlL3Byb3RvYnVmL3N0cnVjdC50c1xuaW1wb3J0IHsgQmluYXJ5UmVhZGVyLCBCaW5hcnlXcml0ZXIgfSBmcm9tIFwiQGJ1ZmJ1aWxkL3Byb3RvYnVmL3dpcmVcIjtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdHJ1Y3QoKSB7XG4gIHJldHVybiB7IGZpZWxkczoge30gfTtcbn1cbnZhciBTdHJ1Y3QgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHtcbiAgICBPYmplY3QuZW50cmllcyhtZXNzYWdlLmZpZWxkcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICBTdHJ1Y3RfRmllbGRzRW50cnkuZW5jb2RlKHsga2V5LCB2YWx1ZSB9LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyKGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RydWN0KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZW50cnkxID0gU3RydWN0X0ZpZWxkc0VudHJ5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgaWYgKGVudHJ5MS52YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBtZXNzYWdlLmZpZWxkc1tlbnRyeTEua2V5XSA9IGVudHJ5MS52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBTdHJ1Y3QuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RydWN0KCk7XG4gICAgbWVzc2FnZS5maWVsZHMgPSBPYmplY3QuZW50cmllcygoX2EgPSBvYmplY3QuZmllbGRzKSAhPSBudWxsID8gX2EgOiB7fSkucmVkdWNlKFxuICAgICAgKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgYWNjW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgd3JhcChvYmplY3QpIHtcbiAgICBjb25zdCBzdHJ1Y3QgPSBjcmVhdGVCYXNlU3RydWN0KCk7XG4gICAgaWYgKG9iamVjdCAhPT0gdm9pZCAwKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgICAgIHN0cnVjdC5maWVsZHNba2V5XSA9IG9iamVjdFtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RydWN0O1xuICB9LFxuICB1bndyYXAobWVzc2FnZSkge1xuICAgIGNvbnN0IG9iamVjdCA9IHt9O1xuICAgIGlmIChtZXNzYWdlLmZpZWxkcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobWVzc2FnZS5maWVsZHMpKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gbWVzc2FnZS5maWVsZHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdHJ1Y3RfRmllbGRzRW50cnkoKSB7XG4gIHJldHVybiB7IGtleTogXCJcIiwgdmFsdWU6IHZvaWQgMCB9O1xufVxudmFyIFN0cnVjdF9GaWVsZHNFbnRyeSA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIoKSkge1xuICAgIGlmIChtZXNzYWdlLmtleSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uua2V5KTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS52YWx1ZSksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyKGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RydWN0X0ZpZWxkc0VudHJ5KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5rZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gVmFsdWUudW53cmFwKFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gU3RydWN0X0ZpZWxkc0VudHJ5LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdHJ1Y3RfRmllbGRzRW50cnkoKTtcbiAgICBtZXNzYWdlLmtleSA9IChfYSA9IG9iamVjdC5rZXkpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS52YWx1ZSA9IChfYiA9IG9iamVjdC52YWx1ZSkgIT0gbnVsbCA/IF9iIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVZhbHVlKCkge1xuICByZXR1cm4ge1xuICAgIG51bGxWYWx1ZTogdm9pZCAwLFxuICAgIG51bWJlclZhbHVlOiB2b2lkIDAsXG4gICAgc3RyaW5nVmFsdWU6IHZvaWQgMCxcbiAgICBib29sVmFsdWU6IHZvaWQgMCxcbiAgICBzdHJ1Y3RWYWx1ZTogdm9pZCAwLFxuICAgIGxpc3RWYWx1ZTogdm9pZCAwXG4gIH07XG59XG52YXIgVmFsdWUgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHtcbiAgICBpZiAobWVzc2FnZS5udWxsVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLm51bGxWYWx1ZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm51bWJlclZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTcpLmRvdWJsZShtZXNzYWdlLm51bWJlclZhbHVlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uuc3RyaW5nVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2Uuc3RyaW5nVmFsdWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ib29sVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigzMikuYm9vbChtZXNzYWdlLmJvb2xWYWx1ZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0cnVjdFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIFN0cnVjdC5lbmNvZGUoU3RydWN0LndyYXAobWVzc2FnZS5zdHJ1Y3RWYWx1ZSksIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5saXN0VmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgTGlzdFZhbHVlLmVuY29kZShMaXN0VmFsdWUud3JhcChtZXNzYWdlLmxpc3RWYWx1ZSksIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyKGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVmFsdWUoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubnVsbFZhbHVlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTcpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm51bWJlclZhbHVlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zdHJpbmdWYWx1ZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAzMikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYm9vbFZhbHVlID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA0Mikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RydWN0VmFsdWUgPSBTdHJ1Y3QudW53cmFwKFN0cnVjdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA1MCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubGlzdFZhbHVlID0gTGlzdFZhbHVlLnVud3JhcChMaXN0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBWYWx1ZS5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVZhbHVlKCk7XG4gICAgbWVzc2FnZS5udWxsVmFsdWUgPSAoX2EgPSBvYmplY3QubnVsbFZhbHVlKSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5udW1iZXJWYWx1ZSA9IChfYiA9IG9iamVjdC5udW1iZXJWYWx1ZSkgIT0gbnVsbCA/IF9iIDogdm9pZCAwO1xuICAgIG1lc3NhZ2Uuc3RyaW5nVmFsdWUgPSAoX2MgPSBvYmplY3Quc3RyaW5nVmFsdWUpICE9IG51bGwgPyBfYyA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLmJvb2xWYWx1ZSA9IChfZCA9IG9iamVjdC5ib29sVmFsdWUpICE9IG51bGwgPyBfZCA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnN0cnVjdFZhbHVlID0gKF9lID0gb2JqZWN0LnN0cnVjdFZhbHVlKSAhPSBudWxsID8gX2UgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5saXN0VmFsdWUgPSAoX2YgPSBvYmplY3QubGlzdFZhbHVlKSAhPSBudWxsID8gX2YgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIHdyYXAodmFsdWUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBjcmVhdGVCYXNlVmFsdWUoKTtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHJlc3VsdC5udWxsVmFsdWUgPSAwIC8qIE5VTExfVkFMVUUgKi87XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICByZXN1bHQuYm9vbFZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJlc3VsdC5udW1iZXJWYWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXN1bHQuc3RyaW5nVmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGdsb2JhbFRoaXMuQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJlc3VsdC5saXN0VmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmVzdWx0LnN0cnVjdFZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVW5zdXBwb3J0ZWQgYW55IHZhbHVlIHR5cGU6IFwiICsgdHlwZW9mIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcbiAgdW53cmFwKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZS5zdHJpbmdWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZS5zdHJpbmdWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKChtZXNzYWdlID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlLm51bWJlclZhbHVlKSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZS5udW1iZXJWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKChtZXNzYWdlID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlLmJvb2xWYWx1ZSkgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG1lc3NhZ2UuYm9vbFZhbHVlO1xuICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG1lc3NhZ2Uuc3RydWN0VmFsdWUpICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBtZXNzYWdlLnN0cnVjdFZhbHVlO1xuICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG1lc3NhZ2UubGlzdFZhbHVlKSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZS5saXN0VmFsdWU7XG4gICAgfSBlbHNlIGlmICgobWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZS5udWxsVmFsdWUpICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RWYWx1ZSgpIHtcbiAgcmV0dXJuIHsgdmFsdWVzOiBbXSB9O1xufVxudmFyIExpc3RWYWx1ZSA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIoKSkge1xuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnZhbHVlcykge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAodiksIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyKGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdFZhbHVlKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS52YWx1ZXMucHVzaChWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gTGlzdFZhbHVlLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RWYWx1ZSgpO1xuICAgIG1lc3NhZ2UudmFsdWVzID0gKChfYSA9IG9iamVjdC52YWx1ZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGUpKSB8fCBbXTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgd3JhcChhcnJheSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZUJhc2VMaXN0VmFsdWUoKTtcbiAgICByZXN1bHQudmFsdWVzID0gYXJyYXkgIT0gbnVsbCA/IGFycmF5IDogW107XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcbiAgdW53cmFwKG1lc3NhZ2UpIHtcbiAgICBpZiAoKG1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZXNcIikpICYmIGdsb2JhbFRoaXMuQXJyYXkuaXNBcnJheShtZXNzYWdlLnZhbHVlcykpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlLnZhbHVlcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvZ2VuZXJhdGVkL3BhdGNoLnRzXG5pbXBvcnQgeyBCaW5hcnlSZWFkZXIgYXMgQmluYXJ5UmVhZGVyMiwgQmluYXJ5V3JpdGVyIGFzIEJpbmFyeVdyaXRlcjIgfSBmcm9tIFwiQGJ1ZmJ1aWxkL3Byb3RvYnVmL3dpcmVcIjtcbnZhciBKc29uUGF0Y2hPcGVyYXRpb25UeXBlID0gLyogQF9fUFVSRV9fICovICgoSnNvblBhdGNoT3BlcmF0aW9uVHlwZTIpID0+IHtcbiAgSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbSnNvblBhdGNoT3BlcmF0aW9uVHlwZTJbXCJBRERcIl0gPSAwXSA9IFwiQUREXCI7XG4gIEpzb25QYXRjaE9wZXJhdGlvblR5cGUyW0pzb25QYXRjaE9wZXJhdGlvblR5cGUyW1wiUkVNT1ZFXCJdID0gMV0gPSBcIlJFTU9WRVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIlJFUExBQ0VcIl0gPSAyXSA9IFwiUkVQTEFDRVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIk1PVkVcIl0gPSAzXSA9IFwiTU9WRVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIkNPUFlcIl0gPSA0XSA9IFwiQ09QWVwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIlRFU1RcIl0gPSA1XSA9IFwiVEVTVFwiO1xuICBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltKc29uUGF0Y2hPcGVyYXRpb25UeXBlMltcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG4gIHJldHVybiBKc29uUGF0Y2hPcGVyYXRpb25UeXBlMjtcbn0pKEpzb25QYXRjaE9wZXJhdGlvblR5cGUgfHwge30pO1xuZnVuY3Rpb24gY3JlYXRlQmFzZUpzb25QYXRjaE9wZXJhdGlvbigpIHtcbiAgcmV0dXJuIHsgb3A6IDAsIHBhdGg6IFwiXCIsIGZyb206IHZvaWQgMCwgdmFsdWU6IHZvaWQgMCB9O1xufVxudmFyIEpzb25QYXRjaE9wZXJhdGlvbiA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIyKCkpIHtcbiAgICBpZiAobWVzc2FnZS5vcCAhPT0gMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLm9wKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucGF0aCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UucGF0aCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmZyb20gIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UuZnJvbSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIFZhbHVlLmVuY29kZShWYWx1ZS53cmFwKG1lc3NhZ2UudmFsdWUpLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjIgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXIyKGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSnNvblBhdGNoT3BlcmF0aW9uKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm9wID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnBhdGggPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmZyb20gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMzQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gVmFsdWUudW53cmFwKFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gSnNvblBhdGNoT3BlcmF0aW9uLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUpzb25QYXRjaE9wZXJhdGlvbigpO1xuICAgIG1lc3NhZ2Uub3AgPSAoX2EgPSBvYmplY3Qub3ApICE9IG51bGwgPyBfYSA6IDA7XG4gICAgbWVzc2FnZS5wYXRoID0gKF9iID0gb2JqZWN0LnBhdGgpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gICAgbWVzc2FnZS5mcm9tID0gKF9jID0gb2JqZWN0LmZyb20pICE9IG51bGwgPyBfYyA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnZhbHVlID0gKF9kID0gb2JqZWN0LnZhbHVlKSAhPSBudWxsID8gX2QgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5cbi8vIHNyYy9nZW5lcmF0ZWQvdHlwZXMudHNcbmltcG9ydCB7IEJpbmFyeVJlYWRlciBhcyBCaW5hcnlSZWFkZXIzLCBCaW5hcnlXcml0ZXIgYXMgQmluYXJ5V3JpdGVyMyB9IGZyb20gXCJAYnVmYnVpbGQvcHJvdG9idWYvd2lyZVwiO1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsKCkge1xuICByZXR1cm4geyBpZDogXCJcIiwgdHlwZTogXCJcIiwgZnVuY3Rpb246IHZvaWQgMCB9O1xufVxudmFyIFRvb2xDYWxsID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjMoKSkge1xuICAgIGlmIChtZXNzYWdlLmlkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5pZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnR5cGUgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnR5cGUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5mdW5jdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgICBUb29sQ2FsbF9GdW5jdGlvbi5lbmNvZGUobWVzc2FnZS5mdW5jdGlvbiwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIzID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyMyhpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuZnVuY3Rpb24gPSBUb29sQ2FsbF9GdW5jdGlvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVG9vbENhbGwuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsKCk7XG4gICAgbWVzc2FnZS5pZCA9IChfYSA9IG9iamVjdC5pZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLnR5cGUgPSAoX2IgPSBvYmplY3QudHlwZSkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICBtZXNzYWdlLmZ1bmN0aW9uID0gb2JqZWN0LmZ1bmN0aW9uICE9PSB2b2lkIDAgJiYgb2JqZWN0LmZ1bmN0aW9uICE9PSBudWxsID8gVG9vbENhbGxfRnVuY3Rpb24uZnJvbVBhcnRpYWwob2JqZWN0LmZ1bmN0aW9uKSA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUb29sQ2FsbF9GdW5jdGlvbigpIHtcbiAgcmV0dXJuIHsgbmFtZTogXCJcIiwgYXJndW1lbnRzOiBcIlwiIH07XG59XG52YXIgVG9vbENhbGxfRnVuY3Rpb24gPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyMygpKSB7XG4gICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmFyZ3VtZW50cyAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjMgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXIzKGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxfRnVuY3Rpb24oKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmFyZ3VtZW50cyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRvb2xDYWxsX0Z1bmN0aW9uLmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbF9GdW5jdGlvbigpO1xuICAgIG1lc3NhZ2UubmFtZSA9IChfYSA9IG9iamVjdC5uYW1lKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UuYXJndW1lbnRzID0gKF9iID0gb2JqZWN0LmFyZ3VtZW50cykgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VNZXNzYWdlKCkge1xuICByZXR1cm4ge1xuICAgIGlkOiBcIlwiLFxuICAgIHJvbGU6IFwiXCIsXG4gICAgY29udGVudDogdm9pZCAwLFxuICAgIG5hbWU6IHZvaWQgMCxcbiAgICB0b29sQ2FsbHM6IFtdLFxuICAgIHRvb2xDYWxsSWQ6IHZvaWQgMCxcbiAgICBlcnJvcjogdm9pZCAwXG4gIH07XG59XG52YXIgTWVzc2FnZSA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXIzKCkpIHtcbiAgICBpZiAobWVzc2FnZS5pZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuaWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5yb2xlICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5yb2xlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuY29udGVudCAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5jb250ZW50KTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UudG9vbENhbGxzKSB7XG4gICAgICBUb29sQ2FsbC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig0MikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsSWQgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMig1MCkuc3RyaW5nKG1lc3NhZ2UudG9vbENhbGxJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmVycm9yICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoNTgpLnN0cmluZyhtZXNzYWdlLmVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjMgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXIzKGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTWVzc2FnZSgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJvbGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMzQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA1OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNDIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxscy5wdXNoKFRvb2xDYWxsLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDUwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbElkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDU4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5lcnJvciA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIE1lc3NhZ2UuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTWVzc2FnZSgpO1xuICAgIG1lc3NhZ2UuaWQgPSAoX2EgPSBvYmplY3QuaWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS5yb2xlID0gKF9iID0gb2JqZWN0LnJvbGUpICE9IG51bGwgPyBfYiA6IFwiXCI7XG4gICAgbWVzc2FnZS5jb250ZW50ID0gKF9jID0gb2JqZWN0LmNvbnRlbnQpICE9IG51bGwgPyBfYyA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLm5hbWUgPSAoX2QgPSBvYmplY3QubmFtZSkgIT0gbnVsbCA/IF9kIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxzID0gKChfZSA9IG9iamVjdC50b29sQ2FsbHMpID09IG51bGwgPyB2b2lkIDAgOiBfZS5tYXAoKGUpID0+IFRvb2xDYWxsLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgbWVzc2FnZS50b29sQ2FsbElkID0gKF9mID0gb2JqZWN0LnRvb2xDYWxsSWQpICE9IG51bGwgPyBfZiA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLmVycm9yID0gKF9nID0gb2JqZWN0LmVycm9yKSAhPSBudWxsID8gX2cgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5cbi8vIHNyYy9nZW5lcmF0ZWQvZXZlbnRzLnRzXG52YXIgRXZlbnRUeXBlID0gLyogQF9fUFVSRV9fICovICgoRXZlbnRUeXBlMykgPT4ge1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJURVhUX01FU1NBR0VfU1RBUlRcIl0gPSAwXSA9IFwiVEVYVF9NRVNTQUdFX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRFWFRfTUVTU0FHRV9DT05URU5UXCJdID0gMV0gPSBcIlRFWFRfTUVTU0FHRV9DT05URU5UXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRFWFRfTUVTU0FHRV9FTkRcIl0gPSAyXSA9IFwiVEVYVF9NRVNTQUdFX0VORFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJUT09MX0NBTExfU1RBUlRcIl0gPSAzXSA9IFwiVE9PTF9DQUxMX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRPT0xfQ0FMTF9BUkdTXCJdID0gNF0gPSBcIlRPT0xfQ0FMTF9BUkdTXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlRPT0xfQ0FMTF9FTkRcIl0gPSA1XSA9IFwiVE9PTF9DQUxMX0VORFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEFURV9TTkFQU0hPVFwiXSA9IDZdID0gXCJTVEFURV9TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEFURV9ERUxUQVwiXSA9IDddID0gXCJTVEFURV9ERUxUQVwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJNRVNTQUdFU19TTkFQU0hPVFwiXSA9IDhdID0gXCJNRVNTQUdFU19TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJSQVdcIl0gPSA5XSA9IFwiUkFXXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIkNVU1RPTVwiXSA9IDEwXSA9IFwiQ1VTVE9NXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlJVTl9TVEFSVEVEXCJdID0gMTFdID0gXCJSVU5fU1RBUlRFRFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJSVU5fRklOSVNIRURcIl0gPSAxMl0gPSBcIlJVTl9GSU5JU0hFRFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJSVU5fRVJST1JcIl0gPSAxM10gPSBcIlJVTl9FUlJPUlwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEVQX1NUQVJURURcIl0gPSAxNF0gPSBcIlNURVBfU1RBUlRFRFwiO1xuICBFdmVudFR5cGUzW0V2ZW50VHlwZTNbXCJTVEVQX0ZJTklTSEVEXCJdID0gMTVdID0gXCJTVEVQX0ZJTklTSEVEXCI7XG4gIEV2ZW50VHlwZTNbRXZlbnRUeXBlM1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG4gIHJldHVybiBFdmVudFR5cGUzO1xufSkoRXZlbnRUeXBlIHx8IHt9KTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VCYXNlRXZlbnQoKSB7XG4gIHJldHVybiB7IHR5cGU6IDAsIHRpbWVzdGFtcDogdm9pZCAwLCByYXdFdmVudDogdm9pZCAwIH07XG59XG52YXIgQmFzZUV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLnR5cGUgIT09IDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS50eXBlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDY0KG1lc3NhZ2UudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucmF3RXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgVmFsdWUuZW5jb2RlKFZhbHVlLndyYXAobWVzc2FnZS5yYXdFdmVudCksIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VCYXNlRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50aW1lc3RhbXAgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5yYXdFdmVudCA9IFZhbHVlLnVud3JhcChWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIEJhc2VFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUJhc2VFdmVudCgpO1xuICAgIG1lc3NhZ2UudHlwZSA9IChfYSA9IG9iamVjdC50eXBlKSAhPSBudWxsID8gX2EgOiAwO1xuICAgIG1lc3NhZ2UudGltZXN0YW1wID0gKF9iID0gb2JqZWN0LnRpbWVzdGFtcCkgIT0gbnVsbCA/IF9iIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UucmF3RXZlbnQgPSAoX2MgPSBvYmplY3QucmF3RXZlbnQpICE9IG51bGwgPyBfYyA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUZXh0TWVzc2FnZVN0YXJ0RXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBtZXNzYWdlSWQ6IFwiXCIsIHJvbGU6IHZvaWQgMCB9O1xufVxudmFyIFRleHRNZXNzYWdlU3RhcnRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZUlkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5yb2xlKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VTdGFydEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5yb2xlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVGV4dE1lc3NhZ2VTdGFydEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUZXh0TWVzc2FnZVN0YXJ0RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubWVzc2FnZUlkID0gKF9hID0gb2JqZWN0Lm1lc3NhZ2VJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLnJvbGUgPSAoX2IgPSBvYmplY3Qucm9sZSkgIT0gbnVsbCA/IF9iIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRleHRNZXNzYWdlQ29udGVudEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgbWVzc2FnZUlkOiBcIlwiLCBkZWx0YTogXCJcIiB9O1xufVxudmFyIFRleHRNZXNzYWdlQ29udGVudEV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZUlkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5kZWx0YSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UuZGVsdGEpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUNvbnRlbnRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuZGVsdGEgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubWVzc2FnZUlkID0gKF9hID0gb2JqZWN0Lm1lc3NhZ2VJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLmRlbHRhID0gKF9iID0gb2JqZWN0LmRlbHRhKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRleHRNZXNzYWdlRW5kRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBtZXNzYWdlSWQ6IFwiXCIgfTtcbn1cbnZhciBUZXh0TWVzc2FnZUVuZEV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZUlkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUVuZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVGV4dE1lc3NhZ2VFbmRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUVuZEV2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9IChfYSA9IG9iamVjdC5tZXNzYWdlSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVG9vbENhbGxTdGFydEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgdG9vbENhbGxJZDogXCJcIiwgdG9vbENhbGxOYW1lOiBcIlwiLCBwYXJlbnRNZXNzYWdlSWQ6IHZvaWQgMCB9O1xufVxudmFyIFRvb2xDYWxsU3RhcnRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbE5hbWUgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsTmFtZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnBhcmVudE1lc3NhZ2VJZCAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbFN0YXJ0RXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbElkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMzQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnBhcmVudE1lc3NhZ2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRvb2xDYWxsU3RhcnRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsU3RhcnRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbElkID0gKF9hID0gb2JqZWN0LnRvb2xDYWxsSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgbWVzc2FnZS50b29sQ2FsbE5hbWUgPSAoX2IgPSBvYmplY3QudG9vbENhbGxOYW1lKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIG1lc3NhZ2UucGFyZW50TWVzc2FnZUlkID0gKF9jID0gb2JqZWN0LnBhcmVudE1lc3NhZ2VJZCkgIT0gbnVsbCA/IF9jIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsQXJnc0V2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgdG9vbENhbGxJZDogXCJcIiwgZGVsdGE6IFwiXCIgfTtcbn1cbnZhciBUb29sQ2FsbEFyZ3NFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5kZWx0YSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UuZGVsdGEpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbEFyZ3NFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmRlbHRhID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gVG9vbENhbGxBcmdzRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsQXJnc0V2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSAoX2EgPSBvYmplY3QudG9vbENhbGxJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLmRlbHRhID0gKF9iID0gb2JqZWN0LmRlbHRhKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRvb2xDYWxsRW5kRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCB0b29sQ2FsbElkOiBcIlwiIH07XG59XG52YXIgVG9vbENhbGxFbmRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsSWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbEVuZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRvb2xDYWxsRW5kRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVG9vbENhbGxFbmRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbElkID0gKF9hID0gb2JqZWN0LnRvb2xDYWxsSWQpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RhdGVTbmFwc2hvdEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgc25hcHNob3Q6IHZvaWQgMCB9O1xufVxudmFyIFN0YXRlU25hcHNob3RFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnNuYXBzaG90ICE9PSB2b2lkIDApIHtcbiAgICAgIFZhbHVlLmVuY29kZShWYWx1ZS53cmFwKG1lc3NhZ2Uuc25hcHNob3QpLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RhdGVTbmFwc2hvdEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc25hcHNob3QgPSBWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBTdGF0ZVNuYXBzaG90RXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RhdGVTbmFwc2hvdEV2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnNuYXBzaG90ID0gKF9hID0gb2JqZWN0LnNuYXBzaG90KSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RhdGVEZWx0YUV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgZGVsdGE6IFtdIH07XG59XG52YXIgU3RhdGVEZWx0YUV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZGVsdGEpIHtcbiAgICAgIEpzb25QYXRjaE9wZXJhdGlvbi5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0YXRlRGVsdGFFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmRlbHRhLnB1c2goSnNvblBhdGNoT3BlcmF0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gU3RhdGVEZWx0YUV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0YXRlRGVsdGFFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5kZWx0YSA9ICgoX2EgPSBvYmplY3QuZGVsdGEpID09IG51bGwgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IEpzb25QYXRjaE9wZXJhdGlvbi5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZU1lc3NhZ2VzU25hcHNob3RFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIG1lc3NhZ2VzOiBbXSB9O1xufVxudmFyIE1lc3NhZ2VzU25hcHNob3RFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLm1lc3NhZ2VzKSB7XG4gICAgICBNZXNzYWdlLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTWVzc2FnZXNTbmFwc2hvdEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZXMucHVzaChNZXNzYWdlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gTWVzc2FnZXNTbmFwc2hvdEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU1lc3NhZ2VzU25hcHNob3RFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlcyA9ICgoX2EgPSBvYmplY3QubWVzc2FnZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IE1lc3NhZ2UuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSYXdFdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIGV2ZW50OiB2b2lkIDAsIHNvdXJjZTogdm9pZCAwIH07XG59XG52YXIgUmF3RXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ldmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBWYWx1ZS5lbmNvZGUoVmFsdWUud3JhcChtZXNzYWdlLmV2ZW50KSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnNvdXJjZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5zb3VyY2UpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSYXdFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmV2ZW50ID0gVmFsdWUudW53cmFwKFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zb3VyY2UgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBSYXdFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUmF3RXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuZXZlbnQgPSAoX2EgPSBvYmplY3QuZXZlbnQpICE9IG51bGwgPyBfYSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnNvdXJjZSA9IChfYiA9IG9iamVjdC5zb3VyY2UpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VDdXN0b21FdmVudCgpIHtcbiAgcmV0dXJuIHsgYmFzZUV2ZW50OiB2b2lkIDAsIG5hbWU6IFwiXCIsIHZhbHVlOiB2b2lkIDAgfTtcbn1cbnZhciBDdXN0b21FdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS52YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBWYWx1ZS5lbmNvZGUoVmFsdWUud3JhcChtZXNzYWdlLnZhbHVlKSwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUN1c3RvbUV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSBWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBDdXN0b21FdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ3VzdG9tRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UubmFtZSA9IChfYSA9IG9iamVjdC5uYW1lKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIG1lc3NhZ2UudmFsdWUgPSAoX2IgPSBvYmplY3QudmFsdWUpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSdW5TdGFydGVkRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCB0aHJlYWRJZDogXCJcIiwgcnVuSWQ6IFwiXCIgfTtcbn1cbnZhciBSdW5TdGFydGVkRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UuYmFzZUV2ZW50ICE9PSB2b2lkIDApIHtcbiAgICAgIEJhc2VFdmVudC5lbmNvZGUobWVzc2FnZS5iYXNlRXZlbnQsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50aHJlYWRJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudGhyZWFkSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ydW5JZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UucnVuSWQpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSdW5TdGFydGVkRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50aHJlYWRJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucnVuSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBSdW5TdGFydGVkRXZlbnQuZnJvbVBhcnRpYWwoYmFzZSAhPSBudWxsID8gYmFzZSA6IHt9KTtcbiAgfSxcbiAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJ1blN0YXJ0ZWRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50aHJlYWRJZCA9IChfYSA9IG9iamVjdC50aHJlYWRJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLnJ1bklkID0gKF9iID0gb2JqZWN0LnJ1bklkKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJ1bkZpbmlzaGVkRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCB0aHJlYWRJZDogXCJcIiwgcnVuSWQ6IFwiXCIsIHJlc3VsdDogdm9pZCAwIH07XG59XG52YXIgUnVuRmluaXNoZWRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRocmVhZElkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50aHJlYWRJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJ1bklkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5ydW5JZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJlc3VsdCAhPT0gdm9pZCAwKSB7XG4gICAgICBWYWx1ZS5lbmNvZGUoVmFsdWUud3JhcChtZXNzYWdlLnJlc3VsdCksIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyNCA/IGlucHV0IDogbmV3IEJpbmFyeVJlYWRlcjQoaW5wdXQpO1xuICAgIGNvbnN0IGVuZCA9IGxlbmd0aCA9PT0gdm9pZCAwID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSdW5GaW5pc2hlZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGhyZWFkSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJ1bklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDM0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5yZXN1bHQgPSBWYWx1ZS51bndyYXAoVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBSdW5GaW5pc2hlZEV2ZW50LmZyb21QYXJ0aWFsKGJhc2UgIT0gbnVsbCA/IGJhc2UgOiB7fSk7XG4gIH0sXG4gIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUnVuRmluaXNoZWRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50aHJlYWRJZCA9IChfYSA9IG9iamVjdC50aHJlYWRJZCkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICBtZXNzYWdlLnJ1bklkID0gKF9iID0gb2JqZWN0LnJ1bklkKSAhPSBudWxsID8gX2IgOiBcIlwiO1xuICAgIG1lc3NhZ2UucmVzdWx0ID0gKF9jID0gb2JqZWN0LnJlc3VsdCkgIT0gbnVsbCA/IF9jIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJ1bkVycm9yRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBjb2RlOiB2b2lkIDAsIG1lc3NhZ2U6IFwiXCIgfTtcbn1cbnZhciBSdW5FcnJvckV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuY29kZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5jb2RlKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJ1bkVycm9yRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLmJhc2VFdmVudCA9IEJhc2VFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDE4KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5jb2RlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5tZXNzYWdlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gUnVuRXJyb3JFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUnVuRXJyb3JFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5jb2RlID0gKF9hID0gb2JqZWN0LmNvZGUpICE9IG51bGwgPyBfYSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLm1lc3NhZ2UgPSAoX2IgPSBvYmplY3QubWVzc2FnZSkgIT0gbnVsbCA/IF9iIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdGVwU3RhcnRlZEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgc3RlcE5hbWU6IFwiXCIgfTtcbn1cbnZhciBTdGVwU3RhcnRlZEV2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uuc3RlcE5hbWUgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnN0ZXBOYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RlcFN0YXJ0ZWRFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0ZXBOYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHRhZyAmIDcpID09PSA0IHx8IHRhZyA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlYWRlci5za2lwKHRhZyAmIDcpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbiAgY3JlYXRlKGJhc2UpIHtcbiAgICByZXR1cm4gU3RlcFN0YXJ0ZWRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGVwU3RhcnRlZEV2ZW50KCk7XG4gICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBvYmplY3QuYmFzZUV2ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LmJhc2VFdmVudCAhPT0gbnVsbCA/IEJhc2VFdmVudC5mcm9tUGFydGlhbChvYmplY3QuYmFzZUV2ZW50KSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnN0ZXBOYW1lID0gKF9hID0gb2JqZWN0LnN0ZXBOYW1lKSAhPSBudWxsID8gX2EgOiBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0ZXBGaW5pc2hlZEV2ZW50KCkge1xuICByZXR1cm4geyBiYXNlRXZlbnQ6IHZvaWQgMCwgc3RlcE5hbWU6IFwiXCIgfTtcbn1cbnZhciBTdGVwRmluaXNoZWRFdmVudCA9IHtcbiAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG5ldyBCaW5hcnlXcml0ZXI0KCkpIHtcbiAgICBpZiAobWVzc2FnZS5iYXNlRXZlbnQgIT09IHZvaWQgMCkge1xuICAgICAgQmFzZUV2ZW50LmVuY29kZShtZXNzYWdlLmJhc2VFdmVudCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0ZXBOYW1lICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5zdGVwTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0ZXBGaW5pc2hlZEV2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RlcE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBTdGVwRmluaXNoZWRFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdGVwRmluaXNoZWRFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGVwTmFtZSA9IChfYSA9IG9iamVjdC5zdGVwTmFtZSkgIT0gbnVsbCA/IF9hIDogXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUZXh0TWVzc2FnZUNodW5rRXZlbnQoKSB7XG4gIHJldHVybiB7IGJhc2VFdmVudDogdm9pZCAwLCBtZXNzYWdlSWQ6IHZvaWQgMCwgcm9sZTogdm9pZCAwLCBkZWx0YTogdm9pZCAwIH07XG59XG52YXIgVGV4dE1lc3NhZ2VDaHVua0V2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZUlkICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm1lc3NhZ2VJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJvbGUgIT09IHZvaWQgMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2Uucm9sZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmRlbHRhICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLmRlbHRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGV4dE1lc3NhZ2VDaHVua0V2ZW50KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDEwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5iYXNlRXZlbnQgPSBCYXNlRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDI2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5yb2xlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDM0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5kZWx0YSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRleHRNZXNzYWdlQ2h1bmtFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRleHRNZXNzYWdlQ2h1bmtFdmVudCgpO1xuICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gb2JqZWN0LmJhc2VFdmVudCAhPT0gdm9pZCAwICYmIG9iamVjdC5iYXNlRXZlbnQgIT09IG51bGwgPyBCYXNlRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LmJhc2VFdmVudCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlSWQgPSAoX2EgPSBvYmplY3QubWVzc2FnZUlkKSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5yb2xlID0gKF9iID0gb2JqZWN0LnJvbGUpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLmRlbHRhID0gKF9jID0gb2JqZWN0LmRlbHRhKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVG9vbENhbGxDaHVua0V2ZW50KCkge1xuICByZXR1cm4ge1xuICAgIGJhc2VFdmVudDogdm9pZCAwLFxuICAgIHRvb2xDYWxsSWQ6IHZvaWQgMCxcbiAgICB0b29sQ2FsbE5hbWU6IHZvaWQgMCxcbiAgICBwYXJlbnRNZXNzYWdlSWQ6IHZvaWQgMCxcbiAgICBkZWx0YTogdm9pZCAwXG4gIH07XG59XG52YXIgVG9vbENhbGxDaHVua0V2ZW50ID0ge1xuICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbmV3IEJpbmFyeVdyaXRlcjQoKSkge1xuICAgIGlmIChtZXNzYWdlLmJhc2VFdmVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBCYXNlRXZlbnQuZW5jb2RlKG1lc3NhZ2UuYmFzZUV2ZW50LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxJZCAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50b29sQ2FsbElkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxOYW1lICE9PSB2b2lkIDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnRvb2xDYWxsTmFtZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnBhcmVudE1lc3NhZ2VJZCAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5kZWx0YSAhPT0gdm9pZCAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5kZWx0YSk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG4gIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXI0ID8gaW5wdXQgOiBuZXcgQmluYXJ5UmVhZGVyNChpbnB1dCk7XG4gICAgY29uc3QgZW5kID0gbGVuZ3RoID09PSB2b2lkIDAgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRvb2xDYWxsQ2h1bmtFdmVudCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuYmFzZUV2ZW50ID0gQmFzZUV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMjYpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAzNCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UucGFyZW50TWVzc2FnZUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDQyKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5kZWx0YSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gNCB8fCB0YWcgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZWFkZXIuc2tpcCh0YWcgJiA3KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG4gIGNyZWF0ZShiYXNlKSB7XG4gICAgcmV0dXJuIFRvb2xDYWxsQ2h1bmtFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUb29sQ2FsbENodW5rRXZlbnQoKTtcbiAgICBtZXNzYWdlLmJhc2VFdmVudCA9IG9iamVjdC5iYXNlRXZlbnQgIT09IHZvaWQgMCAmJiBvYmplY3QuYmFzZUV2ZW50ICE9PSBudWxsID8gQmFzZUV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5iYXNlRXZlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxJZCA9IChfYSA9IG9iamVjdC50b29sQ2FsbElkKSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbE5hbWUgPSAoX2IgPSBvYmplY3QudG9vbENhbGxOYW1lKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5wYXJlbnRNZXNzYWdlSWQgPSAoX2MgPSBvYmplY3QucGFyZW50TWVzc2FnZUlkKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5kZWx0YSA9IChfZCA9IG9iamVjdC5kZWx0YSkgIT0gbnVsbCA/IF9kIDogdm9pZCAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUV2ZW50KCkge1xuICByZXR1cm4ge1xuICAgIHRleHRNZXNzYWdlU3RhcnQ6IHZvaWQgMCxcbiAgICB0ZXh0TWVzc2FnZUNvbnRlbnQ6IHZvaWQgMCxcbiAgICB0ZXh0TWVzc2FnZUVuZDogdm9pZCAwLFxuICAgIHRvb2xDYWxsU3RhcnQ6IHZvaWQgMCxcbiAgICB0b29sQ2FsbEFyZ3M6IHZvaWQgMCxcbiAgICB0b29sQ2FsbEVuZDogdm9pZCAwLFxuICAgIHN0YXRlU25hcHNob3Q6IHZvaWQgMCxcbiAgICBzdGF0ZURlbHRhOiB2b2lkIDAsXG4gICAgbWVzc2FnZXNTbmFwc2hvdDogdm9pZCAwLFxuICAgIHJhdzogdm9pZCAwLFxuICAgIGN1c3RvbTogdm9pZCAwLFxuICAgIHJ1blN0YXJ0ZWQ6IHZvaWQgMCxcbiAgICBydW5GaW5pc2hlZDogdm9pZCAwLFxuICAgIHJ1bkVycm9yOiB2b2lkIDAsXG4gICAgc3RlcFN0YXJ0ZWQ6IHZvaWQgMCxcbiAgICBzdGVwRmluaXNoZWQ6IHZvaWQgMCxcbiAgICB0ZXh0TWVzc2FnZUNodW5rOiB2b2lkIDAsXG4gICAgdG9vbENhbGxDaHVuazogdm9pZCAwXG4gIH07XG59XG52YXIgRXZlbnQgPSB7XG4gIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBuZXcgQmluYXJ5V3JpdGVyNCgpKSB7XG4gICAgaWYgKG1lc3NhZ2UudGV4dE1lc3NhZ2VTdGFydCAhPT0gdm9pZCAwKSB7XG4gICAgICBUZXh0TWVzc2FnZVN0YXJ0RXZlbnQuZW5jb2RlKG1lc3NhZ2UudGV4dE1lc3NhZ2VTdGFydCwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRleHRNZXNzYWdlQ29udGVudCAhPT0gdm9pZCAwKSB7XG4gICAgICBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudC5lbmNvZGUobWVzc2FnZS50ZXh0TWVzc2FnZUNvbnRlbnQsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50ZXh0TWVzc2FnZUVuZCAhPT0gdm9pZCAwKSB7XG4gICAgICBUZXh0TWVzc2FnZUVuZEV2ZW50LmVuY29kZShtZXNzYWdlLnRleHRNZXNzYWdlRW5kLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UudG9vbENhbGxTdGFydCAhPT0gdm9pZCAwKSB7XG4gICAgICBUb29sQ2FsbFN0YXJ0RXZlbnQuZW5jb2RlKG1lc3NhZ2UudG9vbENhbGxTdGFydCwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsQXJncyAhPT0gdm9pZCAwKSB7XG4gICAgICBUb29sQ2FsbEFyZ3NFdmVudC5lbmNvZGUobWVzc2FnZS50b29sQ2FsbEFyZ3MsIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50b29sQ2FsbEVuZCAhPT0gdm9pZCAwKSB7XG4gICAgICBUb29sQ2FsbEVuZEV2ZW50LmVuY29kZShtZXNzYWdlLnRvb2xDYWxsRW5kLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uuc3RhdGVTbmFwc2hvdCAhPT0gdm9pZCAwKSB7XG4gICAgICBTdGF0ZVNuYXBzaG90RXZlbnQuZW5jb2RlKG1lc3NhZ2Uuc3RhdGVTbmFwc2hvdCwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0YXRlRGVsdGEgIT09IHZvaWQgMCkge1xuICAgICAgU3RhdGVEZWx0YUV2ZW50LmVuY29kZShtZXNzYWdlLnN0YXRlRGVsdGEsIHdyaXRlci51aW50MzIoNjYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5tZXNzYWdlc1NuYXBzaG90ICE9PSB2b2lkIDApIHtcbiAgICAgIE1lc3NhZ2VzU25hcHNob3RFdmVudC5lbmNvZGUobWVzc2FnZS5tZXNzYWdlc1NuYXBzaG90LCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucmF3ICE9PSB2b2lkIDApIHtcbiAgICAgIFJhd0V2ZW50LmVuY29kZShtZXNzYWdlLnJhdywgd3JpdGVyLnVpbnQzMig4MikuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmN1c3RvbSAhPT0gdm9pZCAwKSB7XG4gICAgICBDdXN0b21FdmVudC5lbmNvZGUobWVzc2FnZS5jdXN0b20sIHdyaXRlci51aW50MzIoOTApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ydW5TdGFydGVkICE9PSB2b2lkIDApIHtcbiAgICAgIFJ1blN0YXJ0ZWRFdmVudC5lbmNvZGUobWVzc2FnZS5ydW5TdGFydGVkLCB3cml0ZXIudWludDMyKDk4KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucnVuRmluaXNoZWQgIT09IHZvaWQgMCkge1xuICAgICAgUnVuRmluaXNoZWRFdmVudC5lbmNvZGUobWVzc2FnZS5ydW5GaW5pc2hlZCwgd3JpdGVyLnVpbnQzMigxMDYpLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5ydW5FcnJvciAhPT0gdm9pZCAwKSB7XG4gICAgICBSdW5FcnJvckV2ZW50LmVuY29kZShtZXNzYWdlLnJ1bkVycm9yLCB3cml0ZXIudWludDMyKDExNCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0ZXBTdGFydGVkICE9PSB2b2lkIDApIHtcbiAgICAgIFN0ZXBTdGFydGVkRXZlbnQuZW5jb2RlKG1lc3NhZ2Uuc3RlcFN0YXJ0ZWQsIHdyaXRlci51aW50MzIoMTIyKS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uuc3RlcEZpbmlzaGVkICE9PSB2b2lkIDApIHtcbiAgICAgIFN0ZXBGaW5pc2hlZEV2ZW50LmVuY29kZShtZXNzYWdlLnN0ZXBGaW5pc2hlZCwgd3JpdGVyLnVpbnQzMigxMzApLmZvcmsoKSkuam9pbigpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50ZXh0TWVzc2FnZUNodW5rICE9PSB2b2lkIDApIHtcbiAgICAgIFRleHRNZXNzYWdlQ2h1bmtFdmVudC5lbmNvZGUobWVzc2FnZS50ZXh0TWVzc2FnZUNodW5rLCB3cml0ZXIudWludDMyKDEzOCkuZm9yaygpKS5qb2luKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvb2xDYWxsQ2h1bmsgIT09IHZvaWQgMCkge1xuICAgICAgVG9vbENhbGxDaHVua0V2ZW50LmVuY29kZShtZXNzYWdlLnRvb2xDYWxsQ2h1bmssIHdyaXRlci51aW50MzIoMTQ2KS5mb3JrKCkpLmpvaW4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcbiAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlcjQgPyBpbnB1dCA6IG5ldyBCaW5hcnlSZWFkZXI0KGlucHV0KTtcbiAgICBjb25zdCBlbmQgPSBsZW5ndGggPT09IHZvaWQgMCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRXZlbnQoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRleHRNZXNzYWdlU3RhcnQgPSBUZXh0TWVzc2FnZVN0YXJ0RXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxOCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VDb250ZW50ID0gVGV4dE1lc3NhZ2VDb250ZW50RXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAyNikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VFbmQgPSBUZXh0TWVzc2FnZUVuZEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMzQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRvb2xDYWxsU3RhcnQgPSBUb29sQ2FsbFN0YXJ0RXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA0Mikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxBcmdzID0gVG9vbENhbGxBcmdzRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA1MCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UudG9vbENhbGxFbmQgPSBUb29sQ2FsbEVuZEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA3OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gNTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnN0YXRlU25hcHNob3QgPSBTdGF0ZVNuYXBzaG90RXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDg6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA2Nikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2Uuc3RhdGVEZWx0YSA9IFN0YXRlRGVsdGFFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgOToge1xuICAgICAgICAgIGlmICh0YWcgIT09IDc0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5tZXNzYWdlc1NuYXBzaG90ID0gTWVzc2FnZXNTbmFwc2hvdEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxMDoge1xuICAgICAgICAgIGlmICh0YWcgIT09IDgyKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5yYXcgPSBSYXdFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTE6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSA5MCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2UuY3VzdG9tID0gQ3VzdG9tRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDEyOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gOTgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnJ1blN0YXJ0ZWQgPSBSdW5TdGFydGVkRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDEzOiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTA2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5ydW5GaW5pc2hlZCA9IFJ1bkZpbmlzaGVkRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE0OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTE0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5ydW5FcnJvciA9IFJ1bkVycm9yRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE1OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTIyKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zdGVwU3RhcnRlZCA9IFN0ZXBTdGFydGVkRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE2OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTMwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS5zdGVwRmluaXNoZWQgPSBTdGVwRmluaXNoZWRFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTc6IHtcbiAgICAgICAgICBpZiAodGFnICE9PSAxMzgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlLnRleHRNZXNzYWdlQ2h1bmsgPSBUZXh0TWVzc2FnZUNodW5rRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE4OiB7XG4gICAgICAgICAgaWYgKHRhZyAhPT0gMTQ2KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZS50b29sQ2FsbENodW5rID0gVG9vbENhbGxDaHVua0V2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGFnICYgNykgPT09IDQgfHwgdGFnID09PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVhZGVyLnNraXAodGFnICYgNyk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuICBjcmVhdGUoYmFzZSkge1xuICAgIHJldHVybiBFdmVudC5mcm9tUGFydGlhbChiYXNlICE9IG51bGwgPyBiYXNlIDoge30pO1xuICB9LFxuICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUV2ZW50KCk7XG4gICAgbWVzc2FnZS50ZXh0TWVzc2FnZVN0YXJ0ID0gb2JqZWN0LnRleHRNZXNzYWdlU3RhcnQgIT09IHZvaWQgMCAmJiBvYmplY3QudGV4dE1lc3NhZ2VTdGFydCAhPT0gbnVsbCA/IFRleHRNZXNzYWdlU3RhcnRFdmVudC5mcm9tUGFydGlhbChvYmplY3QudGV4dE1lc3NhZ2VTdGFydCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50ZXh0TWVzc2FnZUNvbnRlbnQgPSBvYmplY3QudGV4dE1lc3NhZ2VDb250ZW50ICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRleHRNZXNzYWdlQ29udGVudCAhPT0gbnVsbCA/IFRleHRNZXNzYWdlQ29udGVudEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50ZXh0TWVzc2FnZUNvbnRlbnQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudGV4dE1lc3NhZ2VFbmQgPSBvYmplY3QudGV4dE1lc3NhZ2VFbmQgIT09IHZvaWQgMCAmJiBvYmplY3QudGV4dE1lc3NhZ2VFbmQgIT09IG51bGwgPyBUZXh0TWVzc2FnZUVuZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50ZXh0TWVzc2FnZUVuZCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbFN0YXJ0ID0gb2JqZWN0LnRvb2xDYWxsU3RhcnQgIT09IHZvaWQgMCAmJiBvYmplY3QudG9vbENhbGxTdGFydCAhPT0gbnVsbCA/IFRvb2xDYWxsU3RhcnRFdmVudC5mcm9tUGFydGlhbChvYmplY3QudG9vbENhbGxTdGFydCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbEFyZ3MgPSBvYmplY3QudG9vbENhbGxBcmdzICE9PSB2b2lkIDAgJiYgb2JqZWN0LnRvb2xDYWxsQXJncyAhPT0gbnVsbCA/IFRvb2xDYWxsQXJnc0V2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50b29sQ2FsbEFyZ3MpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UudG9vbENhbGxFbmQgPSBvYmplY3QudG9vbENhbGxFbmQgIT09IHZvaWQgMCAmJiBvYmplY3QudG9vbENhbGxFbmQgIT09IG51bGwgPyBUb29sQ2FsbEVuZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC50b29sQ2FsbEVuZCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGF0ZVNuYXBzaG90ID0gb2JqZWN0LnN0YXRlU25hcHNob3QgIT09IHZvaWQgMCAmJiBvYmplY3Quc3RhdGVTbmFwc2hvdCAhPT0gbnVsbCA/IFN0YXRlU25hcHNob3RFdmVudC5mcm9tUGFydGlhbChvYmplY3Quc3RhdGVTbmFwc2hvdCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGF0ZURlbHRhID0gb2JqZWN0LnN0YXRlRGVsdGEgIT09IHZvaWQgMCAmJiBvYmplY3Quc3RhdGVEZWx0YSAhPT0gbnVsbCA/IFN0YXRlRGVsdGFFdmVudC5mcm9tUGFydGlhbChvYmplY3Quc3RhdGVEZWx0YSkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5tZXNzYWdlc1NuYXBzaG90ID0gb2JqZWN0Lm1lc3NhZ2VzU25hcHNob3QgIT09IHZvaWQgMCAmJiBvYmplY3QubWVzc2FnZXNTbmFwc2hvdCAhPT0gbnVsbCA/IE1lc3NhZ2VzU25hcHNob3RFdmVudC5mcm9tUGFydGlhbChvYmplY3QubWVzc2FnZXNTbmFwc2hvdCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5yYXcgPSBvYmplY3QucmF3ICE9PSB2b2lkIDAgJiYgb2JqZWN0LnJhdyAhPT0gbnVsbCA/IFJhd0V2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5yYXcpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UuY3VzdG9tID0gb2JqZWN0LmN1c3RvbSAhPT0gdm9pZCAwICYmIG9iamVjdC5jdXN0b20gIT09IG51bGwgPyBDdXN0b21FdmVudC5mcm9tUGFydGlhbChvYmplY3QuY3VzdG9tKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnJ1blN0YXJ0ZWQgPSBvYmplY3QucnVuU3RhcnRlZCAhPT0gdm9pZCAwICYmIG9iamVjdC5ydW5TdGFydGVkICE9PSBudWxsID8gUnVuU3RhcnRlZEV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5ydW5TdGFydGVkKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnJ1bkZpbmlzaGVkID0gb2JqZWN0LnJ1bkZpbmlzaGVkICE9PSB2b2lkIDAgJiYgb2JqZWN0LnJ1bkZpbmlzaGVkICE9PSBudWxsID8gUnVuRmluaXNoZWRFdmVudC5mcm9tUGFydGlhbChvYmplY3QucnVuRmluaXNoZWQpIDogdm9pZCAwO1xuICAgIG1lc3NhZ2UucnVuRXJyb3IgPSBvYmplY3QucnVuRXJyb3IgIT09IHZvaWQgMCAmJiBvYmplY3QucnVuRXJyb3IgIT09IG51bGwgPyBSdW5FcnJvckV2ZW50LmZyb21QYXJ0aWFsKG9iamVjdC5ydW5FcnJvcikgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS5zdGVwU3RhcnRlZCA9IG9iamVjdC5zdGVwU3RhcnRlZCAhPT0gdm9pZCAwICYmIG9iamVjdC5zdGVwU3RhcnRlZCAhPT0gbnVsbCA/IFN0ZXBTdGFydGVkRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnN0ZXBTdGFydGVkKSA6IHZvaWQgMDtcbiAgICBtZXNzYWdlLnN0ZXBGaW5pc2hlZCA9IG9iamVjdC5zdGVwRmluaXNoZWQgIT09IHZvaWQgMCAmJiBvYmplY3Quc3RlcEZpbmlzaGVkICE9PSBudWxsID8gU3RlcEZpbmlzaGVkRXZlbnQuZnJvbVBhcnRpYWwob2JqZWN0LnN0ZXBGaW5pc2hlZCkgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50ZXh0TWVzc2FnZUNodW5rID0gb2JqZWN0LnRleHRNZXNzYWdlQ2h1bmsgIT09IHZvaWQgMCAmJiBvYmplY3QudGV4dE1lc3NhZ2VDaHVuayAhPT0gbnVsbCA/IFRleHRNZXNzYWdlQ2h1bmtFdmVudC5mcm9tUGFydGlhbChvYmplY3QudGV4dE1lc3NhZ2VDaHVuaykgOiB2b2lkIDA7XG4gICAgbWVzc2FnZS50b29sQ2FsbENodW5rID0gb2JqZWN0LnRvb2xDYWxsQ2h1bmsgIT09IHZvaWQgMCAmJiBvYmplY3QudG9vbENhbGxDaHVuayAhPT0gbnVsbCA/IFRvb2xDYWxsQ2h1bmtFdmVudC5mcm9tUGFydGlhbChvYmplY3QudG9vbENhbGxDaHVuaykgOiB2b2lkIDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbn07XG5mdW5jdGlvbiBsb25nVG9OdW1iZXIoaW50NjQpIHtcbiAgY29uc3QgbnVtID0gZ2xvYmFsVGhpcy5OdW1iZXIoaW50NjQudG9TdHJpbmcoKSk7XG4gIGlmIChudW0gPiBnbG9iYWxUaGlzLk51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSB7XG4gICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXCJWYWx1ZSBpcyBsYXJnZXIgdGhhbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlwiKTtcbiAgfVxuICBpZiAobnVtIDwgZ2xvYmFsVGhpcy5OdW1iZXIuTUlOX1NBRkVfSU5URUdFUikge1xuICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVmFsdWUgaXMgc21hbGxlciB0aGFuIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXCIpO1xuICB9XG4gIHJldHVybiBudW07XG59XG5cbi8vIHNyYy9wcm90by50c1xuZnVuY3Rpb24gdG9DYW1lbENhc2Uoc3RyKSB7XG4gIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fKFthLXpdKS9nLCAoXywgbGV0dGVyKSA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKSk7XG59XG5mdW5jdGlvbiBlbmNvZGUoZXZlbnQpIHtcbiAgY29uc3Qgb25lb2ZGaWVsZCA9IHRvQ2FtZWxDYXNlKGV2ZW50LnR5cGUpO1xuICBjb25zdCB7IHR5cGUsIHRpbWVzdGFtcCwgcmF3RXZlbnQsIC4uLnJlc3QgfSA9IGV2ZW50O1xuICBpZiAodHlwZSA9PT0gRXZlbnRUeXBlMi5NRVNTQUdFU19TTkFQU0hPVCkge1xuICAgIHJlc3QubWVzc2FnZXMgPSByZXN0Lm1lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4ge1xuICAgICAgY29uc3QgdW50eXBlZE1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgaWYgKHVudHlwZWRNZXNzYWdlLnRvb2xDYWxscyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1lc3NhZ2UsIHRvb2xDYWxsczogW10gfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0pO1xuICB9XG4gIGlmICh0eXBlID09PSBFdmVudFR5cGUyLlNUQVRFX0RFTFRBKSB7XG4gICAgcmVzdC5kZWx0YSA9IHJlc3QuZGVsdGEubWFwKChvcGVyYXRpb24pID0+ICh7XG4gICAgICAuLi5vcGVyYXRpb24sXG4gICAgICBvcDogSnNvblBhdGNoT3BlcmF0aW9uVHlwZVtvcGVyYXRpb24ub3AudG9VcHBlckNhc2UoKV1cbiAgICB9KSk7XG4gIH1cbiAgY29uc3QgZXZlbnRNZXNzYWdlID0ge1xuICAgIFtvbmVvZkZpZWxkXToge1xuICAgICAgYmFzZUV2ZW50OiB7XG4gICAgICAgIHR5cGU6IEV2ZW50VHlwZVtldmVudC50eXBlXSxcbiAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICByYXdFdmVudFxuICAgICAgfSxcbiAgICAgIC4uLnJlc3RcbiAgICB9XG4gIH07XG4gIHJldHVybiBFdmVudC5lbmNvZGUoZXZlbnRNZXNzYWdlKS5maW5pc2goKTtcbn1cbmZ1bmN0aW9uIGRlY29kZShkYXRhKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgZXZlbnQgPSBFdmVudC5kZWNvZGUoZGF0YSk7XG4gIGNvbnN0IGRlY29kZWQgPSBPYmplY3QudmFsdWVzKGV2ZW50KS5maW5kKCh2YWx1ZSkgPT4gdmFsdWUgIT09IHZvaWQgMCk7XG4gIGlmICghZGVjb2RlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZXZlbnRcIik7XG4gIH1cbiAgZGVjb2RlZC50eXBlID0gRXZlbnRUeXBlW2RlY29kZWQuYmFzZUV2ZW50LnR5cGVdO1xuICBkZWNvZGVkLnRpbWVzdGFtcCA9IGRlY29kZWQuYmFzZUV2ZW50LnRpbWVzdGFtcDtcbiAgZGVjb2RlZC5yYXdFdmVudCA9IGRlY29kZWQuYmFzZUV2ZW50LnJhd0V2ZW50O1xuICBpZiAoZGVjb2RlZC50eXBlID09PSBFdmVudFR5cGUyLk1FU1NBR0VTX1NOQVBTSE9UKSB7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGRlY29kZWQubWVzc2FnZXMpIHtcbiAgICAgIGNvbnN0IHVudHlwZWRNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgIGlmICgoKF9hID0gdW50eXBlZE1lc3NhZ2UudG9vbENhbGxzKSA9PSBudWxsID8gdm9pZCAwIDogX2EubGVuZ3RoKSA9PT0gMCkge1xuICAgICAgICB1bnR5cGVkTWVzc2FnZS50b29sQ2FsbHMgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChkZWNvZGVkLnR5cGUgPT09IEV2ZW50VHlwZTIuU1RBVEVfREVMVEEpIHtcbiAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiBkZWNvZGVkLmRlbHRhKSB7XG4gICAgICBvcGVyYXRpb24ub3AgPSBKc29uUGF0Y2hPcGVyYXRpb25UeXBlW29wZXJhdGlvbi5vcF0udG9Mb3dlckNhc2UoKTtcbiAgICAgIE9iamVjdC5rZXlzKG9wZXJhdGlvbikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChvcGVyYXRpb25ba2V5XSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZGVsZXRlIG9wZXJhdGlvbltrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgT2JqZWN0LmtleXMoZGVjb2RlZCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKGRlY29kZWRba2V5XSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWxldGUgZGVjb2RlZFtrZXldO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBFdmVudFNjaGVtYXMucGFyc2UoZGVjb2RlZCk7XG59XG5cbi8vIHNyYy9pbmRleC50c1xudmFyIEFHVUlfTUVESUFfVFlQRSA9IFwiYXBwbGljYXRpb24vdm5kLmFnLXVpLmV2ZW50K3Byb3RvXCI7XG5leHBvcnQge1xuICBBR1VJX01FRElBX1RZUEUsXG4gIGRlY29kZSxcbiAgZW5jb2RlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/react/node_modules/@ag-ui/proto/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/shared/dist/index.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@copilotkitnext/shared/dist/index.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_AGENT_ID: () => (/* binding */ DEFAULT_AGENT_ID),\n/* harmony export */   TranscriptionErrorCode: () => (/* binding */ TranscriptionErrorCode),\n/* harmony export */   TranscriptionErrors: () => (/* binding */ TranscriptionErrors),\n/* harmony export */   finalizeRunEvents: () => (/* binding */ finalizeRunEvents),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   partialJSONParse: () => (/* binding */ partialJSONParse),\n/* harmony export */   randomUUID: () => (/* binding */ randomUUID)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var partial_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! partial-json */ \"(ssr)/./node_modules/partial-json/dist/index.js\");\n/* harmony import */ var _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ag-ui/client */ \"(ssr)/./node_modules/@copilotkitnext/shared/node_modules/@ag-ui/core/dist/index.mjs\");\n// src/utils.ts\n\n\nfunction randomUUID() {\n  return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n}\nfunction partialJSONParse(json) {\n  try {\n    return partial_json__WEBPACK_IMPORTED_MODULE_0__.parse(json);\n  } catch (error) {\n    return {};\n  }\n}\n\n// src/logger.ts\nvar logger = console;\n\n// src/constants.ts\nvar DEFAULT_AGENT_ID = \"default\";\n\n// src/finalize-events.ts\n\nvar defaultStopMessage = \"Run stopped by user\";\nvar defaultAbruptEndMessage = \"Run ended without emitting a terminal event\";\nfunction finalizeRunEvents(events, options = {}) {\n  const { stopRequested = false, interruptionMessage } = options;\n  const resolvedStopMessage = interruptionMessage ?? defaultStopMessage;\n  const resolvedAbruptMessage = interruptionMessage && interruptionMessage !== defaultStopMessage ? interruptionMessage : defaultAbruptEndMessage;\n  const appended = [];\n  const openMessageIds = /* @__PURE__ */ new Set();\n  const openToolCalls = /* @__PURE__ */ new Map();\n  for (const event of events) {\n    switch (event.type) {\n      case _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TEXT_MESSAGE_START: {\n        const messageId = event.messageId;\n        if (typeof messageId === \"string\") {\n          openMessageIds.add(messageId);\n        }\n        break;\n      }\n      case _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TEXT_MESSAGE_END: {\n        const messageId = event.messageId;\n        if (typeof messageId === \"string\") {\n          openMessageIds.delete(messageId);\n        }\n        break;\n      }\n      case _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TOOL_CALL_START: {\n        const toolCallId = event.toolCallId;\n        if (typeof toolCallId === \"string\") {\n          openToolCalls.set(toolCallId, {\n            hasEnd: false,\n            hasResult: false\n          });\n        }\n        break;\n      }\n      case _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TOOL_CALL_END: {\n        const toolCallId = event.toolCallId;\n        const info = toolCallId ? openToolCalls.get(toolCallId) : void 0;\n        if (info) {\n          info.hasEnd = true;\n        }\n        break;\n      }\n      case _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TOOL_CALL_RESULT: {\n        const toolCallId = event.toolCallId;\n        const info = toolCallId ? openToolCalls.get(toolCallId) : void 0;\n        if (info) {\n          info.hasResult = true;\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  }\n  const hasRunFinished = events.some((event) => event.type === _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.RUN_FINISHED);\n  const hasRunError = events.some((event) => event.type === _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.RUN_ERROR);\n  const hasTerminalEvent = hasRunFinished || hasRunError;\n  const terminalEventMissing = !hasTerminalEvent;\n  for (const messageId of openMessageIds) {\n    const endEvent = {\n      type: _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TEXT_MESSAGE_END,\n      messageId\n    };\n    events.push(endEvent);\n    appended.push(endEvent);\n  }\n  for (const [toolCallId, info] of openToolCalls) {\n    if (!info.hasEnd) {\n      const endEvent = {\n        type: _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TOOL_CALL_END,\n        toolCallId\n      };\n      events.push(endEvent);\n      appended.push(endEvent);\n    }\n    if (terminalEventMissing && !info.hasResult) {\n      const resultEvent = {\n        type: _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.TOOL_CALL_RESULT,\n        toolCallId,\n        messageId: `${toolCallId ?? randomUUID()}-result`,\n        role: \"tool\",\n        content: JSON.stringify(\n          stopRequested ? {\n            status: \"stopped\",\n            reason: \"stop_requested\",\n            message: resolvedStopMessage\n          } : {\n            status: \"error\",\n            reason: \"missing_terminal_event\",\n            message: resolvedAbruptMessage\n          }\n        )\n      };\n      events.push(resultEvent);\n      appended.push(resultEvent);\n    }\n  }\n  if (terminalEventMissing) {\n    if (stopRequested) {\n      const finishedEvent = {\n        type: _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.RUN_FINISHED\n      };\n      events.push(finishedEvent);\n      appended.push(finishedEvent);\n    } else {\n      const errorEvent = {\n        type: _ag_ui_client__WEBPACK_IMPORTED_MODULE_2__.EventType.RUN_ERROR,\n        message: resolvedAbruptMessage,\n        code: \"INCOMPLETE_STREAM\"\n      };\n      events.push(errorEvent);\n      appended.push(errorEvent);\n    }\n  }\n  return appended;\n}\n\n// src/transcription-errors.ts\nvar TranscriptionErrorCode = /* @__PURE__ */ ((TranscriptionErrorCode2) => {\n  TranscriptionErrorCode2[\"SERVICE_NOT_CONFIGURED\"] = \"service_not_configured\";\n  TranscriptionErrorCode2[\"INVALID_AUDIO_FORMAT\"] = \"invalid_audio_format\";\n  TranscriptionErrorCode2[\"AUDIO_TOO_LONG\"] = \"audio_too_long\";\n  TranscriptionErrorCode2[\"AUDIO_TOO_SHORT\"] = \"audio_too_short\";\n  TranscriptionErrorCode2[\"RATE_LIMITED\"] = \"rate_limited\";\n  TranscriptionErrorCode2[\"AUTH_FAILED\"] = \"auth_failed\";\n  TranscriptionErrorCode2[\"PROVIDER_ERROR\"] = \"provider_error\";\n  TranscriptionErrorCode2[\"NETWORK_ERROR\"] = \"network_error\";\n  TranscriptionErrorCode2[\"INVALID_REQUEST\"] = \"invalid_request\";\n  return TranscriptionErrorCode2;\n})(TranscriptionErrorCode || {});\nvar TranscriptionErrors = {\n  serviceNotConfigured: () => ({\n    error: \"service_not_configured\" /* SERVICE_NOT_CONFIGURED */,\n    message: \"Transcription service is not configured\",\n    retryable: false\n  }),\n  invalidAudioFormat: (format, supported) => ({\n    error: \"invalid_audio_format\" /* INVALID_AUDIO_FORMAT */,\n    message: `Unsupported audio format: ${format}. Supported: ${supported.join(\", \")}`,\n    retryable: false\n  }),\n  invalidRequest: (details) => ({\n    error: \"invalid_request\" /* INVALID_REQUEST */,\n    message: details,\n    retryable: false\n  }),\n  rateLimited: () => ({\n    error: \"rate_limited\" /* RATE_LIMITED */,\n    message: \"Rate limited. Please try again later.\",\n    retryable: true\n  }),\n  authFailed: () => ({\n    error: \"auth_failed\" /* AUTH_FAILED */,\n    message: \"Authentication failed with transcription provider\",\n    retryable: false\n  }),\n  providerError: (message) => ({\n    error: \"provider_error\" /* PROVIDER_ERROR */,\n    message,\n    retryable: true\n  }),\n  networkError: (message = \"Network error during transcription\") => ({\n    error: \"network_error\" /* NETWORK_ERROR */,\n    message,\n    retryable: true\n  }),\n  audioTooLong: () => ({\n    error: \"audio_too_long\" /* AUDIO_TOO_LONG */,\n    message: \"Audio file is too long\",\n    retryable: false\n  }),\n  audioTooShort: () => ({\n    error: \"audio_too_short\" /* AUDIO_TOO_SHORT */,\n    message: \"Audio is too short to transcribe\",\n    retryable: false\n  })\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3NoYXJlZC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDb0M7QUFDUTtBQUM1QztBQUNBLFNBQVMsZ0RBQU07QUFDZjtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtDQUFpQjtBQUM1QixJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUd1QjtBQUN2QjtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DLFVBQVUsNkNBQTZDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvREFBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9EQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsb0RBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9EQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvREFBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELG9EQUFTO0FBQ3hFLDREQUE0RCxvREFBUztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0RBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0RBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9EQUFTO0FBQ3ZCO0FBQ0Esc0JBQXNCLDJCQUEyQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9EQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGNBQWMsb0RBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsOEJBQThCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBDQUEwQyxPQUFPLGVBQWUscUJBQXFCO0FBQ3JGO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBU0U7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvY2hhaXpoZW5odWEvQ29kZXMvdW5jYXJ2ZS9lMmUvZXhhbXBsZXMvdHJhdmVsLXVpL25vZGVfbW9kdWxlcy9AY29waWxvdGtpdG5leHQvc2hhcmVkL2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy50c1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCAqIGFzIFBhcnRpYWxKU09OIGZyb20gXCJwYXJ0aWFsLWpzb25cIjtcbmZ1bmN0aW9uIHJhbmRvbVVVSUQoKSB7XG4gIHJldHVybiB1dWlkdjQoKTtcbn1cbmZ1bmN0aW9uIHBhcnRpYWxKU09OUGFyc2UoanNvbikge1xuICB0cnkge1xuICAgIHJldHVybiBQYXJ0aWFsSlNPTi5wYXJzZShqc29uKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbn1cblxuLy8gc3JjL2xvZ2dlci50c1xudmFyIGxvZ2dlciA9IGNvbnNvbGU7XG5cbi8vIHNyYy9jb25zdGFudHMudHNcbnZhciBERUZBVUxUX0FHRU5UX0lEID0gXCJkZWZhdWx0XCI7XG5cbi8vIHNyYy9maW5hbGl6ZS1ldmVudHMudHNcbmltcG9ydCB7XG4gIEV2ZW50VHlwZVxufSBmcm9tIFwiQGFnLXVpL2NsaWVudFwiO1xudmFyIGRlZmF1bHRTdG9wTWVzc2FnZSA9IFwiUnVuIHN0b3BwZWQgYnkgdXNlclwiO1xudmFyIGRlZmF1bHRBYnJ1cHRFbmRNZXNzYWdlID0gXCJSdW4gZW5kZWQgd2l0aG91dCBlbWl0dGluZyBhIHRlcm1pbmFsIGV2ZW50XCI7XG5mdW5jdGlvbiBmaW5hbGl6ZVJ1bkV2ZW50cyhldmVudHMsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7IHN0b3BSZXF1ZXN0ZWQgPSBmYWxzZSwgaW50ZXJydXB0aW9uTWVzc2FnZSB9ID0gb3B0aW9ucztcbiAgY29uc3QgcmVzb2x2ZWRTdG9wTWVzc2FnZSA9IGludGVycnVwdGlvbk1lc3NhZ2UgPz8gZGVmYXVsdFN0b3BNZXNzYWdlO1xuICBjb25zdCByZXNvbHZlZEFicnVwdE1lc3NhZ2UgPSBpbnRlcnJ1cHRpb25NZXNzYWdlICYmIGludGVycnVwdGlvbk1lc3NhZ2UgIT09IGRlZmF1bHRTdG9wTWVzc2FnZSA/IGludGVycnVwdGlvbk1lc3NhZ2UgOiBkZWZhdWx0QWJydXB0RW5kTWVzc2FnZTtcbiAgY29uc3QgYXBwZW5kZWQgPSBbXTtcbiAgY29uc3Qgb3Blbk1lc3NhZ2VJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCBvcGVuVG9vbENhbGxzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZm9yIChjb25zdCBldmVudCBvZiBldmVudHMpIHtcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgRXZlbnRUeXBlLlRFWFRfTUVTU0FHRV9TVEFSVDoge1xuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSBldmVudC5tZXNzYWdlSWQ7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZUlkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgb3Blbk1lc3NhZ2VJZHMuYWRkKG1lc3NhZ2VJZCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIEV2ZW50VHlwZS5URVhUX01FU1NBR0VfRU5EOiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGV2ZW50Lm1lc3NhZ2VJZDtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlSWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBvcGVuTWVzc2FnZUlkcy5kZWxldGUobWVzc2FnZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgRXZlbnRUeXBlLlRPT0xfQ0FMTF9TVEFSVDoge1xuICAgICAgICBjb25zdCB0b29sQ2FsbElkID0gZXZlbnQudG9vbENhbGxJZDtcbiAgICAgICAgaWYgKHR5cGVvZiB0b29sQ2FsbElkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgb3BlblRvb2xDYWxscy5zZXQodG9vbENhbGxJZCwge1xuICAgICAgICAgICAgaGFzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgIGhhc1Jlc3VsdDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgRXZlbnRUeXBlLlRPT0xfQ0FMTF9FTkQ6IHtcbiAgICAgICAgY29uc3QgdG9vbENhbGxJZCA9IGV2ZW50LnRvb2xDYWxsSWQ7XG4gICAgICAgIGNvbnN0IGluZm8gPSB0b29sQ2FsbElkID8gb3BlblRvb2xDYWxscy5nZXQodG9vbENhbGxJZCkgOiB2b2lkIDA7XG4gICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgaW5mby5oYXNFbmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBFdmVudFR5cGUuVE9PTF9DQUxMX1JFU1VMVDoge1xuICAgICAgICBjb25zdCB0b29sQ2FsbElkID0gZXZlbnQudG9vbENhbGxJZDtcbiAgICAgICAgY29uc3QgaW5mbyA9IHRvb2xDYWxsSWQgPyBvcGVuVG9vbENhbGxzLmdldCh0b29sQ2FsbElkKSA6IHZvaWQgMDtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICBpbmZvLmhhc1Jlc3VsdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgY29uc3QgaGFzUnVuRmluaXNoZWQgPSBldmVudHMuc29tZSgoZXZlbnQpID0+IGV2ZW50LnR5cGUgPT09IEV2ZW50VHlwZS5SVU5fRklOSVNIRUQpO1xuICBjb25zdCBoYXNSdW5FcnJvciA9IGV2ZW50cy5zb21lKChldmVudCkgPT4gZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLlJVTl9FUlJPUik7XG4gIGNvbnN0IGhhc1Rlcm1pbmFsRXZlbnQgPSBoYXNSdW5GaW5pc2hlZCB8fCBoYXNSdW5FcnJvcjtcbiAgY29uc3QgdGVybWluYWxFdmVudE1pc3NpbmcgPSAhaGFzVGVybWluYWxFdmVudDtcbiAgZm9yIChjb25zdCBtZXNzYWdlSWQgb2Ygb3Blbk1lc3NhZ2VJZHMpIHtcbiAgICBjb25zdCBlbmRFdmVudCA9IHtcbiAgICAgIHR5cGU6IEV2ZW50VHlwZS5URVhUX01FU1NBR0VfRU5ELFxuICAgICAgbWVzc2FnZUlkXG4gICAgfTtcbiAgICBldmVudHMucHVzaChlbmRFdmVudCk7XG4gICAgYXBwZW5kZWQucHVzaChlbmRFdmVudCk7XG4gIH1cbiAgZm9yIChjb25zdCBbdG9vbENhbGxJZCwgaW5mb10gb2Ygb3BlblRvb2xDYWxscykge1xuICAgIGlmICghaW5mby5oYXNFbmQpIHtcbiAgICAgIGNvbnN0IGVuZEV2ZW50ID0ge1xuICAgICAgICB0eXBlOiBFdmVudFR5cGUuVE9PTF9DQUxMX0VORCxcbiAgICAgICAgdG9vbENhbGxJZFxuICAgICAgfTtcbiAgICAgIGV2ZW50cy5wdXNoKGVuZEV2ZW50KTtcbiAgICAgIGFwcGVuZGVkLnB1c2goZW5kRXZlbnQpO1xuICAgIH1cbiAgICBpZiAodGVybWluYWxFdmVudE1pc3NpbmcgJiYgIWluZm8uaGFzUmVzdWx0KSB7XG4gICAgICBjb25zdCByZXN1bHRFdmVudCA9IHtcbiAgICAgICAgdHlwZTogRXZlbnRUeXBlLlRPT0xfQ0FMTF9SRVNVTFQsXG4gICAgICAgIHRvb2xDYWxsSWQsXG4gICAgICAgIG1lc3NhZ2VJZDogYCR7dG9vbENhbGxJZCA/PyByYW5kb21VVUlEKCl9LXJlc3VsdGAsXG4gICAgICAgIHJvbGU6IFwidG9vbFwiLFxuICAgICAgICBjb250ZW50OiBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICBzdG9wUmVxdWVzdGVkID8ge1xuICAgICAgICAgICAgc3RhdHVzOiBcInN0b3BwZWRcIixcbiAgICAgICAgICAgIHJlYXNvbjogXCJzdG9wX3JlcXVlc3RlZFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogcmVzb2x2ZWRTdG9wTWVzc2FnZVxuICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHJlYXNvbjogXCJtaXNzaW5nX3Rlcm1pbmFsX2V2ZW50XCIsXG4gICAgICAgICAgICBtZXNzYWdlOiByZXNvbHZlZEFicnVwdE1lc3NhZ2VcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH07XG4gICAgICBldmVudHMucHVzaChyZXN1bHRFdmVudCk7XG4gICAgICBhcHBlbmRlZC5wdXNoKHJlc3VsdEV2ZW50KTtcbiAgICB9XG4gIH1cbiAgaWYgKHRlcm1pbmFsRXZlbnRNaXNzaW5nKSB7XG4gICAgaWYgKHN0b3BSZXF1ZXN0ZWQpIHtcbiAgICAgIGNvbnN0IGZpbmlzaGVkRXZlbnQgPSB7XG4gICAgICAgIHR5cGU6IEV2ZW50VHlwZS5SVU5fRklOSVNIRURcbiAgICAgIH07XG4gICAgICBldmVudHMucHVzaChmaW5pc2hlZEV2ZW50KTtcbiAgICAgIGFwcGVuZGVkLnB1c2goZmluaXNoZWRFdmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVycm9yRXZlbnQgPSB7XG4gICAgICAgIHR5cGU6IEV2ZW50VHlwZS5SVU5fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IHJlc29sdmVkQWJydXB0TWVzc2FnZSxcbiAgICAgICAgY29kZTogXCJJTkNPTVBMRVRFX1NUUkVBTVwiXG4gICAgICB9O1xuICAgICAgZXZlbnRzLnB1c2goZXJyb3JFdmVudCk7XG4gICAgICBhcHBlbmRlZC5wdXNoKGVycm9yRXZlbnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXBwZW5kZWQ7XG59XG5cbi8vIHNyYy90cmFuc2NyaXB0aW9uLWVycm9ycy50c1xudmFyIFRyYW5zY3JpcHRpb25FcnJvckNvZGUgPSAvKiBAX19QVVJFX18gKi8gKChUcmFuc2NyaXB0aW9uRXJyb3JDb2RlMikgPT4ge1xuICBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlMltcIlNFUlZJQ0VfTk9UX0NPTkZJR1VSRURcIl0gPSBcInNlcnZpY2Vfbm90X2NvbmZpZ3VyZWRcIjtcbiAgVHJhbnNjcmlwdGlvbkVycm9yQ29kZTJbXCJJTlZBTElEX0FVRElPX0ZPUk1BVFwiXSA9IFwiaW52YWxpZF9hdWRpb19mb3JtYXRcIjtcbiAgVHJhbnNjcmlwdGlvbkVycm9yQ29kZTJbXCJBVURJT19UT09fTE9OR1wiXSA9IFwiYXVkaW9fdG9vX2xvbmdcIjtcbiAgVHJhbnNjcmlwdGlvbkVycm9yQ29kZTJbXCJBVURJT19UT09fU0hPUlRcIl0gPSBcImF1ZGlvX3Rvb19zaG9ydFwiO1xuICBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlMltcIlJBVEVfTElNSVRFRFwiXSA9IFwicmF0ZV9saW1pdGVkXCI7XG4gIFRyYW5zY3JpcHRpb25FcnJvckNvZGUyW1wiQVVUSF9GQUlMRURcIl0gPSBcImF1dGhfZmFpbGVkXCI7XG4gIFRyYW5zY3JpcHRpb25FcnJvckNvZGUyW1wiUFJPVklERVJfRVJST1JcIl0gPSBcInByb3ZpZGVyX2Vycm9yXCI7XG4gIFRyYW5zY3JpcHRpb25FcnJvckNvZGUyW1wiTkVUV09SS19FUlJPUlwiXSA9IFwibmV0d29ya19lcnJvclwiO1xuICBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlMltcIklOVkFMSURfUkVRVUVTVFwiXSA9IFwiaW52YWxpZF9yZXF1ZXN0XCI7XG4gIHJldHVybiBUcmFuc2NyaXB0aW9uRXJyb3JDb2RlMjtcbn0pKFRyYW5zY3JpcHRpb25FcnJvckNvZGUgfHwge30pO1xudmFyIFRyYW5zY3JpcHRpb25FcnJvcnMgPSB7XG4gIHNlcnZpY2VOb3RDb25maWd1cmVkOiAoKSA9PiAoe1xuICAgIGVycm9yOiBcInNlcnZpY2Vfbm90X2NvbmZpZ3VyZWRcIiAvKiBTRVJWSUNFX05PVF9DT05GSUdVUkVEICovLFxuICAgIG1lc3NhZ2U6IFwiVHJhbnNjcmlwdGlvbiBzZXJ2aWNlIGlzIG5vdCBjb25maWd1cmVkXCIsXG4gICAgcmV0cnlhYmxlOiBmYWxzZVxuICB9KSxcbiAgaW52YWxpZEF1ZGlvRm9ybWF0OiAoZm9ybWF0LCBzdXBwb3J0ZWQpID0+ICh7XG4gICAgZXJyb3I6IFwiaW52YWxpZF9hdWRpb19mb3JtYXRcIiAvKiBJTlZBTElEX0FVRElPX0ZPUk1BVCAqLyxcbiAgICBtZXNzYWdlOiBgVW5zdXBwb3J0ZWQgYXVkaW8gZm9ybWF0OiAke2Zvcm1hdH0uIFN1cHBvcnRlZDogJHtzdXBwb3J0ZWQuam9pbihcIiwgXCIpfWAsXG4gICAgcmV0cnlhYmxlOiBmYWxzZVxuICB9KSxcbiAgaW52YWxpZFJlcXVlc3Q6IChkZXRhaWxzKSA9PiAoe1xuICAgIGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiIC8qIElOVkFMSURfUkVRVUVTVCAqLyxcbiAgICBtZXNzYWdlOiBkZXRhaWxzLFxuICAgIHJldHJ5YWJsZTogZmFsc2VcbiAgfSksXG4gIHJhdGVMaW1pdGVkOiAoKSA9PiAoe1xuICAgIGVycm9yOiBcInJhdGVfbGltaXRlZFwiIC8qIFJBVEVfTElNSVRFRCAqLyxcbiAgICBtZXNzYWdlOiBcIlJhdGUgbGltaXRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIixcbiAgICByZXRyeWFibGU6IHRydWVcbiAgfSksXG4gIGF1dGhGYWlsZWQ6ICgpID0+ICh7XG4gICAgZXJyb3I6IFwiYXV0aF9mYWlsZWRcIiAvKiBBVVRIX0ZBSUxFRCAqLyxcbiAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZCB3aXRoIHRyYW5zY3JpcHRpb24gcHJvdmlkZXJcIixcbiAgICByZXRyeWFibGU6IGZhbHNlXG4gIH0pLFxuICBwcm92aWRlckVycm9yOiAobWVzc2FnZSkgPT4gKHtcbiAgICBlcnJvcjogXCJwcm92aWRlcl9lcnJvclwiIC8qIFBST1ZJREVSX0VSUk9SICovLFxuICAgIG1lc3NhZ2UsXG4gICAgcmV0cnlhYmxlOiB0cnVlXG4gIH0pLFxuICBuZXR3b3JrRXJyb3I6IChtZXNzYWdlID0gXCJOZXR3b3JrIGVycm9yIGR1cmluZyB0cmFuc2NyaXB0aW9uXCIpID0+ICh7XG4gICAgZXJyb3I6IFwibmV0d29ya19lcnJvclwiIC8qIE5FVFdPUktfRVJST1IgKi8sXG4gICAgbWVzc2FnZSxcbiAgICByZXRyeWFibGU6IHRydWVcbiAgfSksXG4gIGF1ZGlvVG9vTG9uZzogKCkgPT4gKHtcbiAgICBlcnJvcjogXCJhdWRpb190b29fbG9uZ1wiIC8qIEFVRElPX1RPT19MT05HICovLFxuICAgIG1lc3NhZ2U6IFwiQXVkaW8gZmlsZSBpcyB0b28gbG9uZ1wiLFxuICAgIHJldHJ5YWJsZTogZmFsc2VcbiAgfSksXG4gIGF1ZGlvVG9vU2hvcnQ6ICgpID0+ICh7XG4gICAgZXJyb3I6IFwiYXVkaW9fdG9vX3Nob3J0XCIgLyogQVVESU9fVE9PX1NIT1JUICovLFxuICAgIG1lc3NhZ2U6IFwiQXVkaW8gaXMgdG9vIHNob3J0IHRvIHRyYW5zY3JpYmVcIixcbiAgICByZXRyeWFibGU6IGZhbHNlXG4gIH0pXG59O1xuZXhwb3J0IHtcbiAgREVGQVVMVF9BR0VOVF9JRCxcbiAgVHJhbnNjcmlwdGlvbkVycm9yQ29kZSxcbiAgVHJhbnNjcmlwdGlvbkVycm9ycyxcbiAgZmluYWxpemVSdW5FdmVudHMsXG4gIGxvZ2dlcixcbiAgcGFydGlhbEpTT05QYXJzZSxcbiAgcmFuZG9tVVVJRFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/shared/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/shared/node_modules/@ag-ui/core/dist/index.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@copilotkitnext/shared/node_modules/@ag-ui/core/dist/index.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AGUIConnectNotImplementedError: () => (/* binding */ AGUIConnectNotImplementedError),\n/* harmony export */   AGUIError: () => (/* binding */ AGUIError),\n/* harmony export */   ActivityDeltaEventSchema: () => (/* binding */ ActivityDeltaEventSchema),\n/* harmony export */   ActivityMessageSchema: () => (/* binding */ ActivityMessageSchema),\n/* harmony export */   ActivitySnapshotEventSchema: () => (/* binding */ ActivitySnapshotEventSchema),\n/* harmony export */   AssistantMessageSchema: () => (/* binding */ AssistantMessageSchema),\n/* harmony export */   BaseEventSchema: () => (/* binding */ BaseEventSchema),\n/* harmony export */   BaseMessageSchema: () => (/* binding */ BaseMessageSchema),\n/* harmony export */   BinaryInputContentSchema: () => (/* binding */ BinaryInputContentSchema),\n/* harmony export */   ContextSchema: () => (/* binding */ ContextSchema),\n/* harmony export */   CustomEventSchema: () => (/* binding */ CustomEventSchema),\n/* harmony export */   DeveloperMessageSchema: () => (/* binding */ DeveloperMessageSchema),\n/* harmony export */   EventSchemas: () => (/* binding */ EventSchemas),\n/* harmony export */   EventType: () => (/* binding */ EventType),\n/* harmony export */   FunctionCallSchema: () => (/* binding */ FunctionCallSchema),\n/* harmony export */   InputContentSchema: () => (/* binding */ InputContentSchema),\n/* harmony export */   MessageSchema: () => (/* binding */ MessageSchema),\n/* harmony export */   MessagesSnapshotEventSchema: () => (/* binding */ MessagesSnapshotEventSchema),\n/* harmony export */   RawEventSchema: () => (/* binding */ RawEventSchema),\n/* harmony export */   RoleSchema: () => (/* binding */ RoleSchema),\n/* harmony export */   RunAgentInputSchema: () => (/* binding */ RunAgentInputSchema),\n/* harmony export */   RunErrorEventSchema: () => (/* binding */ RunErrorEventSchema),\n/* harmony export */   RunFinishedEventSchema: () => (/* binding */ RunFinishedEventSchema),\n/* harmony export */   RunStartedEventSchema: () => (/* binding */ RunStartedEventSchema),\n/* harmony export */   StateDeltaEventSchema: () => (/* binding */ StateDeltaEventSchema),\n/* harmony export */   StateSchema: () => (/* binding */ StateSchema),\n/* harmony export */   StateSnapshotEventSchema: () => (/* binding */ StateSnapshotEventSchema),\n/* harmony export */   StepFinishedEventSchema: () => (/* binding */ StepFinishedEventSchema),\n/* harmony export */   StepStartedEventSchema: () => (/* binding */ StepStartedEventSchema),\n/* harmony export */   SystemMessageSchema: () => (/* binding */ SystemMessageSchema),\n/* harmony export */   TextInputContentSchema: () => (/* binding */ TextInputContentSchema),\n/* harmony export */   TextMessageChunkEventSchema: () => (/* binding */ TextMessageChunkEventSchema),\n/* harmony export */   TextMessageContentEventSchema: () => (/* binding */ TextMessageContentEventSchema),\n/* harmony export */   TextMessageEndEventSchema: () => (/* binding */ TextMessageEndEventSchema),\n/* harmony export */   TextMessageStartEventSchema: () => (/* binding */ TextMessageStartEventSchema),\n/* harmony export */   ThinkingEndEventSchema: () => (/* binding */ ThinkingEndEventSchema),\n/* harmony export */   ThinkingStartEventSchema: () => (/* binding */ ThinkingStartEventSchema),\n/* harmony export */   ThinkingTextMessageContentEventSchema: () => (/* binding */ ThinkingTextMessageContentEventSchema),\n/* harmony export */   ThinkingTextMessageEndEventSchema: () => (/* binding */ ThinkingTextMessageEndEventSchema),\n/* harmony export */   ThinkingTextMessageStartEventSchema: () => (/* binding */ ThinkingTextMessageStartEventSchema),\n/* harmony export */   ToolCallArgsEventSchema: () => (/* binding */ ToolCallArgsEventSchema),\n/* harmony export */   ToolCallChunkEventSchema: () => (/* binding */ ToolCallChunkEventSchema),\n/* harmony export */   ToolCallEndEventSchema: () => (/* binding */ ToolCallEndEventSchema),\n/* harmony export */   ToolCallResultEventSchema: () => (/* binding */ ToolCallResultEventSchema),\n/* harmony export */   ToolCallSchema: () => (/* binding */ ToolCallSchema),\n/* harmony export */   ToolCallStartEventSchema: () => (/* binding */ ToolCallStartEventSchema),\n/* harmony export */   ToolMessageSchema: () => (/* binding */ ToolMessageSchema),\n/* harmony export */   ToolSchema: () => (/* binding */ ToolSchema),\n/* harmony export */   UserMessageSchema: () => (/* binding */ UserMessageSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/v3/ZodError.js\");\n// src/types.ts\n\nvar FunctionCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  arguments: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\"),\n  function: FunctionCallSchema\n});\nvar BaseMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar TextInputContentSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"text\"),\n  text: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar BinaryInputContentObjectSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"binary\"),\n  mimeType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  url: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  data: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  filename: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ensureBinaryPayload = (value, ctx) => {\n  if (!value.id && !value.url && !value.data) {\n    ctx.addIssue({\n      code: zod__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.custom,\n      message: \"BinaryInputContent requires at least one of id, url, or data.\",\n      path: [\"id\"]\n    });\n  }\n};\nvar BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {\n  ensureBinaryPayload(value, ctx);\n});\nvar InputContentBaseSchema = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  TextInputContentSchema,\n  BinaryInputContentObjectSchema\n]);\nvar InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {\n  if (value.type === \"binary\") {\n    ensureBinaryPayload(value, ctx);\n  }\n});\nvar DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar SystemMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar AssistantMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  toolCalls: zod__WEBPACK_IMPORTED_MODULE_0__.array(ToolCallSchema).optional()\n});\nvar UserMessageSchema = BaseMessageSchema.extend({\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\"),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.union([zod__WEBPACK_IMPORTED_MODULE_0__.string(), zod__WEBPACK_IMPORTED_MODULE_0__.array(InputContentSchema)])\n});\nvar ToolMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\"),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  error: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ActivityMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"activity\"),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n});\nvar MessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema,\n  ActivityMessageSchema\n]);\nvar RoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"activity\")\n]);\nvar ContextSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  description: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parameters: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n  // JSON Schema for the tool parameters\n});\nvar RunAgentInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentRunId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  state: zod__WEBPACK_IMPORTED_MODULE_0__.any(),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.array(MessageSchema),\n  tools: zod__WEBPACK_IMPORTED_MODULE_0__.array(ToolSchema),\n  context: zod__WEBPACK_IMPORTED_MODULE_0__.array(ContextSchema),\n  forwardedProps: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n});\nvar StateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.any();\nvar AGUIError = class extends Error {\n  constructor(message) {\n    super(message);\n  }\n};\nvar AGUIConnectNotImplementedError = class extends AGUIError {\n  constructor() {\n    super(\"Connect not implemented. This method is not supported by the current agent.\");\n  }\n};\n\n// src/events.ts\n\nvar TextMessageRoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"developer\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"system\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n  zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"user\")\n]);\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[\"TEXT_MESSAGE_START\"] = \"TEXT_MESSAGE_START\";\n  EventType2[\"TEXT_MESSAGE_CONTENT\"] = \"TEXT_MESSAGE_CONTENT\";\n  EventType2[\"TEXT_MESSAGE_END\"] = \"TEXT_MESSAGE_END\";\n  EventType2[\"TEXT_MESSAGE_CHUNK\"] = \"TEXT_MESSAGE_CHUNK\";\n  EventType2[\"THINKING_TEXT_MESSAGE_START\"] = \"THINKING_TEXT_MESSAGE_START\";\n  EventType2[\"THINKING_TEXT_MESSAGE_CONTENT\"] = \"THINKING_TEXT_MESSAGE_CONTENT\";\n  EventType2[\"THINKING_TEXT_MESSAGE_END\"] = \"THINKING_TEXT_MESSAGE_END\";\n  EventType2[\"TOOL_CALL_START\"] = \"TOOL_CALL_START\";\n  EventType2[\"TOOL_CALL_ARGS\"] = \"TOOL_CALL_ARGS\";\n  EventType2[\"TOOL_CALL_END\"] = \"TOOL_CALL_END\";\n  EventType2[\"TOOL_CALL_CHUNK\"] = \"TOOL_CALL_CHUNK\";\n  EventType2[\"TOOL_CALL_RESULT\"] = \"TOOL_CALL_RESULT\";\n  EventType2[\"THINKING_START\"] = \"THINKING_START\";\n  EventType2[\"THINKING_END\"] = \"THINKING_END\";\n  EventType2[\"STATE_SNAPSHOT\"] = \"STATE_SNAPSHOT\";\n  EventType2[\"STATE_DELTA\"] = \"STATE_DELTA\";\n  EventType2[\"MESSAGES_SNAPSHOT\"] = \"MESSAGES_SNAPSHOT\";\n  EventType2[\"ACTIVITY_SNAPSHOT\"] = \"ACTIVITY_SNAPSHOT\";\n  EventType2[\"ACTIVITY_DELTA\"] = \"ACTIVITY_DELTA\";\n  EventType2[\"RAW\"] = \"RAW\";\n  EventType2[\"CUSTOM\"] = \"CUSTOM\";\n  EventType2[\"RUN_STARTED\"] = \"RUN_STARTED\";\n  EventType2[\"RUN_FINISHED\"] = \"RUN_FINISHED\";\n  EventType2[\"RUN_ERROR\"] = \"RUN_ERROR\";\n  EventType2[\"STEP_STARTED\"] = \"STEP_STARTED\";\n  EventType2[\"STEP_FINISHED\"] = \"STEP_FINISHED\";\n  return EventType2;\n})(EventType || {});\nvar BaseEventSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.nativeEnum(EventType),\n  timestamp: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  rawEvent: zod__WEBPACK_IMPORTED_MODULE_0__.any().optional()\n});\nvar TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_START\" /* TEXT_MESSAGE_START */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: TextMessageRoleSchema.default(\"assistant\")\n});\nvar TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_CONTENT\" /* TEXT_MESSAGE_CONTENT */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().refine((s) => s.length > 0, \"Delta must not be an empty string\")\n});\nvar TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_END\" /* TEXT_MESSAGE_END */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar TextMessageChunkEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TEXT_MESSAGE_CHUNK\" /* TEXT_MESSAGE_CHUNK */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  role: TextMessageRoleSchema.optional(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_START\" /* THINKING_TEXT_MESSAGE_START */)\n});\nvar ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({\n  messageId: true,\n  type: true\n}).extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_CONTENT\" /* THINKING_TEXT_MESSAGE_CONTENT */)\n});\nvar ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_TEXT_MESSAGE_END\" /* THINKING_TEXT_MESSAGE_END */)\n});\nvar ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_START\" /* TOOL_CALL_START */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  toolCallName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentMessageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_ARGS\" /* TOOL_CALL_ARGS */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_END\" /* TOOL_CALL_END */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar ToolCallResultEventSchema = BaseEventSchema.extend({\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_RESULT\" /* TOOL_CALL_RESULT */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  role: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool\").optional()\n});\nvar ToolCallChunkEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"TOOL_CALL_CHUNK\" /* TOOL_CALL_CHUNK */),\n  toolCallId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  toolCallName: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  parentMessageId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingStartEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_START\" /* THINKING_START */),\n  title: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar ThinkingEndEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"THINKING_END\" /* THINKING_END */)\n});\nvar StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STATE_SNAPSHOT\" /* STATE_SNAPSHOT */),\n  snapshot: StateSchema\n});\nvar StateDeltaEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STATE_DELTA\" /* STATE_DELTA */),\n  delta: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n  // JSON Patch (RFC 6902)\n});\nvar MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"MESSAGES_SNAPSHOT\" /* MESSAGES_SNAPSHOT */),\n  messages: zod__WEBPACK_IMPORTED_MODULE_0__.array(MessageSchema)\n});\nvar ActivitySnapshotEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"ACTIVITY_SNAPSHOT\" /* ACTIVITY_SNAPSHOT */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  content: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any()),\n  replace: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(true)\n});\nvar ActivityDeltaEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"ACTIVITY_DELTA\" /* ACTIVITY_DELTA */),\n  messageId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  activityType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  patch: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any())\n});\nvar RawEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RAW\" /* RAW */),\n  event: zod__WEBPACK_IMPORTED_MODULE_0__.any(),\n  source: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar CustomEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"CUSTOM\" /* CUSTOM */),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.any()\n});\nvar RunStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_STARTED\" /* RUN_STARTED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  parentRunId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  input: RunAgentInputSchema.optional()\n});\nvar RunFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_FINISHED\" /* RUN_FINISHED */),\n  threadId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  runId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  result: zod__WEBPACK_IMPORTED_MODULE_0__.any().optional()\n});\nvar RunErrorEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"RUN_ERROR\" /* RUN_ERROR */),\n  message: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  code: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar StepStartedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STEP_STARTED\" /* STEP_STARTED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar StepFinishedEventSchema = BaseEventSchema.extend({\n  type: zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"STEP_FINISHED\" /* STEP_FINISHED */),\n  stepName: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar EventSchemas = zod__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageChunkEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallResultEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  ActivitySnapshotEventSchema,\n  ActivityDeltaEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema\n]);\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3NoYXJlZC9ub2RlX21vZHVsZXMvQGFnLXVpL2NvcmUvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDd0I7QUFDeEIseUJBQXlCLHVDQUFRO0FBQ2pDLFFBQVEsdUNBQVE7QUFDaEIsYUFBYSx1Q0FBUTtBQUNyQixDQUFDO0FBQ0QscUJBQXFCLHVDQUFRO0FBQzdCLE1BQU0sdUNBQVE7QUFDZCxRQUFRLHdDQUFTO0FBQ2pCO0FBQ0EsQ0FBQztBQUNELHdCQUF3Qix1Q0FBUTtBQUNoQyxNQUFNLHVDQUFRO0FBQ2QsUUFBUSx1Q0FBUTtBQUNoQixXQUFXLHVDQUFRO0FBQ25CLFFBQVEsdUNBQVE7QUFDaEIsQ0FBQztBQUNELDZCQUE2Qix1Q0FBUTtBQUNyQyxRQUFRLHdDQUFTO0FBQ2pCLFFBQVEsdUNBQVE7QUFDaEIsQ0FBQztBQUNELHFDQUFxQyx1Q0FBUTtBQUM3QyxRQUFRLHdDQUFTO0FBQ2pCLFlBQVksdUNBQVE7QUFDcEIsTUFBTSx1Q0FBUTtBQUNkLE9BQU8sdUNBQVE7QUFDZixRQUFRLHVDQUFRO0FBQ2hCLFlBQVksdUNBQVE7QUFDcEIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkNBQWM7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsbURBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBUztBQUNqQixXQUFXLHVDQUFRO0FBQ25CLENBQUM7QUFDRDtBQUNBLFFBQVEsd0NBQVM7QUFDakIsV0FBVyx1Q0FBUTtBQUNuQixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFTO0FBQ2pCLFdBQVcsdUNBQVE7QUFDbkIsYUFBYSxzQ0FB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QixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLFdBQVcsdUNBQVM7QUFDcEIsUUFBUSx1Q0FBUztBQUNqQixDQUFDO0FBQ0Q7QUFDQSxRQUFRLHdDQUFVO0FBQ2xCLFlBQVksdUNBQVM7QUFDckIsQ0FBQztBQUNEO0FBQ0EsUUFBUSx3Q0FBVTtBQUNsQixZQUFZLHVDQUFTO0FBQ3JCLENBQUM7QUFDRCxtQkFBbUIsbURBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW1ERTtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9jaGFpemhlbmh1YS9Db2Rlcy91bmNhcnZlL2UyZS9leGFtcGxlcy90cmF2ZWwtdWkvbm9kZV9tb2R1bGVzL0Bjb3BpbG90a2l0bmV4dC9zaGFyZWQvbm9kZV9tb2R1bGVzL0BhZy11aS9jb3JlL2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy90eXBlcy50c1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbnZhciBGdW5jdGlvbkNhbGxTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKCksXG4gIGFyZ3VtZW50czogei5zdHJpbmcoKVxufSk7XG52YXIgVG9vbENhbGxTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLFxuICB0eXBlOiB6LmxpdGVyYWwoXCJmdW5jdGlvblwiKSxcbiAgZnVuY3Rpb246IEZ1bmN0aW9uQ2FsbFNjaGVtYVxufSk7XG52YXIgQmFzZU1lc3NhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLFxuICByb2xlOiB6LnN0cmluZygpLFxuICBjb250ZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIG5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgVGV4dElucHV0Q29udGVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdHlwZTogei5saXRlcmFsKFwidGV4dFwiKSxcbiAgdGV4dDogei5zdHJpbmcoKVxufSk7XG52YXIgQmluYXJ5SW5wdXRDb250ZW50T2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICB0eXBlOiB6LmxpdGVyYWwoXCJiaW5hcnlcIiksXG4gIG1pbWVUeXBlOiB6LnN0cmluZygpLFxuICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB1cmw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZGF0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBlbnN1cmVCaW5hcnlQYXlsb2FkID0gKHZhbHVlLCBjdHgpID0+IHtcbiAgaWYgKCF2YWx1ZS5pZCAmJiAhdmFsdWUudXJsICYmICF2YWx1ZS5kYXRhKSB7XG4gICAgY3R4LmFkZElzc3VlKHtcbiAgICAgIGNvZGU6IHouWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgIG1lc3NhZ2U6IFwiQmluYXJ5SW5wdXRDb250ZW50IHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBvZiBpZCwgdXJsLCBvciBkYXRhLlwiLFxuICAgICAgcGF0aDogW1wiaWRcIl1cbiAgICB9KTtcbiAgfVxufTtcbnZhciBCaW5hcnlJbnB1dENvbnRlbnRTY2hlbWEgPSBCaW5hcnlJbnB1dENvbnRlbnRPYmplY3RTY2hlbWEuc3VwZXJSZWZpbmUoKHZhbHVlLCBjdHgpID0+IHtcbiAgZW5zdXJlQmluYXJ5UGF5bG9hZCh2YWx1ZSwgY3R4KTtcbn0pO1xudmFyIElucHV0Q29udGVudEJhc2VTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICBUZXh0SW5wdXRDb250ZW50U2NoZW1hLFxuICBCaW5hcnlJbnB1dENvbnRlbnRPYmplY3RTY2hlbWFcbl0pO1xudmFyIElucHV0Q29udGVudFNjaGVtYSA9IElucHV0Q29udGVudEJhc2VTY2hlbWEuc3VwZXJSZWZpbmUoKHZhbHVlLCBjdHgpID0+IHtcbiAgaWYgKHZhbHVlLnR5cGUgPT09IFwiYmluYXJ5XCIpIHtcbiAgICBlbnN1cmVCaW5hcnlQYXlsb2FkKHZhbHVlLCBjdHgpO1xuICB9XG59KTtcbnZhciBEZXZlbG9wZXJNZXNzYWdlU2NoZW1hID0gQmFzZU1lc3NhZ2VTY2hlbWEuZXh0ZW5kKHtcbiAgcm9sZTogei5saXRlcmFsKFwiZGV2ZWxvcGVyXCIpLFxuICBjb250ZW50OiB6LnN0cmluZygpXG59KTtcbnZhciBTeXN0ZW1NZXNzYWdlU2NoZW1hID0gQmFzZU1lc3NhZ2VTY2hlbWEuZXh0ZW5kKHtcbiAgcm9sZTogei5saXRlcmFsKFwic3lzdGVtXCIpLFxuICBjb250ZW50OiB6LnN0cmluZygpXG59KTtcbnZhciBBc3Npc3RhbnRNZXNzYWdlU2NoZW1hID0gQmFzZU1lc3NhZ2VTY2hlbWEuZXh0ZW5kKHtcbiAgcm9sZTogei5saXRlcmFsKFwiYXNzaXN0YW50XCIpLFxuICBjb250ZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHRvb2xDYWxsczogei5hcnJheShUb29sQ2FsbFNjaGVtYSkub3B0aW9uYWwoKVxufSk7XG52YXIgVXNlck1lc3NhZ2VTY2hlbWEgPSBCYXNlTWVzc2FnZVNjaGVtYS5leHRlbmQoe1xuICByb2xlOiB6LmxpdGVyYWwoXCJ1c2VyXCIpLFxuICBjb250ZW50OiB6LnVuaW9uKFt6LnN0cmluZygpLCB6LmFycmF5KElucHV0Q29udGVudFNjaGVtYSldKVxufSk7XG52YXIgVG9vbE1lc3NhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLFxuICBjb250ZW50OiB6LnN0cmluZygpLFxuICByb2xlOiB6LmxpdGVyYWwoXCJ0b29sXCIpLFxuICB0b29sQ2FsbElkOiB6LnN0cmluZygpLFxuICBlcnJvcjogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBBY3Rpdml0eU1lc3NhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLFxuICByb2xlOiB6LmxpdGVyYWwoXCJhY3Rpdml0eVwiKSxcbiAgYWN0aXZpdHlUeXBlOiB6LnN0cmluZygpLFxuICBjb250ZW50OiB6LnJlY29yZCh6LmFueSgpKVxufSk7XG52YXIgTWVzc2FnZVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKFwicm9sZVwiLCBbXG4gIERldmVsb3Blck1lc3NhZ2VTY2hlbWEsXG4gIFN5c3RlbU1lc3NhZ2VTY2hlbWEsXG4gIEFzc2lzdGFudE1lc3NhZ2VTY2hlbWEsXG4gIFVzZXJNZXNzYWdlU2NoZW1hLFxuICBUb29sTWVzc2FnZVNjaGVtYSxcbiAgQWN0aXZpdHlNZXNzYWdlU2NoZW1hXG5dKTtcbnZhciBSb2xlU2NoZW1hID0gei51bmlvbihbXG4gIHoubGl0ZXJhbChcImRldmVsb3BlclwiKSxcbiAgei5saXRlcmFsKFwic3lzdGVtXCIpLFxuICB6LmxpdGVyYWwoXCJhc3Npc3RhbnRcIiksXG4gIHoubGl0ZXJhbChcInVzZXJcIiksXG4gIHoubGl0ZXJhbChcInRvb2xcIiksXG4gIHoubGl0ZXJhbChcImFjdGl2aXR5XCIpXG5dKTtcbnZhciBDb250ZXh0U2NoZW1hID0gei5vYmplY3Qoe1xuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKSxcbiAgdmFsdWU6IHouc3RyaW5nKClcbn0pO1xudmFyIFRvb2xTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLFxuICBwYXJhbWV0ZXJzOiB6LmFueSgpXG4gIC8vIEpTT04gU2NoZW1hIGZvciB0aGUgdG9vbCBwYXJhbWV0ZXJzXG59KTtcbnZhciBSdW5BZ2VudElucHV0U2NoZW1hID0gei5vYmplY3Qoe1xuICB0aHJlYWRJZDogei5zdHJpbmcoKSxcbiAgcnVuSWQ6IHouc3RyaW5nKCksXG4gIHBhcmVudFJ1bklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN0YXRlOiB6LmFueSgpLFxuICBtZXNzYWdlczogei5hcnJheShNZXNzYWdlU2NoZW1hKSxcbiAgdG9vbHM6IHouYXJyYXkoVG9vbFNjaGVtYSksXG4gIGNvbnRleHQ6IHouYXJyYXkoQ29udGV4dFNjaGVtYSksXG4gIGZvcndhcmRlZFByb3BzOiB6LmFueSgpXG59KTtcbnZhciBTdGF0ZVNjaGVtYSA9IHouYW55KCk7XG52YXIgQUdVSUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgfVxufTtcbnZhciBBR1VJQ29ubmVjdE5vdEltcGxlbWVudGVkRXJyb3IgPSBjbGFzcyBleHRlbmRzIEFHVUlFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiQ29ubmVjdCBub3QgaW1wbGVtZW50ZWQuIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgYWdlbnQuXCIpO1xuICB9XG59O1xuXG4vLyBzcmMvZXZlbnRzLnRzXG5pbXBvcnQgeyB6IGFzIHoyIH0gZnJvbSBcInpvZFwiO1xudmFyIFRleHRNZXNzYWdlUm9sZVNjaGVtYSA9IHoyLnVuaW9uKFtcbiAgejIubGl0ZXJhbChcImRldmVsb3BlclwiKSxcbiAgejIubGl0ZXJhbChcInN5c3RlbVwiKSxcbiAgejIubGl0ZXJhbChcImFzc2lzdGFudFwiKSxcbiAgejIubGl0ZXJhbChcInVzZXJcIilcbl0pO1xudmFyIEV2ZW50VHlwZSA9IC8qIEBfX1BVUkVfXyAqLyAoKEV2ZW50VHlwZTIpID0+IHtcbiAgRXZlbnRUeXBlMltcIlRFWFRfTUVTU0FHRV9TVEFSVFwiXSA9IFwiVEVYVF9NRVNTQUdFX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTJbXCJURVhUX01FU1NBR0VfQ09OVEVOVFwiXSA9IFwiVEVYVF9NRVNTQUdFX0NPTlRFTlRcIjtcbiAgRXZlbnRUeXBlMltcIlRFWFRfTUVTU0FHRV9FTkRcIl0gPSBcIlRFWFRfTUVTU0FHRV9FTkRcIjtcbiAgRXZlbnRUeXBlMltcIlRFWFRfTUVTU0FHRV9DSFVOS1wiXSA9IFwiVEVYVF9NRVNTQUdFX0NIVU5LXCI7XG4gIEV2ZW50VHlwZTJbXCJUSElOS0lOR19URVhUX01FU1NBR0VfU1RBUlRcIl0gPSBcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9TVEFSVFwiO1xuICBFdmVudFR5cGUyW1wiVEhJTktJTkdfVEVYVF9NRVNTQUdFX0NPTlRFTlRcIl0gPSBcIlRISU5LSU5HX1RFWFRfTUVTU0FHRV9DT05URU5UXCI7XG4gIEV2ZW50VHlwZTJbXCJUSElOS0lOR19URVhUX01FU1NBR0VfRU5EXCJdID0gXCJUSElOS0lOR19URVhUX01FU1NBR0VfRU5EXCI7XG4gIEV2ZW50VHlwZTJbXCJUT09MX0NBTExfU1RBUlRcIl0gPSBcIlRPT0xfQ0FMTF9TVEFSVFwiO1xuICBFdmVudFR5cGUyW1wiVE9PTF9DQUxMX0FSR1NcIl0gPSBcIlRPT0xfQ0FMTF9BUkdTXCI7XG4gIEV2ZW50VHlwZTJbXCJUT09MX0NBTExfRU5EXCJdID0gXCJUT09MX0NBTExfRU5EXCI7XG4gIEV2ZW50VHlwZTJbXCJUT09MX0NBTExfQ0hVTktcIl0gPSBcIlRPT0xfQ0FMTF9DSFVOS1wiO1xuICBFdmVudFR5cGUyW1wiVE9PTF9DQUxMX1JFU1VMVFwiXSA9IFwiVE9PTF9DQUxMX1JFU1VMVFwiO1xuICBFdmVudFR5cGUyW1wiVEhJTktJTkdfU1RBUlRcIl0gPSBcIlRISU5LSU5HX1NUQVJUXCI7XG4gIEV2ZW50VHlwZTJbXCJUSElOS0lOR19FTkRcIl0gPSBcIlRISU5LSU5HX0VORFwiO1xuICBFdmVudFR5cGUyW1wiU1RBVEVfU05BUFNIT1RcIl0gPSBcIlNUQVRFX1NOQVBTSE9UXCI7XG4gIEV2ZW50VHlwZTJbXCJTVEFURV9ERUxUQVwiXSA9IFwiU1RBVEVfREVMVEFcIjtcbiAgRXZlbnRUeXBlMltcIk1FU1NBR0VTX1NOQVBTSE9UXCJdID0gXCJNRVNTQUdFU19TTkFQU0hPVFwiO1xuICBFdmVudFR5cGUyW1wiQUNUSVZJVFlfU05BUFNIT1RcIl0gPSBcIkFDVElWSVRZX1NOQVBTSE9UXCI7XG4gIEV2ZW50VHlwZTJbXCJBQ1RJVklUWV9ERUxUQVwiXSA9IFwiQUNUSVZJVFlfREVMVEFcIjtcbiAgRXZlbnRUeXBlMltcIlJBV1wiXSA9IFwiUkFXXCI7XG4gIEV2ZW50VHlwZTJbXCJDVVNUT01cIl0gPSBcIkNVU1RPTVwiO1xuICBFdmVudFR5cGUyW1wiUlVOX1NUQVJURURcIl0gPSBcIlJVTl9TVEFSVEVEXCI7XG4gIEV2ZW50VHlwZTJbXCJSVU5fRklOSVNIRURcIl0gPSBcIlJVTl9GSU5JU0hFRFwiO1xuICBFdmVudFR5cGUyW1wiUlVOX0VSUk9SXCJdID0gXCJSVU5fRVJST1JcIjtcbiAgRXZlbnRUeXBlMltcIlNURVBfU1RBUlRFRFwiXSA9IFwiU1RFUF9TVEFSVEVEXCI7XG4gIEV2ZW50VHlwZTJbXCJTVEVQX0ZJTklTSEVEXCJdID0gXCJTVEVQX0ZJTklTSEVEXCI7XG4gIHJldHVybiBFdmVudFR5cGUyO1xufSkoRXZlbnRUeXBlIHx8IHt9KTtcbnZhciBCYXNlRXZlbnRTY2hlbWEgPSB6Mi5vYmplY3Qoe1xuICB0eXBlOiB6Mi5uYXRpdmVFbnVtKEV2ZW50VHlwZSksXG4gIHRpbWVzdGFtcDogejIubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgcmF3RXZlbnQ6IHoyLmFueSgpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRleHRNZXNzYWdlU3RhcnRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEVYVF9NRVNTQUdFX1NUQVJUXCIgLyogVEVYVF9NRVNTQUdFX1NUQVJUICovKSxcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKSxcbiAgcm9sZTogVGV4dE1lc3NhZ2VSb2xlU2NoZW1hLmRlZmF1bHQoXCJhc3Npc3RhbnRcIilcbn0pO1xudmFyIFRleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJURVhUX01FU1NBR0VfQ09OVEVOVFwiIC8qIFRFWFRfTUVTU0FHRV9DT05URU5UICovKSxcbiAgbWVzc2FnZUlkOiB6Mi5zdHJpbmcoKSxcbiAgZGVsdGE6IHoyLnN0cmluZygpLnJlZmluZSgocykgPT4gcy5sZW5ndGggPiAwLCBcIkRlbHRhIG11c3Qgbm90IGJlIGFuIGVtcHR5IHN0cmluZ1wiKVxufSk7XG52YXIgVGV4dE1lc3NhZ2VFbmRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEVYVF9NRVNTQUdFX0VORFwiIC8qIFRFWFRfTUVTU0FHRV9FTkQgKi8pLFxuICBtZXNzYWdlSWQ6IHoyLnN0cmluZygpXG59KTtcbnZhciBUZXh0TWVzc2FnZUNodW5rRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRFWFRfTUVTU0FHRV9DSFVOS1wiIC8qIFRFWFRfTUVTU0FHRV9DSFVOSyAqLyksXG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgcm9sZTogVGV4dE1lc3NhZ2VSb2xlU2NoZW1hLm9wdGlvbmFsKCksXG4gIGRlbHRhOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBUaGlua2luZ1RleHRNZXNzYWdlU3RhcnRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUXCIgLyogVEhJTktJTkdfVEVYVF9NRVNTQUdFX1NUQVJUICovKVxufSk7XG52YXIgVGhpbmtpbmdUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSA9IFRleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hLm9taXQoe1xuICBtZXNzYWdlSWQ6IHRydWUsXG4gIHR5cGU6IHRydWVcbn0pLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUSElOS0lOR19URVhUX01FU1NBR0VfQ09OVEVOVFwiIC8qIFRISU5LSU5HX1RFWFRfTUVTU0FHRV9DT05URU5UICovKVxufSk7XG52YXIgVGhpbmtpbmdUZXh0TWVzc2FnZUVuZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUSElOS0lOR19URVhUX01FU1NBR0VfRU5EXCIgLyogVEhJTktJTkdfVEVYVF9NRVNTQUdFX0VORCAqLylcbn0pO1xudmFyIFRvb2xDYWxsU3RhcnRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVE9PTF9DQUxMX1NUQVJUXCIgLyogVE9PTF9DQUxMX1NUQVJUICovKSxcbiAgdG9vbENhbGxJZDogejIuc3RyaW5nKCksXG4gIHRvb2xDYWxsTmFtZTogejIuc3RyaW5nKCksXG4gIHBhcmVudE1lc3NhZ2VJZDogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgVG9vbENhbGxBcmdzRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlRPT0xfQ0FMTF9BUkdTXCIgLyogVE9PTF9DQUxMX0FSR1MgKi8pLFxuICB0b29sQ2FsbElkOiB6Mi5zdHJpbmcoKSxcbiAgZGVsdGE6IHoyLnN0cmluZygpXG59KTtcbnZhciBUb29sQ2FsbEVuZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUT09MX0NBTExfRU5EXCIgLyogVE9PTF9DQUxMX0VORCAqLyksXG4gIHRvb2xDYWxsSWQ6IHoyLnN0cmluZygpXG59KTtcbnZhciBUb29sQ2FsbFJlc3VsdEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKCksXG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUT09MX0NBTExfUkVTVUxUXCIgLyogVE9PTF9DQUxMX1JFU1VMVCAqLyksXG4gIHRvb2xDYWxsSWQ6IHoyLnN0cmluZygpLFxuICBjb250ZW50OiB6Mi5zdHJpbmcoKSxcbiAgcm9sZTogejIubGl0ZXJhbChcInRvb2xcIikub3B0aW9uYWwoKVxufSk7XG52YXIgVG9vbENhbGxDaHVua0V2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUT09MX0NBTExfQ0hVTktcIiAvKiBUT09MX0NBTExfQ0hVTksgKi8pLFxuICB0b29sQ2FsbElkOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0b29sQ2FsbE5hbWU6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHBhcmVudE1lc3NhZ2VJZDogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZGVsdGE6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRoaW5raW5nU3RhcnRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiVEhJTktJTkdfU1RBUlRcIiAvKiBUSElOS0lOR19TVEFSVCAqLyksXG4gIHRpdGxlOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBUaGlua2luZ0VuZEV2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJUSElOS0lOR19FTkRcIiAvKiBUSElOS0lOR19FTkQgKi8pXG59KTtcbnZhciBTdGF0ZVNuYXBzaG90RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlNUQVRFX1NOQVBTSE9UXCIgLyogU1RBVEVfU05BUFNIT1QgKi8pLFxuICBzbmFwc2hvdDogU3RhdGVTY2hlbWFcbn0pO1xudmFyIFN0YXRlRGVsdGFFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiU1RBVEVfREVMVEFcIiAvKiBTVEFURV9ERUxUQSAqLyksXG4gIGRlbHRhOiB6Mi5hcnJheSh6Mi5hbnkoKSlcbiAgLy8gSlNPTiBQYXRjaCAoUkZDIDY5MDIpXG59KTtcbnZhciBNZXNzYWdlc1NuYXBzaG90RXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIk1FU1NBR0VTX1NOQVBTSE9UXCIgLyogTUVTU0FHRVNfU05BUFNIT1QgKi8pLFxuICBtZXNzYWdlczogejIuYXJyYXkoTWVzc2FnZVNjaGVtYSlcbn0pO1xudmFyIEFjdGl2aXR5U25hcHNob3RFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiQUNUSVZJVFlfU05BUFNIT1RcIiAvKiBBQ1RJVklUWV9TTkFQU0hPVCAqLyksXG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKCksXG4gIGFjdGl2aXR5VHlwZTogejIuc3RyaW5nKCksXG4gIGNvbnRlbnQ6IHoyLnJlY29yZCh6Mi5hbnkoKSksXG4gIHJlcGxhY2U6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLmRlZmF1bHQodHJ1ZSlcbn0pO1xudmFyIEFjdGl2aXR5RGVsdGFFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiQUNUSVZJVFlfREVMVEFcIiAvKiBBQ1RJVklUWV9ERUxUQSAqLyksXG4gIG1lc3NhZ2VJZDogejIuc3RyaW5nKCksXG4gIGFjdGl2aXR5VHlwZTogejIuc3RyaW5nKCksXG4gIHBhdGNoOiB6Mi5hcnJheSh6Mi5hbnkoKSlcbn0pO1xudmFyIFJhd0V2ZW50U2NoZW1hID0gQmFzZUV2ZW50U2NoZW1hLmV4dGVuZCh7XG4gIHR5cGU6IHoyLmxpdGVyYWwoXCJSQVdcIiAvKiBSQVcgKi8pLFxuICBldmVudDogejIuYW55KCksXG4gIHNvdXJjZTogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgQ3VzdG9tRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIkNVU1RPTVwiIC8qIENVU1RPTSAqLyksXG4gIG5hbWU6IHoyLnN0cmluZygpLFxuICB2YWx1ZTogejIuYW55KClcbn0pO1xudmFyIFJ1blN0YXJ0ZWRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiUlVOX1NUQVJURURcIiAvKiBSVU5fU1RBUlRFRCAqLyksXG4gIHRocmVhZElkOiB6Mi5zdHJpbmcoKSxcbiAgcnVuSWQ6IHoyLnN0cmluZygpLFxuICBwYXJlbnRSdW5JZDogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgaW5wdXQ6IFJ1bkFnZW50SW5wdXRTY2hlbWEub3B0aW9uYWwoKVxufSk7XG52YXIgUnVuRmluaXNoZWRFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiUlVOX0ZJTklTSEVEXCIgLyogUlVOX0ZJTklTSEVEICovKSxcbiAgdGhyZWFkSWQ6IHoyLnN0cmluZygpLFxuICBydW5JZDogejIuc3RyaW5nKCksXG4gIHJlc3VsdDogejIuYW55KCkub3B0aW9uYWwoKVxufSk7XG52YXIgUnVuRXJyb3JFdmVudFNjaGVtYSA9IEJhc2VFdmVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6Mi5saXRlcmFsKFwiUlVOX0VSUk9SXCIgLyogUlVOX0VSUk9SICovKSxcbiAgbWVzc2FnZTogejIuc3RyaW5nKCksXG4gIGNvZGU6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIFN0ZXBTdGFydGVkRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlNURVBfU1RBUlRFRFwiIC8qIFNURVBfU1RBUlRFRCAqLyksXG4gIHN0ZXBOYW1lOiB6Mi5zdHJpbmcoKVxufSk7XG52YXIgU3RlcEZpbmlzaGVkRXZlbnRTY2hlbWEgPSBCYXNlRXZlbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejIubGl0ZXJhbChcIlNURVBfRklOSVNIRURcIiAvKiBTVEVQX0ZJTklTSEVEICovKSxcbiAgc3RlcE5hbWU6IHoyLnN0cmluZygpXG59KTtcbnZhciBFdmVudFNjaGVtYXMgPSB6Mi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hLFxuICBUZXh0TWVzc2FnZUNvbnRlbnRFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VFbmRFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VDaHVua0V2ZW50U2NoZW1hLFxuICBUaGlua2luZ1N0YXJ0RXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nRW5kRXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ1RleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ1RleHRNZXNzYWdlRW5kRXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsU3RhcnRFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxBcmdzRXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsRW5kRXZlbnRTY2hlbWEsXG4gIFRvb2xDYWxsQ2h1bmtFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxSZXN1bHRFdmVudFNjaGVtYSxcbiAgU3RhdGVTbmFwc2hvdEV2ZW50U2NoZW1hLFxuICBTdGF0ZURlbHRhRXZlbnRTY2hlbWEsXG4gIE1lc3NhZ2VzU25hcHNob3RFdmVudFNjaGVtYSxcbiAgQWN0aXZpdHlTbmFwc2hvdEV2ZW50U2NoZW1hLFxuICBBY3Rpdml0eURlbHRhRXZlbnRTY2hlbWEsXG4gIFJhd0V2ZW50U2NoZW1hLFxuICBDdXN0b21FdmVudFNjaGVtYSxcbiAgUnVuU3RhcnRlZEV2ZW50U2NoZW1hLFxuICBSdW5GaW5pc2hlZEV2ZW50U2NoZW1hLFxuICBSdW5FcnJvckV2ZW50U2NoZW1hLFxuICBTdGVwU3RhcnRlZEV2ZW50U2NoZW1hLFxuICBTdGVwRmluaXNoZWRFdmVudFNjaGVtYVxuXSk7XG5leHBvcnQge1xuICBBR1VJQ29ubmVjdE5vdEltcGxlbWVudGVkRXJyb3IsXG4gIEFHVUlFcnJvcixcbiAgQWN0aXZpdHlEZWx0YUV2ZW50U2NoZW1hLFxuICBBY3Rpdml0eU1lc3NhZ2VTY2hlbWEsXG4gIEFjdGl2aXR5U25hcHNob3RFdmVudFNjaGVtYSxcbiAgQXNzaXN0YW50TWVzc2FnZVNjaGVtYSxcbiAgQmFzZUV2ZW50U2NoZW1hLFxuICBCYXNlTWVzc2FnZVNjaGVtYSxcbiAgQmluYXJ5SW5wdXRDb250ZW50U2NoZW1hLFxuICBDb250ZXh0U2NoZW1hLFxuICBDdXN0b21FdmVudFNjaGVtYSxcbiAgRGV2ZWxvcGVyTWVzc2FnZVNjaGVtYSxcbiAgRXZlbnRTY2hlbWFzLFxuICBFdmVudFR5cGUsXG4gIEZ1bmN0aW9uQ2FsbFNjaGVtYSxcbiAgSW5wdXRDb250ZW50U2NoZW1hLFxuICBNZXNzYWdlU2NoZW1hLFxuICBNZXNzYWdlc1NuYXBzaG90RXZlbnRTY2hlbWEsXG4gIFJhd0V2ZW50U2NoZW1hLFxuICBSb2xlU2NoZW1hLFxuICBSdW5BZ2VudElucHV0U2NoZW1hLFxuICBSdW5FcnJvckV2ZW50U2NoZW1hLFxuICBSdW5GaW5pc2hlZEV2ZW50U2NoZW1hLFxuICBSdW5TdGFydGVkRXZlbnRTY2hlbWEsXG4gIFN0YXRlRGVsdGFFdmVudFNjaGVtYSxcbiAgU3RhdGVTY2hlbWEsXG4gIFN0YXRlU25hcHNob3RFdmVudFNjaGVtYSxcbiAgU3RlcEZpbmlzaGVkRXZlbnRTY2hlbWEsXG4gIFN0ZXBTdGFydGVkRXZlbnRTY2hlbWEsXG4gIFN5c3RlbU1lc3NhZ2VTY2hlbWEsXG4gIFRleHRJbnB1dENvbnRlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlQ2h1bmtFdmVudFNjaGVtYSxcbiAgVGV4dE1lc3NhZ2VDb250ZW50RXZlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlRW5kRXZlbnRTY2hlbWEsXG4gIFRleHRNZXNzYWdlU3RhcnRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdFbmRFdmVudFNjaGVtYSxcbiAgVGhpbmtpbmdTdGFydEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ1RleHRNZXNzYWdlQ29udGVudEV2ZW50U2NoZW1hLFxuICBUaGlua2luZ1RleHRNZXNzYWdlRW5kRXZlbnRTY2hlbWEsXG4gIFRoaW5raW5nVGV4dE1lc3NhZ2VTdGFydEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbEFyZ3NFdmVudFNjaGVtYSxcbiAgVG9vbENhbGxDaHVua0V2ZW50U2NoZW1hLFxuICBUb29sQ2FsbEVuZEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbFJlc3VsdEV2ZW50U2NoZW1hLFxuICBUb29sQ2FsbFNjaGVtYSxcbiAgVG9vbENhbGxTdGFydEV2ZW50U2NoZW1hLFxuICBUb29sTWVzc2FnZVNjaGVtYSxcbiAgVG9vbFNjaGVtYSxcbiAgVXNlck1lc3NhZ2VTY2hlbWFcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/shared/node_modules/@ag-ui/core/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@copilotkitnext/web-inspector/dist/index.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@copilotkitnext/web-inspector/dist/index.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WEB_INSPECTOR_TAG: () => (/* binding */ WEB_INSPECTOR_TAG),\n/* harmony export */   WebInspectorElement: () => (/* binding */ WebInspectorElement),\n/* harmony export */   defineWebInspector: () => (/* binding */ defineWebInspector)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"(ssr)/./node_modules/lit/index.js\");\n/* harmony import */ var lit_directives_style_map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/style-map.js */ \"(ssr)/./node_modules/lit/directives/style-map.js\");\n/* harmony import */ var lit_directives_unsafe_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/directives/unsafe-html.js */ \"(ssr)/./node_modules/lit/directives/unsafe-html.js\");\n/* harmony import */ var marked__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! marked */ \"(ssr)/./node_modules/marked/lib/marked.esm.js\");\n/* harmony import */ var lucide__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lucide */ \"(ssr)/./node_modules/lucide/dist/esm/iconsAndAliases.js\");\n/* harmony import */ var _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @copilotkitnext/core */ \"(ssr)/./node_modules/@copilotkitnext/core/dist/index.mjs\");\n// src/index.ts\n\n\n\n// src/styles/generated.css\nvar generated_default = '/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */\\n@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-divide-y-reverse:0;--tw-border-style:solid;--tw-leading:initial;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-outline-style:solid}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;--color-amber-50:oklch(98.7% .022 95.277);--color-amber-100:oklch(96.2% .059 95.617);--color-amber-200:oklch(92.4% .12 95.746);--color-amber-600:oklch(66.6% .179 58.318);--color-amber-700:oklch(55.5% .163 48.998);--color-amber-800:oklch(47.3% .137 46.201);--color-amber-900:oklch(41.4% .112 45.904);--color-green-100:oklch(96.2% .044 156.743);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-emerald-50:oklch(97.9% .021 166.113);--color-emerald-200:oklch(90.5% .093 164.15);--color-emerald-500:oklch(69.6% .17 162.48);--color-emerald-700:oklch(50.8% .118 165.612);--color-sky-50:oklch(97.7% .013 236.62);--color-sky-200:oklch(90.1% .058 230.902);--color-sky-700:oklch(50% .134 242.749);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-violet-50:oklch(96.9% .016 293.756);--color-violet-200:oklch(89.4% .057 293.283);--color-violet-700:oklch(49.1% .27 292.581);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-200:oklch(90.2% .063 306.703);--color-purple-700:oklch(49.6% .265 301.924);--color-rose-50:oklch(96.9% .015 12.422);--color-rose-200:oklch(89.2% .058 10.001);--color-rose-500:oklch(64.5% .246 16.439);--color-rose-600:oklch(58.6% .253 17.585);--color-rose-700:oklch(51.4% .222 16.935);--color-rose-800:oklch(45.5% .188 13.697);--color-rose-900:oklch(41% .159 10.272);--color-slate-200:oklch(92.9% .013 255.508);--color-slate-800:oklch(27.9% .041 260.031);--color-slate-900:oklch(20.8% .042 265.755);--color-slate-950:oklch(12.9% .042 264.695);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-md:28rem;--container-2xl:42rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--font-weight-medium:500;--font-weight-semibold:600;--leading-snug:1.375;--leading-relaxed:1.625;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--blur-sm:8px;--blur-md:12px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab, red, red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}:host{font-family:var(--font-sans);color:var(--color-slate-900);background-color:#0000;display:block}}@layer components;@layer utilities{.pointer-events-auto{pointer-events:auto}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.top-0{top:calc(var(--spacing)*0)}.right-0{right:calc(var(--spacing)*0)}.right-1{right:calc(var(--spacing)*1)}.bottom-1{bottom:calc(var(--spacing)*1)}.left-0{left:calc(var(--spacing)*0)}.z-10{z-index:10}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.m-0{margin:calc(var(--spacing)*0)}.mx-4{margin-inline:calc(var(--spacing)*4)}.my-1{margin-block:calc(var(--spacing)*1)}.my-3{margin-block:calc(var(--spacing)*3)}.mt-0\\\\.5{margin-top:calc(var(--spacing)*.5)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-1\\\\.5{margin-top:calc(var(--spacing)*1.5)}.mt-2{margin-top:calc(var(--spacing)*2)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.ml-auto{margin-left:auto}.box-border{box-sizing:border-box}.block{display:block}.flex{display:flex}.grid{display:grid}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.h-1\\\\.5{height:calc(var(--spacing)*1.5)}.h-3{height:calc(var(--spacing)*3)}.h-3\\\\.5{height:calc(var(--spacing)*3.5)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-40{height:calc(var(--spacing)*40)}.h-full{height:100%}.max-h-64{max-height:calc(var(--spacing)*64)}.max-h-96{max-height:calc(var(--spacing)*96)}.w-1\\\\.5{width:calc(var(--spacing)*1.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\\\\.5{width:calc(var(--spacing)*3.5)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-7{width:calc(var(--spacing)*7)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-40{width:calc(var(--spacing)*40)}.w-auto{width:auto}.w-full{width:100%}.max-w-2xl{max-width:var(--container-2xl)}.max-w-\\\\[240px\\\\]{max-width:240px}.max-w-md{max-width:var(--container-md)}.max-w-xs{max-width:var(--container-xs)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-\\\\[160px\\\\]{min-width:160px}.min-w-\\\\[200px\\\\]{min-width:200px}.flex-1{flex:1}.shrink-0{flex-shrink:0}.table-fixed{table-layout:fixed}.border-collapse{border-collapse:collapse}.-translate-y-\\\\[2px\\\\]{--tw-translate-y:calc(2px*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-nwse-resize{cursor:nwse-resize}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.resize{resize:both}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.divide-y>:not(:last-child)){--tw-divide-y-reverse:0;border-bottom-style:var(--tw-border-style);border-top-style:var(--tw-border-style);border-top-width:calc(1px*var(--tw-divide-y-reverse));border-bottom-width:calc(1px*calc(1 - var(--tw-divide-y-reverse)))}:where(.divide-gray-200>:not(:last-child)){border-color:var(--color-gray-200)}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-hidden{overflow-x:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-sm{border-radius:var(--radius-sm)}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-amber-200{border-color:var(--color-amber-200)}.border-blue-200{border-color:var(--color-blue-200)}.border-emerald-200{border-color:var(--color-emerald-200)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-purple-200{border-color:var(--color-purple-200)}.border-rose-200{border-color:var(--color-rose-200)}.border-sky-200{border-color:var(--color-sky-200)}.border-slate-200{border-color:var(--color-slate-200)}.border-violet-200{border-color:var(--color-violet-200)}.border-white\\\\/20{border-color:#fff3}@supports (color:color-mix(in lab, red, red)){.border-white\\\\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-amber-50{background-color:var(--color-amber-50)}.bg-amber-100{background-color:var(--color-amber-100)}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-emerald-50{background-color:var(--color-emerald-50)}.bg-emerald-500{background-color:var(--color-emerald-500)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-50\\\\/50{background-color:#f9fafb80}@supports (color:color-mix(in lab, red, red)){.bg-gray-50\\\\/50{background-color:color-mix(in oklab,var(--color-gray-50)50%,transparent)}}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-100{background-color:var(--color-green-100)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-rose-50{background-color:var(--color-rose-50)}.bg-rose-500{background-color:var(--color-rose-500)}.bg-rose-600{background-color:var(--color-rose-600)}.bg-sky-50{background-color:var(--color-sky-50)}.bg-slate-900{background-color:var(--color-slate-900)}.bg-slate-950\\\\/95{background-color:#020618f2}@supports (color:color-mix(in lab, red, red)){.bg-slate-950\\\\/95{background-color:color-mix(in oklab,var(--color-slate-950)95%,transparent)}}.bg-violet-50{background-color:var(--color-violet-50)}.bg-white{background-color:var(--color-white)}.bg-white\\\\/60{background-color:#fff9}@supports (color:color-mix(in lab, red, red)){.bg-white\\\\/60{background-color:color-mix(in oklab,var(--color-white)60%,transparent)}}.bg-white\\\\/95{background-color:#fffffff2}@supports (color:color-mix(in lab, red, red)){.bg-white\\\\/95{background-color:color-mix(in oklab,var(--color-white)95%,transparent)}}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-1\\\\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-0\\\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\\\\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-8{padding-block:calc(var(--spacing)*8)}.text-center{text-align:center}.text-left{text-align:left}.align-middle{vertical-align:middle}.align-top{vertical-align:top}.font-mono{font-family:var(--font-mono)}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\\\[9px\\\\]{font-size:9px}.text-\\\\[10px\\\\]{font-size:10px}.text-\\\\[11px\\\\]{font-size:11px}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.leading-snug{--tw-leading:var(--leading-snug);line-height:var(--leading-snug)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.break-words{overflow-wrap:break-word}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.text-amber-600{color:var(--color-amber-600)}.text-amber-700{color:var(--color-amber-700)}.text-amber-800{color:var(--color-amber-800)}.text-amber-900{color:var(--color-amber-900)}.text-blue-600{color:var(--color-blue-600)}.text-blue-700{color:var(--color-blue-700)}.text-blue-800{color:var(--color-blue-800)}.text-emerald-700{color:var(--color-emerald-700)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-purple-700{color:var(--color-purple-700)}.text-rose-700{color:var(--color-rose-700)}.text-rose-800{color:var(--color-rose-800)}.text-rose-900{color:var(--color-rose-900)}.text-sky-700{color:var(--color-sky-700)}.text-slate-800{color:var(--color-slate-800)}.text-slate-900{color:var(--color-slate-900)}.text-violet-700{color:var(--color-violet-700)}.text-white{color:var(--color-white)}.italic{font-style:italic}.opacity-0{opacity:0}.opacity-80{opacity:.8}.shadow-\\\\[0_12px_30px_rgba\\\\(15\\\\,23\\\\,42\\\\,0\\\\.12\\\\)\\\\]{--tw-shadow:0 12px 30px var(--tw-shadow-color,#0f172a1f);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-1{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-black\\\\/5{--tw-ring-color:#0000000d}@supports (color:color-mix(in lab, red, red)){.ring-black\\\\/5{--tw-ring-color:color-mix(in oklab,var(--color-black)5%,transparent)}}.ring-transparent{--tw-ring-color:transparent}.ring-white\\\\/10{--tw-ring-color:#ffffff1a}@supports (color:color-mix(in lab, red, red)){.ring-white\\\\/10{--tw-ring-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.backdrop-blur-md{--tw-backdrop-blur:blur(var(--blur-md));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}@media (hover:hover){.group-hover\\\\:opacity-100:is(:where(.group):hover *){opacity:1}.hover\\\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\\\:border-gray-300:hover{border-color:var(--color-gray-300)}.hover\\\\:border-white\\\\/30:hover{border-color:#ffffff4d}@supports (color:color-mix(in lab, red, red)){.hover\\\\:border-white\\\\/30:hover{border-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.hover\\\\:bg-blue-50\\\\/50:hover{background-color:#eff6ff80}@supports (color:color-mix(in lab, red, red)){.hover\\\\:bg-blue-50\\\\/50:hover{background-color:color-mix(in oklab,var(--color-blue-50)50%,transparent)}}.hover\\\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\\\:bg-gray-800:hover{background-color:var(--color-gray-800)}.hover\\\\:bg-slate-900\\\\/95:hover{background-color:#0f172bf2}@supports (color:color-mix(in lab, red, red)){.hover\\\\:bg-slate-900\\\\/95:hover{background-color:color-mix(in oklab,var(--color-slate-900)95%,transparent)}}.hover\\\\:text-gray-600:hover{color:var(--color-gray-600)}.hover\\\\:text-gray-900:hover{color:var(--color-gray-900)}}.focus\\\\:border-gray-300:focus{border-color:var(--color-gray-300)}.focus\\\\:bg-gray-50:focus{background-color:var(--color-gray-50)}.focus\\\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\\\:ring-gray-200:focus{--tw-ring-color:var(--color-gray-200)}.focus\\\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.focus-visible\\\\:outline:focus-visible{outline-style:var(--tw-outline-style);outline-width:1px}.focus-visible\\\\:outline-2:focus-visible{outline-style:var(--tw-outline-style);outline-width:2px}.focus-visible\\\\:outline-offset-2:focus-visible{outline-offset:2px}.focus-visible\\\\:outline-gray-300:focus-visible{outline-color:var(--color-gray-300)}.focus-visible\\\\:outline-gray-400:focus-visible{outline-color:var(--color-gray-400)}.focus-visible\\\\:outline-rose-500:focus-visible{outline-color:var(--color-rose-500)}.disabled\\\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\\\:opacity-50:disabled{opacity:.5}@media (min-width:48rem){.md\\\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}.\\\\[\\\\&\\\\>svg\\\\]\\\\:\\\\!h-8>svg{height:calc(var(--spacing)*8)!important}.\\\\[\\\\&\\\\>svg\\\\]\\\\:\\\\!w-8>svg{width:calc(var(--spacing)*8)!important}.sr-only{clip:rect(0,0,0,0);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}}@property --tw-translate-x{syntax:\"*\";inherits:false;initial-value:0}@property --tw-translate-y{syntax:\"*\";inherits:false;initial-value:0}@property --tw-translate-z{syntax:\"*\";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:\"*\";inherits:false}@property --tw-rotate-y{syntax:\"*\";inherits:false}@property --tw-rotate-z{syntax:\"*\";inherits:false}@property --tw-skew-x{syntax:\"*\";inherits:false}@property --tw-skew-y{syntax:\"*\";inherits:false}@property --tw-space-y-reverse{syntax:\"*\";inherits:false;initial-value:0}@property --tw-divide-y-reverse{syntax:\"*\";inherits:false;initial-value:0}@property --tw-border-style{syntax:\"*\";inherits:false;initial-value:solid}@property --tw-leading{syntax:\"*\";inherits:false}@property --tw-font-weight{syntax:\"*\";inherits:false}@property --tw-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:\"*\";inherits:false}@property --tw-shadow-alpha{syntax:\"<percentage>\";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:\"*\";inherits:false}@property --tw-inset-shadow-alpha{syntax:\"<percentage>\";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:\"*\";inherits:false}@property --tw-ring-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:\"*\";inherits:false}@property --tw-inset-ring-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:\"*\";inherits:false}@property --tw-ring-offset-width{syntax:\"<length>\";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:\"*\";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-backdrop-blur{syntax:\"*\";inherits:false}@property --tw-backdrop-brightness{syntax:\"*\";inherits:false}@property --tw-backdrop-contrast{syntax:\"*\";inherits:false}@property --tw-backdrop-grayscale{syntax:\"*\";inherits:false}@property --tw-backdrop-hue-rotate{syntax:\"*\";inherits:false}@property --tw-backdrop-invert{syntax:\"*\";inherits:false}@property --tw-backdrop-opacity{syntax:\"*\";inherits:false}@property --tw-backdrop-saturate{syntax:\"*\";inherits:false}@property --tw-backdrop-sepia{syntax:\"*\";inherits:false}@property --tw-scale-x{syntax:\"*\";inherits:false;initial-value:1}@property --tw-scale-y{syntax:\"*\";inherits:false;initial-value:1}@property --tw-scale-z{syntax:\"*\";inherits:false;initial-value:1}@property --tw-outline-style{syntax:\"*\";inherits:false;initial-value:solid}@keyframes pulse{50%{opacity:.5}}';\n\n// src/assets/inspector-logo.svg\nvar inspector_logo_default = 'data:image/svg+xml,<svg width=\"136\" height=\"26\" viewBox=\"0 0 136 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">%0A<path d=\"M15.5253 11.0828H11.2602C11.2299 10.7299 11.1492 10.4097 11.0181 10.1224C10.8921 9.83503 10.7157 9.588 10.4888 9.38129C10.267 9.16958 9.99725 9.00818 9.67964 8.89733C9.36202 8.78136 9.00155 8.72338 8.59823 8.72338C7.89242 8.72338 7.29501 8.89477 6.80598 9.23756C6.322 9.58045 5.95397 10.072 5.70189 10.7122C5.45486 11.3524 5.33134 12.1213 5.33134 13.0187C5.33134 13.9665 5.45738 14.7606 5.70946 15.4008C5.96657 16.0361 6.33712 16.515 6.82111 16.8376C7.30509 17.1553 7.88739 17.314 8.56798 17.314C8.95618 17.314 9.30404 17.2662 9.61158 17.1704C9.91911 17.0695 10.1863 16.9259 10.4132 16.7393C10.64 16.5528 10.8241 16.3284 10.9653 16.0663C11.1114 15.7991 11.2097 15.4991 11.2602 15.1664L15.5253 15.1967C15.4748 15.852 15.2908 16.52 14.9732 17.2006C14.6556 17.8762 14.2044 18.5013 13.6195 19.076C13.0398 19.6457 12.3214 20.1046 11.4643 20.4524C10.6073 20.8003 9.61158 20.9742 8.47724 20.9742C7.05554 20.9742 5.78004 20.6692 4.65074 20.0592C3.52649 19.4491 2.63667 18.5517 1.98126 17.367C1.33091 16.1823 1.00574 14.7328 1.00574 13.0187C1.00574 11.2946 1.33848 9.84259 2.00396 8.66285C2.66944 7.47811 3.56682 6.58324 4.69611 5.97827C5.82541 5.36825 7.08578 5.06323 8.47724 5.06323C9.45528 5.06323 10.3552 5.19683 11.177 5.46403C11.9987 5.73123 12.7196 6.12194 13.3397 6.63618C13.9599 7.14537 14.4589 7.77302 14.8371 8.51922C15.2152 9.26533 15.4446 10.1198 15.5253 11.0828Z\" fill=\"%23010507\"/>%0A<path d=\"M23.0894 20.9742C21.829 20.9742 20.7501 20.7246 19.8527 20.2256C18.9553 19.7214 18.2672 19.0206 17.7883 18.1232C17.3093 17.2208 17.0698 16.1747 17.0698 14.9849C17.0698 13.7951 17.3093 12.7516 17.7883 11.8542C18.2672 10.9517 18.9553 10.2509 19.8527 9.75184C20.7501 9.24767 21.829 8.99564 23.0894 8.99564C24.3498 8.99564 25.4286 9.24767 26.326 9.75184C27.2234 10.2509 27.9115 10.9517 28.3905 11.8542C28.8695 12.7516 29.1089 13.7951 29.1089 14.9849C29.1089 16.1747 28.8695 17.2208 28.3905 18.1232C27.9115 19.0206 27.2234 19.7214 26.326 20.2256C25.4286 20.7246 24.3498 20.9742 23.0894 20.9742ZM23.1196 17.8888C23.4726 17.8888 23.7776 17.7703 24.0346 17.5334C24.2918 17.2965 24.4909 16.9587 24.6321 16.5201C24.7733 16.0814 24.8438 15.5597 24.8438 14.9547C24.8438 14.3446 24.7733 13.8228 24.6321 13.3893C24.4909 12.9506 24.2918 12.6128 24.0346 12.3759C23.7776 12.139 23.4726 12.0205 23.1196 12.0205C22.7466 12.0205 22.4265 12.139 22.1592 12.3759C21.8921 12.6128 21.6878 12.9506 21.5466 13.3893C21.4056 13.8228 21.3349 14.3446 21.3349 14.9547C21.3349 15.5597 21.4056 16.0814 21.5466 16.5201C21.6878 16.9587 21.8921 17.2965 22.1592 17.5334C22.4265 17.7703 22.7466 17.8888 23.1196 17.8888Z\" fill=\"%23010507\"/>%0A<path d=\"M30.8029 25.1184V9.14681H34.947V11.1735H35.0377C35.189 10.7803 35.4109 10.4199 35.7032 10.0922C35.9957 9.7594 36.3587 9.4947 36.7922 9.2981C37.2257 9.09639 37.7299 8.99564 38.3046 8.99564C39.0709 8.99564 39.7995 9.19979 40.4901 9.60811C41.1858 10.0165 41.7505 10.6593 42.1841 11.5365C42.6227 12.4138 42.842 13.5531 42.842 14.9547C42.842 16.2957 42.6328 17.4073 42.2143 18.2896C41.801 19.1719 41.2464 19.8298 40.5506 20.2633C39.8599 20.697 39.1011 20.9137 38.2744 20.9137C37.7299 20.9137 37.2434 20.8255 36.8149 20.649C36.3914 20.4675 36.0284 20.223 35.7259 19.9155C35.4285 19.6029 35.199 19.25 35.0377 18.8568H34.9772V25.1184H30.8029ZM34.8865 14.9547C34.8865 15.5193 34.9596 16.0083 35.1058 16.4218C35.257 16.8301 35.4688 17.1477 35.7411 17.3746C36.0183 17.5964 36.3486 17.7073 36.7317 17.7073C37.1149 17.7073 37.44 17.5989 37.7072 17.3821C37.9795 17.1603 38.1862 16.8452 38.3273 16.4369C38.4736 16.0234 38.5466 15.5294 38.5466 14.9547C38.5466 14.3799 38.4736 13.8884 38.3273 13.48C38.1862 13.0666 37.9795 12.7516 37.7072 12.5347C37.44 12.3129 37.1149 12.202 36.7317 12.202C36.3486 12.202 36.0183 12.3129 35.7411 12.5347C35.4688 12.7516 35.257 13.0666 35.1058 13.48C34.9596 13.8884 34.8865 14.3799 34.8865 14.9547Z\" fill=\"%23010507\"/>%0A<path d=\"M44.5908 20.7625V9.14678H48.7652V20.7625H44.5908ZM46.6779 7.93683C46.1133 7.93683 45.6294 7.75033 45.2261 7.37726C44.8227 7.00419 44.621 6.55549 44.621 6.03118C44.621 5.50686 44.8227 5.05816 45.2261 4.68509C45.6294 4.31202 46.1133 4.12549 46.6779 4.12549C47.2477 4.12549 47.7316 4.31202 48.1299 4.68509C48.5332 5.05816 48.7349 5.50686 48.7349 6.03118C48.7349 6.55549 48.5332 7.00419 48.1299 7.37726C47.7316 7.75033 47.2477 7.93683 46.6779 7.93683Z\" fill=\"%23010507\"/>%0A<path d=\"M55.0664 5.27496V20.7625H50.892V5.27496H55.0664Z\" fill=\"%23010507\"/>%0A<path d=\"M62.7893 20.9742C61.5289 20.9742 60.4501 20.7246 59.5527 20.2256C58.6553 19.7214 57.9671 19.0206 57.4881 18.1232C57.0093 17.2208 56.7698 16.1747 56.7698 14.9849C56.7698 13.7951 57.0093 12.7516 57.4881 11.8542C57.9671 10.9517 58.6553 10.2509 59.5527 9.75184C60.4501 9.24767 61.5289 8.99564 62.7893 8.99564C64.0497 8.99564 65.1286 9.24767 66.026 9.75184C66.9234 10.2509 67.6115 10.9517 68.0904 11.8542C68.5694 12.7516 68.8089 13.7951 68.8089 14.9849C68.8089 16.1747 68.5694 17.2208 68.0904 18.1232C67.6115 19.0206 66.9234 19.7214 66.026 20.2256C65.1286 20.7246 64.0497 20.9742 62.7893 20.9742ZM62.8195 17.8888C63.1724 17.8888 63.4775 17.7703 63.7346 17.5334C63.9917 17.2965 64.1908 16.9587 64.332 16.5201C64.4731 16.0814 64.5438 15.5597 64.5438 14.9547C64.5438 14.3446 64.4731 13.8228 64.332 13.3893C64.1908 12.9506 63.9917 12.6128 63.7346 12.3759C63.4775 12.139 63.1724 12.0205 62.8195 12.0205C62.4464 12.0205 62.1263 12.139 61.8592 12.3759C61.5919 12.6128 61.3878 12.9506 61.2466 13.3893C61.1054 13.8228 61.0349 14.3446 61.0349 14.9547C61.0349 15.5597 61.1054 16.0814 61.2466 16.5201C61.3878 16.9587 61.5919 17.2965 61.8592 17.5334C62.1263 17.7703 62.4464 17.8888 62.8195 17.8888Z\" fill=\"%23010507\"/>%0A<path d=\"M77.4298 9.1468V12.1717H69.7769V9.1468H77.4298ZM71.2591 6.36392H75.4334V17.0267C75.4334 17.188 75.4612 17.3241 75.5166 17.4351C75.572 17.5409 75.6578 17.6216 75.7738 17.677C75.8897 17.7274 76.0384 17.7527 76.2199 17.7527C76.3459 17.7527 76.4921 17.7375 76.6585 17.7073C76.8299 17.677 76.9559 17.6518 77.0366 17.6317L77.6416 20.5659C77.4551 20.6213 77.1879 20.6894 76.84 20.77C76.4972 20.8507 76.0888 20.9037 75.6149 20.9288C74.657 20.9792 73.8529 20.8809 73.2026 20.6339C72.5522 20.3818 72.0631 19.9861 71.7355 19.4466C71.4078 18.9072 71.249 18.2316 71.2591 17.42V6.36392Z\" fill=\"%23010507\"/>%0A<path d=\"M79.3223 20.7625V5.27496H83.5268V11.5365H83.7385L88.397 5.27496H93.2973L88.0642 12.1717L93.4183 20.7625H88.397L84.9183 14.9546L83.5268 16.7696V20.7625H79.3223Z\" fill=\"%23010507\"/>%0A<path d=\"M95.3334 20.7625V9.14678H99.5077V20.7625H95.3334ZM97.4206 7.93683C96.8559 7.93683 96.3719 7.75033 95.9686 7.37726C95.5653 7.00419 95.3637 6.55549 95.3637 6.03118C95.3637 5.50686 95.5653 5.05816 95.9686 4.68509C96.3719 4.31202 96.8559 4.12549 97.4206 4.12549C97.9902 4.12549 98.4743 4.31202 98.8725 4.68509C99.2758 5.05816 99.4775 5.50686 99.4775 6.03118C99.4775 6.55549 99.2758 7.00419 98.8725 7.37726C98.4743 7.75033 97.9902 7.93683 97.4206 7.93683Z\" fill=\"%23010507\"/>%0A<path d=\"M108.562 9.1468V12.1717H100.909V9.1468H108.562ZM102.391 6.36392H106.565V17.0267C106.565 17.188 106.593 17.3241 106.648 17.4351C106.704 17.5409 106.789 17.6216 106.905 17.677C107.021 17.7274 107.17 17.7527 107.352 17.7527C107.478 17.7527 107.623 17.7375 107.791 17.7073C107.962 17.677 108.087 17.6518 108.168 17.6317L108.774 20.5659C108.587 20.6213 108.319 20.6894 107.971 20.77C107.629 20.8507 107.22 20.9037 106.747 20.9288C105.789 20.9792 104.985 20.8809 104.334 20.6339C103.684 20.3818 103.195 19.9861 102.867 19.4466C102.54 18.9072 102.381 18.2316 102.391 17.42V6.36392Z\" fill=\"%23010507\"/>%0A<path d=\"M119.539 8.67678C121.648 5.91866 123.398 3.19128 124.071 0.988777C124.089 0.928849 124.159 0.90339 124.212 0.937987C126.553 2.48864 130.818 3.50932 134.591 3.53328C134.656 3.53369 134.7 3.59769 134.677 3.65822C133.423 6.84039 131.891 12.5423 131.831 19.0536C131.831 19.1503 131.695 19.185 131.647 19.1009C129.5 15.3438 122.623 10.0644 119.574 8.81838C119.518 8.79519 119.502 8.7255 119.539 8.67678Z\" fill=\"url(%23paint0_linear_8010_10612)\"/>%0A<path d=\"M126.653 6.98969C123.357 8.03321 120.345 8.61334 119.626 8.74516C119.58 8.75356 119.571 8.81686 119.614 8.83473C122.687 10.1121 129.53 15.3761 131.657 19.118C131.661 19.1262 131.671 19.1292 131.68 19.1255C131.688 19.1214 131.693 19.1108 131.69 19.1016L126.653 6.98969Z\" fill=\"url(%23paint1_linear_8010_10612)\"/>%0A<path d=\"M124.221 0.931179C127.043 2.4702 130.303 3.16142 134.629 3.52564C134.656 3.52796 134.665 3.56437 134.641 3.57702C134.088 3.86136 130.918 5.47409 128.565 6.33784C127.934 6.56926 127.3 6.78394 126.676 6.982C126.662 6.98633 126.647 6.97951 126.641 6.96631L124.156 0.989469C124.139 0.949222 124.183 0.910305 124.221 0.931179Z\" fill=\"url(%23paint2_linear_8010_10612)\"/>%0A<path d=\"M124.171 1.02203L131.742 19.082\" stroke=\"%23513C9F\" stroke-width=\"0.183881\" stroke-linecap=\"round\"/>%0A<path d=\"M119.628 8.74279C119.628 8.74279 123.809 7.99233 127.739 6.63677C131.668 5.28124 134.594 3.6214 134.594 3.6214\" stroke=\"%23513C9F\" stroke-width=\"0.183881\" stroke-linecap=\"round\"/>%0A<path d=\"M125.209 3.30383L122.405 12.6358M122.405 12.6358H129.07M122.405 12.6358L111.874 25.0383\" stroke=\"%23ABABAB\" stroke-width=\"0.321797\" stroke-linecap=\"round\"/>%0A<path d=\"M119.181 22.485L117.94 22.6596C118.584 24.3618 119.904 25.1053 121.479 25.1053C125.341 25.1053 124.163 20.7382 126.4 20.7382C128.023 20.7382 127.364 24.2778 130.857 24.2778C132.989 24.2778 133.201 22.1301 132.837 21.2061C132.835 21.2005 132.833 21.1953 132.83 21.1902L132.259 20.3154C132.222 20.2572 132.131 20.2791 132.125 20.3483L132.018 21.4087C132.011 21.4824 132.013 21.5559 132.021 21.6295C132.109 22.3621 132.165 24.14 130.857 24.14C129.477 24.14 129.145 20.6462 126.4 20.6462C123.181 20.6462 123.594 24.9675 121.618 24.9675C120.313 24.9675 119.319 23.4964 119.181 22.485Z\" fill=\"url(%23paint3_linear_8010_10612)\"/>%0A<defs>%0A<linearGradient id=\"paint0_linear_8010_10612\" x1=\"129.301\" y1=\"2.33848\" x2=\"125.623\" y2=\"12.452\" gradientUnits=\"userSpaceOnUse\">%0A<stop stop-color=\"%236430AB\"/>%0A<stop offset=\"1\" stop-color=\"%23AA89D8\"/>%0A</linearGradient>%0A<linearGradient id=\"paint1_linear_8010_10612\" x1=\"126.451\" y1=\"8.03874\" x2=\"121.717\" y2=\"17.1869\" gradientUnits=\"userSpaceOnUse\">%0A<stop stop-color=\"%23005DBB\"/>%0A<stop offset=\"1\" stop-color=\"%233D92E8\"/>%0A</linearGradient>%0A<linearGradient id=\"paint2_linear_8010_10612\" x1=\"128.565\" y1=\"2.33842\" x2=\"127.139\" y2=\"6.79755\" gradientUnits=\"userSpaceOnUse\">%0A<stop stop-color=\"%231B70C4\"/>%0A<stop offset=\"1\" stop-color=\"%2354A4F2\"/>%0A</linearGradient>%0A<linearGradient id=\"paint3_linear_8010_10612\" x1=\"117.94\" y1=\"22.7838\" x2=\"132.981\" y2=\"22.7838\" gradientUnits=\"userSpaceOnUse\">%0A<stop stop-color=\"%234497EA\"/>%0A<stop offset=\"0.254755\" stop-color=\"%231463B2\"/>%0A<stop offset=\"0.498725\" stop-color=\"%230A437D\"/>%0A<stop offset=\"0.666667\" stop-color=\"%232476C8\"/>%0A<stop offset=\"0.972542\" stop-color=\"%230C549A\"/>%0A</linearGradient>%0A</defs>%0A</svg>%0A';\n\n// src/assets/inspector-logo-icon.svg\nvar inspector_logo_icon_default = 'data:image/svg+xml,<?xml version=\"1.0\" encoding=\"utf-8\"?>%0A<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"55\" height=\"60\" viewBox=\"0 0 55 60\" fill=\"none\">%0A  <g stroke=\"%23FFFFFF\" stroke-width=\"3.3125\" stroke-linejoin=\"round\">%0A    <path d=\"M0 21.9336L16.5449 0C40.8483 5.37332 53 8.05998 53 8.05998L43.123 56L0 21.9336Z\" />%0A    <line x1=\"16.5828\" y1=\"0\" x2=\"43.2454\" y2=\"56\" />%0A    <line x1=\"0\" y1=\"21.9336\" x2=\"53\" y2=\"8.48421\" />%0A  </g>%0A</svg>%0A';\n\n// src/index.ts\n\n\n\n\n\n// src/lib/context-helpers.ts\nfunction updateSizeFromElement(state, element, fallback) {\n  const rect = element.getBoundingClientRect();\n  state.size = {\n    width: rect.width || fallback.width,\n    height: rect.height || fallback.height\n  };\n}\nfunction clampSize(size, viewport, edgeMargin, minWidth, minHeight) {\n  const maxWidth = Math.max(minWidth, viewport.width - edgeMargin * 2);\n  const maxHeight = Math.max(minHeight, viewport.height - edgeMargin * 2);\n  return {\n    width: clamp(size.width, minWidth, maxWidth),\n    height: clamp(size.height, minHeight, maxHeight)\n  };\n}\nfunction constrainToViewport(state, position, viewport, edgeMargin) {\n  const maxX = Math.max(edgeMargin, viewport.width - state.size.width - edgeMargin);\n  const maxY = Math.max(edgeMargin, viewport.height - state.size.height - edgeMargin);\n  return {\n    x: clamp(position.x, edgeMargin, maxX),\n    y: clamp(position.y, edgeMargin, maxY)\n  };\n}\nfunction keepPositionWithinViewport(state, viewport, edgeMargin) {\n  state.position = constrainToViewport(state, state.position, viewport, edgeMargin);\n}\nfunction centerContext(state, viewport, edgeMargin) {\n  const centered = {\n    x: Math.round((viewport.width - state.size.width) / 2),\n    y: Math.round((viewport.height - state.size.height) / 2)\n  };\n  state.position = constrainToViewport(state, centered, viewport, edgeMargin);\n  updateAnchorFromPosition(state, viewport, edgeMargin);\n  return state.position;\n}\nfunction updateAnchorFromPosition(state, viewport, edgeMargin) {\n  const centerX = state.position.x + state.size.width / 2;\n  const centerY = state.position.y + state.size.height / 2;\n  const horizontal = centerX < viewport.width / 2 ? \"left\" : \"right\";\n  const vertical = centerY < viewport.height / 2 ? \"top\" : \"bottom\";\n  state.anchor = { horizontal, vertical };\n  const maxHorizontalOffset = Math.max(edgeMargin, viewport.width - state.size.width - edgeMargin);\n  const maxVerticalOffset = Math.max(edgeMargin, viewport.height - state.size.height - edgeMargin);\n  state.anchorOffset = {\n    x: horizontal === \"left\" ? clamp(state.position.x, edgeMargin, maxHorizontalOffset) : clamp(viewport.width - state.position.x - state.size.width, edgeMargin, maxHorizontalOffset),\n    y: vertical === \"top\" ? clamp(state.position.y, edgeMargin, maxVerticalOffset) : clamp(viewport.height - state.position.y - state.size.height, edgeMargin, maxVerticalOffset)\n  };\n}\nfunction applyAnchorPosition(state, viewport, edgeMargin) {\n  const maxHorizontalOffset = Math.max(edgeMargin, viewport.width - state.size.width - edgeMargin);\n  const maxVerticalOffset = Math.max(edgeMargin, viewport.height - state.size.height - edgeMargin);\n  const horizontalOffset = clamp(state.anchorOffset.x, edgeMargin, maxHorizontalOffset);\n  const verticalOffset = clamp(state.anchorOffset.y, edgeMargin, maxVerticalOffset);\n  const x = state.anchor.horizontal === \"left\" ? horizontalOffset : viewport.width - state.size.width - horizontalOffset;\n  const y = state.anchor.vertical === \"top\" ? verticalOffset : viewport.height - state.size.height - verticalOffset;\n  state.anchorOffset = { x: horizontalOffset, y: verticalOffset };\n  state.position = constrainToViewport(state, { x, y }, viewport, edgeMargin);\n  return state.position;\n}\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(min, value), max);\n}\n\n// src/lib/persistence.ts\nfunction loadInspectorState(storageKey) {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n  const raw = window.localStorage.getItem(storageKey);\n  if (raw) {\n    try {\n      const parsed = JSON.parse(raw);\n      if (parsed && typeof parsed === \"object\") {\n        return parsed;\n      }\n    } catch {\n    }\n  }\n  if (typeof document !== \"undefined\") {\n    const prefix = `${storageKey}=`;\n    const entry = document.cookie.split(\"; \").find((cookie) => cookie.startsWith(prefix));\n    if (entry) {\n      const legacyRaw = entry.substring(prefix.length);\n      try {\n        const parsed = JSON.parse(decodeURIComponent(legacyRaw));\n        if (parsed && typeof parsed === \"object\") {\n          return parsed;\n        }\n      } catch {\n        return null;\n      }\n    }\n  }\n  return null;\n}\nfunction saveInspectorState(storageKey, state) {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n  try {\n    window.localStorage.setItem(storageKey, JSON.stringify(state));\n  } catch (error) {\n    console.warn(\"Failed to persist inspector state\", error);\n  }\n}\nfunction isValidAnchor(value) {\n  if (!value || typeof value !== \"object\") {\n    return false;\n  }\n  const candidate = value;\n  return (candidate.horizontal === \"left\" || candidate.horizontal === \"right\") && (candidate.vertical === \"top\" || candidate.vertical === \"bottom\");\n}\nfunction isValidPosition(value) {\n  if (!value || typeof value !== \"object\") {\n    return false;\n  }\n  const candidate = value;\n  return isFiniteNumber(candidate.x) && isFiniteNumber(candidate.y);\n}\nfunction isValidSize(value) {\n  if (!value || typeof value !== \"object\") {\n    return false;\n  }\n  const candidate = value;\n  return isFiniteNumber(candidate.width) && isFiniteNumber(candidate.height);\n}\nfunction isFiniteNumber(value) {\n  return typeof value === \"number\" && Number.isFinite(value);\n}\nfunction isValidDockMode(value) {\n  return value === \"floating\" || value === \"docked-left\";\n}\n\n// src/index.ts\nvar WEB_INSPECTOR_TAG = \"cpk-web-inspector\";\nvar EDGE_MARGIN = 16;\nvar DRAG_THRESHOLD = 6;\nvar MIN_WINDOW_WIDTH = 600;\nvar MIN_WINDOW_WIDTH_DOCKED_LEFT = 420;\nvar MIN_WINDOW_HEIGHT = 200;\nvar INSPECTOR_STORAGE_KEY = \"cpk:inspector:state\";\nvar ANNOUNCEMENT_STORAGE_KEY = \"cpk:inspector:announcements\";\nvar ANNOUNCEMENT_URL = \"https://cdn.copilotkit.ai/announcements.json\";\nvar DEFAULT_BUTTON_SIZE = { width: 48, height: 48 };\nvar DEFAULT_WINDOW_SIZE = { width: 840, height: 560 };\nvar DOCKED_LEFT_WIDTH = 500;\nvar MAX_AGENT_EVENTS = 200;\nvar MAX_TOTAL_EVENTS = 500;\nvar AGENT_EVENT_TYPES = [\n  \"RUN_STARTED\",\n  \"RUN_FINISHED\",\n  \"RUN_ERROR\",\n  \"TEXT_MESSAGE_START\",\n  \"TEXT_MESSAGE_CONTENT\",\n  \"TEXT_MESSAGE_END\",\n  \"TOOL_CALL_START\",\n  \"TOOL_CALL_ARGS\",\n  \"TOOL_CALL_END\",\n  \"TOOL_CALL_RESULT\",\n  \"STATE_SNAPSHOT\",\n  \"STATE_DELTA\",\n  \"MESSAGES_SNAPSHOT\",\n  \"RAW_EVENT\",\n  \"CUSTOM_EVENT\"\n];\nvar WebInspectorElement = class extends lit__WEBPACK_IMPORTED_MODULE_0__.LitElement {\n  constructor() {\n    super(...arguments);\n    this._core = null;\n    this.coreSubscriber = null;\n    this.coreUnsubscribe = null;\n    this.runtimeStatus = null;\n    this.coreProperties = {};\n    this.lastCoreError = null;\n    this.agentSubscriptions = /* @__PURE__ */ new Map();\n    this.agentEvents = /* @__PURE__ */ new Map();\n    this.agentMessages = /* @__PURE__ */ new Map();\n    this.agentStates = /* @__PURE__ */ new Map();\n    this.flattenedEvents = [];\n    this.eventCounter = 0;\n    this.contextStore = {};\n    this.pointerId = null;\n    this.dragStart = null;\n    this.dragOffset = { x: 0, y: 0 };\n    this.isDragging = false;\n    this.pointerContext = null;\n    this.isOpen = false;\n    this.draggedDuringInteraction = false;\n    this.ignoreNextButtonClick = false;\n    this.selectedMenu = \"ag-ui-events\";\n    this.contextMenuOpen = false;\n    this.dockMode = \"floating\";\n    this.previousBodyMargins = null;\n    this.transitionTimeoutId = null;\n    this.pendingSelectedContext = null;\n    this.autoAttachCore = true;\n    this.attemptedAutoAttach = false;\n    this.cachedTools = [];\n    this.toolSignature = \"\";\n    this.eventFilterText = \"\";\n    this.eventTypeFilter = \"all\";\n    this.announcementMarkdown = null;\n    this.announcementHtml = null;\n    this.announcementTimestamp = null;\n    this.announcementPreviewText = null;\n    this.hasUnseenAnnouncement = false;\n    this.announcementLoaded = false;\n    this.announcementLoadError = null;\n    this.announcementPromise = null;\n    this.showAnnouncementPreview = true;\n    this.contextState = {\n      button: {\n        position: { x: EDGE_MARGIN, y: EDGE_MARGIN },\n        size: { ...DEFAULT_BUTTON_SIZE },\n        anchor: { horizontal: \"right\", vertical: \"top\" },\n        anchorOffset: { x: EDGE_MARGIN, y: EDGE_MARGIN }\n      },\n      window: {\n        position: { x: EDGE_MARGIN, y: EDGE_MARGIN },\n        size: { ...DEFAULT_WINDOW_SIZE },\n        anchor: { horizontal: \"right\", vertical: \"top\" },\n        anchorOffset: { x: EDGE_MARGIN, y: EDGE_MARGIN }\n      }\n    };\n    this.hasCustomPosition = {\n      button: false,\n      window: false\n    };\n    this.resizePointerId = null;\n    this.resizeStart = null;\n    this.resizeInitialSize = null;\n    this.isResizing = false;\n    this.menuItems = [\n      { key: \"ag-ui-events\", label: \"AG-UI Events\", icon: \"Zap\" },\n      { key: \"agents\", label: \"Agent\", icon: \"Bot\" },\n      { key: \"frontend-tools\", label: \"Frontend Tools\", icon: \"Hammer\" },\n      { key: \"agent-context\", label: \"Context\", icon: \"FileText\" }\n    ];\n    this.handlePointerDown = (event) => {\n      if (this.dockMode !== \"floating\" && this.isOpen) {\n        return;\n      }\n      const target = event.currentTarget;\n      const contextAttr = target?.dataset.dragContext;\n      const context = contextAttr === \"window\" ? \"window\" : \"button\";\n      const eventTarget = event.target;\n      if (context === \"window\" && eventTarget?.closest(\"button\")) {\n        return;\n      }\n      this.pointerContext = context;\n      this.measureContext(context);\n      event.preventDefault();\n      this.pointerId = event.pointerId;\n      this.dragStart = { x: event.clientX, y: event.clientY };\n      const state = this.contextState[context];\n      this.dragOffset = {\n        x: event.clientX - state.position.x,\n        y: event.clientY - state.position.y\n      };\n      this.isDragging = false;\n      this.draggedDuringInteraction = false;\n      this.ignoreNextButtonClick = false;\n      target?.setPointerCapture?.(this.pointerId);\n    };\n    this.handlePointerMove = (event) => {\n      if (this.pointerId !== event.pointerId || !this.dragStart || !this.pointerContext) {\n        return;\n      }\n      const distance = Math.hypot(event.clientX - this.dragStart.x, event.clientY - this.dragStart.y);\n      if (!this.isDragging && distance < DRAG_THRESHOLD) {\n        return;\n      }\n      event.preventDefault();\n      this.setDragging(true);\n      this.draggedDuringInteraction = true;\n      const desired = {\n        x: event.clientX - this.dragOffset.x,\n        y: event.clientY - this.dragOffset.y\n      };\n      const constrained = this.constrainToViewport(desired, this.pointerContext);\n      this.contextState[this.pointerContext].position = constrained;\n      this.updateHostTransform(this.pointerContext);\n    };\n    this.handlePointerUp = (event) => {\n      if (this.pointerId !== event.pointerId) {\n        return;\n      }\n      const target = event.currentTarget;\n      if (target?.hasPointerCapture(this.pointerId)) {\n        target.releasePointerCapture(this.pointerId);\n      }\n      const context = this.pointerContext ?? this.activeContext;\n      if (this.isDragging && this.pointerContext) {\n        event.preventDefault();\n        this.setDragging(false);\n        if (this.pointerContext === \"window\") {\n          this.updateAnchorFromPosition(this.pointerContext);\n          this.hasCustomPosition.window = true;\n          this.applyAnchorPosition(this.pointerContext);\n        } else if (this.pointerContext === \"button\") {\n          this.snapButtonToCorner();\n          this.hasCustomPosition.button = true;\n          if (this.draggedDuringInteraction) {\n            this.ignoreNextButtonClick = true;\n          }\n        }\n      } else if (context === \"button\" && !this.isOpen && !this.draggedDuringInteraction) {\n        this.openInspector();\n      }\n      this.resetPointerTracking();\n    };\n    this.handlePointerCancel = (event) => {\n      if (this.pointerId !== event.pointerId) {\n        return;\n      }\n      const target = event.currentTarget;\n      if (target?.hasPointerCapture(this.pointerId)) {\n        target.releasePointerCapture(this.pointerId);\n      }\n      this.resetPointerTracking();\n    };\n    this.handleButtonClick = (event) => {\n      if (this.isDragging) {\n        event.preventDefault();\n        return;\n      }\n      if (this.ignoreNextButtonClick) {\n        event.preventDefault();\n        this.ignoreNextButtonClick = false;\n        return;\n      }\n      if (!this.isOpen) {\n        event.preventDefault();\n        this.openInspector();\n      }\n    };\n    this.handleClosePointerDown = (event) => {\n      event.stopPropagation();\n      event.preventDefault();\n    };\n    this.handleCloseClick = () => {\n      this.closeInspector();\n    };\n    this.handleResizePointerDown = (event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      this.hasCustomPosition.window = true;\n      this.isResizing = true;\n      this.resizePointerId = event.pointerId;\n      this.resizeStart = { x: event.clientX, y: event.clientY };\n      this.resizeInitialSize = { ...this.contextState.window.size };\n      if (document.body && this.dockMode !== \"floating\") {\n        document.body.style.transition = \"\";\n      }\n      const target = event.currentTarget;\n      target?.setPointerCapture?.(event.pointerId);\n    };\n    this.handleResizePointerMove = (event) => {\n      if (!this.isResizing || this.resizePointerId !== event.pointerId || !this.resizeStart || !this.resizeInitialSize) {\n        return;\n      }\n      event.preventDefault();\n      const deltaX = event.clientX - this.resizeStart.x;\n      const deltaY = event.clientY - this.resizeStart.y;\n      const state = this.contextState.window;\n      if (this.dockMode === \"docked-left\") {\n        state.size = this.clampWindowSize({\n          width: this.resizeInitialSize.width + deltaX,\n          height: state.size.height\n        });\n        if (document.body) {\n          document.body.style.marginLeft = `${state.size.width}px`;\n        }\n      } else {\n        state.size = this.clampWindowSize({\n          width: this.resizeInitialSize.width + deltaX,\n          height: this.resizeInitialSize.height + deltaY\n        });\n        this.keepPositionWithinViewport(\"window\");\n        this.updateAnchorFromPosition(\"window\");\n      }\n      this.requestUpdate();\n      this.updateHostTransform(\"window\");\n    };\n    this.handleResizePointerUp = (event) => {\n      if (this.resizePointerId !== event.pointerId) {\n        return;\n      }\n      const target = event.currentTarget;\n      if (target?.hasPointerCapture(this.resizePointerId)) {\n        target.releasePointerCapture(this.resizePointerId);\n      }\n      if (this.dockMode === \"floating\") {\n        this.updateAnchorFromPosition(\"window\");\n        this.applyAnchorPosition(\"window\");\n      }\n      this.persistState();\n      this.resetResizeTracking();\n    };\n    this.handleResizePointerCancel = (event) => {\n      if (this.resizePointerId !== event.pointerId) {\n        return;\n      }\n      const target = event.currentTarget;\n      if (target?.hasPointerCapture(this.resizePointerId)) {\n        target.releasePointerCapture(this.resizePointerId);\n      }\n      if (this.dockMode === \"floating\") {\n        this.updateAnchorFromPosition(\"window\");\n        this.applyAnchorPosition(\"window\");\n      }\n      this.persistState();\n      this.resetResizeTracking();\n    };\n    this.handleResize = () => {\n      this.measureContext(\"button\");\n      this.applyAnchorPosition(\"button\");\n      this.measureContext(\"window\");\n      if (this.hasCustomPosition.window) {\n        this.applyAnchorPosition(\"window\");\n      } else {\n        this.centerContext(\"window\");\n      }\n      this.updateHostTransform();\n    };\n    this.contextOptions = [\n      { key: \"all-agents\", label: \"All Agents\" }\n    ];\n    this.selectedContext = \"all-agents\";\n    this.expandedRows = /* @__PURE__ */ new Set();\n    this.copiedEvents = /* @__PURE__ */ new Set();\n    this.expandedTools = /* @__PURE__ */ new Set();\n    this.expandedContextItems = /* @__PURE__ */ new Set();\n    this.copiedContextItems = /* @__PURE__ */ new Set();\n    this.handleClearEvents = () => {\n      if (this.selectedContext === \"all-agents\") {\n        this.agentEvents.clear();\n        this.flattenedEvents = [];\n      } else {\n        this.agentEvents.delete(this.selectedContext);\n        this.flattenedEvents = this.flattenedEvents.filter((event) => event.agentId !== this.selectedContext);\n      }\n      this.expandedRows.clear();\n      this.copiedEvents.clear();\n      this.requestUpdate();\n    };\n    this.handleGlobalPointerDown = (event) => {\n      if (!this.contextMenuOpen) {\n        return;\n      }\n      const clickedDropdown = event.composedPath().some((node) => {\n        return node instanceof HTMLElement && node.dataset?.contextDropdownRoot === \"true\";\n      });\n      if (!clickedDropdown) {\n        this.contextMenuOpen = false;\n        this.requestUpdate();\n      }\n    };\n    this.handleDismissAnnouncement = () => {\n      this.markAnnouncementSeen();\n    };\n  }\n  static {\n    this.properties = {\n      core: { attribute: false },\n      autoAttachCore: { type: Boolean, attribute: \"auto-attach-core\" }\n    };\n  }\n  get core() {\n    return this._core;\n  }\n  set core(value) {\n    const oldValue = this._core;\n    if (oldValue === value) {\n      return;\n    }\n    this.detachFromCore();\n    this._core = value ?? null;\n    this.requestUpdate(\"core\", oldValue);\n    if (this._core) {\n      this.attachToCore(this._core);\n    }\n  }\n  attachToCore(core) {\n    this.runtimeStatus = core.runtimeConnectionStatus;\n    this.coreProperties = core.properties;\n    this.lastCoreError = null;\n    this.coreSubscriber = {\n      onRuntimeConnectionStatusChanged: ({ status }) => {\n        this.runtimeStatus = status;\n        this.requestUpdate();\n      },\n      onPropertiesChanged: ({ properties }) => {\n        this.coreProperties = properties;\n        this.requestUpdate();\n      },\n      onError: ({ code, error }) => {\n        this.lastCoreError = { code, message: error.message };\n        this.requestUpdate();\n      },\n      onAgentsChanged: ({ agents }) => {\n        this.processAgentsChanged(agents);\n      },\n      onContextChanged: ({ context }) => {\n        this.contextStore = this.normalizeContextStore(context);\n        this.requestUpdate();\n      }\n    };\n    this.coreUnsubscribe = core.subscribe(this.coreSubscriber).unsubscribe;\n    this.processAgentsChanged(core.agents);\n    if (core.context) {\n      this.contextStore = this.normalizeContextStore(core.context);\n    }\n  }\n  detachFromCore() {\n    if (this.coreUnsubscribe) {\n      this.coreUnsubscribe();\n      this.coreUnsubscribe = null;\n    }\n    this.coreSubscriber = null;\n    this.runtimeStatus = null;\n    this.lastCoreError = null;\n    this.coreProperties = {};\n    this.cachedTools = [];\n    this.toolSignature = \"\";\n    this.teardownAgentSubscriptions();\n  }\n  teardownAgentSubscriptions() {\n    for (const unsubscribe of this.agentSubscriptions.values()) {\n      unsubscribe();\n    }\n    this.agentSubscriptions.clear();\n    this.agentEvents.clear();\n    this.agentMessages.clear();\n    this.agentStates.clear();\n    this.flattenedEvents = [];\n    this.eventCounter = 0;\n  }\n  processAgentsChanged(agents) {\n    const seenAgentIds = /* @__PURE__ */ new Set();\n    for (const agent of Object.values(agents)) {\n      if (!agent?.agentId) {\n        continue;\n      }\n      seenAgentIds.add(agent.agentId);\n      this.subscribeToAgent(agent);\n    }\n    for (const agentId of Array.from(this.agentSubscriptions.keys())) {\n      if (!seenAgentIds.has(agentId)) {\n        this.unsubscribeFromAgent(agentId);\n        this.agentEvents.delete(agentId);\n        this.agentMessages.delete(agentId);\n        this.agentStates.delete(agentId);\n      }\n    }\n    this.updateContextOptions(seenAgentIds);\n    this.refreshToolsSnapshot();\n    this.requestUpdate();\n  }\n  refreshToolsSnapshot() {\n    if (!this._core) {\n      if (this.cachedTools.length > 0) {\n        this.cachedTools = [];\n        this.toolSignature = \"\";\n        this.requestUpdate();\n      }\n      return;\n    }\n    const tools = this.extractToolsFromAgents();\n    const signature = JSON.stringify(\n      tools.map((tool) => ({\n        agentId: tool.agentId,\n        name: tool.name,\n        type: tool.type,\n        hasDescription: Boolean(tool.description),\n        hasParameters: Boolean(tool.parameters)\n      }))\n    );\n    if (signature !== this.toolSignature) {\n      this.toolSignature = signature;\n      this.cachedTools = tools;\n      this.requestUpdate();\n    }\n  }\n  tryAutoAttachCore() {\n    if (this.attemptedAutoAttach || this._core || !this.autoAttachCore || typeof window === \"undefined\") {\n      return;\n    }\n    this.attemptedAutoAttach = true;\n    const globalWindow = window;\n    const globalCandidates = [\n      // Common app-level globals used during development\n      globalWindow.__COPILOTKIT_CORE__,\n      globalWindow.copilotkit?.core,\n      globalWindow.copilotkitCore\n    ];\n    const foundCore = globalCandidates.find(\n      (candidate) => !!candidate && typeof candidate === \"object\"\n    );\n    if (foundCore) {\n      this.core = foundCore;\n    }\n  }\n  subscribeToAgent(agent) {\n    if (!agent.agentId) {\n      return;\n    }\n    const agentId = agent.agentId;\n    this.unsubscribeFromAgent(agentId);\n    const subscriber = {\n      onRunStartedEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"RUN_STARTED\", event);\n      },\n      onRunFinishedEvent: ({ event, result }) => {\n        this.recordAgentEvent(agentId, \"RUN_FINISHED\", { event, result });\n      },\n      onRunErrorEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"RUN_ERROR\", event);\n      },\n      onTextMessageStartEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"TEXT_MESSAGE_START\", event);\n      },\n      onTextMessageContentEvent: ({ event, textMessageBuffer }) => {\n        this.recordAgentEvent(agentId, \"TEXT_MESSAGE_CONTENT\", { event, textMessageBuffer });\n      },\n      onTextMessageEndEvent: ({ event, textMessageBuffer }) => {\n        this.recordAgentEvent(agentId, \"TEXT_MESSAGE_END\", { event, textMessageBuffer });\n      },\n      onToolCallStartEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_START\", event);\n      },\n      onToolCallArgsEvent: ({ event, toolCallBuffer, toolCallName, partialToolCallArgs }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_ARGS\", { event, toolCallBuffer, toolCallName, partialToolCallArgs });\n      },\n      onToolCallEndEvent: ({ event, toolCallArgs, toolCallName }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_END\", { event, toolCallArgs, toolCallName });\n      },\n      onToolCallResultEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_RESULT\", event);\n      },\n      onStateSnapshotEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"STATE_SNAPSHOT\", event);\n        this.syncAgentState(agent);\n      },\n      onStateDeltaEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"STATE_DELTA\", event);\n        this.syncAgentState(agent);\n      },\n      onMessagesSnapshotEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"MESSAGES_SNAPSHOT\", event);\n        this.syncAgentMessages(agent);\n      },\n      onMessagesChanged: () => {\n        this.syncAgentMessages(agent);\n      },\n      onRawEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"RAW_EVENT\", event);\n      },\n      onCustomEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"CUSTOM_EVENT\", event);\n      }\n    };\n    const { unsubscribe } = agent.subscribe(subscriber);\n    this.agentSubscriptions.set(agentId, unsubscribe);\n    this.syncAgentMessages(agent);\n    this.syncAgentState(agent);\n    if (!this.agentEvents.has(agentId)) {\n      this.agentEvents.set(agentId, []);\n    }\n  }\n  unsubscribeFromAgent(agentId) {\n    const unsubscribe = this.agentSubscriptions.get(agentId);\n    if (unsubscribe) {\n      unsubscribe();\n      this.agentSubscriptions.delete(agentId);\n    }\n  }\n  recordAgentEvent(agentId, type, payload) {\n    const eventId = `${agentId}:${++this.eventCounter}`;\n    const normalizedPayload = this.normalizeEventPayload(type, payload);\n    const event = {\n      id: eventId,\n      agentId,\n      type,\n      timestamp: Date.now(),\n      payload: normalizedPayload\n    };\n    const currentAgentEvents = this.agentEvents.get(agentId) ?? [];\n    const nextAgentEvents = [event, ...currentAgentEvents].slice(0, MAX_AGENT_EVENTS);\n    this.agentEvents.set(agentId, nextAgentEvents);\n    this.flattenedEvents = [event, ...this.flattenedEvents].slice(0, MAX_TOTAL_EVENTS);\n    this.refreshToolsSnapshot();\n    this.requestUpdate();\n  }\n  syncAgentMessages(agent) {\n    if (!agent?.agentId) {\n      return;\n    }\n    const messages = this.normalizeAgentMessages(agent.messages);\n    if (messages) {\n      this.agentMessages.set(agent.agentId, messages);\n    } else {\n      this.agentMessages.delete(agent.agentId);\n    }\n    this.requestUpdate();\n  }\n  syncAgentState(agent) {\n    if (!agent?.agentId) {\n      return;\n    }\n    const state = agent.state;\n    if (state === void 0 || state === null) {\n      this.agentStates.delete(agent.agentId);\n    } else {\n      this.agentStates.set(agent.agentId, this.sanitizeForLogging(state));\n    }\n    this.requestUpdate();\n  }\n  updateContextOptions(agentIds) {\n    const nextOptions = [\n      { key: \"all-agents\", label: \"All Agents\" },\n      ...Array.from(agentIds).sort((a, b) => a.localeCompare(b)).map((id) => ({ key: id, label: id }))\n    ];\n    const optionsChanged = this.contextOptions.length !== nextOptions.length || this.contextOptions.some((option, index) => option.key !== nextOptions[index]?.key);\n    if (optionsChanged) {\n      this.contextOptions = nextOptions;\n    }\n    const pendingContext = this.pendingSelectedContext;\n    if (pendingContext) {\n      const isPendingAvailable = pendingContext === \"all-agents\" || agentIds.has(pendingContext);\n      if (isPendingAvailable) {\n        if (this.selectedContext !== pendingContext) {\n          this.selectedContext = pendingContext;\n          this.expandedRows.clear();\n        }\n        this.pendingSelectedContext = null;\n      } else if (agentIds.size > 0) {\n        this.pendingSelectedContext = null;\n      }\n    }\n    const hasSelectedContext = nextOptions.some((option) => option.key === this.selectedContext);\n    if (!hasSelectedContext && this.pendingSelectedContext === null) {\n      let nextSelected = \"all-agents\";\n      if (agentIds.has(\"default\")) {\n        nextSelected = \"default\";\n      } else if (agentIds.size > 0) {\n        nextSelected = Array.from(agentIds).sort((a, b) => a.localeCompare(b))[0];\n      }\n      if (this.selectedContext !== nextSelected) {\n        this.selectedContext = nextSelected;\n        this.expandedRows.clear();\n        this.persistState();\n      }\n    }\n  }\n  getEventsForSelectedContext() {\n    if (this.selectedContext === \"all-agents\") {\n      return this.flattenedEvents;\n    }\n    return this.agentEvents.get(this.selectedContext) ?? [];\n  }\n  filterEvents(events) {\n    const query = this.eventFilterText.trim().toLowerCase();\n    return events.filter((event) => {\n      if (this.eventTypeFilter !== \"all\" && event.type !== this.eventTypeFilter) {\n        return false;\n      }\n      if (!query) {\n        return true;\n      }\n      const payloadText = this.stringifyPayload(event.payload, false).toLowerCase();\n      return event.type.toLowerCase().includes(query) || event.agentId.toLowerCase().includes(query) || payloadText.includes(query);\n    });\n  }\n  getLatestStateForAgent(agentId) {\n    if (this.agentStates.has(agentId)) {\n      const value = this.agentStates.get(agentId);\n      return value === void 0 ? null : value;\n    }\n    const events = this.agentEvents.get(agentId) ?? [];\n    const stateEvent = events.find((e) => e.type === \"STATE_SNAPSHOT\");\n    if (!stateEvent) {\n      return null;\n    }\n    return stateEvent.payload;\n  }\n  getLatestMessagesForAgent(agentId) {\n    const messages = this.agentMessages.get(agentId);\n    return messages ?? null;\n  }\n  getAgentStatus(agentId) {\n    const events = this.agentEvents.get(agentId) ?? [];\n    if (events.length === 0) {\n      return \"idle\";\n    }\n    const runEvent = events.find((e) => e.type === \"RUN_STARTED\" || e.type === \"RUN_FINISHED\" || e.type === \"RUN_ERROR\");\n    if (!runEvent) {\n      return \"idle\";\n    }\n    if (runEvent.type === \"RUN_ERROR\") {\n      return \"error\";\n    }\n    if (runEvent.type === \"RUN_STARTED\") {\n      const finishedAfter = events.find(\n        (e) => e.type === \"RUN_FINISHED\" && e.timestamp > runEvent.timestamp\n      );\n      return finishedAfter ? \"idle\" : \"running\";\n    }\n    return \"idle\";\n  }\n  getAgentStats(agentId) {\n    const events = this.agentEvents.get(agentId) ?? [];\n    const messages = this.agentMessages.get(agentId);\n    const toolCallCount = messages ? messages.reduce((count, message) => count + (message.toolCalls?.length ?? 0), 0) : events.filter((e) => e.type === \"TOOL_CALL_END\").length;\n    const messageCount = messages?.length ?? 0;\n    return {\n      totalEvents: events.length,\n      lastActivity: events[0]?.timestamp ?? null,\n      messages: messageCount,\n      toolCalls: toolCallCount,\n      errors: events.filter((e) => e.type === \"RUN_ERROR\").length\n    };\n  }\n  renderToolCallDetails(toolCalls) {\n    if (!Array.isArray(toolCalls) || toolCalls.length === 0) {\n      return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    }\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"mt-2 space-y-2\">\n        ${toolCalls.map((call, index) => {\n      const functionName = call.function?.name ?? call.toolName ?? \"Unknown function\";\n      const callId = typeof call?.id === \"string\" ? call.id : `tool-call-${index + 1}`;\n      const argsString = this.formatToolCallArguments(call.function?.arguments);\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n            <div class=\"rounded-md border border-gray-200 bg-gray-50 p-3 text-xs text-gray-700\">\n              <div class=\"flex flex-wrap items-center justify-between gap-1 font-medium text-gray-900\">\n                <span>${functionName}</span>\n                <span class=\"text-[10px] text-gray-500\">ID: ${callId}</span>\n              </div>\n              ${argsString ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<pre class=\"mt-2 overflow-auto rounded bg-white p-2 text-[11px] leading-relaxed text-gray-800\">${argsString}</pre>` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n            </div>\n          `;\n    })}\n      </div>\n    `;\n  }\n  formatToolCallArguments(args) {\n    if (args === void 0 || args === null || args === \"\") {\n      return null;\n    }\n    if (typeof args === \"string\") {\n      try {\n        const parsed = JSON.parse(args);\n        return JSON.stringify(parsed, null, 2);\n      } catch {\n        return args;\n      }\n    }\n    if (typeof args === \"object\") {\n      try {\n        return JSON.stringify(args, null, 2);\n      } catch {\n        return String(args);\n      }\n    }\n    return String(args);\n  }\n  hasRenderableState(state) {\n    if (state === null || state === void 0) {\n      return false;\n    }\n    if (Array.isArray(state)) {\n      return state.length > 0;\n    }\n    if (typeof state === \"object\") {\n      return Object.keys(state).length > 0;\n    }\n    if (typeof state === \"string\") {\n      const trimmed = state.trim();\n      return trimmed.length > 0 && trimmed !== \"{}\";\n    }\n    return true;\n  }\n  formatStateForDisplay(state) {\n    if (state === null || state === void 0) {\n      return \"\";\n    }\n    if (typeof state === \"string\") {\n      const trimmed = state.trim();\n      if (trimmed.length === 0) {\n        return \"\";\n      }\n      try {\n        const parsed = JSON.parse(trimmed);\n        return JSON.stringify(parsed, null, 2);\n      } catch {\n        return state;\n      }\n    }\n    if (typeof state === \"object\") {\n      try {\n        return JSON.stringify(state, null, 2);\n      } catch {\n        return String(state);\n      }\n    }\n    return String(state);\n  }\n  getEventBadgeClasses(type) {\n    const base = \"font-mono text-[10px] font-medium inline-flex items-center rounded-sm px-1.5 py-0.5 border\";\n    if (type.startsWith(\"RUN_\")) {\n      return `${base} bg-blue-50 text-blue-700 border-blue-200`;\n    }\n    if (type.startsWith(\"TEXT_MESSAGE\")) {\n      return `${base} bg-emerald-50 text-emerald-700 border-emerald-200`;\n    }\n    if (type.startsWith(\"TOOL_CALL\")) {\n      return `${base} bg-amber-50 text-amber-700 border-amber-200`;\n    }\n    if (type.startsWith(\"STATE\")) {\n      return `${base} bg-violet-50 text-violet-700 border-violet-200`;\n    }\n    if (type.startsWith(\"MESSAGES\")) {\n      return `${base} bg-sky-50 text-sky-700 border-sky-200`;\n    }\n    if (type === \"RUN_ERROR\") {\n      return `${base} bg-rose-50 text-rose-700 border-rose-200`;\n    }\n    return `${base} bg-gray-100 text-gray-600 border-gray-200`;\n  }\n  stringifyPayload(payload, pretty) {\n    try {\n      if (payload === void 0) {\n        return pretty ? \"undefined\" : \"undefined\";\n      }\n      if (typeof payload === \"string\") {\n        return payload;\n      }\n      return JSON.stringify(payload, null, pretty ? 2 : 0) ?? \"\";\n    } catch (error) {\n      console.warn(\"Failed to stringify inspector payload\", error);\n      return String(payload);\n    }\n  }\n  extractEventFromPayload(payload) {\n    if (payload && typeof payload === \"object\" && \"event\" in payload) {\n      return payload.event;\n    }\n    return payload;\n  }\n  async copyToClipboard(text, eventId) {\n    try {\n      await navigator.clipboard.writeText(text);\n      this.copiedEvents.add(eventId);\n      this.requestUpdate();\n      setTimeout(() => {\n        this.copiedEvents.delete(eventId);\n        this.requestUpdate();\n      }, 2e3);\n    } catch (err) {\n      console.error(\"Failed to copy to clipboard:\", err);\n    }\n  }\n  static {\n    this.styles = [\n      (0,lit__WEBPACK_IMPORTED_MODULE_0__.unsafeCSS)(generated_default),\n      (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)`\n      :host {\n        position: fixed;\n        top: 0;\n        left: 0;\n        z-index: 2147483646;\n        display: block;\n        will-change: transform;\n      }\n\n      :host([data-transitioning=\"true\"]) {\n        transition: transform 300ms ease;\n      }\n\n      .console-button {\n        transition:\n          transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1),\n          opacity 160ms ease;\n      }\n\n      .console-button[data-dragging=\"true\"] {\n        transition: opacity 160ms ease;\n      }\n\n      .inspector-window[data-transitioning=\"true\"] {\n        transition: width 300ms ease, height 300ms ease;\n      }\n\n      .inspector-window[data-docked=\"true\"] {\n        border-radius: 0 !important;\n        box-shadow: none !important;\n      }\n\n      .resize-handle {\n        touch-action: none;\n        user-select: none;\n      }\n\n      .dock-resize-handle {\n        position: absolute;\n        top: 0;\n        right: 0;\n        width: 10px;\n        height: 100%;\n        cursor: ew-resize;\n        touch-action: none;\n        z-index: 50;\n        background: transparent;\n      }\n\n      .tooltip-target {\n        position: relative;\n      }\n\n      .tooltip-target::after {\n        content: attr(data-tooltip);\n        position: absolute;\n        top: calc(100% + 6px);\n        left: 50%;\n        transform: translateX(-50%) translateY(-4px);\n        white-space: nowrap;\n        background: rgba(17, 24, 39, 0.95);\n        color: white;\n        padding: 4px 8px;\n        border-radius: 6px;\n        font-size: 10px;\n        line-height: 1.2;\n        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);\n        opacity: 0;\n        pointer-events: none;\n        transition: opacity 120ms ease, transform 120ms ease;\n        z-index: 4000;\n      }\n\n      .tooltip-target:hover::after {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n      }\n\n      .announcement-preview {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        min-width: 300px;\n        max-width: 300px;\n        background: white;\n        color: #111827;\n        font-size: 13px;\n        line-height: 1.4;\n        border-radius: 12px;\n        box-shadow: 0 12px 28px rgba(15, 23, 42, 0.22);\n        padding: 10px 12px;\n        display: inline-flex;\n        align-items: flex-start;\n        gap: 8px;\n        z-index: 4500;\n        animation: fade-slide-in 160ms ease;\n        border: 1px solid rgba(148, 163, 184, 0.35);\n        white-space: normal;\n        word-break: break-word;\n        text-align: left;\n      }\n\n      .announcement-preview[data-side=\"left\"] {\n        right: 100%;\n        margin-right: 10px;\n      }\n\n      .announcement-preview[data-side=\"right\"] {\n        left: 100%;\n        margin-left: 10px;\n      }\n\n      .announcement-preview__arrow {\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        background: white;\n        border: 1px solid rgba(148, 163, 184, 0.35);\n        transform: rotate(45deg);\n        top: 50%;\n        margin-top: -5px;\n        z-index: -1;\n      }\n\n      .announcement-preview[data-side=\"left\"] .announcement-preview__arrow {\n        right: -5px;\n        box-shadow: 6px -6px 10px rgba(15, 23, 42, 0.12);\n      }\n\n      .announcement-preview[data-side=\"right\"] .announcement-preview__arrow {\n        left: -5px;\n        box-shadow: -6px 6px 10px rgba(15, 23, 42, 0.12);\n      }\n\n      .announcement-dismiss {\n        color: #6b7280;\n        font-size: 12px;\n        padding: 2px 8px;\n        border-radius: 8px;\n        border: 1px solid rgba(148, 163, 184, 0.5);\n        background: rgba(248, 250, 252, 0.9);\n        transition: background 120ms ease, color 120ms ease;\n      }\n\n      .announcement-dismiss:hover {\n        background: rgba(241, 245, 249, 1);\n        color: #111827;\n      }\n\n      .announcement-content {\n        color: #111827;\n        font-size: 14px;\n        line-height: 1.6;\n      }\n\n      .announcement-content h1,\n      .announcement-content h2,\n      .announcement-content h3 {\n        font-weight: 700;\n        margin: 0.4rem 0 0.2rem;\n      }\n\n      .announcement-content h1 {\n        font-size: 1.1rem;\n      }\n\n      .announcement-content h2 {\n        font-size: 1rem;\n      }\n\n      .announcement-content h3 {\n        font-size: 0.95rem;\n      }\n\n      .announcement-content p {\n        margin: 0.25rem 0;\n      }\n\n      .announcement-content ul {\n        list-style: disc;\n        padding-left: 1.25rem;\n        margin: 0.3rem 0;\n      }\n\n      .announcement-content ol {\n        list-style: decimal;\n        padding-left: 1.25rem;\n        margin: 0.3rem 0;\n      }\n\n      .announcement-content a {\n        color: #0f766e;\n        text-decoration: underline;\n      }\n    `\n    ];\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    if (typeof window !== \"undefined\") {\n      window.addEventListener(\"resize\", this.handleResize);\n      window.addEventListener(\"pointerdown\", this.handleGlobalPointerDown);\n      this.hydrateStateFromStorageEarly();\n      this.tryAutoAttachCore();\n      this.ensureAnnouncementLoading();\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (typeof window !== \"undefined\") {\n      window.removeEventListener(\"resize\", this.handleResize);\n      window.removeEventListener(\"pointerdown\", this.handleGlobalPointerDown);\n    }\n    this.removeDockStyles();\n    this.detachFromCore();\n  }\n  firstUpdated() {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    if (!this._core) {\n      this.tryAutoAttachCore();\n    }\n    this.measureContext(\"button\");\n    this.measureContext(\"window\");\n    this.contextState.button.anchor = { horizontal: \"right\", vertical: \"top\" };\n    this.contextState.button.anchorOffset = { x: EDGE_MARGIN, y: EDGE_MARGIN };\n    this.contextState.window.anchor = { horizontal: \"right\", vertical: \"top\" };\n    this.contextState.window.anchorOffset = { x: EDGE_MARGIN, y: EDGE_MARGIN };\n    this.hydrateStateFromStorage();\n    if (this.isOpen && this.dockMode !== \"floating\") {\n      this.applyDockStyles(true);\n    }\n    this.applyAnchorPosition(\"button\");\n    if (this.dockMode === \"floating\") {\n      if (this.hasCustomPosition.window) {\n        this.applyAnchorPosition(\"window\");\n      } else {\n        this.centerContext(\"window\");\n      }\n    }\n    this.ensureAnnouncementLoading();\n    this.updateHostTransform(this.isOpen ? \"window\" : \"button\");\n  }\n  render() {\n    return this.isOpen ? this.renderWindow() : this.renderButton();\n  }\n  renderButton() {\n    const buttonClasses = [\n      \"console-button\",\n      \"group\",\n      \"relative\",\n      \"pointer-events-auto\",\n      \"inline-flex\",\n      \"h-12\",\n      \"w-12\",\n      \"items-center\",\n      \"justify-center\",\n      \"rounded-full\",\n      \"border\",\n      \"border-white/20\",\n      \"bg-slate-950/95\",\n      \"text-xs\",\n      \"font-medium\",\n      \"text-white\",\n      \"ring-1\",\n      \"ring-white/10\",\n      \"backdrop-blur-md\",\n      \"transition\",\n      \"hover:border-white/30\",\n      \"hover:bg-slate-900/95\",\n      \"hover:scale-105\",\n      \"focus-visible:outline\",\n      \"focus-visible:outline-2\",\n      \"focus-visible:outline-offset-2\",\n      \"focus-visible:outline-rose-500\",\n      \"touch-none\",\n      \"select-none\",\n      this.isDragging ? \"cursor-grabbing\" : \"cursor-grab\"\n    ].join(\" \");\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <button\n        class=${buttonClasses}\n        type=\"button\"\n        aria-label=\"Web Inspector\"\n        data-drag-context=\"button\"\n        data-dragging=${this.isDragging && this.pointerContext === \"button\" ? \"true\" : \"false\"}\n        @pointerdown=${this.handlePointerDown}\n        @pointermove=${this.handlePointerMove}\n        @pointerup=${this.handlePointerUp}\n        @pointercancel=${this.handlePointerCancel}\n        @click=${this.handleButtonClick}\n      >\n        ${this.renderAnnouncementPreview()}\n        <img src=${inspector_logo_icon_default} alt=\"Inspector logo\" class=\"h-5 w-auto\" loading=\"lazy\" />\n      </button>\n    `;\n  }\n  renderWindow() {\n    const windowState = this.contextState.window;\n    const isDocked = this.dockMode !== \"floating\";\n    const isTransitioning = this.hasAttribute(\"data-transitioning\");\n    const windowStyles = isDocked ? this.getDockedWindowStyles() : {\n      width: `${Math.round(windowState.size.width)}px`,\n      height: `${Math.round(windowState.size.height)}px`,\n      minWidth: `${MIN_WINDOW_WIDTH}px`,\n      minHeight: `${MIN_WINDOW_HEIGHT}px`\n    };\n    const hasContextDropdown = this.contextOptions.length > 0;\n    const contextDropdown = hasContextDropdown ? this.renderContextDropdown() : lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    const coreStatus = this.getCoreStatusSummary();\n    const agentSelector = hasContextDropdown ? contextDropdown : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n          <div class=\"flex items-center gap-2 rounded-md border border-dashed border-gray-200 px-2 py-1 text-xs text-gray-400\">\n            <span>${this.renderIcon(\"Bot\")}</span>\n            <span class=\"truncate\">No agents available</span>\n          </div>\n        `;\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <section\n        class=\"inspector-window pointer-events-auto relative flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg\"\n        style=${(0,lit_directives_style_map_js__WEBPACK_IMPORTED_MODULE_1__.styleMap)(windowStyles)}\n        data-docked=${isDocked}\n        data-transitioning=${isTransitioning}\n      >\n        ${isDocked ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n              <div\n                class=\"dock-resize-handle pointer-events-auto\"\n                role=\"presentation\"\n                aria-hidden=\"true\"\n                @pointerdown=${this.handleResizePointerDown}\n                @pointermove=${this.handleResizePointerMove}\n                @pointerup=${this.handleResizePointerUp}\n                @pointercancel=${this.handleResizePointerCancel}\n              ></div>\n            ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n        <div class=\"flex flex-1 flex-col overflow-hidden bg-white text-gray-800\">\n          <div\n            class=\"drag-handle relative z-30 flex flex-col border-b border-gray-200 bg-white/95 backdrop-blur-sm ${isDocked ? \"\" : this.isDragging && this.pointerContext === \"window\" ? \"cursor-grabbing\" : \"cursor-grab\"}\"\n            data-drag-context=\"window\"\n            @pointerdown=${isDocked ? void 0 : this.handlePointerDown}\n            @pointermove=${isDocked ? void 0 : this.handlePointerMove}\n            @pointerup=${isDocked ? void 0 : this.handlePointerUp}\n            @pointercancel=${isDocked ? void 0 : this.handlePointerCancel}\n          >\n            <div class=\"flex flex-wrap items-center gap-3 px-4 py-3\">\n              <div class=\"flex items-center min-w-0\">\n                <img src=${inspector_logo_default} alt=\"Inspector logo\" class=\"h-6 w-auto\" loading=\"lazy\" />\n              </div>\n              <div class=\"ml-auto flex min-w-0 items-center gap-2\">\n                <div class=\"min-w-[160px] max-w-xs\">\n                  ${agentSelector}\n                </div>\n                <div class=\"flex items-center gap-1\">\n                  ${this.renderDockControls()}\n                  <button\n                    class=\"flex h-8 w-8 items-center justify-center rounded-md text-gray-400 transition hover:bg-gray-100 hover:text-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400\"\n                    type=\"button\"\n                    aria-label=\"Close Web Inspector\"\n                    @pointerdown=${this.handleClosePointerDown}\n                    @click=${this.handleCloseClick}\n                  >\n                    ${this.renderIcon(\"X\")}\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"flex flex-wrap items-center gap-2 border-t border-gray-100 px-3 py-2 text-xs\">\n              ${this.menuItems.map(({ key, label, icon }) => {\n      const isSelected = this.selectedMenu === key;\n      const tabClasses = [\n        \"inline-flex items-center gap-2 rounded-md px-3 py-2 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-300\",\n        isSelected ? \"bg-gray-900 text-white shadow-sm\" : \"text-gray-600 hover:bg-gray-100 hover:text-gray-900\"\n      ].join(\" \");\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                  <button\n                    type=\"button\"\n                    class=${tabClasses}\n                    aria-pressed=${isSelected}\n                    @click=${() => this.handleMenuSelect(key)}\n                  >\n                    <span class=\"text-gray-400 ${isSelected ? \"text-white\" : \"\"}\">\n                      ${this.renderIcon(icon)}\n                    </span>\n                    <span>${label}</span>\n                  </button>\n                `;\n    })}\n            </div>\n          </div>\n            <div class=\"flex flex-1 flex-col overflow-hidden\">\n              <div class=\"flex-1 overflow-auto\">\n                ${this.renderAnnouncementPanel()}\n                ${this.renderCoreWarningBanner()}\n                ${this.renderMainContent()}\n                <slot></slot>\n              </div>\n              <div class=\"border-t border-gray-200 bg-gray-50 px-4 py-2\">\n                <div\n                  class=\"flex items-center gap-2 rounded-md px-3 py-2 text-xs ${coreStatus.tone} w-full overflow-hidden my-1\"\n                  title=${coreStatus.description}\n                >\n                  <span class=\"flex h-6 w-6 items-center justify-center rounded bg-white/60\">\n                    ${this.renderIcon(\"Activity\")}\n                  </span>\n                  <span class=\"font-medium\">${coreStatus.label}</span>\n                  <span class=\"truncate text-[11px] opacity-80\">${coreStatus.description}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        <div\n          class=\"resize-handle pointer-events-auto absolute bottom-1 right-1 flex h-5 w-5 cursor-nwse-resize items-center justify-center text-gray-400 transition hover:text-gray-600\"\n          role=\"presentation\"\n          aria-hidden=\"true\"\n          @pointerdown=${this.handleResizePointerDown}\n          @pointermove=${this.handleResizePointerMove}\n          @pointerup=${this.handleResizePointerUp}\n          @pointercancel=${this.handleResizePointerCancel}\n        >\n          <svg\n            class=\"h-3 w-3\"\n            viewBox=\"0 0 16 16\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-linecap=\"round\"\n            stroke-width=\"1.5\"\n          >\n            <path d=\"M5 15L15 5\" />\n            <path d=\"M9 15L15 9\" />\n          </svg>\n        </div>\n      </section>\n    `;\n  }\n  hydrateStateFromStorageEarly() {\n    if (typeof document === \"undefined\" || typeof window === \"undefined\") {\n      return;\n    }\n    const persisted = loadInspectorState(INSPECTOR_STORAGE_KEY);\n    if (!persisted) {\n      return;\n    }\n    if (typeof persisted.isOpen === \"boolean\") {\n      this.isOpen = persisted.isOpen;\n    }\n    if (isValidDockMode(persisted.dockMode)) {\n      this.dockMode = persisted.dockMode;\n    }\n    if (typeof persisted.selectedMenu === \"string\") {\n      const validMenu = this.menuItems.find((item) => item.key === persisted.selectedMenu);\n      if (validMenu) {\n        this.selectedMenu = validMenu.key;\n      }\n    }\n    if (typeof persisted.selectedContext === \"string\") {\n      this.selectedContext = persisted.selectedContext;\n      this.pendingSelectedContext = persisted.selectedContext;\n    }\n  }\n  hydrateStateFromStorage() {\n    if (typeof document === \"undefined\" || typeof window === \"undefined\") {\n      return;\n    }\n    const persisted = loadInspectorState(INSPECTOR_STORAGE_KEY);\n    if (!persisted) {\n      return;\n    }\n    const persistedButton = persisted.button;\n    if (persistedButton) {\n      if (isValidAnchor(persistedButton.anchor)) {\n        this.contextState.button.anchor = persistedButton.anchor;\n      }\n      if (isValidPosition(persistedButton.anchorOffset)) {\n        this.contextState.button.anchorOffset = persistedButton.anchorOffset;\n      }\n      if (typeof persistedButton.hasCustomPosition === \"boolean\") {\n        this.hasCustomPosition.button = persistedButton.hasCustomPosition;\n      }\n    }\n    const persistedWindow = persisted.window;\n    if (persistedWindow) {\n      if (isValidAnchor(persistedWindow.anchor)) {\n        this.contextState.window.anchor = persistedWindow.anchor;\n      }\n      if (isValidPosition(persistedWindow.anchorOffset)) {\n        this.contextState.window.anchorOffset = persistedWindow.anchorOffset;\n      }\n      if (isValidSize(persistedWindow.size)) {\n        this.contextState.window.size = this.clampWindowSize(persistedWindow.size);\n      }\n      if (typeof persistedWindow.hasCustomPosition === \"boolean\") {\n        this.hasCustomPosition.window = persistedWindow.hasCustomPosition;\n      }\n    }\n    if (typeof persisted.selectedContext === \"string\") {\n      this.selectedContext = persisted.selectedContext;\n      this.pendingSelectedContext = persisted.selectedContext;\n    }\n  }\n  get activeContext() {\n    return this.isOpen ? \"window\" : \"button\";\n  }\n  measureContext(context) {\n    const selector = context === \"window\" ? \".inspector-window\" : \".console-button\";\n    const element = this.renderRoot?.querySelector(selector);\n    if (!element) {\n      return;\n    }\n    const fallback = context === \"window\" ? DEFAULT_WINDOW_SIZE : DEFAULT_BUTTON_SIZE;\n    updateSizeFromElement(this.contextState[context], element, fallback);\n  }\n  centerContext(context) {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const viewport = this.getViewportSize();\n    centerContext(this.contextState[context], viewport, EDGE_MARGIN);\n    if (context === this.activeContext) {\n      this.updateHostTransform(context);\n    }\n    this.hasCustomPosition[context] = false;\n    this.persistState();\n  }\n  ensureWindowPlacement() {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    if (!this.hasCustomPosition.window) {\n      this.centerContext(\"window\");\n      return;\n    }\n    const viewport = this.getViewportSize();\n    keepPositionWithinViewport(this.contextState.window, viewport, EDGE_MARGIN);\n    updateAnchorFromPosition(this.contextState.window, viewport, EDGE_MARGIN);\n    this.updateHostTransform(\"window\");\n    this.persistState();\n  }\n  constrainToViewport(position, context) {\n    if (typeof window === \"undefined\") {\n      return position;\n    }\n    const viewport = this.getViewportSize();\n    return constrainToViewport(this.contextState[context], position, viewport, EDGE_MARGIN);\n  }\n  keepPositionWithinViewport(context) {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const viewport = this.getViewportSize();\n    keepPositionWithinViewport(this.contextState[context], viewport, EDGE_MARGIN);\n  }\n  getViewportSize() {\n    if (typeof window === \"undefined\") {\n      return { ...DEFAULT_WINDOW_SIZE };\n    }\n    return { width: window.innerWidth, height: window.innerHeight };\n  }\n  persistState() {\n    const state = {\n      button: {\n        anchor: this.contextState.button.anchor,\n        anchorOffset: this.contextState.button.anchorOffset,\n        hasCustomPosition: this.hasCustomPosition.button\n      },\n      window: {\n        anchor: this.contextState.window.anchor,\n        anchorOffset: this.contextState.window.anchorOffset,\n        size: {\n          width: Math.round(this.contextState.window.size.width),\n          height: Math.round(this.contextState.window.size.height)\n        },\n        hasCustomPosition: this.hasCustomPosition.window\n      },\n      isOpen: this.isOpen,\n      dockMode: this.dockMode,\n      selectedMenu: this.selectedMenu,\n      selectedContext: this.selectedContext\n    };\n    saveInspectorState(INSPECTOR_STORAGE_KEY, state);\n    this.pendingSelectedContext = state.selectedContext ?? null;\n  }\n  clampWindowSize(size) {\n    const minWidth = this.dockMode === \"docked-left\" ? MIN_WINDOW_WIDTH_DOCKED_LEFT : MIN_WINDOW_WIDTH;\n    if (typeof window === \"undefined\") {\n      return {\n        width: Math.max(minWidth, size.width),\n        height: Math.max(MIN_WINDOW_HEIGHT, size.height)\n      };\n    }\n    const viewport = this.getViewportSize();\n    return clampSize(size, viewport, EDGE_MARGIN, minWidth, MIN_WINDOW_HEIGHT);\n  }\n  setDockMode(mode) {\n    if (this.dockMode === mode) {\n      return;\n    }\n    this.startHostTransition();\n    this.removeDockStyles();\n    this.dockMode = mode;\n    if (mode !== \"floating\") {\n      if (mode === \"docked-left\") {\n        this.contextState.window.size.width = DOCKED_LEFT_WIDTH;\n      }\n      this.applyDockStyles();\n    } else {\n      this.contextState.window.size = { ...DEFAULT_WINDOW_SIZE };\n      this.centerContext(\"window\");\n    }\n    this.persistState();\n    this.requestUpdate();\n    this.updateHostTransform(\"window\");\n  }\n  startHostTransition(duration = 300) {\n    this.setAttribute(\"data-transitioning\", \"true\");\n    if (this.transitionTimeoutId !== null) {\n      clearTimeout(this.transitionTimeoutId);\n    }\n    this.transitionTimeoutId = setTimeout(() => {\n      this.removeAttribute(\"data-transitioning\");\n      this.transitionTimeoutId = null;\n    }, duration);\n  }\n  applyDockStyles(skipTransition = false) {\n    if (typeof document === \"undefined\" || !document.body) {\n      return;\n    }\n    const computedStyle = window.getComputedStyle(document.body);\n    this.previousBodyMargins = {\n      left: computedStyle.marginLeft,\n      bottom: computedStyle.marginBottom\n    };\n    if (!this.isResizing && !skipTransition) {\n      document.body.style.transition = \"margin 300ms ease\";\n    }\n    if (this.dockMode === \"docked-left\") {\n      document.body.style.marginLeft = `${this.contextState.window.size.width}px`;\n    }\n    if (!this.isResizing && !skipTransition) {\n      setTimeout(() => {\n        if (document.body) {\n          document.body.style.transition = \"\";\n        }\n      }, 300);\n    }\n  }\n  removeDockStyles() {\n    if (typeof document === \"undefined\" || !document.body) {\n      return;\n    }\n    if (!this.isResizing) {\n      document.body.style.transition = \"margin 300ms ease\";\n    }\n    if (this.previousBodyMargins) {\n      document.body.style.marginLeft = this.previousBodyMargins.left;\n      document.body.style.marginBottom = this.previousBodyMargins.bottom;\n      this.previousBodyMargins = null;\n    } else {\n      document.body.style.marginLeft = \"\";\n      document.body.style.marginBottom = \"\";\n    }\n    setTimeout(() => {\n      if (document.body) {\n        document.body.style.transition = \"\";\n      }\n    }, 300);\n  }\n  updateHostTransform(context = this.activeContext) {\n    if (context !== this.activeContext) {\n      return;\n    }\n    if (this.isOpen && this.dockMode === \"docked-left\") {\n      this.style.transform = `translate3d(0, 0, 0)`;\n    } else {\n      const { position } = this.contextState[context];\n      this.style.transform = `translate3d(${position.x}px, ${position.y}px, 0)`;\n    }\n  }\n  setDragging(value) {\n    if (this.isDragging !== value) {\n      this.isDragging = value;\n      this.requestUpdate();\n    }\n  }\n  updateAnchorFromPosition(context) {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const viewport = this.getViewportSize();\n    updateAnchorFromPosition(this.contextState[context], viewport, EDGE_MARGIN);\n  }\n  snapButtonToCorner() {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const viewport = this.getViewportSize();\n    const state = this.contextState.button;\n    const centerX = state.position.x + state.size.width / 2;\n    const centerY = state.position.y + state.size.height / 2;\n    const horizontal = centerX < viewport.width / 2 ? \"left\" : \"right\";\n    const vertical = centerY < viewport.height / 2 ? \"top\" : \"bottom\";\n    state.anchor = { horizontal, vertical };\n    state.anchorOffset = { x: EDGE_MARGIN, y: EDGE_MARGIN };\n    this.startHostTransition();\n    this.applyAnchorPosition(\"button\");\n  }\n  applyAnchorPosition(context) {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const viewport = this.getViewportSize();\n    applyAnchorPosition(this.contextState[context], viewport, EDGE_MARGIN);\n    this.updateHostTransform(context);\n    this.persistState();\n  }\n  resetResizeTracking() {\n    this.resizePointerId = null;\n    this.resizeStart = null;\n    this.resizeInitialSize = null;\n    this.isResizing = false;\n  }\n  resetPointerTracking() {\n    this.pointerId = null;\n    this.dragStart = null;\n    this.pointerContext = null;\n    this.setDragging(false);\n    this.draggedDuringInteraction = false;\n  }\n  openInspector() {\n    if (this.isOpen) {\n      return;\n    }\n    this.showAnnouncementPreview = false;\n    this.ensureAnnouncementLoading();\n    this.isOpen = true;\n    this.persistState();\n    if (this.dockMode !== \"floating\") {\n      this.applyDockStyles();\n    }\n    this.ensureWindowPlacement();\n    this.requestUpdate();\n    void this.updateComplete.then(() => {\n      this.measureContext(\"window\");\n      if (this.dockMode === \"floating\") {\n        if (this.hasCustomPosition.window) {\n          this.applyAnchorPosition(\"window\");\n        } else {\n          this.centerContext(\"window\");\n        }\n      } else {\n        this.updateHostTransform(\"window\");\n      }\n    });\n  }\n  closeInspector() {\n    if (!this.isOpen) {\n      return;\n    }\n    this.isOpen = false;\n    if (this.dockMode !== \"floating\") {\n      this.removeDockStyles();\n    }\n    this.persistState();\n    this.updateHostTransform(\"button\");\n    this.requestUpdate();\n    void this.updateComplete.then(() => {\n      this.measureContext(\"button\");\n      this.applyAnchorPosition(\"button\");\n    });\n  }\n  renderIcon(name) {\n    const iconNode = lucide__WEBPACK_IMPORTED_MODULE_5__[name];\n    if (!iconNode) {\n      return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    }\n    const svgAttrs = {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      \"stroke-width\": \"1.5\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      class: \"h-3.5 w-3.5\"\n    };\n    const svgMarkup = `<svg ${this.serializeAttributes(svgAttrs)}>${iconNode.map(([tag, attrs]) => `<${tag} ${this.serializeAttributes(attrs)} />`).join(\"\")}</svg>`;\n    return (0,lit_directives_unsafe_html_js__WEBPACK_IMPORTED_MODULE_2__.unsafeHTML)(svgMarkup);\n  }\n  renderDockControls() {\n    if (this.dockMode === \"floating\") {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <button\n          class=\"flex h-8 w-8 items-center justify-center rounded-md text-gray-400 transition hover:bg-gray-100 hover:text-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400\"\n          type=\"button\"\n          aria-label=\"Dock to left\"\n          title=\"Dock Left\"\n          @click=${() => this.handleDockClick(\"docked-left\")}\n        >\n          ${this.renderIcon(\"PanelLeft\")}\n        </button>\n      `;\n    } else {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <button\n          class=\"flex h-8 w-8 items-center justify-center rounded-md text-gray-400 transition hover:bg-gray-100 hover:text-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400\"\n          type=\"button\"\n          aria-label=\"Float window\"\n          title=\"Float\"\n          @click=${() => this.handleDockClick(\"floating\")}\n        >\n          ${this.renderIcon(\"Maximize2\")}\n        </button>\n      `;\n    }\n  }\n  getDockedWindowStyles() {\n    if (this.dockMode === \"docked-left\") {\n      return {\n        position: \"fixed\",\n        top: \"0\",\n        left: \"0\",\n        bottom: \"0\",\n        width: `${Math.round(this.contextState.window.size.width)}px`,\n        height: \"100vh\",\n        minWidth: `${MIN_WINDOW_WIDTH_DOCKED_LEFT}px`,\n        borderRadius: \"0\"\n      };\n    }\n    return {\n      width: `${Math.round(this.contextState.window.size.width)}px`,\n      height: `${Math.round(this.contextState.window.size.height)}px`,\n      minWidth: `${MIN_WINDOW_WIDTH}px`,\n      minHeight: `${MIN_WINDOW_HEIGHT}px`\n    };\n  }\n  handleDockClick(mode) {\n    this.setDockMode(mode);\n  }\n  serializeAttributes(attributes) {\n    return Object.entries(attributes).filter(([key, value]) => key !== \"key\" && value !== void 0 && value !== null && value !== \"\").map(([key, value]) => `${key}=\"${String(value).replace(/\"/g, \"&quot;\")}\"`).join(\" \");\n  }\n  sanitizeForLogging(value, depth = 0, seen = /* @__PURE__ */ new WeakSet()) {\n    if (value === void 0) {\n      return \"[undefined]\";\n    }\n    if (value === null || typeof value === \"number\" || typeof value === \"boolean\") {\n      return value;\n    }\n    if (typeof value === \"string\") {\n      return value;\n    }\n    if (typeof value === \"bigint\" || typeof value === \"symbol\" || typeof value === \"function\") {\n      return String(value);\n    }\n    if (value instanceof Date) {\n      return value.toISOString();\n    }\n    if (Array.isArray(value)) {\n      if (depth >= 4) {\n        return \"[Truncated depth]\";\n      }\n      return value.map((item) => this.sanitizeForLogging(item, depth + 1, seen));\n    }\n    if (typeof value === \"object\") {\n      if (seen.has(value)) {\n        return \"[Circular]\";\n      }\n      seen.add(value);\n      if (depth >= 4) {\n        return \"[Truncated depth]\";\n      }\n      const result = {};\n      for (const [key, entry] of Object.entries(value)) {\n        result[key] = this.sanitizeForLogging(entry, depth + 1, seen);\n      }\n      return result;\n    }\n    return String(value);\n  }\n  normalizeEventPayload(_type, payload) {\n    if (payload && typeof payload === \"object\" && \"event\" in payload) {\n      const { event, ...rest } = payload;\n      const cleaned = Object.keys(rest).length === 0 ? event : { event, ...rest };\n      return this.sanitizeForLogging(cleaned);\n    }\n    return this.sanitizeForLogging(payload);\n  }\n  normalizeMessageContent(content) {\n    if (typeof content === \"string\") {\n      return content;\n    }\n    if (content && typeof content === \"object\" && \"text\" in content) {\n      const maybeText = content.text;\n      if (typeof maybeText === \"string\") {\n        return maybeText;\n      }\n    }\n    if (content === null || content === void 0) {\n      return \"\";\n    }\n    if (typeof content === \"object\") {\n      try {\n        return JSON.stringify(this.sanitizeForLogging(content));\n      } catch {\n        return \"\";\n      }\n    }\n    return String(content);\n  }\n  normalizeToolCalls(raw) {\n    if (!Array.isArray(raw)) {\n      return [];\n    }\n    return raw.map((entry) => {\n      if (!entry || typeof entry !== \"object\") {\n        return null;\n      }\n      const call = entry;\n      const fn = call.function;\n      const functionName = typeof fn?.name === \"string\" ? fn.name : typeof call.toolName === \"string\" ? call.toolName : void 0;\n      const args = fn && \"arguments\" in fn ? fn.arguments : call.arguments;\n      const normalized = {\n        id: typeof call.id === \"string\" ? call.id : void 0,\n        toolName: typeof call.toolName === \"string\" ? call.toolName : functionName,\n        status: typeof call.status === \"string\" ? call.status : void 0\n      };\n      if (functionName) {\n        normalized.function = {\n          name: functionName,\n          arguments: this.sanitizeForLogging(args)\n        };\n      }\n      return normalized;\n    }).filter((call) => Boolean(call));\n  }\n  normalizeAgentMessage(message) {\n    if (!message || typeof message !== \"object\") {\n      return null;\n    }\n    const raw = message;\n    const role = typeof raw.role === \"string\" ? raw.role : \"unknown\";\n    const contentText = this.normalizeMessageContent(raw.content);\n    const toolCalls = this.normalizeToolCalls(raw.toolCalls);\n    return {\n      id: typeof raw.id === \"string\" ? raw.id : void 0,\n      role,\n      contentText,\n      contentRaw: raw.content !== void 0 ? this.sanitizeForLogging(raw.content) : void 0,\n      toolCalls\n    };\n  }\n  normalizeAgentMessages(messages) {\n    if (!Array.isArray(messages)) {\n      return null;\n    }\n    const normalized = messages.map((message) => this.normalizeAgentMessage(message)).filter((msg) => msg !== null);\n    return normalized;\n  }\n  normalizeContextStore(context) {\n    if (!context || typeof context !== \"object\") {\n      return {};\n    }\n    const normalized = {};\n    for (const [key, entry] of Object.entries(context)) {\n      if (entry && typeof entry === \"object\" && \"value\" in entry) {\n        const candidate = entry;\n        const description = typeof candidate.description === \"string\" && candidate.description.trim().length > 0 ? candidate.description : void 0;\n        normalized[key] = { description, value: candidate.value };\n      } else {\n        normalized[key] = { value: entry };\n      }\n    }\n    return normalized;\n  }\n  getSelectedMenu() {\n    const found = this.menuItems.find((item) => item.key === this.selectedMenu);\n    return found ?? this.menuItems[0];\n  }\n  renderCoreWarningBanner() {\n    if (this._core) {\n      return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    }\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"mx-4 my-3 flex items-start gap-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800\">\n        <span class=\"mt-0.5 shrink-0 text-amber-600\">${this.renderIcon(\"AlertTriangle\")}</span>\n        <div class=\"space-y-1\">\n          <div class=\"font-semibold text-amber-900\">CopilotKit core not attached</div>\n          <p class=\"text-[11px] leading-snug text-amber-800\">\n            Pass a live <code>CopilotKitCore</code> instance to <code>&lt;cpk-web-inspector&gt;</code> or expose it on\n            <code>window.__COPILOTKIT_CORE__</code> for auto-attach.\n          </p>\n        </div>\n      </div>\n    `;\n  }\n  getCoreStatusSummary() {\n    if (!this._core) {\n      return {\n        label: \"Core not attached\",\n        tone: \"border border-amber-200 bg-amber-50 text-amber-800\",\n        description: \"Pass a CopilotKitCore instance to <cpk-web-inspector> or enable auto-attach.\"\n      };\n    }\n    const status = this.runtimeStatus ?? _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_4__.CopilotKitCoreRuntimeConnectionStatus.Disconnected;\n    const lastErrorMessage = this.lastCoreError?.message;\n    if (status === _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_4__.CopilotKitCoreRuntimeConnectionStatus.Error) {\n      return {\n        label: \"Runtime error\",\n        tone: \"border border-rose-200 bg-rose-50 text-rose-700\",\n        description: lastErrorMessage ?? \"CopilotKit runtime reported an error.\"\n      };\n    }\n    if (status === _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_4__.CopilotKitCoreRuntimeConnectionStatus.Connecting) {\n      return {\n        label: \"Connecting\",\n        tone: \"border border-amber-200 bg-amber-50 text-amber-800\",\n        description: \"Waiting for CopilotKit runtime to finish connecting.\"\n      };\n    }\n    if (status === _copilotkitnext_core__WEBPACK_IMPORTED_MODULE_4__.CopilotKitCoreRuntimeConnectionStatus.Connected) {\n      return {\n        label: \"Connected\",\n        tone: \"border border-emerald-200 bg-emerald-50 text-emerald-700\",\n        description: \"Live runtime connection established.\"\n      };\n    }\n    return {\n      label: \"Disconnected\",\n      tone: \"border border-gray-200 bg-gray-50 text-gray-700\",\n      description: lastErrorMessage ?? \"Waiting for CopilotKit runtime to connect.\"\n    };\n  }\n  renderMainContent() {\n    if (this.selectedMenu === \"ag-ui-events\") {\n      return this.renderEventsTable();\n    }\n    if (this.selectedMenu === \"agents\") {\n      return this.renderAgentsView();\n    }\n    if (this.selectedMenu === \"frontend-tools\") {\n      return this.renderToolsView();\n    }\n    if (this.selectedMenu === \"agent-context\") {\n      return this.renderContextView();\n    }\n    return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n  }\n  renderEventsTable() {\n    const events = this.getEventsForSelectedContext();\n    const filteredEvents = this.filterEvents(events);\n    const selectedLabel = this.selectedContext === \"all-agents\" ? \"all agents\" : `agent ${this.selectedContext}`;\n    if (events.length === 0) {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Zap\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No events yet</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Trigger an agent run to see live activity.</p>\n          </div>\n        </div>\n      `;\n    }\n    if (filteredEvents.length === 0) {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md space-y-3\">\n            <div class=\"flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Filter\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No events match the current filters.</p>\n            <div>\n              <button\n                type=\"button\"\n                class=\"inline-flex items-center gap-1 rounded-md bg-gray-900 px-3 py-1.5 text-[11px] font-medium text-white transition hover:bg-gray-800\"\n                @click=${this.resetEventFilters}\n              >\n                ${this.renderIcon(\"RefreshCw\")}\n                <span>Reset filters</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      `;\n    }\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"flex h-full flex-col\">\n        <div class=\"flex flex-col gap-1.5 border-b border-gray-200 bg-white px-4 py-2.5\">\n          <div class=\"flex flex-wrap items-center gap-2\">\n            <div class=\"relative min-w-[200px] flex-1\">\n              <input\n                type=\"search\"\n                class=\"w-full rounded-md border border-gray-200 px-3 py-1.5 text-[11px] text-gray-700 shadow-sm outline-none ring-1 ring-transparent transition focus:border-gray-300 focus:ring-gray-200\"\n                placeholder=\"Search agent, type, payload\"\n                .value=${this.eventFilterText}\n                @input=${this.handleEventFilterInput}\n              />\n            </div>\n            <select\n              class=\"w-40 rounded-md border border-gray-200 bg-white px-2 py-1.5 text-[11px] text-gray-700 shadow-sm outline-none transition focus:border-gray-300 focus:ring-2 focus:ring-gray-200\"\n              .value=${this.eventTypeFilter}\n              @change=${this.handleEventTypeChange}\n            >\n              <option value=\"all\">All event types</option>\n              ${AGENT_EVENT_TYPES.map(\n      (type) => (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<option value=${type}>${type.toLowerCase().replace(/_/g, \" \")}</option>`\n    )}\n            </select>\n            <div class=\"flex items-center gap-1 text-[11px]\">\n              <button\n                type=\"button\"\n                class=\"tooltip-target flex h-8 w-8 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-600 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50\"\n                title=\"Reset filters\"\n                data-tooltip=\"Reset filters\"\n                aria-label=\"Reset filters\"\n                @click=${this.resetEventFilters}\n                ?disabled=${!this.eventFilterText && this.eventTypeFilter === \"all\"}\n              >\n                ${this.renderIcon(\"RotateCw\")}\n              </button>\n              <button\n                type=\"button\"\n                class=\"tooltip-target flex h-8 w-8 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-600 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50\"\n                title=\"Export JSON\"\n                data-tooltip=\"Export JSON\"\n                aria-label=\"Export JSON\"\n                @click=${() => this.exportEvents(filteredEvents)}\n                ?disabled=${filteredEvents.length === 0}\n              >\n                ${this.renderIcon(\"Download\")}\n              </button>\n              <button\n                type=\"button\"\n                class=\"tooltip-target flex h-8 w-8 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-600 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50\"\n                title=\"Clear events\"\n                data-tooltip=\"Clear events\"\n                aria-label=\"Clear events\"\n                @click=${this.handleClearEvents}\n                ?disabled=${events.length === 0}\n              >\n                ${this.renderIcon(\"Trash2\")}\n              </button>\n            </div>\n          </div>\n          <div class=\"text-[11px] text-gray-500\">\n            Showing ${filteredEvents.length} of ${events.length}${this.selectedContext === \"all-agents\" ? \"\" : ` for ${selectedLabel}`}\n          </div>\n        </div>\n        <div class=\"relative h-full w-full overflow-y-auto overflow-x-hidden\">\n          <table class=\"w-full table-fixed border-collapse text-xs box-border\">\n            <thead class=\"sticky top-0 z-10\">\n              <tr class=\"bg-white\">\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  Agent\n                </th>\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  Time\n                </th>\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  Event Type\n                </th>\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  AG-UI Event\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              ${filteredEvents.map((event, index) => {\n      const rowBg = index % 2 === 0 ? \"bg-white\" : \"bg-gray-50/50\";\n      const badgeClasses = this.getEventBadgeClasses(event.type);\n      const extractedEvent = this.extractEventFromPayload(event.payload);\n      const inlineEvent = this.stringifyPayload(extractedEvent, false) || \"\\u2014\";\n      const prettyEvent = this.stringifyPayload(extractedEvent, true) || inlineEvent;\n      const isExpanded = this.expandedRows.has(event.id);\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                  <tr\n                    class=\"${rowBg} cursor-pointer transition hover:bg-blue-50/50\"\n                    @click=${() => this.toggleRowExpansion(event.id)}\n                  >\n                    <td class=\"border-l border-r border-b border-gray-200 px-3 py-2\">\n                      <span class=\"font-mono text-[11px] text-gray-600\">${event.agentId}</span>\n                    </td>\n                    <td class=\"border-r border-b border-gray-200 px-3 py-2 font-mono text-[11px] text-gray-600\">\n                      <span title=${new Date(event.timestamp).toLocaleString()}>\n                        ${new Date(event.timestamp).toLocaleTimeString()}\n                      </span>\n                    </td>\n                    <td class=\"border-r border-b border-gray-200 px-3 py-2\">\n                      <span class=${badgeClasses}>${event.type}</span>\n                    </td>\n                    <td class=\"border-r border-b border-gray-200 px-3 py-2 font-mono text-[10px] text-gray-600 ${isExpanded ? \"\" : \"truncate max-w-xs\"}\">\n                      ${isExpanded ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                            <div class=\"group relative\">\n                              <pre class=\"m-0 whitespace-pre-wrap break-words text-[10px] font-mono text-gray-600\">${prettyEvent}</pre>\n                              <button\n                                class=\"absolute right-0 top-0 cursor-pointer rounded px-2 py-1 text-[10px] opacity-0 transition group-hover:opacity-100 ${this.copiedEvents.has(event.id) ? \"bg-green-100 text-green-700\" : \"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-900\"}\"\n                                @click=${(e) => {\n        e.stopPropagation();\n        this.copyToClipboard(prettyEvent, event.id);\n      }}\n                              >\n                                ${this.copiedEvents.has(event.id) ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<span> Copied</span>` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<span>Copy</span>`}\n                              </button>\n                            </div>\n                          ` : inlineEvent}\n                    </td>\n                  </tr>\n                `;\n    })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `;\n  }\n  handleEventFilterInput(event) {\n    const target = event.target;\n    this.eventFilterText = target?.value ?? \"\";\n    this.requestUpdate();\n  }\n  handleEventTypeChange(event) {\n    const target = event.target;\n    const value = target?.value;\n    if (!value) {\n      return;\n    }\n    this.eventTypeFilter = value;\n    this.requestUpdate();\n  }\n  resetEventFilters() {\n    this.eventFilterText = \"\";\n    this.eventTypeFilter = \"all\";\n    this.requestUpdate();\n  }\n  exportEvents(events) {\n    try {\n      const payload = JSON.stringify(events, null, 2);\n      const blob = new Blob([payload], { type: \"application/json\" });\n      const url = URL.createObjectURL(blob);\n      const anchor = document.createElement(\"a\");\n      anchor.href = url;\n      anchor.download = `copilotkit-events-${Date.now()}.json`;\n      anchor.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error(\"Failed to export events\", error);\n    }\n  }\n  renderAgentsView() {\n    if (this.selectedContext === \"all-agents\") {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Bot\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No agent selected</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Select an agent from the dropdown above to view details.</p>\n          </div>\n        </div>\n      `;\n    }\n    const agentId = this.selectedContext;\n    const status = this.getAgentStatus(agentId);\n    const stats = this.getAgentStats(agentId);\n    const state = this.getLatestStateForAgent(agentId);\n    const messages = this.getLatestMessagesForAgent(agentId);\n    const statusColors = {\n      running: \"bg-emerald-50 text-emerald-700\",\n      idle: \"bg-gray-100 text-gray-600\",\n      error: \"bg-rose-50 text-rose-700\"\n    };\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"flex flex-col gap-4 p-4 overflow-auto\">\n        <!-- Agent Overview Card -->\n        <div class=\"rounded-lg border border-gray-200 bg-white p-4\">\n          <div class=\"flex items-start justify-between mb-4\">\n            <div class=\"flex items-center gap-3\">\n              <div class=\"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100 text-blue-600\">\n                ${this.renderIcon(\"Bot\")}\n              </div>\n              <div>\n                <h3 class=\"font-semibold text-sm text-gray-900\">${agentId}</h3>\n                <span class=\"inline-flex items-center gap-1.5 rounded-full px-2 py-0.5 text-xs font-medium ${statusColors[status]} relative -translate-y-[2px]\">\n                  <span class=\"h-1.5 w-1.5 rounded-full ${status === \"running\" ? \"bg-emerald-500 animate-pulse\" : status === \"error\" ? \"bg-rose-500\" : \"bg-gray-400\"}\"></span>\n                  ${status.charAt(0).toUpperCase() + status.slice(1)}\n                </span>\n              </div>\n            </div>\n            ${stats.lastActivity ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<span class=\"text-xs text-gray-500\">Last activity: ${new Date(stats.lastActivity).toLocaleTimeString()}</span>` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n          </div>\n          <div class=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\n            <button\n              type=\"button\"\n              class=\"rounded-md bg-gray-50 px-3 py-2 text-left transition hover:bg-gray-100 cursor-pointer overflow-hidden\"\n              @click=${() => this.handleMenuSelect(\"ag-ui-events\")}\n              title=\"View all events in AG-UI Events\"\n            >\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Total Events</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.totalEvents}</div>\n            </button>\n            <div class=\"rounded-md bg-gray-50 px-3 py-2 overflow-hidden\">\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Messages</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.messages}</div>\n            </div>\n            <div class=\"rounded-md bg-gray-50 px-3 py-2 overflow-hidden\">\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Tool Calls</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.toolCalls}</div>\n            </div>\n            <div class=\"rounded-md bg-gray-50 px-3 py-2 overflow-hidden\">\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Errors</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.errors}</div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Current State Section -->\n        <div class=\"rounded-lg border border-gray-200 bg-white\">\n          <div class=\"border-b border-gray-200 px-4 py-3\">\n            <h4 class=\"text-sm font-semibold text-gray-900\">Current State</h4>\n          </div>\n          <div class=\"overflow-auto p-4\">\n            ${this.hasRenderableState(state) ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                  <pre class=\"overflow-auto rounded-md bg-gray-50 p-3 text-xs text-gray-800 max-h-64\"><code>${this.formatStateForDisplay(state)}</code></pre>\n                ` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                  <div class=\"flex h-40 items-center justify-center text-xs text-gray-500\">\n                    <div class=\"flex items-center gap-2 text-gray-500\">\n                      <span class=\"text-lg text-gray-400\">${this.renderIcon(\"Database\")}</span>\n                      <span>State is empty</span>\n                    </div>\n                  </div>\n                `}\n          </div>\n        </div>\n\n        <!-- Current Messages Section -->\n        <div class=\"rounded-lg border border-gray-200 bg-white\">\n          <div class=\"border-b border-gray-200 px-4 py-3\">\n            <h4 class=\"text-sm font-semibold text-gray-900\">Current Messages</h4>\n          </div>\n          <div class=\"overflow-auto\">\n            ${messages && messages.length > 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                  <table class=\"w-full text-xs\">\n                    <thead class=\"bg-gray-50\">\n                      <tr>\n                        <th class=\"px-4 py-2 text-left font-medium text-gray-700\">Role</th>\n                        <th class=\"px-4 py-2 text-left font-medium text-gray-700\">Content</th>\n                      </tr>\n                    </thead>\n                    <tbody class=\"divide-y divide-gray-200\">\n                      ${messages.map((msg) => {\n      const role = msg.role || \"unknown\";\n      const roleColors = {\n        user: \"bg-blue-100 text-blue-800\",\n        assistant: \"bg-green-100 text-green-800\",\n        system: \"bg-gray-100 text-gray-800\",\n        tool: \"bg-amber-100 text-amber-800\",\n        unknown: \"bg-gray-100 text-gray-600\"\n      };\n      const rawContent = msg.contentText ?? \"\";\n      const toolCalls = msg.toolCalls ?? [];\n      const hasContent = rawContent.trim().length > 0;\n      const contentFallback = toolCalls.length > 0 ? \"Invoked tool call\" : \"\\u2014\";\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                          <tr>\n                            <td class=\"px-4 py-2 align-top\">\n                              <span class=\"inline-flex rounded px-2 py-0.5 text-[10px] font-medium ${roleColors[role] || roleColors.unknown}\">\n                                ${role}\n                              </span>\n                            </td>\n                            <td class=\"px-4 py-2\">\n                              ${hasContent ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<div class=\"max-w-2xl whitespace-pre-wrap break-words text-gray-700\">${rawContent}</div>` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<div class=\"text-xs italic text-gray-400\">${contentFallback}</div>`}\n                              ${role === \"assistant\" && toolCalls.length > 0 ? this.renderToolCallDetails(toolCalls) : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n                            </td>\n                          </tr>\n                        `;\n    })}\n                    </tbody>\n                  </table>\n                ` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                  <div class=\"flex h-40 items-center justify-center text-xs text-gray-500\">\n                    <div class=\"flex items-center gap-2 text-gray-500\">\n                      <span class=\"text-lg text-gray-400\">${this.renderIcon(\"MessageSquare\")}</span>\n                      <span>No messages available</span>\n                    </div>\n                  </div>\n                `}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n  renderContextDropdown() {\n    const filteredOptions = this.selectedMenu === \"agents\" ? this.contextOptions.filter((opt) => opt.key !== \"all-agents\") : this.contextOptions;\n    const selectedLabel = filteredOptions.find((opt) => opt.key === this.selectedContext)?.label ?? \"\";\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"relative z-40 min-w-0 flex-1\" data-context-dropdown-root=\"true\">\n        <button\n          type=\"button\"\n          class=\"relative z-40 flex w-full min-w-0 max-w-[240px] items-center gap-1.5 rounded-md border border-gray-200 px-2 py-1 text-xs font-medium text-gray-700 transition hover:border-gray-300 hover:bg-gray-50\"\n          @pointerdown=${this.handleContextDropdownToggle}\n        >\n          <span class=\"truncate flex-1 text-left\">${selectedLabel}</span>\n          <span class=\"shrink-0 text-gray-400\">${this.renderIcon(\"ChevronDown\")}</span>\n        </button>\n        ${this.contextMenuOpen ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n              <div\n                class=\"absolute left-0 z-50 mt-1.5 w-40 rounded-md border border-gray-200 bg-white py-1 shadow-md ring-1 ring-black/5\"\n                data-context-dropdown-root=\"true\"\n              >\n                ${filteredOptions.map(\n      (option) => (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                    <button\n                      type=\"button\"\n                      class=\"flex w-full items-center justify-between px-3 py-1.5 text-left text-xs transition hover:bg-gray-50 focus:bg-gray-50 focus:outline-none\"\n                      data-context-dropdown-root=\"true\"\n                      @click=${() => this.handleContextOptionSelect(option.key)}\n                    >\n                      <span class=\"truncate ${option.key === this.selectedContext ? \"text-gray-900 font-medium\" : \"text-gray-600\"}\">${option.label}</span>\n                      ${option.key === this.selectedContext ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<span class=\"text-gray-500\">${this.renderIcon(\"Check\")}</span>` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n                    </button>\n                  `\n    )}\n              </div>\n            ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n      </div>\n    `;\n  }\n  handleMenuSelect(key) {\n    if (!this.menuItems.some((item) => item.key === key)) {\n      return;\n    }\n    this.selectedMenu = key;\n    if (key === \"agents\" && this.selectedContext === \"all-agents\") {\n      const agentOptions = this.contextOptions.filter((opt) => opt.key !== \"all-agents\");\n      if (agentOptions.length > 0) {\n        const defaultAgent = agentOptions.find((opt) => opt.key === \"default\");\n        this.selectedContext = defaultAgent ? defaultAgent.key : agentOptions[0].key;\n      }\n    }\n    this.contextMenuOpen = false;\n    this.persistState();\n    this.requestUpdate();\n  }\n  handleContextDropdownToggle(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.contextMenuOpen = !this.contextMenuOpen;\n    this.requestUpdate();\n  }\n  handleContextOptionSelect(key) {\n    if (!this.contextOptions.some((option) => option.key === key)) {\n      return;\n    }\n    if (this.selectedContext !== key) {\n      this.selectedContext = key;\n      this.expandedRows.clear();\n    }\n    this.contextMenuOpen = false;\n    this.persistState();\n    this.requestUpdate();\n  }\n  renderToolsView() {\n    if (!this._core) {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-xs text-gray-500\">\n          No core instance available\n        </div>\n      `;\n    }\n    this.refreshToolsSnapshot();\n    const allTools = this.cachedTools;\n    if (allTools.length === 0) {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Hammer\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No tools available</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Tools will appear here once agents are configured with tool handlers or renderers.</p>\n          </div>\n        </div>\n      `;\n    }\n    const filteredTools = this.selectedContext === \"all-agents\" ? allTools : allTools.filter((tool) => !tool.agentId || tool.agentId === this.selectedContext);\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"flex h-full flex-col overflow-hidden\">\n        <div class=\"overflow-auto p-4\">\n          <div class=\"space-y-3\">\n            ${filteredTools.map((tool) => this.renderToolCard(tool))}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n  extractToolsFromAgents() {\n    if (!this._core) {\n      return [];\n    }\n    const tools = [];\n    for (const coreTool of this._core.tools ?? []) {\n      tools.push({\n        agentId: coreTool.agentId ?? \"\",\n        name: coreTool.name,\n        description: coreTool.description,\n        parameters: coreTool.parameters,\n        type: \"handler\"\n      });\n    }\n    for (const [agentId, agent] of Object.entries(this._core.agents)) {\n      if (!agent) continue;\n      const handlers = agent.toolHandlers;\n      if (handlers && typeof handlers === \"object\") {\n        for (const [toolName, handler] of Object.entries(handlers)) {\n          if (handler && typeof handler === \"object\") {\n            const handlerObj = handler;\n            tools.push({\n              agentId,\n              name: toolName,\n              description: typeof handlerObj.description === \"string\" && handlerObj.description || handlerObj.tool?.description,\n              parameters: handlerObj.parameters ?? handlerObj.tool?.parameters,\n              type: \"handler\"\n            });\n          }\n        }\n      }\n      const renderers = agent.toolRenderers;\n      if (renderers && typeof renderers === \"object\") {\n        for (const [toolName, renderer] of Object.entries(renderers)) {\n          if (!tools.some((t) => t.agentId === agentId && t.name === toolName)) {\n            if (renderer && typeof renderer === \"object\") {\n              const rendererObj = renderer;\n              tools.push({\n                agentId,\n                name: toolName,\n                description: typeof rendererObj.description === \"string\" && rendererObj.description || rendererObj.tool?.description,\n                parameters: rendererObj.parameters ?? rendererObj.tool?.parameters,\n                type: \"renderer\"\n              });\n            }\n          }\n        }\n      }\n    }\n    return tools.sort((a, b) => {\n      const agentCompare = a.agentId.localeCompare(b.agentId);\n      if (agentCompare !== 0) return agentCompare;\n      return a.name.localeCompare(b.name);\n    });\n  }\n  renderToolCard(tool) {\n    const isExpanded = this.expandedTools.has(`${tool.agentId}:${tool.name}`);\n    const schema = this.extractSchemaInfo(tool.parameters);\n    const typeColors = {\n      handler: \"bg-blue-50 text-blue-700 border-blue-200\",\n      renderer: \"bg-purple-50 text-purple-700 border-purple-200\"\n    };\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"rounded-lg border border-gray-200 bg-white overflow-hidden\">\n        <button\n          type=\"button\"\n          class=\"w-full px-4 py-3 text-left transition hover:bg-gray-50\"\n          @click=${() => this.toggleToolExpansion(`${tool.agentId}:${tool.name}`)}\n        >\n          <div class=\"flex items-start justify-between gap-3\">\n            <div class=\"flex-1 min-w-0\">\n              <div class=\"flex items-center gap-2 mb-1\">\n                <span class=\"font-mono text-sm font-semibold text-gray-900\">${tool.name}</span>\n                <span class=\"inline-flex items-center rounded-sm border px-1.5 py-0.5 text-[10px] font-medium ${typeColors[tool.type]}\">\n                  ${tool.type}\n                </span>\n              </div>\n              <div class=\"flex items-center gap-2 text-xs text-gray-500\">\n                <span class=\"flex items-center gap-1\">\n                  ${this.renderIcon(\"Bot\")}\n                  <span class=\"font-mono\">${tool.agentId}</span>\n                </span>\n                ${schema.properties.length > 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                      <span class=\"text-gray-300\"></span>\n                      <span>${schema.properties.length} parameter${schema.properties.length !== 1 ? \"s\" : \"\"}</span>\n                    ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n              </div>\n              ${tool.description ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<p class=\"mt-2 text-xs text-gray-600\">${tool.description}</p>` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n            </div>\n            <span class=\"shrink-0 text-gray-400 transition ${isExpanded ? \"rotate-180\" : \"\"}\">\n              ${this.renderIcon(\"ChevronDown\")}\n            </span>\n          </div>\n        </button>\n\n        ${isExpanded ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n              <div class=\"border-t border-gray-200 bg-gray-50/50 px-4 py-3\">\n                ${schema.properties.length > 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                      <h5 class=\"mb-3 text-xs font-semibold text-gray-700\">Parameters</h5>\n                      <div class=\"space-y-3\">\n                        ${schema.properties.map((prop) => (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                          <div class=\"rounded-md border border-gray-200 bg-white p-3\">\n                            <div class=\"flex items-start justify-between gap-2 mb-1\">\n                              <span class=\"font-mono text-xs font-medium text-gray-900\">${prop.name}</span>\n                              <div class=\"flex items-center gap-1.5 shrink-0\">\n                                ${prop.required ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<span class=\"text-[9px] rounded border border-rose-200 bg-rose-50 px-1 py-0.5 font-medium text-rose-700\">required</span>` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<span class=\"text-[9px] rounded border border-gray-200 bg-gray-50 px-1 py-0.5 font-medium text-gray-600\">optional</span>`}\n                                ${prop.type ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<span class=\"text-[9px] rounded border border-gray-200 bg-gray-50 px-1 py-0.5 font-mono text-gray-600\">${prop.type}</span>` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n                              </div>\n                            </div>\n                            ${prop.description ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<p class=\"mt-1 text-xs text-gray-600\">${prop.description}</p>` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n                            ${prop.defaultValue !== void 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                                  <div class=\"mt-2 flex items-center gap-1.5 text-[10px] text-gray-500\">\n                                    <span>Default:</span>\n                                    <code class=\"rounded bg-gray-100 px-1 py-0.5 font-mono\">${JSON.stringify(prop.defaultValue)}</code>\n                                  </div>\n                                ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n                            ${prop.enum && prop.enum.length > 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                                  <div class=\"mt-2\">\n                                    <span class=\"text-[10px] text-gray-500\">Allowed values:</span>\n                                    <div class=\"mt-1 flex flex-wrap gap-1\">\n                                      ${prop.enum.map((val) => (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                                        <code class=\"rounded border border-gray-200 bg-gray-50 px-1.5 py-0.5 text-[10px] font-mono text-gray-700\">${JSON.stringify(val)}</code>\n                                      `)}\n                                    </div>\n                                  </div>\n                                ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n                          </div>\n                        `)}\n                      </div>\n                    ` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                      <div class=\"flex items-center justify-center py-4 text-xs text-gray-500\">\n                        <span>No parameters defined</span>\n                      </div>\n                    `}\n              </div>\n            ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n      </div>\n    `;\n  }\n  extractSchemaInfo(parameters) {\n    const result = { properties: [] };\n    if (!parameters || typeof parameters !== \"object\") {\n      return result;\n    }\n    const zodDef = parameters._def;\n    if (zodDef && typeof zodDef === \"object\") {\n      if (zodDef.typeName === \"ZodObject\") {\n        const rawShape = zodDef.shape;\n        const shape = typeof rawShape === \"function\" ? rawShape() : rawShape;\n        if (!shape || typeof shape !== \"object\") {\n          return result;\n        }\n        const requiredKeys = /* @__PURE__ */ new Set();\n        if (zodDef.unknownKeys === \"strict\" || !zodDef.catchall) {\n          Object.keys(shape || {}).forEach((key) => {\n            const candidate = shape[key];\n            const fieldDef = candidate?._def;\n            if (fieldDef && !this.isZodOptional(candidate)) {\n              requiredKeys.add(key);\n            }\n          });\n        }\n        for (const [key, value] of Object.entries(shape || {})) {\n          const fieldInfo = this.extractZodFieldInfo(value);\n          result.properties.push({\n            name: key,\n            type: fieldInfo.type,\n            description: fieldInfo.description,\n            required: requiredKeys.has(key),\n            defaultValue: fieldInfo.defaultValue,\n            enum: fieldInfo.enum\n          });\n        }\n      }\n    } else if (parameters.type === \"object\" && parameters.properties) {\n      const props = parameters.properties;\n      const required = new Set(\n        Array.isArray(parameters.required) ? parameters.required : []\n      );\n      for (const [key, value] of Object.entries(props ?? {})) {\n        const prop = value;\n        result.properties.push({\n          name: key,\n          type: prop.type,\n          description: typeof prop.description === \"string\" ? prop.description : void 0,\n          required: required.has(key),\n          defaultValue: prop.default,\n          enum: Array.isArray(prop.enum) ? prop.enum : void 0\n        });\n      }\n    }\n    return result;\n  }\n  isZodOptional(zodSchema) {\n    const schema = zodSchema;\n    if (!schema?._def) return false;\n    const def = schema._def;\n    if (def.typeName === \"ZodOptional\" || def.typeName === \"ZodNullable\") {\n      return true;\n    }\n    if (def.defaultValue !== void 0) {\n      return true;\n    }\n    return false;\n  }\n  extractZodFieldInfo(zodSchema) {\n    const info = {};\n    const schema = zodSchema;\n    if (!schema?._def) return info;\n    let currentSchema = schema;\n    let def = currentSchema._def;\n    while (def.typeName === \"ZodOptional\" || def.typeName === \"ZodNullable\" || def.typeName === \"ZodDefault\") {\n      if (def.typeName === \"ZodDefault\" && def.defaultValue !== void 0) {\n        info.defaultValue = typeof def.defaultValue === \"function\" ? def.defaultValue() : def.defaultValue;\n      }\n      currentSchema = def.innerType ?? currentSchema;\n      if (!currentSchema?._def) break;\n      def = currentSchema._def;\n    }\n    info.description = typeof def.description === \"string\" ? def.description : void 0;\n    const typeName = typeof def.typeName === \"string\" ? def.typeName : void 0;\n    const typeMap = {\n      ZodString: \"string\",\n      ZodNumber: \"number\",\n      ZodBoolean: \"boolean\",\n      ZodArray: \"array\",\n      ZodObject: \"object\",\n      ZodEnum: \"enum\",\n      ZodLiteral: \"literal\",\n      ZodUnion: \"union\",\n      ZodAny: \"any\",\n      ZodUnknown: \"unknown\"\n    };\n    info.type = typeName ? typeMap[typeName] || typeName.replace(\"Zod\", \"\").toLowerCase() : void 0;\n    if (typeName === \"ZodEnum\" && Array.isArray(def.values)) {\n      info.enum = def.values;\n    } else if (typeName === \"ZodLiteral\" && def.value !== void 0) {\n      info.enum = [def.value];\n    }\n    return info;\n  }\n  toggleToolExpansion(toolId) {\n    if (this.expandedTools.has(toolId)) {\n      this.expandedTools.delete(toolId);\n    } else {\n      this.expandedTools.add(toolId);\n    }\n    this.requestUpdate();\n  }\n  renderContextView() {\n    const contextEntries = Object.entries(this.contextStore);\n    if (contextEntries.length === 0) {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"FileText\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No context available</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Context will appear here once added to CopilotKit.</p>\n          </div>\n        </div>\n      `;\n    }\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"flex h-full flex-col overflow-hidden\">\n        <div class=\"overflow-auto p-4\">\n          <div class=\"space-y-3\">\n            ${contextEntries.map(([id, context]) => this.renderContextCard(id, context))}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n  renderContextCard(id, context) {\n    const isExpanded = this.expandedContextItems.has(id);\n    const valuePreview = this.getContextValuePreview(context.value);\n    const hasValue = context.value !== void 0 && context.value !== null;\n    const title = context.description?.trim() || id;\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n      <div class=\"rounded-lg border border-gray-200 bg-white overflow-hidden\">\n        <button\n          type=\"button\"\n          class=\"w-full px-4 py-3 text-left transition hover:bg-gray-50\"\n          @click=${() => this.toggleContextExpansion(id)}\n        >\n          <div class=\"flex items-start justify-between gap-3\">\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-medium text-gray-900 mb-1\">${title}</p>\n              <div class=\"flex items-center gap-2 text-xs text-gray-500\">\n                <span class=\"font-mono truncate inline-block align-middle\" style=\"max-width: 180px;\">${id}</span>\n                ${hasValue ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                      <span class=\"text-gray-300\"></span>\n                      <span class=\"truncate\">${valuePreview}</span>\n                    ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n              </div>\n            </div>\n            <span class=\"shrink-0 text-gray-400 transition ${isExpanded ? \"rotate-180\" : \"\"}\">\n              ${this.renderIcon(\"ChevronDown\")}\n            </span>\n          </div>\n        </button>\n\n        ${isExpanded ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n              <div class=\"border-t border-gray-200 bg-gray-50/50 px-4 py-3\">\n                <div class=\"mb-3\">\n                  <h5 class=\"mb-1 text-xs font-semibold text-gray-700\">ID</h5>\n                  <code class=\"block rounded bg-white border border-gray-200 px-2 py-1 text-[10px] font-mono text-gray-600\">${id}</code>\n                </div>\n                ${hasValue ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                      <div class=\"mb-2 flex items-center justify-between gap-2\">\n                        <h5 class=\"text-xs font-semibold text-gray-700\">Value</h5>\n                        <button\n                          class=\"flex items-center gap-1 rounded-md border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-700 transition hover:bg-gray-50\"\n                          type=\"button\"\n                          @click=${(e) => {\n      e.stopPropagation();\n      void this.copyContextValue(context.value, id);\n    }}\n                        >\n                          ${this.copiedContextItems.has(id) ? \"Copied\" : \"Copy JSON\"}\n                        </button>\n                      </div>\n                      <div class=\"rounded-md border border-gray-200 bg-white p-3\">\n                        <pre class=\"overflow-auto text-xs text-gray-800 max-h-96\"><code>${this.formatContextValue(context.value)}</code></pre>\n                      </div>\n                    ` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`\n                      <div class=\"flex items-center justify-center py-4 text-xs text-gray-500\">\n                        <span>No value available</span>\n                      </div>\n                    `}\n              </div>\n            ` : lit__WEBPACK_IMPORTED_MODULE_0__.nothing}\n      </div>\n    `;\n  }\n  getContextValuePreview(value) {\n    if (value === void 0 || value === null) {\n      return \"\\u2014\";\n    }\n    if (typeof value === \"string\") {\n      return value.length > 50 ? `${value.substring(0, 50)}...` : value;\n    }\n    if (typeof value === \"number\" || typeof value === \"boolean\") {\n      return String(value);\n    }\n    if (Array.isArray(value)) {\n      return `Array(${value.length})`;\n    }\n    if (typeof value === \"object\") {\n      const keys = Object.keys(value);\n      return `Object with ${keys.length} key${keys.length !== 1 ? \"s\" : \"\"}`;\n    }\n    if (typeof value === \"function\") {\n      return \"Function\";\n    }\n    return String(value);\n  }\n  formatContextValue(value) {\n    if (value === void 0) {\n      return \"undefined\";\n    }\n    if (value === null) {\n      return \"null\";\n    }\n    if (typeof value === \"function\") {\n      return value.toString();\n    }\n    try {\n      return JSON.stringify(value, null, 2);\n    } catch {\n      return String(value);\n    }\n  }\n  async copyContextValue(value, contextId) {\n    if (typeof navigator === \"undefined\" || !navigator.clipboard?.writeText) {\n      console.warn(\"Clipboard API is not available in this environment.\");\n      return;\n    }\n    const serialized = this.formatContextValue(value);\n    try {\n      await navigator.clipboard.writeText(serialized);\n      this.copiedContextItems.add(contextId);\n      this.requestUpdate();\n      setTimeout(() => {\n        this.copiedContextItems.delete(contextId);\n        this.requestUpdate();\n      }, 1500);\n    } catch (error) {\n      console.error(\"Failed to copy context value:\", error);\n    }\n  }\n  toggleContextExpansion(contextId) {\n    if (this.expandedContextItems.has(contextId)) {\n      this.expandedContextItems.delete(contextId);\n    } else {\n      this.expandedContextItems.add(contextId);\n    }\n    this.requestUpdate();\n  }\n  toggleRowExpansion(eventId) {\n    const selection = window.getSelection();\n    if (selection && selection.toString().length > 0) {\n      return;\n    }\n    if (this.expandedRows.has(eventId)) {\n      this.expandedRows.delete(eventId);\n    } else {\n      this.expandedRows.add(eventId);\n    }\n    this.requestUpdate();\n  }\n  renderAnnouncementPanel() {\n    if (!this.isOpen) {\n      return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    }\n    this.ensureAnnouncementLoading();\n    if (!this.hasUnseenAnnouncement) {\n      return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    }\n    if (!this.announcementLoaded && !this.announcementMarkdown) {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<div class=\"mx-4 my-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-800 shadow-[0_12px_30px_rgba(15,23,42,0.12)]\">\n        <div class=\"flex items-center gap-2 font-semibold\">\n          <span class=\"inline-flex h-6 w-6 items-center justify-center rounded-md bg-slate-900 text-white shadow-sm\">\n            ${this.renderIcon(\"Megaphone\")}\n          </span>\n          <span>Loading latest announcement</span>\n        </div>\n      </div>`;\n    }\n    if (this.announcementLoadError) {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<div class=\"mx-4 my-3 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-900 shadow-[0_12px_30px_rgba(15,23,42,0.12)]\">\n        <div class=\"flex items-center gap-2 font-semibold\">\n          <span class=\"inline-flex h-6 w-6 items-center justify-center rounded-md bg-rose-600 text-white shadow-sm\">\n            ${this.renderIcon(\"Megaphone\")}\n          </span>\n          <span>Announcement unavailable</span>\n        </div>\n        <p class=\"mt-2 text-xs text-rose-800\">We couldnt load the latest notice. Please try opening the inspector again.</p>\n      </div>`;\n    }\n    if (!this.announcementMarkdown) {\n      return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    }\n    const content = this.announcementHtml ? (0,lit_directives_unsafe_html_js__WEBPACK_IMPORTED_MODULE_2__.unsafeHTML)(this.announcementHtml) : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<pre class=\"whitespace-pre-wrap text-sm text-gray-900\">${this.announcementMarkdown}</pre>`;\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<div class=\"mx-4 my-3 rounded-xl border border-slate-200 bg-white px-4 py-4 shadow-[0_12px_30px_rgba(15,23,42,0.12)]\">\n      <div class=\"mb-3 flex items-center gap-2 text-sm font-semibold text-slate-900\">\n        <span class=\"inline-flex h-7 w-7 items-center justify-center rounded-md bg-slate-900 text-white shadow-sm\">\n          ${this.renderIcon(\"Megaphone\")}\n        </span>\n        <span>Announcement</span>\n        <button class=\"announcement-dismiss ml-auto\" type=\"button\" @click=${this.handleDismissAnnouncement} aria-label=\"Dismiss announcement\">\n          Dismiss\n        </button>\n      </div>\n      <div class=\"announcement-content text-sm leading-relaxed text-gray-900\">${content}</div>\n    </div>`;\n  }\n  ensureAnnouncementLoading() {\n    if (this.announcementPromise || typeof window === \"undefined\" || typeof fetch === \"undefined\") {\n      return;\n    }\n    this.announcementPromise = this.fetchAnnouncement();\n  }\n  renderAnnouncementPreview() {\n    if (!this.hasUnseenAnnouncement || !this.showAnnouncementPreview || !this.announcementPreviewText) {\n      return lit__WEBPACK_IMPORTED_MODULE_0__.nothing;\n    }\n    const side = this.contextState.button.anchor.horizontal === \"left\" ? \"right\" : \"left\";\n    return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)`<div\n      class=\"announcement-preview\"\n      data-side=${side}\n      role=\"note\"\n      @click=${() => this.handleAnnouncementPreviewClick()}\n    >\n      <span>${this.announcementPreviewText}</span>\n      <span class=\"announcement-preview__arrow\"></span>\n    </div>`;\n  }\n  handleAnnouncementPreviewClick() {\n    this.showAnnouncementPreview = false;\n    this.openInspector();\n  }\n  async fetchAnnouncement() {\n    try {\n      const response = await fetch(ANNOUNCEMENT_URL, { cache: \"no-cache\" });\n      if (!response.ok) {\n        throw new Error(`Failed to load announcement (${response.status})`);\n      }\n      const data = await response.json();\n      const timestamp = typeof data?.timestamp === \"string\" ? data.timestamp : null;\n      const previewText = typeof data?.previewText === \"string\" ? data.previewText : null;\n      const markdown = typeof data?.announcement === \"string\" ? data.announcement : null;\n      if (!timestamp || !markdown) {\n        throw new Error(\"Malformed announcement payload\");\n      }\n      const storedTimestamp = this.loadStoredAnnouncementTimestamp();\n      this.announcementTimestamp = timestamp;\n      this.announcementPreviewText = previewText ?? \"\";\n      this.announcementMarkdown = markdown;\n      this.hasUnseenAnnouncement = (!storedTimestamp || storedTimestamp !== timestamp) && !!this.announcementPreviewText;\n      this.showAnnouncementPreview = this.hasUnseenAnnouncement;\n      this.announcementHtml = await this.convertMarkdownToHtml(markdown);\n      this.announcementLoaded = true;\n      this.requestUpdate();\n    } catch (error) {\n      this.announcementLoadError = error;\n      this.announcementLoaded = true;\n      this.requestUpdate();\n    }\n  }\n  async convertMarkdownToHtml(markdown) {\n    const renderer = new marked__WEBPACK_IMPORTED_MODULE_3__.marked.Renderer();\n    renderer.link = (href, title, text) => {\n      const safeHref = this.escapeHtmlAttr(this.appendRefParam(href ?? \"\"));\n      const titleAttr = title ? ` title=\"${this.escapeHtmlAttr(title)}\"` : \"\";\n      return `<a href=\"${safeHref}\" target=\"_blank\" rel=\"noopener\"${titleAttr}>${text}</a>`;\n    };\n    return marked__WEBPACK_IMPORTED_MODULE_3__.marked.parse(markdown, { renderer });\n  }\n  appendRefParam(href) {\n    try {\n      const url = new URL(href, typeof window !== \"undefined\" ? window.location.href : \"https://copilotkit.ai\");\n      if (!url.searchParams.has(\"ref\")) {\n        url.searchParams.append(\"ref\", \"cpk-inspector\");\n      }\n      return url.toString();\n    } catch {\n      return href;\n    }\n  }\n  escapeHtmlAttr(value) {\n    return value.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\\\"/g, \"&quot;\").replace(/'/g, \"&#39;\");\n  }\n  loadStoredAnnouncementTimestamp() {\n    if (typeof window === \"undefined\" || !window.localStorage) {\n      return null;\n    }\n    try {\n      const raw = window.localStorage.getItem(ANNOUNCEMENT_STORAGE_KEY);\n      if (!raw) {\n        return null;\n      }\n      const parsed = JSON.parse(raw);\n      if (parsed && typeof parsed.timestamp === \"string\") {\n        return parsed.timestamp;\n      }\n      return null;\n    } catch {\n    }\n    return null;\n  }\n  persistAnnouncementTimestamp(timestamp) {\n    if (typeof window === \"undefined\" || !window.localStorage) {\n      return;\n    }\n    try {\n      const payload = JSON.stringify({ timestamp });\n      window.localStorage.setItem(ANNOUNCEMENT_STORAGE_KEY, payload);\n    } catch {\n    }\n  }\n  markAnnouncementSeen() {\n    this.hasUnseenAnnouncement = false;\n    this.showAnnouncementPreview = false;\n    if (!this.announcementTimestamp) {\n      if (this.announcementPromise && !this.announcementLoaded) {\n        void this.announcementPromise.then(() => this.markAnnouncementSeen()).catch(() => void 0);\n      }\n      this.requestUpdate();\n      return;\n    }\n    this.persistAnnouncementTimestamp(this.announcementTimestamp);\n    this.requestUpdate();\n  }\n};\nfunction defineWebInspector() {\n  if (!customElements.get(WEB_INSPECTOR_TAG)) {\n    customElements.define(WEB_INSPECTOR_TAG, WebInspectorElement);\n  }\n}\ndefineWebInspector();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3dlYi1pbnNwZWN0b3IvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDZ0U7QUFDVDs7QUFFdkQ7QUFDQSwrR0FBK0csb0lBQW9JLDRCQUE0QixtQkFBbUIsbUJBQW1CLG1CQUFtQixzQkFBc0Isc0JBQXNCLHNCQUFzQixvQkFBb0Isb0JBQW9CLHVCQUF1Qix3QkFBd0Isd0JBQXdCLHFCQUFxQix5QkFBeUIsc0JBQXNCLDBCQUEwQix1QkFBdUIsNEJBQTRCLGdDQUFnQyw2QkFBNkIsd0JBQXdCLDJCQUEyQiw4QkFBOEIsaUNBQWlDLHdCQUF3QiwyQkFBMkIsNEJBQTRCLGtDQUFrQywyQkFBMkIsaUNBQWlDLCtCQUErQixnQ0FBZ0MsaUNBQWlDLDZCQUE2Qiw4QkFBOEIsK0JBQStCLDRCQUE0QixlQUFlLGVBQWUsZUFBZSwyQkFBMkIsYUFBYSxZQUFZLHlIQUF5SCx3R0FBd0csMENBQTBDLDJDQUEyQywwQ0FBMEMsMkNBQTJDLDJDQUEyQywyQ0FBMkMsMkNBQTJDLDRDQUE0Qyw0Q0FBNEMsNENBQTRDLDZDQUE2Qyw2Q0FBNkMsNENBQTRDLDhDQUE4Qyx3Q0FBd0MsMENBQTBDLHdDQUF3Qyx3Q0FBd0MsMkNBQTJDLDJDQUEyQywyQ0FBMkMsMkNBQTJDLDJDQUEyQyw0Q0FBNEMsNkNBQTZDLDRDQUE0Qyw0Q0FBNEMsNkNBQTZDLDZDQUE2Qyx5Q0FBeUMsMENBQTBDLDBDQUEwQywwQ0FBMEMsMENBQTBDLDBDQUEwQyx3Q0FBd0MsNENBQTRDLDRDQUE0Qyw0Q0FBNEMsNENBQTRDLDBDQUEwQywyQ0FBMkMsMkNBQTJDLDBDQUEwQywyQ0FBMkMsMkNBQTJDLDBDQUEwQywyQ0FBMkMsMkNBQTJDLHlDQUF5QyxtQkFBbUIsbUJBQW1CLGlCQUFpQixxQkFBcUIscUJBQXFCLHNCQUFzQixpQkFBaUIsbUNBQW1DLGtCQUFrQix1Q0FBdUMsbUJBQW1CLHdDQUF3Qyx5QkFBeUIs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QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw4Q0FBOEMsaUJBQWlCO0FBQy9EO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUc7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBDQUFNO0FBQy9CO0FBQ0E7QUFDQSwyQ0FBMkMsMkJBQTJCO0FBQ3RFLHlCQUF5QixTQUFTLGtDQUFrQyxVQUFVLEdBQUcsS0FBSztBQUN0RjtBQUNBLFdBQVcsMENBQU0sbUJBQW1CLFVBQVU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzQkFBc0Isc0JBQXNCLHlCQUF5Qix1QkFBdUI7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsV0FBVztBQUNsRDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL2NoYWl6aGVuaHVhL0NvZGVzL3VuY2FydmUvZTJlL2V4YW1wbGVzL3RyYXZlbC11aS9ub2RlX21vZHVsZXMvQGNvcGlsb3RraXRuZXh0L3dlYi1pbnNwZWN0b3IvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2luZGV4LnRzXG5pbXBvcnQgeyBMaXRFbGVtZW50LCBjc3MsIGh0bWwsIG5vdGhpbmcsIHVuc2FmZUNTUyB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IHN0eWxlTWFwIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL3N0eWxlLW1hcC5qc1wiO1xuXG4vLyBzcmMvc3R5bGVzL2dlbmVyYXRlZC5jc3NcbnZhciBnZW5lcmF0ZWRfZGVmYXVsdCA9ICcvKiEgdGFpbHdpbmRjc3MgdjQuMS4xOCB8IE1JVCBMaWNlbnNlIHwgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20gKi9cXG5AbGF5ZXIgcHJvcGVydGllc3tAc3VwcG9ydHMgKCgoLXdlYmtpdC1oeXBoZW5zOm5vbmUpKSBhbmQgKG5vdCAobWFyZ2luLXRyaW06aW5saW5lKSkpIG9yICgoLW1vei1vcmllbnQ6aW5saW5lKSBhbmQgKG5vdCAoY29sb3I6cmdiKGZyb20gcmVkIHIgZyBiKSkpKXsqLDpiZWZvcmUsOmFmdGVyLDo6YmFja2Ryb3B7LS10dy10cmFuc2xhdGUteDowOy0tdHctdHJhbnNsYXRlLXk6MDstLXR3LXRyYW5zbGF0ZS16OjA7LS10dy1yb3RhdGUteDppbml0aWFsOy0tdHctcm90YXRlLXk6aW5pdGlhbDstLXR3LXJvdGF0ZS16OmluaXRpYWw7LS10dy1za2V3LXg6aW5pdGlhbDstLXR3LXNrZXcteTppbml0aWFsOy0tdHctc3BhY2UteS1yZXZlcnNlOjA7LS10dy1kaXZpZGUteS1yZXZlcnNlOjA7LS10dy1ib3JkZXItc3R5bGU6c29saWQ7LS10dy1sZWFkaW5nOmluaXRpYWw7LS10dy1mb250LXdlaWdodDppbml0aWFsOy0tdHctc2hhZG93OjAgMCAjMDAwMDstLXR3LXNoYWRvdy1jb2xvcjppbml0aWFsOy0tdHctc2hhZG93LWFscGhhOjEwMCU7LS10dy1pbnNldC1zaGFkb3c6MCAwICMwMDAwOy0tdHctaW5zZXQtc2hhZG93LWNvbG9yOmluaXRpYWw7LS10dy1pbnNldC1zaGFkb3ctYWxwaGE6MTAwJTstLXR3LXJpbmctY29sb3I6aW5pdGlhbDstLXR3LXJpbmctc2hhZG93OjAgMCAjMDAwMDstLXR3LWluc2V0LXJpbmctY29sb3I6aW5pdGlhbDstLXR3LWluc2V0LXJpbmctc2hhZG93OjAgMCAjMDAwMDstLXR3LXJpbmctaW5zZXQ6aW5pdGlhbDstLXR3LXJpbmctb2Zmc2V0LXdpZHRoOjBweDstLXR3LXJpbmctb2Zmc2V0LWNvbG9yOiNmZmY7LS10dy1yaW5nLW9mZnNldC1zaGFkb3c6MCAwICMwMDAwOy0tdHctYmFja2Ryb3AtYmx1cjppbml0aWFsOy0tdHctYmFja2Ryb3AtYnJpZ2h0bmVzczppbml0aWFsOy0tdHctYmFja2Ryb3AtY29udHJhc3Q6aW5pdGlhbDstLXR3LWJhY2tkcm9wLWdyYXlzY2FsZTppbml0aWFsOy0tdHctYmFja2Ryb3AtaHVlLXJvdGF0ZTppbml0aWFsOy0tdHctYmFja2Ryb3AtaW52ZXJ0OmluaXRpYWw7LS10dy1iYWNrZHJvcC1vcGFjaXR5OmluaXRpYWw7LS10dy1iYWNrZHJvcC1zYXR1cmF0ZTppbml0aWFsOy0tdHctYmFja2Ryb3Atc2VwaWE6aW5pdGlhbDstLXR3LXNjYWxlLXg6MTstLXR3LXNjYWxlLXk6MTstLXR3LXNjYWxlLXo6MTstLXR3LW91dGxpbmUtc3R5bGU6c29saWR9fX1AbGF5ZXIgdGhlbWV7OnJvb3QsOmhvc3R7LS1mb250LXNhbnM6dWktc2Fucy1zZXJpZixzeXN0ZW0tdWksc2Fucy1zZXJpZixcIkFwcGxlIENvbG9yIEVtb2ppXCIsXCJTZWdvZSBVSSBFbW9qaVwiLFwiU2Vnb2UgVUkgU3ltYm9sXCIsXCJOb3RvIENvbG9yIEVtb2ppXCI7LS1mb250LW1vbm86dWktbW9ub3NwYWNlLFNGTW9uby1SZWd1bGFyLE1lbmxvLE1vbmFjbyxDb25zb2xhcyxcIkxpYmVyYXRpb24gTW9ub1wiLFwiQ291cmllciBOZXdcIixtb25vc3BhY2U7LS1jb2xvci1hbWJlci01MDpva2xjaCg5OC43JSAuMDIyIDk1LjI3Nyk7LS1jb2xvci1hbWJlci0xMDA6b2tsY2goOTYuMiUgLjA1OSA5NS42MTcpOy0tY29sb3ItYW1iZXItMjAwOm9rbGNoKDkyLjQlIC4xMiA5NS43NDYpOy0tY29sb3ItYW1iZXItNjAwOm9rbGNoKDY2LjYlIC4xNzkgNTguMzE4KTstLWNvbG9yLWFtYmVyLTcwMDpva2xjaCg1NS41JSAuMTYzIDQ4Ljk5OCk7LS1jb2xvci1hbWJlci04MDA6b2tsY2goNDcuMyUgLjEzNyA0Ni4yMDEpOy0tY29sb3ItYW1iZXItOTAwOm9rbGNoKDQxLjQlIC4xMTIgNDUuOTA0KTstLWNvbG9yLWdyZWVuLTEwMDpva2xjaCg5Ni4yJSAuMDQ0IDE1Ni43NDMpOy0tY29sb3ItZ3JlZW4tNzAwOm9rbGNoKDUyLjclIC4xNTQgMTUwLjA2OSk7LS1jb2xvci1ncmVlbi04MDA6b2tsY2goNDQuOCUgLjExOSAxNTEuMzI4KTstLWNvbG9yLWVtZXJhbGQtNTA6b2tsY2goOTcuOSUgLjAyMSAxNjYuMTEzKTstLWNvbG9yLWVtZXJhbGQtMjAwOm9rbGNoKDkwLjUlIC4wOTMgMTY0LjE1KTstLWNvbG9yLWVtZXJhbGQtNTAwOm9rbGNoKDY5LjYlIC4xNyAxNjIuNDgpOy0tY29sb3ItZW1lcmFsZC03MDA6b2tsY2goNTAuOCUgLjExOCAxNjUuNjEyKTstLWNvbG9yLXNreS01MDpva2xjaCg5Ny43JSAuMDEzIDIzNi42Mik7LS1jb2xvci1za3ktMjAwOm9rbGNoKDkwLjElIC4wNTggMjMwLjkwMik7LS1jb2xvci1za3ktNzAwOm9rbGNoKDUwJSAuMTM0IDI0Mi43NDkpOy0tY29sb3ItYmx1ZS01MDpva2xjaCg5NyUgLjAxNCAyNTQuNjA0KTstLWNvbG9yLWJsdWUtMTAwOm9rbGNoKDkzLjIlIC4wMzIgMjU1LjU4NSk7LS1jb2xvci1ibHVlLTIwMDpva2xjaCg4OC4yJSAuMDU5IDI1NC4xMjgpOy0tY29sb3ItYmx1ZS02MDA6b2tsY2goNTQuNiUgLjI0NSAyNjIuODgxKTstLWNvbG9yLWJsdWUtNzAwOm9rbGNoKDQ4LjglIC4yNDMgMjY0LjM3Nik7LS1jb2xvci1ibHVlLTgwMDpva2xjaCg0Mi40JSAuMTk5IDI2NS42MzgpOy0tY29sb3ItdmlvbGV0LTUwOm9rbGNoKDk2LjklIC4wMTYgMjkzLjc1Nik7LS1jb2xvci12aW9sZXQtMjAwOm9rbGNoKDg5LjQlIC4wNTcgMjkzLjI4Myk7LS1jb2xvci12aW9sZXQtNzAwOm9rbGNoKDQ5LjElIC4yNyAyOTIuNTgxKTstLWNvbG9yLXB1cnBsZS01MDpva2xjaCg5Ny43JSAuMDE0IDMwOC4yOTkpOy0tY29sb3ItcHVycGxlLTIwMDpva2xjaCg5MC4yJSAuMDYzIDMwNi43MDMpOy0tY29sb3ItcHVycGxlLTcwMDpva2xjaCg0OS42JSAuMjY1IDMwMS45MjQpOy0tY29sb3Itcm9zZS01MDpva2xjaCg5Ni45JSAuMDE1IDEyLjQyMik7LS1jb2xvci1yb3NlLTIwMDpva2xjaCg4OS4yJSAuMDU4IDEwLjAwMSk7LS1jb2xvci1yb3NlLTUwMDpva2xjaCg2NC41JSAuMjQ2IDE2LjQzOSk7LS1jb2xvci1yb3NlLTYwMDpva2xjaCg1OC42JSAuMjUzIDE3LjU4NSk7LS1jb2xvci1yb3NlLTcwMDpva2xjaCg1MS40JSAuMjIyIDE2LjkzNSk7LS1jb2xvci1yb3NlLTgwMDpva2xjaCg0NS41JSAuMTg4IDEzLjY5Nyk7LS1jb2xvci1yb3NlLTkwMDpva2xjaCg0MSUgLjE1OSAxMC4yNzIpOy0tY29sb3Itc2xhdGUtMjAwOm9rbGNoKDkyLjklIC4wMTMgMjU1LjUwOCk7LS1jb2xvci1zbGF0ZS04MDA6b2tsY2goMjcuOSUgLjA0MSAyNjAuMDMxKTstLWNvbG9yLXNsYXRlLTkwMDpva2xjaCgyMC44JSAuMDQyIDI2NS43NTUpOy0tY29sb3Itc2xhdGUtOTUwOm9rbGNoKDEyLjklIC4wNDIgMjY0LjY5NSk7LS1jb2xvci1ncmF5LTUwOm9rbGNoKDk4LjUlIC4wMDIgMjQ3LjgzOSk7LS1jb2xvci1ncmF5LTEwMDpva2xjaCg5Ni43JSAuMDAzIDI2NC41NDIpOy0tY29sb3ItZ3JheS0yMDA6b2tsY2goOTIuOCUgLjAwNiAyNjQuNTMxKTstLWNvbG9yLWdyYXktMzAwOm9rbGNoKDg3LjIlIC4wMSAyNTguMzM4KTstLWNvbG9yLWdyYXktNDAwOm9rbGNoKDcwLjclIC4wMjIgMjYxLjMyNSk7LS1jb2xvci1ncmF5LTUwMDpva2xjaCg1NS4xJSAuMDI3IDI2NC4zNjQpOy0tY29sb3ItZ3JheS02MDA6b2tsY2goNDQuNiUgLjAzIDI1Ni44MDIpOy0tY29sb3ItZ3JheS03MDA6b2tsY2goMzcuMyUgLjAzNCAyNTkuNzMzKTstLWNvbG9yLWdyYXktODAwOm9rbGNoKDI3LjglIC4wMzMgMjU2Ljg0OCk7LS1jb2xvci1ncmF5LTkwMDpva2xjaCgyMSUgLjAzNCAyNjQuNjY1KTstLWNvbG9yLWJsYWNrOiMwMDA7LS1jb2xvci13aGl0ZTojZmZmOy0tc3BhY2luZzouMjVyZW07LS1jb250YWluZXIteHM6MjByZW07LS1jb250YWluZXItbWQ6MjhyZW07LS1jb250YWluZXItMnhsOjQycmVtOy0tdGV4dC14czouNzVyZW07LS10ZXh0LXhzLS1saW5lLWhlaWdodDpjYWxjKDEvLjc1KTstLXRleHQtc206Ljg3NXJlbTstLXRleHQtc20tLWxpbmUtaGVpZ2h0OmNhbGMoMS4yNS8uODc1KTstLXRleHQtbGc6MS4xMjVyZW07LS10ZXh0LWxnLS1saW5lLWhlaWdodDpjYWxjKDEuNzUvMS4xMjUpOy0tZm9udC13ZWlnaHQtbWVkaXVtOjUwMDstLWZvbnQtd2VpZ2h0LXNlbWlib2xkOjYwMDstLWxlYWRpbmctc251ZzoxLjM3NTstLWxlYWRpbmctcmVsYXhlZDoxLjYyNTstLXJhZGl1cy1zbTouMjVyZW07LS1yYWRpdXMtbWQ6LjM3NXJlbTstLXJhZGl1cy1sZzouNXJlbTstLXJhZGl1cy14bDouNzVyZW07LS1hbmltYXRlLXB1bHNlOnB1bHNlIDJzIGN1YmljLWJlemllciguNCwwLC42LDEpaW5maW5pdGU7LS1ibHVyLXNtOjhweDstLWJsdXItbWQ6MTJweDstLWRlZmF1bHQtdHJhbnNpdGlvbi1kdXJhdGlvbjouMTVzOy0tZGVmYXVsdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjQsMCwuMiwxKTstLWRlZmF1bHQtZm9udC1mYW1pbHk6dmFyKC0tZm9udC1zYW5zKTstLWRlZmF1bHQtbW9uby1mb250LWZhbWlseTp2YXIoLS1mb250LW1vbm8pfX1AbGF5ZXIgYmFzZXsqLDphZnRlciw6YmVmb3JlLDo6YmFja2Ryb3B7Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlcjowIHNvbGlkO21hcmdpbjowO3BhZGRpbmc6MH06OmZpbGUtc2VsZWN0b3ItYnV0dG9ue2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXI6MCBzb2xpZDttYXJnaW46MDtwYWRkaW5nOjB9aHRtbCw6aG9zdHstd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6MTAwJTt0YWItc2l6ZTo0O2xpbmUtaGVpZ2h0OjEuNTtmb250LWZhbWlseTp2YXIoLS1kZWZhdWx0LWZvbnQtZmFtaWx5LHVpLXNhbnMtc2VyaWYsc3lzdGVtLXVpLHNhbnMtc2VyaWYsXCJBcHBsZSBDb2xvciBFbW9qaVwiLFwiU2Vnb2UgVUkgRW1vamlcIixcIlNlZ29lIFVJIFN5bWJvbFwiLFwiTm90byBDb2xvciBFbW9qaVwiKTtmb250LWZlYXR1cmUtc2V0dGluZ3M6dmFyKC0tZGVmYXVsdC1mb250LWZlYXR1cmUtc2V0dGluZ3Msbm9ybWFsKTtmb250LXZhcmlhdGlvbi1zZXR0aW5nczp2YXIoLS1kZWZhdWx0LWZvbnQtdmFyaWF0aW9uLXNldHRpbmdzLG5vcm1hbCk7LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50fWhye2hlaWdodDowO2NvbG9yOmluaGVyaXQ7Ym9yZGVyLXRvcC13aWR0aDoxcHh9YWJicjp3aGVyZShbdGl0bGVdKXstd2Via2l0LXRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUgZG90dGVkO3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUgZG90dGVkfWgxLGgyLGgzLGg0LGg1LGg2e2ZvbnQtc2l6ZTppbmhlcml0O2ZvbnQtd2VpZ2h0OmluaGVyaXR9YXtjb2xvcjppbmhlcml0Oy13ZWJraXQtdGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7LXdlYmtpdC10ZXh0LWRlY29yYXRpb246aW5oZXJpdDstd2Via2l0LXRleHQtZGVjb3JhdGlvbjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjppbmhlcml0fWIsc3Ryb25ne2ZvbnQtd2VpZ2h0OmJvbGRlcn1jb2RlLGtiZCxzYW1wLHByZXtmb250LWZhbWlseTp2YXIoLS1kZWZhdWx0LW1vbm8tZm9udC1mYW1pbHksdWktbW9ub3NwYWNlLFNGTW9uby1SZWd1bGFyLE1lbmxvLE1vbmFjbyxDb25zb2xhcyxcIkxpYmVyYXRpb24gTW9ub1wiLFwiQ291cmllciBOZXdcIixtb25vc3BhY2UpO2ZvbnQtZmVhdHVyZS1zZXR0aW5nczp2YXIoLS1kZWZhdWx0LW1vbm8tZm9udC1mZWF0dXJlLXNldHRpbmdzLG5vcm1hbCk7Zm9udC12YXJpYXRpb24tc2V0dGluZ3M6dmFyKC0tZGVmYXVsdC1tb25vLWZvbnQtdmFyaWF0aW9uLXNldHRpbmdzLG5vcm1hbCk7Zm9udC1zaXplOjFlbX1zbWFsbHtmb250LXNpemU6ODAlfXN1YixzdXB7dmVydGljYWwtYWxpZ246YmFzZWxpbmU7Zm9udC1zaXplOjc1JTtsaW5lLWhlaWdodDowO3Bvc2l0aW9uOnJlbGF0aXZlfXN1Yntib3R0b206LS4yNWVtfXN1cHt0b3A6LS41ZW19dGFibGV7dGV4dC1pbmRlbnQ6MDtib3JkZXItY29sb3I6aW5oZXJpdDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2V9Oi1tb3otZm9jdXNyaW5ne291dGxpbmU6YXV0b31wcm9ncmVzc3t2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX1zdW1tYXJ5e2Rpc3BsYXk6bGlzdC1pdGVtfW9sLHVsLG1lbnV7bGlzdC1zdHlsZTpub25lfWltZyxzdmcsdmlkZW8sY2FudmFzLGF1ZGlvLGlmcmFtZSxlbWJlZCxvYmplY3R7dmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6YmxvY2t9aW1nLHZpZGVve21heC13aWR0aDoxMDAlO2hlaWdodDphdXRvfWJ1dHRvbixpbnB1dCxzZWxlY3Qsb3B0Z3JvdXAsdGV4dGFyZWF7Zm9udDppbmhlcml0O2ZvbnQtZmVhdHVyZS1zZXR0aW5nczppbmhlcml0O2ZvbnQtdmFyaWF0aW9uLXNldHRpbmdzOmluaGVyaXQ7bGV0dGVyLXNwYWNpbmc6aW5oZXJpdDtjb2xvcjppbmhlcml0O29wYWNpdHk6MTtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwO2JvcmRlci1yYWRpdXM6MH06OmZpbGUtc2VsZWN0b3ItYnV0dG9ue2ZvbnQ6aW5oZXJpdDtmb250LWZlYXR1cmUtc2V0dGluZ3M6aW5oZXJpdDtmb250LXZhcmlhdGlvbi1zZXR0aW5nczppbmhlcml0O2xldHRlci1zcGFjaW5nOmluaGVyaXQ7Y29sb3I6aW5oZXJpdDtvcGFjaXR5OjE7YmFja2dyb3VuZC1jb2xvcjojMDAwMDtib3JkZXItcmFkaXVzOjB9OndoZXJlKHNlbGVjdDppcyhbbXVsdGlwbGVdLFtzaXplXSkpIG9wdGdyb3Vwe2ZvbnQtd2VpZ2h0OmJvbGRlcn06d2hlcmUoc2VsZWN0OmlzKFttdWx0aXBsZV0sW3NpemVdKSkgb3B0Z3JvdXAgb3B0aW9ue3BhZGRpbmctaW5saW5lLXN0YXJ0OjIwcHh9OjpmaWxlLXNlbGVjdG9yLWJ1dHRvbnttYXJnaW4taW5saW5lLWVuZDo0cHh9OjpwbGFjZWhvbGRlcntvcGFjaXR5OjF9QHN1cHBvcnRzIChub3QgKCgtd2Via2l0LWFwcGVhcmFuY2U6LWFwcGxlLXBheS1idXR0b24pKSkgb3IgKGNvbnRhaW4taW50cmluc2ljLXNpemU6MXB4KXs6OnBsYWNlaG9sZGVye2NvbG9yOmN1cnJlbnRDb2xvcn1Ac3VwcG9ydHMgKGNvbG9yOmNvbG9yLW1peChpbiBsYWIsIHJlZCwgcmVkKSl7OjpwbGFjZWhvbGRlcntjb2xvcjpjb2xvci1taXgoaW4gb2tsYWIsY3VycmVudGNvbG9yIDUwJSx0cmFuc3BhcmVudCl9fX10ZXh0YXJlYXtyZXNpemU6dmVydGljYWx9Ojotd2Via2l0LXNlYXJjaC1kZWNvcmF0aW9uey13ZWJraXQtYXBwZWFyYW5jZTpub25lfTo6LXdlYmtpdC1kYXRlLWFuZC10aW1lLXZhbHVle21pbi1oZWlnaHQ6MWxoO3RleHQtYWxpZ246aW5oZXJpdH06Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdHtkaXNwbGF5OmlubGluZS1mbGV4fTo6LXdlYmtpdC1kYXRldGltZS1lZGl0LWZpZWxkcy13cmFwcGVye3BhZGRpbmc6MH06Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdHtwYWRkaW5nLWJsb2NrOjB9Ojotd2Via2l0LWRhdGV0aW1lLWVkaXQteWVhci1maWVsZHtwYWRkaW5nLWJsb2NrOjB9Ojotd2Via2l0LWRhdGV0aW1lLWVkaXQtbW9udGgtZmllbGR7cGFkZGluZy1ibG9jazowfTo6LXdlYmtpdC1kYXRldGltZS1lZGl0LWRheS1maWVsZHtwYWRkaW5nLWJsb2NrOjB9Ojotd2Via2l0LWRhdGV0aW1lLWVkaXQtaG91ci1maWVsZHtwYWRkaW5nLWJsb2NrOjB9Ojotd2Via2l0LWRhdGV0aW1lLWVkaXQtbWludXRlLWZpZWxke3BhZGRpbmctYmxvY2s6MH06Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdC1zZWNvbmQtZmllbGR7cGFkZGluZy1ibG9jazowfTo6LXdlYmtpdC1kYXRldGltZS1lZGl0LW1pbGxpc2Vjb25kLWZpZWxke3BhZGRpbmctYmxvY2s6MH06Oi13ZWJraXQtZGF0ZXRpbWUtZWRpdC1tZXJpZGllbS1maWVsZHtwYWRkaW5nLWJsb2NrOjB9Ojotd2Via2l0LWNhbGVuZGFyLXBpY2tlci1pbmRpY2F0b3J7bGluZS1oZWlnaHQ6MX06LW1vei11aS1pbnZhbGlke2JveC1zaGFkb3c6bm9uZX1idXR0b24saW5wdXQ6d2hlcmUoW3R5cGU9YnV0dG9uXSxbdHlwZT1yZXNldF0sW3R5cGU9c3VibWl0XSl7YXBwZWFyYW5jZTpidXR0b259OjpmaWxlLXNlbGVjdG9yLWJ1dHRvbnthcHBlYXJhbmNlOmJ1dHRvbn06Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b257aGVpZ2h0OmF1dG99Ojotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9ue2hlaWdodDphdXRvfVtoaWRkZW5dOndoZXJlKDpub3QoW2hpZGRlbj11bnRpbC1mb3VuZF0pKXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fTpob3N0e2ZvbnQtZmFtaWx5OnZhcigtLWZvbnQtc2Fucyk7Y29sb3I6dmFyKC0tY29sb3Itc2xhdGUtOTAwKTtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwO2Rpc3BsYXk6YmxvY2t9fUBsYXllciBjb21wb25lbnRzO0BsYXllciB1dGlsaXRpZXN7LnBvaW50ZXItZXZlbnRzLWF1dG97cG9pbnRlci1ldmVudHM6YXV0b30uYWJzb2x1dGV7cG9zaXRpb246YWJzb2x1dGV9LmZpeGVke3Bvc2l0aW9uOmZpeGVkfS5yZWxhdGl2ZXtwb3NpdGlvbjpyZWxhdGl2ZX0uc3RhdGlje3Bvc2l0aW9uOnN0YXRpY30uc3RpY2t5e3Bvc2l0aW9uOnN0aWNreX0udG9wLTB7dG9wOmNhbGModmFyKC0tc3BhY2luZykqMCl9LnJpZ2h0LTB7cmlnaHQ6Y2FsYyh2YXIoLS1zcGFjaW5nKSowKX0ucmlnaHQtMXtyaWdodDpjYWxjKHZhcigtLXNwYWNpbmcpKjEpfS5ib3R0b20tMXtib3R0b206Y2FsYyh2YXIoLS1zcGFjaW5nKSoxKX0ubGVmdC0we2xlZnQ6Y2FsYyh2YXIoLS1zcGFjaW5nKSowKX0uei0xMHt6LWluZGV4OjEwfS56LTMwe3otaW5kZXg6MzB9LnotNDB7ei1pbmRleDo0MH0uei01MHt6LWluZGV4OjUwfS5tLTB7bWFyZ2luOmNhbGModmFyKC0tc3BhY2luZykqMCl9Lm14LTR7bWFyZ2luLWlubGluZTpjYWxjKHZhcigtLXNwYWNpbmcpKjQpfS5teS0xe21hcmdpbi1ibG9jazpjYWxjKHZhcigtLXNwYWNpbmcpKjEpfS5teS0ze21hcmdpbi1ibG9jazpjYWxjKHZhcigtLXNwYWNpbmcpKjMpfS5tdC0wXFxcXC41e21hcmdpbi10b3A6Y2FsYyh2YXIoLS1zcGFjaW5nKSouNSl9Lm10LTF7bWFyZ2luLXRvcDpjYWxjKHZhcigtLXNwYWNpbmcpKjEpfS5tdC0xXFxcXC41e21hcmdpbi10b3A6Y2FsYyh2YXIoLS1zcGFjaW5nKSoxLjUpfS5tdC0ye21hcmdpbi10b3A6Y2FsYyh2YXIoLS1zcGFjaW5nKSoyKX0ubWItMXttYXJnaW4tYm90dG9tOmNhbGModmFyKC0tc3BhY2luZykqMSl9Lm1iLTJ7bWFyZ2luLWJvdHRvbTpjYWxjKHZhcigtLXNwYWNpbmcpKjIpfS5tYi0ze21hcmdpbi1ib3R0b206Y2FsYyh2YXIoLS1zcGFjaW5nKSozKX0ubWItNHttYXJnaW4tYm90dG9tOmNhbGModmFyKC0tc3BhY2luZykqNCl9Lm1sLWF1dG97bWFyZ2luLWxlZnQ6YXV0b30uYm94LWJvcmRlcntib3gtc2l6aW5nOmJvcmRlci1ib3h9LmJsb2Nre2Rpc3BsYXk6YmxvY2t9LmZsZXh7ZGlzcGxheTpmbGV4fS5ncmlke2Rpc3BsYXk6Z3JpZH0uaW5saW5lLWJsb2Nre2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5pbmxpbmUtZmxleHtkaXNwbGF5OmlubGluZS1mbGV4fS5oLTFcXFxcLjV7aGVpZ2h0OmNhbGModmFyKC0tc3BhY2luZykqMS41KX0uaC0ze2hlaWdodDpjYWxjKHZhcigtLXNwYWNpbmcpKjMpfS5oLTNcXFxcLjV7aGVpZ2h0OmNhbGModmFyKC0tc3BhY2luZykqMy41KX0uaC01e2hlaWdodDpjYWxjKHZhcigtLXNwYWNpbmcpKjUpfS5oLTZ7aGVpZ2h0OmNhbGModmFyKC0tc3BhY2luZykqNil9LmgtN3toZWlnaHQ6Y2FsYyh2YXIoLS1zcGFjaW5nKSo3KX0uaC04e2hlaWdodDpjYWxjKHZhcigtLXNwYWNpbmcpKjgpfS5oLTEwe2hlaWdodDpjYWxjKHZhcigtLXNwYWNpbmcpKjEwKX0uaC0xMntoZWlnaHQ6Y2FsYyh2YXIoLS1zcGFjaW5nKSoxMil9LmgtNDB7aGVpZ2h0OmNhbGModmFyKC0tc3BhY2luZykqNDApfS5oLWZ1bGx7aGVpZ2h0OjEwMCV9Lm1heC1oLTY0e21heC1oZWlnaHQ6Y2FsYyh2YXIoLS1zcGFjaW5nKSo2NCl9Lm1heC1oLTk2e21heC1oZWlnaHQ6Y2FsYyh2YXIoLS1zcGFjaW5nKSo5Nil9LnctMVxcXFwuNXt3aWR0aDpjYWxjKHZhcigtLXNwYWNpbmcpKjEuNSl9LnctM3t3aWR0aDpjYWxjKHZhcigtLXNwYWNpbmcpKjMpfS53LTNcXFxcLjV7d2lkdGg6Y2FsYyh2YXIoLS1zcGFjaW5nKSozLjUpfS53LTV7d2lkdGg6Y2FsYyh2YXIoLS1zcGFjaW5nKSo1KX0udy02e3dpZHRoOmNhbGModmFyKC0tc3BhY2luZykqNil9LnctN3t3aWR0aDpjYWxjKHZhcigtLXNwYWNpbmcpKjcpfS53LTh7d2lkdGg6Y2FsYyh2YXIoLS1zcGFjaW5nKSo4KX0udy0xMHt3aWR0aDpjYWxjKHZhcigtLXNwYWNpbmcpKjEwKX0udy0xMnt3aWR0aDpjYWxjKHZhcigtLXNwYWNpbmcpKjEyKX0udy00MHt3aWR0aDpjYWxjKHZhcigtLXNwYWNpbmcpKjQwKX0udy1hdXRve3dpZHRoOmF1dG99LnctZnVsbHt3aWR0aDoxMDAlfS5tYXgtdy0yeGx7bWF4LXdpZHRoOnZhcigtLWNvbnRhaW5lci0yeGwpfS5tYXgtdy1cXFxcWzI0MHB4XFxcXF17bWF4LXdpZHRoOjI0MHB4fS5tYXgtdy1tZHttYXgtd2lkdGg6dmFyKC0tY29udGFpbmVyLW1kKX0ubWF4LXcteHN7bWF4LXdpZHRoOnZhcigtLWNvbnRhaW5lci14cyl9Lm1pbi13LTB7bWluLXdpZHRoOmNhbGModmFyKC0tc3BhY2luZykqMCl9Lm1pbi13LVxcXFxbMTYwcHhcXFxcXXttaW4td2lkdGg6MTYwcHh9Lm1pbi13LVxcXFxbMjAwcHhcXFxcXXttaW4td2lkdGg6MjAwcHh9LmZsZXgtMXtmbGV4OjF9LnNocmluay0we2ZsZXgtc2hyaW5rOjB9LnRhYmxlLWZpeGVke3RhYmxlLWxheW91dDpmaXhlZH0uYm9yZGVyLWNvbGxhcHNle2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZX0uLXRyYW5zbGF0ZS15LVxcXFxbMnB4XFxcXF17LS10dy10cmFuc2xhdGUteTpjYWxjKDJweCotMSk7dHJhbnNsYXRlOnZhcigtLXR3LXRyYW5zbGF0ZS14KXZhcigtLXR3LXRyYW5zbGF0ZS15KX0ucm90YXRlLTE4MHtyb3RhdGU6MTgwZGVnfS50cmFuc2Zvcm17dHJhbnNmb3JtOnZhcigtLXR3LXJvdGF0ZS14LCl2YXIoLS10dy1yb3RhdGUteSwpdmFyKC0tdHctcm90YXRlLXosKXZhcigtLXR3LXNrZXcteCwpdmFyKC0tdHctc2tldy15LCl9LmFuaW1hdGUtcHVsc2V7YW5pbWF0aW9uOnZhcigtLWFuaW1hdGUtcHVsc2UpfS5jdXJzb3ItZ3JhYntjdXJzb3I6Z3JhYn0uY3Vyc29yLWdyYWJiaW5ne2N1cnNvcjpncmFiYmluZ30uY3Vyc29yLW53c2UtcmVzaXple2N1cnNvcjpud3NlLXJlc2l6ZX0uY3Vyc29yLXBvaW50ZXJ7Y3Vyc29yOnBvaW50ZXJ9LnRvdWNoLW5vbmV7dG91Y2gtYWN0aW9uOm5vbmV9LnJlc2l6ZXtyZXNpemU6Ym90aH0uZ3JpZC1jb2xzLTJ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgyLG1pbm1heCgwLDFmcikpfS5mbGV4LWNvbHtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmZsZXgtd3JhcHtmbGV4LXdyYXA6d3JhcH0uaXRlbXMtY2VudGVye2FsaWduLWl0ZW1zOmNlbnRlcn0uaXRlbXMtc3RhcnR7YWxpZ24taXRlbXM6ZmxleC1zdGFydH0uanVzdGlmeS1iZXR3ZWVue2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufS5qdXN0aWZ5LWNlbnRlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5nYXAtMXtnYXA6Y2FsYyh2YXIoLS1zcGFjaW5nKSoxKX0uZ2FwLTFcXFxcLjV7Z2FwOmNhbGModmFyKC0tc3BhY2luZykqMS41KX0uZ2FwLTJ7Z2FwOmNhbGModmFyKC0tc3BhY2luZykqMil9LmdhcC0ze2dhcDpjYWxjKHZhcigtLXNwYWNpbmcpKjMpfS5nYXAtNHtnYXA6Y2FsYyh2YXIoLS1zcGFjaW5nKSo0KX06d2hlcmUoLnNwYWNlLXktMT46bm90KDpsYXN0LWNoaWxkKSl7LS10dy1zcGFjZS15LXJldmVyc2U6MDttYXJnaW4tYmxvY2stc3RhcnQ6Y2FsYyhjYWxjKHZhcigtLXNwYWNpbmcpKjEpKnZhcigtLXR3LXNwYWNlLXktcmV2ZXJzZSkpO21hcmdpbi1ibG9jay1lbmQ6Y2FsYyhjYWxjKHZhcigtLXNwYWNpbmcpKjEpKmNhbGMoMSAtIHZhcigtLXR3LXNwYWNlLXktcmV2ZXJzZSkpKX06d2hlcmUoLnNwYWNlLXktMj46bm90KDpsYXN0LWNoaWxkKSl7LS10dy1zcGFjZS15LXJldmVyc2U6MDttYXJnaW4tYmxvY2stc3RhcnQ6Y2FsYyhjYWxjKHZhcigtLXNwYWNpbmcpKjIpKnZhcigtLXR3LXNwYWNlLXktcmV2ZXJzZSkpO21hcmdpbi1ibG9jay1lbmQ6Y2FsYyhjYWxjKHZhcigtLXNwYWNpbmcpKjIpKmNhbGMoMSAtIHZhcigtLXR3LXNwYWNlLXktcmV2ZXJzZSkpKX06d2hlcmUoLnNwYWNlLXktMz46bm90KDpsYXN0LWNoaWxkKSl7LS10dy1zcGFjZS15LXJldmVyc2U6MDttYXJnaW4tYmxvY2stc3RhcnQ6Y2FsYyhjYWxjKHZhcigtLXNwYWNpbmcpKjMpKnZhcigtLXR3LXNwYWNlLXktcmV2ZXJzZSkpO21hcmdpbi1ibG9jay1lbmQ6Y2FsYyhjYWxjKHZhcigtLXNwYWNpbmcpKjMpKmNhbGMoMSAtIHZhcigtLXR3LXNwYWNlLXktcmV2ZXJzZSkpKX06d2hlcmUoLmRpdmlkZS15Pjpub3QoOmxhc3QtY2hpbGQpKXstLXR3LWRpdmlkZS15LXJldmVyc2U6MDtib3JkZXItYm90dG9tLXN0eWxlOnZhcigtLXR3LWJvcmRlci1zdHlsZSk7Ym9yZGVyLXRvcC1zdHlsZTp2YXIoLS10dy1ib3JkZXItc3R5bGUpO2JvcmRlci10b3Atd2lkdGg6Y2FsYygxcHgqdmFyKC0tdHctZGl2aWRlLXktcmV2ZXJzZSkpO2JvcmRlci1ib3R0b20td2lkdGg6Y2FsYygxcHgqY2FsYygxIC0gdmFyKC0tdHctZGl2aWRlLXktcmV2ZXJzZSkpKX06d2hlcmUoLmRpdmlkZS1ncmF5LTIwMD46bm90KDpsYXN0LWNoaWxkKSl7Ym9yZGVyLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktMjAwKX0udHJ1bmNhdGV7dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3c6aGlkZGVufS5vdmVyZmxvdy1hdXRve292ZXJmbG93OmF1dG99Lm92ZXJmbG93LWhpZGRlbntvdmVyZmxvdzpoaWRkZW59Lm92ZXJmbG93LXgtaGlkZGVue292ZXJmbG93LXg6aGlkZGVufS5vdmVyZmxvdy15LWF1dG97b3ZlcmZsb3cteTphdXRvfS5yb3VuZGVke2JvcmRlci1yYWRpdXM6LjI1cmVtfS5yb3VuZGVkLWZ1bGx7Ym9yZGVyLXJhZGl1czozLjQwMjgyZTM4cHh9LnJvdW5kZWQtbGd7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtbGcpfS5yb3VuZGVkLW1ke2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzLW1kKX0ucm91bmRlZC1zbXtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1zbSl9LnJvdW5kZWQteGx7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMteGwpfS5ib3JkZXJ7Ym9yZGVyLXN0eWxlOnZhcigtLXR3LWJvcmRlci1zdHlsZSk7Ym9yZGVyLXdpZHRoOjFweH0uYm9yZGVyLXR7Ym9yZGVyLXRvcC1zdHlsZTp2YXIoLS10dy1ib3JkZXItc3R5bGUpO2JvcmRlci10b3Atd2lkdGg6MXB4fS5ib3JkZXItcntib3JkZXItcmlnaHQtc3R5bGU6dmFyKC0tdHctYm9yZGVyLXN0eWxlKTtib3JkZXItcmlnaHQtd2lkdGg6MXB4fS5ib3JkZXItYntib3JkZXItYm90dG9tLXN0eWxlOnZhcigtLXR3LWJvcmRlci1zdHlsZSk7Ym9yZGVyLWJvdHRvbS13aWR0aDoxcHh9LmJvcmRlci1se2JvcmRlci1sZWZ0LXN0eWxlOnZhcigtLXR3LWJvcmRlci1zdHlsZSk7Ym9yZGVyLWxlZnQtd2lkdGg6MXB4fS5ib3JkZXItZGFzaGVkey0tdHctYm9yZGVyLXN0eWxlOmRhc2hlZDtib3JkZXItc3R5bGU6ZGFzaGVkfS5ib3JkZXItYW1iZXItMjAwe2JvcmRlci1jb2xvcjp2YXIoLS1jb2xvci1hbWJlci0yMDApfS5ib3JkZXItYmx1ZS0yMDB7Ym9yZGVyLWNvbG9yOnZhcigtLWNvbG9yLWJsdWUtMjAwKX0uYm9yZGVyLWVtZXJhbGQtMjAwe2JvcmRlci1jb2xvcjp2YXIoLS1jb2xvci1lbWVyYWxkLTIwMCl9LmJvcmRlci1ncmF5LTEwMHtib3JkZXItY29sb3I6dmFyKC0tY29sb3ItZ3JheS0xMDApfS5ib3JkZXItZ3JheS0yMDB7Ym9yZGVyLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktMjAwKX0uYm9yZGVyLXB1cnBsZS0yMDB7Ym9yZGVyLWNvbG9yOnZhcigtLWNvbG9yLXB1cnBsZS0yMDApfS5ib3JkZXItcm9zZS0yMDB7Ym9yZGVyLWNvbG9yOnZhcigtLWNvbG9yLXJvc2UtMjAwKX0uYm9yZGVyLXNreS0yMDB7Ym9yZGVyLWNvbG9yOnZhcigtLWNvbG9yLXNreS0yMDApfS5ib3JkZXItc2xhdGUtMjAwe2JvcmRlci1jb2xvcjp2YXIoLS1jb2xvci1zbGF0ZS0yMDApfS5ib3JkZXItdmlvbGV0LTIwMHtib3JkZXItY29sb3I6dmFyKC0tY29sb3ItdmlvbGV0LTIwMCl9LmJvcmRlci13aGl0ZVxcXFwvMjB7Ym9yZGVyLWNvbG9yOiNmZmYzfUBzdXBwb3J0cyAoY29sb3I6Y29sb3ItbWl4KGluIGxhYiwgcmVkLCByZWQpKXsuYm9yZGVyLXdoaXRlXFxcXC8yMHtib3JkZXItY29sb3I6Y29sb3ItbWl4KGluIG9rbGFiLHZhcigtLWNvbG9yLXdoaXRlKTIwJSx0cmFuc3BhcmVudCl9fS5iZy1hbWJlci01MHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWFtYmVyLTUwKX0uYmctYW1iZXItMTAwe2JhY2tncm91bmQtY29sb3I6dmFyKC0tY29sb3ItYW1iZXItMTAwKX0uYmctYmx1ZS01MHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWJsdWUtNTApfS5iZy1ibHVlLTEwMHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWJsdWUtMTAwKX0uYmctZW1lcmFsZC01MHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWVtZXJhbGQtNTApfS5iZy1lbWVyYWxkLTUwMHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWVtZXJhbGQtNTAwKX0uYmctZ3JheS01MHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktNTApfS5iZy1ncmF5LTUwXFxcXC81MHtiYWNrZ3JvdW5kLWNvbG9yOiNmOWZhZmI4MH1Ac3VwcG9ydHMgKGNvbG9yOmNvbG9yLW1peChpbiBsYWIsIHJlZCwgcmVkKSl7LmJnLWdyYXktNTBcXFxcLzUwe2JhY2tncm91bmQtY29sb3I6Y29sb3ItbWl4KGluIG9rbGFiLHZhcigtLWNvbG9yLWdyYXktNTApNTAlLHRyYW5zcGFyZW50KX19LmJnLWdyYXktMTAwe2JhY2tncm91bmQtY29sb3I6dmFyKC0tY29sb3ItZ3JheS0xMDApfS5iZy1ncmF5LTQwMHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktNDAwKX0uYmctZ3JheS05MDB7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jb2xvci1ncmF5LTkwMCl9LmJnLWdyZWVuLTEwMHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWdyZWVuLTEwMCl9LmJnLXB1cnBsZS01MHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLXB1cnBsZS01MCl9LmJnLXJvc2UtNTB7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jb2xvci1yb3NlLTUwKX0uYmctcm9zZS01MDB7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jb2xvci1yb3NlLTUwMCl9LmJnLXJvc2UtNjAwe2JhY2tncm91bmQtY29sb3I6dmFyKC0tY29sb3Itcm9zZS02MDApfS5iZy1za3ktNTB7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jb2xvci1za3ktNTApfS5iZy1zbGF0ZS05MDB7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jb2xvci1zbGF0ZS05MDApfS5iZy1zbGF0ZS05NTBcXFxcLzk1e2JhY2tncm91bmQtY29sb3I6IzAyMDYxOGYyfUBzdXBwb3J0cyAoY29sb3I6Y29sb3ItbWl4KGluIGxhYiwgcmVkLCByZWQpKXsuYmctc2xhdGUtOTUwXFxcXC85NXtiYWNrZ3JvdW5kLWNvbG9yOmNvbG9yLW1peChpbiBva2xhYix2YXIoLS1jb2xvci1zbGF0ZS05NTApOTUlLHRyYW5zcGFyZW50KX19LmJnLXZpb2xldC01MHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLXZpb2xldC01MCl9LmJnLXdoaXRle2JhY2tncm91bmQtY29sb3I6dmFyKC0tY29sb3Itd2hpdGUpfS5iZy13aGl0ZVxcXFwvNjB7YmFja2dyb3VuZC1jb2xvcjojZmZmOX1Ac3VwcG9ydHMgKGNvbG9yOmNvbG9yLW1peChpbiBsYWIsIHJlZCwgcmVkKSl7LmJnLXdoaXRlXFxcXC82MHtiYWNrZ3JvdW5kLWNvbG9yOmNvbG9yLW1peChpbiBva2xhYix2YXIoLS1jb2xvci13aGl0ZSk2MCUsdHJhbnNwYXJlbnQpfX0uYmctd2hpdGVcXFxcLzk1e2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZmYyfUBzdXBwb3J0cyAoY29sb3I6Y29sb3ItbWl4KGluIGxhYiwgcmVkLCByZWQpKXsuYmctd2hpdGVcXFxcLzk1e2JhY2tncm91bmQtY29sb3I6Y29sb3ItbWl4KGluIG9rbGFiLHZhcigtLWNvbG9yLXdoaXRlKTk1JSx0cmFuc3BhcmVudCl9fS5wLTJ7cGFkZGluZzpjYWxjKHZhcigtLXNwYWNpbmcpKjIpfS5wLTN7cGFkZGluZzpjYWxjKHZhcigtLXNwYWNpbmcpKjMpfS5wLTR7cGFkZGluZzpjYWxjKHZhcigtLXNwYWNpbmcpKjQpfS5weC0xe3BhZGRpbmctaW5saW5lOmNhbGModmFyKC0tc3BhY2luZykqMSl9LnB4LTFcXFxcLjV7cGFkZGluZy1pbmxpbmU6Y2FsYyh2YXIoLS1zcGFjaW5nKSoxLjUpfS5weC0ye3BhZGRpbmctaW5saW5lOmNhbGModmFyKC0tc3BhY2luZykqMil9LnB4LTN7cGFkZGluZy1pbmxpbmU6Y2FsYyh2YXIoLS1zcGFjaW5nKSozKX0ucHgtNHtwYWRkaW5nLWlubGluZTpjYWxjKHZhcigtLXNwYWNpbmcpKjQpfS5weS0wXFxcXC41e3BhZGRpbmctYmxvY2s6Y2FsYyh2YXIoLS1zcGFjaW5nKSouNSl9LnB5LTF7cGFkZGluZy1ibG9jazpjYWxjKHZhcigtLXNwYWNpbmcpKjEpfS5weS0xXFxcXC41e3BhZGRpbmctYmxvY2s6Y2FsYyh2YXIoLS1zcGFjaW5nKSoxLjUpfS5weS0ye3BhZGRpbmctYmxvY2s6Y2FsYyh2YXIoLS1zcGFjaW5nKSoyKX0ucHktMlxcXFwuNXtwYWRkaW5nLWJsb2NrOmNhbGModmFyKC0tc3BhY2luZykqMi41KX0ucHktM3twYWRkaW5nLWJsb2NrOmNhbGModmFyKC0tc3BhY2luZykqMyl9LnB5LTR7cGFkZGluZy1ibG9jazpjYWxjKHZhcigtLXNwYWNpbmcpKjQpfS5weS04e3BhZGRpbmctYmxvY2s6Y2FsYyh2YXIoLS1zcGFjaW5nKSo4KX0udGV4dC1jZW50ZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9LnRleHQtbGVmdHt0ZXh0LWFsaWduOmxlZnR9LmFsaWduLW1pZGRsZXt2ZXJ0aWNhbC1hbGlnbjptaWRkbGV9LmFsaWduLXRvcHt2ZXJ0aWNhbC1hbGlnbjp0b3B9LmZvbnQtbW9ub3tmb250LWZhbWlseTp2YXIoLS1mb250LW1vbm8pfS50ZXh0LWxne2ZvbnQtc2l6ZTp2YXIoLS10ZXh0LWxnKTtsaW5lLWhlaWdodDp2YXIoLS10dy1sZWFkaW5nLHZhcigtLXRleHQtbGctLWxpbmUtaGVpZ2h0KSl9LnRleHQtc217Zm9udC1zaXplOnZhcigtLXRleHQtc20pO2xpbmUtaGVpZ2h0OnZhcigtLXR3LWxlYWRpbmcsdmFyKC0tdGV4dC1zbS0tbGluZS1oZWlnaHQpKX0udGV4dC14c3tmb250LXNpemU6dmFyKC0tdGV4dC14cyk7bGluZS1oZWlnaHQ6dmFyKC0tdHctbGVhZGluZyx2YXIoLS10ZXh0LXhzLS1saW5lLWhlaWdodCkpfS50ZXh0LVxcXFxbOXB4XFxcXF17Zm9udC1zaXplOjlweH0udGV4dC1cXFxcWzEwcHhcXFxcXXtmb250LXNpemU6MTBweH0udGV4dC1cXFxcWzExcHhcXFxcXXtmb250LXNpemU6MTFweH0ubGVhZGluZy1yZWxheGVkey0tdHctbGVhZGluZzp2YXIoLS1sZWFkaW5nLXJlbGF4ZWQpO2xpbmUtaGVpZ2h0OnZhcigtLWxlYWRpbmctcmVsYXhlZCl9LmxlYWRpbmctc251Z3stLXR3LWxlYWRpbmc6dmFyKC0tbGVhZGluZy1zbnVnKTtsaW5lLWhlaWdodDp2YXIoLS1sZWFkaW5nLXNudWcpfS5mb250LW1lZGl1bXstLXR3LWZvbnQtd2VpZ2h0OnZhcigtLWZvbnQtd2VpZ2h0LW1lZGl1bSk7Zm9udC13ZWlnaHQ6dmFyKC0tZm9udC13ZWlnaHQtbWVkaXVtKX0uZm9udC1zZW1pYm9sZHstLXR3LWZvbnQtd2VpZ2h0OnZhcigtLWZvbnQtd2VpZ2h0LXNlbWlib2xkKTtmb250LXdlaWdodDp2YXIoLS1mb250LXdlaWdodC1zZW1pYm9sZCl9LmJyZWFrLXdvcmRze292ZXJmbG93LXdyYXA6YnJlYWstd29yZH0ud2hpdGVzcGFjZS1ub3dyYXB7d2hpdGUtc3BhY2U6bm93cmFwfS53aGl0ZXNwYWNlLXByZS13cmFwe3doaXRlLXNwYWNlOnByZS13cmFwfS50ZXh0LWFtYmVyLTYwMHtjb2xvcjp2YXIoLS1jb2xvci1hbWJlci02MDApfS50ZXh0LWFtYmVyLTcwMHtjb2xvcjp2YXIoLS1jb2xvci1hbWJlci03MDApfS50ZXh0LWFtYmVyLTgwMHtjb2xvcjp2YXIoLS1jb2xvci1hbWJlci04MDApfS50ZXh0LWFtYmVyLTkwMHtjb2xvcjp2YXIoLS1jb2xvci1hbWJlci05MDApfS50ZXh0LWJsdWUtNjAwe2NvbG9yOnZhcigtLWNvbG9yLWJsdWUtNjAwKX0udGV4dC1ibHVlLTcwMHtjb2xvcjp2YXIoLS1jb2xvci1ibHVlLTcwMCl9LnRleHQtYmx1ZS04MDB7Y29sb3I6dmFyKC0tY29sb3ItYmx1ZS04MDApfS50ZXh0LWVtZXJhbGQtNzAwe2NvbG9yOnZhcigtLWNvbG9yLWVtZXJhbGQtNzAwKX0udGV4dC1ncmF5LTMwMHtjb2xvcjp2YXIoLS1jb2xvci1ncmF5LTMwMCl9LnRleHQtZ3JheS00MDB7Y29sb3I6dmFyKC0tY29sb3ItZ3JheS00MDApfS50ZXh0LWdyYXktNTAwe2NvbG9yOnZhcigtLWNvbG9yLWdyYXktNTAwKX0udGV4dC1ncmF5LTYwMHtjb2xvcjp2YXIoLS1jb2xvci1ncmF5LTYwMCl9LnRleHQtZ3JheS03MDB7Y29sb3I6dmFyKC0tY29sb3ItZ3JheS03MDApfS50ZXh0LWdyYXktODAwe2NvbG9yOnZhcigtLWNvbG9yLWdyYXktODAwKX0udGV4dC1ncmF5LTkwMHtjb2xvcjp2YXIoLS1jb2xvci1ncmF5LTkwMCl9LnRleHQtZ3JlZW4tNzAwe2NvbG9yOnZhcigtLWNvbG9yLWdyZWVuLTcwMCl9LnRleHQtZ3JlZW4tODAwe2NvbG9yOnZhcigtLWNvbG9yLWdyZWVuLTgwMCl9LnRleHQtcHVycGxlLTcwMHtjb2xvcjp2YXIoLS1jb2xvci1wdXJwbGUtNzAwKX0udGV4dC1yb3NlLTcwMHtjb2xvcjp2YXIoLS1jb2xvci1yb3NlLTcwMCl9LnRleHQtcm9zZS04MDB7Y29sb3I6dmFyKC0tY29sb3Itcm9zZS04MDApfS50ZXh0LXJvc2UtOTAwe2NvbG9yOnZhcigtLWNvbG9yLXJvc2UtOTAwKX0udGV4dC1za3ktNzAwe2NvbG9yOnZhcigtLWNvbG9yLXNreS03MDApfS50ZXh0LXNsYXRlLTgwMHtjb2xvcjp2YXIoLS1jb2xvci1zbGF0ZS04MDApfS50ZXh0LXNsYXRlLTkwMHtjb2xvcjp2YXIoLS1jb2xvci1zbGF0ZS05MDApfS50ZXh0LXZpb2xldC03MDB7Y29sb3I6dmFyKC0tY29sb3ItdmlvbGV0LTcwMCl9LnRleHQtd2hpdGV7Y29sb3I6dmFyKC0tY29sb3Itd2hpdGUpfS5pdGFsaWN7Zm9udC1zdHlsZTppdGFsaWN9Lm9wYWNpdHktMHtvcGFjaXR5OjB9Lm9wYWNpdHktODB7b3BhY2l0eTouOH0uc2hhZG93LVxcXFxbMF8xMnB4XzMwcHhfcmdiYVxcXFwoMTVcXFxcLDIzXFxcXCw0MlxcXFwsMFxcXFwuMTJcXFxcKVxcXFxdey0tdHctc2hhZG93OjAgMTJweCAzMHB4IHZhcigtLXR3LXNoYWRvdy1jb2xvciwjMGYxNzJhMWYpO2JveC1zaGFkb3c6dmFyKC0tdHctaW5zZXQtc2hhZG93KSx2YXIoLS10dy1pbnNldC1yaW5nLXNoYWRvdyksdmFyKC0tdHctcmluZy1vZmZzZXQtc2hhZG93KSx2YXIoLS10dy1yaW5nLXNoYWRvdyksdmFyKC0tdHctc2hhZG93KX0uc2hhZG93LWxney0tdHctc2hhZG93OjAgMTBweCAxNXB4IC0zcHggdmFyKC0tdHctc2hhZG93LWNvbG9yLCMwMDAwMDAxYSksMCA0cHggNnB4IC00cHggdmFyKC0tdHctc2hhZG93LWNvbG9yLCMwMDAwMDAxYSk7Ym94LXNoYWRvdzp2YXIoLS10dy1pbnNldC1zaGFkb3cpLHZhcigtLXR3LWluc2V0LXJpbmctc2hhZG93KSx2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3cpLHZhcigtLXR3LXJpbmctc2hhZG93KSx2YXIoLS10dy1zaGFkb3cpfS5zaGFkb3ctbWR7LS10dy1zaGFkb3c6MCA0cHggNnB4IC0xcHggdmFyKC0tdHctc2hhZG93LWNvbG9yLCMwMDAwMDAxYSksMCAycHggNHB4IC0ycHggdmFyKC0tdHctc2hhZG93LWNvbG9yLCMwMDAwMDAxYSk7Ym94LXNoYWRvdzp2YXIoLS10dy1pbnNldC1zaGFkb3cpLHZhcigtLXR3LWluc2V0LXJpbmctc2hhZG93KSx2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3cpLHZhcigtLXR3LXJpbmctc2hhZG93KSx2YXIoLS10dy1zaGFkb3cpfS5zaGFkb3ctc217LS10dy1zaGFkb3c6MCAxcHggM3B4IDAgdmFyKC0tdHctc2hhZG93LWNvbG9yLCMwMDAwMDAxYSksMCAxcHggMnB4IC0xcHggdmFyKC0tdHctc2hhZG93LWNvbG9yLCMwMDAwMDAxYSk7Ym94LXNoYWRvdzp2YXIoLS10dy1pbnNldC1zaGFkb3cpLHZhcigtLXR3LWluc2V0LXJpbmctc2hhZG93KSx2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3cpLHZhcigtLXR3LXJpbmctc2hhZG93KSx2YXIoLS10dy1zaGFkb3cpfS5yaW5nLTF7LS10dy1yaW5nLXNoYWRvdzp2YXIoLS10dy1yaW5nLWluc2V0LCkwIDAgMCBjYWxjKDFweCArIHZhcigtLXR3LXJpbmctb2Zmc2V0LXdpZHRoKSl2YXIoLS10dy1yaW5nLWNvbG9yLGN1cnJlbnRjb2xvcik7Ym94LXNoYWRvdzp2YXIoLS10dy1pbnNldC1zaGFkb3cpLHZhcigtLXR3LWluc2V0LXJpbmctc2hhZG93KSx2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3cpLHZhcigtLXR3LXJpbmctc2hhZG93KSx2YXIoLS10dy1zaGFkb3cpfS5yaW5nLWJsYWNrXFxcXC81ey0tdHctcmluZy1jb2xvcjojMDAwMDAwMGR9QHN1cHBvcnRzIChjb2xvcjpjb2xvci1taXgoaW4gbGFiLCByZWQsIHJlZCkpey5yaW5nLWJsYWNrXFxcXC81ey0tdHctcmluZy1jb2xvcjpjb2xvci1taXgoaW4gb2tsYWIsdmFyKC0tY29sb3ItYmxhY2spNSUsdHJhbnNwYXJlbnQpfX0ucmluZy10cmFuc3BhcmVudHstLXR3LXJpbmctY29sb3I6dHJhbnNwYXJlbnR9LnJpbmctd2hpdGVcXFxcLzEwey0tdHctcmluZy1jb2xvcjojZmZmZmZmMWF9QHN1cHBvcnRzIChjb2xvcjpjb2xvci1taXgoaW4gbGFiLCByZWQsIHJlZCkpey5yaW5nLXdoaXRlXFxcXC8xMHstLXR3LXJpbmctY29sb3I6Y29sb3ItbWl4KGluIG9rbGFiLHZhcigtLWNvbG9yLXdoaXRlKTEwJSx0cmFuc3BhcmVudCl9fS5iYWNrZHJvcC1ibHVyLW1key0tdHctYmFja2Ryb3AtYmx1cjpibHVyKHZhcigtLWJsdXItbWQpKTstd2Via2l0LWJhY2tkcm9wLWZpbHRlcjp2YXIoLS10dy1iYWNrZHJvcC1ibHVyLCl2YXIoLS10dy1iYWNrZHJvcC1icmlnaHRuZXNzLCl2YXIoLS10dy1iYWNrZHJvcC1jb250cmFzdCwpdmFyKC0tdHctYmFja2Ryb3AtZ3JheXNjYWxlLCl2YXIoLS10dy1iYWNrZHJvcC1odWUtcm90YXRlLCl2YXIoLS10dy1iYWNrZHJvcC1pbnZlcnQsKXZhcigtLXR3LWJhY2tkcm9wLW9wYWNpdHksKXZhcigtLXR3LWJhY2tkcm9wLXNhdHVyYXRlLCl2YXIoLS10dy1iYWNrZHJvcC1zZXBpYSwpO2JhY2tkcm9wLWZpbHRlcjp2YXIoLS10dy1iYWNrZHJvcC1ibHVyLCl2YXIoLS10dy1iYWNrZHJvcC1icmlnaHRuZXNzLCl2YXIoLS10dy1iYWNrZHJvcC1jb250cmFzdCwpdmFyKC0tdHctYmFja2Ryb3AtZ3JheXNjYWxlLCl2YXIoLS10dy1iYWNrZHJvcC1odWUtcm90YXRlLCl2YXIoLS10dy1iYWNrZHJvcC1pbnZlcnQsKXZhcigtLXR3LWJhY2tkcm9wLW9wYWNpdHksKXZhcigtLXR3LWJhY2tkcm9wLXNhdHVyYXRlLCl2YXIoLS10dy1iYWNrZHJvcC1zZXBpYSwpfS5iYWNrZHJvcC1ibHVyLXNtey0tdHctYmFja2Ryb3AtYmx1cjpibHVyKHZhcigtLWJsdXItc20pKTstd2Via2l0LWJhY2tkcm9wLWZpbHRlcjp2YXIoLS10dy1iYWNrZHJvcC1ibHVyLCl2YXIoLS10dy1iYWNrZHJvcC1icmlnaHRuZXNzLCl2YXIoLS10dy1iYWNrZHJvcC1jb250cmFzdCwpdmFyKC0tdHctYmFja2Ryb3AtZ3JheXNjYWxlLCl2YXIoLS10dy1iYWNrZHJvcC1odWUtcm90YXRlLCl2YXIoLS10dy1iYWNrZHJvcC1pbnZlcnQsKXZhcigtLXR3LWJhY2tkcm9wLW9wYWNpdHksKXZhcigtLXR3LWJhY2tkcm9wLXNhdHVyYXRlLCl2YXIoLS10dy1iYWNrZHJvcC1zZXBpYSwpO2JhY2tkcm9wLWZpbHRlcjp2YXIoLS10dy1iYWNrZHJvcC1ibHVyLCl2YXIoLS10dy1iYWNrZHJvcC1icmlnaHRuZXNzLCl2YXIoLS10dy1iYWNrZHJvcC1jb250cmFzdCwpdmFyKC0tdHctYmFja2Ryb3AtZ3JheXNjYWxlLCl2YXIoLS10dy1iYWNrZHJvcC1odWUtcm90YXRlLCl2YXIoLS10dy1iYWNrZHJvcC1pbnZlcnQsKXZhcigtLXR3LWJhY2tkcm9wLW9wYWNpdHksKXZhcigtLXR3LWJhY2tkcm9wLXNhdHVyYXRlLCl2YXIoLS10dy1iYWNrZHJvcC1zZXBpYSwpfS50cmFuc2l0aW9ue3RyYW5zaXRpb24tcHJvcGVydHk6Y29sb3IsYmFja2dyb3VuZC1jb2xvcixib3JkZXItY29sb3Isb3V0bGluZS1jb2xvcix0ZXh0LWRlY29yYXRpb24tY29sb3IsZmlsbCxzdHJva2UsLS10dy1ncmFkaWVudC1mcm9tLC0tdHctZ3JhZGllbnQtdmlhLC0tdHctZ3JhZGllbnQtdG8sb3BhY2l0eSxib3gtc2hhZG93LHRyYW5zZm9ybSx0cmFuc2xhdGUsc2NhbGUscm90YXRlLGZpbHRlciwtd2Via2l0LWJhY2tkcm9wLWZpbHRlcixiYWNrZHJvcC1maWx0ZXIsZGlzcGxheSxjb250ZW50LXZpc2liaWxpdHksb3ZlcmxheSxwb2ludGVyLWV2ZW50czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjp2YXIoLS10dy1lYXNlLHZhcigtLWRlZmF1bHQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24pKTt0cmFuc2l0aW9uLWR1cmF0aW9uOnZhcigtLXR3LWR1cmF0aW9uLHZhcigtLWRlZmF1bHQtdHJhbnNpdGlvbi1kdXJhdGlvbikpfS5vdXRsaW5lLW5vbmV7LS10dy1vdXRsaW5lLXN0eWxlOm5vbmU7b3V0bGluZS1zdHlsZTpub25lfS5zZWxlY3Qtbm9uZXstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX1AbWVkaWEgKGhvdmVyOmhvdmVyKXsuZ3JvdXAtaG92ZXJcXFxcOm9wYWNpdHktMTAwOmlzKDp3aGVyZSguZ3JvdXApOmhvdmVyICope29wYWNpdHk6MX0uaG92ZXJcXFxcOnNjYWxlLTEwNTpob3ZlcnstLXR3LXNjYWxlLXg6MTA1JTstLXR3LXNjYWxlLXk6MTA1JTstLXR3LXNjYWxlLXo6MTA1JTtzY2FsZTp2YXIoLS10dy1zY2FsZS14KXZhcigtLXR3LXNjYWxlLXkpfS5ob3ZlclxcXFw6Ym9yZGVyLWdyYXktMzAwOmhvdmVye2JvcmRlci1jb2xvcjp2YXIoLS1jb2xvci1ncmF5LTMwMCl9LmhvdmVyXFxcXDpib3JkZXItd2hpdGVcXFxcLzMwOmhvdmVye2JvcmRlci1jb2xvcjojZmZmZmZmNGR9QHN1cHBvcnRzIChjb2xvcjpjb2xvci1taXgoaW4gbGFiLCByZWQsIHJlZCkpey5ob3ZlclxcXFw6Ym9yZGVyLXdoaXRlXFxcXC8zMDpob3Zlcntib3JkZXItY29sb3I6Y29sb3ItbWl4KGluIG9rbGFiLHZhcigtLWNvbG9yLXdoaXRlKTMwJSx0cmFuc3BhcmVudCl9fS5ob3ZlclxcXFw6YmctYmx1ZS01MFxcXFwvNTA6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWZmNmZmODB9QHN1cHBvcnRzIChjb2xvcjpjb2xvci1taXgoaW4gbGFiLCByZWQsIHJlZCkpey5ob3ZlclxcXFw6YmctYmx1ZS01MFxcXFwvNTA6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpjb2xvci1taXgoaW4gb2tsYWIsdmFyKC0tY29sb3ItYmx1ZS01MCk1MCUsdHJhbnNwYXJlbnQpfX0uaG92ZXJcXFxcOmJnLWdyYXktNTA6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jb2xvci1ncmF5LTUwKX0uaG92ZXJcXFxcOmJnLWdyYXktMTAwOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY29sb3ItZ3JheS0xMDApfS5ob3ZlclxcXFw6YmctZ3JheS0yMDA6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jb2xvci1ncmF5LTIwMCl9LmhvdmVyXFxcXDpiZy1ncmF5LTgwMDpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktODAwKX0uaG92ZXJcXFxcOmJnLXNsYXRlLTkwMFxcXFwvOTU6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojMGYxNzJiZjJ9QHN1cHBvcnRzIChjb2xvcjpjb2xvci1taXgoaW4gbGFiLCByZWQsIHJlZCkpey5ob3ZlclxcXFw6Ymctc2xhdGUtOTAwXFxcXC85NTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOmNvbG9yLW1peChpbiBva2xhYix2YXIoLS1jb2xvci1zbGF0ZS05MDApOTUlLHRyYW5zcGFyZW50KX19LmhvdmVyXFxcXDp0ZXh0LWdyYXktNjAwOmhvdmVye2NvbG9yOnZhcigtLWNvbG9yLWdyYXktNjAwKX0uaG92ZXJcXFxcOnRleHQtZ3JheS05MDA6aG92ZXJ7Y29sb3I6dmFyKC0tY29sb3ItZ3JheS05MDApfX0uZm9jdXNcXFxcOmJvcmRlci1ncmF5LTMwMDpmb2N1c3tib3JkZXItY29sb3I6dmFyKC0tY29sb3ItZ3JheS0zMDApfS5mb2N1c1xcXFw6YmctZ3JheS01MDpmb2N1c3tiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktNTApfS5mb2N1c1xcXFw6cmluZy0yOmZvY3Vzey0tdHctcmluZy1zaGFkb3c6dmFyKC0tdHctcmluZy1pbnNldCwpMCAwIDAgY2FsYygycHggKyB2YXIoLS10dy1yaW5nLW9mZnNldC13aWR0aCkpdmFyKC0tdHctcmluZy1jb2xvcixjdXJyZW50Y29sb3IpO2JveC1zaGFkb3c6dmFyKC0tdHctaW5zZXQtc2hhZG93KSx2YXIoLS10dy1pbnNldC1yaW5nLXNoYWRvdyksdmFyKC0tdHctcmluZy1vZmZzZXQtc2hhZG93KSx2YXIoLS10dy1yaW5nLXNoYWRvdyksdmFyKC0tdHctc2hhZG93KX0uZm9jdXNcXFxcOnJpbmctZ3JheS0yMDA6Zm9jdXN7LS10dy1yaW5nLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktMjAwKX0uZm9jdXNcXFxcOm91dGxpbmUtbm9uZTpmb2N1c3stLXR3LW91dGxpbmUtc3R5bGU6bm9uZTtvdXRsaW5lLXN0eWxlOm5vbmV9LmZvY3VzLXZpc2libGVcXFxcOm91dGxpbmU6Zm9jdXMtdmlzaWJsZXtvdXRsaW5lLXN0eWxlOnZhcigtLXR3LW91dGxpbmUtc3R5bGUpO291dGxpbmUtd2lkdGg6MXB4fS5mb2N1cy12aXNpYmxlXFxcXDpvdXRsaW5lLTI6Zm9jdXMtdmlzaWJsZXtvdXRsaW5lLXN0eWxlOnZhcigtLXR3LW91dGxpbmUtc3R5bGUpO291dGxpbmUtd2lkdGg6MnB4fS5mb2N1cy12aXNpYmxlXFxcXDpvdXRsaW5lLW9mZnNldC0yOmZvY3VzLXZpc2libGV7b3V0bGluZS1vZmZzZXQ6MnB4fS5mb2N1cy12aXNpYmxlXFxcXDpvdXRsaW5lLWdyYXktMzAwOmZvY3VzLXZpc2libGV7b3V0bGluZS1jb2xvcjp2YXIoLS1jb2xvci1ncmF5LTMwMCl9LmZvY3VzLXZpc2libGVcXFxcOm91dGxpbmUtZ3JheS00MDA6Zm9jdXMtdmlzaWJsZXtvdXRsaW5lLWNvbG9yOnZhcigtLWNvbG9yLWdyYXktNDAwKX0uZm9jdXMtdmlzaWJsZVxcXFw6b3V0bGluZS1yb3NlLTUwMDpmb2N1cy12aXNpYmxle291dGxpbmUtY29sb3I6dmFyKC0tY29sb3Itcm9zZS01MDApfS5kaXNhYmxlZFxcXFw6Y3Vyc29yLW5vdC1hbGxvd2VkOmRpc2FibGVke2N1cnNvcjpub3QtYWxsb3dlZH0uZGlzYWJsZWRcXFxcOm9wYWNpdHktNTA6ZGlzYWJsZWR7b3BhY2l0eTouNX1AbWVkaWEgKG1pbi13aWR0aDo0OHJlbSl7Lm1kXFxcXDpncmlkLWNvbHMtNHtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDQsbWlubWF4KDAsMWZyKSl9fS5cXFxcW1xcXFwmXFxcXD5zdmdcXFxcXVxcXFw6XFxcXCFoLTg+c3Zne2hlaWdodDpjYWxjKHZhcigtLXNwYWNpbmcpKjgpIWltcG9ydGFudH0uXFxcXFtcXFxcJlxcXFw+c3ZnXFxcXF1cXFxcOlxcXFwhdy04PnN2Z3t3aWR0aDpjYWxjKHZhcigtLXNwYWNpbmcpKjgpIWltcG9ydGFudH0uc3Itb25seXtjbGlwOnJlY3QoMCwwLDAsMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowO3dpZHRoOjFweDtoZWlnaHQ6MXB4O21hcmdpbjotMXB4O3BhZGRpbmc6MDtwb3NpdGlvbjphYnNvbHV0ZTtvdmVyZmxvdzpoaWRkZW59fUBwcm9wZXJ0eSAtLXR3LXRyYW5zbGF0ZS14e3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZTtpbml0aWFsLXZhbHVlOjB9QHByb3BlcnR5IC0tdHctdHJhbnNsYXRlLXl7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MH1AcHJvcGVydHkgLS10dy10cmFuc2xhdGUtentzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2U7aW5pdGlhbC12YWx1ZTowfUBwcm9wZXJ0eSAtLXR3LXJvdGF0ZS14e3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1yb3RhdGUteXtzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2V9QHByb3BlcnR5IC0tdHctcm90YXRlLXp7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlfUBwcm9wZXJ0eSAtLXR3LXNrZXcteHtzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2V9QHByb3BlcnR5IC0tdHctc2tldy15e3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1zcGFjZS15LXJldmVyc2V7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MH1AcHJvcGVydHkgLS10dy1kaXZpZGUteS1yZXZlcnNle3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZTtpbml0aWFsLXZhbHVlOjB9QHByb3BlcnR5IC0tdHctYm9yZGVyLXN0eWxle3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZTtpbml0aWFsLXZhbHVlOnNvbGlkfUBwcm9wZXJ0eSAtLXR3LWxlYWRpbmd7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlfUBwcm9wZXJ0eSAtLXR3LWZvbnQtd2VpZ2h0e3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1zaGFkb3d7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MCAwICMwMDAwfUBwcm9wZXJ0eSAtLXR3LXNoYWRvdy1jb2xvcntzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2V9QHByb3BlcnR5IC0tdHctc2hhZG93LWFscGhhe3N5bnRheDpcIjxwZXJjZW50YWdlPlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MTAwJX1AcHJvcGVydHkgLS10dy1pbnNldC1zaGFkb3d7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MCAwICMwMDAwfUBwcm9wZXJ0eSAtLXR3LWluc2V0LXNoYWRvdy1jb2xvcntzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2V9QHByb3BlcnR5IC0tdHctaW5zZXQtc2hhZG93LWFscGhhe3N5bnRheDpcIjxwZXJjZW50YWdlPlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MTAwJX1AcHJvcGVydHkgLS10dy1yaW5nLWNvbG9ye3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1yaW5nLXNoYWRvd3tzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2U7aW5pdGlhbC12YWx1ZTowIDAgIzAwMDB9QHByb3BlcnR5IC0tdHctaW5zZXQtcmluZy1jb2xvcntzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2V9QHByb3BlcnR5IC0tdHctaW5zZXQtcmluZy1zaGFkb3d7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MCAwICMwMDAwfUBwcm9wZXJ0eSAtLXR3LXJpbmctaW5zZXR7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlfUBwcm9wZXJ0eSAtLXR3LXJpbmctb2Zmc2V0LXdpZHRoe3N5bnRheDpcIjxsZW5ndGg+XCI7aW5oZXJpdHM6ZmFsc2U7aW5pdGlhbC12YWx1ZTowfUBwcm9wZXJ0eSAtLXR3LXJpbmctb2Zmc2V0LWNvbG9ye3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZTtpbml0aWFsLXZhbHVlOiNmZmZ9QHByb3BlcnR5IC0tdHctcmluZy1vZmZzZXQtc2hhZG93e3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZTtpbml0aWFsLXZhbHVlOjAgMCAjMDAwMH1AcHJvcGVydHkgLS10dy1iYWNrZHJvcC1ibHVye3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1iYWNrZHJvcC1icmlnaHRuZXNze3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1iYWNrZHJvcC1jb250cmFzdHtzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2V9QHByb3BlcnR5IC0tdHctYmFja2Ryb3AtZ3JheXNjYWxle3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1iYWNrZHJvcC1odWUtcm90YXRle3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1iYWNrZHJvcC1pbnZlcnR7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlfUBwcm9wZXJ0eSAtLXR3LWJhY2tkcm9wLW9wYWNpdHl7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlfUBwcm9wZXJ0eSAtLXR3LWJhY2tkcm9wLXNhdHVyYXRle3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZX1AcHJvcGVydHkgLS10dy1iYWNrZHJvcC1zZXBpYXtzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2V9QHByb3BlcnR5IC0tdHctc2NhbGUteHtzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2U7aW5pdGlhbC12YWx1ZToxfUBwcm9wZXJ0eSAtLXR3LXNjYWxlLXl7c3ludGF4OlwiKlwiO2luaGVyaXRzOmZhbHNlO2luaXRpYWwtdmFsdWU6MX1AcHJvcGVydHkgLS10dy1zY2FsZS16e3N5bnRheDpcIipcIjtpbmhlcml0czpmYWxzZTtpbml0aWFsLXZhbHVlOjF9QHByb3BlcnR5IC0tdHctb3V0bGluZS1zdHlsZXtzeW50YXg6XCIqXCI7aW5oZXJpdHM6ZmFsc2U7aW5pdGlhbC12YWx1ZTpzb2xpZH1Aa2V5ZnJhbWVzIHB1bHNlezUwJXtvcGFjaXR5Oi41fX0nO1xuXG4vLyBzcmMvYXNzZXRzL2luc3BlY3Rvci1sb2dvLnN2Z1xudmFyIGluc3BlY3Rvcl9sb2dvX2RlZmF1bHQgPSAnZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgd2lkdGg9XCIxMzZcIiBoZWlnaHQ9XCIyNlwiIHZpZXdCb3g9XCIwIDAgMTM2IDI2XCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+JTBBPHBhdGggZD1cIk0xNS41MjUzIDExLjA4MjhIMTEuMjYwMkMxMS4yMjk5IDEwLjcyOTkgMTEuMTQ5MiAxMC40MDk3IDExLjAxODEgMTAuMTIyNEMxMC44OTIxIDkuODM1MDMgMTAuNzE1NyA5LjU4OCAxMC40ODg4IDkuMzgxMjlDMTAuMjY3IDkuMTY5NTggOS45OTcyNSA5LjAwODE4IDkuNjc5NjQgOC44OTczM0M5LjM2MjAyIDguNzgxMzYgOS4wMDE1NSA4LjcyMzM4IDguNTk4MjMgOC43MjMzOEM3Ljg5MjQyIDguNzIzMzggNy4yOTUwMSA4Ljg5NDc3IDYuODA1OTggOS4yMzc1NkM2LjMyMiA5LjU4MDQ1IDUuOTUzOTcgMTAuMDcyIDUuNzAxODkgMTAuNzEyMkM1LjQ1NDg2IDExLjM1MjQgNS4zMzEzNCAxMi4xMjEzIDUuMzMxMzQgMTMuMDE4N0M1LjMzMTM0IDEzLjk2NjUgNS40NTczOCAxNC43NjA2IDUuNzA5NDYgMTUuNDAwOEM1Ljk2NjU3IDE2LjAzNjEgNi4zMzcxMiAxNi41MTUgNi44MjExMSAxNi44Mzc2QzcuMzA1MDkgMTcuMTU1MyA3Ljg4NzM5IDE3LjMxNCA4LjU2Nzk4IDE3LjMxNEM4Ljk1NjE4IDE3LjMxNCA5LjMwNDA0IDE3LjI2NjIgOS42MTE1OCAxNy4xNzA0QzkuOTE5MTEgMTcuMDY5NSAxMC4xODYzIDE2LjkyNTkgMTAuNDEzMiAxNi43MzkzQzEwLjY0IDE2LjU1MjggMTAuODI0MSAxNi4zMjg0IDEwLjk2NTMgMTYuMDY2M0MxMS4xMTE0IDE1Ljc5OTEgMTEuMjA5NyAxNS40OTkxIDExLjI2MDIgMTUuMTY2NEwxNS41MjUzIDE1LjE5NjdDMTUuNDc0OCAxNS44NTIgMTUuMjkwOCAxNi41MiAxNC45NzMyIDE3LjIwMDZDMTQuNjU1NiAxNy44NzYyIDE0LjIwNDQgMTguNTAxMyAxMy42MTk1IDE5LjA3NkMxMy4wMzk4IDE5LjY0NTcgMTIuMzIxNCAyMC4xMDQ2IDExLjQ2NDMgMjAuNDUyNEMxMC42MDczIDIwLjgwMDMgOS42MTE1OCAyMC45NzQyIDguNDc3MjQgMjAuOTc0MkM3LjA1NTU0IDIwLjk3NDIgNS43ODAwNCAyMC42NjkyIDQuNjUwNzQgMjAuMDU5MkMzLjUyNjQ5IDE5LjQ0OTEgMi42MzY2NyAxOC41NTE3IDEuOTgxMjYgMTcuMzY3QzEuMzMwOTEgMTYuMTgyMyAxLjAwNTc0IDE0LjczMjggMS4wMDU3NCAxMy4wMTg3QzEuMDA1NzQgMTEuMjk0NiAxLjMzODQ4IDkuODQyNTkgMi4wMDM5NiA4LjY2Mjg1QzIuNjY5NDQgNy40NzgxMSAzLjU2NjgyIDYuNTgzMjQgNC42OTYxMSA1Ljk3ODI3QzUuODI1NDEgNS4zNjgyNSA3LjA4NTc4IDUuMDYzMjMgOC40NzcyNCA1LjA2MzIzQzkuNDU1MjggNS4wNjMyMyAxMC4zNTUyIDUuMTk2ODMgMTEuMTc3IDUuNDY0MDNDMTEuOTk4NyA1LjczMTIzIDEyLjcxOTYgNi4xMjE5NCAxMy4zMzk3IDYuNjM2MThDMTMuOTU5OSA3LjE0NTM3IDE0LjQ1ODkgNy43NzMwMiAxNC44MzcxIDguNTE5MjJDMTUuMjE1MiA5LjI2NTMzIDE1LjQ0NDYgMTAuMTE5OCAxNS41MjUzIDExLjA4MjhaXCIgZmlsbD1cIiUyMzAxMDUwN1wiLz4lMEE8cGF0aCBkPVwiTTIzLjA4OTQgMjAuOTc0MkMyMS44MjkgMjAuOTc0MiAyMC43NTAxIDIwLjcyNDYgMTkuODUyNyAyMC4yMjU2QzE4Ljk1NTMgMTkuNzIxNCAxOC4yNjcyIDE5LjAyMDYgMTcuNzg4MyAxOC4xMjMyQzE3LjMwOTMgMTcuMjIwOCAxNy4wNjk4IDE2LjE3NDcgMTcuMDY5OCAxNC45ODQ5QzE3LjA2OTggMTMuNzk1MSAxNy4zMDkzIDEyLjc1MTYgMTcuNzg4MyAxMS44NTQyQzE4LjI2NzIgMTAuOTUxNyAxOC45NTUzIDEwLjI1MDkgMTkuODUyNyA5Ljc1MTg0QzIwLjc1MDEgOS4yNDc2NyAyMS44MjkgOC45OTU2NCAyMy4wODk0IDguOTk1NjRDMjQuMzQ5OCA4Ljk5NTY0IDI1LjQyODYgOS4yNDc2NyAyNi4zMjYgOS43NTE4NEMyNy4yMjM0IDEwLjI1MDkgMjcuOTExNSAxMC45NTE3IDI4LjM5MDUgMTEuODU0MkMyOC44Njk1IDEyLjc1MTYgMjkuMTA4OSAxMy43OTUxIDI5LjEwODkgMTQuOTg0OUMyOS4xMDg5IDE2LjE3NDcgMjguODY5NSAxNy4yMjA4IDI4LjM5MDUgMTguMTIzMkMyNy45MTE1IDE5LjAyMDYgMjcuMjIzNCAxOS43MjE0IDI2LjMyNiAyMC4yMjU2QzI1LjQyODYgMjAuNzI0NiAyNC4zNDk4IDIwLjk3NDIgMjMuMDg5NCAyMC45NzQyWk0yMy4xMTk2IDE3Ljg4ODhDMjMuNDcyNiAxNy44ODg4IDIzLjc3NzYgMTcuNzcwMyAyNC4wMzQ2IDE3LjUzMzRDMjQuMjkxOCAxNy4yOTY1IDI0LjQ5MDkgMTYuOTU4NyAyNC42MzIxIDE2LjUyMDFDMjQuNzczMyAxNi4wODE0IDI0Ljg0MzggMTUuNTU5NyAyNC44NDM4IDE0Ljk1NDdDMjQuODQzOCAxNC4zNDQ2IDI0Ljc3MzMgMTMuODIyOCAyNC42MzIxIDEzLjM4OTNDMjQuNDkwOSAxMi45NTA2IDI0LjI5MTggMTIuNjEyOCAyNC4wMzQ2IDEyLjM3NTlDMjMuNzc3NiAxMi4xMzkgMjMuNDcyNiAxMi4wMjA1IDIzLjExOTYgMTIuMDIwNUMyMi43NDY2IDEyLjAyMDUgMjIuNDI2NSAxMi4xMzkgMjIuMTU5MiAxMi4zNzU5QzIxLjg5MjEgMTIuNjEyOCAyMS42ODc4IDEyLjk1MDYgMjEuNTQ2NiAxMy4zODkzQzIxLjQwNTYgMTMuODIyOCAyMS4zMzQ5IDE0LjM0NDYgMjEuMzM0OSAxNC45NTQ3QzIxLjMzNDkgMTUuNTU5NyAyMS40MDU2IDE2LjA4MTQgMjEuNTQ2NiAxNi41MjAxQzIxLjY4NzggMTYuOTU4NyAyMS44OTIxIDE3LjI5NjUgMjIuMTU5MiAxNy41MzM0QzIyLjQyNjUgMTcuNzcwMyAyMi43NDY2IDE3Ljg4ODggMjMuMTE5NiAxNy44ODg4WlwiIGZpbGw9XCIlMjMwMTA1MDdcIi8+JTBBPHBhdGggZD1cIk0zMC44MDI5IDI1LjExODRWOS4xNDY4MUgzNC45NDdWMTEuMTczNUgzNS4wMzc3QzM1LjE4OSAxMC43ODAzIDM1LjQxMDkgMTAuNDE5OSAzNS43MDMyIDEwLjA5MjJDMzUuOTk1NyA5Ljc1OTQgMzYuMzU4NyA5LjQ5NDcgMzYuNzkyMiA5LjI5ODFDMzcuMjI1NyA5LjA5NjM5IDM3LjcyOTkgOC45OTU2NCAzOC4zMDQ2IDguOTk1NjRDMzkuMDcwOSA4Ljk5NTY0IDM5Ljc5OTUgOS4xOTk3OSA0MC40OTAxIDkuNjA4MTFDNDEuMTg1OCAxMC4wMTY1IDQxLjc1MDUgMTAuNjU5MyA0Mi4xODQxIDExLjUzNjVDNDIuNjIyNyAxMi40MTM4IDQyLjg0MiAxMy41NTMxIDQyLjg0MiAxNC45NTQ3QzQyLjg0MiAxNi4yOTU3IDQyLjYzMjggMTcuNDA3MyA0Mi4yMTQzIDE4LjI4OTZDNDEuODAxIDE5LjE3MTkgNDEuMjQ2NCAxOS44Mjk4IDQwLjU1MDYgMjAuMjYzM0MzOS44NTk5IDIwLjY5NyAzOS4xMDExIDIwLjkxMzcgMzguMjc0NCAyMC45MTM3QzM3LjcyOTkgMjAuOTEzNyAzNy4yNDM0IDIwLjgyNTUgMzYuODE0OSAyMC42NDlDMzYuMzkxNCAyMC40Njc1IDM2LjAyODQgMjAuMjIzIDM1LjcyNTkgMTkuOTE1NUMzNS40Mjg1IDE5LjYwMjkgMzUuMTk5IDE5LjI1IDM1LjAzNzcgMTguODU2OEgzNC45NzcyVjI1LjExODRIMzAuODAyOVpNMzQuODg2NSAxNC45NTQ3QzM0Ljg4NjUgMTUuNTE5MyAzNC45NTk2IDE2LjAwODMgMzUuMTA1OCAxNi40MjE4QzM1LjI1NyAxNi44MzAxIDM1LjQ2ODggMTcuMTQ3NyAzNS43NDExIDE3LjM3NDZDMzYuMDE4MyAxNy41OTY0IDM2LjM0ODYgMTcuNzA3MyAzNi43MzE3IDE3LjcwNzNDMzcuMTE0OSAxNy43MDczIDM3LjQ0IDE3LjU5ODkgMzcuNzA3MiAxNy4zODIxQzM3Ljk3OTUgMTcuMTYwMyAzOC4xODYyIDE2Ljg0NTIgMzguMzI3MyAxNi40MzY5QzM4LjQ3MzYgMTYuMDIzNCAzOC41NDY2IDE1LjUyOTQgMzguNTQ2NiAxNC45NTQ3QzM4LjU0NjYgMTQuMzc5OSAzOC40NzM2IDEzLjg4ODQgMzguMzI3MyAxMy40OEMzOC4xODYyIDEzLjA2NjYgMzcuOTc5NSAxMi43NTE2IDM3LjcwNzIgMTIuNTM0N0MzNy40NCAxMi4zMTI5IDM3LjExNDkgMTIuMjAyIDM2LjczMTcgMTIuMjAyQzM2LjM0ODYgMTIuMjAyIDM2LjAxODMgMTIuMzEyOSAzNS43NDExIDEyLjUzNDdDMzUuNDY4OCAxMi43NTE2IDM1LjI1NyAxMy4wNjY2IDM1LjEwNTggMTMuNDhDMzQuOTU5NiAxMy44ODg0IDM0Ljg4NjUgMTQuMzc5OSAzNC44ODY1IDE0Ljk1NDdaXCIgZmlsbD1cIiUyMzAxMDUwN1wiLz4lMEE8cGF0aCBkPVwiTTQ0LjU5MDggMjAuNzYyNVY5LjE0Njc4SDQ4Ljc2NTJWMjAuNzYyNUg0NC41OTA4Wk00Ni42Nzc5IDcuOTM2ODNDNDYuMTEzMyA3LjkzNjgzIDQ1LjYyOTQgNy43NTAzMyA0NS4yMjYxIDcuMzc3MjZDNDQuODIyNyA3LjAwNDE5IDQ0LjYyMSA2LjU1NTQ5IDQ0LjYyMSA2LjAzMTE4QzQ0LjYyMSA1LjUwNjg2IDQ0LjgyMjcgNS4wNTgxNiA0NS4yMjYxIDQuNjg1MDlDNDUuNjI5NCA0LjMxMjAyIDQ2LjExMzMgNC4xMjU0OSA0Ni42Nzc5IDQuMTI1NDlDNDcuMjQ3NyA0LjEyNTQ5IDQ3LjczMTYgNC4zMTIwMiA0OC4xMjk5IDQuNjg1MDlDNDguNTMzMiA1LjA1ODE2IDQ4LjczNDkgNS41MDY4NiA0OC43MzQ5IDYuMDMxMThDNDguNzM0OSA2LjU1NTQ5IDQ4LjUzMzIgNy4wMDQxOSA0OC4xMjk5IDcuMzc3MjZDNDcuNzMxNiA3Ljc1MDMzIDQ3LjI0NzcgNy45MzY4MyA0Ni42Nzc5IDcuOTM2ODNaXCIgZmlsbD1cIiUyMzAxMDUwN1wiLz4lMEE8cGF0aCBkPVwiTTU1LjA2NjQgNS4yNzQ5NlYyMC43NjI1SDUwLjg5MlY1LjI3NDk2SDU1LjA2NjRaXCIgZmlsbD1cIiUyMzAxMDUwN1wiLz4lMEE8cGF0aCBkPVwiTTYyLjc4OTMgMjAuOTc0MkM2MS41Mjg5IDIwLjk3NDIgNjAuNDUwMSAyMC43MjQ2IDU5LjU1MjcgMjAuMjI1NkM1OC42NTUzIDE5LjcyMTQgNTcuOTY3MSAxOS4wMjA2IDU3LjQ4ODEgMTguMTIzMkM1Ny4wMDkzIDE3LjIyMDggNTYuNzY5OCAxNi4xNzQ3IDU2Ljc2OTggMTQuOTg0OUM1Ni43Njk4IDEzLjc5NTEgNTcuMDA5MyAxMi43NTE2IDU3LjQ4ODEgMTEuODU0MkM1Ny45NjcxIDEwLjk1MTcgNTguNjU1MyAxMC4yNTA5IDU5LjU1MjcgOS43NTE4NEM2MC40NTAxIDkuMjQ3NjcgNjEuNTI4OSA4Ljk5NTY0IDYyLjc4OTMgOC45OTU2NEM2NC4wNDk3IDguOTk1NjQgNjUuMTI4NiA5LjI0NzY3IDY2LjAyNiA5Ljc1MTg0QzY2LjkyMzQgMTAuMjUwOSA2Ny42MTE1IDEwLjk1MTcgNjguMDkwNCAxMS44NTQyQzY4LjU2OTQgMTIuNzUxNiA2OC44MDg5IDEzLjc5NTEgNjguODA4OSAxNC45ODQ5QzY4LjgwODkgMTYuMTc0NyA2OC41Njk0IDE3LjIyMDggNjguMDkwNCAxOC4xMjMyQzY3LjYxMTUgMTkuMDIwNiA2Ni45MjM0IDE5LjcyMTQgNjYuMDI2IDIwLjIyNTZDNjUuMTI4NiAyMC43MjQ2IDY0LjA0OTcgMjAuOTc0MiA2Mi43ODkzIDIwLjk3NDJaTTYyLjgxOTUgMTcuODg4OEM2My4xNzI0IDE3Ljg4ODggNjMuNDc3NSAxNy43NzAzIDYzLjczNDYgMTcuNTMzNEM2My45OTE3IDE3LjI5NjUgNjQuMTkwOCAxNi45NTg3IDY0LjMzMiAxNi41MjAxQzY0LjQ3MzEgMTYuMDgxNCA2NC41NDM4IDE1LjU1OTcgNjQuNTQzOCAxNC45NTQ3QzY0LjU0MzggMTQuMzQ0NiA2NC40NzMxIDEzLjgyMjggNjQuMzMyIDEzLjM4OTNDNjQuMTkwOCAxMi45NTA2IDYzLjk5MTcgMTIuNjEyOCA2My43MzQ2IDEyLjM3NTlDNjMuNDc3NSAxMi4xMzkgNjMuMTcyNCAxMi4wMjA1IDYyLjgxOTUgMTIuMDIwNUM2Mi40NDY0IDEyLjAyMDUgNjIuMTI2MyAxMi4xMzkgNjEuODU5MiAxMi4zNzU5QzYxLjU5MTkgMTIuNjEyOCA2MS4zODc4IDEyLjk1MDYgNjEuMjQ2NiAxMy4zODkzQzYxLjEwNTQgMTMuODIyOCA2MS4wMzQ5IDE0LjM0NDYgNjEuMDM0OSAxNC45NTQ3QzYxLjAzNDkgMTUuNTU5NyA2MS4xMDU0IDE2LjA4MTQgNjEuMjQ2NiAxNi41MjAxQzYxLjM4NzggMTYuOTU4NyA2MS41OTE5IDE3LjI5NjUgNjEuODU5MiAxNy41MzM0QzYyLjEyNjMgMTcuNzcwMyA2Mi40NDY0IDE3Ljg4ODggNjIuODE5NSAxNy44ODg4WlwiIGZpbGw9XCIlMjMwMTA1MDdcIi8+JTBBPHBhdGggZD1cIk03Ny40Mjk4IDkuMTQ2OFYxMi4xNzE3SDY5Ljc3NjlWOS4xNDY4SDc3LjQyOThaTTcxLjI1OTEgNi4zNjM5Mkg3NS40MzM0VjE3LjAyNjdDNzUuNDMzNCAxNy4xODggNzUuNDYxMiAxNy4zMjQxIDc1LjUxNjYgMTcuNDM1MUM3NS41NzIgMTcuNTQwOSA3NS42NTc4IDE3LjYyMTYgNzUuNzczOCAxNy42NzdDNzUuODg5NyAxNy43Mjc0IDc2LjAzODQgMTcuNzUyNyA3Ni4yMTk5IDE3Ljc1MjdDNzYuMzQ1OSAxNy43NTI3IDc2LjQ5MjEgMTcuNzM3NSA3Ni42NTg1IDE3LjcwNzNDNzYuODI5OSAxNy42NzcgNzYuOTU1OSAxNy42NTE4IDc3LjAzNjYgMTcuNjMxN0w3Ny42NDE2IDIwLjU2NTlDNzcuNDU1MSAyMC42MjEzIDc3LjE4NzkgMjAuNjg5NCA3Ni44NCAyMC43N0M3Ni40OTcyIDIwLjg1MDcgNzYuMDg4OCAyMC45MDM3IDc1LjYxNDkgMjAuOTI4OEM3NC42NTcgMjAuOTc5MiA3My44NTI5IDIwLjg4MDkgNzMuMjAyNiAyMC42MzM5QzcyLjU1MjIgMjAuMzgxOCA3Mi4wNjMxIDE5Ljk4NjEgNzEuNzM1NSAxOS40NDY2QzcxLjQwNzggMTguOTA3MiA3MS4yNDkgMTguMjMxNiA3MS4yNTkxIDE3LjQyVjYuMzYzOTJaXCIgZmlsbD1cIiUyMzAxMDUwN1wiLz4lMEE8cGF0aCBkPVwiTTc5LjMyMjMgMjAuNzYyNVY1LjI3NDk2SDgzLjUyNjhWMTEuNTM2NUg4My43Mzg1TDg4LjM5NyA1LjI3NDk2SDkzLjI5NzNMODguMDY0MiAxMi4xNzE3TDkzLjQxODMgMjAuNzYyNUg4OC4zOTdMODQuOTE4MyAxNC45NTQ2TDgzLjUyNjggMTYuNzY5NlYyMC43NjI1SDc5LjMyMjNaXCIgZmlsbD1cIiUyMzAxMDUwN1wiLz4lMEE8cGF0aCBkPVwiTTk1LjMzMzQgMjAuNzYyNVY5LjE0Njc4SDk5LjUwNzdWMjAuNzYyNUg5NS4zMzM0Wk05Ny40MjA2IDcuOTM2ODNDOTYuODU1OSA3LjkzNjgzIDk2LjM3MTkgNy43NTAzMyA5NS45Njg2IDcuMzc3MjZDOTUuNTY1MyA3LjAwNDE5IDk1LjM2MzcgNi41NTU0OSA5NS4zNjM3IDYuMDMxMThDOTUuMzYzNyA1LjUwNjg2IDk1LjU2NTMgNS4wNTgxNiA5NS45Njg2IDQuNjg1MDlDOTYuMzcxOSA0LjMxMjAyIDk2Ljg1NTkgNC4xMjU0OSA5Ny40MjA2IDQuMTI1NDlDOTcuOTkwMiA0LjEyNTQ5IDk4LjQ3NDMgNC4zMTIwMiA5OC44NzI1IDQuNjg1MDlDOTkuMjc1OCA1LjA1ODE2IDk5LjQ3NzUgNS41MDY4NiA5OS40Nzc1IDYuMDMxMThDOTkuNDc3NSA2LjU1NTQ5IDk5LjI3NTggNy4wMDQxOSA5OC44NzI1IDcuMzc3MjZDOTguNDc0MyA3Ljc1MDMzIDk3Ljk5MDIgNy45MzY4MyA5Ny40MjA2IDcuOTM2ODNaXCIgZmlsbD1cIiUyMzAxMDUwN1wiLz4lMEE8cGF0aCBkPVwiTTEwOC41NjIgOS4xNDY4VjEyLjE3MTdIMTAwLjkwOVY5LjE0NjhIMTA4LjU2MlpNMTAyLjM5MSA2LjM2MzkySDEwNi41NjVWMTcuMDI2N0MxMDYuNTY1IDE3LjE4OCAxMDYuNTkzIDE3LjMyNDEgMTA2LjY0OCAxNy40MzUxQzEwNi43MDQgMTcuNTQwOSAxMDYuNzg5IDE3LjYyMTYgMTA2LjkwNSAxNy42NzdDMTA3LjAyMSAxNy43Mjc0IDEwNy4xNyAxNy43NTI3IDEwNy4zNTIgMTcuNzUyN0MxMDcuNDc4IDE3Ljc1MjcgMTA3LjYyMyAxNy43Mzc1IDEwNy43OTEgMTcuNzA3M0MxMDcuOTYyIDE3LjY3NyAxMDguMDg3IDE3LjY1MTggMTA4LjE2OCAxNy42MzE3TDEwOC43NzQgMjAuNTY1OUMxMDguNTg3IDIwLjYyMTMgMTA4LjMxOSAyMC42ODk0IDEwNy45NzEgMjAuNzdDMTA3LjYyOSAyMC44NTA3IDEwNy4yMiAyMC45MDM3IDEwNi43NDcgMjAuOTI4OEMxMDUuNzg5IDIwLjk3OTIgMTA0Ljk4NSAyMC44ODA5IDEwNC4zMzQgMjAuNjMzOUMxMDMuNjg0IDIwLjM4MTggMTAzLjE5NSAxOS45ODYxIDEwMi44NjcgMTkuNDQ2NkMxMDIuNTQgMTguOTA3MiAxMDIuMzgxIDE4LjIzMTYgMTAyLjM5MSAxNy40MlY2LjM2MzkyWlwiIGZpbGw9XCIlMjMwMTA1MDdcIi8+JTBBPHBhdGggZD1cIk0xMTkuNTM5IDguNjc2NzhDMTIxLjY0OCA1LjkxODY2IDEyMy4zOTggMy4xOTEyOCAxMjQuMDcxIDAuOTg4Nzc3QzEyNC4wODkgMC45Mjg4NDkgMTI0LjE1OSAwLjkwMzM5IDEyNC4yMTIgMC45Mzc5ODdDMTI2LjU1MyAyLjQ4ODY0IDEzMC44MTggMy41MDkzMiAxMzQuNTkxIDMuNTMzMjhDMTM0LjY1NiAzLjUzMzY5IDEzNC43IDMuNTk3NjkgMTM0LjY3NyAzLjY1ODIyQzEzMy40MjMgNi44NDAzOSAxMzEuODkxIDEyLjU0MjMgMTMxLjgzMSAxOS4wNTM2QzEzMS44MzEgMTkuMTUwMyAxMzEuNjk1IDE5LjE4NSAxMzEuNjQ3IDE5LjEwMDlDMTI5LjUgMTUuMzQzOCAxMjIuNjIzIDEwLjA2NDQgMTE5LjU3NCA4LjgxODM4QzExOS41MTggOC43OTUxOSAxMTkuNTAyIDguNzI1NSAxMTkuNTM5IDguNjc2NzhaXCIgZmlsbD1cInVybCglMjNwYWludDBfbGluZWFyXzgwMTBfMTA2MTIpXCIvPiUwQTxwYXRoIGQ9XCJNMTI2LjY1MyA2Ljk4OTY5QzEyMy4zNTcgOC4wMzMyMSAxMjAuMzQ1IDguNjEzMzQgMTE5LjYyNiA4Ljc0NTE2QzExOS41OCA4Ljc1MzU2IDExOS41NzEgOC44MTY4NiAxMTkuNjE0IDguODM0NzNDMTIyLjY4NyAxMC4xMTIxIDEyOS41MyAxNS4zNzYxIDEzMS42NTcgMTkuMTE4QzEzMS42NjEgMTkuMTI2MiAxMzEuNjcxIDE5LjEyOTIgMTMxLjY4IDE5LjEyNTVDMTMxLjY4OCAxOS4xMjE0IDEzMS42OTMgMTkuMTEwOCAxMzEuNjkgMTkuMTAxNkwxMjYuNjUzIDYuOTg5NjlaXCIgZmlsbD1cInVybCglMjNwYWludDFfbGluZWFyXzgwMTBfMTA2MTIpXCIvPiUwQTxwYXRoIGQ9XCJNMTI0LjIyMSAwLjkzMTE3OUMxMjcuMDQzIDIuNDcwMiAxMzAuMzAzIDMuMTYxNDIgMTM0LjYyOSAzLjUyNTY0QzEzNC42NTYgMy41Mjc5NiAxMzQuNjY1IDMuNTY0MzcgMTM0LjY0MSAzLjU3NzAyQzEzNC4wODggMy44NjEzNiAxMzAuOTE4IDUuNDc0MDkgMTI4LjU2NSA2LjMzNzg0QzEyNy45MzQgNi41NjkyNiAxMjcuMyA2Ljc4Mzk0IDEyNi42NzYgNi45ODJDMTI2LjY2MiA2Ljk4NjMzIDEyNi42NDcgNi45Nzk1MSAxMjYuNjQxIDYuOTY2MzFMMTI0LjE1NiAwLjk4OTQ2OUMxMjQuMTM5IDAuOTQ5MjIyIDEyNC4xODMgMC45MTAzMDUgMTI0LjIyMSAwLjkzMTE3OVpcIiBmaWxsPVwidXJsKCUyM3BhaW50Ml9saW5lYXJfODAxMF8xMDYxMilcIi8+JTBBPHBhdGggZD1cIk0xMjQuMTcxIDEuMDIyMDNMMTMxLjc0MiAxOS4wODJcIiBzdHJva2U9XCIlMjM1MTNDOUZcIiBzdHJva2Utd2lkdGg9XCIwLjE4Mzg4MVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIi8+JTBBPHBhdGggZD1cIk0xMTkuNjI4IDguNzQyNzlDMTE5LjYyOCA4Ljc0Mjc5IDEyMy44MDkgNy45OTIzMyAxMjcuNzM5IDYuNjM2NzdDMTMxLjY2OCA1LjI4MTI0IDEzNC41OTQgMy42MjE0IDEzNC41OTQgMy42MjE0XCIgc3Ryb2tlPVwiJTIzNTEzQzlGXCIgc3Ryb2tlLXdpZHRoPVwiMC4xODM4ODFcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIvPiUwQTxwYXRoIGQ9XCJNMTI1LjIwOSAzLjMwMzgzTDEyMi40MDUgMTIuNjM1OE0xMjIuNDA1IDEyLjYzNThIMTI5LjA3TTEyMi40MDUgMTIuNjM1OEwxMTEuODc0IDI1LjAzODNcIiBzdHJva2U9XCIlMjNBQkFCQUJcIiBzdHJva2Utd2lkdGg9XCIwLjMyMTc5N1wiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIi8+JTBBPHBhdGggZD1cIk0xMTkuMTgxIDIyLjQ4NUwxMTcuOTQgMjIuNjU5NkMxMTguNTg0IDI0LjM2MTggMTE5LjkwNCAyNS4xMDUzIDEyMS40NzkgMjUuMTA1M0MxMjUuMzQxIDI1LjEwNTMgMTI0LjE2MyAyMC43MzgyIDEyNi40IDIwLjczODJDMTI4LjAyMyAyMC43MzgyIDEyNy4zNjQgMjQuMjc3OCAxMzAuODU3IDI0LjI3NzhDMTMyLjk4OSAyNC4yNzc4IDEzMy4yMDEgMjIuMTMwMSAxMzIuODM3IDIxLjIwNjFDMTMyLjgzNSAyMS4yMDA1IDEzMi44MzMgMjEuMTk1MyAxMzIuODMgMjEuMTkwMkwxMzIuMjU5IDIwLjMxNTRDMTMyLjIyMiAyMC4yNTcyIDEzMi4xMzEgMjAuMjc5MSAxMzIuMTI1IDIwLjM0ODNMMTMyLjAxOCAyMS40MDg3QzEzMi4wMTEgMjEuNDgyNCAxMzIuMDEzIDIxLjU1NTkgMTMyLjAyMSAyMS42Mjk1QzEzMi4xMDkgMjIuMzYyMSAxMzIuMTY1IDI0LjE0IDEzMC44NTcgMjQuMTRDMTI5LjQ3NyAyNC4xNCAxMjkuMTQ1IDIwLjY0NjIgMTI2LjQgMjAuNjQ2MkMxMjMuMTgxIDIwLjY0NjIgMTIzLjU5NCAyNC45Njc1IDEyMS42MTggMjQuOTY3NUMxMjAuMzEzIDI0Ljk2NzUgMTE5LjMxOSAyMy40OTY0IDExOS4xODEgMjIuNDg1WlwiIGZpbGw9XCJ1cmwoJTIzcGFpbnQzX2xpbmVhcl84MDEwXzEwNjEyKVwiLz4lMEE8ZGVmcz4lMEE8bGluZWFyR3JhZGllbnQgaWQ9XCJwYWludDBfbGluZWFyXzgwMTBfMTA2MTJcIiB4MT1cIjEyOS4zMDFcIiB5MT1cIjIuMzM4NDhcIiB4Mj1cIjEyNS42MjNcIiB5Mj1cIjEyLjQ1MlwiIGdyYWRpZW50VW5pdHM9XCJ1c2VyU3BhY2VPblVzZVwiPiUwQTxzdG9wIHN0b3AtY29sb3I9XCIlMjM2NDMwQUJcIi8+JTBBPHN0b3Agb2Zmc2V0PVwiMVwiIHN0b3AtY29sb3I9XCIlMjNBQTg5RDhcIi8+JTBBPC9saW5lYXJHcmFkaWVudD4lMEE8bGluZWFyR3JhZGllbnQgaWQ9XCJwYWludDFfbGluZWFyXzgwMTBfMTA2MTJcIiB4MT1cIjEyNi40NTFcIiB5MT1cIjguMDM4NzRcIiB4Mj1cIjEyMS43MTdcIiB5Mj1cIjE3LjE4NjlcIiBncmFkaWVudFVuaXRzPVwidXNlclNwYWNlT25Vc2VcIj4lMEE8c3RvcCBzdG9wLWNvbG9yPVwiJTIzMDA1REJCXCIvPiUwQTxzdG9wIG9mZnNldD1cIjFcIiBzdG9wLWNvbG9yPVwiJTIzM0Q5MkU4XCIvPiUwQTwvbGluZWFyR3JhZGllbnQ+JTBBPGxpbmVhckdyYWRpZW50IGlkPVwicGFpbnQyX2xpbmVhcl84MDEwXzEwNjEyXCIgeDE9XCIxMjguNTY1XCIgeTE9XCIyLjMzODQyXCIgeDI9XCIxMjcuMTM5XCIgeTI9XCI2Ljc5NzU1XCIgZ3JhZGllbnRVbml0cz1cInVzZXJTcGFjZU9uVXNlXCI+JTBBPHN0b3Agc3RvcC1jb2xvcj1cIiUyMzFCNzBDNFwiLz4lMEE8c3RvcCBvZmZzZXQ9XCIxXCIgc3RvcC1jb2xvcj1cIiUyMzU0QTRGMlwiLz4lMEE8L2xpbmVhckdyYWRpZW50PiUwQTxsaW5lYXJHcmFkaWVudCBpZD1cInBhaW50M19saW5lYXJfODAxMF8xMDYxMlwiIHgxPVwiMTE3Ljk0XCIgeTE9XCIyMi43ODM4XCIgeDI9XCIxMzIuOTgxXCIgeTI9XCIyMi43ODM4XCIgZ3JhZGllbnRVbml0cz1cInVzZXJTcGFjZU9uVXNlXCI+JTBBPHN0b3Agc3RvcC1jb2xvcj1cIiUyMzQ0OTdFQVwiLz4lMEE8c3RvcCBvZmZzZXQ9XCIwLjI1NDc1NVwiIHN0b3AtY29sb3I9XCIlMjMxNDYzQjJcIi8+JTBBPHN0b3Agb2Zmc2V0PVwiMC40OTg3MjVcIiBzdG9wLWNvbG9yPVwiJTIzMEE0MzdEXCIvPiUwQTxzdG9wIG9mZnNldD1cIjAuNjY2NjY3XCIgc3RvcC1jb2xvcj1cIiUyMzI0NzZDOFwiLz4lMEE8c3RvcCBvZmZzZXQ9XCIwLjk3MjU0MlwiIHN0b3AtY29sb3I9XCIlMjMwQzU0OUFcIi8+JTBBPC9saW5lYXJHcmFkaWVudD4lMEE8L2RlZnM+JTBBPC9zdmc+JTBBJztcblxuLy8gc3JjL2Fzc2V0cy9pbnNwZWN0b3ItbG9nby1pY29uLnN2Z1xudmFyIGluc3BlY3Rvcl9sb2dvX2ljb25fZGVmYXVsdCA9ICdkYXRhOmltYWdlL3N2Zyt4bWwsPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwidXRmLThcIj8+JTBBPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1NVwiIGhlaWdodD1cIjYwXCIgdmlld0JveD1cIjAgMCA1NSA2MFwiIGZpbGw9XCJub25lXCI+JTBBICA8ZyBzdHJva2U9XCIlMjNGRkZGRkZcIiBzdHJva2Utd2lkdGg9XCIzLjMxMjVcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPiUwQSAgICA8cGF0aCBkPVwiTTAgMjEuOTMzNkwxNi41NDQ5IDBDNDAuODQ4MyA1LjM3MzMyIDUzIDguMDU5OTggNTMgOC4wNTk5OEw0My4xMjMgNTZMMCAyMS45MzM2WlwiIC8+JTBBICAgIDxsaW5lIHgxPVwiMTYuNTgyOFwiIHkxPVwiMFwiIHgyPVwiNDMuMjQ1NFwiIHkyPVwiNTZcIiAvPiUwQSAgICA8bGluZSB4MT1cIjBcIiB5MT1cIjIxLjkzMzZcIiB4Mj1cIjUzXCIgeTI9XCI4LjQ4NDIxXCIgLz4lMEEgIDwvZz4lMEE8L3N2Zz4lMEEnO1xuXG4vLyBzcmMvaW5kZXgudHNcbmltcG9ydCB7IHVuc2FmZUhUTUwgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMvdW5zYWZlLWh0bWwuanNcIjtcbmltcG9ydCB7IG1hcmtlZCB9IGZyb20gXCJtYXJrZWRcIjtcbmltcG9ydCB7IGljb25zIH0gZnJvbSBcImx1Y2lkZVwiO1xuaW1wb3J0IHtcbiAgQ29waWxvdEtpdENvcmVSdW50aW1lQ29ubmVjdGlvblN0YXR1c1xufSBmcm9tIFwiQGNvcGlsb3RraXRuZXh0L2NvcmVcIjtcblxuLy8gc3JjL2xpYi9jb250ZXh0LWhlbHBlcnMudHNcbmZ1bmN0aW9uIHVwZGF0ZVNpemVGcm9tRWxlbWVudChzdGF0ZSwgZWxlbWVudCwgZmFsbGJhY2spIHtcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHN0YXRlLnNpemUgPSB7XG4gICAgd2lkdGg6IHJlY3Qud2lkdGggfHwgZmFsbGJhY2sud2lkdGgsXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodCB8fCBmYWxsYmFjay5oZWlnaHRcbiAgfTtcbn1cbmZ1bmN0aW9uIGNsYW1wU2l6ZShzaXplLCB2aWV3cG9ydCwgZWRnZU1hcmdpbiwgbWluV2lkdGgsIG1pbkhlaWdodCkge1xuICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KG1pbldpZHRoLCB2aWV3cG9ydC53aWR0aCAtIGVkZ2VNYXJnaW4gKiAyKTtcbiAgY29uc3QgbWF4SGVpZ2h0ID0gTWF0aC5tYXgobWluSGVpZ2h0LCB2aWV3cG9ydC5oZWlnaHQgLSBlZGdlTWFyZ2luICogMik7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGNsYW1wKHNpemUud2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCksXG4gICAgaGVpZ2h0OiBjbGFtcChzaXplLmhlaWdodCwgbWluSGVpZ2h0LCBtYXhIZWlnaHQpXG4gIH07XG59XG5mdW5jdGlvbiBjb25zdHJhaW5Ub1ZpZXdwb3J0KHN0YXRlLCBwb3NpdGlvbiwgdmlld3BvcnQsIGVkZ2VNYXJnaW4pIHtcbiAgY29uc3QgbWF4WCA9IE1hdGgubWF4KGVkZ2VNYXJnaW4sIHZpZXdwb3J0LndpZHRoIC0gc3RhdGUuc2l6ZS53aWR0aCAtIGVkZ2VNYXJnaW4pO1xuICBjb25zdCBtYXhZID0gTWF0aC5tYXgoZWRnZU1hcmdpbiwgdmlld3BvcnQuaGVpZ2h0IC0gc3RhdGUuc2l6ZS5oZWlnaHQgLSBlZGdlTWFyZ2luKTtcbiAgcmV0dXJuIHtcbiAgICB4OiBjbGFtcChwb3NpdGlvbi54LCBlZGdlTWFyZ2luLCBtYXhYKSxcbiAgICB5OiBjbGFtcChwb3NpdGlvbi55LCBlZGdlTWFyZ2luLCBtYXhZKVxuICB9O1xufVxuZnVuY3Rpb24ga2VlcFBvc2l0aW9uV2l0aGluVmlld3BvcnQoc3RhdGUsIHZpZXdwb3J0LCBlZGdlTWFyZ2luKSB7XG4gIHN0YXRlLnBvc2l0aW9uID0gY29uc3RyYWluVG9WaWV3cG9ydChzdGF0ZSwgc3RhdGUucG9zaXRpb24sIHZpZXdwb3J0LCBlZGdlTWFyZ2luKTtcbn1cbmZ1bmN0aW9uIGNlbnRlckNvbnRleHQoc3RhdGUsIHZpZXdwb3J0LCBlZGdlTWFyZ2luKSB7XG4gIGNvbnN0IGNlbnRlcmVkID0ge1xuICAgIHg6IE1hdGgucm91bmQoKHZpZXdwb3J0LndpZHRoIC0gc3RhdGUuc2l6ZS53aWR0aCkgLyAyKSxcbiAgICB5OiBNYXRoLnJvdW5kKCh2aWV3cG9ydC5oZWlnaHQgLSBzdGF0ZS5zaXplLmhlaWdodCkgLyAyKVxuICB9O1xuICBzdGF0ZS5wb3NpdGlvbiA9IGNvbnN0cmFpblRvVmlld3BvcnQoc3RhdGUsIGNlbnRlcmVkLCB2aWV3cG9ydCwgZWRnZU1hcmdpbik7XG4gIHVwZGF0ZUFuY2hvckZyb21Qb3NpdGlvbihzdGF0ZSwgdmlld3BvcnQsIGVkZ2VNYXJnaW4pO1xuICByZXR1cm4gc3RhdGUucG9zaXRpb247XG59XG5mdW5jdGlvbiB1cGRhdGVBbmNob3JGcm9tUG9zaXRpb24oc3RhdGUsIHZpZXdwb3J0LCBlZGdlTWFyZ2luKSB7XG4gIGNvbnN0IGNlbnRlclggPSBzdGF0ZS5wb3NpdGlvbi54ICsgc3RhdGUuc2l6ZS53aWR0aCAvIDI7XG4gIGNvbnN0IGNlbnRlclkgPSBzdGF0ZS5wb3NpdGlvbi55ICsgc3RhdGUuc2l6ZS5oZWlnaHQgLyAyO1xuICBjb25zdCBob3Jpem9udGFsID0gY2VudGVyWCA8IHZpZXdwb3J0LndpZHRoIC8gMiA/IFwibGVmdFwiIDogXCJyaWdodFwiO1xuICBjb25zdCB2ZXJ0aWNhbCA9IGNlbnRlclkgPCB2aWV3cG9ydC5oZWlnaHQgLyAyID8gXCJ0b3BcIiA6IFwiYm90dG9tXCI7XG4gIHN0YXRlLmFuY2hvciA9IHsgaG9yaXpvbnRhbCwgdmVydGljYWwgfTtcbiAgY29uc3QgbWF4SG9yaXpvbnRhbE9mZnNldCA9IE1hdGgubWF4KGVkZ2VNYXJnaW4sIHZpZXdwb3J0LndpZHRoIC0gc3RhdGUuc2l6ZS53aWR0aCAtIGVkZ2VNYXJnaW4pO1xuICBjb25zdCBtYXhWZXJ0aWNhbE9mZnNldCA9IE1hdGgubWF4KGVkZ2VNYXJnaW4sIHZpZXdwb3J0LmhlaWdodCAtIHN0YXRlLnNpemUuaGVpZ2h0IC0gZWRnZU1hcmdpbik7XG4gIHN0YXRlLmFuY2hvck9mZnNldCA9IHtcbiAgICB4OiBob3Jpem9udGFsID09PSBcImxlZnRcIiA/IGNsYW1wKHN0YXRlLnBvc2l0aW9uLngsIGVkZ2VNYXJnaW4sIG1heEhvcml6b250YWxPZmZzZXQpIDogY2xhbXAodmlld3BvcnQud2lkdGggLSBzdGF0ZS5wb3NpdGlvbi54IC0gc3RhdGUuc2l6ZS53aWR0aCwgZWRnZU1hcmdpbiwgbWF4SG9yaXpvbnRhbE9mZnNldCksXG4gICAgeTogdmVydGljYWwgPT09IFwidG9wXCIgPyBjbGFtcChzdGF0ZS5wb3NpdGlvbi55LCBlZGdlTWFyZ2luLCBtYXhWZXJ0aWNhbE9mZnNldCkgOiBjbGFtcCh2aWV3cG9ydC5oZWlnaHQgLSBzdGF0ZS5wb3NpdGlvbi55IC0gc3RhdGUuc2l6ZS5oZWlnaHQsIGVkZ2VNYXJnaW4sIG1heFZlcnRpY2FsT2Zmc2V0KVxuICB9O1xufVxuZnVuY3Rpb24gYXBwbHlBbmNob3JQb3NpdGlvbihzdGF0ZSwgdmlld3BvcnQsIGVkZ2VNYXJnaW4pIHtcbiAgY29uc3QgbWF4SG9yaXpvbnRhbE9mZnNldCA9IE1hdGgubWF4KGVkZ2VNYXJnaW4sIHZpZXdwb3J0LndpZHRoIC0gc3RhdGUuc2l6ZS53aWR0aCAtIGVkZ2VNYXJnaW4pO1xuICBjb25zdCBtYXhWZXJ0aWNhbE9mZnNldCA9IE1hdGgubWF4KGVkZ2VNYXJnaW4sIHZpZXdwb3J0LmhlaWdodCAtIHN0YXRlLnNpemUuaGVpZ2h0IC0gZWRnZU1hcmdpbik7XG4gIGNvbnN0IGhvcml6b250YWxPZmZzZXQgPSBjbGFtcChzdGF0ZS5hbmNob3JPZmZzZXQueCwgZWRnZU1hcmdpbiwgbWF4SG9yaXpvbnRhbE9mZnNldCk7XG4gIGNvbnN0IHZlcnRpY2FsT2Zmc2V0ID0gY2xhbXAoc3RhdGUuYW5jaG9yT2Zmc2V0LnksIGVkZ2VNYXJnaW4sIG1heFZlcnRpY2FsT2Zmc2V0KTtcbiAgY29uc3QgeCA9IHN0YXRlLmFuY2hvci5ob3Jpem9udGFsID09PSBcImxlZnRcIiA/IGhvcml6b250YWxPZmZzZXQgOiB2aWV3cG9ydC53aWR0aCAtIHN0YXRlLnNpemUud2lkdGggLSBob3Jpem9udGFsT2Zmc2V0O1xuICBjb25zdCB5ID0gc3RhdGUuYW5jaG9yLnZlcnRpY2FsID09PSBcInRvcFwiID8gdmVydGljYWxPZmZzZXQgOiB2aWV3cG9ydC5oZWlnaHQgLSBzdGF0ZS5zaXplLmhlaWdodCAtIHZlcnRpY2FsT2Zmc2V0O1xuICBzdGF0ZS5hbmNob3JPZmZzZXQgPSB7IHg6IGhvcml6b250YWxPZmZzZXQsIHk6IHZlcnRpY2FsT2Zmc2V0IH07XG4gIHN0YXRlLnBvc2l0aW9uID0gY29uc3RyYWluVG9WaWV3cG9ydChzdGF0ZSwgeyB4LCB5IH0sIHZpZXdwb3J0LCBlZGdlTWFyZ2luKTtcbiAgcmV0dXJuIHN0YXRlLnBvc2l0aW9uO1xufVxuZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChtaW4sIHZhbHVlKSwgbWF4KTtcbn1cblxuLy8gc3JjL2xpYi9wZXJzaXN0ZW5jZS50c1xuZnVuY3Rpb24gbG9hZEluc3BlY3RvclN0YXRlKHN0b3JhZ2VLZXkpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCByYXcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSk7XG4gIGlmIChyYXcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyYXcpO1xuICAgICAgaWYgKHBhcnNlZCAmJiB0eXBlb2YgcGFyc2VkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgfVxuICB9XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjb25zdCBwcmVmaXggPSBgJHtzdG9yYWdlS2V5fT1gO1xuICAgIGNvbnN0IGVudHJ5ID0gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIikuZmluZCgoY29va2llKSA9PiBjb29raWUuc3RhcnRzV2l0aChwcmVmaXgpKTtcbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIGNvbnN0IGxlZ2FjeVJhdyA9IGVudHJ5LnN1YnN0cmluZyhwcmVmaXgubGVuZ3RoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KGxlZ2FjeVJhdykpO1xuICAgICAgICBpZiAocGFyc2VkICYmIHR5cGVvZiBwYXJzZWQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gc2F2ZUluc3BlY3RvclN0YXRlKHN0b3JhZ2VLZXksIHN0YXRlKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIHBlcnNpc3QgaW5zcGVjdG9yIHN0YXRlXCIsIGVycm9yKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNWYWxpZEFuY2hvcih2YWx1ZSkge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBjYW5kaWRhdGUgPSB2YWx1ZTtcbiAgcmV0dXJuIChjYW5kaWRhdGUuaG9yaXpvbnRhbCA9PT0gXCJsZWZ0XCIgfHwgY2FuZGlkYXRlLmhvcml6b250YWwgPT09IFwicmlnaHRcIikgJiYgKGNhbmRpZGF0ZS52ZXJ0aWNhbCA9PT0gXCJ0b3BcIiB8fCBjYW5kaWRhdGUudmVydGljYWwgPT09IFwiYm90dG9tXCIpO1xufVxuZnVuY3Rpb24gaXNWYWxpZFBvc2l0aW9uKHZhbHVlKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xuICByZXR1cm4gaXNGaW5pdGVOdW1iZXIoY2FuZGlkYXRlLngpICYmIGlzRmluaXRlTnVtYmVyKGNhbmRpZGF0ZS55KTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRTaXplKHZhbHVlKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xuICByZXR1cm4gaXNGaW5pdGVOdW1iZXIoY2FuZGlkYXRlLndpZHRoKSAmJiBpc0Zpbml0ZU51bWJlcihjYW5kaWRhdGUuaGVpZ2h0KTtcbn1cbmZ1bmN0aW9uIGlzRmluaXRlTnVtYmVyKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWREb2NrTW9kZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IFwiZmxvYXRpbmdcIiB8fCB2YWx1ZSA9PT0gXCJkb2NrZWQtbGVmdFwiO1xufVxuXG4vLyBzcmMvaW5kZXgudHNcbnZhciBXRUJfSU5TUEVDVE9SX1RBRyA9IFwiY3BrLXdlYi1pbnNwZWN0b3JcIjtcbnZhciBFREdFX01BUkdJTiA9IDE2O1xudmFyIERSQUdfVEhSRVNIT0xEID0gNjtcbnZhciBNSU5fV0lORE9XX1dJRFRIID0gNjAwO1xudmFyIE1JTl9XSU5ET1dfV0lEVEhfRE9DS0VEX0xFRlQgPSA0MjA7XG52YXIgTUlOX1dJTkRPV19IRUlHSFQgPSAyMDA7XG52YXIgSU5TUEVDVE9SX1NUT1JBR0VfS0VZID0gXCJjcGs6aW5zcGVjdG9yOnN0YXRlXCI7XG52YXIgQU5OT1VOQ0VNRU5UX1NUT1JBR0VfS0VZID0gXCJjcGs6aW5zcGVjdG9yOmFubm91bmNlbWVudHNcIjtcbnZhciBBTk5PVU5DRU1FTlRfVVJMID0gXCJodHRwczovL2Nkbi5jb3BpbG90a2l0LmFpL2Fubm91bmNlbWVudHMuanNvblwiO1xudmFyIERFRkFVTFRfQlVUVE9OX1NJWkUgPSB7IHdpZHRoOiA0OCwgaGVpZ2h0OiA0OCB9O1xudmFyIERFRkFVTFRfV0lORE9XX1NJWkUgPSB7IHdpZHRoOiA4NDAsIGhlaWdodDogNTYwIH07XG52YXIgRE9DS0VEX0xFRlRfV0lEVEggPSA1MDA7XG52YXIgTUFYX0FHRU5UX0VWRU5UUyA9IDIwMDtcbnZhciBNQVhfVE9UQUxfRVZFTlRTID0gNTAwO1xudmFyIEFHRU5UX0VWRU5UX1RZUEVTID0gW1xuICBcIlJVTl9TVEFSVEVEXCIsXG4gIFwiUlVOX0ZJTklTSEVEXCIsXG4gIFwiUlVOX0VSUk9SXCIsXG4gIFwiVEVYVF9NRVNTQUdFX1NUQVJUXCIsXG4gIFwiVEVYVF9NRVNTQUdFX0NPTlRFTlRcIixcbiAgXCJURVhUX01FU1NBR0VfRU5EXCIsXG4gIFwiVE9PTF9DQUxMX1NUQVJUXCIsXG4gIFwiVE9PTF9DQUxMX0FSR1NcIixcbiAgXCJUT09MX0NBTExfRU5EXCIsXG4gIFwiVE9PTF9DQUxMX1JFU1VMVFwiLFxuICBcIlNUQVRFX1NOQVBTSE9UXCIsXG4gIFwiU1RBVEVfREVMVEFcIixcbiAgXCJNRVNTQUdFU19TTkFQU0hPVFwiLFxuICBcIlJBV19FVkVOVFwiLFxuICBcIkNVU1RPTV9FVkVOVFwiXG5dO1xudmFyIFdlYkluc3BlY3RvckVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIExpdEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuX2NvcmUgPSBudWxsO1xuICAgIHRoaXMuY29yZVN1YnNjcmliZXIgPSBudWxsO1xuICAgIHRoaXMuY29yZVVuc3Vic2NyaWJlID0gbnVsbDtcbiAgICB0aGlzLnJ1bnRpbWVTdGF0dXMgPSBudWxsO1xuICAgIHRoaXMuY29yZVByb3BlcnRpZXMgPSB7fTtcbiAgICB0aGlzLmxhc3RDb3JlRXJyb3IgPSBudWxsO1xuICAgIHRoaXMuYWdlbnRTdWJzY3JpcHRpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLmFnZW50RXZlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLmFnZW50TWVzc2FnZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMuYWdlbnRTdGF0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMuZmxhdHRlbmVkRXZlbnRzID0gW107XG4gICAgdGhpcy5ldmVudENvdW50ZXIgPSAwO1xuICAgIHRoaXMuY29udGV4dFN0b3JlID0ge307XG4gICAgdGhpcy5wb2ludGVySWQgPSBudWxsO1xuICAgIHRoaXMuZHJhZ1N0YXJ0ID0gbnVsbDtcbiAgICB0aGlzLmRyYWdPZmZzZXQgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnBvaW50ZXJDb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuZHJhZ2dlZER1cmluZ0ludGVyYWN0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5pZ25vcmVOZXh0QnV0dG9uQ2xpY2sgPSBmYWxzZTtcbiAgICB0aGlzLnNlbGVjdGVkTWVudSA9IFwiYWctdWktZXZlbnRzXCI7XG4gICAgdGhpcy5jb250ZXh0TWVudU9wZW4gPSBmYWxzZTtcbiAgICB0aGlzLmRvY2tNb2RlID0gXCJmbG9hdGluZ1wiO1xuICAgIHRoaXMucHJldmlvdXNCb2R5TWFyZ2lucyA9IG51bGw7XG4gICAgdGhpcy50cmFuc2l0aW9uVGltZW91dElkID0gbnVsbDtcbiAgICB0aGlzLnBlbmRpbmdTZWxlY3RlZENvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuYXV0b0F0dGFjaENvcmUgPSB0cnVlO1xuICAgIHRoaXMuYXR0ZW1wdGVkQXV0b0F0dGFjaCA9IGZhbHNlO1xuICAgIHRoaXMuY2FjaGVkVG9vbHMgPSBbXTtcbiAgICB0aGlzLnRvb2xTaWduYXR1cmUgPSBcIlwiO1xuICAgIHRoaXMuZXZlbnRGaWx0ZXJUZXh0ID0gXCJcIjtcbiAgICB0aGlzLmV2ZW50VHlwZUZpbHRlciA9IFwiYWxsXCI7XG4gICAgdGhpcy5hbm5vdW5jZW1lbnRNYXJrZG93biA9IG51bGw7XG4gICAgdGhpcy5hbm5vdW5jZW1lbnRIdG1sID0gbnVsbDtcbiAgICB0aGlzLmFubm91bmNlbWVudFRpbWVzdGFtcCA9IG51bGw7XG4gICAgdGhpcy5hbm5vdW5jZW1lbnRQcmV2aWV3VGV4dCA9IG51bGw7XG4gICAgdGhpcy5oYXNVbnNlZW5Bbm5vdW5jZW1lbnQgPSBmYWxzZTtcbiAgICB0aGlzLmFubm91bmNlbWVudExvYWRlZCA9IGZhbHNlO1xuICAgIHRoaXMuYW5ub3VuY2VtZW50TG9hZEVycm9yID0gbnVsbDtcbiAgICB0aGlzLmFubm91bmNlbWVudFByb21pc2UgPSBudWxsO1xuICAgIHRoaXMuc2hvd0Fubm91bmNlbWVudFByZXZpZXcgPSB0cnVlO1xuICAgIHRoaXMuY29udGV4dFN0YXRlID0ge1xuICAgICAgYnV0dG9uOiB7XG4gICAgICAgIHBvc2l0aW9uOiB7IHg6IEVER0VfTUFSR0lOLCB5OiBFREdFX01BUkdJTiB9LFxuICAgICAgICBzaXplOiB7IC4uLkRFRkFVTFRfQlVUVE9OX1NJWkUgfSxcbiAgICAgICAgYW5jaG9yOiB7IGhvcml6b250YWw6IFwicmlnaHRcIiwgdmVydGljYWw6IFwidG9wXCIgfSxcbiAgICAgICAgYW5jaG9yT2Zmc2V0OiB7IHg6IEVER0VfTUFSR0lOLCB5OiBFREdFX01BUkdJTiB9XG4gICAgICB9LFxuICAgICAgd2luZG93OiB7XG4gICAgICAgIHBvc2l0aW9uOiB7IHg6IEVER0VfTUFSR0lOLCB5OiBFREdFX01BUkdJTiB9LFxuICAgICAgICBzaXplOiB7IC4uLkRFRkFVTFRfV0lORE9XX1NJWkUgfSxcbiAgICAgICAgYW5jaG9yOiB7IGhvcml6b250YWw6IFwicmlnaHRcIiwgdmVydGljYWw6IFwidG9wXCIgfSxcbiAgICAgICAgYW5jaG9yT2Zmc2V0OiB7IHg6IEVER0VfTUFSR0lOLCB5OiBFREdFX01BUkdJTiB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmhhc0N1c3RvbVBvc2l0aW9uID0ge1xuICAgICAgYnV0dG9uOiBmYWxzZSxcbiAgICAgIHdpbmRvdzogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMucmVzaXplUG9pbnRlcklkID0gbnVsbDtcbiAgICB0aGlzLnJlc2l6ZVN0YXJ0ID0gbnVsbDtcbiAgICB0aGlzLnJlc2l6ZUluaXRpYWxTaXplID0gbnVsbDtcbiAgICB0aGlzLmlzUmVzaXppbmcgPSBmYWxzZTtcbiAgICB0aGlzLm1lbnVJdGVtcyA9IFtcbiAgICAgIHsga2V5OiBcImFnLXVpLWV2ZW50c1wiLCBsYWJlbDogXCJBRy1VSSBFdmVudHNcIiwgaWNvbjogXCJaYXBcIiB9LFxuICAgICAgeyBrZXk6IFwiYWdlbnRzXCIsIGxhYmVsOiBcIkFnZW50XCIsIGljb246IFwiQm90XCIgfSxcbiAgICAgIHsga2V5OiBcImZyb250ZW5kLXRvb2xzXCIsIGxhYmVsOiBcIkZyb250ZW5kIFRvb2xzXCIsIGljb246IFwiSGFtbWVyXCIgfSxcbiAgICAgIHsga2V5OiBcImFnZW50LWNvbnRleHRcIiwgbGFiZWw6IFwiQ29udGV4dFwiLCBpY29uOiBcIkZpbGVUZXh0XCIgfVxuICAgIF07XG4gICAgdGhpcy5oYW5kbGVQb2ludGVyRG93biA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZG9ja01vZGUgIT09IFwiZmxvYXRpbmdcIiAmJiB0aGlzLmlzT3Blbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgY29uc3QgY29udGV4dEF0dHIgPSB0YXJnZXQ/LmRhdGFzZXQuZHJhZ0NvbnRleHQ7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY29udGV4dEF0dHIgPT09IFwid2luZG93XCIgPyBcIndpbmRvd1wiIDogXCJidXR0b25cIjtcbiAgICAgIGNvbnN0IGV2ZW50VGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgaWYgKGNvbnRleHQgPT09IFwid2luZG93XCIgJiYgZXZlbnRUYXJnZXQ/LmNsb3Nlc3QoXCJidXR0b25cIikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5wb2ludGVyQ29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLm1lYXN1cmVDb250ZXh0KGNvbnRleHQpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucG9pbnRlcklkID0gZXZlbnQucG9pbnRlcklkO1xuICAgICAgdGhpcy5kcmFnU3RhcnQgPSB7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfTtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5jb250ZXh0U3RhdGVbY29udGV4dF07XG4gICAgICB0aGlzLmRyYWdPZmZzZXQgPSB7XG4gICAgICAgIHg6IGV2ZW50LmNsaWVudFggLSBzdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICB5OiBldmVudC5jbGllbnRZIC0gc3RhdGUucG9zaXRpb24ueVxuICAgICAgfTtcbiAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgdGhpcy5kcmFnZ2VkRHVyaW5nSW50ZXJhY3Rpb24gPSBmYWxzZTtcbiAgICAgIHRoaXMuaWdub3JlTmV4dEJ1dHRvbkNsaWNrID0gZmFsc2U7XG4gICAgICB0YXJnZXQ/LnNldFBvaW50ZXJDYXB0dXJlPy4odGhpcy5wb2ludGVySWQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVQb2ludGVyTW92ZSA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMucG9pbnRlcklkICE9PSBldmVudC5wb2ludGVySWQgfHwgIXRoaXMuZHJhZ1N0YXJ0IHx8ICF0aGlzLnBvaW50ZXJDb250ZXh0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5oeXBvdChldmVudC5jbGllbnRYIC0gdGhpcy5kcmFnU3RhcnQueCwgZXZlbnQuY2xpZW50WSAtIHRoaXMuZHJhZ1N0YXJ0LnkpO1xuICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcgJiYgZGlzdGFuY2UgPCBEUkFHX1RIUkVTSE9MRCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zZXREcmFnZ2luZyh0cnVlKTtcbiAgICAgIHRoaXMuZHJhZ2dlZER1cmluZ0ludGVyYWN0aW9uID0gdHJ1ZTtcbiAgICAgIGNvbnN0IGRlc2lyZWQgPSB7XG4gICAgICAgIHg6IGV2ZW50LmNsaWVudFggLSB0aGlzLmRyYWdPZmZzZXQueCxcbiAgICAgICAgeTogZXZlbnQuY2xpZW50WSAtIHRoaXMuZHJhZ09mZnNldC55XG4gICAgICB9O1xuICAgICAgY29uc3QgY29uc3RyYWluZWQgPSB0aGlzLmNvbnN0cmFpblRvVmlld3BvcnQoZGVzaXJlZCwgdGhpcy5wb2ludGVyQ29udGV4dCk7XG4gICAgICB0aGlzLmNvbnRleHRTdGF0ZVt0aGlzLnBvaW50ZXJDb250ZXh0XS5wb3NpdGlvbiA9IGNvbnN0cmFpbmVkO1xuICAgICAgdGhpcy51cGRhdGVIb3N0VHJhbnNmb3JtKHRoaXMucG9pbnRlckNvbnRleHQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVQb2ludGVyVXAgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLnBvaW50ZXJJZCAhPT0gZXZlbnQucG9pbnRlcklkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICBpZiAodGFyZ2V0Py5oYXNQb2ludGVyQ2FwdHVyZSh0aGlzLnBvaW50ZXJJZCkpIHtcbiAgICAgICAgdGFyZ2V0LnJlbGVhc2VQb2ludGVyQ2FwdHVyZSh0aGlzLnBvaW50ZXJJZCk7XG4gICAgICB9XG4gICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5wb2ludGVyQ29udGV4dCA/PyB0aGlzLmFjdGl2ZUNvbnRleHQ7XG4gICAgICBpZiAodGhpcy5pc0RyYWdnaW5nICYmIHRoaXMucG9pbnRlckNvbnRleHQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZXREcmFnZ2luZyhmYWxzZSk7XG4gICAgICAgIGlmICh0aGlzLnBvaW50ZXJDb250ZXh0ID09PSBcIndpbmRvd1wiKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVBbmNob3JGcm9tUG9zaXRpb24odGhpcy5wb2ludGVyQ29udGV4dCk7XG4gICAgICAgICAgdGhpcy5oYXNDdXN0b21Qb3NpdGlvbi53aW5kb3cgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuYXBwbHlBbmNob3JQb3NpdGlvbih0aGlzLnBvaW50ZXJDb250ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBvaW50ZXJDb250ZXh0ID09PSBcImJ1dHRvblwiKSB7XG4gICAgICAgICAgdGhpcy5zbmFwQnV0dG9uVG9Db3JuZXIoKTtcbiAgICAgICAgICB0aGlzLmhhc0N1c3RvbVBvc2l0aW9uLmJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgaWYgKHRoaXMuZHJhZ2dlZER1cmluZ0ludGVyYWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZU5leHRCdXR0b25DbGljayA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT09IFwiYnV0dG9uXCIgJiYgIXRoaXMuaXNPcGVuICYmICF0aGlzLmRyYWdnZWREdXJpbmdJbnRlcmFjdGlvbikge1xuICAgICAgICB0aGlzLm9wZW5JbnNwZWN0b3IoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVzZXRQb2ludGVyVHJhY2tpbmcoKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlUG9pbnRlckNhbmNlbCA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMucG9pbnRlcklkICE9PSBldmVudC5wb2ludGVySWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgIGlmICh0YXJnZXQ/Lmhhc1BvaW50ZXJDYXB0dXJlKHRoaXMucG9pbnRlcklkKSkge1xuICAgICAgICB0YXJnZXQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHRoaXMucG9pbnRlcklkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVzZXRQb2ludGVyVHJhY2tpbmcoKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQnV0dG9uQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzRHJhZ2dpbmcpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWdub3JlTmV4dEJ1dHRvbkNsaWNrKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaWdub3JlTmV4dEJ1dHRvbkNsaWNrID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5vcGVuSW5zcGVjdG9yKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUNsb3NlUG9pbnRlckRvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQ2xvc2VDbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2VJbnNwZWN0b3IoKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlUmVzaXplUG9pbnRlckRvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuaGFzQ3VzdG9tUG9zaXRpb24ud2luZG93ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNSZXNpemluZyA9IHRydWU7XG4gICAgICB0aGlzLnJlc2l6ZVBvaW50ZXJJZCA9IGV2ZW50LnBvaW50ZXJJZDtcbiAgICAgIHRoaXMucmVzaXplU3RhcnQgPSB7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfTtcbiAgICAgIHRoaXMucmVzaXplSW5pdGlhbFNpemUgPSB7IC4uLnRoaXMuY29udGV4dFN0YXRlLndpbmRvdy5zaXplIH07XG4gICAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiB0aGlzLmRvY2tNb2RlICE9PSBcImZsb2F0aW5nXCIpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50cmFuc2l0aW9uID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICB0YXJnZXQ/LnNldFBvaW50ZXJDYXB0dXJlPy4oZXZlbnQucG9pbnRlcklkKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlUmVzaXplUG9pbnRlck1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghdGhpcy5pc1Jlc2l6aW5nIHx8IHRoaXMucmVzaXplUG9pbnRlcklkICE9PSBldmVudC5wb2ludGVySWQgfHwgIXRoaXMucmVzaXplU3RhcnQgfHwgIXRoaXMucmVzaXplSW5pdGlhbFNpemUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGRlbHRhWCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLnJlc2l6ZVN0YXJ0Lng7XG4gICAgICBjb25zdCBkZWx0YVkgPSBldmVudC5jbGllbnRZIC0gdGhpcy5yZXNpemVTdGFydC55O1xuICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3c7XG4gICAgICBpZiAodGhpcy5kb2NrTW9kZSA9PT0gXCJkb2NrZWQtbGVmdFwiKSB7XG4gICAgICAgIHN0YXRlLnNpemUgPSB0aGlzLmNsYW1wV2luZG93U2l6ZSh7XG4gICAgICAgICAgd2lkdGg6IHRoaXMucmVzaXplSW5pdGlhbFNpemUud2lkdGggKyBkZWx0YVgsXG4gICAgICAgICAgaGVpZ2h0OiBzdGF0ZS5zaXplLmhlaWdodFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtzdGF0ZS5zaXplLndpZHRofXB4YDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuc2l6ZSA9IHRoaXMuY2xhbXBXaW5kb3dTaXplKHtcbiAgICAgICAgICB3aWR0aDogdGhpcy5yZXNpemVJbml0aWFsU2l6ZS53aWR0aCArIGRlbHRhWCxcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMucmVzaXplSW5pdGlhbFNpemUuaGVpZ2h0ICsgZGVsdGFZXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmtlZXBQb3NpdGlvbldpdGhpblZpZXdwb3J0KFwid2luZG93XCIpO1xuICAgICAgICB0aGlzLnVwZGF0ZUFuY2hvckZyb21Qb3NpdGlvbihcIndpbmRvd1wiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgICAgdGhpcy51cGRhdGVIb3N0VHJhbnNmb3JtKFwid2luZG93XCIpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVSZXNpemVQb2ludGVyVXAgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLnJlc2l6ZVBvaW50ZXJJZCAhPT0gZXZlbnQucG9pbnRlcklkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICBpZiAodGFyZ2V0Py5oYXNQb2ludGVyQ2FwdHVyZSh0aGlzLnJlc2l6ZVBvaW50ZXJJZCkpIHtcbiAgICAgICAgdGFyZ2V0LnJlbGVhc2VQb2ludGVyQ2FwdHVyZSh0aGlzLnJlc2l6ZVBvaW50ZXJJZCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kb2NrTW9kZSA9PT0gXCJmbG9hdGluZ1wiKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQW5jaG9yRnJvbVBvc2l0aW9uKFwid2luZG93XCIpO1xuICAgICAgICB0aGlzLmFwcGx5QW5jaG9yUG9zaXRpb24oXCJ3aW5kb3dcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnBlcnNpc3RTdGF0ZSgpO1xuICAgICAgdGhpcy5yZXNldFJlc2l6ZVRyYWNraW5nKCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZVBvaW50ZXJDYW5jZWwgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLnJlc2l6ZVBvaW50ZXJJZCAhPT0gZXZlbnQucG9pbnRlcklkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICBpZiAodGFyZ2V0Py5oYXNQb2ludGVyQ2FwdHVyZSh0aGlzLnJlc2l6ZVBvaW50ZXJJZCkpIHtcbiAgICAgICAgdGFyZ2V0LnJlbGVhc2VQb2ludGVyQ2FwdHVyZSh0aGlzLnJlc2l6ZVBvaW50ZXJJZCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kb2NrTW9kZSA9PT0gXCJmbG9hdGluZ1wiKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQW5jaG9yRnJvbVBvc2l0aW9uKFwid2luZG93XCIpO1xuICAgICAgICB0aGlzLmFwcGx5QW5jaG9yUG9zaXRpb24oXCJ3aW5kb3dcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnBlcnNpc3RTdGF0ZSgpO1xuICAgICAgdGhpcy5yZXNldFJlc2l6ZVRyYWNraW5nKCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIHRoaXMubWVhc3VyZUNvbnRleHQoXCJidXR0b25cIik7XG4gICAgICB0aGlzLmFwcGx5QW5jaG9yUG9zaXRpb24oXCJidXR0b25cIik7XG4gICAgICB0aGlzLm1lYXN1cmVDb250ZXh0KFwid2luZG93XCIpO1xuICAgICAgaWYgKHRoaXMuaGFzQ3VzdG9tUG9zaXRpb24ud2luZG93KSB7XG4gICAgICAgIHRoaXMuYXBwbHlBbmNob3JQb3NpdGlvbihcIndpbmRvd1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2VudGVyQ29udGV4dChcIndpbmRvd1wiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlSG9zdFRyYW5zZm9ybSgpO1xuICAgIH07XG4gICAgdGhpcy5jb250ZXh0T3B0aW9ucyA9IFtcbiAgICAgIHsga2V5OiBcImFsbC1hZ2VudHNcIiwgbGFiZWw6IFwiQWxsIEFnZW50c1wiIH1cbiAgICBdO1xuICAgIHRoaXMuc2VsZWN0ZWRDb250ZXh0ID0gXCJhbGwtYWdlbnRzXCI7XG4gICAgdGhpcy5leHBhbmRlZFJvd3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIHRoaXMuY29waWVkRXZlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICB0aGlzLmV4cGFuZGVkVG9vbHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIHRoaXMuZXhwYW5kZWRDb250ZXh0SXRlbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIHRoaXMuY29waWVkQ29udGV4dEl0ZW1zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICB0aGlzLmhhbmRsZUNsZWFyRXZlbnRzID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDb250ZXh0ID09PSBcImFsbC1hZ2VudHNcIikge1xuICAgICAgICB0aGlzLmFnZW50RXZlbnRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuZmxhdHRlbmVkRXZlbnRzID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFnZW50RXZlbnRzLmRlbGV0ZSh0aGlzLnNlbGVjdGVkQ29udGV4dCk7XG4gICAgICAgIHRoaXMuZmxhdHRlbmVkRXZlbnRzID0gdGhpcy5mbGF0dGVuZWRFdmVudHMuZmlsdGVyKChldmVudCkgPT4gZXZlbnQuYWdlbnRJZCAhPT0gdGhpcy5zZWxlY3RlZENvbnRleHQpO1xuICAgICAgfVxuICAgICAgdGhpcy5leHBhbmRlZFJvd3MuY2xlYXIoKTtcbiAgICAgIHRoaXMuY29waWVkRXZlbnRzLmNsZWFyKCk7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlR2xvYmFsUG9pbnRlckRvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghdGhpcy5jb250ZXh0TWVudU9wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY2xpY2tlZERyb3Bkb3duID0gZXZlbnQuY29tcG9zZWRQYXRoKCkuc29tZSgobm9kZSkgPT4ge1xuICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuZGF0YXNldD8uY29udGV4dERyb3Bkb3duUm9vdCA9PT0gXCJ0cnVlXCI7XG4gICAgICB9KTtcbiAgICAgIGlmICghY2xpY2tlZERyb3Bkb3duKSB7XG4gICAgICAgIHRoaXMuY29udGV4dE1lbnVPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5oYW5kbGVEaXNtaXNzQW5ub3VuY2VtZW50ID0gKCkgPT4ge1xuICAgICAgdGhpcy5tYXJrQW5ub3VuY2VtZW50U2VlbigpO1xuICAgIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7XG4gICAgICBjb3JlOiB7IGF0dHJpYnV0ZTogZmFsc2UgfSxcbiAgICAgIGF1dG9BdHRhY2hDb3JlOiB7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogXCJhdXRvLWF0dGFjaC1jb3JlXCIgfVxuICAgIH07XG4gIH1cbiAgZ2V0IGNvcmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmU7XG4gIH1cbiAgc2V0IGNvcmUodmFsdWUpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX2NvcmU7XG4gICAgaWYgKG9sZFZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRldGFjaEZyb21Db3JlKCk7XG4gICAgdGhpcy5fY29yZSA9IHZhbHVlID8/IG51bGw7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKFwiY29yZVwiLCBvbGRWYWx1ZSk7XG4gICAgaWYgKHRoaXMuX2NvcmUpIHtcbiAgICAgIHRoaXMuYXR0YWNoVG9Db3JlKHRoaXMuX2NvcmUpO1xuICAgIH1cbiAgfVxuICBhdHRhY2hUb0NvcmUoY29yZSkge1xuICAgIHRoaXMucnVudGltZVN0YXR1cyA9IGNvcmUucnVudGltZUNvbm5lY3Rpb25TdGF0dXM7XG4gICAgdGhpcy5jb3JlUHJvcGVydGllcyA9IGNvcmUucHJvcGVydGllcztcbiAgICB0aGlzLmxhc3RDb3JlRXJyb3IgPSBudWxsO1xuICAgIHRoaXMuY29yZVN1YnNjcmliZXIgPSB7XG4gICAgICBvblJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzQ2hhbmdlZDogKHsgc3RhdHVzIH0pID0+IHtcbiAgICAgICAgdGhpcy5ydW50aW1lU3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICBvblByb3BlcnRpZXNDaGFuZ2VkOiAoeyBwcm9wZXJ0aWVzIH0pID0+IHtcbiAgICAgICAgdGhpcy5jb3JlUHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6ICh7IGNvZGUsIGVycm9yIH0pID0+IHtcbiAgICAgICAgdGhpcy5sYXN0Q29yZUVycm9yID0geyBjb2RlLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH07XG4gICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIG9uQWdlbnRzQ2hhbmdlZDogKHsgYWdlbnRzIH0pID0+IHtcbiAgICAgICAgdGhpcy5wcm9jZXNzQWdlbnRzQ2hhbmdlZChhZ2VudHMpO1xuICAgICAgfSxcbiAgICAgIG9uQ29udGV4dENoYW5nZWQ6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgICB0aGlzLmNvbnRleHRTdG9yZSA9IHRoaXMubm9ybWFsaXplQ29udGV4dFN0b3JlKGNvbnRleHQpO1xuICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuY29yZVVuc3Vic2NyaWJlID0gY29yZS5zdWJzY3JpYmUodGhpcy5jb3JlU3Vic2NyaWJlcikudW5zdWJzY3JpYmU7XG4gICAgdGhpcy5wcm9jZXNzQWdlbnRzQ2hhbmdlZChjb3JlLmFnZW50cyk7XG4gICAgaWYgKGNvcmUuY29udGV4dCkge1xuICAgICAgdGhpcy5jb250ZXh0U3RvcmUgPSB0aGlzLm5vcm1hbGl6ZUNvbnRleHRTdG9yZShjb3JlLmNvbnRleHQpO1xuICAgIH1cbiAgfVxuICBkZXRhY2hGcm9tQ29yZSgpIHtcbiAgICBpZiAodGhpcy5jb3JlVW5zdWJzY3JpYmUpIHtcbiAgICAgIHRoaXMuY29yZVVuc3Vic2NyaWJlKCk7XG4gICAgICB0aGlzLmNvcmVVbnN1YnNjcmliZSA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY29yZVN1YnNjcmliZXIgPSBudWxsO1xuICAgIHRoaXMucnVudGltZVN0YXR1cyA9IG51bGw7XG4gICAgdGhpcy5sYXN0Q29yZUVycm9yID0gbnVsbDtcbiAgICB0aGlzLmNvcmVQcm9wZXJ0aWVzID0ge307XG4gICAgdGhpcy5jYWNoZWRUb29scyA9IFtdO1xuICAgIHRoaXMudG9vbFNpZ25hdHVyZSA9IFwiXCI7XG4gICAgdGhpcy50ZWFyZG93bkFnZW50U3Vic2NyaXB0aW9ucygpO1xuICB9XG4gIHRlYXJkb3duQWdlbnRTdWJzY3JpcHRpb25zKCkge1xuICAgIGZvciAoY29uc3QgdW5zdWJzY3JpYmUgb2YgdGhpcy5hZ2VudFN1YnNjcmlwdGlvbnMudmFsdWVzKCkpIHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHRoaXMuYWdlbnRTdWJzY3JpcHRpb25zLmNsZWFyKCk7XG4gICAgdGhpcy5hZ2VudEV2ZW50cy5jbGVhcigpO1xuICAgIHRoaXMuYWdlbnRNZXNzYWdlcy5jbGVhcigpO1xuICAgIHRoaXMuYWdlbnRTdGF0ZXMuY2xlYXIoKTtcbiAgICB0aGlzLmZsYXR0ZW5lZEV2ZW50cyA9IFtdO1xuICAgIHRoaXMuZXZlbnRDb3VudGVyID0gMDtcbiAgfVxuICBwcm9jZXNzQWdlbnRzQ2hhbmdlZChhZ2VudHMpIHtcbiAgICBjb25zdCBzZWVuQWdlbnRJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgYWdlbnQgb2YgT2JqZWN0LnZhbHVlcyhhZ2VudHMpKSB7XG4gICAgICBpZiAoIWFnZW50Py5hZ2VudElkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgc2VlbkFnZW50SWRzLmFkZChhZ2VudC5hZ2VudElkKTtcbiAgICAgIHRoaXMuc3Vic2NyaWJlVG9BZ2VudChhZ2VudCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYWdlbnRJZCBvZiBBcnJheS5mcm9tKHRoaXMuYWdlbnRTdWJzY3JpcHRpb25zLmtleXMoKSkpIHtcbiAgICAgIGlmICghc2VlbkFnZW50SWRzLmhhcyhhZ2VudElkKSkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRnJvbUFnZW50KGFnZW50SWQpO1xuICAgICAgICB0aGlzLmFnZW50RXZlbnRzLmRlbGV0ZShhZ2VudElkKTtcbiAgICAgICAgdGhpcy5hZ2VudE1lc3NhZ2VzLmRlbGV0ZShhZ2VudElkKTtcbiAgICAgICAgdGhpcy5hZ2VudFN0YXRlcy5kZWxldGUoYWdlbnRJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQ29udGV4dE9wdGlvbnMoc2VlbkFnZW50SWRzKTtcbiAgICB0aGlzLnJlZnJlc2hUb29sc1NuYXBzaG90KCk7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cbiAgcmVmcmVzaFRvb2xzU25hcHNob3QoKSB7XG4gICAgaWYgKCF0aGlzLl9jb3JlKSB7XG4gICAgICBpZiAodGhpcy5jYWNoZWRUb29scy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuY2FjaGVkVG9vbHMgPSBbXTtcbiAgICAgICAgdGhpcy50b29sU2lnbmF0dXJlID0gXCJcIjtcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvb2xzID0gdGhpcy5leHRyYWN0VG9vbHNGcm9tQWdlbnRzKCk7XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gSlNPTi5zdHJpbmdpZnkoXG4gICAgICB0b29scy5tYXAoKHRvb2wpID0+ICh7XG4gICAgICAgIGFnZW50SWQ6IHRvb2wuYWdlbnRJZCxcbiAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICB0eXBlOiB0b29sLnR5cGUsXG4gICAgICAgIGhhc0Rlc2NyaXB0aW9uOiBCb29sZWFuKHRvb2wuZGVzY3JpcHRpb24pLFxuICAgICAgICBoYXNQYXJhbWV0ZXJzOiBCb29sZWFuKHRvb2wucGFyYW1ldGVycylcbiAgICAgIH0pKVxuICAgICk7XG4gICAgaWYgKHNpZ25hdHVyZSAhPT0gdGhpcy50b29sU2lnbmF0dXJlKSB7XG4gICAgICB0aGlzLnRvb2xTaWduYXR1cmUgPSBzaWduYXR1cmU7XG4gICAgICB0aGlzLmNhY2hlZFRvb2xzID0gdG9vbHM7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgdHJ5QXV0b0F0dGFjaENvcmUoKSB7XG4gICAgaWYgKHRoaXMuYXR0ZW1wdGVkQXV0b0F0dGFjaCB8fCB0aGlzLl9jb3JlIHx8ICF0aGlzLmF1dG9BdHRhY2hDb3JlIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hdHRlbXB0ZWRBdXRvQXR0YWNoID0gdHJ1ZTtcbiAgICBjb25zdCBnbG9iYWxXaW5kb3cgPSB3aW5kb3c7XG4gICAgY29uc3QgZ2xvYmFsQ2FuZGlkYXRlcyA9IFtcbiAgICAgIC8vIENvbW1vbiBhcHAtbGV2ZWwgZ2xvYmFscyB1c2VkIGR1cmluZyBkZXZlbG9wbWVudFxuICAgICAgZ2xvYmFsV2luZG93Ll9fQ09QSUxPVEtJVF9DT1JFX18sXG4gICAgICBnbG9iYWxXaW5kb3cuY29waWxvdGtpdD8uY29yZSxcbiAgICAgIGdsb2JhbFdpbmRvdy5jb3BpbG90a2l0Q29yZVxuICAgIF07XG4gICAgY29uc3QgZm91bmRDb3JlID0gZ2xvYmFsQ2FuZGlkYXRlcy5maW5kKFxuICAgICAgKGNhbmRpZGF0ZSkgPT4gISFjYW5kaWRhdGUgJiYgdHlwZW9mIGNhbmRpZGF0ZSA9PT0gXCJvYmplY3RcIlxuICAgICk7XG4gICAgaWYgKGZvdW5kQ29yZSkge1xuICAgICAgdGhpcy5jb3JlID0gZm91bmRDb3JlO1xuICAgIH1cbiAgfVxuICBzdWJzY3JpYmVUb0FnZW50KGFnZW50KSB7XG4gICAgaWYgKCFhZ2VudC5hZ2VudElkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFnZW50SWQgPSBhZ2VudC5hZ2VudElkO1xuICAgIHRoaXMudW5zdWJzY3JpYmVGcm9tQWdlbnQoYWdlbnRJZCk7XG4gICAgY29uc3Qgc3Vic2NyaWJlciA9IHtcbiAgICAgIG9uUnVuU3RhcnRlZEV2ZW50OiAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIHRoaXMucmVjb3JkQWdlbnRFdmVudChhZ2VudElkLCBcIlJVTl9TVEFSVEVEXCIsIGV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBvblJ1bkZpbmlzaGVkRXZlbnQ6ICh7IGV2ZW50LCByZXN1bHQgfSkgPT4ge1xuICAgICAgICB0aGlzLnJlY29yZEFnZW50RXZlbnQoYWdlbnRJZCwgXCJSVU5fRklOSVNIRURcIiwgeyBldmVudCwgcmVzdWx0IH0pO1xuICAgICAgfSxcbiAgICAgIG9uUnVuRXJyb3JFdmVudDogKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICB0aGlzLnJlY29yZEFnZW50RXZlbnQoYWdlbnRJZCwgXCJSVU5fRVJST1JcIiwgZXZlbnQpO1xuICAgICAgfSxcbiAgICAgIG9uVGV4dE1lc3NhZ2VTdGFydEV2ZW50OiAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIHRoaXMucmVjb3JkQWdlbnRFdmVudChhZ2VudElkLCBcIlRFWFRfTUVTU0FHRV9TVEFSVFwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgb25UZXh0TWVzc2FnZUNvbnRlbnRFdmVudDogKHsgZXZlbnQsIHRleHRNZXNzYWdlQnVmZmVyIH0pID0+IHtcbiAgICAgICAgdGhpcy5yZWNvcmRBZ2VudEV2ZW50KGFnZW50SWQsIFwiVEVYVF9NRVNTQUdFX0NPTlRFTlRcIiwgeyBldmVudCwgdGV4dE1lc3NhZ2VCdWZmZXIgfSk7XG4gICAgICB9LFxuICAgICAgb25UZXh0TWVzc2FnZUVuZEV2ZW50OiAoeyBldmVudCwgdGV4dE1lc3NhZ2VCdWZmZXIgfSkgPT4ge1xuICAgICAgICB0aGlzLnJlY29yZEFnZW50RXZlbnQoYWdlbnRJZCwgXCJURVhUX01FU1NBR0VfRU5EXCIsIHsgZXZlbnQsIHRleHRNZXNzYWdlQnVmZmVyIH0pO1xuICAgICAgfSxcbiAgICAgIG9uVG9vbENhbGxTdGFydEV2ZW50OiAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIHRoaXMucmVjb3JkQWdlbnRFdmVudChhZ2VudElkLCBcIlRPT0xfQ0FMTF9TVEFSVFwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgb25Ub29sQ2FsbEFyZ3NFdmVudDogKHsgZXZlbnQsIHRvb2xDYWxsQnVmZmVyLCB0b29sQ2FsbE5hbWUsIHBhcnRpYWxUb29sQ2FsbEFyZ3MgfSkgPT4ge1xuICAgICAgICB0aGlzLnJlY29yZEFnZW50RXZlbnQoYWdlbnRJZCwgXCJUT09MX0NBTExfQVJHU1wiLCB7IGV2ZW50LCB0b29sQ2FsbEJ1ZmZlciwgdG9vbENhbGxOYW1lLCBwYXJ0aWFsVG9vbENhbGxBcmdzIH0pO1xuICAgICAgfSxcbiAgICAgIG9uVG9vbENhbGxFbmRFdmVudDogKHsgZXZlbnQsIHRvb2xDYWxsQXJncywgdG9vbENhbGxOYW1lIH0pID0+IHtcbiAgICAgICAgdGhpcy5yZWNvcmRBZ2VudEV2ZW50KGFnZW50SWQsIFwiVE9PTF9DQUxMX0VORFwiLCB7IGV2ZW50LCB0b29sQ2FsbEFyZ3MsIHRvb2xDYWxsTmFtZSB9KTtcbiAgICAgIH0sXG4gICAgICBvblRvb2xDYWxsUmVzdWx0RXZlbnQ6ICh7IGV2ZW50IH0pID0+IHtcbiAgICAgICAgdGhpcy5yZWNvcmRBZ2VudEV2ZW50KGFnZW50SWQsIFwiVE9PTF9DQUxMX1JFU1VMVFwiLCBldmVudCk7XG4gICAgICB9LFxuICAgICAgb25TdGF0ZVNuYXBzaG90RXZlbnQ6ICh7IGV2ZW50IH0pID0+IHtcbiAgICAgICAgdGhpcy5yZWNvcmRBZ2VudEV2ZW50KGFnZW50SWQsIFwiU1RBVEVfU05BUFNIT1RcIiwgZXZlbnQpO1xuICAgICAgICB0aGlzLnN5bmNBZ2VudFN0YXRlKGFnZW50KTtcbiAgICAgIH0sXG4gICAgICBvblN0YXRlRGVsdGFFdmVudDogKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICB0aGlzLnJlY29yZEFnZW50RXZlbnQoYWdlbnRJZCwgXCJTVEFURV9ERUxUQVwiLCBldmVudCk7XG4gICAgICAgIHRoaXMuc3luY0FnZW50U3RhdGUoYWdlbnQpO1xuICAgICAgfSxcbiAgICAgIG9uTWVzc2FnZXNTbmFwc2hvdEV2ZW50OiAoeyBldmVudCB9KSA9PiB7XG4gICAgICAgIHRoaXMucmVjb3JkQWdlbnRFdmVudChhZ2VudElkLCBcIk1FU1NBR0VTX1NOQVBTSE9UXCIsIGV2ZW50KTtcbiAgICAgICAgdGhpcy5zeW5jQWdlbnRNZXNzYWdlcyhhZ2VudCk7XG4gICAgICB9LFxuICAgICAgb25NZXNzYWdlc0NoYW5nZWQ6ICgpID0+IHtcbiAgICAgICAgdGhpcy5zeW5jQWdlbnRNZXNzYWdlcyhhZ2VudCk7XG4gICAgICB9LFxuICAgICAgb25SYXdFdmVudDogKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgICB0aGlzLnJlY29yZEFnZW50RXZlbnQoYWdlbnRJZCwgXCJSQVdfRVZFTlRcIiwgZXZlbnQpO1xuICAgICAgfSxcbiAgICAgIG9uQ3VzdG9tRXZlbnQ6ICh7IGV2ZW50IH0pID0+IHtcbiAgICAgICAgdGhpcy5yZWNvcmRBZ2VudEV2ZW50KGFnZW50SWQsIFwiQ1VTVE9NX0VWRU5UXCIsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IGFnZW50LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB0aGlzLmFnZW50U3Vic2NyaXB0aW9ucy5zZXQoYWdlbnRJZCwgdW5zdWJzY3JpYmUpO1xuICAgIHRoaXMuc3luY0FnZW50TWVzc2FnZXMoYWdlbnQpO1xuICAgIHRoaXMuc3luY0FnZW50U3RhdGUoYWdlbnQpO1xuICAgIGlmICghdGhpcy5hZ2VudEV2ZW50cy5oYXMoYWdlbnRJZCkpIHtcbiAgICAgIHRoaXMuYWdlbnRFdmVudHMuc2V0KGFnZW50SWQsIFtdKTtcbiAgICB9XG4gIH1cbiAgdW5zdWJzY3JpYmVGcm9tQWdlbnQoYWdlbnRJZCkge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5hZ2VudFN1YnNjcmlwdGlvbnMuZ2V0KGFnZW50SWQpO1xuICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuYWdlbnRTdWJzY3JpcHRpb25zLmRlbGV0ZShhZ2VudElkKTtcbiAgICB9XG4gIH1cbiAgcmVjb3JkQWdlbnRFdmVudChhZ2VudElkLCB0eXBlLCBwYXlsb2FkKSB7XG4gICAgY29uc3QgZXZlbnRJZCA9IGAke2FnZW50SWR9OiR7Kyt0aGlzLmV2ZW50Q291bnRlcn1gO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXlsb2FkID0gdGhpcy5ub3JtYWxpemVFdmVudFBheWxvYWQodHlwZSwgcGF5bG9hZCk7XG4gICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICBpZDogZXZlbnRJZCxcbiAgICAgIGFnZW50SWQsXG4gICAgICB0eXBlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgcGF5bG9hZDogbm9ybWFsaXplZFBheWxvYWRcbiAgICB9O1xuICAgIGNvbnN0IGN1cnJlbnRBZ2VudEV2ZW50cyA9IHRoaXMuYWdlbnRFdmVudHMuZ2V0KGFnZW50SWQpID8/IFtdO1xuICAgIGNvbnN0IG5leHRBZ2VudEV2ZW50cyA9IFtldmVudCwgLi4uY3VycmVudEFnZW50RXZlbnRzXS5zbGljZSgwLCBNQVhfQUdFTlRfRVZFTlRTKTtcbiAgICB0aGlzLmFnZW50RXZlbnRzLnNldChhZ2VudElkLCBuZXh0QWdlbnRFdmVudHMpO1xuICAgIHRoaXMuZmxhdHRlbmVkRXZlbnRzID0gW2V2ZW50LCAuLi50aGlzLmZsYXR0ZW5lZEV2ZW50c10uc2xpY2UoMCwgTUFYX1RPVEFMX0VWRU5UUyk7XG4gICAgdGhpcy5yZWZyZXNoVG9vbHNTbmFwc2hvdCgpO1xuICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICB9XG4gIHN5bmNBZ2VudE1lc3NhZ2VzKGFnZW50KSB7XG4gICAgaWYgKCFhZ2VudD8uYWdlbnRJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlcyA9IHRoaXMubm9ybWFsaXplQWdlbnRNZXNzYWdlcyhhZ2VudC5tZXNzYWdlcyk7XG4gICAgaWYgKG1lc3NhZ2VzKSB7XG4gICAgICB0aGlzLmFnZW50TWVzc2FnZXMuc2V0KGFnZW50LmFnZW50SWQsIG1lc3NhZ2VzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZ2VudE1lc3NhZ2VzLmRlbGV0ZShhZ2VudC5hZ2VudElkKTtcbiAgICB9XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cbiAgc3luY0FnZW50U3RhdGUoYWdlbnQpIHtcbiAgICBpZiAoIWFnZW50Py5hZ2VudElkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlID0gYWdlbnQuc3RhdGU7XG4gICAgaWYgKHN0YXRlID09PSB2b2lkIDAgfHwgc3RhdGUgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuYWdlbnRTdGF0ZXMuZGVsZXRlKGFnZW50LmFnZW50SWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFnZW50U3RhdGVzLnNldChhZ2VudC5hZ2VudElkLCB0aGlzLnNhbml0aXplRm9yTG9nZ2luZyhzdGF0ZSkpO1xuICAgIH1cbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgfVxuICB1cGRhdGVDb250ZXh0T3B0aW9ucyhhZ2VudElkcykge1xuICAgIGNvbnN0IG5leHRPcHRpb25zID0gW1xuICAgICAgeyBrZXk6IFwiYWxsLWFnZW50c1wiLCBsYWJlbDogXCJBbGwgQWdlbnRzXCIgfSxcbiAgICAgIC4uLkFycmF5LmZyb20oYWdlbnRJZHMpLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSkubWFwKChpZCkgPT4gKHsga2V5OiBpZCwgbGFiZWw6IGlkIH0pKVxuICAgIF07XG4gICAgY29uc3Qgb3B0aW9uc0NoYW5nZWQgPSB0aGlzLmNvbnRleHRPcHRpb25zLmxlbmd0aCAhPT0gbmV4dE9wdGlvbnMubGVuZ3RoIHx8IHRoaXMuY29udGV4dE9wdGlvbnMuc29tZSgob3B0aW9uLCBpbmRleCkgPT4gb3B0aW9uLmtleSAhPT0gbmV4dE9wdGlvbnNbaW5kZXhdPy5rZXkpO1xuICAgIGlmIChvcHRpb25zQ2hhbmdlZCkge1xuICAgICAgdGhpcy5jb250ZXh0T3B0aW9ucyA9IG5leHRPcHRpb25zO1xuICAgIH1cbiAgICBjb25zdCBwZW5kaW5nQ29udGV4dCA9IHRoaXMucGVuZGluZ1NlbGVjdGVkQ29udGV4dDtcbiAgICBpZiAocGVuZGluZ0NvbnRleHQpIHtcbiAgICAgIGNvbnN0IGlzUGVuZGluZ0F2YWlsYWJsZSA9IHBlbmRpbmdDb250ZXh0ID09PSBcImFsbC1hZ2VudHNcIiB8fCBhZ2VudElkcy5oYXMocGVuZGluZ0NvbnRleHQpO1xuICAgICAgaWYgKGlzUGVuZGluZ0F2YWlsYWJsZSkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENvbnRleHQgIT09IHBlbmRpbmdDb250ZXh0KSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZENvbnRleHQgPSBwZW5kaW5nQ29udGV4dDtcbiAgICAgICAgICB0aGlzLmV4cGFuZGVkUm93cy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ1NlbGVjdGVkQ29udGV4dCA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKGFnZW50SWRzLnNpemUgPiAwKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1NlbGVjdGVkQ29udGV4dCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGhhc1NlbGVjdGVkQ29udGV4dCA9IG5leHRPcHRpb25zLnNvbWUoKG9wdGlvbikgPT4gb3B0aW9uLmtleSA9PT0gdGhpcy5zZWxlY3RlZENvbnRleHQpO1xuICAgIGlmICghaGFzU2VsZWN0ZWRDb250ZXh0ICYmIHRoaXMucGVuZGluZ1NlbGVjdGVkQ29udGV4dCA9PT0gbnVsbCkge1xuICAgICAgbGV0IG5leHRTZWxlY3RlZCA9IFwiYWxsLWFnZW50c1wiO1xuICAgICAgaWYgKGFnZW50SWRzLmhhcyhcImRlZmF1bHRcIikpIHtcbiAgICAgICAgbmV4dFNlbGVjdGVkID0gXCJkZWZhdWx0XCI7XG4gICAgICB9IGVsc2UgaWYgKGFnZW50SWRzLnNpemUgPiAwKSB7XG4gICAgICAgIG5leHRTZWxlY3RlZCA9IEFycmF5LmZyb20oYWdlbnRJZHMpLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSlbMF07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZENvbnRleHQgIT09IG5leHRTZWxlY3RlZCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ29udGV4dCA9IG5leHRTZWxlY3RlZDtcbiAgICAgICAgdGhpcy5leHBhbmRlZFJvd3MuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2V0RXZlbnRzRm9yU2VsZWN0ZWRDb250ZXh0KCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkQ29udGV4dCA9PT0gXCJhbGwtYWdlbnRzXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLmZsYXR0ZW5lZEV2ZW50cztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYWdlbnRFdmVudHMuZ2V0KHRoaXMuc2VsZWN0ZWRDb250ZXh0KSA/PyBbXTtcbiAgfVxuICBmaWx0ZXJFdmVudHMoZXZlbnRzKSB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLmV2ZW50RmlsdGVyVGV4dC50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gZXZlbnRzLmZpbHRlcigoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLmV2ZW50VHlwZUZpbHRlciAhPT0gXCJhbGxcIiAmJiBldmVudC50eXBlICE9PSB0aGlzLmV2ZW50VHlwZUZpbHRlcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcGF5bG9hZFRleHQgPSB0aGlzLnN0cmluZ2lmeVBheWxvYWQoZXZlbnQucGF5bG9hZCwgZmFsc2UpLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gZXZlbnQudHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fCBldmVudC5hZ2VudElkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8IHBheWxvYWRUZXh0LmluY2x1ZGVzKHF1ZXJ5KTtcbiAgICB9KTtcbiAgfVxuICBnZXRMYXRlc3RTdGF0ZUZvckFnZW50KGFnZW50SWQpIHtcbiAgICBpZiAodGhpcy5hZ2VudFN0YXRlcy5oYXMoYWdlbnRJZCkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5hZ2VudFN0YXRlcy5nZXQoYWdlbnRJZCk7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IHZvaWQgMCA/IG51bGwgOiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnRzID0gdGhpcy5hZ2VudEV2ZW50cy5nZXQoYWdlbnRJZCkgPz8gW107XG4gICAgY29uc3Qgc3RhdGVFdmVudCA9IGV2ZW50cy5maW5kKChlKSA9PiBlLnR5cGUgPT09IFwiU1RBVEVfU05BUFNIT1RcIik7XG4gICAgaWYgKCFzdGF0ZUV2ZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlRXZlbnQucGF5bG9hZDtcbiAgfVxuICBnZXRMYXRlc3RNZXNzYWdlc0ZvckFnZW50KGFnZW50SWQpIHtcbiAgICBjb25zdCBtZXNzYWdlcyA9IHRoaXMuYWdlbnRNZXNzYWdlcy5nZXQoYWdlbnRJZCk7XG4gICAgcmV0dXJuIG1lc3NhZ2VzID8/IG51bGw7XG4gIH1cbiAgZ2V0QWdlbnRTdGF0dXMoYWdlbnRJZCkge1xuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuYWdlbnRFdmVudHMuZ2V0KGFnZW50SWQpID8/IFtdO1xuICAgIGlmIChldmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJpZGxlXCI7XG4gICAgfVxuICAgIGNvbnN0IHJ1bkV2ZW50ID0gZXZlbnRzLmZpbmQoKGUpID0+IGUudHlwZSA9PT0gXCJSVU5fU1RBUlRFRFwiIHx8IGUudHlwZSA9PT0gXCJSVU5fRklOSVNIRURcIiB8fCBlLnR5cGUgPT09IFwiUlVOX0VSUk9SXCIpO1xuICAgIGlmICghcnVuRXZlbnQpIHtcbiAgICAgIHJldHVybiBcImlkbGVcIjtcbiAgICB9XG4gICAgaWYgKHJ1bkV2ZW50LnR5cGUgPT09IFwiUlVOX0VSUk9SXCIpIHtcbiAgICAgIHJldHVybiBcImVycm9yXCI7XG4gICAgfVxuICAgIGlmIChydW5FdmVudC50eXBlID09PSBcIlJVTl9TVEFSVEVEXCIpIHtcbiAgICAgIGNvbnN0IGZpbmlzaGVkQWZ0ZXIgPSBldmVudHMuZmluZChcbiAgICAgICAgKGUpID0+IGUudHlwZSA9PT0gXCJSVU5fRklOSVNIRURcIiAmJiBlLnRpbWVzdGFtcCA+IHJ1bkV2ZW50LnRpbWVzdGFtcFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmaW5pc2hlZEFmdGVyID8gXCJpZGxlXCIgOiBcInJ1bm5pbmdcIjtcbiAgICB9XG4gICAgcmV0dXJuIFwiaWRsZVwiO1xuICB9XG4gIGdldEFnZW50U3RhdHMoYWdlbnRJZCkge1xuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuYWdlbnRFdmVudHMuZ2V0KGFnZW50SWQpID8/IFtdO1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5hZ2VudE1lc3NhZ2VzLmdldChhZ2VudElkKTtcbiAgICBjb25zdCB0b29sQ2FsbENvdW50ID0gbWVzc2FnZXMgPyBtZXNzYWdlcy5yZWR1Y2UoKGNvdW50LCBtZXNzYWdlKSA9PiBjb3VudCArIChtZXNzYWdlLnRvb2xDYWxscz8ubGVuZ3RoID8/IDApLCAwKSA6IGV2ZW50cy5maWx0ZXIoKGUpID0+IGUudHlwZSA9PT0gXCJUT09MX0NBTExfRU5EXCIpLmxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlQ291bnQgPSBtZXNzYWdlcz8ubGVuZ3RoID8/IDA7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsRXZlbnRzOiBldmVudHMubGVuZ3RoLFxuICAgICAgbGFzdEFjdGl2aXR5OiBldmVudHNbMF0/LnRpbWVzdGFtcCA/PyBudWxsLFxuICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VDb3VudCxcbiAgICAgIHRvb2xDYWxsczogdG9vbENhbGxDb3VudCxcbiAgICAgIGVycm9yczogZXZlbnRzLmZpbHRlcigoZSkgPT4gZS50eXBlID09PSBcIlJVTl9FUlJPUlwiKS5sZW5ndGhcbiAgICB9O1xuICB9XG4gIHJlbmRlclRvb2xDYWxsRGV0YWlscyh0b29sQ2FsbHMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodG9vbENhbGxzKSB8fCB0b29sQ2FsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbm90aGluZztcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwibXQtMiBzcGFjZS15LTJcIj5cbiAgICAgICAgJHt0b29sQ2FsbHMubWFwKChjYWxsLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gY2FsbC5mdW5jdGlvbj8ubmFtZSA/PyBjYWxsLnRvb2xOYW1lID8/IFwiVW5rbm93biBmdW5jdGlvblwiO1xuICAgICAgY29uc3QgY2FsbElkID0gdHlwZW9mIGNhbGw/LmlkID09PSBcInN0cmluZ1wiID8gY2FsbC5pZCA6IGB0b29sLWNhbGwtJHtpbmRleCArIDF9YDtcbiAgICAgIGNvbnN0IGFyZ3NTdHJpbmcgPSB0aGlzLmZvcm1hdFRvb2xDYWxsQXJndW1lbnRzKGNhbGwuZnVuY3Rpb24/LmFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3VuZGVkLW1kIGJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctZ3JheS01MCBwLTMgdGV4dC14cyB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtd3JhcCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0xIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAgICA8c3Bhbj4ke2Z1bmN0aW9uTmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LVsxMHB4XSB0ZXh0LWdyYXktNTAwXCI+SUQ6ICR7Y2FsbElkfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICR7YXJnc1N0cmluZyA/IGh0bWxgPHByZSBjbGFzcz1cIm10LTIgb3ZlcmZsb3ctYXV0byByb3VuZGVkIGJnLXdoaXRlIHAtMiB0ZXh0LVsxMXB4XSBsZWFkaW5nLXJlbGF4ZWQgdGV4dC1ncmF5LTgwMFwiPiR7YXJnc1N0cmluZ308L3ByZT5gIDogbm90aGluZ31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIGA7XG4gICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG4gIGZvcm1hdFRvb2xDYWxsQXJndW1lbnRzKGFyZ3MpIHtcbiAgICBpZiAoYXJncyA9PT0gdm9pZCAwIHx8IGFyZ3MgPT09IG51bGwgfHwgYXJncyA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXJncyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShhcmdzKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBhcnNlZCwgbnVsbCwgMik7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXJncyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3MsIG51bGwsIDIpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoYXJncyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcoYXJncyk7XG4gIH1cbiAgaGFzUmVuZGVyYWJsZVN0YXRlKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlID09PSBudWxsIHx8IHN0YXRlID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RhdGUpKSB7XG4gICAgICByZXR1cm4gc3RhdGUubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlKS5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCB0cmltbWVkID0gc3RhdGUudHJpbSgpO1xuICAgICAgcmV0dXJuIHRyaW1tZWQubGVuZ3RoID4gMCAmJiB0cmltbWVkICE9PSBcInt9XCI7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZvcm1hdFN0YXRlRm9yRGlzcGxheShzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSA9PT0gbnVsbCB8fCBzdGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgdHJpbW1lZCA9IHN0YXRlLnRyaW0oKTtcbiAgICAgIGlmICh0cmltbWVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UodHJpbW1lZCk7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwYXJzZWQsIG51bGwsIDIpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0YXRlLCBudWxsLCAyKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyhzdGF0ZSk7XG4gIH1cbiAgZ2V0RXZlbnRCYWRnZUNsYXNzZXModHlwZSkge1xuICAgIGNvbnN0IGJhc2UgPSBcImZvbnQtbW9ubyB0ZXh0LVsxMHB4XSBmb250LW1lZGl1bSBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgcm91bmRlZC1zbSBweC0xLjUgcHktMC41IGJvcmRlclwiO1xuICAgIGlmICh0eXBlLnN0YXJ0c1dpdGgoXCJSVU5fXCIpKSB7XG4gICAgICByZXR1cm4gYCR7YmFzZX0gYmctYmx1ZS01MCB0ZXh0LWJsdWUtNzAwIGJvcmRlci1ibHVlLTIwMGA7XG4gICAgfVxuICAgIGlmICh0eXBlLnN0YXJ0c1dpdGgoXCJURVhUX01FU1NBR0VcIikpIHtcbiAgICAgIHJldHVybiBgJHtiYXNlfSBiZy1lbWVyYWxkLTUwIHRleHQtZW1lcmFsZC03MDAgYm9yZGVyLWVtZXJhbGQtMjAwYDtcbiAgICB9XG4gICAgaWYgKHR5cGUuc3RhcnRzV2l0aChcIlRPT0xfQ0FMTFwiKSkge1xuICAgICAgcmV0dXJuIGAke2Jhc2V9IGJnLWFtYmVyLTUwIHRleHQtYW1iZXItNzAwIGJvcmRlci1hbWJlci0yMDBgO1xuICAgIH1cbiAgICBpZiAodHlwZS5zdGFydHNXaXRoKFwiU1RBVEVcIikpIHtcbiAgICAgIHJldHVybiBgJHtiYXNlfSBiZy12aW9sZXQtNTAgdGV4dC12aW9sZXQtNzAwIGJvcmRlci12aW9sZXQtMjAwYDtcbiAgICB9XG4gICAgaWYgKHR5cGUuc3RhcnRzV2l0aChcIk1FU1NBR0VTXCIpKSB7XG4gICAgICByZXR1cm4gYCR7YmFzZX0gYmctc2t5LTUwIHRleHQtc2t5LTcwMCBib3JkZXItc2t5LTIwMGA7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBcIlJVTl9FUlJPUlwiKSB7XG4gICAgICByZXR1cm4gYCR7YmFzZX0gYmctcm9zZS01MCB0ZXh0LXJvc2UtNzAwIGJvcmRlci1yb3NlLTIwMGA7XG4gICAgfVxuICAgIHJldHVybiBgJHtiYXNlfSBiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNjAwIGJvcmRlci1ncmF5LTIwMGA7XG4gIH1cbiAgc3RyaW5naWZ5UGF5bG9hZChwYXlsb2FkLCBwcmV0dHkpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHBheWxvYWQgPT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gcHJldHR5ID8gXCJ1bmRlZmluZWRcIiA6IFwidW5kZWZpbmVkXCI7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgcHJldHR5ID8gMiA6IDApID8/IFwiXCI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBzdHJpbmdpZnkgaW5zcGVjdG9yIHBheWxvYWRcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIFN0cmluZyhwYXlsb2FkKTtcbiAgICB9XG4gIH1cbiAgZXh0cmFjdEV2ZW50RnJvbVBheWxvYWQocGF5bG9hZCkge1xuICAgIGlmIChwYXlsb2FkICYmIHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiICYmIFwiZXZlbnRcIiBpbiBwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gcGF5bG9hZC5ldmVudDtcbiAgICB9XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbiAgYXN5bmMgY29weVRvQ2xpcGJvYXJkKHRleHQsIGV2ZW50SWQpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7XG4gICAgICB0aGlzLmNvcGllZEV2ZW50cy5hZGQoZXZlbnRJZCk7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmNvcGllZEV2ZW50cy5kZWxldGUoZXZlbnRJZCk7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgICAgfSwgMmUzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY29weSB0byBjbGlwYm9hcmQ6XCIsIGVycik7XG4gICAgfVxuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zdHlsZXMgPSBbXG4gICAgICB1bnNhZmVDU1MoZ2VuZXJhdGVkX2RlZmF1bHQpLFxuICAgICAgY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgei1pbmRleDogMjE0NzQ4MzY0NjtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm07XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtkYXRhLXRyYW5zaXRpb25pbmc9XCJ0cnVlXCJdKSB7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAzMDBtcyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAuY29uc29sZS1idXR0b24ge1xuICAgICAgICB0cmFuc2l0aW9uOlxuICAgICAgICAgIHRyYW5zZm9ybSAzMDBtcyBjdWJpYy1iZXppZXIoMC4zNCwgMS41NiwgMC42NCwgMSksXG4gICAgICAgICAgb3BhY2l0eSAxNjBtcyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAuY29uc29sZS1idXR0b25bZGF0YS1kcmFnZ2luZz1cInRydWVcIl0ge1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDE2MG1zIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5pbnNwZWN0b3Itd2luZG93W2RhdGEtdHJhbnNpdGlvbmluZz1cInRydWVcIl0ge1xuICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAzMDBtcyBlYXNlLCBoZWlnaHQgMzAwbXMgZWFzZTtcbiAgICAgIH1cblxuICAgICAgLmluc3BlY3Rvci13aW5kb3dbZGF0YS1kb2NrZWQ9XCJ0cnVlXCJdIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50O1xuICAgICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5yZXNpemUtaGFuZGxlIHtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBub25lO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLmRvY2stcmVzaXplLWhhbmRsZSB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgd2lkdGg6IDEwcHg7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgY3Vyc29yOiBldy1yZXNpemU7XG4gICAgICAgIHRvdWNoLWFjdGlvbjogbm9uZTtcbiAgICAgICAgei1pbmRleDogNTA7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgfVxuXG4gICAgICAudG9vbHRpcC10YXJnZXQge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC50b29sdGlwLXRhcmdldDo6YWZ0ZXIge1xuICAgICAgICBjb250ZW50OiBhdHRyKGRhdGEtdG9vbHRpcCk7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiBjYWxjKDEwMCUgKyA2cHgpO1xuICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKSB0cmFuc2xhdGVZKC00cHgpO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDE3LCAyNCwgMzksIDAuOTUpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS4yO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDEyMG1zIGVhc2UsIHRyYW5zZm9ybSAxMjBtcyBlYXNlO1xuICAgICAgICB6LWluZGV4OiA0MDAwO1xuICAgICAgfVxuXG4gICAgICAudG9vbHRpcC10YXJnZXQ6aG92ZXI6OmFmdGVyIHtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoMCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdW5jZW1lbnQtcHJldmlldyB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiAgICAgICAgbWluLXdpZHRoOiAzMDBweDtcbiAgICAgICAgbWF4LXdpZHRoOiAzMDBweDtcbiAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgIGNvbG9yOiAjMTExODI3O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMTJweCAyOHB4IHJnYmEoMTUsIDIzLCA0MiwgMC4yMik7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMTJweDtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgei1pbmRleDogNDUwMDtcbiAgICAgICAgYW5pbWF0aW9uOiBmYWRlLXNsaWRlLWluIDE2MG1zIGVhc2U7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMTQ4LCAxNjMsIDE4NCwgMC4zNSk7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdW5jZW1lbnQtcHJldmlld1tkYXRhLXNpZGU9XCJsZWZ0XCJdIHtcbiAgICAgICAgcmlnaHQ6IDEwMCU7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmFubm91bmNlbWVudC1wcmV2aWV3W2RhdGEtc2lkZT1cInJpZ2h0XCJdIHtcbiAgICAgICAgbGVmdDogMTAwJTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdW5jZW1lbnQtcHJldmlld19fYXJyb3cge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgICBoZWlnaHQ6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDE0OCwgMTYzLCAxODQsIDAuMzUpO1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG4gICAgICAgIHRvcDogNTAlO1xuICAgICAgICBtYXJnaW4tdG9wOiAtNXB4O1xuICAgICAgICB6LWluZGV4OiAtMTtcbiAgICAgIH1cblxuICAgICAgLmFubm91bmNlbWVudC1wcmV2aWV3W2RhdGEtc2lkZT1cImxlZnRcIl0gLmFubm91bmNlbWVudC1wcmV2aWV3X19hcnJvdyB7XG4gICAgICAgIHJpZ2h0OiAtNXB4O1xuICAgICAgICBib3gtc2hhZG93OiA2cHggLTZweCAxMHB4IHJnYmEoMTUsIDIzLCA0MiwgMC4xMik7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdW5jZW1lbnQtcHJldmlld1tkYXRhLXNpZGU9XCJyaWdodFwiXSAuYW5ub3VuY2VtZW50LXByZXZpZXdfX2Fycm93IHtcbiAgICAgICAgbGVmdDogLTVweDtcbiAgICAgICAgYm94LXNoYWRvdzogLTZweCA2cHggMTBweCByZ2JhKDE1LCAyMywgNDIsIDAuMTIpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3VuY2VtZW50LWRpc21pc3Mge1xuICAgICAgICBjb2xvcjogIzZiNzI4MDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMTQ4LCAxNjMsIDE4NCwgMC41KTtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNDgsIDI1MCwgMjUyLCAwLjkpO1xuICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDEyMG1zIGVhc2UsIGNvbG9yIDEyMG1zIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdW5jZW1lbnQtZGlzbWlzczpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjQxLCAyNDUsIDI0OSwgMSk7XG4gICAgICAgIGNvbG9yOiAjMTExODI3O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3VuY2VtZW50LWNvbnRlbnQge1xuICAgICAgICBjb2xvcjogIzExMTgyNztcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3VuY2VtZW50LWNvbnRlbnQgaDEsXG4gICAgICAuYW5ub3VuY2VtZW50LWNvbnRlbnQgaDIsXG4gICAgICAuYW5ub3VuY2VtZW50LWNvbnRlbnQgaDMge1xuICAgICAgICBmb250LXdlaWdodDogNzAwO1xuICAgICAgICBtYXJnaW46IDAuNHJlbSAwIDAuMnJlbTtcbiAgICAgIH1cblxuICAgICAgLmFubm91bmNlbWVudC1jb250ZW50IGgxIHtcbiAgICAgICAgZm9udC1zaXplOiAxLjFyZW07XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdW5jZW1lbnQtY29udGVudCBoMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgIH1cblxuICAgICAgLmFubm91bmNlbWVudC1jb250ZW50IGgzIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjk1cmVtO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3VuY2VtZW50LWNvbnRlbnQgcCB7XG4gICAgICAgIG1hcmdpbjogMC4yNXJlbSAwO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3VuY2VtZW50LWNvbnRlbnQgdWwge1xuICAgICAgICBsaXN0LXN0eWxlOiBkaXNjO1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDEuMjVyZW07XG4gICAgICAgIG1hcmdpbjogMC4zcmVtIDA7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdW5jZW1lbnQtY29udGVudCBvbCB7XG4gICAgICAgIGxpc3Qtc3R5bGU6IGRlY2ltYWw7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMS4yNXJlbTtcbiAgICAgICAgbWFyZ2luOiAwLjNyZW0gMDtcbiAgICAgIH1cblxuICAgICAgLmFubm91bmNlbWVudC1jb250ZW50IGEge1xuICAgICAgICBjb2xvcjogIzBmNzY2ZTtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgICB9XG4gICAgYFxuICAgIF07XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5oYW5kbGVSZXNpemUpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLmhhbmRsZUdsb2JhbFBvaW50ZXJEb3duKTtcbiAgICAgIHRoaXMuaHlkcmF0ZVN0YXRlRnJvbVN0b3JhZ2VFYXJseSgpO1xuICAgICAgdGhpcy50cnlBdXRvQXR0YWNoQ29yZSgpO1xuICAgICAgdGhpcy5lbnN1cmVBbm5vdW5jZW1lbnRMb2FkaW5nKCk7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuaGFuZGxlUmVzaXplKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgdGhpcy5oYW5kbGVHbG9iYWxQb2ludGVyRG93bik7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlRG9ja1N0eWxlcygpO1xuICAgIHRoaXMuZGV0YWNoRnJvbUNvcmUoKTtcbiAgfVxuICBmaXJzdFVwZGF0ZWQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9jb3JlKSB7XG4gICAgICB0aGlzLnRyeUF1dG9BdHRhY2hDb3JlKCk7XG4gICAgfVxuICAgIHRoaXMubWVhc3VyZUNvbnRleHQoXCJidXR0b25cIik7XG4gICAgdGhpcy5tZWFzdXJlQ29udGV4dChcIndpbmRvd1wiKTtcbiAgICB0aGlzLmNvbnRleHRTdGF0ZS5idXR0b24uYW5jaG9yID0geyBob3Jpem9udGFsOiBcInJpZ2h0XCIsIHZlcnRpY2FsOiBcInRvcFwiIH07XG4gICAgdGhpcy5jb250ZXh0U3RhdGUuYnV0dG9uLmFuY2hvck9mZnNldCA9IHsgeDogRURHRV9NQVJHSU4sIHk6IEVER0VfTUFSR0lOIH07XG4gICAgdGhpcy5jb250ZXh0U3RhdGUud2luZG93LmFuY2hvciA9IHsgaG9yaXpvbnRhbDogXCJyaWdodFwiLCB2ZXJ0aWNhbDogXCJ0b3BcIiB9O1xuICAgIHRoaXMuY29udGV4dFN0YXRlLndpbmRvdy5hbmNob3JPZmZzZXQgPSB7IHg6IEVER0VfTUFSR0lOLCB5OiBFREdFX01BUkdJTiB9O1xuICAgIHRoaXMuaHlkcmF0ZVN0YXRlRnJvbVN0b3JhZ2UoKTtcbiAgICBpZiAodGhpcy5pc09wZW4gJiYgdGhpcy5kb2NrTW9kZSAhPT0gXCJmbG9hdGluZ1wiKSB7XG4gICAgICB0aGlzLmFwcGx5RG9ja1N0eWxlcyh0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5hcHBseUFuY2hvclBvc2l0aW9uKFwiYnV0dG9uXCIpO1xuICAgIGlmICh0aGlzLmRvY2tNb2RlID09PSBcImZsb2F0aW5nXCIpIHtcbiAgICAgIGlmICh0aGlzLmhhc0N1c3RvbVBvc2l0aW9uLndpbmRvdykge1xuICAgICAgICB0aGlzLmFwcGx5QW5jaG9yUG9zaXRpb24oXCJ3aW5kb3dcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNlbnRlckNvbnRleHQoXCJ3aW5kb3dcIik7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZW5zdXJlQW5ub3VuY2VtZW50TG9hZGluZygpO1xuICAgIHRoaXMudXBkYXRlSG9zdFRyYW5zZm9ybSh0aGlzLmlzT3BlbiA/IFwid2luZG93XCIgOiBcImJ1dHRvblwiKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNPcGVuID8gdGhpcy5yZW5kZXJXaW5kb3coKSA6IHRoaXMucmVuZGVyQnV0dG9uKCk7XG4gIH1cbiAgcmVuZGVyQnV0dG9uKCkge1xuICAgIGNvbnN0IGJ1dHRvbkNsYXNzZXMgPSBbXG4gICAgICBcImNvbnNvbGUtYnV0dG9uXCIsXG4gICAgICBcImdyb3VwXCIsXG4gICAgICBcInJlbGF0aXZlXCIsXG4gICAgICBcInBvaW50ZXItZXZlbnRzLWF1dG9cIixcbiAgICAgIFwiaW5saW5lLWZsZXhcIixcbiAgICAgIFwiaC0xMlwiLFxuICAgICAgXCJ3LTEyXCIsXG4gICAgICBcIml0ZW1zLWNlbnRlclwiLFxuICAgICAgXCJqdXN0aWZ5LWNlbnRlclwiLFxuICAgICAgXCJyb3VuZGVkLWZ1bGxcIixcbiAgICAgIFwiYm9yZGVyXCIsXG4gICAgICBcImJvcmRlci13aGl0ZS8yMFwiLFxuICAgICAgXCJiZy1zbGF0ZS05NTAvOTVcIixcbiAgICAgIFwidGV4dC14c1wiLFxuICAgICAgXCJmb250LW1lZGl1bVwiLFxuICAgICAgXCJ0ZXh0LXdoaXRlXCIsXG4gICAgICBcInJpbmctMVwiLFxuICAgICAgXCJyaW5nLXdoaXRlLzEwXCIsXG4gICAgICBcImJhY2tkcm9wLWJsdXItbWRcIixcbiAgICAgIFwidHJhbnNpdGlvblwiLFxuICAgICAgXCJob3Zlcjpib3JkZXItd2hpdGUvMzBcIixcbiAgICAgIFwiaG92ZXI6Ymctc2xhdGUtOTAwLzk1XCIsXG4gICAgICBcImhvdmVyOnNjYWxlLTEwNVwiLFxuICAgICAgXCJmb2N1cy12aXNpYmxlOm91dGxpbmVcIixcbiAgICAgIFwiZm9jdXMtdmlzaWJsZTpvdXRsaW5lLTJcIixcbiAgICAgIFwiZm9jdXMtdmlzaWJsZTpvdXRsaW5lLW9mZnNldC0yXCIsXG4gICAgICBcImZvY3VzLXZpc2libGU6b3V0bGluZS1yb3NlLTUwMFwiLFxuICAgICAgXCJ0b3VjaC1ub25lXCIsXG4gICAgICBcInNlbGVjdC1ub25lXCIsXG4gICAgICB0aGlzLmlzRHJhZ2dpbmcgPyBcImN1cnNvci1ncmFiYmluZ1wiIDogXCJjdXJzb3ItZ3JhYlwiXG4gICAgXS5qb2luKFwiIFwiKTtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3M9JHtidXR0b25DbGFzc2VzfVxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIldlYiBJbnNwZWN0b3JcIlxuICAgICAgICBkYXRhLWRyYWctY29udGV4dD1cImJ1dHRvblwiXG4gICAgICAgIGRhdGEtZHJhZ2dpbmc9JHt0aGlzLmlzRHJhZ2dpbmcgJiYgdGhpcy5wb2ludGVyQ29udGV4dCA9PT0gXCJidXR0b25cIiA/IFwidHJ1ZVwiIDogXCJmYWxzZVwifVxuICAgICAgICBAcG9pbnRlcmRvd249JHt0aGlzLmhhbmRsZVBvaW50ZXJEb3dufVxuICAgICAgICBAcG9pbnRlcm1vdmU9JHt0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlfVxuICAgICAgICBAcG9pbnRlcnVwPSR7dGhpcy5oYW5kbGVQb2ludGVyVXB9XG4gICAgICAgIEBwb2ludGVyY2FuY2VsPSR7dGhpcy5oYW5kbGVQb2ludGVyQ2FuY2VsfVxuICAgICAgICBAY2xpY2s9JHt0aGlzLmhhbmRsZUJ1dHRvbkNsaWNrfVxuICAgICAgPlxuICAgICAgICAke3RoaXMucmVuZGVyQW5ub3VuY2VtZW50UHJldmlldygpfVxuICAgICAgICA8aW1nIHNyYz0ke2luc3BlY3Rvcl9sb2dvX2ljb25fZGVmYXVsdH0gYWx0PVwiSW5zcGVjdG9yIGxvZ29cIiBjbGFzcz1cImgtNSB3LWF1dG9cIiBsb2FkaW5nPVwibGF6eVwiIC8+XG4gICAgICA8L2J1dHRvbj5cbiAgICBgO1xuICB9XG4gIHJlbmRlcldpbmRvdygpIHtcbiAgICBjb25zdCB3aW5kb3dTdGF0ZSA9IHRoaXMuY29udGV4dFN0YXRlLndpbmRvdztcbiAgICBjb25zdCBpc0RvY2tlZCA9IHRoaXMuZG9ja01vZGUgIT09IFwiZmxvYXRpbmdcIjtcbiAgICBjb25zdCBpc1RyYW5zaXRpb25pbmcgPSB0aGlzLmhhc0F0dHJpYnV0ZShcImRhdGEtdHJhbnNpdGlvbmluZ1wiKTtcbiAgICBjb25zdCB3aW5kb3dTdHlsZXMgPSBpc0RvY2tlZCA/IHRoaXMuZ2V0RG9ja2VkV2luZG93U3R5bGVzKCkgOiB7XG4gICAgICB3aWR0aDogYCR7TWF0aC5yb3VuZCh3aW5kb3dTdGF0ZS5zaXplLndpZHRoKX1weGAsXG4gICAgICBoZWlnaHQ6IGAke01hdGgucm91bmQod2luZG93U3RhdGUuc2l6ZS5oZWlnaHQpfXB4YCxcbiAgICAgIG1pbldpZHRoOiBgJHtNSU5fV0lORE9XX1dJRFRIfXB4YCxcbiAgICAgIG1pbkhlaWdodDogYCR7TUlOX1dJTkRPV19IRUlHSFR9cHhgXG4gICAgfTtcbiAgICBjb25zdCBoYXNDb250ZXh0RHJvcGRvd24gPSB0aGlzLmNvbnRleHRPcHRpb25zLmxlbmd0aCA+IDA7XG4gICAgY29uc3QgY29udGV4dERyb3Bkb3duID0gaGFzQ29udGV4dERyb3Bkb3duID8gdGhpcy5yZW5kZXJDb250ZXh0RHJvcGRvd24oKSA6IG5vdGhpbmc7XG4gICAgY29uc3QgY29yZVN0YXR1cyA9IHRoaXMuZ2V0Q29yZVN0YXR1c1N1bW1hcnkoKTtcbiAgICBjb25zdCBhZ2VudFNlbGVjdG9yID0gaGFzQ29udGV4dERyb3Bkb3duID8gY29udGV4dERyb3Bkb3duIDogaHRtbGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWRhc2hlZCBib3JkZXItZ3JheS0yMDAgcHgtMiBweS0xIHRleHQteHMgdGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgPHNwYW4+JHt0aGlzLnJlbmRlckljb24oXCJCb3RcIil9PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZVwiPk5vIGFnZW50cyBhdmFpbGFibGU8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c2VjdGlvblxuICAgICAgICBjbGFzcz1cImluc3BlY3Rvci13aW5kb3cgcG9pbnRlci1ldmVudHMtYXV0byByZWxhdGl2ZSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgdGV4dC1ncmF5LTkwMCBzaGFkb3ctbGdcIlxuICAgICAgICBzdHlsZT0ke3N0eWxlTWFwKHdpbmRvd1N0eWxlcyl9XG4gICAgICAgIGRhdGEtZG9ja2VkPSR7aXNEb2NrZWR9XG4gICAgICAgIGRhdGEtdHJhbnNpdGlvbmluZz0ke2lzVHJhbnNpdGlvbmluZ31cbiAgICAgID5cbiAgICAgICAgJHtpc0RvY2tlZCA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzcz1cImRvY2stcmVzaXplLWhhbmRsZSBwb2ludGVyLWV2ZW50cy1hdXRvXCJcbiAgICAgICAgICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICAgIEBwb2ludGVyZG93bj0ke3RoaXMuaGFuZGxlUmVzaXplUG9pbnRlckRvd259XG4gICAgICAgICAgICAgICAgQHBvaW50ZXJtb3ZlPSR7dGhpcy5oYW5kbGVSZXNpemVQb2ludGVyTW92ZX1cbiAgICAgICAgICAgICAgICBAcG9pbnRlcnVwPSR7dGhpcy5oYW5kbGVSZXNpemVQb2ludGVyVXB9XG4gICAgICAgICAgICAgICAgQHBvaW50ZXJjYW5jZWw9JHt0aGlzLmhhbmRsZVJlc2l6ZVBvaW50ZXJDYW5jZWx9XG4gICAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICAgIGAgOiBub3RoaW5nfVxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LTEgZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuIGJnLXdoaXRlIHRleHQtZ3JheS04MDBcIj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImRyYWctaGFuZGxlIHJlbGF0aXZlIHotMzAgZmxleCBmbGV4LWNvbCBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1zbSAke2lzRG9ja2VkID8gXCJcIiA6IHRoaXMuaXNEcmFnZ2luZyAmJiB0aGlzLnBvaW50ZXJDb250ZXh0ID09PSBcIndpbmRvd1wiID8gXCJjdXJzb3ItZ3JhYmJpbmdcIiA6IFwiY3Vyc29yLWdyYWJcIn1cIlxuICAgICAgICAgICAgZGF0YS1kcmFnLWNvbnRleHQ9XCJ3aW5kb3dcIlxuICAgICAgICAgICAgQHBvaW50ZXJkb3duPSR7aXNEb2NrZWQgPyB2b2lkIDAgOiB0aGlzLmhhbmRsZVBvaW50ZXJEb3dufVxuICAgICAgICAgICAgQHBvaW50ZXJtb3ZlPSR7aXNEb2NrZWQgPyB2b2lkIDAgOiB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlfVxuICAgICAgICAgICAgQHBvaW50ZXJ1cD0ke2lzRG9ja2VkID8gdm9pZCAwIDogdGhpcy5oYW5kbGVQb2ludGVyVXB9XG4gICAgICAgICAgICBAcG9pbnRlcmNhbmNlbD0ke2lzRG9ja2VkID8gdm9pZCAwIDogdGhpcy5oYW5kbGVQb2ludGVyQ2FuY2VsfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtd3JhcCBpdGVtcy1jZW50ZXIgZ2FwLTMgcHgtNCBweS0zXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9JHtpbnNwZWN0b3JfbG9nb19kZWZhdWx0fSBhbHQ9XCJJbnNwZWN0b3IgbG9nb1wiIGNsYXNzPVwiaC02IHctYXV0b1wiIGxvYWRpbmc9XCJsYXp5XCIgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtbC1hdXRvIGZsZXggbWluLXctMCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWluLXctWzE2MHB4XSBtYXgtdy14c1wiPlxuICAgICAgICAgICAgICAgICAgJHthZ2VudFNlbGVjdG9yfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPlxuICAgICAgICAgICAgICAgICAgJHt0aGlzLnJlbmRlckRvY2tDb250cm9scygpfVxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZsZXggaC04IHctOCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1tZCB0ZXh0LWdyYXktNDAwIHRyYW5zaXRpb24gaG92ZXI6YmctZ3JheS0xMDAgaG92ZXI6dGV4dC1ncmF5LTYwMCBmb2N1cy12aXNpYmxlOm91dGxpbmUgZm9jdXMtdmlzaWJsZTpvdXRsaW5lLTIgZm9jdXMtdmlzaWJsZTpvdXRsaW5lLW9mZnNldC0yIGZvY3VzLXZpc2libGU6b3V0bGluZS1ncmF5LTQwMFwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ2xvc2UgV2ViIEluc3BlY3RvclwiXG4gICAgICAgICAgICAgICAgICAgIEBwb2ludGVyZG93bj0ke3RoaXMuaGFuZGxlQ2xvc2VQb2ludGVyRG93bn1cbiAgICAgICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5oYW5kbGVDbG9zZUNsaWNrfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMucmVuZGVySWNvbihcIlhcIil9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtd3JhcCBpdGVtcy1jZW50ZXIgZ2FwLTIgYm9yZGVyLXQgYm9yZGVyLWdyYXktMTAwIHB4LTMgcHktMiB0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgICR7dGhpcy5tZW51SXRlbXMubWFwKCh7IGtleSwgbGFiZWwsIGljb24gfSkgPT4ge1xuICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRNZW51ID09PSBrZXk7XG4gICAgICBjb25zdCB0YWJDbGFzc2VzID0gW1xuICAgICAgICBcImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiByb3VuZGVkLW1kIHB4LTMgcHktMiB0cmFuc2l0aW9uIGZvY3VzLXZpc2libGU6b3V0bGluZSBmb2N1cy12aXNpYmxlOm91dGxpbmUtMiBmb2N1cy12aXNpYmxlOm91dGxpbmUtb2Zmc2V0LTIgZm9jdXMtdmlzaWJsZTpvdXRsaW5lLWdyYXktMzAwXCIsXG4gICAgICAgIGlzU2VsZWN0ZWQgPyBcImJnLWdyYXktOTAwIHRleHQtd2hpdGUgc2hhZG93LXNtXCIgOiBcInRleHQtZ3JheS02MDAgaG92ZXI6YmctZ3JheS0xMDAgaG92ZXI6dGV4dC1ncmF5LTkwMFwiXG4gICAgICBdLmpvaW4oXCIgXCIpO1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz0ke3RhYkNsYXNzZXN9XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD0ke2lzU2VsZWN0ZWR9XG4gICAgICAgICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuaGFuZGxlTWVudVNlbGVjdChrZXkpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtZ3JheS00MDAgJHtpc1NlbGVjdGVkID8gXCJ0ZXh0LXdoaXRlXCIgOiBcIlwifVwiPlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKGljb24pfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7bGFiZWx9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgYDtcbiAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC0xIGZsZXgtY29sIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC0xIG92ZXJmbG93LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAke3RoaXMucmVuZGVyQW5ub3VuY2VtZW50UGFuZWwoKX1cbiAgICAgICAgICAgICAgICAke3RoaXMucmVuZGVyQ29yZVdhcm5pbmdCYW5uZXIoKX1cbiAgICAgICAgICAgICAgICAke3RoaXMucmVuZGVyTWFpbkNvbnRlbnQoKX1cbiAgICAgICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwIGJnLWdyYXktNTAgcHgtNCBweS0yXCI+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiByb3VuZGVkLW1kIHB4LTMgcHktMiB0ZXh0LXhzICR7Y29yZVN0YXR1cy50b25lfSB3LWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIG15LTFcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9JHtjb3JlU3RhdHVzLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmxleCBoLTYgdy02IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkIGJnLXdoaXRlLzYwXCI+XG4gICAgICAgICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiQWN0aXZpdHlcIil9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtbWVkaXVtXCI+JHtjb3JlU3RhdHVzLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidHJ1bmNhdGUgdGV4dC1bMTFweF0gb3BhY2l0eS04MFwiPiR7Y29yZVN0YXR1cy5kZXNjcmlwdGlvbn08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cInJlc2l6ZS1oYW5kbGUgcG9pbnRlci1ldmVudHMtYXV0byBhYnNvbHV0ZSBib3R0b20tMSByaWdodC0xIGZsZXggaC01IHctNSBjdXJzb3ItbndzZS1yZXNpemUgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtZ3JheS00MDAgdHJhbnNpdGlvbiBob3Zlcjp0ZXh0LWdyYXktNjAwXCJcbiAgICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgIEBwb2ludGVyZG93bj0ke3RoaXMuaGFuZGxlUmVzaXplUG9pbnRlckRvd259XG4gICAgICAgICAgQHBvaW50ZXJtb3ZlPSR7dGhpcy5oYW5kbGVSZXNpemVQb2ludGVyTW92ZX1cbiAgICAgICAgICBAcG9pbnRlcnVwPSR7dGhpcy5oYW5kbGVSZXNpemVQb2ludGVyVXB9XG4gICAgICAgICAgQHBvaW50ZXJjYW5jZWw9JHt0aGlzLmhhbmRsZVJlc2l6ZVBvaW50ZXJDYW5jZWx9XG4gICAgICAgID5cbiAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICBjbGFzcz1cImgtMyB3LTNcIlxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAxNiAxNlwiXG4gICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICBzdHJva2Utd2lkdGg9XCIxLjVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNNSAxNUwxNSA1XCIgLz5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNOSAxNUwxNSA5XCIgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgYDtcbiAgfVxuICBoeWRyYXRlU3RhdGVGcm9tU3RvcmFnZUVhcmx5KCkge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwZXJzaXN0ZWQgPSBsb2FkSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX1NUT1JBR0VfS0VZKTtcbiAgICBpZiAoIXBlcnNpc3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBlcnNpc3RlZC5pc09wZW4gPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICB0aGlzLmlzT3BlbiA9IHBlcnNpc3RlZC5pc09wZW47XG4gICAgfVxuICAgIGlmIChpc1ZhbGlkRG9ja01vZGUocGVyc2lzdGVkLmRvY2tNb2RlKSkge1xuICAgICAgdGhpcy5kb2NrTW9kZSA9IHBlcnNpc3RlZC5kb2NrTW9kZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwZXJzaXN0ZWQuc2VsZWN0ZWRNZW51ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCB2YWxpZE1lbnUgPSB0aGlzLm1lbnVJdGVtcy5maW5kKChpdGVtKSA9PiBpdGVtLmtleSA9PT0gcGVyc2lzdGVkLnNlbGVjdGVkTWVudSk7XG4gICAgICBpZiAodmFsaWRNZW51KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRNZW51ID0gdmFsaWRNZW51LmtleTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwZXJzaXN0ZWQuc2VsZWN0ZWRDb250ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ29udGV4dCA9IHBlcnNpc3RlZC5zZWxlY3RlZENvbnRleHQ7XG4gICAgICB0aGlzLnBlbmRpbmdTZWxlY3RlZENvbnRleHQgPSBwZXJzaXN0ZWQuc2VsZWN0ZWRDb250ZXh0O1xuICAgIH1cbiAgfVxuICBoeWRyYXRlU3RhdGVGcm9tU3RvcmFnZSgpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGVyc2lzdGVkID0gbG9hZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9TVE9SQUdFX0tFWSk7XG4gICAgaWYgKCFwZXJzaXN0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGVyc2lzdGVkQnV0dG9uID0gcGVyc2lzdGVkLmJ1dHRvbjtcbiAgICBpZiAocGVyc2lzdGVkQnV0dG9uKSB7XG4gICAgICBpZiAoaXNWYWxpZEFuY2hvcihwZXJzaXN0ZWRCdXR0b24uYW5jaG9yKSkge1xuICAgICAgICB0aGlzLmNvbnRleHRTdGF0ZS5idXR0b24uYW5jaG9yID0gcGVyc2lzdGVkQnV0dG9uLmFuY2hvcjtcbiAgICAgIH1cbiAgICAgIGlmIChpc1ZhbGlkUG9zaXRpb24ocGVyc2lzdGVkQnV0dG9uLmFuY2hvck9mZnNldCkpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0U3RhdGUuYnV0dG9uLmFuY2hvck9mZnNldCA9IHBlcnNpc3RlZEJ1dHRvbi5hbmNob3JPZmZzZXQ7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHBlcnNpc3RlZEJ1dHRvbi5oYXNDdXN0b21Qb3NpdGlvbiA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgdGhpcy5oYXNDdXN0b21Qb3NpdGlvbi5idXR0b24gPSBwZXJzaXN0ZWRCdXR0b24uaGFzQ3VzdG9tUG9zaXRpb247XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBlcnNpc3RlZFdpbmRvdyA9IHBlcnNpc3RlZC53aW5kb3c7XG4gICAgaWYgKHBlcnNpc3RlZFdpbmRvdykge1xuICAgICAgaWYgKGlzVmFsaWRBbmNob3IocGVyc2lzdGVkV2luZG93LmFuY2hvcikpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0U3RhdGUud2luZG93LmFuY2hvciA9IHBlcnNpc3RlZFdpbmRvdy5hbmNob3I7XG4gICAgICB9XG4gICAgICBpZiAoaXNWYWxpZFBvc2l0aW9uKHBlcnNpc3RlZFdpbmRvdy5hbmNob3JPZmZzZXQpKSB7XG4gICAgICAgIHRoaXMuY29udGV4dFN0YXRlLndpbmRvdy5hbmNob3JPZmZzZXQgPSBwZXJzaXN0ZWRXaW5kb3cuYW5jaG9yT2Zmc2V0O1xuICAgICAgfVxuICAgICAgaWYgKGlzVmFsaWRTaXplKHBlcnNpc3RlZFdpbmRvdy5zaXplKSkge1xuICAgICAgICB0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3cuc2l6ZSA9IHRoaXMuY2xhbXBXaW5kb3dTaXplKHBlcnNpc3RlZFdpbmRvdy5zaXplKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcGVyc2lzdGVkV2luZG93Lmhhc0N1c3RvbVBvc2l0aW9uID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICB0aGlzLmhhc0N1c3RvbVBvc2l0aW9uLndpbmRvdyA9IHBlcnNpc3RlZFdpbmRvdy5oYXNDdXN0b21Qb3NpdGlvbjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwZXJzaXN0ZWQuc2VsZWN0ZWRDb250ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ29udGV4dCA9IHBlcnNpc3RlZC5zZWxlY3RlZENvbnRleHQ7XG4gICAgICB0aGlzLnBlbmRpbmdTZWxlY3RlZENvbnRleHQgPSBwZXJzaXN0ZWQuc2VsZWN0ZWRDb250ZXh0O1xuICAgIH1cbiAgfVxuICBnZXQgYWN0aXZlQ29udGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc09wZW4gPyBcIndpbmRvd1wiIDogXCJidXR0b25cIjtcbiAgfVxuICBtZWFzdXJlQ29udGV4dChjb250ZXh0KSB7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBjb250ZXh0ID09PSBcIndpbmRvd1wiID8gXCIuaW5zcGVjdG9yLXdpbmRvd1wiIDogXCIuY29uc29sZS1idXR0b25cIjtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5yZW5kZXJSb290Py5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZmFsbGJhY2sgPSBjb250ZXh0ID09PSBcIndpbmRvd1wiID8gREVGQVVMVF9XSU5ET1dfU0laRSA6IERFRkFVTFRfQlVUVE9OX1NJWkU7XG4gICAgdXBkYXRlU2l6ZUZyb21FbGVtZW50KHRoaXMuY29udGV4dFN0YXRlW2NvbnRleHRdLCBlbGVtZW50LCBmYWxsYmFjayk7XG4gIH1cbiAgY2VudGVyQ29udGV4dChjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgdmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZSgpO1xuICAgIGNlbnRlckNvbnRleHQodGhpcy5jb250ZXh0U3RhdGVbY29udGV4dF0sIHZpZXdwb3J0LCBFREdFX01BUkdJTik7XG4gICAgaWYgKGNvbnRleHQgPT09IHRoaXMuYWN0aXZlQ29udGV4dCkge1xuICAgICAgdGhpcy51cGRhdGVIb3N0VHJhbnNmb3JtKGNvbnRleHQpO1xuICAgIH1cbiAgICB0aGlzLmhhc0N1c3RvbVBvc2l0aW9uW2NvbnRleHRdID0gZmFsc2U7XG4gICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcbiAgfVxuICBlbnN1cmVXaW5kb3dQbGFjZW1lbnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmhhc0N1c3RvbVBvc2l0aW9uLndpbmRvdykge1xuICAgICAgdGhpcy5jZW50ZXJDb250ZXh0KFwid2luZG93XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB2aWV3cG9ydCA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplKCk7XG4gICAga2VlcFBvc2l0aW9uV2l0aGluVmlld3BvcnQodGhpcy5jb250ZXh0U3RhdGUud2luZG93LCB2aWV3cG9ydCwgRURHRV9NQVJHSU4pO1xuICAgIHVwZGF0ZUFuY2hvckZyb21Qb3NpdGlvbih0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3csIHZpZXdwb3J0LCBFREdFX01BUkdJTik7XG4gICAgdGhpcy51cGRhdGVIb3N0VHJhbnNmb3JtKFwid2luZG93XCIpO1xuICAgIHRoaXMucGVyc2lzdFN0YXRlKCk7XG4gIH1cbiAgY29uc3RyYWluVG9WaWV3cG9ydChwb3NpdGlvbiwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgfVxuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydFNpemUoKTtcbiAgICByZXR1cm4gY29uc3RyYWluVG9WaWV3cG9ydCh0aGlzLmNvbnRleHRTdGF0ZVtjb250ZXh0XSwgcG9zaXRpb24sIHZpZXdwb3J0LCBFREdFX01BUkdJTik7XG4gIH1cbiAga2VlcFBvc2l0aW9uV2l0aGluVmlld3BvcnQoY29udGV4dCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydFNpemUoKTtcbiAgICBrZWVwUG9zaXRpb25XaXRoaW5WaWV3cG9ydCh0aGlzLmNvbnRleHRTdGF0ZVtjb250ZXh0XSwgdmlld3BvcnQsIEVER0VfTUFSR0lOKTtcbiAgfVxuICBnZXRWaWV3cG9ydFNpemUoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiB7IC4uLkRFRkFVTFRfV0lORE9XX1NJWkUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLCBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCB9O1xuICB9XG4gIHBlcnNpc3RTdGF0ZSgpIHtcbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgIGJ1dHRvbjoge1xuICAgICAgICBhbmNob3I6IHRoaXMuY29udGV4dFN0YXRlLmJ1dHRvbi5hbmNob3IsXG4gICAgICAgIGFuY2hvck9mZnNldDogdGhpcy5jb250ZXh0U3RhdGUuYnV0dG9uLmFuY2hvck9mZnNldCxcbiAgICAgICAgaGFzQ3VzdG9tUG9zaXRpb246IHRoaXMuaGFzQ3VzdG9tUG9zaXRpb24uYnV0dG9uXG4gICAgICB9LFxuICAgICAgd2luZG93OiB7XG4gICAgICAgIGFuY2hvcjogdGhpcy5jb250ZXh0U3RhdGUud2luZG93LmFuY2hvcixcbiAgICAgICAgYW5jaG9yT2Zmc2V0OiB0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3cuYW5jaG9yT2Zmc2V0LFxuICAgICAgICBzaXplOiB7XG4gICAgICAgICAgd2lkdGg6IE1hdGgucm91bmQodGhpcy5jb250ZXh0U3RhdGUud2luZG93LnNpemUud2lkdGgpLFxuICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZCh0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3cuc2l6ZS5oZWlnaHQpXG4gICAgICAgIH0sXG4gICAgICAgIGhhc0N1c3RvbVBvc2l0aW9uOiB0aGlzLmhhc0N1c3RvbVBvc2l0aW9uLndpbmRvd1xuICAgICAgfSxcbiAgICAgIGlzT3BlbjogdGhpcy5pc09wZW4sXG4gICAgICBkb2NrTW9kZTogdGhpcy5kb2NrTW9kZSxcbiAgICAgIHNlbGVjdGVkTWVudTogdGhpcy5zZWxlY3RlZE1lbnUsXG4gICAgICBzZWxlY3RlZENvbnRleHQ6IHRoaXMuc2VsZWN0ZWRDb250ZXh0XG4gICAgfTtcbiAgICBzYXZlSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX1NUT1JBR0VfS0VZLCBzdGF0ZSk7XG4gICAgdGhpcy5wZW5kaW5nU2VsZWN0ZWRDb250ZXh0ID0gc3RhdGUuc2VsZWN0ZWRDb250ZXh0ID8/IG51bGw7XG4gIH1cbiAgY2xhbXBXaW5kb3dTaXplKHNpemUpIHtcbiAgICBjb25zdCBtaW5XaWR0aCA9IHRoaXMuZG9ja01vZGUgPT09IFwiZG9ja2VkLWxlZnRcIiA/IE1JTl9XSU5ET1dfV0lEVEhfRE9DS0VEX0xFRlQgOiBNSU5fV0lORE9XX1dJRFRIO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogTWF0aC5tYXgobWluV2lkdGgsIHNpemUud2lkdGgpLFxuICAgICAgICBoZWlnaHQ6IE1hdGgubWF4KE1JTl9XSU5ET1dfSEVJR0hULCBzaXplLmhlaWdodClcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydFNpemUoKTtcbiAgICByZXR1cm4gY2xhbXBTaXplKHNpemUsIHZpZXdwb3J0LCBFREdFX01BUkdJTiwgbWluV2lkdGgsIE1JTl9XSU5ET1dfSEVJR0hUKTtcbiAgfVxuICBzZXREb2NrTW9kZShtb2RlKSB7XG4gICAgaWYgKHRoaXMuZG9ja01vZGUgPT09IG1vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdGFydEhvc3RUcmFuc2l0aW9uKCk7XG4gICAgdGhpcy5yZW1vdmVEb2NrU3R5bGVzKCk7XG4gICAgdGhpcy5kb2NrTW9kZSA9IG1vZGU7XG4gICAgaWYgKG1vZGUgIT09IFwiZmxvYXRpbmdcIikge1xuICAgICAgaWYgKG1vZGUgPT09IFwiZG9ja2VkLWxlZnRcIikge1xuICAgICAgICB0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3cuc2l6ZS53aWR0aCA9IERPQ0tFRF9MRUZUX1dJRFRIO1xuICAgICAgfVxuICAgICAgdGhpcy5hcHBseURvY2tTdHlsZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250ZXh0U3RhdGUud2luZG93LnNpemUgPSB7IC4uLkRFRkFVTFRfV0lORE9XX1NJWkUgfTtcbiAgICAgIHRoaXMuY2VudGVyQ29udGV4dChcIndpbmRvd1wiKTtcbiAgICB9XG4gICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhvc3RUcmFuc2Zvcm0oXCJ3aW5kb3dcIik7XG4gIH1cbiAgc3RhcnRIb3N0VHJhbnNpdGlvbihkdXJhdGlvbiA9IDMwMCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiZGF0YS10cmFuc2l0aW9uaW5nXCIsIFwidHJ1ZVwiKTtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uVGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50cmFuc2l0aW9uVGltZW91dElkKTtcbiAgICB9XG4gICAgdGhpcy50cmFuc2l0aW9uVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtdHJhbnNpdGlvbmluZ1wiKTtcbiAgICAgIHRoaXMudHJhbnNpdGlvblRpbWVvdXRJZCA9IG51bGw7XG4gICAgfSwgZHVyYXRpb24pO1xuICB9XG4gIGFwcGx5RG9ja1N0eWxlcyhza2lwVHJhbnNpdGlvbiA9IGZhbHNlKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhZG9jdW1lbnQuYm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7XG4gICAgdGhpcy5wcmV2aW91c0JvZHlNYXJnaW5zID0ge1xuICAgICAgbGVmdDogY29tcHV0ZWRTdHlsZS5tYXJnaW5MZWZ0LFxuICAgICAgYm90dG9tOiBjb21wdXRlZFN0eWxlLm1hcmdpbkJvdHRvbVxuICAgIH07XG4gICAgaWYgKCF0aGlzLmlzUmVzaXppbmcgJiYgIXNraXBUcmFuc2l0aW9uKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRyYW5zaXRpb24gPSBcIm1hcmdpbiAzMDBtcyBlYXNlXCI7XG4gICAgfVxuICAgIGlmICh0aGlzLmRvY2tNb2RlID09PSBcImRvY2tlZC1sZWZ0XCIpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luTGVmdCA9IGAke3RoaXMuY29udGV4dFN0YXRlLndpbmRvdy5zaXplLndpZHRofXB4YDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmlzUmVzaXppbmcgJiYgIXNraXBUcmFuc2l0aW9uKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRyYW5zaXRpb24gPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfVxuICByZW1vdmVEb2NrU3R5bGVzKCkge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIgfHwgIWRvY3VtZW50LmJvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmlzUmVzaXppbmcpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNpdGlvbiA9IFwibWFyZ2luIDMwMG1zIGVhc2VcIjtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJldmlvdXNCb2R5TWFyZ2lucykge1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5MZWZ0ID0gdGhpcy5wcmV2aW91c0JvZHlNYXJnaW5zLmxlZnQ7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbkJvdHRvbSA9IHRoaXMucHJldmlvdXNCb2R5TWFyZ2lucy5ib3R0b207XG4gICAgICB0aGlzLnByZXZpb3VzQm9keU1hcmdpbnMgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbkxlZnQgPSBcIlwiO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIlwiO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNpdGlvbiA9IFwiXCI7XG4gICAgICB9XG4gICAgfSwgMzAwKTtcbiAgfVxuICB1cGRhdGVIb3N0VHJhbnNmb3JtKGNvbnRleHQgPSB0aGlzLmFjdGl2ZUNvbnRleHQpIHtcbiAgICBpZiAoY29udGV4dCAhPT0gdGhpcy5hY3RpdmVDb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlzT3BlbiAmJiB0aGlzLmRvY2tNb2RlID09PSBcImRvY2tlZC1sZWZ0XCIpIHtcbiAgICAgIHRoaXMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsIDAsIDApYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyBwb3NpdGlvbiB9ID0gdGhpcy5jb250ZXh0U3RhdGVbY29udGV4dF07XG4gICAgICB0aGlzLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3Bvc2l0aW9uLnh9cHgsICR7cG9zaXRpb24ueX1weCwgMClgO1xuICAgIH1cbiAgfVxuICBzZXREcmFnZ2luZyh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmlzRHJhZ2dpbmcgIT09IHZhbHVlKSB7XG4gICAgICB0aGlzLmlzRHJhZ2dpbmcgPSB2YWx1ZTtcbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICB1cGRhdGVBbmNob3JGcm9tUG9zaXRpb24oY29udGV4dCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydFNpemUoKTtcbiAgICB1cGRhdGVBbmNob3JGcm9tUG9zaXRpb24odGhpcy5jb250ZXh0U3RhdGVbY29udGV4dF0sIHZpZXdwb3J0LCBFREdFX01BUkdJTik7XG4gIH1cbiAgc25hcEJ1dHRvblRvQ29ybmVyKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydFNpemUoKTtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuY29udGV4dFN0YXRlLmJ1dHRvbjtcbiAgICBjb25zdCBjZW50ZXJYID0gc3RhdGUucG9zaXRpb24ueCArIHN0YXRlLnNpemUud2lkdGggLyAyO1xuICAgIGNvbnN0IGNlbnRlclkgPSBzdGF0ZS5wb3NpdGlvbi55ICsgc3RhdGUuc2l6ZS5oZWlnaHQgLyAyO1xuICAgIGNvbnN0IGhvcml6b250YWwgPSBjZW50ZXJYIDwgdmlld3BvcnQud2lkdGggLyAyID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCI7XG4gICAgY29uc3QgdmVydGljYWwgPSBjZW50ZXJZIDwgdmlld3BvcnQuaGVpZ2h0IC8gMiA/IFwidG9wXCIgOiBcImJvdHRvbVwiO1xuICAgIHN0YXRlLmFuY2hvciA9IHsgaG9yaXpvbnRhbCwgdmVydGljYWwgfTtcbiAgICBzdGF0ZS5hbmNob3JPZmZzZXQgPSB7IHg6IEVER0VfTUFSR0lOLCB5OiBFREdFX01BUkdJTiB9O1xuICAgIHRoaXMuc3RhcnRIb3N0VHJhbnNpdGlvbigpO1xuICAgIHRoaXMuYXBwbHlBbmNob3JQb3NpdGlvbihcImJ1dHRvblwiKTtcbiAgfVxuICBhcHBseUFuY2hvclBvc2l0aW9uKGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB2aWV3cG9ydCA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplKCk7XG4gICAgYXBwbHlBbmNob3JQb3NpdGlvbih0aGlzLmNvbnRleHRTdGF0ZVtjb250ZXh0XSwgdmlld3BvcnQsIEVER0VfTUFSR0lOKTtcbiAgICB0aGlzLnVwZGF0ZUhvc3RUcmFuc2Zvcm0oY29udGV4dCk7XG4gICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcbiAgfVxuICByZXNldFJlc2l6ZVRyYWNraW5nKCkge1xuICAgIHRoaXMucmVzaXplUG9pbnRlcklkID0gbnVsbDtcbiAgICB0aGlzLnJlc2l6ZVN0YXJ0ID0gbnVsbDtcbiAgICB0aGlzLnJlc2l6ZUluaXRpYWxTaXplID0gbnVsbDtcbiAgICB0aGlzLmlzUmVzaXppbmcgPSBmYWxzZTtcbiAgfVxuICByZXNldFBvaW50ZXJUcmFja2luZygpIHtcbiAgICB0aGlzLnBvaW50ZXJJZCA9IG51bGw7XG4gICAgdGhpcy5kcmFnU3RhcnQgPSBudWxsO1xuICAgIHRoaXMucG9pbnRlckNvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuc2V0RHJhZ2dpbmcoZmFsc2UpO1xuICAgIHRoaXMuZHJhZ2dlZER1cmluZ0ludGVyYWN0aW9uID0gZmFsc2U7XG4gIH1cbiAgb3Blbkluc3BlY3RvcigpIHtcbiAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zaG93QW5ub3VuY2VtZW50UHJldmlldyA9IGZhbHNlO1xuICAgIHRoaXMuZW5zdXJlQW5ub3VuY2VtZW50TG9hZGluZygpO1xuICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICB0aGlzLnBlcnNpc3RTdGF0ZSgpO1xuICAgIGlmICh0aGlzLmRvY2tNb2RlICE9PSBcImZsb2F0aW5nXCIpIHtcbiAgICAgIHRoaXMuYXBwbHlEb2NrU3R5bGVzKCk7XG4gICAgfVxuICAgIHRoaXMuZW5zdXJlV2luZG93UGxhY2VtZW50KCk7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgdm9pZCB0aGlzLnVwZGF0ZUNvbXBsZXRlLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5tZWFzdXJlQ29udGV4dChcIndpbmRvd1wiKTtcbiAgICAgIGlmICh0aGlzLmRvY2tNb2RlID09PSBcImZsb2F0aW5nXCIpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ3VzdG9tUG9zaXRpb24ud2luZG93KSB7XG4gICAgICAgICAgdGhpcy5hcHBseUFuY2hvclBvc2l0aW9uKFwid2luZG93XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2VudGVyQ29udGV4dChcIndpbmRvd1wiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVIb3N0VHJhbnNmb3JtKFwid2luZG93XCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGNsb3NlSW5zcGVjdG9yKCkge1xuICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICBpZiAodGhpcy5kb2NrTW9kZSAhPT0gXCJmbG9hdGluZ1wiKSB7XG4gICAgICB0aGlzLnJlbW92ZURvY2tTdHlsZXMoKTtcbiAgICB9XG4gICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhvc3RUcmFuc2Zvcm0oXCJidXR0b25cIik7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgdm9pZCB0aGlzLnVwZGF0ZUNvbXBsZXRlLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5tZWFzdXJlQ29udGV4dChcImJ1dHRvblwiKTtcbiAgICAgIHRoaXMuYXBwbHlBbmNob3JQb3NpdGlvbihcImJ1dHRvblwiKTtcbiAgICB9KTtcbiAgfVxuICByZW5kZXJJY29uKG5hbWUpIHtcbiAgICBjb25zdCBpY29uTm9kZSA9IGljb25zW25hbWVdO1xuICAgIGlmICghaWNvbk5vZGUpIHtcbiAgICAgIHJldHVybiBub3RoaW5nO1xuICAgIH1cbiAgICBjb25zdCBzdmdBdHRycyA9IHtcbiAgICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgICB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLFxuICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsXG4gICAgICBcInN0cm9rZS13aWR0aFwiOiBcIjEuNVwiLFxuICAgICAgXCJzdHJva2UtbGluZWNhcFwiOiBcInJvdW5kXCIsXG4gICAgICBcInN0cm9rZS1saW5lam9pblwiOiBcInJvdW5kXCIsXG4gICAgICBjbGFzczogXCJoLTMuNSB3LTMuNVwiXG4gICAgfTtcbiAgICBjb25zdCBzdmdNYXJrdXAgPSBgPHN2ZyAke3RoaXMuc2VyaWFsaXplQXR0cmlidXRlcyhzdmdBdHRycyl9PiR7aWNvbk5vZGUubWFwKChbdGFnLCBhdHRyc10pID0+IGA8JHt0YWd9ICR7dGhpcy5zZXJpYWxpemVBdHRyaWJ1dGVzKGF0dHJzKX0gLz5gKS5qb2luKFwiXCIpfTwvc3ZnPmA7XG4gICAgcmV0dXJuIHVuc2FmZUhUTUwoc3ZnTWFya3VwKTtcbiAgfVxuICByZW5kZXJEb2NrQ29udHJvbHMoKSB7XG4gICAgaWYgKHRoaXMuZG9ja01vZGUgPT09IFwiZmxvYXRpbmdcIikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzcz1cImZsZXggaC04IHctOCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1tZCB0ZXh0LWdyYXktNDAwIHRyYW5zaXRpb24gaG92ZXI6YmctZ3JheS0xMDAgaG92ZXI6dGV4dC1ncmF5LTYwMCBmb2N1cy12aXNpYmxlOm91dGxpbmUgZm9jdXMtdmlzaWJsZTpvdXRsaW5lLTIgZm9jdXMtdmlzaWJsZTpvdXRsaW5lLW9mZnNldC0yIGZvY3VzLXZpc2libGU6b3V0bGluZS1ncmF5LTQwMFwiXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgYXJpYS1sYWJlbD1cIkRvY2sgdG8gbGVmdFwiXG4gICAgICAgICAgdGl0bGU9XCJEb2NrIExlZnRcIlxuICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuaGFuZGxlRG9ja0NsaWNrKFwiZG9ja2VkLWxlZnRcIil9XG4gICAgICAgID5cbiAgICAgICAgICAke3RoaXMucmVuZGVySWNvbihcIlBhbmVsTGVmdFwiKX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICBgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGNsYXNzPVwiZmxleCBoLTggdy04IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLW1kIHRleHQtZ3JheS00MDAgdHJhbnNpdGlvbiBob3ZlcjpiZy1ncmF5LTEwMCBob3Zlcjp0ZXh0LWdyYXktNjAwIGZvY3VzLXZpc2libGU6b3V0bGluZSBmb2N1cy12aXNpYmxlOm91dGxpbmUtMiBmb2N1cy12aXNpYmxlOm91dGxpbmUtb2Zmc2V0LTIgZm9jdXMtdmlzaWJsZTpvdXRsaW5lLWdyYXktNDAwXCJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiRmxvYXQgd2luZG93XCJcbiAgICAgICAgICB0aXRsZT1cIkZsb2F0XCJcbiAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmhhbmRsZURvY2tDbGljayhcImZsb2F0aW5nXCIpfVxuICAgICAgICA+XG4gICAgICAgICAgJHt0aGlzLnJlbmRlckljb24oXCJNYXhpbWl6ZTJcIil9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgYDtcbiAgICB9XG4gIH1cbiAgZ2V0RG9ja2VkV2luZG93U3R5bGVzKCkge1xuICAgIGlmICh0aGlzLmRvY2tNb2RlID09PSBcImRvY2tlZC1sZWZ0XCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICBib3R0b206IFwiMFwiLFxuICAgICAgICB3aWR0aDogYCR7TWF0aC5yb3VuZCh0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3cuc2l6ZS53aWR0aCl9cHhgLFxuICAgICAgICBoZWlnaHQ6IFwiMTAwdmhcIixcbiAgICAgICAgbWluV2lkdGg6IGAke01JTl9XSU5ET1dfV0lEVEhfRE9DS0VEX0xFRlR9cHhgLFxuICAgICAgICBib3JkZXJSYWRpdXM6IFwiMFwiXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IGAke01hdGgucm91bmQodGhpcy5jb250ZXh0U3RhdGUud2luZG93LnNpemUud2lkdGgpfXB4YCxcbiAgICAgIGhlaWdodDogYCR7TWF0aC5yb3VuZCh0aGlzLmNvbnRleHRTdGF0ZS53aW5kb3cuc2l6ZS5oZWlnaHQpfXB4YCxcbiAgICAgIG1pbldpZHRoOiBgJHtNSU5fV0lORE9XX1dJRFRIfXB4YCxcbiAgICAgIG1pbkhlaWdodDogYCR7TUlOX1dJTkRPV19IRUlHSFR9cHhgXG4gICAgfTtcbiAgfVxuICBoYW5kbGVEb2NrQ2xpY2sobW9kZSkge1xuICAgIHRoaXMuc2V0RG9ja01vZGUobW9kZSk7XG4gIH1cbiAgc2VyaWFsaXplQXR0cmlidXRlcyhhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZpbHRlcigoW2tleSwgdmFsdWVdKSA9PiBrZXkgIT09IFwia2V5XCIgJiYgdmFsdWUgIT09IHZvaWQgMCAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gXCJcIikubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09XCIke1N0cmluZyh2YWx1ZSkucmVwbGFjZSgvXCIvZywgXCImcXVvdDtcIil9XCJgKS5qb2luKFwiIFwiKTtcbiAgfVxuICBzYW5pdGl6ZUZvckxvZ2dpbmcodmFsdWUsIGRlcHRoID0gMCwgc2VlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpKSB7XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBcIlt1bmRlZmluZWRdXCI7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIgfHwgdHlwZW9mIHZhbHVlID09PSBcInN5bWJvbFwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgaWYgKGRlcHRoID49IDQpIHtcbiAgICAgICAgcmV0dXJuIFwiW1RydW5jYXRlZCBkZXB0aF1cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGl0ZW0pID0+IHRoaXMuc2FuaXRpemVGb3JMb2dnaW5nKGl0ZW0sIGRlcHRoICsgMSwgc2VlbikpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBpZiAoc2Vlbi5oYXModmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBcIltDaXJjdWxhcl1cIjtcbiAgICAgIH1cbiAgICAgIHNlZW4uYWRkKHZhbHVlKTtcbiAgICAgIGlmIChkZXB0aCA+PSA0KSB7XG4gICAgICAgIHJldHVybiBcIltUcnVuY2F0ZWQgZGVwdGhdXCI7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHRoaXMuc2FuaXRpemVGb3JMb2dnaW5nKGVudHJ5LCBkZXB0aCArIDEsIHNlZW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gIH1cbiAgbm9ybWFsaXplRXZlbnRQYXlsb2FkKF90eXBlLCBwYXlsb2FkKSB7XG4gICAgaWYgKHBheWxvYWQgJiYgdHlwZW9mIHBheWxvYWQgPT09IFwib2JqZWN0XCIgJiYgXCJldmVudFwiIGluIHBheWxvYWQpIHtcbiAgICAgIGNvbnN0IHsgZXZlbnQsIC4uLnJlc3QgfSA9IHBheWxvYWQ7XG4gICAgICBjb25zdCBjbGVhbmVkID0gT2JqZWN0LmtleXMocmVzdCkubGVuZ3RoID09PSAwID8gZXZlbnQgOiB7IGV2ZW50LCAuLi5yZXN0IH07XG4gICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZUZvckxvZ2dpbmcoY2xlYW5lZCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNhbml0aXplRm9yTG9nZ2luZyhwYXlsb2FkKTtcbiAgfVxuICBub3JtYWxpemVNZXNzYWdlQ29udGVudChjb250ZW50KSB7XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQgJiYgdHlwZW9mIGNvbnRlbnQgPT09IFwib2JqZWN0XCIgJiYgXCJ0ZXh0XCIgaW4gY29udGVudCkge1xuICAgICAgY29uc3QgbWF5YmVUZXh0ID0gY29udGVudC50ZXh0O1xuICAgICAgaWYgKHR5cGVvZiBtYXliZVRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVGV4dDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbnRlbnQgPT09IG51bGwgfHwgY29udGVudCA9PT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5zYW5pdGl6ZUZvckxvZ2dpbmcoY29udGVudCkpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKGNvbnRlbnQpO1xuICB9XG4gIG5vcm1hbGl6ZVRvb2xDYWxscyhyYXcpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocmF3KSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gcmF3Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgIGlmICghZW50cnkgfHwgdHlwZW9mIGVudHJ5ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgY2FsbCA9IGVudHJ5O1xuICAgICAgY29uc3QgZm4gPSBjYWxsLmZ1bmN0aW9uO1xuICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gdHlwZW9mIGZuPy5uYW1lID09PSBcInN0cmluZ1wiID8gZm4ubmFtZSA6IHR5cGVvZiBjYWxsLnRvb2xOYW1lID09PSBcInN0cmluZ1wiID8gY2FsbC50b29sTmFtZSA6IHZvaWQgMDtcbiAgICAgIGNvbnN0IGFyZ3MgPSBmbiAmJiBcImFyZ3VtZW50c1wiIGluIGZuID8gZm4uYXJndW1lbnRzIDogY2FsbC5hcmd1bWVudHM7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgICAgICBpZDogdHlwZW9mIGNhbGwuaWQgPT09IFwic3RyaW5nXCIgPyBjYWxsLmlkIDogdm9pZCAwLFxuICAgICAgICB0b29sTmFtZTogdHlwZW9mIGNhbGwudG9vbE5hbWUgPT09IFwic3RyaW5nXCIgPyBjYWxsLnRvb2xOYW1lIDogZnVuY3Rpb25OYW1lLFxuICAgICAgICBzdGF0dXM6IHR5cGVvZiBjYWxsLnN0YXR1cyA9PT0gXCJzdHJpbmdcIiA/IGNhbGwuc3RhdHVzIDogdm9pZCAwXG4gICAgICB9O1xuICAgICAgaWYgKGZ1bmN0aW9uTmFtZSkge1xuICAgICAgICBub3JtYWxpemVkLmZ1bmN0aW9uID0ge1xuICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICBhcmd1bWVudHM6IHRoaXMuc2FuaXRpemVGb3JMb2dnaW5nKGFyZ3MpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgICB9KS5maWx0ZXIoKGNhbGwpID0+IEJvb2xlYW4oY2FsbCkpO1xuICB9XG4gIG5vcm1hbGl6ZUFnZW50TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgaWYgKCFtZXNzYWdlIHx8IHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmF3ID0gbWVzc2FnZTtcbiAgICBjb25zdCByb2xlID0gdHlwZW9mIHJhdy5yb2xlID09PSBcInN0cmluZ1wiID8gcmF3LnJvbGUgOiBcInVua25vd25cIjtcbiAgICBjb25zdCBjb250ZW50VGV4dCA9IHRoaXMubm9ybWFsaXplTWVzc2FnZUNvbnRlbnQocmF3LmNvbnRlbnQpO1xuICAgIGNvbnN0IHRvb2xDYWxscyA9IHRoaXMubm9ybWFsaXplVG9vbENhbGxzKHJhdy50b29sQ2FsbHMpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdHlwZW9mIHJhdy5pZCA9PT0gXCJzdHJpbmdcIiA/IHJhdy5pZCA6IHZvaWQgMCxcbiAgICAgIHJvbGUsXG4gICAgICBjb250ZW50VGV4dCxcbiAgICAgIGNvbnRlbnRSYXc6IHJhdy5jb250ZW50ICE9PSB2b2lkIDAgPyB0aGlzLnNhbml0aXplRm9yTG9nZ2luZyhyYXcuY29udGVudCkgOiB2b2lkIDAsXG4gICAgICB0b29sQ2FsbHNcbiAgICB9O1xuICB9XG4gIG5vcm1hbGl6ZUFnZW50TWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZXMpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4gdGhpcy5ub3JtYWxpemVBZ2VudE1lc3NhZ2UobWVzc2FnZSkpLmZpbHRlcigobXNnKSA9PiBtc2cgIT09IG51bGwpO1xuICAgIHJldHVybiBub3JtYWxpemVkO1xuICB9XG4gIG5vcm1hbGl6ZUNvbnRleHRTdG9yZShjb250ZXh0KSB7XG4gICAgaWYgKCFjb250ZXh0IHx8IHR5cGVvZiBjb250ZXh0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiBPYmplY3QuZW50cmllcyhjb250ZXh0KSkge1xuICAgICAgaWYgKGVudHJ5ICYmIHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gZW50cnkpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gZW50cnk7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdHlwZW9mIGNhbmRpZGF0ZS5kZXNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIiAmJiBjYW5kaWRhdGUuZGVzY3JpcHRpb24udHJpbSgpLmxlbmd0aCA+IDAgPyBjYW5kaWRhdGUuZGVzY3JpcHRpb24gOiB2b2lkIDA7XG4gICAgICAgIG5vcm1hbGl6ZWRba2V5XSA9IHsgZGVzY3JpcHRpb24sIHZhbHVlOiBjYW5kaWRhdGUudmFsdWUgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbGl6ZWRba2V5XSA9IHsgdmFsdWU6IGVudHJ5IH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVkO1xuICB9XG4gIGdldFNlbGVjdGVkTWVudSgpIHtcbiAgICBjb25zdCBmb3VuZCA9IHRoaXMubWVudUl0ZW1zLmZpbmQoKGl0ZW0pID0+IGl0ZW0ua2V5ID09PSB0aGlzLnNlbGVjdGVkTWVudSk7XG4gICAgcmV0dXJuIGZvdW5kID8/IHRoaXMubWVudUl0ZW1zWzBdO1xuICB9XG4gIHJlbmRlckNvcmVXYXJuaW5nQmFubmVyKCkge1xuICAgIGlmICh0aGlzLl9jb3JlKSB7XG4gICAgICByZXR1cm4gbm90aGluZztcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwibXgtNCBteS0zIGZsZXggaXRlbXMtc3RhcnQgZ2FwLTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWFtYmVyLTIwMCBiZy1hbWJlci01MCBweC0zIHB5LTIgdGV4dC14cyB0ZXh0LWFtYmVyLTgwMFwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cIm10LTAuNSBzaHJpbmstMCB0ZXh0LWFtYmVyLTYwMFwiPiR7dGhpcy5yZW5kZXJJY29uKFwiQWxlcnRUcmlhbmdsZVwiKX08L3NwYW4+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS15LTFcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWFtYmVyLTkwMFwiPkNvcGlsb3RLaXQgY29yZSBub3QgYXR0YWNoZWQ8L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzcz1cInRleHQtWzExcHhdIGxlYWRpbmctc251ZyB0ZXh0LWFtYmVyLTgwMFwiPlxuICAgICAgICAgICAgUGFzcyBhIGxpdmUgPGNvZGU+Q29waWxvdEtpdENvcmU8L2NvZGU+IGluc3RhbmNlIHRvIDxjb2RlPiZsdDtjcGstd2ViLWluc3BlY3RvciZndDs8L2NvZGU+IG9yIGV4cG9zZSBpdCBvblxuICAgICAgICAgICAgPGNvZGU+d2luZG93Ll9fQ09QSUxPVEtJVF9DT1JFX188L2NvZGU+IGZvciBhdXRvLWF0dGFjaC5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuICBnZXRDb3JlU3RhdHVzU3VtbWFyeSgpIHtcbiAgICBpZiAoIXRoaXMuX2NvcmUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBcIkNvcmUgbm90IGF0dGFjaGVkXCIsXG4gICAgICAgIHRvbmU6IFwiYm9yZGVyIGJvcmRlci1hbWJlci0yMDAgYmctYW1iZXItNTAgdGV4dC1hbWJlci04MDBcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiUGFzcyBhIENvcGlsb3RLaXRDb3JlIGluc3RhbmNlIHRvIDxjcGstd2ViLWluc3BlY3Rvcj4gb3IgZW5hYmxlIGF1dG8tYXR0YWNoLlwiXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLnJ1bnRpbWVTdGF0dXMgPz8gQ29waWxvdEtpdENvcmVSdW50aW1lQ29ubmVjdGlvblN0YXR1cy5EaXNjb25uZWN0ZWQ7XG4gICAgY29uc3QgbGFzdEVycm9yTWVzc2FnZSA9IHRoaXMubGFzdENvcmVFcnJvcj8ubWVzc2FnZTtcbiAgICBpZiAoc3RhdHVzID09PSBDb3BpbG90S2l0Q29yZVJ1bnRpbWVDb25uZWN0aW9uU3RhdHVzLkVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYWJlbDogXCJSdW50aW1lIGVycm9yXCIsXG4gICAgICAgIHRvbmU6IFwiYm9yZGVyIGJvcmRlci1yb3NlLTIwMCBiZy1yb3NlLTUwIHRleHQtcm9zZS03MDBcIixcbiAgICAgICAgZGVzY3JpcHRpb246IGxhc3RFcnJvck1lc3NhZ2UgPz8gXCJDb3BpbG90S2l0IHJ1bnRpbWUgcmVwb3J0ZWQgYW4gZXJyb3IuXCJcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChzdGF0dXMgPT09IENvcGlsb3RLaXRDb3JlUnVudGltZUNvbm5lY3Rpb25TdGF0dXMuQ29ubmVjdGluZykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGFiZWw6IFwiQ29ubmVjdGluZ1wiLFxuICAgICAgICB0b25lOiBcImJvcmRlciBib3JkZXItYW1iZXItMjAwIGJnLWFtYmVyLTUwIHRleHQtYW1iZXItODAwXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIldhaXRpbmcgZm9yIENvcGlsb3RLaXQgcnVudGltZSB0byBmaW5pc2ggY29ubmVjdGluZy5cIlxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cyA9PT0gQ29waWxvdEtpdENvcmVSdW50aW1lQ29ubmVjdGlvblN0YXR1cy5Db25uZWN0ZWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBcIkNvbm5lY3RlZFwiLFxuICAgICAgICB0b25lOiBcImJvcmRlciBib3JkZXItZW1lcmFsZC0yMDAgYmctZW1lcmFsZC01MCB0ZXh0LWVtZXJhbGQtNzAwXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkxpdmUgcnVudGltZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkLlwiXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6IFwiRGlzY29ubmVjdGVkXCIsXG4gICAgICB0b25lOiBcImJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctZ3JheS01MCB0ZXh0LWdyYXktNzAwXCIsXG4gICAgICBkZXNjcmlwdGlvbjogbGFzdEVycm9yTWVzc2FnZSA/PyBcIldhaXRpbmcgZm9yIENvcGlsb3RLaXQgcnVudGltZSB0byBjb25uZWN0LlwiXG4gICAgfTtcbiAgfVxuICByZW5kZXJNYWluQ29udGVudCgpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZE1lbnUgPT09IFwiYWctdWktZXZlbnRzXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlckV2ZW50c1RhYmxlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkTWVudSA9PT0gXCJhZ2VudHNcIikge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQWdlbnRzVmlldygpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3RlZE1lbnUgPT09IFwiZnJvbnRlbmQtdG9vbHNcIikge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyVG9vbHNWaWV3KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGVkTWVudSA9PT0gXCJhZ2VudC1jb250ZXh0XCIpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlckNvbnRleHRWaWV3KCk7XG4gICAgfVxuICAgIHJldHVybiBub3RoaW5nO1xuICB9XG4gIHJlbmRlckV2ZW50c1RhYmxlKCkge1xuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuZ2V0RXZlbnRzRm9yU2VsZWN0ZWRDb250ZXh0KCk7XG4gICAgY29uc3QgZmlsdGVyZWRFdmVudHMgPSB0aGlzLmZpbHRlckV2ZW50cyhldmVudHMpO1xuICAgIGNvbnN0IHNlbGVjdGVkTGFiZWwgPSB0aGlzLnNlbGVjdGVkQ29udGV4dCA9PT0gXCJhbGwtYWdlbnRzXCIgPyBcImFsbCBhZ2VudHNcIiA6IGBhZ2VudCAke3RoaXMuc2VsZWN0ZWRDb250ZXh0fWA7XG4gICAgaWYgKGV2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBoLWZ1bGwgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB4LTQgcHktOCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXgtdy1tZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTMgZmxleCBqdXN0aWZ5LWNlbnRlciB0ZXh0LWdyYXktMzAwIFsmPnN2Z106IWgtOCBbJj5zdmddOiF3LThcIj5cbiAgICAgICAgICAgICAgJHt0aGlzLnJlbmRlckljb24oXCJaYXBcIil9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+Tm8gZXZlbnRzIHlldDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwibXQtMiB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5UcmlnZ2VyIGFuIGFnZW50IHJ1biB0byBzZWUgbGl2ZSBhY3Rpdml0eS48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG4gICAgaWYgKGZpbHRlcmVkRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGgtZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtNCBweS04IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1heC13LW1kIHNwYWNlLXktM1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTMwMCBbJj5zdmddOiFoLTggWyY+c3ZnXTohdy04XCI+XG4gICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiRmlsdGVyXCIpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPk5vIGV2ZW50cyBtYXRjaCB0aGUgY3VycmVudCBmaWx0ZXJzLjwvcD5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSByb3VuZGVkLW1kIGJnLWdyYXktOTAwIHB4LTMgcHktMS41IHRleHQtWzExcHhdIGZvbnQtbWVkaXVtIHRleHQtd2hpdGUgdHJhbnNpdGlvbiBob3ZlcjpiZy1ncmF5LTgwMFwiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5yZXNldEV2ZW50RmlsdGVyc31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiUmVmcmVzaEN3XCIpfVxuICAgICAgICAgICAgICAgIDxzcGFuPlJlc2V0IGZpbHRlcnM8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBoLWZ1bGwgZmxleC1jb2xcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC1jb2wgZ2FwLTEuNSBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcHgtNCBweS0yLjVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LXdyYXAgaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVsYXRpdmUgbWluLXctWzIwMHB4XSBmbGV4LTFcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInNlYXJjaFwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGwgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHB4LTMgcHktMS41IHRleHQtWzExcHhdIHRleHQtZ3JheS03MDAgc2hhZG93LXNtIG91dGxpbmUtbm9uZSByaW5nLTEgcmluZy10cmFuc3BhcmVudCB0cmFuc2l0aW9uIGZvY3VzOmJvcmRlci1ncmF5LTMwMCBmb2N1czpyaW5nLWdyYXktMjAwXCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaCBhZ2VudCwgdHlwZSwgcGF5bG9hZFwiXG4gICAgICAgICAgICAgICAgLnZhbHVlPSR7dGhpcy5ldmVudEZpbHRlclRleHR9XG4gICAgICAgICAgICAgICAgQGlucHV0PSR7dGhpcy5oYW5kbGVFdmVudEZpbHRlcklucHV0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIGNsYXNzPVwidy00MCByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcHgtMiBweS0xLjUgdGV4dC1bMTFweF0gdGV4dC1ncmF5LTcwMCBzaGFkb3ctc20gb3V0bGluZS1ub25lIHRyYW5zaXRpb24gZm9jdXM6Ym9yZGVyLWdyYXktMzAwIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWdyYXktMjAwXCJcbiAgICAgICAgICAgICAgLnZhbHVlPSR7dGhpcy5ldmVudFR5cGVGaWx0ZXJ9XG4gICAgICAgICAgICAgIEBjaGFuZ2U9JHt0aGlzLmhhbmRsZUV2ZW50VHlwZUNoYW5nZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImFsbFwiPkFsbCBldmVudCB0eXBlczwvb3B0aW9uPlxuICAgICAgICAgICAgICAke0FHRU5UX0VWRU5UX1RZUEVTLm1hcChcbiAgICAgICh0eXBlKSA9PiBodG1sYDxvcHRpb24gdmFsdWU9JHt0eXBlfT4ke3R5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIFwiIFwiKX08L29wdGlvbj5gXG4gICAgKX1cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIHRleHQtWzExcHhdXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cInRvb2x0aXAtdGFyZ2V0IGZsZXggaC04IHctOCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIGJnLXdoaXRlIHRleHQtZ3JheS02MDAgdHJhbnNpdGlvbiBob3ZlcjpiZy1ncmF5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlJlc2V0IGZpbHRlcnNcIlxuICAgICAgICAgICAgICAgIGRhdGEtdG9vbHRpcD1cIlJlc2V0IGZpbHRlcnNcIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJSZXNldCBmaWx0ZXJzXCJcbiAgICAgICAgICAgICAgICBAY2xpY2s9JHt0aGlzLnJlc2V0RXZlbnRGaWx0ZXJzfVxuICAgICAgICAgICAgICAgID9kaXNhYmxlZD0keyF0aGlzLmV2ZW50RmlsdGVyVGV4dCAmJiB0aGlzLmV2ZW50VHlwZUZpbHRlciA9PT0gXCJhbGxcIn1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiUm90YXRlQ3dcIil9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ0b29sdGlwLXRhcmdldCBmbGV4IGgtOCB3LTggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZSB0ZXh0LWdyYXktNjAwIHRyYW5zaXRpb24gaG92ZXI6YmctZ3JheS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6b3BhY2l0eS01MFwiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJFeHBvcnQgSlNPTlwiXG4gICAgICAgICAgICAgICAgZGF0YS10b29sdGlwPVwiRXhwb3J0IEpTT05cIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJFeHBvcnQgSlNPTlwiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5leHBvcnRFdmVudHMoZmlsdGVyZWRFdmVudHMpfVxuICAgICAgICAgICAgICAgID9kaXNhYmxlZD0ke2ZpbHRlcmVkRXZlbnRzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiRG93bmxvYWRcIil9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ0b29sdGlwLXRhcmdldCBmbGV4IGgtOCB3LTggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZSB0ZXh0LWdyYXktNjAwIHRyYW5zaXRpb24gaG92ZXI6YmctZ3JheS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6b3BhY2l0eS01MFwiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJDbGVhciBldmVudHNcIlxuICAgICAgICAgICAgICAgIGRhdGEtdG9vbHRpcD1cIkNsZWFyIGV2ZW50c1wiXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkNsZWFyIGV2ZW50c1wiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5oYW5kbGVDbGVhckV2ZW50c31cbiAgICAgICAgICAgICAgICA/ZGlzYWJsZWQ9JHtldmVudHMubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgJHt0aGlzLnJlbmRlckljb24oXCJUcmFzaDJcIil9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtWzExcHhdIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIFNob3dpbmcgJHtmaWx0ZXJlZEV2ZW50cy5sZW5ndGh9IG9mICR7ZXZlbnRzLmxlbmd0aH0ke3RoaXMuc2VsZWN0ZWRDb250ZXh0ID09PSBcImFsbC1hZ2VudHNcIiA/IFwiXCIgOiBgIGZvciAke3NlbGVjdGVkTGFiZWx9YH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZWxhdGl2ZSBoLWZ1bGwgdy1mdWxsIG92ZXJmbG93LXktYXV0byBvdmVyZmxvdy14LWhpZGRlblwiPlxuICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInctZnVsbCB0YWJsZS1maXhlZCBib3JkZXItY29sbGFwc2UgdGV4dC14cyBib3gtYm9yZGVyXCI+XG4gICAgICAgICAgICA8dGhlYWQgY2xhc3M9XCJzdGlja3kgdG9wLTAgei0xMFwiPlxuICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cImJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZSBweC0zIHB5LTIgdGV4dC1sZWZ0IGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAgICAgIEFnZW50XG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJib3JkZXItYiBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcHgtMyBweS0yIHRleHQtbGVmdCBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgICBUaW1lXG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJib3JkZXItYiBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcHgtMyBweS0yIHRleHQtbGVmdCBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgICBFdmVudCBUeXBlXG4gICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJib3JkZXItYiBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcHgtMyBweS0yIHRleHQtbGVmdCBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgICBBRy1VSSBFdmVudFxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAke2ZpbHRlcmVkRXZlbnRzLm1hcCgoZXZlbnQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCByb3dCZyA9IGluZGV4ICUgMiA9PT0gMCA/IFwiYmctd2hpdGVcIiA6IFwiYmctZ3JheS01MC81MFwiO1xuICAgICAgY29uc3QgYmFkZ2VDbGFzc2VzID0gdGhpcy5nZXRFdmVudEJhZGdlQ2xhc3NlcyhldmVudC50eXBlKTtcbiAgICAgIGNvbnN0IGV4dHJhY3RlZEV2ZW50ID0gdGhpcy5leHRyYWN0RXZlbnRGcm9tUGF5bG9hZChldmVudC5wYXlsb2FkKTtcbiAgICAgIGNvbnN0IGlubGluZUV2ZW50ID0gdGhpcy5zdHJpbmdpZnlQYXlsb2FkKGV4dHJhY3RlZEV2ZW50LCBmYWxzZSkgfHwgXCJcXHUyMDE0XCI7XG4gICAgICBjb25zdCBwcmV0dHlFdmVudCA9IHRoaXMuc3RyaW5naWZ5UGF5bG9hZChleHRyYWN0ZWRFdmVudCwgdHJ1ZSkgfHwgaW5saW5lRXZlbnQ7XG4gICAgICBjb25zdCBpc0V4cGFuZGVkID0gdGhpcy5leHBhbmRlZFJvd3MuaGFzKGV2ZW50LmlkKTtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgICAgICAgICAgPHRyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiJHtyb3dCZ30gY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbiBob3ZlcjpiZy1ibHVlLTUwLzUwXCJcbiAgICAgICAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy50b2dnbGVSb3dFeHBhbnNpb24oZXZlbnQuaWQpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJib3JkZXItbCBib3JkZXItciBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgcHgtMyBweS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb250LW1vbm8gdGV4dC1bMTFweF0gdGV4dC1ncmF5LTYwMFwiPiR7ZXZlbnQuYWdlbnRJZH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImJvcmRlci1yIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBweC0zIHB5LTIgZm9udC1tb25vIHRleHQtWzExcHhdIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB0aXRsZT0ke25ldyBEYXRlKGV2ZW50LnRpbWVzdGFtcCkudG9Mb2NhbGVTdHJpbmcoKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAke25ldyBEYXRlKGV2ZW50LnRpbWVzdGFtcCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJib3JkZXItciBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgcHgtMyBweS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9JHtiYWRnZUNsYXNzZXN9PiR7ZXZlbnQudHlwZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImJvcmRlci1yIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBweC0zIHB5LTIgZm9udC1tb25vIHRleHQtWzEwcHhdIHRleHQtZ3JheS02MDAgJHtpc0V4cGFuZGVkID8gXCJcIiA6IFwidHJ1bmNhdGUgbWF4LXcteHNcIn1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAke2lzRXhwYW5kZWQgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncm91cCByZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHByZSBjbGFzcz1cIm0tMCB3aGl0ZXNwYWNlLXByZS13cmFwIGJyZWFrLXdvcmRzIHRleHQtWzEwcHhdIGZvbnQtbW9ubyB0ZXh0LWdyYXktNjAwXCI+JHtwcmV0dHlFdmVudH08L3ByZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJhYnNvbHV0ZSByaWdodC0wIHRvcC0wIGN1cnNvci1wb2ludGVyIHJvdW5kZWQgcHgtMiBweS0xIHRleHQtWzEwcHhdIG9wYWNpdHktMCB0cmFuc2l0aW9uIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwICR7dGhpcy5jb3BpZWRFdmVudHMuaGFzKGV2ZW50LmlkKSA/IFwiYmctZ3JlZW4tMTAwIHRleHQtZ3JlZW4tNzAwXCIgOiBcImJnLWdyYXktMTAwIHRleHQtZ3JheS02MDAgaG92ZXI6YmctZ3JheS0yMDAgaG92ZXI6dGV4dC1ncmF5LTkwMFwifVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz0keyhlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuY29weVRvQ2xpcGJvYXJkKHByZXR0eUV2ZW50LCBldmVudC5pZCk7XG4gICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuY29waWVkRXZlbnRzLmhhcyhldmVudC5pZCkgPyBodG1sYDxzcGFuPuKckyBDb3BpZWQ8L3NwYW4+YCA6IGh0bWxgPHNwYW4+Q29weTwvc3Bhbj5gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAgOiBpbmxpbmVFdmVudH1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgYDtcbiAgICB9KX1cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG4gIGhhbmRsZUV2ZW50RmlsdGVySW5wdXQoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgdGhpcy5ldmVudEZpbHRlclRleHQgPSB0YXJnZXQ/LnZhbHVlID8/IFwiXCI7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cbiAgaGFuZGxlRXZlbnRUeXBlQ2hhbmdlKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0Py52YWx1ZTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZXZlbnRUeXBlRmlsdGVyID0gdmFsdWU7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cbiAgcmVzZXRFdmVudEZpbHRlcnMoKSB7XG4gICAgdGhpcy5ldmVudEZpbHRlclRleHQgPSBcIlwiO1xuICAgIHRoaXMuZXZlbnRUeXBlRmlsdGVyID0gXCJhbGxcIjtcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgfVxuICBleHBvcnRFdmVudHMoZXZlbnRzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShldmVudHMsIG51bGwsIDIpO1xuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtwYXlsb2FkXSwgeyB0eXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9KTtcbiAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICBjb25zdCBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgIGFuY2hvci5ocmVmID0gdXJsO1xuICAgICAgYW5jaG9yLmRvd25sb2FkID0gYGNvcGlsb3RraXQtZXZlbnRzLSR7RGF0ZS5ub3coKX0uanNvbmA7XG4gICAgICBhbmNob3IuY2xpY2soKTtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBleHBvcnQgZXZlbnRzXCIsIGVycm9yKTtcbiAgICB9XG4gIH1cbiAgcmVuZGVyQWdlbnRzVmlldygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZENvbnRleHQgPT09IFwiYWxsLWFnZW50c1wiKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaC1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC00IHB5LTggdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWF4LXctbWRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zIGZsZXgganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTMwMCBbJj5zdmddOiFoLTggWyY+c3ZnXTohdy04XCI+XG4gICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiQm90XCIpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPk5vIGFnZW50IHNlbGVjdGVkPC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJtdC0yIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlNlbGVjdCBhbiBhZ2VudCBmcm9tIHRoZSBkcm9wZG93biBhYm92ZSB0byB2aWV3IGRldGFpbHMuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuICAgIGNvbnN0IGFnZW50SWQgPSB0aGlzLnNlbGVjdGVkQ29udGV4dDtcbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmdldEFnZW50U3RhdHVzKGFnZW50SWQpO1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5nZXRBZ2VudFN0YXRzKGFnZW50SWQpO1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRMYXRlc3RTdGF0ZUZvckFnZW50KGFnZW50SWQpO1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5nZXRMYXRlc3RNZXNzYWdlc0ZvckFnZW50KGFnZW50SWQpO1xuICAgIGNvbnN0IHN0YXR1c0NvbG9ycyA9IHtcbiAgICAgIHJ1bm5pbmc6IFwiYmctZW1lcmFsZC01MCB0ZXh0LWVtZXJhbGQtNzAwXCIsXG4gICAgICBpZGxlOiBcImJnLWdyYXktMTAwIHRleHQtZ3JheS02MDBcIixcbiAgICAgIGVycm9yOiBcImJnLXJvc2UtNTAgdGV4dC1yb3NlLTcwMFwiXG4gICAgfTtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtY29sIGdhcC00IHAtNCBvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgIDwhLS0gQWdlbnQgT3ZlcnZpZXcgQ2FyZCAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZSBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4gbWItNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGgtMTAgdy0xMCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1sZyBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgJHt0aGlzLnJlbmRlckljb24oXCJCb3RcIil9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1zbSB0ZXh0LWdyYXktOTAwXCI+JHthZ2VudElkfTwvaDM+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSByb3VuZGVkLWZ1bGwgcHgtMiBweS0wLjUgdGV4dC14cyBmb250LW1lZGl1bSAke3N0YXR1c0NvbG9yc1tzdGF0dXNdfSByZWxhdGl2ZSAtdHJhbnNsYXRlLXktWzJweF1cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaC0xLjUgdy0xLjUgcm91bmRlZC1mdWxsICR7c3RhdHVzID09PSBcInJ1bm5pbmdcIiA/IFwiYmctZW1lcmFsZC01MDAgYW5pbWF0ZS1wdWxzZVwiIDogc3RhdHVzID09PSBcImVycm9yXCIgPyBcImJnLXJvc2UtNTAwXCIgOiBcImJnLWdyYXktNDAwXCJ9XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgJHtzdGF0dXMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdGF0dXMuc2xpY2UoMSl9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgJHtzdGF0cy5sYXN0QWN0aXZpdHkgPyBodG1sYDxzcGFuIGNsYXNzPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+TGFzdCBhY3Rpdml0eTogJHtuZXcgRGF0ZShzdGF0cy5sYXN0QWN0aXZpdHkpLnRvTG9jYWxlVGltZVN0cmluZygpfTwvc3Bhbj5gIDogbm90aGluZ31cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCBtZDpncmlkLWNvbHMtNFwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJyb3VuZGVkLW1kIGJnLWdyYXktNTAgcHgtMyBweS0yIHRleHQtbGVmdCB0cmFuc2l0aW9uIGhvdmVyOmJnLWdyYXktMTAwIGN1cnNvci1wb2ludGVyIG92ZXJmbG93LWhpZGRlblwiXG4gICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuaGFuZGxlTWVudVNlbGVjdChcImFnLXVpLWV2ZW50c1wiKX1cbiAgICAgICAgICAgICAgdGl0bGU9XCJWaWV3IGFsbCBldmVudHMgaW4gQUctVUkgRXZlbnRzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRydW5jYXRlIHdoaXRlc3BhY2Utbm93cmFwIHRleHQteHMgdGV4dC1ncmF5LTYwMFwiPlRvdGFsIEV2ZW50czwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj4ke3N0YXRzLnRvdGFsRXZlbnRzfTwvZGl2PlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm91bmRlZC1tZCBiZy1ncmF5LTUwIHB4LTMgcHktMiBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRydW5jYXRlIHdoaXRlc3BhY2Utbm93cmFwIHRleHQteHMgdGV4dC1ncmF5LTYwMFwiPk1lc3NhZ2VzPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMFwiPiR7c3RhdHMubWVzc2FnZXN9PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3VuZGVkLW1kIGJnLWdyYXktNTAgcHgtMyBweS0yIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHJ1bmNhdGUgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+VG9vbCBDYWxsczwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj4ke3N0YXRzLnRvb2xDYWxsc308L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdW5kZWQtbWQgYmctZ3JheS01MCBweC0zIHB5LTIgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0cnVuY2F0ZSB3aGl0ZXNwYWNlLW5vd3JhcCB0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5FcnJvcnM8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+JHtzdGF0cy5lcnJvcnN9PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPCEtLSBDdXJyZW50IFN0YXRlIFNlY3Rpb24gLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctd2hpdGVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIHB4LTQgcHktM1wiPlxuICAgICAgICAgICAgPGg0IGNsYXNzPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj5DdXJyZW50IFN0YXRlPC9oND5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwib3ZlcmZsb3ctYXV0byBwLTRcIj5cbiAgICAgICAgICAgICR7dGhpcy5oYXNSZW5kZXJhYmxlU3RhdGUoc3RhdGUpID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJvdmVyZmxvdy1hdXRvIHJvdW5kZWQtbWQgYmctZ3JheS01MCBwLTMgdGV4dC14cyB0ZXh0LWdyYXktODAwIG1heC1oLTY0XCI+PGNvZGU+JHt0aGlzLmZvcm1hdFN0YXRlRm9yRGlzcGxheShzdGF0ZSl9PC9jb2RlPjwvcHJlPlxuICAgICAgICAgICAgICAgIGAgOiBodG1sYFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaC00MCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWxnIHRleHQtZ3JheS00MDBcIj4ke3RoaXMucmVuZGVySWNvbihcIkRhdGFiYXNlXCIpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5TdGF0ZSBpcyBlbXB0eTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8IS0tIEN1cnJlbnQgTWVzc2FnZXMgU2VjdGlvbiAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJib3JkZXItYiBib3JkZXItZ3JheS0yMDAgcHgtNCBweS0zXCI+XG4gICAgICAgICAgICA8aDQgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMFwiPkN1cnJlbnQgTWVzc2FnZXM8L2g0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgICAgICAke21lc3NhZ2VzICYmIG1lc3NhZ2VzLmxlbmd0aCA+IDAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwidy1mdWxsIHRleHQteHNcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzPVwiYmctZ3JheS01MFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cInB4LTQgcHktMiB0ZXh0LWxlZnQgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlJvbGU8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPVwicHgtNCBweS0yIHRleHQtbGVmdCBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+Q29udGVudDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5IGNsYXNzPVwiZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgJHttZXNzYWdlcy5tYXAoKG1zZykgPT4ge1xuICAgICAgY29uc3Qgcm9sZSA9IG1zZy5yb2xlIHx8IFwidW5rbm93blwiO1xuICAgICAgY29uc3Qgcm9sZUNvbG9ycyA9IHtcbiAgICAgICAgdXNlcjogXCJiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwXCIsXG4gICAgICAgIGFzc2lzdGFudDogXCJiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDBcIixcbiAgICAgICAgc3lzdGVtOiBcImJnLWdyYXktMTAwIHRleHQtZ3JheS04MDBcIixcbiAgICAgICAgdG9vbDogXCJiZy1hbWJlci0xMDAgdGV4dC1hbWJlci04MDBcIixcbiAgICAgICAgdW5rbm93bjogXCJiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNjAwXCJcbiAgICAgIH07XG4gICAgICBjb25zdCByYXdDb250ZW50ID0gbXNnLmNvbnRlbnRUZXh0ID8/IFwiXCI7XG4gICAgICBjb25zdCB0b29sQ2FsbHMgPSBtc2cudG9vbENhbGxzID8/IFtdO1xuICAgICAgY29uc3QgaGFzQ29udGVudCA9IHJhd0NvbnRlbnQudHJpbSgpLmxlbmd0aCA+IDA7XG4gICAgICBjb25zdCBjb250ZW50RmFsbGJhY2sgPSB0b29sQ2FsbHMubGVuZ3RoID4gMCA/IFwiSW52b2tlZCB0b29sIGNhbGxcIiA6IFwiXFx1MjAxNFwiO1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJweC00IHB5LTIgYWxpZ24tdG9wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImlubGluZS1mbGV4IHJvdW5kZWQgcHgtMiBweS0wLjUgdGV4dC1bMTBweF0gZm9udC1tZWRpdW0gJHtyb2xlQ29sb3JzW3JvbGVdIHx8IHJvbGVDb2xvcnMudW5rbm93bn1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtyb2xlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwicHgtNCBweS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2hhc0NvbnRlbnQgPyBodG1sYDxkaXYgY2xhc3M9XCJtYXgtdy0yeGwgd2hpdGVzcGFjZS1wcmUtd3JhcCBicmVhay13b3JkcyB0ZXh0LWdyYXktNzAwXCI+JHtyYXdDb250ZW50fTwvZGl2PmAgOiBodG1sYDxkaXYgY2xhc3M9XCJ0ZXh0LXhzIGl0YWxpYyB0ZXh0LWdyYXktNDAwXCI+JHtjb250ZW50RmFsbGJhY2t9PC9kaXY+YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cm9sZSA9PT0gXCJhc3Npc3RhbnRcIiAmJiB0b29sQ2FsbHMubGVuZ3RoID4gMCA/IHRoaXMucmVuZGVyVG9vbENhbGxEZXRhaWxzKHRvb2xDYWxscykgOiBub3RoaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICBgO1xuICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICBgIDogaHRtbGBcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGgtNDAgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1sZyB0ZXh0LWdyYXktNDAwXCI+JHt0aGlzLnJlbmRlckljb24oXCJNZXNzYWdlU3F1YXJlXCIpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5ObyBtZXNzYWdlcyBhdmFpbGFibGU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG4gIHJlbmRlckNvbnRleHREcm9wZG93bigpIHtcbiAgICBjb25zdCBmaWx0ZXJlZE9wdGlvbnMgPSB0aGlzLnNlbGVjdGVkTWVudSA9PT0gXCJhZ2VudHNcIiA/IHRoaXMuY29udGV4dE9wdGlvbnMuZmlsdGVyKChvcHQpID0+IG9wdC5rZXkgIT09IFwiYWxsLWFnZW50c1wiKSA6IHRoaXMuY29udGV4dE9wdGlvbnM7XG4gICAgY29uc3Qgc2VsZWN0ZWRMYWJlbCA9IGZpbHRlcmVkT3B0aW9ucy5maW5kKChvcHQpID0+IG9wdC5rZXkgPT09IHRoaXMuc2VsZWN0ZWRDb250ZXh0KT8ubGFiZWwgPz8gXCJcIjtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJyZWxhdGl2ZSB6LTQwIG1pbi13LTAgZmxleC0xXCIgZGF0YS1jb250ZXh0LWRyb3Bkb3duLXJvb3Q9XCJ0cnVlXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBjbGFzcz1cInJlbGF0aXZlIHotNDAgZmxleCB3LWZ1bGwgbWluLXctMCBtYXgtdy1bMjQwcHhdIGl0ZW1zLWNlbnRlciBnYXAtMS41IHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBweC0yIHB5LTEgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIHRyYW5zaXRpb24gaG92ZXI6Ym9yZGVyLWdyYXktMzAwIGhvdmVyOmJnLWdyYXktNTBcIlxuICAgICAgICAgIEBwb2ludGVyZG93bj0ke3RoaXMuaGFuZGxlQ29udGV4dERyb3Bkb3duVG9nZ2xlfVxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZSBmbGV4LTEgdGV4dC1sZWZ0XCI+JHtzZWxlY3RlZExhYmVsfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInNocmluay0wIHRleHQtZ3JheS00MDBcIj4ke3RoaXMucmVuZGVySWNvbihcIkNoZXZyb25Eb3duXCIpfTwvc3Bhbj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgICR7dGhpcy5jb250ZXh0TWVudU9wZW4gPyBodG1sYFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJhYnNvbHV0ZSBsZWZ0LTAgei01MCBtdC0xLjUgdy00MCByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcHktMSBzaGFkb3ctbWQgcmluZy0xIHJpbmctYmxhY2svNVwiXG4gICAgICAgICAgICAgICAgZGF0YS1jb250ZXh0LWRyb3Bkb3duLXJvb3Q9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7ZmlsdGVyZWRPcHRpb25zLm1hcChcbiAgICAgIChvcHRpb24pID0+IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHgtMyBweS0xLjUgdGV4dC1sZWZ0IHRleHQteHMgdHJhbnNpdGlvbiBob3ZlcjpiZy1ncmF5LTUwIGZvY3VzOmJnLWdyYXktNTAgZm9jdXM6b3V0bGluZS1ub25lXCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNvbnRleHQtZHJvcGRvd24tcm9vdD1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuaGFuZGxlQ29udGV4dE9wdGlvblNlbGVjdChvcHRpb24ua2V5KX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidHJ1bmNhdGUgJHtvcHRpb24ua2V5ID09PSB0aGlzLnNlbGVjdGVkQ29udGV4dCA/IFwidGV4dC1ncmF5LTkwMCBmb250LW1lZGl1bVwiIDogXCJ0ZXh0LWdyYXktNjAwXCJ9XCI+JHtvcHRpb24ubGFiZWx9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICR7b3B0aW9uLmtleSA9PT0gdGhpcy5zZWxlY3RlZENvbnRleHQgPyBodG1sYDxzcGFuIGNsYXNzPVwidGV4dC1ncmF5LTUwMFwiPiR7dGhpcy5yZW5kZXJJY29uKFwiQ2hlY2tcIil9PC9zcGFuPmAgOiBub3RoaW5nfVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIGBcbiAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGAgOiBub3RoaW5nfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuICBoYW5kbGVNZW51U2VsZWN0KGtleSkge1xuICAgIGlmICghdGhpcy5tZW51SXRlbXMuc29tZSgoaXRlbSkgPT4gaXRlbS5rZXkgPT09IGtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZWxlY3RlZE1lbnUgPSBrZXk7XG4gICAgaWYgKGtleSA9PT0gXCJhZ2VudHNcIiAmJiB0aGlzLnNlbGVjdGVkQ29udGV4dCA9PT0gXCJhbGwtYWdlbnRzXCIpIHtcbiAgICAgIGNvbnN0IGFnZW50T3B0aW9ucyA9IHRoaXMuY29udGV4dE9wdGlvbnMuZmlsdGVyKChvcHQpID0+IG9wdC5rZXkgIT09IFwiYWxsLWFnZW50c1wiKTtcbiAgICAgIGlmIChhZ2VudE9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0QWdlbnQgPSBhZ2VudE9wdGlvbnMuZmluZCgob3B0KSA9PiBvcHQua2V5ID09PSBcImRlZmF1bHRcIik7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDb250ZXh0ID0gZGVmYXVsdEFnZW50ID8gZGVmYXVsdEFnZW50LmtleSA6IGFnZW50T3B0aW9uc1swXS5rZXk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY29udGV4dE1lbnVPcGVuID0gZmFsc2U7XG4gICAgdGhpcy5wZXJzaXN0U3RhdGUoKTtcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgfVxuICBoYW5kbGVDb250ZXh0RHJvcGRvd25Ub2dnbGUoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuY29udGV4dE1lbnVPcGVuID0gIXRoaXMuY29udGV4dE1lbnVPcGVuO1xuICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICB9XG4gIGhhbmRsZUNvbnRleHRPcHRpb25TZWxlY3Qoa2V5KSB7XG4gICAgaWYgKCF0aGlzLmNvbnRleHRPcHRpb25zLnNvbWUoKG9wdGlvbikgPT4gb3B0aW9uLmtleSA9PT0ga2V5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3RlZENvbnRleHQgIT09IGtleSkge1xuICAgICAgdGhpcy5zZWxlY3RlZENvbnRleHQgPSBrZXk7XG4gICAgICB0aGlzLmV4cGFuZGVkUm93cy5jbGVhcigpO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHRNZW51T3BlbiA9IGZhbHNlO1xuICAgIHRoaXMucGVyc2lzdFN0YXRlKCk7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cbiAgcmVuZGVyVG9vbHNWaWV3KCkge1xuICAgIGlmICghdGhpcy5fY29yZSkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGgtZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtNCBweS04IHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgIE5vIGNvcmUgaW5zdGFuY2UgYXZhaWxhYmxlXG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG4gICAgdGhpcy5yZWZyZXNoVG9vbHNTbmFwc2hvdCgpO1xuICAgIGNvbnN0IGFsbFRvb2xzID0gdGhpcy5jYWNoZWRUb29scztcbiAgICBpZiAoYWxsVG9vbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaC1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC00IHB5LTggdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWF4LXctbWRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zIGZsZXgganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTMwMCBbJj5zdmddOiFoLTggWyY+c3ZnXTohdy04XCI+XG4gICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiSGFtbWVyXCIpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPk5vIHRvb2xzIGF2YWlsYWJsZTwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwibXQtMiB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5Ub29scyB3aWxsIGFwcGVhciBoZXJlIG9uY2UgYWdlbnRzIGFyZSBjb25maWd1cmVkIHdpdGggdG9vbCBoYW5kbGVycyBvciByZW5kZXJlcnMuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuICAgIGNvbnN0IGZpbHRlcmVkVG9vbHMgPSB0aGlzLnNlbGVjdGVkQ29udGV4dCA9PT0gXCJhbGwtYWdlbnRzXCIgPyBhbGxUb29scyA6IGFsbFRvb2xzLmZpbHRlcigodG9vbCkgPT4gIXRvb2wuYWdlbnRJZCB8fCB0b29sLmFnZW50SWQgPT09IHRoaXMuc2VsZWN0ZWRDb250ZXh0KTtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGgtZnVsbCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm92ZXJmbG93LWF1dG8gcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgJHtmaWx0ZXJlZFRvb2xzLm1hcCgodG9vbCkgPT4gdGhpcy5yZW5kZXJUb29sQ2FyZCh0b29sKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuICBleHRyYWN0VG9vbHNGcm9tQWdlbnRzKCkge1xuICAgIGlmICghdGhpcy5fY29yZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCB0b29scyA9IFtdO1xuICAgIGZvciAoY29uc3QgY29yZVRvb2wgb2YgdGhpcy5fY29yZS50b29scyA/PyBbXSkge1xuICAgICAgdG9vbHMucHVzaCh7XG4gICAgICAgIGFnZW50SWQ6IGNvcmVUb29sLmFnZW50SWQgPz8gXCJcIixcbiAgICAgICAgbmFtZTogY29yZVRvb2wubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGNvcmVUb29sLmRlc2NyaXB0aW9uLFxuICAgICAgICBwYXJhbWV0ZXJzOiBjb3JlVG9vbC5wYXJhbWV0ZXJzLFxuICAgICAgICB0eXBlOiBcImhhbmRsZXJcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2FnZW50SWQsIGFnZW50XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLl9jb3JlLmFnZW50cykpIHtcbiAgICAgIGlmICghYWdlbnQpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgaGFuZGxlcnMgPSBhZ2VudC50b29sSGFuZGxlcnM7XG4gICAgICBpZiAoaGFuZGxlcnMgJiYgdHlwZW9mIGhhbmRsZXJzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3Rvb2xOYW1lLCBoYW5kbGVyXSBvZiBPYmplY3QuZW50cmllcyhoYW5kbGVycykpIHtcbiAgICAgICAgICBpZiAoaGFuZGxlciAmJiB0eXBlb2YgaGFuZGxlciA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlck9iaiA9IGhhbmRsZXI7XG4gICAgICAgICAgICB0b29scy5wdXNoKHtcbiAgICAgICAgICAgICAgYWdlbnRJZCxcbiAgICAgICAgICAgICAgbmFtZTogdG9vbE5hbWUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0eXBlb2YgaGFuZGxlck9iai5kZXNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIiAmJiBoYW5kbGVyT2JqLmRlc2NyaXB0aW9uIHx8IGhhbmRsZXJPYmoudG9vbD8uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgIHBhcmFtZXRlcnM6IGhhbmRsZXJPYmoucGFyYW1ldGVycyA/PyBoYW5kbGVyT2JqLnRvb2w/LnBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgIHR5cGU6IFwiaGFuZGxlclwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlbmRlcmVycyA9IGFnZW50LnRvb2xSZW5kZXJlcnM7XG4gICAgICBpZiAocmVuZGVyZXJzICYmIHR5cGVvZiByZW5kZXJlcnMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBbdG9vbE5hbWUsIHJlbmRlcmVyXSBvZiBPYmplY3QuZW50cmllcyhyZW5kZXJlcnMpKSB7XG4gICAgICAgICAgaWYgKCF0b29scy5zb21lKCh0KSA9PiB0LmFnZW50SWQgPT09IGFnZW50SWQgJiYgdC5uYW1lID09PSB0b29sTmFtZSkpIHtcbiAgICAgICAgICAgIGlmIChyZW5kZXJlciAmJiB0eXBlb2YgcmVuZGVyZXIgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVuZGVyZXJPYmogPSByZW5kZXJlcjtcbiAgICAgICAgICAgICAgdG9vbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgYWdlbnRJZCxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sTmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdHlwZW9mIHJlbmRlcmVyT2JqLmRlc2NyaXB0aW9uID09PSBcInN0cmluZ1wiICYmIHJlbmRlcmVyT2JqLmRlc2NyaXB0aW9uIHx8IHJlbmRlcmVyT2JqLnRvb2w/LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHJlbmRlcmVyT2JqLnBhcmFtZXRlcnMgPz8gcmVuZGVyZXJPYmoudG9vbD8ucGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlbmRlcmVyXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0b29scy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudENvbXBhcmUgPSBhLmFnZW50SWQubG9jYWxlQ29tcGFyZShiLmFnZW50SWQpO1xuICAgICAgaWYgKGFnZW50Q29tcGFyZSAhPT0gMCkgcmV0dXJuIGFnZW50Q29tcGFyZTtcbiAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpO1xuICAgIH0pO1xuICB9XG4gIHJlbmRlclRvb2xDYXJkKHRvb2wpIHtcbiAgICBjb25zdCBpc0V4cGFuZGVkID0gdGhpcy5leHBhbmRlZFRvb2xzLmhhcyhgJHt0b29sLmFnZW50SWR9OiR7dG9vbC5uYW1lfWApO1xuICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuZXh0cmFjdFNjaGVtYUluZm8odG9vbC5wYXJhbWV0ZXJzKTtcbiAgICBjb25zdCB0eXBlQ29sb3JzID0ge1xuICAgICAgaGFuZGxlcjogXCJiZy1ibHVlLTUwIHRleHQtYmx1ZS03MDAgYm9yZGVyLWJsdWUtMjAwXCIsXG4gICAgICByZW5kZXJlcjogXCJiZy1wdXJwbGUtNTAgdGV4dC1wdXJwbGUtNzAwIGJvcmRlci1wdXJwbGUtMjAwXCJcbiAgICB9O1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBjbGFzcz1cInJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZSBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGNsYXNzPVwidy1mdWxsIHB4LTQgcHktMyB0ZXh0LWxlZnQgdHJhbnNpdGlvbiBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLnRvZ2dsZVRvb2xFeHBhbnNpb24oYCR7dG9vbC5hZ2VudElkfToke3Rvb2wubmFtZX1gKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLXN0YXJ0IGp1c3RpZnktYmV0d2VlbiBnYXAtM1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0xXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb250LW1vbm8gdGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj4ke3Rvb2wubmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgcm91bmRlZC1zbSBib3JkZXIgcHgtMS41IHB5LTAuNSB0ZXh0LVsxMHB4XSBmb250LW1lZGl1bSAke3R5cGVDb2xvcnNbdG9vbC50eXBlXX1cIj5cbiAgICAgICAgICAgICAgICAgICR7dG9vbC50eXBlfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XG4gICAgICAgICAgICAgICAgICAke3RoaXMucmVuZGVySWNvbihcIkJvdFwiKX1cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9udC1tb25vXCI+JHt0b29sLmFnZW50SWR9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAke3NjaGVtYS5wcm9wZXJ0aWVzLmxlbmd0aCA+IDAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1ncmF5LTMwMFwiPuKAojwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3NjaGVtYS5wcm9wZXJ0aWVzLmxlbmd0aH0gcGFyYW1ldGVyJHtzY2hlbWEucHJvcGVydGllcy5sZW5ndGggIT09IDEgPyBcInNcIiA6IFwiXCJ9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBgIDogbm90aGluZ31cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICR7dG9vbC5kZXNjcmlwdGlvbiA/IGh0bWxgPHAgY2xhc3M9XCJtdC0yIHRleHQteHMgdGV4dC1ncmF5LTYwMFwiPiR7dG9vbC5kZXNjcmlwdGlvbn08L3A+YCA6IG5vdGhpbmd9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2hyaW5rLTAgdGV4dC1ncmF5LTQwMCB0cmFuc2l0aW9uICR7aXNFeHBhbmRlZCA/IFwicm90YXRlLTE4MFwiIDogXCJcIn1cIj5cbiAgICAgICAgICAgICAgJHt0aGlzLnJlbmRlckljb24oXCJDaGV2cm9uRG93blwiKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgJHtpc0V4cGFuZGVkID8gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvcmRlci10IGJvcmRlci1ncmF5LTIwMCBiZy1ncmF5LTUwLzUwIHB4LTQgcHktM1wiPlxuICAgICAgICAgICAgICAgICR7c2NoZW1hLnByb3BlcnRpZXMubGVuZ3RoID4gMCA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwibWItMyB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTcwMFwiPlBhcmFtZXRlcnM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7c2NoZW1hLnByb3BlcnRpZXMubWFwKChwcm9wKSA9PiBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIGJnLXdoaXRlIHAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLXN0YXJ0IGp1c3RpZnktYmV0d2VlbiBnYXAtMiBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtbW9ubyB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj4ke3Byb3AubmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSBzaHJpbmstMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Byb3AucmVxdWlyZWQgPyBodG1sYDxzcGFuIGNsYXNzPVwidGV4dC1bOXB4XSByb3VuZGVkIGJvcmRlciBib3JkZXItcm9zZS0yMDAgYmctcm9zZS01MCBweC0xIHB5LTAuNSBmb250LW1lZGl1bSB0ZXh0LXJvc2UtNzAwXCI+cmVxdWlyZWQ8L3NwYW4+YCA6IGh0bWxgPHNwYW4gY2xhc3M9XCJ0ZXh0LVs5cHhdIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy1ncmF5LTUwIHB4LTEgcHktMC41IGZvbnQtbWVkaXVtIHRleHQtZ3JheS02MDBcIj5vcHRpb25hbDwvc3Bhbj5gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Byb3AudHlwZSA/IGh0bWxgPHNwYW4gY2xhc3M9XCJ0ZXh0LVs5cHhdIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy1ncmF5LTUwIHB4LTEgcHktMC41IGZvbnQtbW9ubyB0ZXh0LWdyYXktNjAwXCI+JHtwcm9wLnR5cGV9PC9zcGFuPmAgOiBub3RoaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwcm9wLmRlc2NyaXB0aW9uID8gaHRtbGA8cCBjbGFzcz1cIm10LTEgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+JHtwcm9wLmRlc2NyaXB0aW9ufTwvcD5gIDogbm90aGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Byb3AuZGVmYXVsdFZhbHVlICE9PSB2b2lkIDAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC0yIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgdGV4dC1bMTBweF0gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RGVmYXVsdDo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cInJvdW5kZWQgYmctZ3JheS0xMDAgcHgtMSBweS0wLjUgZm9udC1tb25vXCI+JHtKU09OLnN0cmluZ2lmeShwcm9wLmRlZmF1bHRWYWx1ZSl9PC9jb2RlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgIDogbm90aGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Byb3AuZW51bSAmJiBwcm9wLmVudW0ubGVuZ3RoID4gMCA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1bMTBweF0gdGV4dC1ncmF5LTUwMFwiPkFsbG93ZWQgdmFsdWVzOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC0xIGZsZXggZmxleC13cmFwIGdhcC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cHJvcC5lbnVtLm1hcCgodmFsKSA9PiBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwicm91bmRlZCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIGJnLWdyYXktNTAgcHgtMS41IHB5LTAuNSB0ZXh0LVsxMHB4XSBmb250LW1vbm8gdGV4dC1ncmF5LTcwMFwiPiR7SlNPTi5zdHJpbmdpZnkodmFsKX08L2NvZGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgOiBub3RoaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIGApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgIDogaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktNCB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPk5vIHBhcmFtZXRlcnMgZGVmaW5lZDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgIDogbm90aGluZ31cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbiAgZXh0cmFjdFNjaGVtYUluZm8ocGFyYW1ldGVycykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHsgcHJvcGVydGllczogW10gfTtcbiAgICBpZiAoIXBhcmFtZXRlcnMgfHwgdHlwZW9mIHBhcmFtZXRlcnMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNvbnN0IHpvZERlZiA9IHBhcmFtZXRlcnMuX2RlZjtcbiAgICBpZiAoem9kRGVmICYmIHR5cGVvZiB6b2REZWYgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGlmICh6b2REZWYudHlwZU5hbWUgPT09IFwiWm9kT2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3QgcmF3U2hhcGUgPSB6b2REZWYuc2hhcGU7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdHlwZW9mIHJhd1NoYXBlID09PSBcImZ1bmN0aW9uXCIgPyByYXdTaGFwZSgpIDogcmF3U2hhcGU7XG4gICAgICAgIGlmICghc2hhcGUgfHwgdHlwZW9mIHNoYXBlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1aXJlZEtleXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgICBpZiAoem9kRGVmLnVua25vd25LZXlzID09PSBcInN0cmljdFwiIHx8ICF6b2REZWYuY2F0Y2hhbGwpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhzaGFwZSB8fCB7fSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgZmllbGREZWYgPSBjYW5kaWRhdGU/Ll9kZWY7XG4gICAgICAgICAgICBpZiAoZmllbGREZWYgJiYgIXRoaXMuaXNab2RPcHRpb25hbChjYW5kaWRhdGUpKSB7XG4gICAgICAgICAgICAgIHJlcXVpcmVkS2V5cy5hZGQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGFwZSB8fCB7fSkpIHtcbiAgICAgICAgICBjb25zdCBmaWVsZEluZm8gPSB0aGlzLmV4dHJhY3Rab2RGaWVsZEluZm8odmFsdWUpO1xuICAgICAgICAgIHJlc3VsdC5wcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZToga2V5LFxuICAgICAgICAgICAgdHlwZTogZmllbGRJbmZvLnR5cGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZmllbGRJbmZvLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkS2V5cy5oYXMoa2V5KSxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogZmllbGRJbmZvLmRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgIGVudW06IGZpZWxkSW5mby5lbnVtXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcmFtZXRlcnMudHlwZSA9PT0gXCJvYmplY3RcIiAmJiBwYXJhbWV0ZXJzLnByb3BlcnRpZXMpIHtcbiAgICAgIGNvbnN0IHByb3BzID0gcGFyYW1ldGVycy5wcm9wZXJ0aWVzO1xuICAgICAgY29uc3QgcmVxdWlyZWQgPSBuZXcgU2V0KFxuICAgICAgICBBcnJheS5pc0FycmF5KHBhcmFtZXRlcnMucmVxdWlyZWQpID8gcGFyYW1ldGVycy5yZXF1aXJlZCA6IFtdXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcHMgPz8ge30pKSB7XG4gICAgICAgIGNvbnN0IHByb3AgPSB2YWx1ZTtcbiAgICAgICAgcmVzdWx0LnByb3BlcnRpZXMucHVzaCh7XG4gICAgICAgICAgbmFtZToga2V5LFxuICAgICAgICAgIHR5cGU6IHByb3AudHlwZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdHlwZW9mIHByb3AuZGVzY3JpcHRpb24gPT09IFwic3RyaW5nXCIgPyBwcm9wLmRlc2NyaXB0aW9uIDogdm9pZCAwLFxuICAgICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZC5oYXMoa2V5KSxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHByb3AuZGVmYXVsdCxcbiAgICAgICAgICBlbnVtOiBBcnJheS5pc0FycmF5KHByb3AuZW51bSkgPyBwcm9wLmVudW0gOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgaXNab2RPcHRpb25hbCh6b2RTY2hlbWEpIHtcbiAgICBjb25zdCBzY2hlbWEgPSB6b2RTY2hlbWE7XG4gICAgaWYgKCFzY2hlbWE/Ll9kZWYpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX2RlZjtcbiAgICBpZiAoZGVmLnR5cGVOYW1lID09PSBcIlpvZE9wdGlvbmFsXCIgfHwgZGVmLnR5cGVOYW1lID09PSBcIlpvZE51bGxhYmxlXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoZGVmLmRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGV4dHJhY3Rab2RGaWVsZEluZm8oem9kU2NoZW1hKSB7XG4gICAgY29uc3QgaW5mbyA9IHt9O1xuICAgIGNvbnN0IHNjaGVtYSA9IHpvZFNjaGVtYTtcbiAgICBpZiAoIXNjaGVtYT8uX2RlZikgcmV0dXJuIGluZm87XG4gICAgbGV0IGN1cnJlbnRTY2hlbWEgPSBzY2hlbWE7XG4gICAgbGV0IGRlZiA9IGN1cnJlbnRTY2hlbWEuX2RlZjtcbiAgICB3aGlsZSAoZGVmLnR5cGVOYW1lID09PSBcIlpvZE9wdGlvbmFsXCIgfHwgZGVmLnR5cGVOYW1lID09PSBcIlpvZE51bGxhYmxlXCIgfHwgZGVmLnR5cGVOYW1lID09PSBcIlpvZERlZmF1bHRcIikge1xuICAgICAgaWYgKGRlZi50eXBlTmFtZSA9PT0gXCJab2REZWZhdWx0XCIgJiYgZGVmLmRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGluZm8uZGVmYXVsdFZhbHVlID0gdHlwZW9mIGRlZi5kZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IGRlZi5kZWZhdWx0VmFsdWUoKSA6IGRlZi5kZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBjdXJyZW50U2NoZW1hID0gZGVmLmlubmVyVHlwZSA/PyBjdXJyZW50U2NoZW1hO1xuICAgICAgaWYgKCFjdXJyZW50U2NoZW1hPy5fZGVmKSBicmVhaztcbiAgICAgIGRlZiA9IGN1cnJlbnRTY2hlbWEuX2RlZjtcbiAgICB9XG4gICAgaW5mby5kZXNjcmlwdGlvbiA9IHR5cGVvZiBkZWYuZGVzY3JpcHRpb24gPT09IFwic3RyaW5nXCIgPyBkZWYuZGVzY3JpcHRpb24gOiB2b2lkIDA7XG4gICAgY29uc3QgdHlwZU5hbWUgPSB0eXBlb2YgZGVmLnR5cGVOYW1lID09PSBcInN0cmluZ1wiID8gZGVmLnR5cGVOYW1lIDogdm9pZCAwO1xuICAgIGNvbnN0IHR5cGVNYXAgPSB7XG4gICAgICBab2RTdHJpbmc6IFwic3RyaW5nXCIsXG4gICAgICBab2ROdW1iZXI6IFwibnVtYmVyXCIsXG4gICAgICBab2RCb29sZWFuOiBcImJvb2xlYW5cIixcbiAgICAgIFpvZEFycmF5OiBcImFycmF5XCIsXG4gICAgICBab2RPYmplY3Q6IFwib2JqZWN0XCIsXG4gICAgICBab2RFbnVtOiBcImVudW1cIixcbiAgICAgIFpvZExpdGVyYWw6IFwibGl0ZXJhbFwiLFxuICAgICAgWm9kVW5pb246IFwidW5pb25cIixcbiAgICAgIFpvZEFueTogXCJhbnlcIixcbiAgICAgIFpvZFVua25vd246IFwidW5rbm93blwiXG4gICAgfTtcbiAgICBpbmZvLnR5cGUgPSB0eXBlTmFtZSA/IHR5cGVNYXBbdHlwZU5hbWVdIHx8IHR5cGVOYW1lLnJlcGxhY2UoXCJab2RcIiwgXCJcIikudG9Mb3dlckNhc2UoKSA6IHZvaWQgMDtcbiAgICBpZiAodHlwZU5hbWUgPT09IFwiWm9kRW51bVwiICYmIEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlcykpIHtcbiAgICAgIGluZm8uZW51bSA9IGRlZi52YWx1ZXM7XG4gICAgfSBlbHNlIGlmICh0eXBlTmFtZSA9PT0gXCJab2RMaXRlcmFsXCIgJiYgZGVmLnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIGluZm8uZW51bSA9IFtkZWYudmFsdWVdO1xuICAgIH1cbiAgICByZXR1cm4gaW5mbztcbiAgfVxuICB0b2dnbGVUb29sRXhwYW5zaW9uKHRvb2xJZCkge1xuICAgIGlmICh0aGlzLmV4cGFuZGVkVG9vbHMuaGFzKHRvb2xJZCkpIHtcbiAgICAgIHRoaXMuZXhwYW5kZWRUb29scy5kZWxldGUodG9vbElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5leHBhbmRlZFRvb2xzLmFkZCh0b29sSWQpO1xuICAgIH1cbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgfVxuICByZW5kZXJDb250ZXh0VmlldygpIHtcbiAgICBjb25zdCBjb250ZXh0RW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuY29udGV4dFN0b3JlKTtcbiAgICBpZiAoY29udGV4dEVudHJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaC1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC00IHB5LTggdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWF4LXctbWRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zIGZsZXgganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTMwMCBbJj5zdmddOiFoLTggWyY+c3ZnXTohdy04XCI+XG4gICAgICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiRmlsZVRleHRcIil9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+Tm8gY29udGV4dCBhdmFpbGFibGU8L3A+XG4gICAgICAgICAgICA8cCBjbGFzcz1cIm10LTIgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+Q29udGV4dCB3aWxsIGFwcGVhciBoZXJlIG9uY2UgYWRkZWQgdG8gQ29waWxvdEtpdC48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBoLWZ1bGwgZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJvdmVyZmxvdy1hdXRvIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICR7Y29udGV4dEVudHJpZXMubWFwKChbaWQsIGNvbnRleHRdKSA9PiB0aGlzLnJlbmRlckNvbnRleHRDYXJkKGlkLCBjb250ZXh0KSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuICByZW5kZXJDb250ZXh0Q2FyZChpZCwgY29udGV4dCkge1xuICAgIGNvbnN0IGlzRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkQ29udGV4dEl0ZW1zLmhhcyhpZCk7XG4gICAgY29uc3QgdmFsdWVQcmV2aWV3ID0gdGhpcy5nZXRDb250ZXh0VmFsdWVQcmV2aWV3KGNvbnRleHQudmFsdWUpO1xuICAgIGNvbnN0IGhhc1ZhbHVlID0gY29udGV4dC52YWx1ZSAhPT0gdm9pZCAwICYmIGNvbnRleHQudmFsdWUgIT09IG51bGw7XG4gICAgY29uc3QgdGl0bGUgPSBjb250ZXh0LmRlc2NyaXB0aW9uPy50cmltKCkgfHwgaWQ7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwicm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIGJnLXdoaXRlIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgY2xhc3M9XCJ3LWZ1bGwgcHgtNCBweS0zIHRleHQtbGVmdCB0cmFuc2l0aW9uIGhvdmVyOmJnLWdyYXktNTBcIlxuICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMudG9nZ2xlQ29udGV4dEV4cGFuc2lvbihpZCl9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4gZ2FwLTNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LTEgbWluLXctMFwiPlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBtYi0xXCI+JHt0aXRsZX08L3A+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtbW9ubyB0cnVuY2F0ZSBpbmxpbmUtYmxvY2sgYWxpZ24tbWlkZGxlXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDE4MHB4O1wiPiR7aWR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICR7aGFzVmFsdWUgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1ncmF5LTMwMFwiPuKAojwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRydW5jYXRlXCI+JHt2YWx1ZVByZXZpZXd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICBgIDogbm90aGluZ31cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2hyaW5rLTAgdGV4dC1ncmF5LTQwMCB0cmFuc2l0aW9uICR7aXNFeHBhbmRlZCA/IFwicm90YXRlLTE4MFwiIDogXCJcIn1cIj5cbiAgICAgICAgICAgICAgJHt0aGlzLnJlbmRlckljb24oXCJDaGV2cm9uRG93blwiKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgJHtpc0V4cGFuZGVkID8gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvcmRlci10IGJvcmRlci1ncmF5LTIwMCBiZy1ncmF5LTUwLzUwIHB4LTQgcHktM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJtYi0xIHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNzAwXCI+SUQ8L2g1PlxuICAgICAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJibG9jayByb3VuZGVkIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcHgtMiBweS0xIHRleHQtWzEwcHhdIGZvbnQtbW9ubyB0ZXh0LWdyYXktNjAwXCI+JHtpZH08L2NvZGU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgJHtoYXNWYWx1ZSA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTcwMFwiPlZhbHVlPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcHgtMiBweS0xIHRleHQtWzEwcHhdIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgdHJhbnNpdGlvbiBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz0keyhlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdm9pZCB0aGlzLmNvcHlDb250ZXh0VmFsdWUoY29udGV4dC52YWx1ZSwgaWQpO1xuICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5jb3BpZWRDb250ZXh0SXRlbXMuaGFzKGlkKSA/IFwiQ29waWVkXCIgOiBcIkNvcHkgSlNPTlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZSBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJvdmVyZmxvdy1hdXRvIHRleHQteHMgdGV4dC1ncmF5LTgwMCBtYXgtaC05NlwiPjxjb2RlPiR7dGhpcy5mb3JtYXRDb250ZXh0VmFsdWUoY29udGV4dC52YWx1ZSl9PC9jb2RlPjwvcHJlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgIDogaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktNCB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPk5vIHZhbHVlIGF2YWlsYWJsZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgIDogbm90aGluZ31cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbiAgZ2V0Q29udGV4dFZhbHVlUHJldmlldyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gXCJcXHUyMDE0XCI7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiA1MCA/IGAke3ZhbHVlLnN1YnN0cmluZygwLCA1MCl9Li4uYCA6IHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBgQXJyYXkoJHt2YWx1ZS5sZW5ndGh9KWA7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gICAgICByZXR1cm4gYE9iamVjdCB3aXRoICR7a2V5cy5sZW5ndGh9IGtleSR7a2V5cy5sZW5ndGggIT09IDEgPyBcInNcIiA6IFwiXCJ9YDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gXCJGdW5jdGlvblwiO1xuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgfVxuICBmb3JtYXRDb250ZXh0VmFsdWUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFwibnVsbFwiO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAyKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgfVxuICBhc3luYyBjb3B5Q29udGV4dFZhbHVlKHZhbHVlLCBjb250ZXh0SWQpIHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhbmF2aWdhdG9yLmNsaXBib2FyZD8ud3JpdGVUZXh0KSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDbGlwYm9hcmQgQVBJIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSB0aGlzLmZvcm1hdENvbnRleHRWYWx1ZSh2YWx1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHNlcmlhbGl6ZWQpO1xuICAgICAgdGhpcy5jb3BpZWRDb250ZXh0SXRlbXMuYWRkKGNvbnRleHRJZCk7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmNvcGllZENvbnRleHRJdGVtcy5kZWxldGUoY29udGV4dElkKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgICB9LCAxNTAwKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjb3B5IGNvbnRleHQgdmFsdWU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cbiAgdG9nZ2xlQ29udGV4dEV4cGFuc2lvbihjb250ZXh0SWQpIHtcbiAgICBpZiAodGhpcy5leHBhbmRlZENvbnRleHRJdGVtcy5oYXMoY29udGV4dElkKSkge1xuICAgICAgdGhpcy5leHBhbmRlZENvbnRleHRJdGVtcy5kZWxldGUoY29udGV4dElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5leHBhbmRlZENvbnRleHRJdGVtcy5hZGQoY29udGV4dElkKTtcbiAgICB9XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cbiAgdG9nZ2xlUm93RXhwYW5zaW9uKGV2ZW50SWQpIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24udG9TdHJpbmcoKS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmV4cGFuZGVkUm93cy5oYXMoZXZlbnRJZCkpIHtcbiAgICAgIHRoaXMuZXhwYW5kZWRSb3dzLmRlbGV0ZShldmVudElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5leHBhbmRlZFJvd3MuYWRkKGV2ZW50SWQpO1xuICAgIH1cbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgfVxuICByZW5kZXJBbm5vdW5jZW1lbnRQYW5lbCgpIHtcbiAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICByZXR1cm4gbm90aGluZztcbiAgICB9XG4gICAgdGhpcy5lbnN1cmVBbm5vdW5jZW1lbnRMb2FkaW5nKCk7XG4gICAgaWYgKCF0aGlzLmhhc1Vuc2VlbkFubm91bmNlbWVudCkge1xuICAgICAgcmV0dXJuIG5vdGhpbmc7XG4gICAgfVxuICAgIGlmICghdGhpcy5hbm5vdW5jZW1lbnRMb2FkZWQgJiYgIXRoaXMuYW5ub3VuY2VtZW50TWFya2Rvd24pIHtcbiAgICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJteC00IG15LTMgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBiZy13aGl0ZSBweC00IHB5LTMgdGV4dC1zbSB0ZXh0LXNsYXRlLTgwMCBzaGFkb3ctWzBfMTJweF8zMHB4X3JnYmEoMTUsMjMsNDIsMC4xMildXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmxpbmUtZmxleCBoLTYgdy02IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLW1kIGJnLXNsYXRlLTkwMCB0ZXh0LXdoaXRlIHNoYWRvdy1zbVwiPlxuICAgICAgICAgICAgJHt0aGlzLnJlbmRlckljb24oXCJNZWdhcGhvbmVcIil9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxzcGFuPkxvYWRpbmcgbGF0ZXN0IGFubm91bmNlbWVudOKApjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5gO1xuICAgIH1cbiAgICBpZiAodGhpcy5hbm5vdW5jZW1lbnRMb2FkRXJyb3IpIHtcbiAgICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJteC00IG15LTMgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXJvc2UtMjAwIGJnLXJvc2UtNTAgcHgtNCBweS0zIHRleHQtc20gdGV4dC1yb3NlLTkwMCBzaGFkb3ctWzBfMTJweF8zMHB4X3JnYmEoMTUsMjMsNDIsMC4xMildXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmxpbmUtZmxleCBoLTYgdy02IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLW1kIGJnLXJvc2UtNjAwIHRleHQtd2hpdGUgc2hhZG93LXNtXCI+XG4gICAgICAgICAgICAke3RoaXMucmVuZGVySWNvbihcIk1lZ2FwaG9uZVwiKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPHNwYW4+QW5ub3VuY2VtZW50IHVuYXZhaWxhYmxlPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgY2xhc3M9XCJtdC0yIHRleHQteHMgdGV4dC1yb3NlLTgwMFwiPldlIGNvdWxkbuKAmXQgbG9hZCB0aGUgbGF0ZXN0IG5vdGljZS4gUGxlYXNlIHRyeSBvcGVuaW5nIHRoZSBpbnNwZWN0b3IgYWdhaW4uPC9wPlxuICAgICAgPC9kaXY+YDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmFubm91bmNlbWVudE1hcmtkb3duKSB7XG4gICAgICByZXR1cm4gbm90aGluZztcbiAgICB9XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuYW5ub3VuY2VtZW50SHRtbCA/IHVuc2FmZUhUTUwodGhpcy5hbm5vdW5jZW1lbnRIdG1sKSA6IGh0bWxgPHByZSBjbGFzcz1cIndoaXRlc3BhY2UtcHJlLXdyYXAgdGV4dC1zbSB0ZXh0LWdyYXktOTAwXCI+JHt0aGlzLmFubm91bmNlbWVudE1hcmtkb3dufTwvcHJlPmA7XG4gICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz1cIm14LTQgbXktMyByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIGJnLXdoaXRlIHB4LTQgcHktNCBzaGFkb3ctWzBfMTJweF8zMHB4X3JnYmEoMTUsMjMsNDIsMC4xMildXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibWItMyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJpbmxpbmUtZmxleCBoLTcgdy03IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLW1kIGJnLXNsYXRlLTkwMCB0ZXh0LXdoaXRlIHNoYWRvdy1zbVwiPlxuICAgICAgICAgICR7dGhpcy5yZW5kZXJJY29uKFwiTWVnYXBob25lXCIpfVxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxzcGFuPkFubm91bmNlbWVudDwvc3Bhbj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImFubm91bmNlbWVudC1kaXNtaXNzIG1sLWF1dG9cIiB0eXBlPVwiYnV0dG9uXCIgQGNsaWNrPSR7dGhpcy5oYW5kbGVEaXNtaXNzQW5ub3VuY2VtZW50fSBhcmlhLWxhYmVsPVwiRGlzbWlzcyBhbm5vdW5jZW1lbnRcIj5cbiAgICAgICAgICBEaXNtaXNzXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiYW5ub3VuY2VtZW50LWNvbnRlbnQgdGV4dC1zbSBsZWFkaW5nLXJlbGF4ZWQgdGV4dC1ncmF5LTkwMFwiPiR7Y29udGVudH08L2Rpdj5cbiAgICA8L2Rpdj5gO1xuICB9XG4gIGVuc3VyZUFubm91bmNlbWVudExvYWRpbmcoKSB7XG4gICAgaWYgKHRoaXMuYW5ub3VuY2VtZW50UHJvbWlzZSB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBmZXRjaCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmFubm91bmNlbWVudFByb21pc2UgPSB0aGlzLmZldGNoQW5ub3VuY2VtZW50KCk7XG4gIH1cbiAgcmVuZGVyQW5ub3VuY2VtZW50UHJldmlldygpIHtcbiAgICBpZiAoIXRoaXMuaGFzVW5zZWVuQW5ub3VuY2VtZW50IHx8ICF0aGlzLnNob3dBbm5vdW5jZW1lbnRQcmV2aWV3IHx8ICF0aGlzLmFubm91bmNlbWVudFByZXZpZXdUZXh0KSB7XG4gICAgICByZXR1cm4gbm90aGluZztcbiAgICB9XG4gICAgY29uc3Qgc2lkZSA9IHRoaXMuY29udGV4dFN0YXRlLmJ1dHRvbi5hbmNob3IuaG9yaXpvbnRhbCA9PT0gXCJsZWZ0XCIgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICByZXR1cm4gaHRtbGA8ZGl2XG4gICAgICBjbGFzcz1cImFubm91bmNlbWVudC1wcmV2aWV3XCJcbiAgICAgIGRhdGEtc2lkZT0ke3NpZGV9XG4gICAgICByb2xlPVwibm90ZVwiXG4gICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmhhbmRsZUFubm91bmNlbWVudFByZXZpZXdDbGljaygpfVxuICAgID5cbiAgICAgIDxzcGFuPiR7dGhpcy5hbm5vdW5jZW1lbnRQcmV2aWV3VGV4dH08L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImFubm91bmNlbWVudC1wcmV2aWV3X19hcnJvd1wiPjwvc3Bhbj5cbiAgICA8L2Rpdj5gO1xuICB9XG4gIGhhbmRsZUFubm91bmNlbWVudFByZXZpZXdDbGljaygpIHtcbiAgICB0aGlzLnNob3dBbm5vdW5jZW1lbnRQcmV2aWV3ID0gZmFsc2U7XG4gICAgdGhpcy5vcGVuSW5zcGVjdG9yKCk7XG4gIH1cbiAgYXN5bmMgZmV0Y2hBbm5vdW5jZW1lbnQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goQU5OT1VOQ0VNRU5UX1VSTCwgeyBjYWNoZTogXCJuby1jYWNoZVwiIH0pO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGFubm91bmNlbWVudCAoJHtyZXNwb25zZS5zdGF0dXN9KWApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHR5cGVvZiBkYXRhPy50aW1lc3RhbXAgPT09IFwic3RyaW5nXCIgPyBkYXRhLnRpbWVzdGFtcCA6IG51bGw7XG4gICAgICBjb25zdCBwcmV2aWV3VGV4dCA9IHR5cGVvZiBkYXRhPy5wcmV2aWV3VGV4dCA9PT0gXCJzdHJpbmdcIiA/IGRhdGEucHJldmlld1RleHQgOiBudWxsO1xuICAgICAgY29uc3QgbWFya2Rvd24gPSB0eXBlb2YgZGF0YT8uYW5ub3VuY2VtZW50ID09PSBcInN0cmluZ1wiID8gZGF0YS5hbm5vdW5jZW1lbnQgOiBudWxsO1xuICAgICAgaWYgKCF0aW1lc3RhbXAgfHwgIW1hcmtkb3duKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBhbm5vdW5jZW1lbnQgcGF5bG9hZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0b3JlZFRpbWVzdGFtcCA9IHRoaXMubG9hZFN0b3JlZEFubm91bmNlbWVudFRpbWVzdGFtcCgpO1xuICAgICAgdGhpcy5hbm5vdW5jZW1lbnRUaW1lc3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB0aGlzLmFubm91bmNlbWVudFByZXZpZXdUZXh0ID0gcHJldmlld1RleHQgPz8gXCJcIjtcbiAgICAgIHRoaXMuYW5ub3VuY2VtZW50TWFya2Rvd24gPSBtYXJrZG93bjtcbiAgICAgIHRoaXMuaGFzVW5zZWVuQW5ub3VuY2VtZW50ID0gKCFzdG9yZWRUaW1lc3RhbXAgfHwgc3RvcmVkVGltZXN0YW1wICE9PSB0aW1lc3RhbXApICYmICEhdGhpcy5hbm5vdW5jZW1lbnRQcmV2aWV3VGV4dDtcbiAgICAgIHRoaXMuc2hvd0Fubm91bmNlbWVudFByZXZpZXcgPSB0aGlzLmhhc1Vuc2VlbkFubm91bmNlbWVudDtcbiAgICAgIHRoaXMuYW5ub3VuY2VtZW50SHRtbCA9IGF3YWl0IHRoaXMuY29udmVydE1hcmtkb3duVG9IdG1sKG1hcmtkb3duKTtcbiAgICAgIHRoaXMuYW5ub3VuY2VtZW50TG9hZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmFubm91bmNlbWVudExvYWRFcnJvciA9IGVycm9yO1xuICAgICAgdGhpcy5hbm5vdW5jZW1lbnRMb2FkZWQgPSB0cnVlO1xuICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGNvbnZlcnRNYXJrZG93blRvSHRtbChtYXJrZG93bikge1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IG1hcmtlZC5SZW5kZXJlcigpO1xuICAgIHJlbmRlcmVyLmxpbmsgPSAoaHJlZiwgdGl0bGUsIHRleHQpID0+IHtcbiAgICAgIGNvbnN0IHNhZmVIcmVmID0gdGhpcy5lc2NhcGVIdG1sQXR0cih0aGlzLmFwcGVuZFJlZlBhcmFtKGhyZWYgPz8gXCJcIikpO1xuICAgICAgY29uc3QgdGl0bGVBdHRyID0gdGl0bGUgPyBgIHRpdGxlPVwiJHt0aGlzLmVzY2FwZUh0bWxBdHRyKHRpdGxlKX1cImAgOiBcIlwiO1xuICAgICAgcmV0dXJuIGA8YSBocmVmPVwiJHtzYWZlSHJlZn1cIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lclwiJHt0aXRsZUF0dHJ9PiR7dGV4dH08L2E+YDtcbiAgICB9O1xuICAgIHJldHVybiBtYXJrZWQucGFyc2UobWFya2Rvd24sIHsgcmVuZGVyZXIgfSk7XG4gIH1cbiAgYXBwZW5kUmVmUGFyYW0oaHJlZikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGhyZWYsIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6IFwiaHR0cHM6Ly9jb3BpbG90a2l0LmFpXCIpO1xuICAgICAgaWYgKCF1cmwuc2VhcmNoUGFyYW1zLmhhcyhcInJlZlwiKSkge1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInJlZlwiLCBcImNway1pbnNwZWN0b3JcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gaHJlZjtcbiAgICB9XG4gIH1cbiAgZXNjYXBlSHRtbEF0dHIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvJi9nLCBcIiZhbXA7XCIpLnJlcGxhY2UoLzwvZywgXCImbHQ7XCIpLnJlcGxhY2UoLz4vZywgXCImZ3Q7XCIpLnJlcGxhY2UoL1xcXCIvZywgXCImcXVvdDtcIikucmVwbGFjZSgvJy9nLCBcIiYjMzk7XCIpO1xuICB9XG4gIGxvYWRTdG9yZWRBbm5vdW5jZW1lbnRUaW1lc3RhbXAoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIXdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEFOTk9VTkNFTUVOVF9TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoIXJhdykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KTtcbiAgICAgIGlmIChwYXJzZWQgJiYgdHlwZW9mIHBhcnNlZC50aW1lc3RhbXAgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlZC50aW1lc3RhbXA7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcGVyc2lzdEFubm91bmNlbWVudFRpbWVzdGFtcCh0aW1lc3RhbXApIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhd2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KHsgdGltZXN0YW1wIH0pO1xuICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEFOTk9VTkNFTUVOVF9TVE9SQUdFX0tFWSwgcGF5bG9hZCk7XG4gICAgfSBjYXRjaCB7XG4gICAgfVxuICB9XG4gIG1hcmtBbm5vdW5jZW1lbnRTZWVuKCkge1xuICAgIHRoaXMuaGFzVW5zZWVuQW5ub3VuY2VtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5zaG93QW5ub3VuY2VtZW50UHJldmlldyA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5hbm5vdW5jZW1lbnRUaW1lc3RhbXApIHtcbiAgICAgIGlmICh0aGlzLmFubm91bmNlbWVudFByb21pc2UgJiYgIXRoaXMuYW5ub3VuY2VtZW50TG9hZGVkKSB7XG4gICAgICAgIHZvaWQgdGhpcy5hbm5vdW5jZW1lbnRQcm9taXNlLnRoZW4oKCkgPT4gdGhpcy5tYXJrQW5ub3VuY2VtZW50U2VlbigpKS5jYXRjaCgoKSA9PiB2b2lkIDApO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucGVyc2lzdEFubm91bmNlbWVudFRpbWVzdGFtcCh0aGlzLmFubm91bmNlbWVudFRpbWVzdGFtcCk7XG4gICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gIH1cbn07XG5mdW5jdGlvbiBkZWZpbmVXZWJJbnNwZWN0b3IoKSB7XG4gIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KFdFQl9JTlNQRUNUT1JfVEFHKSkge1xuICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShXRUJfSU5TUEVDVE9SX1RBRywgV2ViSW5zcGVjdG9yRWxlbWVudCk7XG4gIH1cbn1cbmRlZmluZVdlYkluc3BlY3RvcigpO1xuZXhwb3J0IHtcbiAgV0VCX0lOU1BFQ1RPUl9UQUcsXG4gIFdlYkluc3BlY3RvckVsZW1lbnQsXG4gIGRlZmluZVdlYkluc3BlY3RvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@copilotkitnext/web-inspector/dist/index.mjs\n");

/***/ })

};
;